(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function bp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function jE(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function s(){var r=!1;try{r=this instanceof s}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var r=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return n[s]}})}),t}var Og={exports:{}},_l={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tb;function EE(){if(Tb)return _l;Tb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,a){var l=null;if(a!==void 0&&(l=""+a),r.key!==void 0&&(l=""+r.key),"key"in r){a={};for(var u in r)u!=="key"&&(a[u]=r[u])}else a=r;return r=a.ref,{$$typeof:n,type:s,key:l,ref:r!==void 0?r:null,props:a}}return _l.Fragment=e,_l.jsx=t,_l.jsxs=t,_l}var jb;function kE(){return jb||(jb=1,Og.exports=EE()),Og.exports}var h=kE(),Mg={exports:{}},Sl={},Rg={exports:{}},Pg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eb;function AE(){return Eb||(Eb=1,function(n){function e(P,$){var I=P.length;P.push($);e:for(;0<I;){var te=I-1>>>1,O=P[te];if(0<r(O,$))P[te]=$,P[I]=O,I=te;else break e}}function t(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var $=P[0],I=P.pop();if(I!==$){P[0]=I;e:for(var te=0,O=P.length,H=O>>>1;te<H;){var ue=2*(te+1)-1,ne=P[ue],xe=ue+1,Ae=P[xe];if(0>r(ne,I))xe<O&&0>r(Ae,ne)?(P[te]=Ae,P[xe]=I,te=xe):(P[te]=ne,P[ue]=I,te=ue);else if(xe<O&&0>r(Ae,I))P[te]=Ae,P[xe]=I,te=xe;else break e}}return $}function r(P,$){var I=P.sortIndex-$.sortIndex;return I!==0?I:P.id-$.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],f=[],m=1,v=null,y=3,b=!1,w=!1,_=!1,T=!1,S=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function M(P){for(var $=t(f);$!==null;){if($.callback===null)s(f);else if($.startTime<=P)s(f),$.sortIndex=$.expirationTime,e(d,$);else break;$=t(f)}}function N(P){if(_=!1,M(P),!w)if(t(d)!==null)w=!0,L||(L=!0,q());else{var $=t(f);$!==null&&fe(N,$.startTime-P)}}var L=!1,A=-1,B=5,Y=-1;function W(){return T?!0:!(n.unstable_now()-Y<B)}function K(){if(T=!1,L){var P=n.unstable_now();Y=P;var $=!0;try{e:{w=!1,_&&(_=!1,D(A),A=-1),b=!0;var I=y;try{t:{for(M(P),v=t(d);v!==null&&!(v.expirationTime>P&&W());){var te=v.callback;if(typeof te=="function"){v.callback=null,y=v.priorityLevel;var O=te(v.expirationTime<=P);if(P=n.unstable_now(),typeof O=="function"){v.callback=O,M(P),$=!0;break t}v===t(d)&&s(d),M(P)}else s(d);v=t(d)}if(v!==null)$=!0;else{var H=t(f);H!==null&&fe(N,H.startTime-P),$=!1}}break e}finally{v=null,y=I,b=!1}$=void 0}}finally{$?q():L=!1}}}var q;if(typeof k=="function")q=function(){k(K)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,re=oe.port2;oe.port1.onmessage=K,q=function(){re.postMessage(null)}}else q=function(){S(K,0)};function fe(P,$){A=S(function(){P(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(P){switch(y){case 1:case 2:case 3:var $=3;break;default:$=y}var I=y;y=$;try{return P()}finally{y=I}},n.unstable_requestPaint=function(){T=!0},n.unstable_runWithPriority=function(P,$){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var I=y;y=P;try{return $()}finally{y=I}},n.unstable_scheduleCallback=function(P,$,I){var te=n.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?te+I:te):I=te,P){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=I+O,P={id:m++,callback:$,priorityLevel:P,startTime:I,expirationTime:O,sortIndex:-1},I>te?(P.sortIndex=I,e(f,P),t(d)===null&&P===t(f)&&(_?(D(A),A=-1):_=!0,fe(N,I-te))):(P.sortIndex=O,e(d,P),w||b||(w=!0,L||(L=!0,q()))),P},n.unstable_shouldYield=W,n.unstable_wrapCallback=function(P){var $=y;return function(){var I=y;y=$;try{return P.apply(this,arguments)}finally{y=I}}}}(Pg)),Pg}var kb;function DE(){return kb||(kb=1,Rg.exports=AE()),Rg.exports}var Lg={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ab;function NE(){if(Ab)return Fe;Ab=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function y(O){return O===null||typeof O!="object"?null:(O=v&&O[v]||O["@@iterator"],typeof O=="function"?O:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function T(O,H,ue){this.props=O,this.context=H,this.refs=_,this.updater=ue||b}T.prototype.isReactComponent={},T.prototype.setState=function(O,H){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,H,"setState")},T.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function S(){}S.prototype=T.prototype;function D(O,H,ue){this.props=O,this.context=H,this.refs=_,this.updater=ue||b}var k=D.prototype=new S;k.constructor=D,w(k,T.prototype),k.isPureReactComponent=!0;var M=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function A(O,H,ue,ne,xe,Ae){return ue=Ae.ref,{$$typeof:n,type:O,key:H,ref:ue!==void 0?ue:null,props:Ae}}function B(O,H){return A(O.type,H,void 0,void 0,void 0,O.props)}function Y(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function W(O){var H={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ue){return H[ue]})}var K=/\/+/g;function q(O,H){return typeof O=="object"&&O!==null&&O.key!=null?W(""+O.key):H.toString(36)}function oe(){}function re(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(oe,oe):(O.status="pending",O.then(function(H){O.status==="pending"&&(O.status="fulfilled",O.value=H)},function(H){O.status==="pending"&&(O.status="rejected",O.reason=H)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function fe(O,H,ue,ne,xe){var Ae=typeof O;(Ae==="undefined"||Ae==="boolean")&&(O=null);var we=!1;if(O===null)we=!0;else switch(Ae){case"bigint":case"string":case"number":we=!0;break;case"object":switch(O.$$typeof){case n:case e:we=!0;break;case m:return we=O._init,fe(we(O._payload),H,ue,ne,xe)}}if(we)return xe=xe(O),we=ne===""?"."+q(O,0):ne,M(xe)?(ue="",we!=null&&(ue=we.replace(K,"$&/")+"/"),fe(xe,H,ue,"",function(dt){return dt})):xe!=null&&(Y(xe)&&(xe=B(xe,ue+(xe.key==null||O&&O.key===xe.key?"":(""+xe.key).replace(K,"$&/")+"/")+we)),H.push(xe)),1;we=0;var ze=ne===""?".":ne+":";if(M(O))for(var Ue=0;Ue<O.length;Ue++)ne=O[Ue],Ae=ze+q(ne,Ue),we+=fe(ne,H,ue,Ae,xe);else if(Ue=y(O),typeof Ue=="function")for(O=Ue.call(O),Ue=0;!(ne=O.next()).done;)ne=ne.value,Ae=ze+q(ne,Ue++),we+=fe(ne,H,ue,Ae,xe);else if(Ae==="object"){if(typeof O.then=="function")return fe(re(O),H,ue,ne,xe);throw H=String(O),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return we}function P(O,H,ue){if(O==null)return O;var ne=[],xe=0;return fe(O,ne,"","",function(Ae){return H.call(ue,Ae,xe++)}),ne}function $(O){if(O._status===-1){var H=O._result;H=H(),H.then(function(ue){(O._status===0||O._status===-1)&&(O._status=1,O._result=ue)},function(ue){(O._status===0||O._status===-1)&&(O._status=2,O._result=ue)}),O._status===-1&&(O._status=0,O._result=H)}if(O._status===1)return O._result.default;throw O._result}var I=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function te(){}return Fe.Children={map:P,forEach:function(O,H,ue){P(O,function(){H.apply(this,arguments)},ue)},count:function(O){var H=0;return P(O,function(){H++}),H},toArray:function(O){return P(O,function(H){return H})||[]},only:function(O){if(!Y(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Fe.Component=T,Fe.Fragment=t,Fe.Profiler=r,Fe.PureComponent=D,Fe.StrictMode=s,Fe.Suspense=d,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return N.H.useMemoCache(O)}},Fe.cache=function(O){return function(){return O.apply(null,arguments)}},Fe.cloneElement=function(O,H,ue){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ne=w({},O.props),xe=O.key,Ae=void 0;if(H!=null)for(we in H.ref!==void 0&&(Ae=void 0),H.key!==void 0&&(xe=""+H.key),H)!L.call(H,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&H.ref===void 0||(ne[we]=H[we]);var we=arguments.length-2;if(we===1)ne.children=ue;else if(1<we){for(var ze=Array(we),Ue=0;Ue<we;Ue++)ze[Ue]=arguments[Ue+2];ne.children=ze}return A(O.type,xe,void 0,void 0,Ae,ne)},Fe.createContext=function(O){return O={$$typeof:l,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:a,_context:O},O},Fe.createElement=function(O,H,ue){var ne,xe={},Ae=null;if(H!=null)for(ne in H.key!==void 0&&(Ae=""+H.key),H)L.call(H,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(xe[ne]=H[ne]);var we=arguments.length-2;if(we===1)xe.children=ue;else if(1<we){for(var ze=Array(we),Ue=0;Ue<we;Ue++)ze[Ue]=arguments[Ue+2];xe.children=ze}if(O&&O.defaultProps)for(ne in we=O.defaultProps,we)xe[ne]===void 0&&(xe[ne]=we[ne]);return A(O,Ae,void 0,void 0,null,xe)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(O){return{$$typeof:u,render:O}},Fe.isValidElement=Y,Fe.lazy=function(O){return{$$typeof:m,_payload:{_status:-1,_result:O},_init:$}},Fe.memo=function(O,H){return{$$typeof:f,type:O,compare:H===void 0?null:H}},Fe.startTransition=function(O){var H=N.T,ue={};N.T=ue;try{var ne=O(),xe=N.S;xe!==null&&xe(ue,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(te,I)}catch(Ae){I(Ae)}finally{N.T=H}},Fe.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Fe.use=function(O){return N.H.use(O)},Fe.useActionState=function(O,H,ue){return N.H.useActionState(O,H,ue)},Fe.useCallback=function(O,H){return N.H.useCallback(O,H)},Fe.useContext=function(O){return N.H.useContext(O)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(O,H){return N.H.useDeferredValue(O,H)},Fe.useEffect=function(O,H,ue){var ne=N.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(O,H)},Fe.useId=function(){return N.H.useId()},Fe.useImperativeHandle=function(O,H,ue){return N.H.useImperativeHandle(O,H,ue)},Fe.useInsertionEffect=function(O,H){return N.H.useInsertionEffect(O,H)},Fe.useLayoutEffect=function(O,H){return N.H.useLayoutEffect(O,H)},Fe.useMemo=function(O,H){return N.H.useMemo(O,H)},Fe.useOptimistic=function(O,H){return N.H.useOptimistic(O,H)},Fe.useReducer=function(O,H,ue){return N.H.useReducer(O,H,ue)},Fe.useRef=function(O){return N.H.useRef(O)},Fe.useState=function(O){return N.H.useState(O)},Fe.useSyncExternalStore=function(O,H,ue){return N.H.useSyncExternalStore(O,H,ue)},Fe.useTransition=function(){return N.H.useTransition()},Fe.version="19.1.0",Fe}var Db;function wp(){return Db||(Db=1,Lg.exports=NE()),Lg.exports}var Bg={exports:{}},us={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nb;function OE(){if(Nb)return us;Nb=1;var n=wp();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(d,f,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:d,containerInfo:f,implementation:m}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return us.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,us.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(d,f,null,m)},us.flushSync=function(d){var f=l.T,m=s.p;try{if(l.T=null,s.p=2,d)return d()}finally{l.T=f,s.p=m,s.d.f()}},us.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(d,f))},us.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},us.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,v=u(m,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?s.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:b}):m==="script"&&s.d.X(d,{crossOrigin:v,integrity:y,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},us.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=u(f.as,f.crossOrigin);s.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(d)},us.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,v=u(m,f.crossOrigin);s.d.L(d,m,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},us.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=u(f.as,f.crossOrigin);s.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(d)},us.requestFormReset=function(d){s.d.r(d)},us.unstable_batchedUpdates=function(d,f){return d(f)},us.useFormState=function(d,f,m){return l.H.useFormState(d,f,m)},us.useFormStatus=function(){return l.H.useHostTransitionStatus()},us.version="19.1.0",us}var Ob;function ME(){if(Ob)return Bg.exports;Ob=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Bg.exports=OE(),Bg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb;function RE(){if(Mb)return Sl;Mb=1;var n=DE(),e=wp(),t=ME();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function u(i){if(a(i)!==i)throw Error(s(188))}function d(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(s(188));return o!==i?null:i}for(var c=i,g=o;;){var p=c.return;if(p===null)break;var x=p.alternate;if(x===null){if(g=p.return,g!==null){c=g;continue}break}if(p.child===x.child){for(x=p.child;x;){if(x===c)return u(p),i;if(x===g)return u(p),o;x=x.sibling}throw Error(s(188))}if(c.return!==g.return)c=p,g=x;else{for(var C=!1,E=p.child;E;){if(E===c){C=!0,c=p,g=x;break}if(E===g){C=!0,g=p,c=x;break}E=E.sibling}if(!C){for(E=x.child;E;){if(E===c){C=!0,c=x,g=p;break}if(E===g){C=!0,g=x,c=p;break}E=E.sibling}if(!C)throw Error(s(189))}}if(c.alternate!==g)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?i:o}function f(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=f(i),o!==null)return o;i=i.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),k=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=K&&i[K]||i["@@iterator"],typeof i=="function"?i:null)}var oe=Symbol.for("react.client.reference");function re(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===oe?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case T:return"Profiler";case _:return"StrictMode";case N:return"Suspense";case L:return"SuspenseList";case Y:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case k:return(i.displayName||"Context")+".Provider";case D:return(i._context.displayName||"Context")+".Consumer";case M:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case A:return o=i.displayName||null,o!==null?o:re(i.type)||"Memo";case B:o=i._payload,i=i._init;try{return re(i(o))}catch{}}return null}var fe=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I={pending:!1,data:null,method:null,action:null},te=[],O=-1;function H(i){return{current:i}}function ue(i){0>O||(i.current=te[O],te[O]=null,O--)}function ne(i,o){O++,te[O]=i.current,i.current=o}var xe=H(null),Ae=H(null),we=H(null),ze=H(null);function Ue(i,o){switch(ne(we,o),ne(Ae,i),ne(xe,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?Jx(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=Jx(o),i=eb(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ue(xe),ne(xe,i)}function dt(){ue(xe),ue(Ae),ue(we)}function ye(i){i.memoizedState!==null&&ne(ze,i);var o=xe.current,c=eb(o,i.type);o!==c&&(ne(Ae,i),ne(xe,c))}function _e(i){Ae.current===i&&(ue(xe),ue(Ae)),ze.current===i&&(ue(ze),vl._currentValue=I)}var Te=Object.prototype.hasOwnProperty,V=n.unstable_scheduleCallback,ie=n.unstable_cancelCallback,pe=n.unstable_shouldYield,je=n.unstable_requestPaint,he=n.unstable_now,Be=n.unstable_getCurrentPriorityLevel,We=n.unstable_ImmediatePriority,et=n.unstable_UserBlockingPriority,nt=n.unstable_NormalPriority,De=n.unstable_LowPriority,Qe=n.unstable_IdlePriority,jt=n.log,se=n.unstable_setDisableYieldValue,Ee=null,me=null;function ge(i){if(typeof jt=="function"&&se(i),me&&typeof me.setStrictMode=="function")try{me.setStrictMode(Ee,i)}catch{}}var ce=Math.clz32?Math.clz32:Cr,Ze=Math.log,$s=Math.LN2;function Cr(i){return i>>>=0,i===0?32:31-(Ze(i)/$s|0)|0}var $t=256,Ve=4194304;function ts(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function _s(i,o,c){var g=i.pendingLanes;if(g===0)return 0;var p=0,x=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var E=g&134217727;return E!==0?(g=E&~x,g!==0?p=ts(g):(C&=E,C!==0?p=ts(C):c||(c=E&~i,c!==0&&(p=ts(c))))):(E=g&~x,E!==0?p=ts(E):C!==0?p=ts(C):c||(c=g&~i,c!==0&&(p=ts(c)))),p===0?0:o!==0&&o!==p&&(o&x)===0&&(x=p&-p,c=o&-o,x>=c||x===32&&(c&4194048)!==0)?o:p}function mt(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Bt(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tn(){var i=$t;return $t<<=1,($t&4194048)===0&&($t=256),i}function Yt(){var i=Ve;return Ve<<=1,(Ve&62914560)===0&&(Ve=4194304),i}function Ft(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function Et(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function gT(i,o,c,g,p,x){var C=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var E=i.entanglements,R=i.expirationTimes,Q=i.hiddenUpdates;for(c=C&~c;0<c;){var ae=31-ce(c),de=1<<ae;E[ae]=0,R[ae]=-1;var Z=Q[ae];if(Z!==null)for(Q[ae]=null,ae=0;ae<Z.length;ae++){var J=Z[ae];J!==null&&(J.lane&=-536870913)}c&=~de}g!==0&&F0(i,g,0),x!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=x&~(C&~o))}function F0(i,o,c){i.pendingLanes|=o,i.suspendedLanes&=~o;var g=31-ce(o);i.entangledLanes|=o,i.entanglements[g]=i.entanglements[g]|1073741824|c&4194090}function U0(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var g=31-ce(c),p=1<<g;p&o|i[g]&o&&(i[g]|=o),c&=~p}}function wh(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function _h(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function z0(){var i=$.p;return i!==0?i:(i=window.event,i===void 0?32:xb(i.type))}function mT(i,o){var c=$.p;try{return $.p=i,o()}finally{$.p=c}}var Tr=Math.random().toString(36).slice(2),ls="__reactFiber$"+Tr,Ss="__reactProps$"+Tr,Qi="__reactContainer$"+Tr,Sh="__reactEvents$"+Tr,pT="__reactListeners$"+Tr,vT="__reactHandles$"+Tr,V0="__reactResources$"+Tr,ko="__reactMarker$"+Tr;function Ch(i){delete i[ls],delete i[Ss],delete i[Sh],delete i[pT],delete i[vT]}function Zi(i){var o=i[ls];if(o)return o;for(var c=i.parentNode;c;){if(o=c[Qi]||c[ls]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=rb(i);i!==null;){if(c=i[ls])return c;i=rb(i)}return o}i=c,c=i.parentNode}return null}function Ji(i){if(i=i[ls]||i[Qi]){var o=i.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return i}return null}function Ao(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function ea(i){var o=i[V0];return o||(o=i[V0]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function qt(i){i[ko]=!0}var I0=new Set,H0={};function ui(i,o){ta(i,o),ta(i+"Capture",o)}function ta(i,o){for(H0[i]=o,i=0;i<o.length;i++)I0.add(o[i])}var yT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),G0={},$0={};function xT(i){return Te.call($0,i)?!0:Te.call(G0,i)?!1:yT.test(i)?$0[i]=!0:(G0[i]=!0,!1)}function Cc(i,o,c){if(xT(o))if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var g=o.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+c)}}function Tc(i,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+c)}}function zn(i,o,c,g){if(g===null)i.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(o,c,""+g)}}var Th,Y0;function sa(i){if(Th===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);Th=o&&o[1]||"",Y0=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Th+i+Y0}var jh=!1;function Eh(i,o){if(!i||jh)return"";jh=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(o){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(J){var Z=J}Reflect.construct(i,[],de)}else{try{de.call()}catch(J){Z=J}i.call(de.prototype)}}else{try{throw Error()}catch(J){Z=J}(de=i())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(J){if(J&&Z&&typeof J.stack=="string")return[J.stack,Z.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=g.DetermineComponentFrameRoot(),C=x[0],E=x[1];if(C&&E){var R=C.split(`
`),Q=E.split(`
`);for(p=g=0;g<R.length&&!R[g].includes("DetermineComponentFrameRoot");)g++;for(;p<Q.length&&!Q[p].includes("DetermineComponentFrameRoot");)p++;if(g===R.length||p===Q.length)for(g=R.length-1,p=Q.length-1;1<=g&&0<=p&&R[g]!==Q[p];)p--;for(;1<=g&&0<=p;g--,p--)if(R[g]!==Q[p]){if(g!==1||p!==1)do if(g--,p--,0>p||R[g]!==Q[p]){var ae=`
`+R[g].replace(" at new "," at ");return i.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",i.displayName)),ae}while(1<=g&&0<=p);break}}}finally{jh=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?sa(c):""}function bT(i){switch(i.tag){case 26:case 27:case 5:return sa(i.type);case 16:return sa("Lazy");case 13:return sa("Suspense");case 19:return sa("SuspenseList");case 0:case 15:return Eh(i.type,!1);case 11:return Eh(i.type.render,!1);case 1:return Eh(i.type,!0);case 31:return sa("Activity");default:return""}}function q0(i){try{var o="";do o+=bT(i),i=i.return;while(i);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Ys(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function W0(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function wT(i){var o=W0(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),g=""+i[o];if(!i.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,x=c.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(C){g=""+C,x.call(this,C)}}),Object.defineProperty(i,o,{enumerable:c.enumerable}),{getValue:function(){return g},setValue:function(C){g=""+C},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function jc(i){i._valueTracker||(i._valueTracker=wT(i))}function X0(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),g="";return i&&(g=W0(i)?i.checked?"true":"false":i.value),i=g,i!==c?(o.setValue(i),!0):!1}function Ec(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var _T=/[\n"\\]/g;function qs(i){return i.replace(_T,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function kh(i,o,c,g,p,x,C,E){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),o!=null?C==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Ys(o)):i.value!==""+Ys(o)&&(i.value=""+Ys(o)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),o!=null?Ah(i,C,Ys(o)):c!=null?Ah(i,C,Ys(c)):g!=null&&i.removeAttribute("value"),p==null&&x!=null&&(i.defaultChecked=!!x),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.name=""+Ys(E):i.removeAttribute("name")}function K0(i,o,c,g,p,x,C,E){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.type=x),o!=null||c!=null){if(!(x!=="submit"&&x!=="reset"||o!=null))return;c=c!=null?""+Ys(c):"",o=o!=null?""+Ys(o):c,E||o===i.value||(i.value=o),i.defaultValue=o}g=g??p,g=typeof g!="function"&&typeof g!="symbol"&&!!g,i.checked=E?i.checked:!!g,i.defaultChecked=!!g,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C)}function Ah(i,o,c){o==="number"&&Ec(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function na(i,o,c,g){if(i=i.options,o){o={};for(var p=0;p<c.length;p++)o["$"+c[p]]=!0;for(c=0;c<i.length;c++)p=o.hasOwnProperty("$"+i[c].value),i[c].selected!==p&&(i[c].selected=p),p&&g&&(i[c].defaultSelected=!0)}else{for(c=""+Ys(c),o=null,p=0;p<i.length;p++){if(i[p].value===c){i[p].selected=!0,g&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function Q0(i,o,c){if(o!=null&&(o=""+Ys(o),o!==i.value&&(i.value=o),c==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=c!=null?""+Ys(c):""}function Z0(i,o,c,g){if(o==null){if(g!=null){if(c!=null)throw Error(s(92));if(fe(g)){if(1<g.length)throw Error(s(93));g=g[0]}c=g}c==null&&(c=""),o=c}c=Ys(o),i.defaultValue=c,g=i.textContent,g===c&&g!==""&&g!==null&&(i.value=g)}function ra(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var ST=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function J0(i,o,c){var g=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?g?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":g?i.setProperty(o,c):typeof c!="number"||c===0||ST.has(o)?o==="float"?i.cssFloat=c:i[o]=(""+c).trim():i[o]=c+"px"}function ev(i,o,c){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,c!=null){for(var g in c)!c.hasOwnProperty(g)||o!=null&&o.hasOwnProperty(g)||(g.indexOf("--")===0?i.setProperty(g,""):g==="float"?i.cssFloat="":i[g]="");for(var p in o)g=o[p],o.hasOwnProperty(p)&&c[p]!==g&&J0(i,p,g)}else for(var x in o)o.hasOwnProperty(x)&&J0(i,x,o[x])}function Dh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var CT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),TT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kc(i){return TT.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Nh=null;function Oh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ia=null,aa=null;function tv(i){var o=Ji(i);if(o&&(i=o.stateNode)){var c=i[Ss]||null;e:switch(i=o.stateNode,o.type){case"input":if(kh(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+qs(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var g=c[o];if(g!==i&&g.form===i.form){var p=g[Ss]||null;if(!p)throw Error(s(90));kh(g,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(o=0;o<c.length;o++)g=c[o],g.form===i.form&&X0(g)}break e;case"textarea":Q0(i,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&na(i,!!c.multiple,o,!1)}}}var Mh=!1;function sv(i,o,c){if(Mh)return i(o,c);Mh=!0;try{var g=i(o);return g}finally{if(Mh=!1,(ia!==null||aa!==null)&&(fu(),ia&&(o=ia,i=aa,aa=ia=null,tv(o),i)))for(o=0;o<i.length;o++)tv(i[o])}}function Do(i,o){var c=i.stateNode;if(c===null)return null;var g=c[Ss]||null;if(g===null)return null;c=g[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(s(231,o,typeof c));return c}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rh=!1;if(Vn)try{var No={};Object.defineProperty(No,"passive",{get:function(){Rh=!0}}),window.addEventListener("test",No,No),window.removeEventListener("test",No,No)}catch{Rh=!1}var jr=null,Ph=null,Ac=null;function nv(){if(Ac)return Ac;var i,o=Ph,c=o.length,g,p="value"in jr?jr.value:jr.textContent,x=p.length;for(i=0;i<c&&o[i]===p[i];i++);var C=c-i;for(g=1;g<=C&&o[c-g]===p[x-g];g++);return Ac=p.slice(i,1<g?1-g:void 0)}function Dc(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Nc(){return!0}function rv(){return!1}function Cs(i){function o(c,g,p,x,C){this._reactName=c,this._targetInst=p,this.type=g,this.nativeEvent=x,this.target=C,this.currentTarget=null;for(var E in i)i.hasOwnProperty(E)&&(c=i[E],this[E]=c?c(x):x[E]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Nc:rv,this.isPropagationStopped=rv,this}return m(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Nc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Nc)},persist:function(){},isPersistent:Nc}),o}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oc=Cs(di),Oo=m({},di,{view:0,detail:0}),jT=Cs(Oo),Lh,Bh,Mo,Mc=m({},Oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Mo&&(Mo&&i.type==="mousemove"?(Lh=i.screenX-Mo.screenX,Bh=i.screenY-Mo.screenY):Bh=Lh=0,Mo=i),Lh)},movementY:function(i){return"movementY"in i?i.movementY:Bh}}),iv=Cs(Mc),ET=m({},Mc,{dataTransfer:0}),kT=Cs(ET),AT=m({},Oo,{relatedTarget:0}),Fh=Cs(AT),DT=m({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),NT=Cs(DT),OT=m({},di,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),MT=Cs(OT),RT=m({},di,{data:0}),av=Cs(RT),PT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FT(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=BT[i])?!!o[i]:!1}function Uh(){return FT}var UT=m({},Oo,{key:function(i){if(i.key){var o=PT[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Dc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?LT[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uh,charCode:function(i){return i.type==="keypress"?Dc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Dc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),zT=Cs(UT),VT=m({},Mc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ov=Cs(VT),IT=m({},Oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uh}),HT=Cs(IT),GT=m({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),$T=Cs(GT),YT=m({},Mc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),qT=Cs(YT),WT=m({},di,{newState:0,oldState:0}),XT=Cs(WT),KT=[9,13,27,32],zh=Vn&&"CompositionEvent"in window,Ro=null;Vn&&"documentMode"in document&&(Ro=document.documentMode);var QT=Vn&&"TextEvent"in window&&!Ro,lv=Vn&&(!zh||Ro&&8<Ro&&11>=Ro),cv=" ",uv=!1;function dv(i,o){switch(i){case"keyup":return KT.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var oa=!1;function ZT(i,o){switch(i){case"compositionend":return hv(o);case"keypress":return o.which!==32?null:(uv=!0,cv);case"textInput":return i=o.data,i===cv&&uv?null:i;default:return null}}function JT(i,o){if(oa)return i==="compositionend"||!zh&&dv(i,o)?(i=nv(),Ac=Ph=jr=null,oa=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return lv&&o.locale!=="ko"?null:o.data;default:return null}}var ej={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fv(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!ej[i.type]:o==="textarea"}function gv(i,o,c,g){ia?aa?aa.push(g):aa=[g]:ia=g,o=xu(o,"onChange"),0<o.length&&(c=new Oc("onChange","change",null,c,g),i.push({event:c,listeners:o}))}var Po=null,Lo=null;function tj(i){Wx(i,0)}function Rc(i){var o=Ao(i);if(X0(o))return i}function mv(i,o){if(i==="change")return o}var pv=!1;if(Vn){var Vh;if(Vn){var Ih="oninput"in document;if(!Ih){var vv=document.createElement("div");vv.setAttribute("oninput","return;"),Ih=typeof vv.oninput=="function"}Vh=Ih}else Vh=!1;pv=Vh&&(!document.documentMode||9<document.documentMode)}function yv(){Po&&(Po.detachEvent("onpropertychange",xv),Lo=Po=null)}function xv(i){if(i.propertyName==="value"&&Rc(Lo)){var o=[];gv(o,Lo,i,Oh(i)),sv(tj,o)}}function sj(i,o,c){i==="focusin"?(yv(),Po=o,Lo=c,Po.attachEvent("onpropertychange",xv)):i==="focusout"&&yv()}function nj(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Rc(Lo)}function rj(i,o){if(i==="click")return Rc(o)}function ij(i,o){if(i==="input"||i==="change")return Rc(o)}function aj(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Ps=typeof Object.is=="function"?Object.is:aj;function Bo(i,o){if(Ps(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),g=Object.keys(o);if(c.length!==g.length)return!1;for(g=0;g<c.length;g++){var p=c[g];if(!Te.call(o,p)||!Ps(i[p],o[p]))return!1}return!0}function bv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function wv(i,o){var c=bv(i);i=0;for(var g;c;){if(c.nodeType===3){if(g=i+c.textContent.length,i<=o&&g>=o)return{node:c,offset:o-i};i=g}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=bv(c)}}function _v(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?_v(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Sv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Ec(i.document);o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=Ec(i.document)}return o}function Hh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var oj=Vn&&"documentMode"in document&&11>=document.documentMode,la=null,Gh=null,Fo=null,$h=!1;function Cv(i,o,c){var g=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;$h||la==null||la!==Ec(g)||(g=la,"selectionStart"in g&&Hh(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Fo&&Bo(Fo,g)||(Fo=g,g=xu(Gh,"onSelect"),0<g.length&&(o=new Oc("onSelect","select",null,o,c),i.push({event:o,listeners:g}),o.target=la)))}function hi(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var ca={animationend:hi("Animation","AnimationEnd"),animationiteration:hi("Animation","AnimationIteration"),animationstart:hi("Animation","AnimationStart"),transitionrun:hi("Transition","TransitionRun"),transitionstart:hi("Transition","TransitionStart"),transitioncancel:hi("Transition","TransitionCancel"),transitionend:hi("Transition","TransitionEnd")},Yh={},Tv={};Vn&&(Tv=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function fi(i){if(Yh[i])return Yh[i];if(!ca[i])return i;var o=ca[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in Tv)return Yh[i]=o[c];return i}var jv=fi("animationend"),Ev=fi("animationiteration"),kv=fi("animationstart"),lj=fi("transitionrun"),cj=fi("transitionstart"),uj=fi("transitioncancel"),Av=fi("transitionend"),Dv=new Map,qh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qh.push("scrollEnd");function cn(i,o){Dv.set(i,o),ui(o,[i])}var Nv=new WeakMap;function Ws(i,o){if(typeof i=="object"&&i!==null){var c=Nv.get(i);return c!==void 0?c:(o={value:i,source:o,stack:q0(o)},Nv.set(i,o),o)}return{value:i,source:o,stack:q0(o)}}var Xs=[],ua=0,Wh=0;function Pc(){for(var i=ua,o=Wh=ua=0;o<i;){var c=Xs[o];Xs[o++]=null;var g=Xs[o];Xs[o++]=null;var p=Xs[o];Xs[o++]=null;var x=Xs[o];if(Xs[o++]=null,g!==null&&p!==null){var C=g.pending;C===null?p.next=p:(p.next=C.next,C.next=p),g.pending=p}x!==0&&Ov(c,p,x)}}function Lc(i,o,c,g){Xs[ua++]=i,Xs[ua++]=o,Xs[ua++]=c,Xs[ua++]=g,Wh|=g,i.lanes|=g,i=i.alternate,i!==null&&(i.lanes|=g)}function Xh(i,o,c,g){return Lc(i,o,c,g),Bc(i)}function da(i,o){return Lc(i,null,null,o),Bc(i)}function Ov(i,o,c){i.lanes|=c;var g=i.alternate;g!==null&&(g.lanes|=c);for(var p=!1,x=i.return;x!==null;)x.childLanes|=c,g=x.alternate,g!==null&&(g.childLanes|=c),x.tag===22&&(i=x.stateNode,i===null||i._visibility&1||(p=!0)),i=x,x=x.return;return i.tag===3?(x=i.stateNode,p&&o!==null&&(p=31-ce(c),i=x.hiddenUpdates,g=i[p],g===null?i[p]=[o]:g.push(o),o.lane=c|536870912),x):null}function Bc(i){if(50<cl)throw cl=0,sg=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var ha={};function dj(i,o,c,g){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(i,o,c,g){return new dj(i,o,c,g)}function Kh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function In(i,o){var c=i.alternate;return c===null?(c=Ls(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function Mv(i,o){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,o=c.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Fc(i,o,c,g,p,x){var C=0;if(g=i,typeof i=="function")Kh(i)&&(C=1);else if(typeof i=="string")C=fE(i,c,xe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case Y:return i=Ls(31,c,o,p),i.elementType=Y,i.lanes=x,i;case w:return gi(c.children,p,x,o);case _:C=8,p|=24;break;case T:return i=Ls(12,c,o,p|2),i.elementType=T,i.lanes=x,i;case N:return i=Ls(13,c,o,p),i.elementType=N,i.lanes=x,i;case L:return i=Ls(19,c,o,p),i.elementType=L,i.lanes=x,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case S:case k:C=10;break e;case D:C=9;break e;case M:C=11;break e;case A:C=14;break e;case B:C=16,g=null;break e}C=29,c=Error(s(130,i===null?"null":typeof i,"")),g=null}return o=Ls(C,c,o,p),o.elementType=i,o.type=g,o.lanes=x,o}function gi(i,o,c,g){return i=Ls(7,i,g,o),i.lanes=c,i}function Qh(i,o,c){return i=Ls(6,i,null,o),i.lanes=c,i}function Zh(i,o,c){return o=Ls(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var fa=[],ga=0,Uc=null,zc=0,Ks=[],Qs=0,mi=null,Hn=1,Gn="";function pi(i,o){fa[ga++]=zc,fa[ga++]=Uc,Uc=i,zc=o}function Rv(i,o,c){Ks[Qs++]=Hn,Ks[Qs++]=Gn,Ks[Qs++]=mi,mi=i;var g=Hn;i=Gn;var p=32-ce(g)-1;g&=~(1<<p),c+=1;var x=32-ce(o)+p;if(30<x){var C=p-p%5;x=(g&(1<<C)-1).toString(32),g>>=C,p-=C,Hn=1<<32-ce(o)+p|c<<p|g,Gn=x+i}else Hn=1<<x|c<<p|g,Gn=i}function Jh(i){i.return!==null&&(pi(i,1),Rv(i,1,0))}function ef(i){for(;i===Uc;)Uc=fa[--ga],fa[ga]=null,zc=fa[--ga],fa[ga]=null;for(;i===mi;)mi=Ks[--Qs],Ks[Qs]=null,Gn=Ks[--Qs],Ks[Qs]=null,Hn=Ks[--Qs],Ks[Qs]=null}var ps=null,St=null,tt=!1,vi=null,jn=!1,tf=Error(s(519));function yi(i){var o=Error(s(418,""));throw Vo(Ws(o,i)),tf}function Pv(i){var o=i.stateNode,c=i.type,g=i.memoizedProps;switch(o[ls]=i,o[Ss]=g,c){case"dialog":Ye("cancel",o),Ye("close",o);break;case"iframe":case"object":case"embed":Ye("load",o);break;case"video":case"audio":for(c=0;c<dl.length;c++)Ye(dl[c],o);break;case"source":Ye("error",o);break;case"img":case"image":case"link":Ye("error",o),Ye("load",o);break;case"details":Ye("toggle",o);break;case"input":Ye("invalid",o),K0(o,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),jc(o);break;case"select":Ye("invalid",o);break;case"textarea":Ye("invalid",o),Z0(o,g.value,g.defaultValue,g.children),jc(o)}c=g.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||g.suppressHydrationWarning===!0||Zx(o.textContent,c)?(g.popover!=null&&(Ye("beforetoggle",o),Ye("toggle",o)),g.onScroll!=null&&Ye("scroll",o),g.onScrollEnd!=null&&Ye("scrollend",o),g.onClick!=null&&(o.onclick=bu),o=!0):o=!1,o||yi(i)}function Lv(i){for(ps=i.return;ps;)switch(ps.tag){case 5:case 13:jn=!1;return;case 27:case 3:jn=!0;return;default:ps=ps.return}}function Uo(i){if(i!==ps)return!1;if(!tt)return Lv(i),tt=!0,!1;var o=i.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||yg(i.type,i.memoizedProps)),c=!c),c&&St&&yi(i),Lv(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8)if(c=i.data,c==="/$"){if(o===0){St=dn(i.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;i=i.nextSibling}St=null}}else o===27?(o=St,Ir(i.type)?(i=_g,_g=null,St=i):St=o):St=ps?dn(i.stateNode.nextSibling):null;return!0}function zo(){St=ps=null,tt=!1}function Bv(){var i=vi;return i!==null&&(Es===null?Es=i:Es.push.apply(Es,i),vi=null),i}function Vo(i){vi===null?vi=[i]:vi.push(i)}var sf=H(null),xi=null,$n=null;function Er(i,o,c){ne(sf,o._currentValue),o._currentValue=c}function Yn(i){i._currentValue=sf.current,ue(sf)}function nf(i,o,c){for(;i!==null;){var g=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,g!==null&&(g.childLanes|=o)):g!==null&&(g.childLanes&o)!==o&&(g.childLanes|=o),i===c)break;i=i.return}}function rf(i,o,c,g){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var x=p.dependencies;if(x!==null){var C=p.child;x=x.firstContext;e:for(;x!==null;){var E=x;x=p;for(var R=0;R<o.length;R++)if(E.context===o[R]){x.lanes|=c,E=x.alternate,E!==null&&(E.lanes|=c),nf(x.return,c,i),g||(C=null);break e}x=E.next}}else if(p.tag===18){if(C=p.return,C===null)throw Error(s(341));C.lanes|=c,x=C.alternate,x!==null&&(x.lanes|=c),nf(C,c,i),C=null}else C=p.child;if(C!==null)C.return=p;else for(C=p;C!==null;){if(C===i){C=null;break}if(p=C.sibling,p!==null){p.return=C.return,C=p;break}C=C.return}p=C}}function Io(i,o,c,g){i=null;for(var p=o,x=!1;p!==null;){if(!x){if((p.flags&524288)!==0)x=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var C=p.alternate;if(C===null)throw Error(s(387));if(C=C.memoizedProps,C!==null){var E=p.type;Ps(p.pendingProps.value,C.value)||(i!==null?i.push(E):i=[E])}}else if(p===ze.current){if(C=p.alternate,C===null)throw Error(s(387));C.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(vl):i=[vl])}p=p.return}i!==null&&rf(o,i,c,g),o.flags|=262144}function Vc(i){for(i=i.firstContext;i!==null;){if(!Ps(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function bi(i){xi=i,$n=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function cs(i){return Fv(xi,i)}function Ic(i,o){return xi===null&&bi(i),Fv(i,o)}function Fv(i,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},$n===null){if(i===null)throw Error(s(308));$n=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else $n=$n.next=o;return c}var hj=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(c,g){i.push(g)}};this.abort=function(){o.aborted=!0,i.forEach(function(c){return c()})}},fj=n.unstable_scheduleCallback,gj=n.unstable_NormalPriority,Ut={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function af(){return{controller:new hj,data:new Map,refCount:0}}function Ho(i){i.refCount--,i.refCount===0&&fj(gj,function(){i.controller.abort()})}var Go=null,of=0,ma=0,pa=null;function mj(i,o){if(Go===null){var c=Go=[];of=0,ma=cg(),pa={status:"pending",value:void 0,then:function(g){c.push(g)}}}return of++,o.then(Uv,Uv),o}function Uv(){if(--of===0&&Go!==null){pa!==null&&(pa.status="fulfilled");var i=Go;Go=null,ma=0,pa=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function pj(i,o){var c=[],g={status:"pending",value:null,reason:null,then:function(p){c.push(p)}};return i.then(function(){g.status="fulfilled",g.value=o;for(var p=0;p<c.length;p++)(0,c[p])(o)},function(p){for(g.status="rejected",g.reason=p,p=0;p<c.length;p++)(0,c[p])(void 0)}),g}var zv=P.S;P.S=function(i,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&mj(i,o),zv!==null&&zv(i,o)};var wi=H(null);function lf(){var i=wi.current;return i!==null?i:ht.pooledCache}function Hc(i,o){o===null?ne(wi,wi.current):ne(wi,o.pool)}function Vv(){var i=lf();return i===null?null:{parent:Ut._currentValue,pool:i}}var $o=Error(s(460)),Iv=Error(s(474)),Gc=Error(s(542)),cf={then:function(){}};function Hv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function $c(){}function Gv(i,o,c){switch(c=i[c],c===void 0?i.push(o):c!==o&&(o.then($c,$c),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Yv(i),i;default:if(typeof o.status=="string")o.then($c,$c);else{if(i=ht,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(g){if(o.status==="pending"){var p=o;p.status="fulfilled",p.value=g}},function(g){if(o.status==="pending"){var p=o;p.status="rejected",p.reason=g}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Yv(i),i}throw Yo=o,$o}}var Yo=null;function $v(){if(Yo===null)throw Error(s(459));var i=Yo;return Yo=null,i}function Yv(i){if(i===$o||i===Gc)throw Error(s(483))}var kr=!1;function uf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function df(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ar(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Dr(i,o,c){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(rt&2)!==0){var p=g.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),g.pending=o,o=Bc(i),Ov(i,null,c),o}return Lc(i,g,o,c),Bc(i)}function qo(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var g=o.lanes;g&=i.pendingLanes,c|=g,o.lanes=c,U0(i,c)}}function hf(i,o){var c=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,c===g)){var p=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var C={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};x===null?p=x=C:x=x.next=C,c=c.next}while(c!==null);x===null?p=x=o:x=x.next=o}else p=x=o;c={baseState:g.baseState,firstBaseUpdate:p,lastBaseUpdate:x,shared:g.shared,callbacks:g.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}var ff=!1;function Wo(){if(ff){var i=pa;if(i!==null)throw i}}function Xo(i,o,c,g){ff=!1;var p=i.updateQueue;kr=!1;var x=p.firstBaseUpdate,C=p.lastBaseUpdate,E=p.shared.pending;if(E!==null){p.shared.pending=null;var R=E,Q=R.next;R.next=null,C===null?x=Q:C.next=Q,C=R;var ae=i.alternate;ae!==null&&(ae=ae.updateQueue,E=ae.lastBaseUpdate,E!==C&&(E===null?ae.firstBaseUpdate=Q:E.next=Q,ae.lastBaseUpdate=R))}if(x!==null){var de=p.baseState;C=0,ae=Q=R=null,E=x;do{var Z=E.lane&-536870913,J=Z!==E.lane;if(J?(Xe&Z)===Z:(g&Z)===Z){Z!==0&&Z===ma&&(ff=!0),ae!==null&&(ae=ae.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Re=i,Ne=E;Z=o;var ct=c;switch(Ne.tag){case 1:if(Re=Ne.payload,typeof Re=="function"){de=Re.call(ct,de,Z);break e}de=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ne.payload,Z=typeof Re=="function"?Re.call(ct,de,Z):Re,Z==null)break e;de=m({},de,Z);break e;case 2:kr=!0}}Z=E.callback,Z!==null&&(i.flags|=64,J&&(i.flags|=8192),J=p.callbacks,J===null?p.callbacks=[Z]:J.push(Z))}else J={lane:Z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ae===null?(Q=ae=J,R=de):ae=ae.next=J,C|=Z;if(E=E.next,E===null){if(E=p.shared.pending,E===null)break;J=E,E=J.next,J.next=null,p.lastBaseUpdate=J,p.shared.pending=null}}while(!0);ae===null&&(R=de),p.baseState=R,p.firstBaseUpdate=Q,p.lastBaseUpdate=ae,x===null&&(p.shared.lanes=0),Fr|=C,i.lanes=C,i.memoizedState=de}}function qv(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function Wv(i,o){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)qv(c[i],o)}var va=H(null),Yc=H(0);function Xv(i,o){i=Jn,ne(Yc,i),ne(va,o),Jn=i|o.baseLanes}function gf(){ne(Yc,Jn),ne(va,va.current)}function mf(){Jn=Yc.current,ue(va),ue(Yc)}var Nr=0,Ie=null,ot=null,Mt=null,qc=!1,ya=!1,_i=!1,Wc=0,Ko=0,xa=null,vj=0;function kt(){throw Error(s(321))}function pf(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!Ps(i[c],o[c]))return!1;return!0}function vf(i,o,c,g,p,x){return Nr=x,Ie=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,P.H=i===null||i.memoizedState===null?Oy:My,_i=!1,x=c(g,p),_i=!1,ya&&(x=Qv(o,c,g,p)),Kv(i),x}function Kv(i){P.H=eu;var o=ot!==null&&ot.next!==null;if(Nr=0,Mt=ot=Ie=null,qc=!1,Ko=0,xa=null,o)throw Error(s(300));i===null||Wt||(i=i.dependencies,i!==null&&Vc(i)&&(Wt=!0))}function Qv(i,o,c,g){Ie=i;var p=0;do{if(ya&&(xa=null),Ko=0,ya=!1,25<=p)throw Error(s(301));if(p+=1,Mt=ot=null,i.updateQueue!=null){var x=i.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}P.H=Cj,x=o(c,g)}while(ya);return x}function yj(){var i=P.H,o=i.useState()[0];return o=typeof o.then=="function"?Qo(o):o,i=i.useState()[0],(ot!==null?ot.memoizedState:null)!==i&&(Ie.flags|=1024),o}function yf(){var i=Wc!==0;return Wc=0,i}function xf(i,o,c){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~c}function bf(i){if(qc){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}qc=!1}Nr=0,Mt=ot=Ie=null,ya=!1,Ko=Wc=0,xa=null}function Ts(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?Ie.memoizedState=Mt=i:Mt=Mt.next=i,Mt}function Rt(){if(ot===null){var i=Ie.alternate;i=i!==null?i.memoizedState:null}else i=ot.next;var o=Mt===null?Ie.memoizedState:Mt.next;if(o!==null)Mt=o,ot=i;else{if(i===null)throw Ie.alternate===null?Error(s(467)):Error(s(310));ot=i,i={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Mt===null?Ie.memoizedState=Mt=i:Mt=Mt.next=i}return Mt}function wf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qo(i){var o=Ko;return Ko+=1,xa===null&&(xa=[]),i=Gv(xa,i,o),o=Ie,(Mt===null?o.memoizedState:Mt.next)===null&&(o=o.alternate,P.H=o===null||o.memoizedState===null?Oy:My),i}function Xc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Qo(i);if(i.$$typeof===k)return cs(i)}throw Error(s(438,String(i)))}function _f(i){var o=null,c=Ie.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var g=Ie.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(o={data:g.data.map(function(p){return p.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=wf(),Ie.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(i),g=0;g<i;g++)c[g]=W;return o.index++,c}function qn(i,o){return typeof o=="function"?o(i):o}function Kc(i){var o=Rt();return Sf(o,ot,i)}function Sf(i,o,c){var g=i.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=c;var p=i.baseQueue,x=g.pending;if(x!==null){if(p!==null){var C=p.next;p.next=x.next,x.next=C}o.baseQueue=p=x,g.pending=null}if(x=i.baseState,p===null)i.memoizedState=x;else{o=p.next;var E=C=null,R=null,Q=o,ae=!1;do{var de=Q.lane&-536870913;if(de!==Q.lane?(Xe&de)===de:(Nr&de)===de){var Z=Q.revertLane;if(Z===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),de===ma&&(ae=!0);else if((Nr&Z)===Z){Q=Q.next,Z===ma&&(ae=!0);continue}else de={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},R===null?(E=R=de,C=x):R=R.next=de,Ie.lanes|=Z,Fr|=Z;de=Q.action,_i&&c(x,de),x=Q.hasEagerState?Q.eagerState:c(x,de)}else Z={lane:de,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},R===null?(E=R=Z,C=x):R=R.next=Z,Ie.lanes|=de,Fr|=de;Q=Q.next}while(Q!==null&&Q!==o);if(R===null?C=x:R.next=E,!Ps(x,i.memoizedState)&&(Wt=!0,ae&&(c=pa,c!==null)))throw c;i.memoizedState=x,i.baseState=C,i.baseQueue=R,g.lastRenderedState=x}return p===null&&(g.lanes=0),[i.memoizedState,g.dispatch]}function Cf(i){var o=Rt(),c=o.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=i;var g=c.dispatch,p=c.pending,x=o.memoizedState;if(p!==null){c.pending=null;var C=p=p.next;do x=i(x,C.action),C=C.next;while(C!==p);Ps(x,o.memoizedState)||(Wt=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),c.lastRenderedState=x}return[x,g]}function Zv(i,o,c){var g=Ie,p=Rt(),x=tt;if(x){if(c===void 0)throw Error(s(407));c=c()}else c=o();var C=!Ps((ot||p).memoizedState,c);C&&(p.memoizedState=c,Wt=!0),p=p.queue;var E=ty.bind(null,g,p,i);if(Zo(2048,8,E,[i]),p.getSnapshot!==o||C||Mt!==null&&Mt.memoizedState.tag&1){if(g.flags|=2048,ba(9,Qc(),ey.bind(null,g,p,c,o),null),ht===null)throw Error(s(349));x||(Nr&124)!==0||Jv(g,o,c)}return c}function Jv(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=Ie.updateQueue,o===null?(o=wf(),Ie.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function ey(i,o,c,g){o.value=c,o.getSnapshot=g,sy(o)&&ny(i)}function ty(i,o,c){return c(function(){sy(o)&&ny(i)})}function sy(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!Ps(i,c)}catch{return!0}}function ny(i){var o=da(i,2);o!==null&&Vs(o,i,2)}function Tf(i){var o=Ts();if(typeof i=="function"){var c=i;if(i=c(),_i){ge(!0);try{c()}finally{ge(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:i},o}function ry(i,o,c,g){return i.baseState=c,Sf(i,ot,typeof g=="function"?g:qn)}function xj(i,o,c,g,p){if(Jc(i))throw Error(s(485));if(i=o.action,i!==null){var x={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){x.listeners.push(C)}};P.T!==null?c(!0):x.isTransition=!1,g(x),c=o.pending,c===null?(x.next=o.pending=x,iy(o,x)):(x.next=c.next,o.pending=c.next=x)}}function iy(i,o){var c=o.action,g=o.payload,p=i.state;if(o.isTransition){var x=P.T,C={};P.T=C;try{var E=c(p,g),R=P.S;R!==null&&R(C,E),ay(i,o,E)}catch(Q){jf(i,o,Q)}finally{P.T=x}}else try{x=c(p,g),ay(i,o,x)}catch(Q){jf(i,o,Q)}}function ay(i,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(g){oy(i,o,g)},function(g){return jf(i,o,g)}):oy(i,o,c)}function oy(i,o,c){o.status="fulfilled",o.value=c,ly(o),i.state=c,o=i.pending,o!==null&&(c=o.next,c===o?i.pending=null:(c=c.next,o.next=c,iy(i,c)))}function jf(i,o,c){var g=i.pending;if(i.pending=null,g!==null){g=g.next;do o.status="rejected",o.reason=c,ly(o),o=o.next;while(o!==g)}i.action=null}function ly(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function cy(i,o){return o}function uy(i,o){if(tt){var c=ht.formState;if(c!==null){e:{var g=Ie;if(tt){if(St){t:{for(var p=St,x=jn;p.nodeType!==8;){if(!x){p=null;break t}if(p=dn(p.nextSibling),p===null){p=null;break t}}x=p.data,p=x==="F!"||x==="F"?p:null}if(p){St=dn(p.nextSibling),g=p.data==="F!";break e}}yi(g)}g=!1}g&&(o=c[0])}}return c=Ts(),c.memoizedState=c.baseState=o,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cy,lastRenderedState:o},c.queue=g,c=Ay.bind(null,Ie,g),g.dispatch=c,g=Tf(!1),x=Nf.bind(null,Ie,!1,g.queue),g=Ts(),p={state:o,dispatch:null,action:i,pending:null},g.queue=p,c=xj.bind(null,Ie,p,x,c),p.dispatch=c,g.memoizedState=i,[o,c,!1]}function dy(i){var o=Rt();return hy(o,ot,i)}function hy(i,o,c){if(o=Sf(i,o,cy)[0],i=Kc(qn)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var g=Qo(o)}catch(C){throw C===$o?Gc:C}else g=o;o=Rt();var p=o.queue,x=p.dispatch;return c!==o.memoizedState&&(Ie.flags|=2048,ba(9,Qc(),bj.bind(null,p,c),null)),[g,x,i]}function bj(i,o){i.action=o}function fy(i){var o=Rt(),c=ot;if(c!==null)return hy(o,c,i);Rt(),o=o.memoizedState,c=Rt();var g=c.queue.dispatch;return c.memoizedState=i,[o,g,!1]}function ba(i,o,c,g){return i={tag:i,create:c,deps:g,inst:o,next:null},o=Ie.updateQueue,o===null&&(o=wf(),Ie.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=i.next=i:(g=c.next,c.next=i,i.next=g,o.lastEffect=i),i}function Qc(){return{destroy:void 0,resource:void 0}}function gy(){return Rt().memoizedState}function Zc(i,o,c,g){var p=Ts();g=g===void 0?null:g,Ie.flags|=i,p.memoizedState=ba(1|o,Qc(),c,g)}function Zo(i,o,c,g){var p=Rt();g=g===void 0?null:g;var x=p.memoizedState.inst;ot!==null&&g!==null&&pf(g,ot.memoizedState.deps)?p.memoizedState=ba(o,x,c,g):(Ie.flags|=i,p.memoizedState=ba(1|o,x,c,g))}function my(i,o){Zc(8390656,8,i,o)}function py(i,o){Zo(2048,8,i,o)}function vy(i,o){return Zo(4,2,i,o)}function yy(i,o){return Zo(4,4,i,o)}function xy(i,o){if(typeof o=="function"){i=i();var c=o(i);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function by(i,o,c){c=c!=null?c.concat([i]):null,Zo(4,4,xy.bind(null,o,i),c)}function Ef(){}function wy(i,o){var c=Rt();o=o===void 0?null:o;var g=c.memoizedState;return o!==null&&pf(o,g[1])?g[0]:(c.memoizedState=[i,o],i)}function _y(i,o){var c=Rt();o=o===void 0?null:o;var g=c.memoizedState;if(o!==null&&pf(o,g[1]))return g[0];if(g=i(),_i){ge(!0);try{i()}finally{ge(!1)}}return c.memoizedState=[g,o],g}function kf(i,o,c){return c===void 0||(Nr&1073741824)!==0?i.memoizedState=o:(i.memoizedState=c,i=Tx(),Ie.lanes|=i,Fr|=i,c)}function Sy(i,o,c,g){return Ps(c,o)?c:va.current!==null?(i=kf(i,c,g),Ps(i,o)||(Wt=!0),i):(Nr&42)===0?(Wt=!0,i.memoizedState=c):(i=Tx(),Ie.lanes|=i,Fr|=i,o)}function Cy(i,o,c,g,p){var x=$.p;$.p=x!==0&&8>x?x:8;var C=P.T,E={};P.T=E,Nf(i,!1,o,c);try{var R=p(),Q=P.S;if(Q!==null&&Q(E,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var ae=pj(R,g);Jo(i,o,ae,zs(i))}else Jo(i,o,g,zs(i))}catch(de){Jo(i,o,{then:function(){},status:"rejected",reason:de},zs())}finally{$.p=x,P.T=C}}function wj(){}function Af(i,o,c,g){if(i.tag!==5)throw Error(s(476));var p=Ty(i).queue;Cy(i,p,o,I,c===null?wj:function(){return jy(i),c(g)})}function Ty(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:I},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:c},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function jy(i){var o=Ty(i).next.queue;Jo(i,o,{},zs())}function Df(){return cs(vl)}function Ey(){return Rt().memoizedState}function ky(){return Rt().memoizedState}function _j(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var c=zs();i=Ar(c);var g=Dr(o,i,c);g!==null&&(Vs(g,o,c),qo(g,o,c)),o={cache:af()},i.payload=o;return}o=o.return}}function Sj(i,o,c){var g=zs();c={lane:g,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Jc(i)?Dy(o,c):(c=Xh(i,o,c,g),c!==null&&(Vs(c,i,g),Ny(c,o,g)))}function Ay(i,o,c){var g=zs();Jo(i,o,c,g)}function Jo(i,o,c,g){var p={lane:g,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Jc(i))Dy(o,p);else{var x=i.alternate;if(i.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var C=o.lastRenderedState,E=x(C,c);if(p.hasEagerState=!0,p.eagerState=E,Ps(E,C))return Lc(i,o,p,0),ht===null&&Pc(),!1}catch{}finally{}if(c=Xh(i,o,p,g),c!==null)return Vs(c,i,g),Ny(c,o,g),!0}return!1}function Nf(i,o,c,g){if(g={lane:2,revertLane:cg(),action:g,hasEagerState:!1,eagerState:null,next:null},Jc(i)){if(o)throw Error(s(479))}else o=Xh(i,c,g,2),o!==null&&Vs(o,i,2)}function Jc(i){var o=i.alternate;return i===Ie||o!==null&&o===Ie}function Dy(i,o){ya=qc=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function Ny(i,o,c){if((c&4194048)!==0){var g=o.lanes;g&=i.pendingLanes,c|=g,o.lanes=c,U0(i,c)}}var eu={readContext:cs,use:Xc,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt},Oy={readContext:cs,use:Xc,useCallback:function(i,o){return Ts().memoizedState=[i,o===void 0?null:o],i},useContext:cs,useEffect:my,useImperativeHandle:function(i,o,c){c=c!=null?c.concat([i]):null,Zc(4194308,4,xy.bind(null,o,i),c)},useLayoutEffect:function(i,o){return Zc(4194308,4,i,o)},useInsertionEffect:function(i,o){Zc(4,2,i,o)},useMemo:function(i,o){var c=Ts();o=o===void 0?null:o;var g=i();if(_i){ge(!0);try{i()}finally{ge(!1)}}return c.memoizedState=[g,o],g},useReducer:function(i,o,c){var g=Ts();if(c!==void 0){var p=c(o);if(_i){ge(!0);try{c(o)}finally{ge(!1)}}}else p=o;return g.memoizedState=g.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},g.queue=i,i=i.dispatch=Sj.bind(null,Ie,i),[g.memoizedState,i]},useRef:function(i){var o=Ts();return i={current:i},o.memoizedState=i},useState:function(i){i=Tf(i);var o=i.queue,c=Ay.bind(null,Ie,o);return o.dispatch=c,[i.memoizedState,c]},useDebugValue:Ef,useDeferredValue:function(i,o){var c=Ts();return kf(c,i,o)},useTransition:function(){var i=Tf(!1);return i=Cy.bind(null,Ie,i.queue,!0,!1),Ts().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,c){var g=Ie,p=Ts();if(tt){if(c===void 0)throw Error(s(407));c=c()}else{if(c=o(),ht===null)throw Error(s(349));(Xe&124)!==0||Jv(g,o,c)}p.memoizedState=c;var x={value:c,getSnapshot:o};return p.queue=x,my(ty.bind(null,g,x,i),[i]),g.flags|=2048,ba(9,Qc(),ey.bind(null,g,x,c,o),null),c},useId:function(){var i=Ts(),o=ht.identifierPrefix;if(tt){var c=Gn,g=Hn;c=(g&~(1<<32-ce(g)-1)).toString(32)+c,o=""+o+"R"+c,c=Wc++,0<c&&(o+="H"+c.toString(32)),o+=""}else c=vj++,o=""+o+"r"+c.toString(32)+"";return i.memoizedState=o},useHostTransitionStatus:Df,useFormState:uy,useActionState:uy,useOptimistic:function(i){var o=Ts();o.memoizedState=o.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=Nf.bind(null,Ie,!0,c),c.dispatch=o,[i,o]},useMemoCache:_f,useCacheRefresh:function(){return Ts().memoizedState=_j.bind(null,Ie)}},My={readContext:cs,use:Xc,useCallback:wy,useContext:cs,useEffect:py,useImperativeHandle:by,useInsertionEffect:vy,useLayoutEffect:yy,useMemo:_y,useReducer:Kc,useRef:gy,useState:function(){return Kc(qn)},useDebugValue:Ef,useDeferredValue:function(i,o){var c=Rt();return Sy(c,ot.memoizedState,i,o)},useTransition:function(){var i=Kc(qn)[0],o=Rt().memoizedState;return[typeof i=="boolean"?i:Qo(i),o]},useSyncExternalStore:Zv,useId:Ey,useHostTransitionStatus:Df,useFormState:dy,useActionState:dy,useOptimistic:function(i,o){var c=Rt();return ry(c,ot,i,o)},useMemoCache:_f,useCacheRefresh:ky},Cj={readContext:cs,use:Xc,useCallback:wy,useContext:cs,useEffect:py,useImperativeHandle:by,useInsertionEffect:vy,useLayoutEffect:yy,useMemo:_y,useReducer:Cf,useRef:gy,useState:function(){return Cf(qn)},useDebugValue:Ef,useDeferredValue:function(i,o){var c=Rt();return ot===null?kf(c,i,o):Sy(c,ot.memoizedState,i,o)},useTransition:function(){var i=Cf(qn)[0],o=Rt().memoizedState;return[typeof i=="boolean"?i:Qo(i),o]},useSyncExternalStore:Zv,useId:Ey,useHostTransitionStatus:Df,useFormState:fy,useActionState:fy,useOptimistic:function(i,o){var c=Rt();return ot!==null?ry(c,ot,i,o):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:_f,useCacheRefresh:ky},wa=null,el=0;function tu(i){var o=el;return el+=1,wa===null&&(wa=[]),Gv(wa,i,o)}function tl(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function su(i,o){throw o.$$typeof===v?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Ry(i){var o=i._init;return o(i._payload)}function Py(i){function o(G,F){if(i){var X=G.deletions;X===null?(G.deletions=[F],G.flags|=16):X.push(F)}}function c(G,F){if(!i)return null;for(;F!==null;)o(G,F),F=F.sibling;return null}function g(G){for(var F=new Map;G!==null;)G.key!==null?F.set(G.key,G):F.set(G.index,G),G=G.sibling;return F}function p(G,F){return G=In(G,F),G.index=0,G.sibling=null,G}function x(G,F,X){return G.index=X,i?(X=G.alternate,X!==null?(X=X.index,X<F?(G.flags|=67108866,F):X):(G.flags|=67108866,F)):(G.flags|=1048576,F)}function C(G){return i&&G.alternate===null&&(G.flags|=67108866),G}function E(G,F,X,le){return F===null||F.tag!==6?(F=Qh(X,G.mode,le),F.return=G,F):(F=p(F,X),F.return=G,F)}function R(G,F,X,le){var Ce=X.type;return Ce===w?ae(G,F,X.props.children,le,X.key):F!==null&&(F.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===B&&Ry(Ce)===F.type)?(F=p(F,X.props),tl(F,X),F.return=G,F):(F=Fc(X.type,X.key,X.props,null,G.mode,le),tl(F,X),F.return=G,F)}function Q(G,F,X,le){return F===null||F.tag!==4||F.stateNode.containerInfo!==X.containerInfo||F.stateNode.implementation!==X.implementation?(F=Zh(X,G.mode,le),F.return=G,F):(F=p(F,X.children||[]),F.return=G,F)}function ae(G,F,X,le,Ce){return F===null||F.tag!==7?(F=gi(X,G.mode,le,Ce),F.return=G,F):(F=p(F,X),F.return=G,F)}function de(G,F,X){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Qh(""+F,G.mode,X),F.return=G,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case y:return X=Fc(F.type,F.key,F.props,null,G.mode,X),tl(X,F),X.return=G,X;case b:return F=Zh(F,G.mode,X),F.return=G,F;case B:var le=F._init;return F=le(F._payload),de(G,F,X)}if(fe(F)||q(F))return F=gi(F,G.mode,X,null),F.return=G,F;if(typeof F.then=="function")return de(G,tu(F),X);if(F.$$typeof===k)return de(G,Ic(G,F),X);su(G,F)}return null}function Z(G,F,X,le){var Ce=F!==null?F.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Ce!==null?null:E(G,F,""+X,le);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case y:return X.key===Ce?R(G,F,X,le):null;case b:return X.key===Ce?Q(G,F,X,le):null;case B:return Ce=X._init,X=Ce(X._payload),Z(G,F,X,le)}if(fe(X)||q(X))return Ce!==null?null:ae(G,F,X,le,null);if(typeof X.then=="function")return Z(G,F,tu(X),le);if(X.$$typeof===k)return Z(G,F,Ic(G,X),le);su(G,X)}return null}function J(G,F,X,le,Ce){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return G=G.get(X)||null,E(F,G,""+le,Ce);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case y:return G=G.get(le.key===null?X:le.key)||null,R(F,G,le,Ce);case b:return G=G.get(le.key===null?X:le.key)||null,Q(F,G,le,Ce);case B:var Ge=le._init;return le=Ge(le._payload),J(G,F,X,le,Ce)}if(fe(le)||q(le))return G=G.get(X)||null,ae(F,G,le,Ce,null);if(typeof le.then=="function")return J(G,F,X,tu(le),Ce);if(le.$$typeof===k)return J(G,F,X,Ic(F,le),Ce);su(F,le)}return null}function Re(G,F,X,le){for(var Ce=null,Ge=null,ke=F,Me=F=0,Kt=null;ke!==null&&Me<X.length;Me++){ke.index>Me?(Kt=ke,ke=null):Kt=ke.sibling;var Je=Z(G,ke,X[Me],le);if(Je===null){ke===null&&(ke=Kt);break}i&&ke&&Je.alternate===null&&o(G,ke),F=x(Je,F,Me),Ge===null?Ce=Je:Ge.sibling=Je,Ge=Je,ke=Kt}if(Me===X.length)return c(G,ke),tt&&pi(G,Me),Ce;if(ke===null){for(;Me<X.length;Me++)ke=de(G,X[Me],le),ke!==null&&(F=x(ke,F,Me),Ge===null?Ce=ke:Ge.sibling=ke,Ge=ke);return tt&&pi(G,Me),Ce}for(ke=g(ke);Me<X.length;Me++)Kt=J(ke,G,Me,X[Me],le),Kt!==null&&(i&&Kt.alternate!==null&&ke.delete(Kt.key===null?Me:Kt.key),F=x(Kt,F,Me),Ge===null?Ce=Kt:Ge.sibling=Kt,Ge=Kt);return i&&ke.forEach(function(qr){return o(G,qr)}),tt&&pi(G,Me),Ce}function Ne(G,F,X,le){if(X==null)throw Error(s(151));for(var Ce=null,Ge=null,ke=F,Me=F=0,Kt=null,Je=X.next();ke!==null&&!Je.done;Me++,Je=X.next()){ke.index>Me?(Kt=ke,ke=null):Kt=ke.sibling;var qr=Z(G,ke,Je.value,le);if(qr===null){ke===null&&(ke=Kt);break}i&&ke&&qr.alternate===null&&o(G,ke),F=x(qr,F,Me),Ge===null?Ce=qr:Ge.sibling=qr,Ge=qr,ke=Kt}if(Je.done)return c(G,ke),tt&&pi(G,Me),Ce;if(ke===null){for(;!Je.done;Me++,Je=X.next())Je=de(G,Je.value,le),Je!==null&&(F=x(Je,F,Me),Ge===null?Ce=Je:Ge.sibling=Je,Ge=Je);return tt&&pi(G,Me),Ce}for(ke=g(ke);!Je.done;Me++,Je=X.next())Je=J(ke,G,Me,Je.value,le),Je!==null&&(i&&Je.alternate!==null&&ke.delete(Je.key===null?Me:Je.key),F=x(Je,F,Me),Ge===null?Ce=Je:Ge.sibling=Je,Ge=Je);return i&&ke.forEach(function(TE){return o(G,TE)}),tt&&pi(G,Me),Ce}function ct(G,F,X,le){if(typeof X=="object"&&X!==null&&X.type===w&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case y:e:{for(var Ce=X.key;F!==null;){if(F.key===Ce){if(Ce=X.type,Ce===w){if(F.tag===7){c(G,F.sibling),le=p(F,X.props.children),le.return=G,G=le;break e}}else if(F.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===B&&Ry(Ce)===F.type){c(G,F.sibling),le=p(F,X.props),tl(le,X),le.return=G,G=le;break e}c(G,F);break}else o(G,F);F=F.sibling}X.type===w?(le=gi(X.props.children,G.mode,le,X.key),le.return=G,G=le):(le=Fc(X.type,X.key,X.props,null,G.mode,le),tl(le,X),le.return=G,G=le)}return C(G);case b:e:{for(Ce=X.key;F!==null;){if(F.key===Ce)if(F.tag===4&&F.stateNode.containerInfo===X.containerInfo&&F.stateNode.implementation===X.implementation){c(G,F.sibling),le=p(F,X.children||[]),le.return=G,G=le;break e}else{c(G,F);break}else o(G,F);F=F.sibling}le=Zh(X,G.mode,le),le.return=G,G=le}return C(G);case B:return Ce=X._init,X=Ce(X._payload),ct(G,F,X,le)}if(fe(X))return Re(G,F,X,le);if(q(X)){if(Ce=q(X),typeof Ce!="function")throw Error(s(150));return X=Ce.call(X),Ne(G,F,X,le)}if(typeof X.then=="function")return ct(G,F,tu(X),le);if(X.$$typeof===k)return ct(G,F,Ic(G,X),le);su(G,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,F!==null&&F.tag===6?(c(G,F.sibling),le=p(F,X),le.return=G,G=le):(c(G,F),le=Qh(X,G.mode,le),le.return=G,G=le),C(G)):c(G,F)}return function(G,F,X,le){try{el=0;var Ce=ct(G,F,X,le);return wa=null,Ce}catch(ke){if(ke===$o||ke===Gc)throw ke;var Ge=Ls(29,ke,null,G.mode);return Ge.lanes=le,Ge.return=G,Ge}finally{}}}var _a=Py(!0),Ly=Py(!1),Zs=H(null),En=null;function Or(i){var o=i.alternate;ne(zt,zt.current&1),ne(Zs,i),En===null&&(o===null||va.current!==null||o.memoizedState!==null)&&(En=i)}function By(i){if(i.tag===22){if(ne(zt,zt.current),ne(Zs,i),En===null){var o=i.alternate;o!==null&&o.memoizedState!==null&&(En=i)}}else Mr()}function Mr(){ne(zt,zt.current),ne(Zs,Zs.current)}function Wn(i){ue(Zs),En===i&&(En=null),ue(zt)}var zt=H(0);function nu(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||wg(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Of(i,o,c,g){o=i.memoizedState,c=c(g,o),c=c==null?o:m({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Mf={enqueueSetState:function(i,o,c){i=i._reactInternals;var g=zs(),p=Ar(g);p.payload=o,c!=null&&(p.callback=c),o=Dr(i,p,g),o!==null&&(Vs(o,i,g),qo(o,i,g))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var g=zs(),p=Ar(g);p.tag=1,p.payload=o,c!=null&&(p.callback=c),o=Dr(i,p,g),o!==null&&(Vs(o,i,g),qo(o,i,g))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=zs(),g=Ar(c);g.tag=2,o!=null&&(g.callback=o),o=Dr(i,g,c),o!==null&&(Vs(o,i,c),qo(o,i,c))}};function Fy(i,o,c,g,p,x,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,x,C):o.prototype&&o.prototype.isPureReactComponent?!Bo(c,g)||!Bo(p,x):!0}function Uy(i,o,c,g){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,g),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,g),o.state!==i&&Mf.enqueueReplaceState(o,o.state,null)}function Si(i,o){var c=o;if("ref"in o){c={};for(var g in o)g!=="ref"&&(c[g]=o[g])}if(i=i.defaultProps){c===o&&(c=m({},c));for(var p in i)c[p]===void 0&&(c[p]=i[p])}return c}var ru=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function zy(i){ru(i)}function Vy(i){console.error(i)}function Iy(i){ru(i)}function iu(i,o){try{var c=i.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(g){setTimeout(function(){throw g})}}function Hy(i,o,c){try{var g=i.onCaughtError;g(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Rf(i,o,c){return c=Ar(c),c.tag=3,c.payload={element:null},c.callback=function(){iu(i,o)},c}function Gy(i){return i=Ar(i),i.tag=3,i}function $y(i,o,c,g){var p=c.type.getDerivedStateFromError;if(typeof p=="function"){var x=g.value;i.payload=function(){return p(x)},i.callback=function(){Hy(o,c,g)}}var C=c.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){Hy(o,c,g),typeof p!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var E=g.stack;this.componentDidCatch(g.value,{componentStack:E!==null?E:""})})}function Tj(i,o,c,g,p){if(c.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(o=c.alternate,o!==null&&Io(o,c,p,!0),c=Zs.current,c!==null){switch(c.tag){case 13:return En===null?rg():c.alternate===null&&Ct===0&&(Ct=3),c.flags&=-257,c.flags|=65536,c.lanes=p,g===cf?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([g]):o.add(g),ag(i,g,p)),!1;case 22:return c.flags|=65536,g===cf?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([g])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([g]):c.add(g)),ag(i,g,p)),!1}throw Error(s(435,c.tag))}return ag(i,g,p),rg(),!1}if(tt)return o=Zs.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=p,g!==tf&&(i=Error(s(422),{cause:g}),Vo(Ws(i,c)))):(g!==tf&&(o=Error(s(423),{cause:g}),Vo(Ws(o,c))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,g=Ws(g,c),p=Rf(i.stateNode,g,p),hf(i,p),Ct!==4&&(Ct=2)),!1;var x=Error(s(520),{cause:g});if(x=Ws(x,c),ll===null?ll=[x]:ll.push(x),Ct!==4&&(Ct=2),o===null)return!0;g=Ws(g,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,i=p&-p,c.lanes|=i,i=Rf(c.stateNode,g,i),hf(c,i),!1;case 1:if(o=c.type,x=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ur===null||!Ur.has(x))))return c.flags|=65536,p&=-p,c.lanes|=p,p=Gy(p),$y(p,i,c,g),hf(c,p),!1}c=c.return}while(c!==null);return!1}var Yy=Error(s(461)),Wt=!1;function ss(i,o,c,g){o.child=i===null?Ly(o,null,c,g):_a(o,i.child,c,g)}function qy(i,o,c,g,p){c=c.render;var x=o.ref;if("ref"in g){var C={};for(var E in g)E!=="ref"&&(C[E]=g[E])}else C=g;return bi(o),g=vf(i,o,c,C,x,p),E=yf(),i!==null&&!Wt?(xf(i,o,p),Xn(i,o,p)):(tt&&E&&Jh(o),o.flags|=1,ss(i,o,g,p),o.child)}function Wy(i,o,c,g,p){if(i===null){var x=c.type;return typeof x=="function"&&!Kh(x)&&x.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=x,Xy(i,o,x,g,p)):(i=Fc(c.type,null,g,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(x=i.child,!If(i,p)){var C=x.memoizedProps;if(c=c.compare,c=c!==null?c:Bo,c(C,g)&&i.ref===o.ref)return Xn(i,o,p)}return o.flags|=1,i=In(x,g),i.ref=o.ref,i.return=o,o.child=i}function Xy(i,o,c,g,p){if(i!==null){var x=i.memoizedProps;if(Bo(x,g)&&i.ref===o.ref)if(Wt=!1,o.pendingProps=g=x,If(i,p))(i.flags&131072)!==0&&(Wt=!0);else return o.lanes=i.lanes,Xn(i,o,p)}return Pf(i,o,c,g,p)}function Ky(i,o,c){var g=o.pendingProps,p=g.children,x=i!==null?i.memoizedState:null;if(g.mode==="hidden"){if((o.flags&128)!==0){if(g=x!==null?x.baseLanes|c:c,i!==null){for(p=o.child=i.child,x=0;p!==null;)x=x|p.lanes|p.childLanes,p=p.sibling;o.childLanes=x&~g}else o.childLanes=0,o.child=null;return Qy(i,o,g,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Hc(o,x!==null?x.cachePool:null),x!==null?Xv(o,x):gf(),By(o);else return o.lanes=o.childLanes=536870912,Qy(i,o,x!==null?x.baseLanes|c:c,c)}else x!==null?(Hc(o,x.cachePool),Xv(o,x),Mr(),o.memoizedState=null):(i!==null&&Hc(o,null),gf(),Mr());return ss(i,o,p,c),o.child}function Qy(i,o,c,g){var p=lf();return p=p===null?null:{parent:Ut._currentValue,pool:p},o.memoizedState={baseLanes:c,cachePool:p},i!==null&&Hc(o,null),gf(),By(o),i!==null&&Io(i,o,g,!0),null}function au(i,o){var c=o.ref;if(c===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(i===null||i.ref!==c)&&(o.flags|=4194816)}}function Pf(i,o,c,g,p){return bi(o),c=vf(i,o,c,g,void 0,p),g=yf(),i!==null&&!Wt?(xf(i,o,p),Xn(i,o,p)):(tt&&g&&Jh(o),o.flags|=1,ss(i,o,c,p),o.child)}function Zy(i,o,c,g,p,x){return bi(o),o.updateQueue=null,c=Qv(o,g,c,p),Kv(i),g=yf(),i!==null&&!Wt?(xf(i,o,x),Xn(i,o,x)):(tt&&g&&Jh(o),o.flags|=1,ss(i,o,c,x),o.child)}function Jy(i,o,c,g,p){if(bi(o),o.stateNode===null){var x=ha,C=c.contextType;typeof C=="object"&&C!==null&&(x=cs(C)),x=new c(g,x),o.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Mf,o.stateNode=x,x._reactInternals=o,x=o.stateNode,x.props=g,x.state=o.memoizedState,x.refs={},uf(o),C=c.contextType,x.context=typeof C=="object"&&C!==null?cs(C):ha,x.state=o.memoizedState,C=c.getDerivedStateFromProps,typeof C=="function"&&(Of(o,c,C,g),x.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(C=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),C!==x.state&&Mf.enqueueReplaceState(x,x.state,null),Xo(o,g,x,p),Wo(),x.state=o.memoizedState),typeof x.componentDidMount=="function"&&(o.flags|=4194308),g=!0}else if(i===null){x=o.stateNode;var E=o.memoizedProps,R=Si(c,E);x.props=R;var Q=x.context,ae=c.contextType;C=ha,typeof ae=="object"&&ae!==null&&(C=cs(ae));var de=c.getDerivedStateFromProps;ae=typeof de=="function"||typeof x.getSnapshotBeforeUpdate=="function",E=o.pendingProps!==E,ae||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(E||Q!==C)&&Uy(o,x,g,C),kr=!1;var Z=o.memoizedState;x.state=Z,Xo(o,g,x,p),Wo(),Q=o.memoizedState,E||Z!==Q||kr?(typeof de=="function"&&(Of(o,c,de,g),Q=o.memoizedState),(R=kr||Fy(o,c,R,g,Z,Q,C))?(ae||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(o.flags|=4194308)):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=g,o.memoizedState=Q),x.props=g,x.state=Q,x.context=C,g=R):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),g=!1)}else{x=o.stateNode,df(i,o),C=o.memoizedProps,ae=Si(c,C),x.props=ae,de=o.pendingProps,Z=x.context,Q=c.contextType,R=ha,typeof Q=="object"&&Q!==null&&(R=cs(Q)),E=c.getDerivedStateFromProps,(Q=typeof E=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==de||Z!==R)&&Uy(o,x,g,R),kr=!1,Z=o.memoizedState,x.state=Z,Xo(o,g,x,p),Wo();var J=o.memoizedState;C!==de||Z!==J||kr||i!==null&&i.dependencies!==null&&Vc(i.dependencies)?(typeof E=="function"&&(Of(o,c,E,g),J=o.memoizedState),(ae=kr||Fy(o,c,ae,g,Z,J,R)||i!==null&&i.dependencies!==null&&Vc(i.dependencies))?(Q||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(g,J,R),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(g,J,R)),typeof x.componentDidUpdate=="function"&&(o.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof x.componentDidUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=1024),o.memoizedProps=g,o.memoizedState=J),x.props=g,x.state=J,x.context=R,g=ae):(typeof x.componentDidUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=1024),g=!1)}return x=g,au(i,o),g=(o.flags&128)!==0,x||g?(x=o.stateNode,c=g&&typeof c.getDerivedStateFromError!="function"?null:x.render(),o.flags|=1,i!==null&&g?(o.child=_a(o,i.child,null,p),o.child=_a(o,null,c,p)):ss(i,o,c,p),o.memoizedState=x.state,i=o.child):i=Xn(i,o,p),i}function ex(i,o,c,g){return zo(),o.flags|=256,ss(i,o,c,g),o.child}var Lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bf(i){return{baseLanes:i,cachePool:Vv()}}function Ff(i,o,c){return i=i!==null?i.childLanes&~c:0,o&&(i|=Js),i}function tx(i,o,c){var g=o.pendingProps,p=!1,x=(o.flags&128)!==0,C;if((C=x)||(C=i!==null&&i.memoizedState===null?!1:(zt.current&2)!==0),C&&(p=!0,o.flags&=-129),C=(o.flags&32)!==0,o.flags&=-33,i===null){if(tt){if(p?Or(o):Mr(),tt){var E=St,R;if(R=E){e:{for(R=E,E=jn;R.nodeType!==8;){if(!E){E=null;break e}if(R=dn(R.nextSibling),R===null){E=null;break e}}E=R}E!==null?(o.memoizedState={dehydrated:E,treeContext:mi!==null?{id:Hn,overflow:Gn}:null,retryLane:536870912,hydrationErrors:null},R=Ls(18,null,null,0),R.stateNode=E,R.return=o,o.child=R,ps=o,St=null,R=!0):R=!1}R||yi(o)}if(E=o.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return wg(E)?o.lanes=32:o.lanes=536870912,null;Wn(o)}return E=g.children,g=g.fallback,p?(Mr(),p=o.mode,E=ou({mode:"hidden",children:E},p),g=gi(g,p,c,null),E.return=o,g.return=o,E.sibling=g,o.child=E,p=o.child,p.memoizedState=Bf(c),p.childLanes=Ff(i,C,c),o.memoizedState=Lf,g):(Or(o),Uf(o,E))}if(R=i.memoizedState,R!==null&&(E=R.dehydrated,E!==null)){if(x)o.flags&256?(Or(o),o.flags&=-257,o=zf(i,o,c)):o.memoizedState!==null?(Mr(),o.child=i.child,o.flags|=128,o=null):(Mr(),p=g.fallback,E=o.mode,g=ou({mode:"visible",children:g.children},E),p=gi(p,E,c,null),p.flags|=2,g.return=o,p.return=o,g.sibling=p,o.child=g,_a(o,i.child,null,c),g=o.child,g.memoizedState=Bf(c),g.childLanes=Ff(i,C,c),o.memoizedState=Lf,o=p);else if(Or(o),wg(E)){if(C=E.nextSibling&&E.nextSibling.dataset,C)var Q=C.dgst;C=Q,g=Error(s(419)),g.stack="",g.digest=C,Vo({value:g,source:null,stack:null}),o=zf(i,o,c)}else if(Wt||Io(i,o,c,!1),C=(c&i.childLanes)!==0,Wt||C){if(C=ht,C!==null&&(g=c&-c,g=(g&42)!==0?1:wh(g),g=(g&(C.suspendedLanes|c))!==0?0:g,g!==0&&g!==R.retryLane))throw R.retryLane=g,da(i,g),Vs(C,i,g),Yy;E.data==="$?"||rg(),o=zf(i,o,c)}else E.data==="$?"?(o.flags|=192,o.child=i.child,o=null):(i=R.treeContext,St=dn(E.nextSibling),ps=o,tt=!0,vi=null,jn=!1,i!==null&&(Ks[Qs++]=Hn,Ks[Qs++]=Gn,Ks[Qs++]=mi,Hn=i.id,Gn=i.overflow,mi=o),o=Uf(o,g.children),o.flags|=4096);return o}return p?(Mr(),p=g.fallback,E=o.mode,R=i.child,Q=R.sibling,g=In(R,{mode:"hidden",children:g.children}),g.subtreeFlags=R.subtreeFlags&65011712,Q!==null?p=In(Q,p):(p=gi(p,E,c,null),p.flags|=2),p.return=o,g.return=o,g.sibling=p,o.child=g,g=p,p=o.child,E=i.child.memoizedState,E===null?E=Bf(c):(R=E.cachePool,R!==null?(Q=Ut._currentValue,R=R.parent!==Q?{parent:Q,pool:Q}:R):R=Vv(),E={baseLanes:E.baseLanes|c,cachePool:R}),p.memoizedState=E,p.childLanes=Ff(i,C,c),o.memoizedState=Lf,g):(Or(o),c=i.child,i=c.sibling,c=In(c,{mode:"visible",children:g.children}),c.return=o,c.sibling=null,i!==null&&(C=o.deletions,C===null?(o.deletions=[i],o.flags|=16):C.push(i)),o.child=c,o.memoizedState=null,c)}function Uf(i,o){return o=ou({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function ou(i,o){return i=Ls(22,i,null,o),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function zf(i,o,c){return _a(o,i.child,null,c),i=Uf(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function sx(i,o,c){i.lanes|=o;var g=i.alternate;g!==null&&(g.lanes|=o),nf(i.return,o,c)}function Vf(i,o,c,g,p){var x=i.memoizedState;x===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:g,tail:c,tailMode:p}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=g,x.tail=c,x.tailMode=p)}function nx(i,o,c){var g=o.pendingProps,p=g.revealOrder,x=g.tail;if(ss(i,o,g.children,c),g=zt.current,(g&2)!==0)g=g&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&sx(i,c,o);else if(i.tag===19)sx(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}switch(ne(zt,g),p){case"forwards":for(c=o.child,p=null;c!==null;)i=c.alternate,i!==null&&nu(i)===null&&(p=c),c=c.sibling;c=p,c===null?(p=o.child,o.child=null):(p=c.sibling,c.sibling=null),Vf(o,!1,p,c,x);break;case"backwards":for(c=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&nu(i)===null){o.child=p;break}i=p.sibling,p.sibling=c,c=p,p=i}Vf(o,!0,c,null,x);break;case"together":Vf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Xn(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),Fr|=o.lanes,(c&o.childLanes)===0)if(i!==null){if(Io(i,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,c=In(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=In(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function If(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Vc(i)))}function jj(i,o,c){switch(o.tag){case 3:Ue(o,o.stateNode.containerInfo),Er(o,Ut,i.memoizedState.cache),zo();break;case 27:case 5:ye(o);break;case 4:Ue(o,o.stateNode.containerInfo);break;case 10:Er(o,o.type,o.memoizedProps.value);break;case 13:var g=o.memoizedState;if(g!==null)return g.dehydrated!==null?(Or(o),o.flags|=128,null):(c&o.child.childLanes)!==0?tx(i,o,c):(Or(o),i=Xn(i,o,c),i!==null?i.sibling:null);Or(o);break;case 19:var p=(i.flags&128)!==0;if(g=(c&o.childLanes)!==0,g||(Io(i,o,c,!1),g=(c&o.childLanes)!==0),p){if(g)return nx(i,o,c);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ne(zt,zt.current),g)break;return null;case 22:case 23:return o.lanes=0,Ky(i,o,c);case 24:Er(o,Ut,i.memoizedState.cache)}return Xn(i,o,c)}function rx(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps)Wt=!0;else{if(!If(i,c)&&(o.flags&128)===0)return Wt=!1,jj(i,o,c);Wt=(i.flags&131072)!==0}else Wt=!1,tt&&(o.flags&1048576)!==0&&Rv(o,zc,o.index);switch(o.lanes=0,o.tag){case 16:e:{i=o.pendingProps;var g=o.elementType,p=g._init;if(g=p(g._payload),o.type=g,typeof g=="function")Kh(g)?(i=Si(g,i),o.tag=1,o=Jy(null,o,g,i,c)):(o.tag=0,o=Pf(null,o,g,i,c));else{if(g!=null){if(p=g.$$typeof,p===M){o.tag=11,o=qy(null,o,g,i,c);break e}else if(p===A){o.tag=14,o=Wy(null,o,g,i,c);break e}}throw o=re(g)||g,Error(s(306,o,""))}}return o;case 0:return Pf(i,o,o.type,o.pendingProps,c);case 1:return g=o.type,p=Si(g,o.pendingProps),Jy(i,o,g,p,c);case 3:e:{if(Ue(o,o.stateNode.containerInfo),i===null)throw Error(s(387));g=o.pendingProps;var x=o.memoizedState;p=x.element,df(i,o),Xo(o,g,null,c);var C=o.memoizedState;if(g=C.cache,Er(o,Ut,g),g!==x.cache&&rf(o,[Ut],c,!0),Wo(),g=C.element,x.isDehydrated)if(x={element:g,isDehydrated:!1,cache:C.cache},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){o=ex(i,o,g,c);break e}else if(g!==p){p=Ws(Error(s(424)),o),Vo(p),o=ex(i,o,g,c);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(St=dn(i.firstChild),ps=o,tt=!0,vi=null,jn=!0,c=Ly(o,null,g,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(zo(),g===p){o=Xn(i,o,c);break e}ss(i,o,g,c)}o=o.child}return o;case 26:return au(i,o),i===null?(c=lb(o.type,null,o.pendingProps,null))?o.memoizedState=c:tt||(c=o.type,i=o.pendingProps,g=wu(we.current).createElement(c),g[ls]=o,g[Ss]=i,rs(g,c,i),qt(g),o.stateNode=g):o.memoizedState=lb(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return ye(o),i===null&&tt&&(g=o.stateNode=ib(o.type,o.pendingProps,we.current),ps=o,jn=!0,p=St,Ir(o.type)?(_g=p,St=dn(g.firstChild)):St=p),ss(i,o,o.pendingProps.children,c),au(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&tt&&((p=g=St)&&(g=eE(g,o.type,o.pendingProps,jn),g!==null?(o.stateNode=g,ps=o,St=dn(g.firstChild),jn=!1,p=!0):p=!1),p||yi(o)),ye(o),p=o.type,x=o.pendingProps,C=i!==null?i.memoizedProps:null,g=x.children,yg(p,x)?g=null:C!==null&&yg(p,C)&&(o.flags|=32),o.memoizedState!==null&&(p=vf(i,o,yj,null,null,c),vl._currentValue=p),au(i,o),ss(i,o,g,c),o.child;case 6:return i===null&&tt&&((i=c=St)&&(c=tE(c,o.pendingProps,jn),c!==null?(o.stateNode=c,ps=o,St=null,i=!0):i=!1),i||yi(o)),null;case 13:return tx(i,o,c);case 4:return Ue(o,o.stateNode.containerInfo),g=o.pendingProps,i===null?o.child=_a(o,null,g,c):ss(i,o,g,c),o.child;case 11:return qy(i,o,o.type,o.pendingProps,c);case 7:return ss(i,o,o.pendingProps,c),o.child;case 8:return ss(i,o,o.pendingProps.children,c),o.child;case 12:return ss(i,o,o.pendingProps.children,c),o.child;case 10:return g=o.pendingProps,Er(o,o.type,g.value),ss(i,o,g.children,c),o.child;case 9:return p=o.type._context,g=o.pendingProps.children,bi(o),p=cs(p),g=g(p),o.flags|=1,ss(i,o,g,c),o.child;case 14:return Wy(i,o,o.type,o.pendingProps,c);case 15:return Xy(i,o,o.type,o.pendingProps,c);case 19:return nx(i,o,c);case 31:return g=o.pendingProps,c=o.mode,g={mode:g.mode,children:g.children},i===null?(c=ou(g,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=In(i.child,g),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return Ky(i,o,c);case 24:return bi(o),g=cs(Ut),i===null?(p=lf(),p===null&&(p=ht,x=af(),p.pooledCache=x,x.refCount++,x!==null&&(p.pooledCacheLanes|=c),p=x),o.memoizedState={parent:g,cache:p},uf(o),Er(o,Ut,p)):((i.lanes&c)!==0&&(df(i,o),Xo(o,null,null,c),Wo()),p=i.memoizedState,x=o.memoizedState,p.parent!==g?(p={parent:g,cache:g},o.memoizedState=p,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=p),Er(o,Ut,g)):(g=x.cache,Er(o,Ut,g),g!==p.cache&&rf(o,[Ut],c,!0))),ss(i,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function Kn(i){i.flags|=4}function ix(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!fb(o)){if(o=Zs.current,o!==null&&((Xe&4194048)===Xe?En!==null:(Xe&62914560)!==Xe&&(Xe&536870912)===0||o!==En))throw Yo=cf,Iv;i.flags|=8192}}function lu(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Yt():536870912,i.lanes|=o,ja|=o)}function sl(i,o){if(!tt)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function bt(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,g=0;if(o)for(var p=i.child;p!==null;)c|=p.lanes|p.childLanes,g|=p.subtreeFlags&65011712,g|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)c|=p.lanes|p.childLanes,g|=p.subtreeFlags,g|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=g,i.childLanes=c,o}function Ej(i,o,c){var g=o.pendingProps;switch(ef(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(o),null;case 1:return bt(o),null;case 3:return c=o.stateNode,g=null,i!==null&&(g=i.memoizedState.cache),o.memoizedState.cache!==g&&(o.flags|=2048),Yn(Ut),dt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(Uo(o)?Kn(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Bv())),bt(o),null;case 26:return c=o.memoizedState,i===null?(Kn(o),c!==null?(bt(o),ix(o,c)):(bt(o),o.flags&=-16777217)):c?c!==i.memoizedState?(Kn(o),bt(o),ix(o,c)):(bt(o),o.flags&=-16777217):(i.memoizedProps!==g&&Kn(o),bt(o),o.flags&=-16777217),null;case 27:_e(o),c=we.current;var p=o.type;if(i!==null&&o.stateNode!=null)i.memoizedProps!==g&&Kn(o);else{if(!g){if(o.stateNode===null)throw Error(s(166));return bt(o),null}i=xe.current,Uo(o)?Pv(o):(i=ib(p,g,c),o.stateNode=i,Kn(o))}return bt(o),null;case 5:if(_e(o),c=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==g&&Kn(o);else{if(!g){if(o.stateNode===null)throw Error(s(166));return bt(o),null}if(i=xe.current,Uo(o))Pv(o);else{switch(p=wu(we.current),i){case 1:i=p.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:i=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":i=p.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":i=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":i=p.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof g.is=="string"?p.createElement("select",{is:g.is}):p.createElement("select"),g.multiple?i.multiple=!0:g.size&&(i.size=g.size);break;default:i=typeof g.is=="string"?p.createElement(c,{is:g.is}):p.createElement(c)}}i[ls]=o,i[Ss]=g;e:for(p=o.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===o)break e;for(;p.sibling===null;){if(p.return===null||p.return===o)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}o.stateNode=i;e:switch(rs(i,c,g),c){case"button":case"input":case"select":case"textarea":i=!!g.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Kn(o)}}return bt(o),o.flags&=-16777217,null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==g&&Kn(o);else{if(typeof g!="string"&&o.stateNode===null)throw Error(s(166));if(i=we.current,Uo(o)){if(i=o.stateNode,c=o.memoizedProps,g=null,p=ps,p!==null)switch(p.tag){case 27:case 5:g=p.memoizedProps}i[ls]=o,i=!!(i.nodeValue===c||g!==null&&g.suppressHydrationWarning===!0||Zx(i.nodeValue,c)),i||yi(o)}else i=wu(i).createTextNode(g),i[ls]=o,o.stateNode=i}return bt(o),null;case 13:if(g=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=Uo(o),g!==null&&g.dehydrated!==null){if(i===null){if(!p)throw Error(s(318));if(p=o.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[ls]=o}else zo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;bt(o),p=!1}else p=Bv(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return o.flags&256?(Wn(o),o):(Wn(o),null)}if(Wn(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=g!==null,i=i!==null&&i.memoizedState!==null,c){g=o.child,p=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(p=g.alternate.memoizedState.cachePool.pool);var x=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(x=g.memoizedState.cachePool.pool),x!==p&&(g.flags|=2048)}return c!==i&&c&&(o.child.flags|=8192),lu(o,o.updateQueue),bt(o),null;case 4:return dt(),i===null&&fg(o.stateNode.containerInfo),bt(o),null;case 10:return Yn(o.type),bt(o),null;case 19:if(ue(zt),p=o.memoizedState,p===null)return bt(o),null;if(g=(o.flags&128)!==0,x=p.rendering,x===null)if(g)sl(p,!1);else{if(Ct!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(x=nu(i),x!==null){for(o.flags|=128,sl(p,!1),i=x.updateQueue,o.updateQueue=i,lu(o,i),o.subtreeFlags=0,i=c,c=o.child;c!==null;)Mv(c,i),c=c.sibling;return ne(zt,zt.current&1|2),o.child}i=i.sibling}p.tail!==null&&he()>du&&(o.flags|=128,g=!0,sl(p,!1),o.lanes=4194304)}else{if(!g)if(i=nu(x),i!==null){if(o.flags|=128,g=!0,i=i.updateQueue,o.updateQueue=i,lu(o,i),sl(p,!0),p.tail===null&&p.tailMode==="hidden"&&!x.alternate&&!tt)return bt(o),null}else 2*he()-p.renderingStartTime>du&&c!==536870912&&(o.flags|=128,g=!0,sl(p,!1),o.lanes=4194304);p.isBackwards?(x.sibling=o.child,o.child=x):(i=p.last,i!==null?i.sibling=x:o.child=x,p.last=x)}return p.tail!==null?(o=p.tail,p.rendering=o,p.tail=o.sibling,p.renderingStartTime=he(),o.sibling=null,i=zt.current,ne(zt,g?i&1|2:i&1),o):(bt(o),null);case 22:case 23:return Wn(o),mf(),g=o.memoizedState!==null,i!==null?i.memoizedState!==null!==g&&(o.flags|=8192):g&&(o.flags|=8192),g?(c&536870912)!==0&&(o.flags&128)===0&&(bt(o),o.subtreeFlags&6&&(o.flags|=8192)):bt(o),c=o.updateQueue,c!==null&&lu(o,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),g=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),g!==c&&(o.flags|=2048),i!==null&&ue(wi),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Yn(Ut),bt(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function kj(i,o){switch(ef(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Yn(Ut),dt(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return _e(o),null;case 13:if(Wn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));zo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ue(zt),null;case 4:return dt(),null;case 10:return Yn(o.type),null;case 22:case 23:return Wn(o),mf(),i!==null&&ue(wi),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Yn(Ut),null;case 25:return null;default:return null}}function ax(i,o){switch(ef(o),o.tag){case 3:Yn(Ut),dt();break;case 26:case 27:case 5:_e(o);break;case 4:dt();break;case 13:Wn(o);break;case 19:ue(zt);break;case 10:Yn(o.type);break;case 22:case 23:Wn(o),mf(),i!==null&&ue(wi);break;case 24:Yn(Ut)}}function nl(i,o){try{var c=o.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var p=g.next;c=p;do{if((c.tag&i)===i){g=void 0;var x=c.create,C=c.inst;g=x(),C.destroy=g}c=c.next}while(c!==p)}}catch(E){ut(o,o.return,E)}}function Rr(i,o,c){try{var g=o.updateQueue,p=g!==null?g.lastEffect:null;if(p!==null){var x=p.next;g=x;do{if((g.tag&i)===i){var C=g.inst,E=C.destroy;if(E!==void 0){C.destroy=void 0,p=o;var R=c,Q=E;try{Q()}catch(ae){ut(p,R,ae)}}}g=g.next}while(g!==x)}}catch(ae){ut(o,o.return,ae)}}function ox(i){var o=i.updateQueue;if(o!==null){var c=i.stateNode;try{Wv(o,c)}catch(g){ut(i,i.return,g)}}}function lx(i,o,c){c.props=Si(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(g){ut(i,o,g)}}function rl(i,o){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var g=i.stateNode;break;case 30:g=i.stateNode;break;default:g=i.stateNode}typeof c=="function"?i.refCleanup=c(g):c.current=g}}catch(p){ut(i,o,p)}}function kn(i,o){var c=i.ref,g=i.refCleanup;if(c!==null)if(typeof g=="function")try{g()}catch(p){ut(i,o,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(p){ut(i,o,p)}else c.current=null}function cx(i){var o=i.type,c=i.memoizedProps,g=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&g.focus();break e;case"img":c.src?g.src=c.src:c.srcSet&&(g.srcset=c.srcSet)}}catch(p){ut(i,i.return,p)}}function Hf(i,o,c){try{var g=i.stateNode;Xj(g,i.type,c,o),g[Ss]=o}catch(p){ut(i,i.return,p)}}function ux(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ir(i.type)||i.tag===4}function Gf(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||ux(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ir(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function $f(i,o,c){var g=i.tag;if(g===5||g===6)i=i.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(i),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=bu));else if(g!==4&&(g===27&&Ir(i.type)&&(c=i.stateNode,o=null),i=i.child,i!==null))for($f(i,o,c),i=i.sibling;i!==null;)$f(i,o,c),i=i.sibling}function cu(i,o,c){var g=i.tag;if(g===5||g===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(g!==4&&(g===27&&Ir(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(cu(i,o,c),i=i.sibling;i!==null;)cu(i,o,c),i=i.sibling}function dx(i){var o=i.stateNode,c=i.memoizedProps;try{for(var g=i.type,p=o.attributes;p.length;)o.removeAttributeNode(p[0]);rs(o,g,c),o[ls]=i,o[Ss]=c}catch(x){ut(i,i.return,x)}}var Qn=!1,At=!1,Yf=!1,hx=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function Aj(i,o){if(i=i.containerInfo,pg=Eu,i=Sv(i),Hh(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var g=c.getSelection&&c.getSelection();if(g&&g.rangeCount!==0){c=g.anchorNode;var p=g.anchorOffset,x=g.focusNode;g=g.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var C=0,E=-1,R=-1,Q=0,ae=0,de=i,Z=null;t:for(;;){for(var J;de!==c||p!==0&&de.nodeType!==3||(E=C+p),de!==x||g!==0&&de.nodeType!==3||(R=C+g),de.nodeType===3&&(C+=de.nodeValue.length),(J=de.firstChild)!==null;)Z=de,de=J;for(;;){if(de===i)break t;if(Z===c&&++Q===p&&(E=C),Z===x&&++ae===g&&(R=C),(J=de.nextSibling)!==null)break;de=Z,Z=de.parentNode}de=J}c=E===-1||R===-1?null:{start:E,end:R}}else c=null}c=c||{start:0,end:0}}else c=null;for(vg={focusedElem:i,selectionRange:c},Eu=!1,Xt=o;Xt!==null;)if(o=Xt,i=o.child,(o.subtreeFlags&1024)!==0&&i!==null)i.return=o,Xt=i;else for(;Xt!==null;){switch(o=Xt,x=o.alternate,i=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&x!==null){i=void 0,c=o,p=x.memoizedProps,x=x.memoizedState,g=c.stateNode;try{var Re=Si(c.type,p,c.elementType===c.type);i=g.getSnapshotBeforeUpdate(Re,x),g.__reactInternalSnapshotBeforeUpdate=i}catch(Ne){ut(c,c.return,Ne)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,c=i.nodeType,c===9)bg(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":bg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,Xt=i;break}Xt=o.return}}function fx(i,o,c){var g=c.flags;switch(c.tag){case 0:case 11:case 15:Pr(i,c),g&4&&nl(5,c);break;case 1:if(Pr(i,c),g&4)if(i=c.stateNode,o===null)try{i.componentDidMount()}catch(C){ut(c,c.return,C)}else{var p=Si(c.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(p,o,i.__reactInternalSnapshotBeforeUpdate)}catch(C){ut(c,c.return,C)}}g&64&&ox(c),g&512&&rl(c,c.return);break;case 3:if(Pr(i,c),g&64&&(i=c.updateQueue,i!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{Wv(i,o)}catch(C){ut(c,c.return,C)}}break;case 27:o===null&&g&4&&dx(c);case 26:case 5:Pr(i,c),o===null&&g&4&&cx(c),g&512&&rl(c,c.return);break;case 12:Pr(i,c);break;case 13:Pr(i,c),g&4&&px(i,c),g&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=Fj.bind(null,c),sE(i,c))));break;case 22:if(g=c.memoizedState!==null||Qn,!g){o=o!==null&&o.memoizedState!==null||At,p=Qn;var x=At;Qn=g,(At=o)&&!x?Lr(i,c,(c.subtreeFlags&8772)!==0):Pr(i,c),Qn=p,At=x}break;case 30:break;default:Pr(i,c)}}function gx(i){var o=i.alternate;o!==null&&(i.alternate=null,gx(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Ch(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var pt=null,js=!1;function Zn(i,o,c){for(c=c.child;c!==null;)mx(i,o,c),c=c.sibling}function mx(i,o,c){if(me&&typeof me.onCommitFiberUnmount=="function")try{me.onCommitFiberUnmount(Ee,c)}catch{}switch(c.tag){case 26:At||kn(c,o),Zn(i,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:At||kn(c,o);var g=pt,p=js;Ir(c.type)&&(pt=c.stateNode,js=!1),Zn(i,o,c),fl(c.stateNode),pt=g,js=p;break;case 5:At||kn(c,o);case 6:if(g=pt,p=js,pt=null,Zn(i,o,c),pt=g,js=p,pt!==null)if(js)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(c.stateNode)}catch(x){ut(c,o,x)}else try{pt.removeChild(c.stateNode)}catch(x){ut(c,o,x)}break;case 18:pt!==null&&(js?(i=pt,nb(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),wl(i)):nb(pt,c.stateNode));break;case 4:g=pt,p=js,pt=c.stateNode.containerInfo,js=!0,Zn(i,o,c),pt=g,js=p;break;case 0:case 11:case 14:case 15:At||Rr(2,c,o),At||Rr(4,c,o),Zn(i,o,c);break;case 1:At||(kn(c,o),g=c.stateNode,typeof g.componentWillUnmount=="function"&&lx(c,o,g)),Zn(i,o,c);break;case 21:Zn(i,o,c);break;case 22:At=(g=At)||c.memoizedState!==null,Zn(i,o,c),At=g;break;default:Zn(i,o,c)}}function px(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{wl(i)}catch(c){ut(o,o.return,c)}}function Dj(i){switch(i.tag){case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new hx),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new hx),o;default:throw Error(s(435,i.tag))}}function qf(i,o){var c=Dj(i);o.forEach(function(g){var p=Uj.bind(null,i,g);c.has(g)||(c.add(g),g.then(p,p))})}function Bs(i,o){var c=o.deletions;if(c!==null)for(var g=0;g<c.length;g++){var p=c[g],x=i,C=o,E=C;e:for(;E!==null;){switch(E.tag){case 27:if(Ir(E.type)){pt=E.stateNode,js=!1;break e}break;case 5:pt=E.stateNode,js=!1;break e;case 3:case 4:pt=E.stateNode.containerInfo,js=!0;break e}E=E.return}if(pt===null)throw Error(s(160));mx(x,C,p),pt=null,js=!1,x=p.alternate,x!==null&&(x.return=null),p.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)vx(o,i),o=o.sibling}var un=null;function vx(i,o){var c=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Bs(o,i),Fs(i),g&4&&(Rr(3,i,i.return),nl(3,i),Rr(5,i,i.return));break;case 1:Bs(o,i),Fs(i),g&512&&(At||c===null||kn(c,c.return)),g&64&&Qn&&(i=i.updateQueue,i!==null&&(g=i.callbacks,g!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?g:c.concat(g))));break;case 26:var p=un;if(Bs(o,i),Fs(i),g&512&&(At||c===null||kn(c,c.return)),g&4){var x=c!==null?c.memoizedState:null;if(g=i.memoizedState,c===null)if(g===null)if(i.stateNode===null){e:{g=i.type,c=i.memoizedProps,p=p.ownerDocument||p;t:switch(g){case"title":x=p.getElementsByTagName("title")[0],(!x||x[ko]||x[ls]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=p.createElement(g),p.head.insertBefore(x,p.querySelector("head > title"))),rs(x,g,c),x[ls]=i,qt(x),g=x;break e;case"link":var C=db("link","href",p).get(g+(c.href||""));if(C){for(var E=0;E<C.length;E++)if(x=C[E],x.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&x.getAttribute("rel")===(c.rel==null?null:c.rel)&&x.getAttribute("title")===(c.title==null?null:c.title)&&x.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){C.splice(E,1);break t}}x=p.createElement(g),rs(x,g,c),p.head.appendChild(x);break;case"meta":if(C=db("meta","content",p).get(g+(c.content||""))){for(E=0;E<C.length;E++)if(x=C[E],x.getAttribute("content")===(c.content==null?null:""+c.content)&&x.getAttribute("name")===(c.name==null?null:c.name)&&x.getAttribute("property")===(c.property==null?null:c.property)&&x.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&x.getAttribute("charset")===(c.charSet==null?null:c.charSet)){C.splice(E,1);break t}}x=p.createElement(g),rs(x,g,c),p.head.appendChild(x);break;default:throw Error(s(468,g))}x[ls]=i,qt(x),g=x}i.stateNode=g}else hb(p,i.type,i.stateNode);else i.stateNode=ub(p,g,i.memoizedProps);else x!==g?(x===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):x.count--,g===null?hb(p,i.type,i.stateNode):ub(p,g,i.memoizedProps)):g===null&&i.stateNode!==null&&Hf(i,i.memoizedProps,c.memoizedProps)}break;case 27:Bs(o,i),Fs(i),g&512&&(At||c===null||kn(c,c.return)),c!==null&&g&4&&Hf(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Bs(o,i),Fs(i),g&512&&(At||c===null||kn(c,c.return)),i.flags&32){p=i.stateNode;try{ra(p,"")}catch(J){ut(i,i.return,J)}}g&4&&i.stateNode!=null&&(p=i.memoizedProps,Hf(i,p,c!==null?c.memoizedProps:p)),g&1024&&(Yf=!0);break;case 6:if(Bs(o,i),Fs(i),g&4){if(i.stateNode===null)throw Error(s(162));g=i.memoizedProps,c=i.stateNode;try{c.nodeValue=g}catch(J){ut(i,i.return,J)}}break;case 3:if(Cu=null,p=un,un=_u(o.containerInfo),Bs(o,i),un=p,Fs(i),g&4&&c!==null&&c.memoizedState.isDehydrated)try{wl(o.containerInfo)}catch(J){ut(i,i.return,J)}Yf&&(Yf=!1,yx(i));break;case 4:g=un,un=_u(i.stateNode.containerInfo),Bs(o,i),Fs(i),un=g;break;case 12:Bs(o,i),Fs(i);break;case 13:Bs(o,i),Fs(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Jf=he()),g&4&&(g=i.updateQueue,g!==null&&(i.updateQueue=null,qf(i,g)));break;case 22:p=i.memoizedState!==null;var R=c!==null&&c.memoizedState!==null,Q=Qn,ae=At;if(Qn=Q||p,At=ae||R,Bs(o,i),At=ae,Qn=Q,Fs(i),g&8192)e:for(o=i.stateNode,o._visibility=p?o._visibility&-2:o._visibility|1,p&&(c===null||R||Qn||At||Ci(i)),c=null,o=i;;){if(o.tag===5||o.tag===26){if(c===null){R=c=o;try{if(x=R.stateNode,p)C=x.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{E=R.stateNode;var de=R.memoizedProps.style,Z=de!=null&&de.hasOwnProperty("display")?de.display:null;E.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(J){ut(R,R.return,J)}}}else if(o.tag===6){if(c===null){R=o;try{R.stateNode.nodeValue=p?"":R.memoizedProps}catch(J){ut(R,R.return,J)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}g&4&&(g=i.updateQueue,g!==null&&(c=g.retryQueue,c!==null&&(g.retryQueue=null,qf(i,c))));break;case 19:Bs(o,i),Fs(i),g&4&&(g=i.updateQueue,g!==null&&(i.updateQueue=null,qf(i,g)));break;case 30:break;case 21:break;default:Bs(o,i),Fs(i)}}function Fs(i){var o=i.flags;if(o&2){try{for(var c,g=i.return;g!==null;){if(ux(g)){c=g;break}g=g.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var p=c.stateNode,x=Gf(i);cu(i,x,p);break;case 5:var C=c.stateNode;c.flags&32&&(ra(C,""),c.flags&=-33);var E=Gf(i);cu(i,E,C);break;case 3:case 4:var R=c.stateNode.containerInfo,Q=Gf(i);$f(i,Q,R);break;default:throw Error(s(161))}}catch(ae){ut(i,i.return,ae)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function yx(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;yx(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Pr(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)fx(i,o.alternate,o),o=o.sibling}function Ci(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Rr(4,o,o.return),Ci(o);break;case 1:kn(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&lx(o,o.return,c),Ci(o);break;case 27:fl(o.stateNode);case 26:case 5:kn(o,o.return),Ci(o);break;case 22:o.memoizedState===null&&Ci(o);break;case 30:Ci(o);break;default:Ci(o)}i=i.sibling}}function Lr(i,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var g=o.alternate,p=i,x=o,C=x.flags;switch(x.tag){case 0:case 11:case 15:Lr(p,x,c),nl(4,x);break;case 1:if(Lr(p,x,c),g=x,p=g.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(Q){ut(g,g.return,Q)}if(g=x,p=g.updateQueue,p!==null){var E=g.stateNode;try{var R=p.shared.hiddenCallbacks;if(R!==null)for(p.shared.hiddenCallbacks=null,p=0;p<R.length;p++)qv(R[p],E)}catch(Q){ut(g,g.return,Q)}}c&&C&64&&ox(x),rl(x,x.return);break;case 27:dx(x);case 26:case 5:Lr(p,x,c),c&&g===null&&C&4&&cx(x),rl(x,x.return);break;case 12:Lr(p,x,c);break;case 13:Lr(p,x,c),c&&C&4&&px(p,x);break;case 22:x.memoizedState===null&&Lr(p,x,c),rl(x,x.return);break;case 30:break;default:Lr(p,x,c)}o=o.sibling}}function Wf(i,o){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Ho(c))}function Xf(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Ho(i))}function An(i,o,c,g){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)xx(i,o,c,g),o=o.sibling}function xx(i,o,c,g){var p=o.flags;switch(o.tag){case 0:case 11:case 15:An(i,o,c,g),p&2048&&nl(9,o);break;case 1:An(i,o,c,g);break;case 3:An(i,o,c,g),p&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Ho(i)));break;case 12:if(p&2048){An(i,o,c,g),i=o.stateNode;try{var x=o.memoizedProps,C=x.id,E=x.onPostCommit;typeof E=="function"&&E(C,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(R){ut(o,o.return,R)}}else An(i,o,c,g);break;case 13:An(i,o,c,g);break;case 23:break;case 22:x=o.stateNode,C=o.alternate,o.memoizedState!==null?x._visibility&2?An(i,o,c,g):il(i,o):x._visibility&2?An(i,o,c,g):(x._visibility|=2,Sa(i,o,c,g,(o.subtreeFlags&10256)!==0)),p&2048&&Wf(C,o);break;case 24:An(i,o,c,g),p&2048&&Xf(o.alternate,o);break;default:An(i,o,c,g)}}function Sa(i,o,c,g,p){for(p=p&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var x=i,C=o,E=c,R=g,Q=C.flags;switch(C.tag){case 0:case 11:case 15:Sa(x,C,E,R,p),nl(8,C);break;case 23:break;case 22:var ae=C.stateNode;C.memoizedState!==null?ae._visibility&2?Sa(x,C,E,R,p):il(x,C):(ae._visibility|=2,Sa(x,C,E,R,p)),p&&Q&2048&&Wf(C.alternate,C);break;case 24:Sa(x,C,E,R,p),p&&Q&2048&&Xf(C.alternate,C);break;default:Sa(x,C,E,R,p)}o=o.sibling}}function il(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=i,g=o,p=g.flags;switch(g.tag){case 22:il(c,g),p&2048&&Wf(g.alternate,g);break;case 24:il(c,g),p&2048&&Xf(g.alternate,g);break;default:il(c,g)}o=o.sibling}}var al=8192;function Ca(i){if(i.subtreeFlags&al)for(i=i.child;i!==null;)bx(i),i=i.sibling}function bx(i){switch(i.tag){case 26:Ca(i),i.flags&al&&i.memoizedState!==null&&mE(un,i.memoizedState,i.memoizedProps);break;case 5:Ca(i);break;case 3:case 4:var o=un;un=_u(i.stateNode.containerInfo),Ca(i),un=o;break;case 22:i.memoizedState===null&&(o=i.alternate,o!==null&&o.memoizedState!==null?(o=al,al=16777216,Ca(i),al=o):Ca(i));break;default:Ca(i)}}function wx(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function ol(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var g=o[c];Xt=g,Sx(g,i)}wx(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)_x(i),i=i.sibling}function _x(i){switch(i.tag){case 0:case 11:case 15:ol(i),i.flags&2048&&Rr(9,i,i.return);break;case 3:ol(i);break;case 12:ol(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,uu(i)):ol(i);break;default:ol(i)}}function uu(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var g=o[c];Xt=g,Sx(g,i)}wx(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Rr(8,o,o.return),uu(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,uu(o));break;default:uu(o)}i=i.sibling}}function Sx(i,o){for(;Xt!==null;){var c=Xt;switch(c.tag){case 0:case 11:case 15:Rr(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var g=c.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Ho(c.memoizedState.cache)}if(g=c.child,g!==null)g.return=c,Xt=g;else e:for(c=i;Xt!==null;){g=Xt;var p=g.sibling,x=g.return;if(gx(g),g===c){Xt=null;break e}if(p!==null){p.return=x,Xt=p;break e}Xt=x}}}var Nj={getCacheForType:function(i){var o=cs(Ut),c=o.data.get(i);return c===void 0&&(c=i(),o.data.set(i,c)),c}},Oj=typeof WeakMap=="function"?WeakMap:Map,rt=0,ht=null,$e=null,Xe=0,it=0,Us=null,Br=!1,Ta=!1,Kf=!1,Jn=0,Ct=0,Fr=0,Ti=0,Qf=0,Js=0,ja=0,ll=null,Es=null,Zf=!1,Jf=0,du=1/0,hu=null,Ur=null,ns=0,zr=null,Ea=null,ka=0,eg=0,tg=null,Cx=null,cl=0,sg=null;function zs(){if((rt&2)!==0&&Xe!==0)return Xe&-Xe;if(P.T!==null){var i=ma;return i!==0?i:cg()}return z0()}function Tx(){Js===0&&(Js=(Xe&536870912)===0||tt?Tn():536870912);var i=Zs.current;return i!==null&&(i.flags|=32),Js}function Vs(i,o,c){(i===ht&&(it===2||it===9)||i.cancelPendingCommit!==null)&&(Aa(i,0),Vr(i,Xe,Js,!1)),Et(i,c),((rt&2)===0||i!==ht)&&(i===ht&&((rt&2)===0&&(Ti|=c),Ct===4&&Vr(i,Xe,Js,!1)),Dn(i))}function jx(i,o,c){if((rt&6)!==0)throw Error(s(327));var g=!c&&(o&124)===0&&(o&i.expiredLanes)===0||mt(i,o),p=g?Pj(i,o):ig(i,o,!0),x=g;do{if(p===0){Ta&&!g&&Vr(i,o,0,!1);break}else{if(c=i.current.alternate,x&&!Mj(c)){p=ig(i,o,!1),x=!1;continue}if(p===2){if(x=o,i.errorRecoveryDisabledLanes&x)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){o=C;e:{var E=i;p=ll;var R=E.current.memoizedState.isDehydrated;if(R&&(Aa(E,C).flags|=256),C=ig(E,C,!1),C!==2){if(Kf&&!R){E.errorRecoveryDisabledLanes|=x,Ti|=x,p=4;break e}x=Es,Es=p,x!==null&&(Es===null?Es=x:Es.push.apply(Es,x))}p=C}if(x=!1,p!==2)continue}}if(p===1){Aa(i,0),Vr(i,o,0,!0);break}e:{switch(g=i,x=p,x){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Vr(g,o,Js,!Br);break e;case 2:Es=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(p=Jf+300-he(),10<p)){if(Vr(g,o,Js,!Br),_s(g,0,!0)!==0)break e;g.timeoutHandle=tb(Ex.bind(null,g,c,Es,hu,Zf,o,Js,Ti,ja,Br,x,2,-0,0),p);break e}Ex(g,c,Es,hu,Zf,o,Js,Ti,ja,Br,x,0,-0,0)}}break}while(!0);Dn(i)}function Ex(i,o,c,g,p,x,C,E,R,Q,ae,de,Z,J){if(i.timeoutHandle=-1,de=o.subtreeFlags,(de&8192||(de&16785408)===16785408)&&(pl={stylesheets:null,count:0,unsuspend:gE},bx(o),de=pE(),de!==null)){i.cancelPendingCommit=de(Rx.bind(null,i,o,x,c,g,p,C,E,R,ae,1,Z,J)),Vr(i,x,C,!Q);return}Rx(i,o,x,c,g,p,C,E,R)}function Mj(i){for(var o=i;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var g=0;g<c.length;g++){var p=c[g],x=p.getSnapshot;p=p.value;try{if(!Ps(x(),p))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Vr(i,o,c,g){o&=~Qf,o&=~Ti,i.suspendedLanes|=o,i.pingedLanes&=~o,g&&(i.warmLanes|=o),g=i.expirationTimes;for(var p=o;0<p;){var x=31-ce(p),C=1<<x;g[x]=-1,p&=~C}c!==0&&F0(i,c,o)}function fu(){return(rt&6)===0?(ul(0),!1):!0}function ng(){if($e!==null){if(it===0)var i=$e.return;else i=$e,$n=xi=null,bf(i),wa=null,el=0,i=$e;for(;i!==null;)ax(i.alternate,i),i=i.return;$e=null}}function Aa(i,o){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,Qj(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),ng(),ht=i,$e=c=In(i.current,null),Xe=o,it=0,Us=null,Br=!1,Ta=mt(i,o),Kf=!1,ja=Js=Qf=Ti=Fr=Ct=0,Es=ll=null,Zf=!1,(o&8)!==0&&(o|=o&32);var g=i.entangledLanes;if(g!==0)for(i=i.entanglements,g&=o;0<g;){var p=31-ce(g),x=1<<p;o|=i[p],g&=~x}return Jn=o,Pc(),c}function kx(i,o){Ie=null,P.H=eu,o===$o||o===Gc?(o=$v(),it=3):o===Iv?(o=$v(),it=4):it=o===Yy?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Us=o,$e===null&&(Ct=1,iu(i,Ws(o,i.current)))}function Ax(){var i=P.H;return P.H=eu,i===null?eu:i}function Dx(){var i=P.A;return P.A=Nj,i}function rg(){Ct=4,Br||(Xe&4194048)!==Xe&&Zs.current!==null||(Ta=!0),(Fr&134217727)===0&&(Ti&134217727)===0||ht===null||Vr(ht,Xe,Js,!1)}function ig(i,o,c){var g=rt;rt|=2;var p=Ax(),x=Dx();(ht!==i||Xe!==o)&&(hu=null,Aa(i,o)),o=!1;var C=Ct;e:do try{if(it!==0&&$e!==null){var E=$e,R=Us;switch(it){case 8:ng(),C=6;break e;case 3:case 2:case 9:case 6:Zs.current===null&&(o=!0);var Q=it;if(it=0,Us=null,Da(i,E,R,Q),c&&Ta){C=0;break e}break;default:Q=it,it=0,Us=null,Da(i,E,R,Q)}}Rj(),C=Ct;break}catch(ae){kx(i,ae)}while(!0);return o&&i.shellSuspendCounter++,$n=xi=null,rt=g,P.H=p,P.A=x,$e===null&&(ht=null,Xe=0,Pc()),C}function Rj(){for(;$e!==null;)Nx($e)}function Pj(i,o){var c=rt;rt|=2;var g=Ax(),p=Dx();ht!==i||Xe!==o?(hu=null,du=he()+500,Aa(i,o)):Ta=mt(i,o);e:do try{if(it!==0&&$e!==null){o=$e;var x=Us;t:switch(it){case 1:it=0,Us=null,Da(i,o,x,1);break;case 2:case 9:if(Hv(x)){it=0,Us=null,Ox(o);break}o=function(){it!==2&&it!==9||ht!==i||(it=7),Dn(i)},x.then(o,o);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:Hv(x)?(it=0,Us=null,Ox(o)):(it=0,Us=null,Da(i,o,x,7));break;case 5:var C=null;switch($e.tag){case 26:C=$e.memoizedState;case 5:case 27:var E=$e;if(!C||fb(C)){it=0,Us=null;var R=E.sibling;if(R!==null)$e=R;else{var Q=E.return;Q!==null?($e=Q,gu(Q)):$e=null}break t}}it=0,Us=null,Da(i,o,x,5);break;case 6:it=0,Us=null,Da(i,o,x,6);break;case 8:ng(),Ct=6;break e;default:throw Error(s(462))}}Lj();break}catch(ae){kx(i,ae)}while(!0);return $n=xi=null,P.H=g,P.A=p,rt=c,$e!==null?0:(ht=null,Xe=0,Pc(),Ct)}function Lj(){for(;$e!==null&&!pe();)Nx($e)}function Nx(i){var o=rx(i.alternate,i,Jn);i.memoizedProps=i.pendingProps,o===null?gu(i):$e=o}function Ox(i){var o=i,c=o.alternate;switch(o.tag){case 15:case 0:o=Zy(c,o,o.pendingProps,o.type,void 0,Xe);break;case 11:o=Zy(c,o,o.pendingProps,o.type.render,o.ref,Xe);break;case 5:bf(o);default:ax(c,o),o=$e=Mv(o,Jn),o=rx(c,o,Jn)}i.memoizedProps=i.pendingProps,o===null?gu(i):$e=o}function Da(i,o,c,g){$n=xi=null,bf(o),wa=null,el=0;var p=o.return;try{if(Tj(i,p,o,c,Xe)){Ct=1,iu(i,Ws(c,i.current)),$e=null;return}}catch(x){if(p!==null)throw $e=p,x;Ct=1,iu(i,Ws(c,i.current)),$e=null;return}o.flags&32768?(tt||g===1?i=!0:Ta||(Xe&536870912)!==0?i=!1:(Br=i=!0,(g===2||g===9||g===3||g===6)&&(g=Zs.current,g!==null&&g.tag===13&&(g.flags|=16384))),Mx(o,i)):gu(o)}function gu(i){var o=i;do{if((o.flags&32768)!==0){Mx(o,Br);return}i=o.return;var c=Ej(o.alternate,o,Jn);if(c!==null){$e=c;return}if(o=o.sibling,o!==null){$e=o;return}$e=o=i}while(o!==null);Ct===0&&(Ct=5)}function Mx(i,o){do{var c=kj(i.alternate,i);if(c!==null){c.flags&=32767,$e=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(i=i.sibling,i!==null)){$e=i;return}$e=i=c}while(i!==null);Ct=6,$e=null}function Rx(i,o,c,g,p,x,C,E,R){i.cancelPendingCommit=null;do mu();while(ns!==0);if((rt&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(x=o.lanes|o.childLanes,x|=Wh,gT(i,c,x,C,E,R),i===ht&&($e=ht=null,Xe=0),Ea=o,zr=i,ka=c,eg=x,tg=p,Cx=g,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,zj(nt,function(){return Ux(),null})):(i.callbackNode=null,i.callbackPriority=0),g=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||g){g=P.T,P.T=null,p=$.p,$.p=2,C=rt,rt|=4;try{Aj(i,o,c)}finally{rt=C,$.p=p,P.T=g}}ns=1,Px(),Lx(),Bx()}}function Px(){if(ns===1){ns=0;var i=zr,o=Ea,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=P.T,P.T=null;var g=$.p;$.p=2;var p=rt;rt|=4;try{vx(o,i);var x=vg,C=Sv(i.containerInfo),E=x.focusedElem,R=x.selectionRange;if(C!==E&&E&&E.ownerDocument&&_v(E.ownerDocument.documentElement,E)){if(R!==null&&Hh(E)){var Q=R.start,ae=R.end;if(ae===void 0&&(ae=Q),"selectionStart"in E)E.selectionStart=Q,E.selectionEnd=Math.min(ae,E.value.length);else{var de=E.ownerDocument||document,Z=de&&de.defaultView||window;if(Z.getSelection){var J=Z.getSelection(),Re=E.textContent.length,Ne=Math.min(R.start,Re),ct=R.end===void 0?Ne:Math.min(R.end,Re);!J.extend&&Ne>ct&&(C=ct,ct=Ne,Ne=C);var G=wv(E,Ne),F=wv(E,ct);if(G&&F&&(J.rangeCount!==1||J.anchorNode!==G.node||J.anchorOffset!==G.offset||J.focusNode!==F.node||J.focusOffset!==F.offset)){var X=de.createRange();X.setStart(G.node,G.offset),J.removeAllRanges(),Ne>ct?(J.addRange(X),J.extend(F.node,F.offset)):(X.setEnd(F.node,F.offset),J.addRange(X))}}}}for(de=[],J=E;J=J.parentNode;)J.nodeType===1&&de.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<de.length;E++){var le=de[E];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Eu=!!pg,vg=pg=null}finally{rt=p,$.p=g,P.T=c}}i.current=o,ns=2}}function Lx(){if(ns===2){ns=0;var i=zr,o=Ea,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=P.T,P.T=null;var g=$.p;$.p=2;var p=rt;rt|=4;try{fx(i,o.alternate,o)}finally{rt=p,$.p=g,P.T=c}}ns=3}}function Bx(){if(ns===4||ns===3){ns=0,je();var i=zr,o=Ea,c=ka,g=Cx;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?ns=5:(ns=0,Ea=zr=null,Fx(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(Ur=null),_h(c),o=o.stateNode,me&&typeof me.onCommitFiberRoot=="function")try{me.onCommitFiberRoot(Ee,o,void 0,(o.current.flags&128)===128)}catch{}if(g!==null){o=P.T,p=$.p,$.p=2,P.T=null;try{for(var x=i.onRecoverableError,C=0;C<g.length;C++){var E=g[C];x(E.value,{componentStack:E.stack})}}finally{P.T=o,$.p=p}}(ka&3)!==0&&mu(),Dn(i),p=i.pendingLanes,(c&4194090)!==0&&(p&42)!==0?i===sg?cl++:(cl=0,sg=i):cl=0,ul(0)}}function Fx(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Ho(o)))}function mu(i){return Px(),Lx(),Bx(),Ux()}function Ux(){if(ns!==5)return!1;var i=zr,o=eg;eg=0;var c=_h(ka),g=P.T,p=$.p;try{$.p=32>c?32:c,P.T=null,c=tg,tg=null;var x=zr,C=ka;if(ns=0,Ea=zr=null,ka=0,(rt&6)!==0)throw Error(s(331));var E=rt;if(rt|=4,_x(x.current),xx(x,x.current,C,c),rt=E,ul(0,!1),me&&typeof me.onPostCommitFiberRoot=="function")try{me.onPostCommitFiberRoot(Ee,x)}catch{}return!0}finally{$.p=p,P.T=g,Fx(i,o)}}function zx(i,o,c){o=Ws(c,o),o=Rf(i.stateNode,o,2),i=Dr(i,o,2),i!==null&&(Et(i,2),Dn(i))}function ut(i,o,c){if(i.tag===3)zx(i,i,c);else for(;o!==null;){if(o.tag===3){zx(o,i,c);break}else if(o.tag===1){var g=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ur===null||!Ur.has(g))){i=Ws(c,i),c=Gy(2),g=Dr(o,c,2),g!==null&&($y(c,g,o,i),Et(g,2),Dn(g));break}}o=o.return}}function ag(i,o,c){var g=i.pingCache;if(g===null){g=i.pingCache=new Oj;var p=new Set;g.set(o,p)}else p=g.get(o),p===void 0&&(p=new Set,g.set(o,p));p.has(c)||(Kf=!0,p.add(c),i=Bj.bind(null,i,o,c),o.then(i,i))}function Bj(i,o,c){var g=i.pingCache;g!==null&&g.delete(o),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,ht===i&&(Xe&c)===c&&(Ct===4||Ct===3&&(Xe&62914560)===Xe&&300>he()-Jf?(rt&2)===0&&Aa(i,0):Qf|=c,ja===Xe&&(ja=0)),Dn(i)}function Vx(i,o){o===0&&(o=Yt()),i=da(i,o),i!==null&&(Et(i,o),Dn(i))}function Fj(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),Vx(i,c)}function Uj(i,o){var c=0;switch(i.tag){case 13:var g=i.stateNode,p=i.memoizedState;p!==null&&(c=p.retryLane);break;case 19:g=i.stateNode;break;case 22:g=i.stateNode._retryCache;break;default:throw Error(s(314))}g!==null&&g.delete(o),Vx(i,c)}function zj(i,o){return V(i,o)}var pu=null,Na=null,og=!1,vu=!1,lg=!1,ji=0;function Dn(i){i!==Na&&i.next===null&&(Na===null?pu=Na=i:Na=Na.next=i),vu=!0,og||(og=!0,Ij())}function ul(i,o){if(!lg&&vu){lg=!0;do for(var c=!1,g=pu;g!==null;){if(i!==0){var p=g.pendingLanes;if(p===0)var x=0;else{var C=g.suspendedLanes,E=g.pingedLanes;x=(1<<31-ce(42|i)+1)-1,x&=p&~(C&~E),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(c=!0,$x(g,x))}else x=Xe,x=_s(g,g===ht?x:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(x&3)===0||mt(g,x)||(c=!0,$x(g,x));g=g.next}while(c);lg=!1}}function Vj(){Ix()}function Ix(){vu=og=!1;var i=0;ji!==0&&(Kj()&&(i=ji),ji=0);for(var o=he(),c=null,g=pu;g!==null;){var p=g.next,x=Hx(g,o);x===0?(g.next=null,c===null?pu=p:c.next=p,p===null&&(Na=c)):(c=g,(i!==0||(x&3)!==0)&&(vu=!0)),g=p}ul(i)}function Hx(i,o){for(var c=i.suspendedLanes,g=i.pingedLanes,p=i.expirationTimes,x=i.pendingLanes&-62914561;0<x;){var C=31-ce(x),E=1<<C,R=p[C];R===-1?((E&c)===0||(E&g)!==0)&&(p[C]=Bt(E,o)):R<=o&&(i.expiredLanes|=E),x&=~E}if(o=ht,c=Xe,c=_s(i,i===o?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),g=i.callbackNode,c===0||i===o&&(it===2||it===9)||i.cancelPendingCommit!==null)return g!==null&&g!==null&&ie(g),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||mt(i,c)){if(o=c&-c,o===i.callbackPriority)return o;switch(g!==null&&ie(g),_h(c)){case 2:case 8:c=et;break;case 32:c=nt;break;case 268435456:c=Qe;break;default:c=nt}return g=Gx.bind(null,i),c=V(c,g),i.callbackPriority=o,i.callbackNode=c,o}return g!==null&&g!==null&&ie(g),i.callbackPriority=2,i.callbackNode=null,2}function Gx(i,o){if(ns!==0&&ns!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(mu()&&i.callbackNode!==c)return null;var g=Xe;return g=_s(i,i===ht?g:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),g===0?null:(jx(i,g,o),Hx(i,he()),i.callbackNode!=null&&i.callbackNode===c?Gx.bind(null,i):null)}function $x(i,o){if(mu())return null;jx(i,o,!0)}function Ij(){Zj(function(){(rt&6)!==0?V(We,Vj):Ix()})}function cg(){return ji===0&&(ji=Tn()),ji}function Yx(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:kc(""+i)}function qx(i,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,i.id&&c.setAttribute("form",i.id),o.parentNode.insertBefore(c,o),i=new FormData(i),c.parentNode.removeChild(c),i}function Hj(i,o,c,g,p){if(o==="submit"&&c&&c.stateNode===p){var x=Yx((p[Ss]||null).action),C=g.submitter;C&&(o=(o=C[Ss]||null)?Yx(o.formAction):C.getAttribute("formAction"),o!==null&&(x=o,C=null));var E=new Oc("action","action",null,g,p);i.push({event:E,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(ji!==0){var R=C?qx(p,C):new FormData(p);Af(c,{pending:!0,data:R,method:p.method,action:x},null,R)}}else typeof x=="function"&&(E.preventDefault(),R=C?qx(p,C):new FormData(p),Af(c,{pending:!0,data:R,method:p.method,action:x},x,R))},currentTarget:p}]})}}for(var ug=0;ug<qh.length;ug++){var dg=qh[ug],Gj=dg.toLowerCase(),$j=dg[0].toUpperCase()+dg.slice(1);cn(Gj,"on"+$j)}cn(jv,"onAnimationEnd"),cn(Ev,"onAnimationIteration"),cn(kv,"onAnimationStart"),cn("dblclick","onDoubleClick"),cn("focusin","onFocus"),cn("focusout","onBlur"),cn(lj,"onTransitionRun"),cn(cj,"onTransitionStart"),cn(uj,"onTransitionCancel"),cn(Av,"onTransitionEnd"),ta("onMouseEnter",["mouseout","mouseover"]),ta("onMouseLeave",["mouseout","mouseover"]),ta("onPointerEnter",["pointerout","pointerover"]),ta("onPointerLeave",["pointerout","pointerover"]),ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dl));function Wx(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var g=i[c],p=g.event;g=g.listeners;e:{var x=void 0;if(o)for(var C=g.length-1;0<=C;C--){var E=g[C],R=E.instance,Q=E.currentTarget;if(E=E.listener,R!==x&&p.isPropagationStopped())break e;x=E,p.currentTarget=Q;try{x(p)}catch(ae){ru(ae)}p.currentTarget=null,x=R}else for(C=0;C<g.length;C++){if(E=g[C],R=E.instance,Q=E.currentTarget,E=E.listener,R!==x&&p.isPropagationStopped())break e;x=E,p.currentTarget=Q;try{x(p)}catch(ae){ru(ae)}p.currentTarget=null,x=R}}}}function Ye(i,o){var c=o[Sh];c===void 0&&(c=o[Sh]=new Set);var g=i+"__bubble";c.has(g)||(Xx(o,i,2,!1),c.add(g))}function hg(i,o,c){var g=0;o&&(g|=4),Xx(c,i,g,o)}var yu="_reactListening"+Math.random().toString(36).slice(2);function fg(i){if(!i[yu]){i[yu]=!0,I0.forEach(function(c){c!=="selectionchange"&&(Yj.has(c)||hg(c,!1,i),hg(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[yu]||(o[yu]=!0,hg("selectionchange",!1,o))}}function Xx(i,o,c,g){switch(xb(o)){case 2:var p=xE;break;case 8:p=bE;break;default:p=Eg}c=p.bind(null,o,c,i),p=void 0,!Rh||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),g?p!==void 0?i.addEventListener(o,c,{capture:!0,passive:p}):i.addEventListener(o,c,!0):p!==void 0?i.addEventListener(o,c,{passive:p}):i.addEventListener(o,c,!1)}function gg(i,o,c,g,p){var x=g;if((o&1)===0&&(o&2)===0&&g!==null)e:for(;;){if(g===null)return;var C=g.tag;if(C===3||C===4){var E=g.stateNode.containerInfo;if(E===p)break;if(C===4)for(C=g.return;C!==null;){var R=C.tag;if((R===3||R===4)&&C.stateNode.containerInfo===p)return;C=C.return}for(;E!==null;){if(C=Zi(E),C===null)return;if(R=C.tag,R===5||R===6||R===26||R===27){g=x=C;continue e}E=E.parentNode}}g=g.return}sv(function(){var Q=x,ae=Oh(c),de=[];e:{var Z=Dv.get(i);if(Z!==void 0){var J=Oc,Re=i;switch(i){case"keypress":if(Dc(c)===0)break e;case"keydown":case"keyup":J=zT;break;case"focusin":Re="focus",J=Fh;break;case"focusout":Re="blur",J=Fh;break;case"beforeblur":case"afterblur":J=Fh;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=iv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=kT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=HT;break;case jv:case Ev:case kv:J=NT;break;case Av:J=$T;break;case"scroll":case"scrollend":J=jT;break;case"wheel":J=qT;break;case"copy":case"cut":case"paste":J=MT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=ov;break;case"toggle":case"beforetoggle":J=XT}var Ne=(o&4)!==0,ct=!Ne&&(i==="scroll"||i==="scrollend"),G=Ne?Z!==null?Z+"Capture":null:Z;Ne=[];for(var F=Q,X;F!==null;){var le=F;if(X=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||X===null||G===null||(le=Do(F,G),le!=null&&Ne.push(hl(F,le,X))),ct)break;F=F.return}0<Ne.length&&(Z=new J(Z,Re,null,c,ae),de.push({event:Z,listeners:Ne}))}}if((o&7)===0){e:{if(Z=i==="mouseover"||i==="pointerover",J=i==="mouseout"||i==="pointerout",Z&&c!==Nh&&(Re=c.relatedTarget||c.fromElement)&&(Zi(Re)||Re[Qi]))break e;if((J||Z)&&(Z=ae.window===ae?ae:(Z=ae.ownerDocument)?Z.defaultView||Z.parentWindow:window,J?(Re=c.relatedTarget||c.toElement,J=Q,Re=Re?Zi(Re):null,Re!==null&&(ct=a(Re),Ne=Re.tag,Re!==ct||Ne!==5&&Ne!==27&&Ne!==6)&&(Re=null)):(J=null,Re=Q),J!==Re)){if(Ne=iv,le="onMouseLeave",G="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(Ne=ov,le="onPointerLeave",G="onPointerEnter",F="pointer"),ct=J==null?Z:Ao(J),X=Re==null?Z:Ao(Re),Z=new Ne(le,F+"leave",J,c,ae),Z.target=ct,Z.relatedTarget=X,le=null,Zi(ae)===Q&&(Ne=new Ne(G,F+"enter",Re,c,ae),Ne.target=X,Ne.relatedTarget=ct,le=Ne),ct=le,J&&Re)t:{for(Ne=J,G=Re,F=0,X=Ne;X;X=Oa(X))F++;for(X=0,le=G;le;le=Oa(le))X++;for(;0<F-X;)Ne=Oa(Ne),F--;for(;0<X-F;)G=Oa(G),X--;for(;F--;){if(Ne===G||G!==null&&Ne===G.alternate)break t;Ne=Oa(Ne),G=Oa(G)}Ne=null}else Ne=null;J!==null&&Kx(de,Z,J,Ne,!1),Re!==null&&ct!==null&&Kx(de,ct,Re,Ne,!0)}}e:{if(Z=Q?Ao(Q):window,J=Z.nodeName&&Z.nodeName.toLowerCase(),J==="select"||J==="input"&&Z.type==="file")var Ce=mv;else if(fv(Z))if(pv)Ce=ij;else{Ce=nj;var Ge=sj}else J=Z.nodeName,!J||J.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?Q&&Dh(Q.elementType)&&(Ce=mv):Ce=rj;if(Ce&&(Ce=Ce(i,Q))){gv(de,Ce,c,ae);break e}Ge&&Ge(i,Z,Q),i==="focusout"&&Q&&Z.type==="number"&&Q.memoizedProps.value!=null&&Ah(Z,"number",Z.value)}switch(Ge=Q?Ao(Q):window,i){case"focusin":(fv(Ge)||Ge.contentEditable==="true")&&(la=Ge,Gh=Q,Fo=null);break;case"focusout":Fo=Gh=la=null;break;case"mousedown":$h=!0;break;case"contextmenu":case"mouseup":case"dragend":$h=!1,Cv(de,c,ae);break;case"selectionchange":if(oj)break;case"keydown":case"keyup":Cv(de,c,ae)}var ke;if(zh)e:{switch(i){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else oa?dv(i,c)&&(Me="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Me="onCompositionStart");Me&&(lv&&c.locale!=="ko"&&(oa||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&oa&&(ke=nv()):(jr=ae,Ph="value"in jr?jr.value:jr.textContent,oa=!0)),Ge=xu(Q,Me),0<Ge.length&&(Me=new av(Me,i,null,c,ae),de.push({event:Me,listeners:Ge}),ke?Me.data=ke:(ke=hv(c),ke!==null&&(Me.data=ke)))),(ke=QT?ZT(i,c):JT(i,c))&&(Me=xu(Q,"onBeforeInput"),0<Me.length&&(Ge=new av("onBeforeInput","beforeinput",null,c,ae),de.push({event:Ge,listeners:Me}),Ge.data=ke)),Hj(de,i,Q,c,ae)}Wx(de,o)})}function hl(i,o,c){return{instance:i,listener:o,currentTarget:c}}function xu(i,o){for(var c=o+"Capture",g=[];i!==null;){var p=i,x=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||x===null||(p=Do(i,c),p!=null&&g.unshift(hl(i,p,x)),p=Do(i,o),p!=null&&g.push(hl(i,p,x))),i.tag===3)return g;i=i.return}return[]}function Oa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Kx(i,o,c,g,p){for(var x=o._reactName,C=[];c!==null&&c!==g;){var E=c,R=E.alternate,Q=E.stateNode;if(E=E.tag,R!==null&&R===g)break;E!==5&&E!==26&&E!==27||Q===null||(R=Q,p?(Q=Do(c,x),Q!=null&&C.unshift(hl(c,Q,R))):p||(Q=Do(c,x),Q!=null&&C.push(hl(c,Q,R)))),c=c.return}C.length!==0&&i.push({event:o,listeners:C})}var qj=/\r\n?/g,Wj=/\u0000|\uFFFD/g;function Qx(i){return(typeof i=="string"?i:""+i).replace(qj,`
`).replace(Wj,"")}function Zx(i,o){return o=Qx(o),Qx(i)===o}function bu(){}function lt(i,o,c,g,p,x){switch(c){case"children":typeof g=="string"?o==="body"||o==="textarea"&&g===""||ra(i,g):(typeof g=="number"||typeof g=="bigint")&&o!=="body"&&ra(i,""+g);break;case"className":Tc(i,"class",g);break;case"tabIndex":Tc(i,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Tc(i,c,g);break;case"style":ev(i,g,x);break;case"data":if(o!=="object"){Tc(i,"data",g);break}case"src":case"href":if(g===""&&(o!=="a"||c!=="href")){i.removeAttribute(c);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){i.removeAttribute(c);break}g=kc(""+g),i.setAttribute(c,g);break;case"action":case"formAction":if(typeof g=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(c==="formAction"?(o!=="input"&&lt(i,o,"name",p.name,p,null),lt(i,o,"formEncType",p.formEncType,p,null),lt(i,o,"formMethod",p.formMethod,p,null),lt(i,o,"formTarget",p.formTarget,p,null)):(lt(i,o,"encType",p.encType,p,null),lt(i,o,"method",p.method,p,null),lt(i,o,"target",p.target,p,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){i.removeAttribute(c);break}g=kc(""+g),i.setAttribute(c,g);break;case"onClick":g!=null&&(i.onclick=bu);break;case"onScroll":g!=null&&Ye("scroll",i);break;case"onScrollEnd":g!=null&&Ye("scrollend",i);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(c=g.__html,c!=null){if(p.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"multiple":i.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":i.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){i.removeAttribute("xlink:href");break}c=kc(""+g),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(c,""+g):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":g===!0?i.setAttribute(c,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(c,g):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?i.setAttribute(c,g):i.removeAttribute(c);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?i.removeAttribute(c):i.setAttribute(c,g);break;case"popover":Ye("beforetoggle",i),Ye("toggle",i),Cc(i,"popover",g);break;case"xlinkActuate":zn(i,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":zn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":zn(i,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":zn(i,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":zn(i,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":zn(i,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":zn(i,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":zn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":zn(i,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Cc(i,"is",g);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=CT.get(c)||c,Cc(i,c,g))}}function mg(i,o,c,g,p,x){switch(c){case"style":ev(i,g,x);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(c=g.__html,c!=null){if(p.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"children":typeof g=="string"?ra(i,g):(typeof g=="number"||typeof g=="bigint")&&ra(i,""+g);break;case"onScroll":g!=null&&Ye("scroll",i);break;case"onScrollEnd":g!=null&&Ye("scrollend",i);break;case"onClick":g!=null&&(i.onclick=bu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!H0.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(p=c.endsWith("Capture"),o=c.slice(2,p?c.length-7:void 0),x=i[Ss]||null,x=x!=null?x[c]:null,typeof x=="function"&&i.removeEventListener(o,x,p),typeof g=="function")){typeof x!="function"&&x!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(o,g,p);break e}c in i?i[c]=g:g===!0?i.setAttribute(c,""):Cc(i,c,g)}}}function rs(i,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",i),Ye("load",i);var g=!1,p=!1,x;for(x in c)if(c.hasOwnProperty(x)){var C=c[x];if(C!=null)switch(x){case"src":g=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:lt(i,o,x,C,c,null)}}p&&lt(i,o,"srcSet",c.srcSet,c,null),g&&lt(i,o,"src",c.src,c,null);return;case"input":Ye("invalid",i);var E=x=C=p=null,R=null,Q=null;for(g in c)if(c.hasOwnProperty(g)){var ae=c[g];if(ae!=null)switch(g){case"name":p=ae;break;case"type":C=ae;break;case"checked":R=ae;break;case"defaultChecked":Q=ae;break;case"value":x=ae;break;case"defaultValue":E=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,o));break;default:lt(i,o,g,ae,c,null)}}K0(i,x,E,R,Q,C,p,!1),jc(i);return;case"select":Ye("invalid",i),g=C=x=null;for(p in c)if(c.hasOwnProperty(p)&&(E=c[p],E!=null))switch(p){case"value":x=E;break;case"defaultValue":C=E;break;case"multiple":g=E;default:lt(i,o,p,E,c,null)}o=x,c=C,i.multiple=!!g,o!=null?na(i,!!g,o,!1):c!=null&&na(i,!!g,c,!0);return;case"textarea":Ye("invalid",i),x=p=g=null;for(C in c)if(c.hasOwnProperty(C)&&(E=c[C],E!=null))switch(C){case"value":g=E;break;case"defaultValue":p=E;break;case"children":x=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:lt(i,o,C,E,c,null)}Z0(i,g,p,x),jc(i);return;case"option":for(R in c)if(c.hasOwnProperty(R)&&(g=c[R],g!=null))switch(R){case"selected":i.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:lt(i,o,R,g,c,null)}return;case"dialog":Ye("beforetoggle",i),Ye("toggle",i),Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":Ye("load",i);break;case"video":case"audio":for(g=0;g<dl.length;g++)Ye(dl[g],i);break;case"image":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"embed":case"source":case"link":Ye("error",i),Ye("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in c)if(c.hasOwnProperty(Q)&&(g=c[Q],g!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:lt(i,o,Q,g,c,null)}return;default:if(Dh(o)){for(ae in c)c.hasOwnProperty(ae)&&(g=c[ae],g!==void 0&&mg(i,o,ae,g,c,void 0));return}}for(E in c)c.hasOwnProperty(E)&&(g=c[E],g!=null&&lt(i,o,E,g,c,null))}function Xj(i,o,c,g){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,x=null,C=null,E=null,R=null,Q=null,ae=null;for(J in c){var de=c[J];if(c.hasOwnProperty(J)&&de!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":R=de;default:g.hasOwnProperty(J)||lt(i,o,J,null,g,de)}}for(var Z in g){var J=g[Z];if(de=c[Z],g.hasOwnProperty(Z)&&(J!=null||de!=null))switch(Z){case"type":x=J;break;case"name":p=J;break;case"checked":Q=J;break;case"defaultChecked":ae=J;break;case"value":C=J;break;case"defaultValue":E=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,o));break;default:J!==de&&lt(i,o,Z,J,g,de)}}kh(i,C,E,R,Q,ae,x,p);return;case"select":J=C=E=Z=null;for(x in c)if(R=c[x],c.hasOwnProperty(x)&&R!=null)switch(x){case"value":break;case"multiple":J=R;default:g.hasOwnProperty(x)||lt(i,o,x,null,g,R)}for(p in g)if(x=g[p],R=c[p],g.hasOwnProperty(p)&&(x!=null||R!=null))switch(p){case"value":Z=x;break;case"defaultValue":E=x;break;case"multiple":C=x;default:x!==R&&lt(i,o,p,x,g,R)}o=E,c=C,g=J,Z!=null?na(i,!!c,Z,!1):!!g!=!!c&&(o!=null?na(i,!!c,o,!0):na(i,!!c,c?[]:"",!1));return;case"textarea":J=Z=null;for(E in c)if(p=c[E],c.hasOwnProperty(E)&&p!=null&&!g.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:lt(i,o,E,null,g,p)}for(C in g)if(p=g[C],x=c[C],g.hasOwnProperty(C)&&(p!=null||x!=null))switch(C){case"value":Z=p;break;case"defaultValue":J=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==x&&lt(i,o,C,p,g,x)}Q0(i,Z,J);return;case"option":for(var Re in c)if(Z=c[Re],c.hasOwnProperty(Re)&&Z!=null&&!g.hasOwnProperty(Re))switch(Re){case"selected":i.selected=!1;break;default:lt(i,o,Re,null,g,Z)}for(R in g)if(Z=g[R],J=c[R],g.hasOwnProperty(R)&&Z!==J&&(Z!=null||J!=null))switch(R){case"selected":i.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:lt(i,o,R,Z,g,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in c)Z=c[Ne],c.hasOwnProperty(Ne)&&Z!=null&&!g.hasOwnProperty(Ne)&&lt(i,o,Ne,null,g,Z);for(Q in g)if(Z=g[Q],J=c[Q],g.hasOwnProperty(Q)&&Z!==J&&(Z!=null||J!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,o));break;default:lt(i,o,Q,Z,g,J)}return;default:if(Dh(o)){for(var ct in c)Z=c[ct],c.hasOwnProperty(ct)&&Z!==void 0&&!g.hasOwnProperty(ct)&&mg(i,o,ct,void 0,g,Z);for(ae in g)Z=g[ae],J=c[ae],!g.hasOwnProperty(ae)||Z===J||Z===void 0&&J===void 0||mg(i,o,ae,Z,g,J);return}}for(var G in c)Z=c[G],c.hasOwnProperty(G)&&Z!=null&&!g.hasOwnProperty(G)&&lt(i,o,G,null,g,Z);for(de in g)Z=g[de],J=c[de],!g.hasOwnProperty(de)||Z===J||Z==null&&J==null||lt(i,o,de,Z,g,J)}var pg=null,vg=null;function wu(i){return i.nodeType===9?i:i.ownerDocument}function Jx(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eb(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function yg(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var xg=null;function Kj(){var i=window.event;return i&&i.type==="popstate"?i===xg?!1:(xg=i,!0):(xg=null,!1)}var tb=typeof setTimeout=="function"?setTimeout:void 0,Qj=typeof clearTimeout=="function"?clearTimeout:void 0,sb=typeof Promise=="function"?Promise:void 0,Zj=typeof queueMicrotask=="function"?queueMicrotask:typeof sb<"u"?function(i){return sb.resolve(null).then(i).catch(Jj)}:tb;function Jj(i){setTimeout(function(){throw i})}function Ir(i){return i==="head"}function nb(i,o){var c=o,g=0,p=0;do{var x=c.nextSibling;if(i.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"){if(0<g&&8>g){c=g;var C=i.ownerDocument;if(c&1&&fl(C.documentElement),c&2&&fl(C.body),c&4)for(c=C.head,fl(c),C=c.firstChild;C;){var E=C.nextSibling,R=C.nodeName;C[ko]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&C.rel.toLowerCase()==="stylesheet"||c.removeChild(C),C=E}}if(p===0){i.removeChild(x),wl(o);return}p--}else c==="$"||c==="$?"||c==="$!"?p++:g=c.charCodeAt(0)-48;else g=0;c=x}while(c);wl(o)}function bg(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":bg(c),Ch(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function eE(i,o,c,g){for(;i.nodeType===1;){var p=c;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!g&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(g){if(!i[ko])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(x=i.getAttribute("rel"),x==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(x!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(x=i.getAttribute("src"),(x!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&x&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var x=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===x)return i}else return i;if(i=dn(i.nextSibling),i===null)break}return null}function tE(i,o,c){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=dn(i.nextSibling),i===null))return null;return i}function wg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function sE(i,o){var c=i.ownerDocument;if(i.data!=="$?"||c.readyState==="complete")o();else{var g=function(){o(),c.removeEventListener("DOMContentLoaded",g)};c.addEventListener("DOMContentLoaded",g),i._reactRetry=g}}function dn(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return i}var _g=null;function rb(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return i;o--}else c==="/$"&&o++}i=i.previousSibling}return null}function ib(i,o,c){switch(o=wu(c),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function fl(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Ch(i)}var en=new Map,ab=new Set;function _u(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var er=$.d;$.d={f:nE,r:rE,D:iE,C:aE,L:oE,m:lE,X:uE,S:cE,M:dE};function nE(){var i=er.f(),o=fu();return i||o}function rE(i){var o=Ji(i);o!==null&&o.tag===5&&o.type==="form"?jy(o):er.r(i)}var Ma=typeof document>"u"?null:document;function ob(i,o,c){var g=Ma;if(g&&typeof o=="string"&&o){var p=qs(o);p='link[rel="'+i+'"][href="'+p+'"]',typeof c=="string"&&(p+='[crossorigin="'+c+'"]'),ab.has(p)||(ab.add(p),i={rel:i,crossOrigin:c,href:o},g.querySelector(p)===null&&(o=g.createElement("link"),rs(o,"link",i),qt(o),g.head.appendChild(o)))}}function iE(i){er.D(i),ob("dns-prefetch",i,null)}function aE(i,o){er.C(i,o),ob("preconnect",i,o)}function oE(i,o,c){er.L(i,o,c);var g=Ma;if(g&&i&&o){var p='link[rel="preload"][as="'+qs(o)+'"]';o==="image"&&c&&c.imageSrcSet?(p+='[imagesrcset="'+qs(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(p+='[imagesizes="'+qs(c.imageSizes)+'"]')):p+='[href="'+qs(i)+'"]';var x=p;switch(o){case"style":x=Ra(i);break;case"script":x=Pa(i)}en.has(x)||(i=m({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:i,as:o},c),en.set(x,i),g.querySelector(p)!==null||o==="style"&&g.querySelector(gl(x))||o==="script"&&g.querySelector(ml(x))||(o=g.createElement("link"),rs(o,"link",i),qt(o),g.head.appendChild(o)))}}function lE(i,o){er.m(i,o);var c=Ma;if(c&&i){var g=o&&typeof o.as=="string"?o.as:"script",p='link[rel="modulepreload"][as="'+qs(g)+'"][href="'+qs(i)+'"]',x=p;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Pa(i)}if(!en.has(x)&&(i=m({rel:"modulepreload",href:i},o),en.set(x,i),c.querySelector(p)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(ml(x)))return}g=c.createElement("link"),rs(g,"link",i),qt(g),c.head.appendChild(g)}}}function cE(i,o,c){er.S(i,o,c);var g=Ma;if(g&&i){var p=ea(g).hoistableStyles,x=Ra(i);o=o||"default";var C=p.get(x);if(!C){var E={loading:0,preload:null};if(C=g.querySelector(gl(x)))E.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":o},c),(c=en.get(x))&&Sg(i,c);var R=C=g.createElement("link");qt(R),rs(R,"link",i),R._p=new Promise(function(Q,ae){R.onload=Q,R.onerror=ae}),R.addEventListener("load",function(){E.loading|=1}),R.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Su(C,o,g)}C={type:"stylesheet",instance:C,count:1,state:E},p.set(x,C)}}}function uE(i,o){er.X(i,o);var c=Ma;if(c&&i){var g=ea(c).hoistableScripts,p=Pa(i),x=g.get(p);x||(x=c.querySelector(ml(p)),x||(i=m({src:i,async:!0},o),(o=en.get(p))&&Cg(i,o),x=c.createElement("script"),qt(x),rs(x,"link",i),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},g.set(p,x))}}function dE(i,o){er.M(i,o);var c=Ma;if(c&&i){var g=ea(c).hoistableScripts,p=Pa(i),x=g.get(p);x||(x=c.querySelector(ml(p)),x||(i=m({src:i,async:!0,type:"module"},o),(o=en.get(p))&&Cg(i,o),x=c.createElement("script"),qt(x),rs(x,"link",i),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},g.set(p,x))}}function lb(i,o,c,g){var p=(p=we.current)?_u(p):null;if(!p)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Ra(c.href),c=ea(p).hoistableStyles,g=c.get(o),g||(g={type:"style",instance:null,count:0,state:null},c.set(o,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Ra(c.href);var x=ea(p).hoistableStyles,C=x.get(i);if(C||(p=p.ownerDocument||p,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(i,C),(x=p.querySelector(gl(i)))&&!x._p&&(C.instance=x,C.state.loading=5),en.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},en.set(i,c),x||hE(p,i,c,C.state))),o&&g===null)throw Error(s(528,""));return C}if(o&&g!==null)throw Error(s(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Pa(c),c=ea(p).hoistableScripts,g=c.get(o),g||(g={type:"script",instance:null,count:0,state:null},c.set(o,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Ra(i){return'href="'+qs(i)+'"'}function gl(i){return'link[rel="stylesheet"]['+i+"]"}function cb(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function hE(i,o,c,g){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?g.loading=1:(o=i.createElement("link"),g.preload=o,o.addEventListener("load",function(){return g.loading|=1}),o.addEventListener("error",function(){return g.loading|=2}),rs(o,"link",c),qt(o),i.head.appendChild(o))}function Pa(i){return'[src="'+qs(i)+'"]'}function ml(i){return"script[async]"+i}function ub(i,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var g=i.querySelector('style[data-href~="'+qs(c.href)+'"]');if(g)return o.instance=g,qt(g),g;var p=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return g=(i.ownerDocument||i).createElement("style"),qt(g),rs(g,"style",p),Su(g,c.precedence,i),o.instance=g;case"stylesheet":p=Ra(c.href);var x=i.querySelector(gl(p));if(x)return o.state.loading|=4,o.instance=x,qt(x),x;g=cb(c),(p=en.get(p))&&Sg(g,p),x=(i.ownerDocument||i).createElement("link"),qt(x);var C=x;return C._p=new Promise(function(E,R){C.onload=E,C.onerror=R}),rs(x,"link",g),o.state.loading|=4,Su(x,c.precedence,i),o.instance=x;case"script":return x=Pa(c.src),(p=i.querySelector(ml(x)))?(o.instance=p,qt(p),p):(g=c,(p=en.get(x))&&(g=m({},c),Cg(g,p)),i=i.ownerDocument||i,p=i.createElement("script"),qt(p),rs(p,"link",g),i.head.appendChild(p),o.instance=p);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(g=o.instance,o.state.loading|=4,Su(g,c.precedence,i));return o.instance}function Su(i,o,c){for(var g=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=g.length?g[g.length-1]:null,x=p,C=0;C<g.length;C++){var E=g[C];if(E.dataset.precedence===o)x=E;else if(x!==p)break}x?x.parentNode.insertBefore(i,x.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(i,o.firstChild))}function Sg(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Cg(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Cu=null;function db(i,o,c){if(Cu===null){var g=new Map,p=Cu=new Map;p.set(c,g)}else p=Cu,g=p.get(c),g||(g=new Map,p.set(c,g));if(g.has(i))return g;for(g.set(i,null),c=c.getElementsByTagName(i),p=0;p<c.length;p++){var x=c[p];if(!(x[ko]||x[ls]||i==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var C=x.getAttribute(o)||"";C=i+C;var E=g.get(C);E?E.push(x):g.set(C,[x])}}return g}function hb(i,o,c){i=i.ownerDocument||i,i.head.insertBefore(c,o==="title"?i.querySelector("head > title"):null)}function fE(i,o,c){if(c===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function fb(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var pl=null;function gE(){}function mE(i,o,c){if(pl===null)throw Error(s(475));var g=pl;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=Ra(c.href),x=i.querySelector(gl(p));if(x){i=x._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(g.count++,g=Tu.bind(g),i.then(g,g)),o.state.loading|=4,o.instance=x,qt(x);return}x=i.ownerDocument||i,c=cb(c),(p=en.get(p))&&Sg(c,p),x=x.createElement("link"),qt(x);var C=x;C._p=new Promise(function(E,R){C.onload=E,C.onerror=R}),rs(x,"link",c),o.instance=x}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(g.count++,o=Tu.bind(g),i.addEventListener("load",o),i.addEventListener("error",o))}}function pE(){if(pl===null)throw Error(s(475));var i=pl;return i.stylesheets&&i.count===0&&Tg(i,i.stylesheets),0<i.count?function(o){var c=setTimeout(function(){if(i.stylesheets&&Tg(i,i.stylesheets),i.unsuspend){var g=i.unsuspend;i.unsuspend=null,g()}},6e4);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(c)}}:null}function Tu(){if(this.count--,this.count===0){if(this.stylesheets)Tg(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var ju=null;function Tg(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,ju=new Map,o.forEach(vE,i),ju=null,Tu.call(i))}function vE(i,o){if(!(o.state.loading&4)){var c=ju.get(i);if(c)var g=c.get(null);else{c=new Map,ju.set(i,c);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<p.length;x++){var C=p[x];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(c.set(C.dataset.precedence,C),g=C)}g&&c.set(null,g)}p=o.instance,C=p.getAttribute("data-precedence"),x=c.get(C)||g,x===g&&c.set(null,p),c.set(C,p),this.count++,g=Tu.bind(this),p.addEventListener("load",g),p.addEventListener("error",g),x?x.parentNode.insertBefore(p,x.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),o.state.loading|=4}}var vl={$$typeof:k,Provider:null,Consumer:null,_currentValue:I,_currentValue2:I,_threadCount:0};function yE(i,o,c,g,p,x,C,E){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ft(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ft(0),this.hiddenUpdates=Ft(null),this.identifierPrefix=g,this.onUncaughtError=p,this.onCaughtError=x,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function gb(i,o,c,g,p,x,C,E,R,Q,ae,de){return i=new yE(i,o,c,C,E,R,Q,de),o=1,x===!0&&(o|=24),x=Ls(3,null,null,o),i.current=x,x.stateNode=i,o=af(),o.refCount++,i.pooledCache=o,o.refCount++,x.memoizedState={element:g,isDehydrated:c,cache:o},uf(x),i}function mb(i){return i?(i=ha,i):ha}function pb(i,o,c,g,p,x){p=mb(p),g.context===null?g.context=p:g.pendingContext=p,g=Ar(o),g.payload={element:c},x=x===void 0?null:x,x!==null&&(g.callback=x),c=Dr(i,g,o),c!==null&&(Vs(c,i,o),qo(c,i,o))}function vb(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function jg(i,o){vb(i,o),(i=i.alternate)&&vb(i,o)}function yb(i){if(i.tag===13){var o=da(i,67108864);o!==null&&Vs(o,i,67108864),jg(i,67108864)}}var Eu=!0;function xE(i,o,c,g){var p=P.T;P.T=null;var x=$.p;try{$.p=2,Eg(i,o,c,g)}finally{$.p=x,P.T=p}}function bE(i,o,c,g){var p=P.T;P.T=null;var x=$.p;try{$.p=8,Eg(i,o,c,g)}finally{$.p=x,P.T=p}}function Eg(i,o,c,g){if(Eu){var p=kg(g);if(p===null)gg(i,o,g,ku,c),bb(i,g);else if(_E(p,i,o,c,g))g.stopPropagation();else if(bb(i,g),o&4&&-1<wE.indexOf(i)){for(;p!==null;){var x=Ji(p);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var C=ts(x.pendingLanes);if(C!==0){var E=x;for(E.pendingLanes|=2,E.entangledLanes|=2;C;){var R=1<<31-ce(C);E.entanglements[1]|=R,C&=~R}Dn(x),(rt&6)===0&&(du=he()+500,ul(0))}}break;case 13:E=da(x,2),E!==null&&Vs(E,x,2),fu(),jg(x,2)}if(x=kg(g),x===null&&gg(i,o,g,ku,c),x===p)break;p=x}p!==null&&g.stopPropagation()}else gg(i,o,g,null,c)}}function kg(i){return i=Oh(i),Ag(i)}var ku=null;function Ag(i){if(ku=null,i=Zi(i),i!==null){var o=a(i);if(o===null)i=null;else{var c=o.tag;if(c===13){if(i=l(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return ku=i,null}function xb(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Be()){case We:return 2;case et:return 8;case nt:case De:return 32;case Qe:return 268435456;default:return 32}default:return 32}}var Dg=!1,Hr=null,Gr=null,$r=null,yl=new Map,xl=new Map,Yr=[],wE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bb(i,o){switch(i){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":yl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":xl.delete(o.pointerId)}}function bl(i,o,c,g,p,x){return i===null||i.nativeEvent!==x?(i={blockedOn:o,domEventName:c,eventSystemFlags:g,nativeEvent:x,targetContainers:[p]},o!==null&&(o=Ji(o),o!==null&&yb(o)),i):(i.eventSystemFlags|=g,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function _E(i,o,c,g,p){switch(o){case"focusin":return Hr=bl(Hr,i,o,c,g,p),!0;case"dragenter":return Gr=bl(Gr,i,o,c,g,p),!0;case"mouseover":return $r=bl($r,i,o,c,g,p),!0;case"pointerover":var x=p.pointerId;return yl.set(x,bl(yl.get(x)||null,i,o,c,g,p)),!0;case"gotpointercapture":return x=p.pointerId,xl.set(x,bl(xl.get(x)||null,i,o,c,g,p)),!0}return!1}function wb(i){var o=Zi(i.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){i.blockedOn=o,mT(i.priority,function(){if(c.tag===13){var g=zs();g=wh(g);var p=da(c,g);p!==null&&Vs(p,c,g),jg(c,g)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Au(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=kg(i.nativeEvent);if(c===null){c=i.nativeEvent;var g=new c.constructor(c.type,c);Nh=g,c.target.dispatchEvent(g),Nh=null}else return o=Ji(c),o!==null&&yb(o),i.blockedOn=c,!1;o.shift()}return!0}function _b(i,o,c){Au(i)&&c.delete(o)}function SE(){Dg=!1,Hr!==null&&Au(Hr)&&(Hr=null),Gr!==null&&Au(Gr)&&(Gr=null),$r!==null&&Au($r)&&($r=null),yl.forEach(_b),xl.forEach(_b)}function Du(i,o){i.blockedOn===o&&(i.blockedOn=null,Dg||(Dg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,SE)))}var Nu=null;function Sb(i){Nu!==i&&(Nu=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Nu===i&&(Nu=null);for(var o=0;o<i.length;o+=3){var c=i[o],g=i[o+1],p=i[o+2];if(typeof g!="function"){if(Ag(g||c)===null)continue;break}var x=Ji(c);x!==null&&(i.splice(o,3),o-=3,Af(x,{pending:!0,data:p,method:c.method,action:g},g,p))}}))}function wl(i){function o(R){return Du(R,i)}Hr!==null&&Du(Hr,i),Gr!==null&&Du(Gr,i),$r!==null&&Du($r,i),yl.forEach(o),xl.forEach(o);for(var c=0;c<Yr.length;c++){var g=Yr[c];g.blockedOn===i&&(g.blockedOn=null)}for(;0<Yr.length&&(c=Yr[0],c.blockedOn===null);)wb(c),c.blockedOn===null&&Yr.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(g=0;g<c.length;g+=3){var p=c[g],x=c[g+1],C=p[Ss]||null;if(typeof x=="function")C||Sb(c);else if(C){var E=null;if(x&&x.hasAttribute("formAction")){if(p=x,C=x[Ss]||null)E=C.formAction;else if(Ag(p)!==null)continue}else E=C.action;typeof E=="function"?c[g+1]=E:(c.splice(g,3),g-=3),Sb(c)}}}function Ng(i){this._internalRoot=i}Ou.prototype.render=Ng.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var c=o.current,g=zs();pb(c,g,i,o,null,null)},Ou.prototype.unmount=Ng.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;pb(i.current,2,null,i,null,null),fu(),o[Qi]=null}};function Ou(i){this._internalRoot=i}Ou.prototype.unstable_scheduleHydration=function(i){if(i){var o=z0();i={blockedOn:null,target:i,priority:o};for(var c=0;c<Yr.length&&o!==0&&o<Yr[c].priority;c++);Yr.splice(c,0,i),c===0&&wb(i)}};var Cb=e.version;if(Cb!=="19.1.0")throw Error(s(527,Cb,"19.1.0"));$.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=d(o),i=i!==null?f(i):null,i=i===null?null:i.stateNode,i};var CE={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mu.isDisabled&&Mu.supportsFiber)try{Ee=Mu.inject(CE),me=Mu}catch{}}return Sl.createRoot=function(i,o){if(!r(i))throw Error(s(299));var c=!1,g="",p=zy,x=Vy,C=Iy,E=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(E=o.unstable_transitionCallbacks)),o=gb(i,1,!1,null,null,c,g,p,x,C,E,null),i[Qi]=o.current,fg(i),new Ng(o)},Sl.hydrateRoot=function(i,o,c){if(!r(i))throw Error(s(299));var g=!1,p="",x=zy,C=Vy,E=Iy,R=null,Q=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(E=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(R=c.unstable_transitionCallbacks),c.formState!==void 0&&(Q=c.formState)),o=gb(i,1,!0,o,c??null,g,p,x,C,E,R,Q),o.context=mb(null),c=o.current,g=zs(),g=wh(g),p=Ar(g),p.callback=null,Dr(c,p,g),c=g,o.current.lanes=c,Et(o,c),Dn(o),i[Qi]=o.current,fg(i),new Ou(o)},Sl.version="19.1.0",Sl}var Rb;function PE(){if(Rb)return Mg.exports;Rb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Mg.exports=RE(),Mg.exports}var LE=PE();const BE=bp(LE);var j=wp();const Vt=bp(j);var Cl={},Pb;function FE(){if(Pb)return Cl;Pb=1,Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.parse=l,Cl.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,a=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function l(y,b){const w=new a,_=y.length;if(_<2)return w;const T=b?.decode||m;let S=0;do{const D=y.indexOf("=",S);if(D===-1)break;const k=y.indexOf(";",S),M=k===-1?_:k;if(D>M){S=y.lastIndexOf(";",D-1)+1;continue}const N=u(y,S,D),L=d(y,D,N),A=y.slice(N,L);if(w[A]===void 0){let B=u(y,D+1,M),Y=d(y,M,B);const W=T(y.slice(B,Y));w[A]=W}S=M+1}while(S<_);return w}function u(y,b,w){do{const _=y.charCodeAt(b);if(_!==32&&_!==9)return b}while(++b<w);return w}function d(y,b,w){for(;b>w;){const _=y.charCodeAt(--b);if(_!==32&&_!==9)return b+1}return w}function f(y,b,w){const _=w?.encode||encodeURIComponent;if(!n.test(y))throw new TypeError(`argument name is invalid: ${y}`);const T=_(b);if(!e.test(T))throw new TypeError(`argument val is invalid: ${b}`);let S=y+"="+T;if(!w)return S;if(w.maxAge!==void 0){if(!Number.isInteger(w.maxAge))throw new TypeError(`option maxAge is invalid: ${w.maxAge}`);S+="; Max-Age="+w.maxAge}if(w.domain){if(!t.test(w.domain))throw new TypeError(`option domain is invalid: ${w.domain}`);S+="; Domain="+w.domain}if(w.path){if(!s.test(w.path))throw new TypeError(`option path is invalid: ${w.path}`);S+="; Path="+w.path}if(w.expires){if(!v(w.expires)||!Number.isFinite(w.expires.valueOf()))throw new TypeError(`option expires is invalid: ${w.expires}`);S+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(S+="; HttpOnly"),w.secure&&(S+="; Secure"),w.partitioned&&(S+="; Partitioned"),w.priority)switch(typeof w.priority=="string"?w.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${w.priority}`)}if(w.sameSite)switch(typeof w.sameSite=="string"?w.sameSite.toLowerCase():w.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${w.sameSite}`)}return S}function m(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function v(y){return r.call(y)==="[object Date]"}return Cl}FE();var Lb="popstate";function UE(n={}){function e(s,r){let{pathname:a,search:l,hash:u}=s.location;return Em("",{pathname:a,search:l,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(s,r){return typeof r=="string"?r:Kl(r)}return VE(e,t,null,n)}function yt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function _n(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zE(){return Math.random().toString(36).substring(2,10)}function Bb(n,e){return{usr:n.state,key:n.key,idx:e}}function Em(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ho(e):e,state:t,key:e&&e.key||s||zE()}}function Kl({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ho(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function VE(n,e,t,s={}){let{window:r=document.defaultView,v5Compat:a=!1}=s,l=r.history,u="POP",d=null,f=m();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function m(){return(l.state||{idx:null}).idx}function v(){u="POP";let T=m(),S=T==null?null:T-f;f=T,d&&d({action:u,location:_.location,delta:S})}function y(T,S){u="PUSH";let D=Em(_.location,T,S);f=m()+1;let k=Bb(D,f),M=_.createHref(D);try{l.pushState(k,"",M)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;r.location.assign(M)}a&&d&&d({action:u,location:_.location,delta:1})}function b(T,S){u="REPLACE";let D=Em(_.location,T,S);f=m();let k=Bb(D,f),M=_.createHref(D);l.replaceState(k,"",M),a&&d&&d({action:u,location:_.location,delta:0})}function w(T){return IE(T)}let _={get action(){return u},get location(){return n(r,l)},listen(T){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(Lb,v),d=T,()=>{r.removeEventListener(Lb,v),d=null}},createHref(T){return e(r,T)},createURL:w,encodeLocation(T){let S=w(T);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:y,replace:b,go(T){return l.go(T)}};return _}function IE(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),yt(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:Kl(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function E_(n,e,t="/"){return HE(n,e,t,!1)}function HE(n,e,t,s){let r=typeof e=="string"?ho(e):e,a=gr(r.pathname||"/",t);if(a==null)return null;let l=k_(n);GE(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=tk(a);u=JE(l[d],f,s)}return u}function k_(n,e=[],t=[],s=""){let r=(a,l,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};d.relativePath.startsWith("/")&&(yt(d.relativePath.startsWith(s),`Absolute route path "${d.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(s.length));let f=dr([s,d.relativePath]),m=t.concat(d);a.children&&a.children.length>0&&(yt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),k_(a.children,e,m,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:QE(f,a.index),routesMeta:m})};return n.forEach((a,l)=>{if(a.path===""||!a.path?.includes("?"))r(a,l);else for(let u of A_(a.path))r(a,l,u)}),e}function A_(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,r=t.endsWith("?"),a=t.replace(/\?$/,"");if(s.length===0)return r?[a,""]:[a];let l=A_(s.join("/")),u=[];return u.push(...l.map(d=>d===""?a:[a,d].join("/"))),r&&u.push(...l),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function GE(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:ZE(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var $E=/^:[\w-]+$/,YE=3,qE=2,WE=1,XE=10,KE=-2,Fb=n=>n==="*";function QE(n,e){let t=n.split("/"),s=t.length;return t.some(Fb)&&(s+=KE),e&&(s+=qE),t.filter(r=>!Fb(r)).reduce((r,a)=>r+($E.test(a)?YE:a===""?WE:XE),s)}function ZE(n,e){return n.length===e.length&&n.slice(0,-1).every((s,r)=>s===e[r])?n[n.length-1]-e[e.length-1]:0}function JE(n,e,t=!1){let{routesMeta:s}=n,r={},a="/",l=[];for(let u=0;u<s.length;++u){let d=s[u],f=u===s.length-1,m=a==="/"?e:e.slice(a.length)||"/",v=Od({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},m),y=d.route;if(!v&&f&&t&&!s[s.length-1].route.index&&(v=Od({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!v)return null;Object.assign(r,v.params),l.push({params:r,pathname:dr([a,v.pathname]),pathnameBase:ik(dr([a,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(a=dr([a,v.pathnameBase]))}return l}function Od(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=ek(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let a=r[0],l=a.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:s.reduce((f,{paramName:m,isOptional:v},y)=>{if(m==="*"){let w=u[y]||"";l=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const b=u[y];return v&&!b?f[m]=void 0:f[m]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:l,pattern:n}}function ek(n,e=!1,t=!0){_n(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function tk(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _n(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function gr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function sk(n,e="/"){let{pathname:t,search:s="",hash:r=""}=typeof n=="string"?ho(n):n;return{pathname:t?t.startsWith("/")?t:nk(t,e):e,search:ak(s),hash:ok(r)}}function nk(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Fg(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rk(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function _p(n){let e=rk(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function Sp(n,e,t,s=!1){let r;typeof n=="string"?r=ho(n):(r={...n},yt(!r.pathname||!r.pathname.includes("?"),Fg("?","pathname","search",r)),yt(!r.pathname||!r.pathname.includes("#"),Fg("#","pathname","hash",r)),yt(!r.search||!r.search.includes("#"),Fg("#","search","hash",r)));let a=n===""||r.pathname==="",l=a?"/":r.pathname,u;if(l==null)u=t;else{let v=e.length-1;if(!s&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),v-=1;r.pathname=y.join("/")}u=v>=0?e[v]:"/"}let d=sk(r,u),f=l&&l!=="/"&&l.endsWith("/"),m=(a||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||m)&&(d.pathname+="/"),d}var dr=n=>n.join("/").replace(/\/\/+/g,"/"),ik=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ak=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,ok=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function lk(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var D_=["POST","PUT","PATCH","DELETE"];new Set(D_);var ck=["GET",...D_];new Set(ck);var fo=j.createContext(null);fo.displayName="DataRouter";var sh=j.createContext(null);sh.displayName="DataRouterState";var N_=j.createContext({isTransitioning:!1});N_.displayName="ViewTransition";var uk=j.createContext(new Map);uk.displayName="Fetchers";var dk=j.createContext(null);dk.displayName="Await";var Sn=j.createContext(null);Sn.displayName="Navigation";var dc=j.createContext(null);dc.displayName="Location";var Cn=j.createContext({outlet:null,matches:[],isDataRoute:!1});Cn.displayName="Route";var Cp=j.createContext(null);Cp.displayName="RouteError";function hk(n,{relative:e}={}){yt(go(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=j.useContext(Sn),{hash:r,pathname:a,search:l}=hc(n,{relative:e}),u=a;return t!=="/"&&(u=a==="/"?t:dr([t,a])),s.createHref({pathname:u,search:l,hash:r})}function go(){return j.useContext(dc)!=null}function Gs(){return yt(go(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(dc).location}var O_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function M_(n){j.useContext(Sn).static||j.useLayoutEffect(n)}function Yi(){let{isDataRoute:n}=j.useContext(Cn);return n?Ek():fk()}function fk(){yt(go(),"useNavigate() may be used only in the context of a <Router> component.");let n=j.useContext(fo),{basename:e,navigator:t}=j.useContext(Sn),{matches:s}=j.useContext(Cn),{pathname:r}=Gs(),a=JSON.stringify(_p(s)),l=j.useRef(!1);return M_(()=>{l.current=!0}),j.useCallback((d,f={})=>{if(_n(l.current,O_),!l.current)return;if(typeof d=="number"){t.go(d);return}let m=Sp(d,JSON.parse(a),r,f.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:dr([e,m.pathname])),(f.replace?t.replace:t.push)(m,f.state,f)},[e,t,a,r,n])}var gk=j.createContext(null);function mk(n){let e=j.useContext(Cn).outlet;return e&&j.createElement(gk.Provider,{value:n},e)}function hc(n,{relative:e}={}){let{matches:t}=j.useContext(Cn),{pathname:s}=Gs(),r=JSON.stringify(_p(t));return j.useMemo(()=>Sp(n,JSON.parse(r),s,e==="path"),[n,r,s,e])}function pk(n,e){return R_(n,e)}function R_(n,e,t,s){yt(go(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=j.useContext(Sn),{matches:a}=j.useContext(Cn),l=a[a.length-1],u=l?l.params:{},d=l?l.pathname:"/",f=l?l.pathnameBase:"/",m=l&&l.route;{let S=m&&m.path||"";P_(d,!m||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let v=Gs(),y;if(e){let S=typeof e=="string"?ho(e):e;yt(f==="/"||S.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${S.pathname}" was given in the \`location\` prop.`),y=S}else y=v;let b=y.pathname||"/",w=b;if(f!=="/"){let S=f.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(S.length).join("/")}let _=E_(n,{pathname:w});_n(m||_!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),_n(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=wk(_&&_.map(S=>Object.assign({},S,{params:Object.assign({},u,S.params),pathname:dr([f,r.encodeLocation?r.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?f:dr([f,r.encodeLocation?r.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,t,s);return e&&T?j.createElement(dc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},T):T}function vk(){let n=jk(),e=lk(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:a},"ErrorBoundary")," or"," ",j.createElement("code",{style:a},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:r},t):null,l)}var yk=j.createElement(vk,null),xk=class extends j.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?j.createElement(Cn.Provider,{value:this.props.routeContext},j.createElement(Cp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function bk({routeContext:n,match:e,children:t}){let s=j.useContext(fo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Cn.Provider,{value:n},t)}function wk(n,e=[],t=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let r=n,a=t?.errors;if(a!=null){let d=r.findIndex(f=>f.route.id&&a?.[f.route.id]!==void 0);yt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,d+1))}let l=!1,u=-1;if(t)for(let d=0;d<r.length;d++){let f=r[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:v}=t,y=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!v||v[f.route.id]===void 0);if(f.route.lazy||y){l=!0,u>=0?r=r.slice(0,u+1):r=[r[0]];break}}}return r.reduceRight((d,f,m)=>{let v,y=!1,b=null,w=null;t&&(v=a&&f.route.id?a[f.route.id]:void 0,b=f.route.errorElement||yk,l&&(u<0&&m===0?(P_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,w=null):u===m&&(y=!0,w=f.route.hydrateFallbackElement||null)));let _=e.concat(r.slice(0,m+1)),T=()=>{let S;return v?S=b:y?S=w:f.route.Component?S=j.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=d,j.createElement(bk,{match:f,routeContext:{outlet:d,matches:_,isDataRoute:t!=null},children:S})};return t&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?j.createElement(xk,{location:t.location,revalidation:t.revalidation,component:b,error:v,children:T(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):T()},null)}function Tp(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _k(n){let e=j.useContext(fo);return yt(e,Tp(n)),e}function Sk(n){let e=j.useContext(sh);return yt(e,Tp(n)),e}function Ck(n){let e=j.useContext(Cn);return yt(e,Tp(n)),e}function jp(n){let e=Ck(n),t=e.matches[e.matches.length-1];return yt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Tk(){return jp("useRouteId")}function jk(){let n=j.useContext(Cp),e=Sk("useRouteError"),t=jp("useRouteError");return n!==void 0?n:e.errors?.[t]}function Ek(){let{router:n}=_k("useNavigate"),e=jp("useNavigate"),t=j.useRef(!1);return M_(()=>{t.current=!0}),j.useCallback(async(r,a={})=>{_n(t.current,O_),t.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:e,...a}))},[n,e])}var Ub={};function P_(n,e,t){!e&&!Ub[n]&&(Ub[n]=!0,_n(!1,t))}j.memo(kk);function kk({routes:n,future:e,state:t}){return R_(n,void 0,t,e)}function zb({to:n,replace:e,state:t,relative:s}){yt(go(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=j.useContext(Sn);_n(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=j.useContext(Cn),{pathname:l}=Gs(),u=Yi(),d=Sp(n,_p(a),l,s==="path"),f=JSON.stringify(d);return j.useEffect(()=>{u(JSON.parse(f),{replace:e,state:t,relative:s})},[u,f,s,e,t]),null}function Ak(n){return mk(n.context)}function Zt(n){yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Dk({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:r,static:a=!1}){yt(!go(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:l,navigator:r,static:a,future:{}}),[l,r,a]);typeof t=="string"&&(t=ho(t));let{pathname:d="/",search:f="",hash:m="",state:v=null,key:y="default"}=t,b=j.useMemo(()=>{let w=gr(d,l);return w==null?null:{location:{pathname:w,search:f,hash:m,state:v,key:y},navigationType:s}},[l,d,f,m,v,y,s]);return _n(b!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:j.createElement(Sn.Provider,{value:u},j.createElement(dc.Provider,{children:e,value:b}))}function Nk({children:n,location:e}){return pk(km(n),e)}function km(n,e=[]){let t=[];return j.Children.forEach(n,(s,r)=>{if(!j.isValidElement(s))return;let a=[...e,r];if(s.type===j.Fragment){t.push.apply(t,km(s.props.children,a));return}yt(s.type===Zt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=km(s.props.children,a)),t.push(l)}),t}var xd="get",bd="application/x-www-form-urlencoded";function nh(n){return n!=null&&typeof n.tagName=="string"}function Ok(n){return nh(n)&&n.tagName.toLowerCase()==="button"}function Mk(n){return nh(n)&&n.tagName.toLowerCase()==="form"}function Rk(n){return nh(n)&&n.tagName.toLowerCase()==="input"}function Pk(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Lk(n,e){return n.button===0&&(!e||e==="_self")&&!Pk(n)}var Ru=null;function Bk(){if(Ru===null)try{new FormData(document.createElement("form"),0),Ru=!1}catch{Ru=!0}return Ru}var Fk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ug(n){return n!=null&&!Fk.has(n)?(_n(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bd}"`),null):n}function Uk(n,e){let t,s,r,a,l;if(Mk(n)){let u=n.getAttribute("action");s=u?gr(u,e):null,t=n.getAttribute("method")||xd,r=Ug(n.getAttribute("enctype"))||bd,a=new FormData(n)}else if(Ok(n)||Rk(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||u.getAttribute("action");if(s=d?gr(d,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||xd,r=Ug(n.getAttribute("formenctype"))||Ug(u.getAttribute("enctype"))||bd,a=new FormData(u,n),!Bk()){let{name:f,type:m,value:v}=n;if(m==="image"){let y=f?`${f}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else f&&a.append(f,v)}}else{if(nh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=xd,s=null,r=bd,l=n}return a&&r==="text/plain"&&(l=a,a=void 0),{action:s,method:t.toLowerCase(),encType:r,formData:a,body:l}}function Ep(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function zk(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Vk(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Ik(n,e,t){let s=await Promise.all(n.map(async r=>{let a=e.routes[r.route.id];if(a){let l=await zk(a,t);return l.links?l.links():[]}return[]}));return Yk(s.flat(1).filter(Vk).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function Vb(n,e,t,s,r,a){let l=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,u=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return a==="assets"?e.filter((d,f)=>l(d,f)||u(d,f)):a==="data"?e.filter((d,f)=>{let m=s.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function Hk(n,e,{includeHydrateFallback:t}={}){return Gk(n.map(s=>{let r=e.routes[s.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function Gk(n){return[...new Set(n)]}function $k(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function Yk(n,e){let t=new Set;return new Set(e),n.reduce((s,r)=>{let a=JSON.stringify($k(r));return t.has(a)||(t.add(a),s.push({key:a,link:r})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var qk=new Set([100,101,204,205]);function Wk(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&gr(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function L_(){let n=j.useContext(fo);return Ep(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Xk(){let n=j.useContext(sh);return Ep(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var kp=j.createContext(void 0);kp.displayName="FrameworkContext";function B_(){let n=j.useContext(kp);return Ep(n,"You must render this element inside a <HydratedRouter> element"),n}function Kk(n,e){let t=j.useContext(kp),[s,r]=j.useState(!1),[a,l]=j.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:m,onTouchStart:v}=e,y=j.useRef(null);j.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let _=S=>{S.forEach(D=>{l(D.isIntersecting)})},T=new IntersectionObserver(_,{threshold:.5});return y.current&&T.observe(y.current),()=>{T.disconnect()}}},[n]),j.useEffect(()=>{if(s){let _=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(_)}}},[s]);let b=()=>{r(!0)},w=()=>{r(!1),l(!1)};return t?n!=="intent"?[a,y,{}]:[a,y,{onFocus:Tl(u,b),onBlur:Tl(d,w),onMouseEnter:Tl(f,b),onMouseLeave:Tl(m,w),onTouchStart:Tl(v,b)}]:[!1,y,{}]}function Tl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Qk({page:n,...e}){let{router:t}=L_(),s=j.useMemo(()=>E_(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?j.createElement(Jk,{page:n,matches:s,...e}):null}function Zk(n){let{manifest:e,routeModules:t}=B_(),[s,r]=j.useState([]);return j.useEffect(()=>{let a=!1;return Ik(n,e,t).then(l=>{a||r(l)}),()=>{a=!0}},[n,e,t]),s}function Jk({page:n,matches:e,...t}){let s=Gs(),{manifest:r,routeModules:a}=B_(),{basename:l}=L_(),{loaderData:u,matches:d}=Xk(),f=j.useMemo(()=>Vb(n,e,d,r,s,"data"),[n,e,d,r,s]),m=j.useMemo(()=>Vb(n,e,d,r,s,"assets"),[n,e,d,r,s]),v=j.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let w=new Set,_=!1;if(e.forEach(S=>{let D=r.routes[S.route.id];!D||!D.hasLoader||(!f.some(k=>k.route.id===S.route.id)&&S.route.id in u&&a[S.route.id]?.shouldRevalidate||D.hasClientLoader?_=!0:w.add(S.route.id))}),w.size===0)return[];let T=Wk(n,l);return _&&w.size>0&&T.searchParams.set("_routes",e.filter(S=>w.has(S.route.id)).map(S=>S.route.id).join(",")),[T.pathname+T.search]},[l,u,s,r,f,e,n,a]),y=j.useMemo(()=>Hk(m,r),[m,r]),b=Zk(m);return j.createElement(j.Fragment,null,v.map(w=>j.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),y.map(w=>j.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),b.map(({key:w,link:_})=>j.createElement("link",{key:w,..._})))}function eA(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var F_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{F_&&(window.__reactRouterVersion="7.6.3")}catch{}function tA({basename:n,children:e,window:t}){let s=j.useRef();s.current==null&&(s.current=UE({window:t,v5Compat:!0}));let r=s.current,[a,l]=j.useState({action:r.action,location:r.location}),u=j.useCallback(d=>{j.startTransition(()=>l(d))},[l]);return j.useLayoutEffect(()=>r.listen(u),[r,u]),j.createElement(Dk,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:r})}var U_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,It=j.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:r,reloadDocument:a,replace:l,state:u,target:d,to:f,preventScrollReset:m,viewTransition:v,...y},b){let{basename:w}=j.useContext(Sn),_=typeof f=="string"&&U_.test(f),T,S=!1;if(typeof f=="string"&&_&&(T=f,F_))try{let Y=new URL(window.location.href),W=f.startsWith("//")?new URL(Y.protocol+f):new URL(f),K=gr(W.pathname,w);W.origin===Y.origin&&K!=null?f=K+W.search+W.hash:S=!0}catch{_n(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=hk(f,{relative:r}),[k,M,N]=Kk(s,y),L=iA(f,{replace:l,state:u,target:d,preventScrollReset:m,relative:r,viewTransition:v});function A(Y){e&&e(Y),Y.defaultPrevented||L(Y)}let B=j.createElement("a",{...y,...N,href:T||D,onClick:S||a?e:A,ref:eA(b,M),target:d,"data-discover":!_&&t==="render"?"true":void 0});return k&&!_?j.createElement(j.Fragment,null,B,j.createElement(Qk,{page:D})):B});It.displayName="Link";var sA=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:r=!1,style:a,to:l,viewTransition:u,children:d,...f},m){let v=hc(l,{relative:f.relative}),y=Gs(),b=j.useContext(sh),{navigator:w,basename:_}=j.useContext(Sn),T=b!=null&&uA(v)&&u===!0,S=w.encodeLocation?w.encodeLocation(v).pathname:v.pathname,D=y.pathname,k=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(D=D.toLowerCase(),k=k?k.toLowerCase():null,S=S.toLowerCase()),k&&_&&(k=gr(k,_)||k);const M=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let N=D===S||!r&&D.startsWith(S)&&D.charAt(M)==="/",L=k!=null&&(k===S||!r&&k.startsWith(S)&&k.charAt(S.length)==="/"),A={isActive:N,isPending:L,isTransitioning:T},B=N?e:void 0,Y;typeof s=="function"?Y=s(A):Y=[s,N?"active":null,L?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let W=typeof a=="function"?a(A):a;return j.createElement(It,{...f,"aria-current":B,className:Y,ref:m,style:W,to:l,viewTransition:u},typeof d=="function"?d(A):d)});sA.displayName="NavLink";var nA=j.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:r,state:a,method:l=xd,action:u,onSubmit:d,relative:f,preventScrollReset:m,viewTransition:v,...y},b)=>{let w=lA(),_=cA(u,{relative:f}),T=l.toLowerCase()==="get"?"get":"post",S=typeof u=="string"&&U_.test(u),D=k=>{if(d&&d(k),k.defaultPrevented)return;k.preventDefault();let M=k.nativeEvent.submitter,N=M?.getAttribute("formmethod")||l;w(M||k.currentTarget,{fetcherKey:e,method:N,navigate:t,replace:r,state:a,relative:f,preventScrollReset:m,viewTransition:v})};return j.createElement("form",{ref:b,method:T,action:_,onSubmit:s?d:D,...y,"data-discover":!S&&n==="render"?"true":void 0})});nA.displayName="Form";function rA(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function z_(n){let e=j.useContext(fo);return yt(e,rA(n)),e}function iA(n,{target:e,replace:t,state:s,preventScrollReset:r,relative:a,viewTransition:l}={}){let u=Yi(),d=Gs(),f=hc(n,{relative:a});return j.useCallback(m=>{if(Lk(m,e)){m.preventDefault();let v=t!==void 0?t:Kl(d)===Kl(f);u(n,{replace:v,state:s,preventScrollReset:r,relative:a,viewTransition:l})}},[d,u,f,t,s,e,n,r,a,l])}var aA=0,oA=()=>`__${String(++aA)}__`;function lA(){let{router:n}=z_("useSubmit"),{basename:e}=j.useContext(Sn),t=Tk();return j.useCallback(async(s,r={})=>{let{action:a,method:l,encType:u,formData:d,body:f}=Uk(s,e);if(r.navigate===!1){let m=r.fetcherKey||oA();await n.fetch(m,t,r.action||a,{preventScrollReset:r.preventScrollReset,formData:d,body:f,formMethod:r.method||l,formEncType:r.encType||u,flushSync:r.flushSync})}else await n.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:d,body:f,formMethod:r.method||l,formEncType:r.encType||u,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,e,t])}function cA(n,{relative:e}={}){let{basename:t}=j.useContext(Sn),s=j.useContext(Cn);yt(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),a={...hc(n||".",{relative:e})},l=Gs();if(n==null){a.search=l.search;let u=new URLSearchParams(a.search),d=u.getAll("index");if(d.some(m=>m==="")){u.delete("index"),d.filter(v=>v).forEach(v=>u.append("index",v));let m=u.toString();a.search=m?`?${m}`:""}}return(!n||n===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:dr([t,a.pathname])),Kl(a)}function uA(n,e={}){let t=j.useContext(N_);yt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=z_("useViewTransitionState"),r=hc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=gr(t.currentLocation.pathname,s)||t.currentLocation.pathname,l=gr(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Od(r.pathname,l)!=null||Od(r.pathname,a)!=null}[...qk];const dA="modulepreload",hA=function(n){return"/"+n},Ib={},fc=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){let f=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};var l=f;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");r=f(t.map(m=>{if(m=hA(m),m in Ib)return;Ib[m]=!0;const v=m.endsWith(".css"),y=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const b=document.createElement("link");if(b.rel=v?"stylesheet":dA,v||(b.as="script"),b.crossOrigin="",b.href=m,d&&b.setAttribute("nonce",d),document.head.appendChild(b),v)return new Promise((w,_)=>{b.addEventListener("load",w),b.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return r.then(u=>{for(const d of u||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})},fA=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>fc(async()=>{const{default:s}=await Promise.resolve().then(()=>mo);return{default:s}},[]).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Ap extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class gA extends Ap{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Hb extends Ap{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Gb extends Ap{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Am;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Am||(Am={}));var mA=function(n,e,t,s){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(m){try{f(s.next(m))}catch(v){l(v)}}function d(m){try{f(s.throw(m))}catch(v){l(v)}}function f(m){m.done?a(m.value):r(m.value).then(u,d)}f((s=s.apply(n,e||[])).next())})};class pA{constructor(e,{headers:t={},customFetch:s,region:r=Am.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=fA(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return mA(this,void 0,void 0,function*(){try{const{headers:r,method:a,body:l}=t;let u={},{region:d}=t;d||(d=this.region);const f=new URL(`${this.url}/${e}`);d&&d!=="any"&&(u["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let m;l&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",m=l):typeof l=="string"?(u["Content-Type"]="text/plain",m=l):typeof FormData<"u"&&l instanceof FormData?m=l:(u["Content-Type"]="application/json",m=JSON.stringify(l)));const v=yield this.fetch(f.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),r),body:m}).catch(_=>{throw new gA(_)}),y=v.headers.get("x-relay-error");if(y&&y==="true")throw new Hb(v);if(!v.ok)throw new Gb(v);let b=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield v.json():b==="application/octet-stream"?w=yield v.blob():b==="text/event-stream"?w=v:b==="multipart/form-data"?w=yield v.formData():w=yield v.text(),{data:w,error:null,response:v}}catch(r){return{data:null,error:r,response:r instanceof Gb||r instanceof Hb?r.context:void 0}}})}}var Qt={},La={},Ba={},Fa={},Ua={},za={},vA=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},oo=vA();const yA=oo.fetch,V_=oo.fetch.bind(oo),I_=oo.Headers,xA=oo.Request,bA=oo.Response,mo=Object.freeze(Object.defineProperty({__proto__:null,Headers:I_,Request:xA,Response:bA,default:V_,fetch:yA},Symbol.toStringTag,{value:"Module"})),wA=jE(mo);var Pu={},$b;function H_(){if($b)return Pu;$b=1,Object.defineProperty(Pu,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Pu.default=n,Pu}var Yb;function G_(){if(Yb)return za;Yb=1;var n=za&&za.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(za,"__esModule",{value:!0});const e=n(wA),t=n(H_());class s{constructor(a){this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=a.headers,this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=a.shouldThrowOnError,this.signal=a.signal,this.isMaybeSingle=a.isMaybeSingle,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=Object.assign({},this.headers),this.headers[a]=l,this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var m,v,y;let b=null,w=null,_=null,T=f.status,S=f.statusText;if(f.ok){if(this.method!=="HEAD"){const N=await f.text();N===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?w=N:w=JSON.parse(N))}const k=(m=this.headers.Prefer)===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),M=(v=f.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");k&&M&&M.length>1&&(_=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(b={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,_=null,T=406,S="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const k=await f.text();try{b=JSON.parse(k),Array.isArray(b)&&f.status===404&&(w=[],b=null,T=200,S="OK")}catch{f.status===404&&k===""?(T=204,S="No Content"):b={message:k}}if(b&&this.isMaybeSingle&&(!((y=b?.details)===null||y===void 0)&&y.includes("0 rows"))&&(b=null,T=200,S="OK"),b&&this.shouldThrowOnError)throw new t.default(b)}return{error:b,data:w,count:_,status:T,statusText:S}});return this.shouldThrowOnError||(d=d.catch(f=>{var m,v,y;return{error:{message:`${(m=f?.name)!==null&&m!==void 0?m:"FetchError"}: ${f?.message}`,details:`${(v=f?.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(y=f?.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),d.then(a,l)}returns(){return this}overrideTypes(){return this}}return za.default=s,za}var qb;function $_(){if(qb)return Ua;qb=1;var n=Ua&&Ua.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ua,"__esModule",{value:!0});const e=n(G_());class t extends e.default{select(r){let a=!1;const l=(r??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(r,{ascending:a=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const f=d?`${d}.order`:"order",m=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${m?`${m},`:""}${r}.${a?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:a,referencedTable:l=a}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${r}`),this}range(r,a,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${r}`),this.url.searchParams.set(f,`${a-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:r=!1,verbose:a=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:f="text"}={}){var m;const v=[r?"analyze":null,a?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),y=(m=this.headers.Accept)!==null&&m!==void 0?m:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${f}; for="${y}"; options=${v};`,f==="json"?this:this}rollback(){var r;return((r=this.headers.Prefer)!==null&&r!==void 0?r:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Ua.default=t,Ua}var Wb;function Dp(){if(Wb)return Fa;Wb=1;var n=Fa&&Fa.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Fa,"__esModule",{value:!0});const e=n($_());class t extends e.default{eq(r,a){return this.url.searchParams.append(r,`eq.${a}`),this}neq(r,a){return this.url.searchParams.append(r,`neq.${a}`),this}gt(r,a){return this.url.searchParams.append(r,`gt.${a}`),this}gte(r,a){return this.url.searchParams.append(r,`gte.${a}`),this}lt(r,a){return this.url.searchParams.append(r,`lt.${a}`),this}lte(r,a){return this.url.searchParams.append(r,`lte.${a}`),this}like(r,a){return this.url.searchParams.append(r,`like.${a}`),this}likeAllOf(r,a){return this.url.searchParams.append(r,`like(all).{${a.join(",")}}`),this}likeAnyOf(r,a){return this.url.searchParams.append(r,`like(any).{${a.join(",")}}`),this}ilike(r,a){return this.url.searchParams.append(r,`ilike.${a}`),this}ilikeAllOf(r,a){return this.url.searchParams.append(r,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(r,a){return this.url.searchParams.append(r,`ilike(any).{${a.join(",")}}`),this}is(r,a){return this.url.searchParams.append(r,`is.${a}`),this}in(r,a){const l=Array.from(new Set(a)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(r,`in.(${l})`),this}contains(r,a){return typeof a=="string"?this.url.searchParams.append(r,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(r,`cs.{${a.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(a)}`),this}containedBy(r,a){return typeof a=="string"?this.url.searchParams.append(r,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(r,`cd.{${a.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(a)}`),this}rangeGt(r,a){return this.url.searchParams.append(r,`sr.${a}`),this}rangeGte(r,a){return this.url.searchParams.append(r,`nxl.${a}`),this}rangeLt(r,a){return this.url.searchParams.append(r,`sl.${a}`),this}rangeLte(r,a){return this.url.searchParams.append(r,`nxr.${a}`),this}rangeAdjacent(r,a){return this.url.searchParams.append(r,`adj.${a}`),this}overlaps(r,a){return typeof a=="string"?this.url.searchParams.append(r,`ov.${a}`):this.url.searchParams.append(r,`ov.{${a.join(",")}}`),this}textSearch(r,a,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(r,`${d}fts${f}.${a}`),this}match(r){return Object.entries(r).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(r,a,l){return this.url.searchParams.append(r,`not.${a}.${l}`),this}or(r,{foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${r})`),this}filter(r,a,l){return this.url.searchParams.append(r,`${a}.${l}`),this}}return Fa.default=t,Fa}var Xb;function Y_(){if(Xb)return Ba;Xb=1;var n=Ba&&Ba.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ba,"__esModule",{value:!0});const e=n(Dp());class t{constructor(r,{headers:a={},schema:l,fetch:u}){this.url=r,this.headers=a,this.schema=l,this.fetch=u}select(r,{head:a=!1,count:l}={}){const u=a?"HEAD":"GET";let d=!1;const f=(r??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",f),l&&(this.headers.Prefer=`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(r,{count:a,defaultToNull:l=!0}={}){const u="POST",d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),a&&d.push(`count=${a}`),l||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(r)){const f=r.reduce((m,v)=>m.concat(Object.keys(v)),[]);if(f.length>0){const m=[...new Set(f)].map(v=>`"${v}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}upsert(r,{onConflict:a,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){const f="POST",m=[`resolution=${l?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&m.push(this.headers.Prefer),u&&m.push(`count=${u}`),d||m.push("missing=default"),this.headers.Prefer=m.join(","),Array.isArray(r)){const v=r.reduce((y,b)=>y.concat(Object.keys(b)),[]);if(v.length>0){const y=[...new Set(v)].map(b=>`"${b}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}update(r,{count:a}={}){const l="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),a&&u.push(`count=${a}`),this.headers.Prefer=u.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}delete({count:r}={}){const a="DELETE",l=[];return r&&l.push(`count=${r}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Ba.default=t,Ba}var jl={},El={},Kb;function _A(){return Kb||(Kb=1,Object.defineProperty(El,"__esModule",{value:!0}),El.version=void 0,El.version="0.0.0-automated"),El}var Qb;function SA(){if(Qb)return jl;Qb=1,Object.defineProperty(jl,"__esModule",{value:!0}),jl.DEFAULT_HEADERS=void 0;const n=_A();return jl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},jl}var Zb;function CA(){if(Zb)return La;Zb=1;var n=La&&La.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(La,"__esModule",{value:!0});const e=n(Y_()),t=n(Dp()),s=SA();class r{constructor(l,{headers:u={},schema:d,fetch:f}={}){this.url=l,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),u),this.schemaName=d,this.fetch=f}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new r(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:d=!1,get:f=!1,count:m}={}){let v;const y=new URL(`${this.url}/rpc/${l}`);let b;d||f?(v=d?"HEAD":"GET",Object.entries(u).filter(([_,T])=>T!==void 0).map(([_,T])=>[_,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([_,T])=>{y.searchParams.append(_,T)})):(v="POST",b=u);const w=Object.assign({},this.headers);return m&&(w.Prefer=`count=${m}`),new t.default({method:v,url:y,headers:w,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return La.default=r,La}var Jb;function TA(){if(Jb)return Qt;Jb=1;var n=Qt&&Qt.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.PostgrestError=Qt.PostgrestBuilder=Qt.PostgrestTransformBuilder=Qt.PostgrestFilterBuilder=Qt.PostgrestQueryBuilder=Qt.PostgrestClient=void 0;const e=n(CA());Qt.PostgrestClient=e.default;const t=n(Y_());Qt.PostgrestQueryBuilder=t.default;const s=n(Dp());Qt.PostgrestFilterBuilder=s.default;const r=n($_());Qt.PostgrestTransformBuilder=r.default;const a=n(G_());Qt.PostgrestBuilder=a.default;const l=n(H_());return Qt.PostgrestError=l.default,Qt.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:r.default,PostgrestBuilder:a.default,PostgrestError:l.default},Qt}var jA=TA();const EA=bp(jA),{PostgrestClient:kA,PostgrestQueryBuilder:W8,PostgrestFilterBuilder:X8,PostgrestTransformBuilder:K8,PostgrestBuilder:Q8,PostgrestError:Z8}=EA;function AA(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const DA=AA(),NA="2.11.15",OA=`realtime-js/${NA}`,MA="1.0.0",q_=1e4,RA=1e3;var Pl;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Pl||(Pl={}));var hs;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(hs||(hs={}));var pn;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(pn||(pn={}));var Dm;(function(n){n.websocket="websocket"})(Dm||(Dm={}));var Ni;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ni||(Ni={}));class PA{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),a=t.getUint8(2);let l=this.HEADER_LENGTH+2;const u=s.decode(e.slice(l,l+r));l=l+r;const d=s.decode(e.slice(l,l+a));l=l+a;const f=JSON.parse(s.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:d,payload:f}}}class W_{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ft;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(ft||(ft={}));const ew=(n,e,t={})=>{var s;const r=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((a,l)=>(a[l]=LA(l,n,e,r),a),{})},LA=(n,e,t,s)=>{const r=e.find(u=>u.name===n),a=r?.type,l=t[n];return a&&!s.includes(a)?X_(a,l):Nm(l)},X_=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return zA(e,t)}switch(n){case ft.bool:return BA(e);case ft.float4:case ft.float8:case ft.int2:case ft.int4:case ft.int8:case ft.numeric:case ft.oid:return FA(e);case ft.json:case ft.jsonb:return UA(e);case ft.timestamp:return VA(e);case ft.abstime:case ft.date:case ft.daterange:case ft.int4range:case ft.int8range:case ft.money:case ft.reltime:case ft.text:case ft.time:case ft.timestamptz:case ft.timetz:case ft.tsrange:case ft.tstzrange:return Nm(e);default:return Nm(e)}},Nm=n=>n,BA=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},FA=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},UA=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},zA=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let a;const l=n.slice(1,t);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(u=>X_(e,u))}return n},VA=n=>typeof n=="string"?n.replace(" ","T"):n,K_=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class zg{constructor(e,t,s={},r=q_){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var tw;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(tw||(tw={}));class Ll{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ll.syncState(this.state,r,a,l),this.pendingDiffs.forEach(d=>{this.state=Ll.syncDiff(this.state,d,a,l)}),this.pendingDiffs=[],u()}),this.channel._on(s.diff,{},r=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Ll.syncDiff(this.state,r,a,l),u())}),this.onJoin((r,a,l)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:a,newPresences:l})}),this.onLeave((r,a,l)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const a=this.cloneDeep(e),l=this.transformState(t),u={},d={};return this.map(a,(f,m)=>{l[f]||(d[f]=m)}),this.map(l,(f,m)=>{const v=a[f];if(v){const y=m.map(T=>T.presence_ref),b=v.map(T=>T.presence_ref),w=m.filter(T=>b.indexOf(T.presence_ref)<0),_=v.filter(T=>y.indexOf(T.presence_ref)<0);w.length>0&&(u[f]=w),_.length>0&&(d[f]=_)}else u[f]=m}),this.syncDiff(a,{joins:u,leaves:d},s,r)}static syncDiff(e,t,s,r){const{joins:a,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(a,(u,d)=>{var f;const m=(f=e[u])!==null&&f!==void 0?f:[];if(e[u]=this.cloneDeep(d),m.length>0){const v=e[u].map(b=>b.presence_ref),y=m.filter(b=>v.indexOf(b.presence_ref)<0);e[u].unshift(...y)}s(u,m,d)}),this.map(l,(u,d)=>{let f=e[u];if(!f)return;const m=d.map(v=>v.presence_ref);f=f.filter(v=>m.indexOf(v.presence_ref)<0),e[u]=f,r(u,f,d),f.length===0&&delete e[u]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return"metas"in r?t[s]=r.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[s]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var sw;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(sw||(sw={}));var nw;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(nw||(nw={}));var ar;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ar||(ar={}));class Np{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=hs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new zg(this,pn.join,this.params,this.timeout),this.rejoinTimer=new W_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=hs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=hs.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=hs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=hs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pn.reply,{},(r,a)=>{this._trigger(this._replyEventName(a),r)}),this.presence=new Ll(this),this.broadcastEndpointURL=K_(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==hs.closed){const{config:{broadcast:a,presence:l,private:u}}=this.params;this._onError(m=>e?.(ar.CHANNEL_ERROR,m)),this._onClose(()=>e?.(ar.CLOSED));const d={},f={broadcast:a,presence:l,postgres_changes:(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(m=>m.filter))!==null&&r!==void 0?r:[],private:u};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var v;if(this.socket.setAuth(),m===void 0){e?.(ar.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,b=(v=y?.length)!==null&&v!==void 0?v:0,w=[];for(let _=0;_<b;_++){const T=y[_],{filter:{event:S,schema:D,table:k,filter:M}}=T,N=m&&m[_];if(N&&N.event===S&&N.schema===D&&N.table===k&&N.filter===M)w.push(Object.assign(Object.assign({},T),{id:N.id}));else{this.unsubscribe(),this.state=hs.errored,e?.(ar.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(ar.SUBSCRIBED);return}}).receive("error",m=>{this.state=hs.errored,e?.(ar.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e?.(ar.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:l}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=f.body)===null||r===void 0?void 0:r.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,u,d;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),f.receive("ok",()=>a("ok")),f.receive("error",()=>a("error")),f.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=hs.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new zg(this,pn.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const r=new AbortController,a=setTimeout(()=>r.abort(),s),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(a),l}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new zg(this,e,t,s);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,a;const l=e.toLocaleLowerCase(),{close:u,error:d,leave:f,join:m}=pn;if(s&&[u,d,f,m].indexOf(l)>=0&&s!==this._joinRef())return;let y=this._onMessage(l,t,s);if(t&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(b=>{var w,_,T;return((w=b.filter)===null||w===void 0?void 0:w.event)==="*"||((T=(_=b.filter)===null||_===void 0?void 0:_.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===l}).map(b=>b.callback(y,s)):(a=this.bindings[l])===null||a===void 0||a.filter(b=>{var w,_,T,S,D,k;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const M=b.id,N=(w=b.filter)===null||w===void 0?void 0:w.event;return M&&((_=t.ids)===null||_===void 0?void 0:_.includes(M))&&(N==="*"||N?.toLocaleLowerCase()===((T=t.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const M=(D=(S=b?.filter)===null||S===void 0?void 0:S.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return M==="*"||M===((k=t?.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof y=="object"&&"ids"in y){const w=y.data,{schema:_,table:T,commit_timestamp:S,type:D,errors:k}=w;y=Object.assign(Object.assign({},{schema:_,table:T,commit_timestamp:S,eventType:D,new:{},old:{},errors:k}),this._getPayloadRecords(w))}b.callback(y,s)})}_isClosed(){return this.state===hs.closed}_isJoined(){return this.state===hs.joined}_isJoining(){return this.state===hs.joining}_isLeaving(){return this.state===hs.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),a={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(r=>{var a;return!(((a=r.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&Np.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(pn.close,{},e)}_onError(e){this._on(pn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=hs.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ew(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ew(e.columns,e.old_record)),t}}const rw=()=>{},IA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class HA{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=q_,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=rw,this.ref=0,this.logger=rw,this.conn=null,this.sendBuffer=[],this.serializer=new PA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...u)=>fc(async()=>{const{default:d}=await Promise.resolve().then(()=>mo);return{default:d}},void 0).then(({default:d})=>d(...u)):l=fetch,(...u)=>l(...u)},this.endPoint=`${e}/${Dm.websocket}`,this.httpEndpoint=K_(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(s=t?.params)===null||s===void 0?void 0:s.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=t?.encode?t.encode:(a,l)=>l(JSON.stringify(a)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new W_(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=DA),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:MA}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Pl.connecting:return Ni.Connecting;case Pl.open:return Ni.Open;case Pl.closing:return Ni.Closing;default:return Ni.Closed}}isConnected(){return this.connectionState()===Ni.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(a=>a.topic===s);if(r)return r;{const a=new Np(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:s,payload:r,ref:a}=e,l=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${t} ${s} (${a})`,r),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const r={access_token:t,version:OA};t&&s.updateJoinPayload(r),s.joinedOnce&&s._isJoined()&&s._push(pn.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(RA,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:r,payload:a,ref:l}=t;s==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${s} ${r} ${l&&"("+l+")"||""}`,a),Array.from(this.channels).filter(u=>u._isMember(s)).forEach(u=>u._trigger(r,a,l)),this.stateChangeCallbacks.message.forEach(u=>u(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(pn.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${s}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([IA],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class Op extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Jt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class GA extends Op{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Om extends Op{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var $A=function(n,e,t,s){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(m){try{f(s.next(m))}catch(v){l(v)}}function d(m){try{f(s.throw(m))}catch(v){l(v)}}function f(m){m.done?a(m.value):r(m.value).then(u,d)}f((s=s.apply(n,e||[])).next())})};const Q_=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>fc(async()=>{const{default:s}=await Promise.resolve().then(()=>mo);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},YA=()=>$A(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fc(()=>Promise.resolve().then(()=>mo),void 0)).Response:Response}),Mm=n=>{if(Array.isArray(n))return n.map(t=>Mm(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const r=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[r]=Mm(s)}),e};var qi=function(n,e,t,s){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(m){try{f(s.next(m))}catch(v){l(v)}}function d(m){try{f(s.throw(m))}catch(v){l(v)}}function f(m){m.done?a(m.value):r(m.value).then(u,d)}f((s=s.apply(n,e||[])).next())})};const Vg=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),qA=(n,e,t)=>qi(void 0,void 0,void 0,function*(){const s=yield YA();n instanceof s&&!t?.noResolveJson?n.json().then(r=>{e(new GA(Vg(r),n.status||500))}).catch(r=>{e(new Om(Vg(r),r))}):e(new Om(Vg(n),n))}),WA=(n,e,t,s)=>{const r={method:n,headers:e?.headers||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s&&(r.body=JSON.stringify(s)),Object.assign(Object.assign({},r),t))};function gc(n,e,t,s,r,a){return qi(this,void 0,void 0,function*(){return new Promise((l,u)=>{n(t,WA(e,s,r,a)).then(d=>{if(!d.ok)throw d;return s?.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>qA(d,u,s))})})}function Md(n,e,t,s){return qi(this,void 0,void 0,function*(){return gc(n,"GET",e,t,s)})}function Zr(n,e,t,s,r){return qi(this,void 0,void 0,function*(){return gc(n,"POST",e,s,r,t)})}function XA(n,e,t,s,r){return qi(this,void 0,void 0,function*(){return gc(n,"PUT",e,s,r,t)})}function KA(n,e,t,s){return qi(this,void 0,void 0,function*(){return gc(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Z_(n,e,t,s,r){return qi(this,void 0,void 0,function*(){return gc(n,"DELETE",e,s,r,t)})}var ks=function(n,e,t,s){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(m){try{f(s.next(m))}catch(v){l(v)}}function d(m){try{f(s.throw(m))}catch(v){l(v)}}function f(m){m.done?a(m.value):r(m.value).then(u,d)}f((s=s.apply(n,e||[])).next())})};const QA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},iw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ZA{constructor(e,t={},s,r){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Q_(r)}uploadOrUpdate(e,t,s,r){return ks(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},iw),r);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",this.encodeMetadata(d))):(a=s,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),r?.headers&&(u=Object.assign(Object.assign({},u),r.headers));const f=this._removeEmptyFolders(t),m=this._getFinalPath(f),v=yield this.fetch(`${this.url}/object/${m}`,Object.assign({method:e,body:a,headers:u},l?.duplex?{duplex:l.duplex}:{})),y=yield v.json();return v.ok?{data:{path:f,id:y.Id,fullPath:y.Key},error:null}:{data:null,error:y}}catch(a){if(Jt(a))return{data:null,error:a};throw a}})}upload(e,t,s){return ks(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return ks(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",t);try{let d;const f=Object.assign({upsert:iw.upsert},r),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&s instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",s)):typeof FormData<"u"&&s instanceof FormData?(d=s,d.append("cacheControl",f.cacheControl)):(d=s,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType);const v=yield this.fetch(u.toString(),{method:"PUT",body:d,headers:m}),y=yield v.json();return v.ok?{data:{path:a,fullPath:y.Key},error:null}:{data:null,error:y}}catch(d){if(Jt(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,t){return ks(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);t?.upsert&&(r["x-upsert"]="true");const a=yield Zr(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),l=new URL(this.url+a.url),u=l.searchParams.get("token");if(!u)throw new Op("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(s){if(Jt(s))return{data:null,error:s};throw s}})}update(e,t,s){return ks(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return ks(this,void 0,void 0,function*(){try{return{data:yield Zr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Jt(r))return{data:null,error:r};throw r}})}copy(e,t,s){return ks(this,void 0,void 0,function*(){try{return{data:{path:(yield Zr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Jt(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return ks(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),a=yield Zr(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const l=s?.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(r){if(Jt(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return ks(this,void 0,void 0,function*(){try{const r=yield Zr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(r){if(Jt(r))return{data:null,error:r};throw r}})}download(e,t){return ks(this,void 0,void 0,function*(){const r=typeof t?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(t?.transform||{}),l=a?`?${a}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield Md(this.fetch,`${this.url}/${r}/${u}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(Jt(u))return{data:null,error:u};throw u}})}info(e){return ks(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Md(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Mm(s),error:null}}catch(s){if(Jt(s))return{data:null,error:s};throw s}})}exists(e){return ks(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield KA(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Jt(s)&&s instanceof Om){const r=s.originalError;if([400,404].includes(r?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],a=t?.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&r.push(a);const u=typeof t?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(t?.transform||{});d!==""&&r.push(d);let f=r.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${s}${f}`)}}}remove(e){return ks(this,void 0,void 0,function*(){try{return{data:yield Z_(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Jt(t))return{data:null,error:t};throw t}})}list(e,t,s){return ks(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},QA),t),{prefix:e||""});return{data:yield Zr(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(Jt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const JA="2.7.1",eD={"X-Client-Info":`storage-js/${JA}`};var Va=function(n,e,t,s){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(m){try{f(s.next(m))}catch(v){l(v)}}function d(m){try{f(s.throw(m))}catch(v){l(v)}}function f(m){m.done?a(m.value):r(m.value).then(u,d)}f((s=s.apply(n,e||[])).next())})};class tD{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},eD),t),this.fetch=Q_(s)}listBuckets(){return Va(this,void 0,void 0,function*(){try{return{data:yield Md(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Jt(e))return{data:null,error:e};throw e}})}getBucket(e){return Va(this,void 0,void 0,function*(){try{return{data:yield Md(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Jt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Va(this,void 0,void 0,function*(){try{return{data:yield Zr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Jt(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Va(this,void 0,void 0,function*(){try{return{data:yield XA(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Jt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Va(this,void 0,void 0,function*(){try{return{data:yield Zr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Jt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Va(this,void 0,void 0,function*(){try{return{data:yield Z_(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Jt(t))return{data:null,error:t};throw t}})}}class sD extends tD{constructor(e,t={},s){super(e,t,s)}from(e){return new ZA(this.url,this.headers,e,this.fetch)}}const nD="2.50.5";let Ol="";typeof Deno<"u"?Ol="deno":typeof document<"u"?Ol="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ol="react-native":Ol="node";const rD={"X-Client-Info":`supabase-js-${Ol}/${nD}`},iD={headers:rD},aD={schema:"public"},oD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lD={};var cD=function(n,e,t,s){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(m){try{f(s.next(m))}catch(v){l(v)}}function d(m){try{f(s.throw(m))}catch(v){l(v)}}function f(m){m.done?a(m.value):r(m.value).then(u,d)}f((s=s.apply(n,e||[])).next())})};const uD=n=>{let e;return n?e=n:typeof fetch>"u"?e=V_:e=fetch,(...t)=>e(...t)},dD=()=>typeof Headers>"u"?I_:Headers,hD=(n,e,t)=>{const s=uD(t),r=dD();return(a,l)=>cD(void 0,void 0,void 0,function*(){var u;const d=(u=yield e())!==null&&u!==void 0?u:n;let f=new r(l?.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),s(a,Object.assign(Object.assign({},l),{headers:f}))})};var fD=function(n,e,t,s){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(m){try{f(s.next(m))}catch(v){l(v)}}function d(m){try{f(s.throw(m))}catch(v){l(v)}}function f(m){m.done?a(m.value):r(m.value).then(u,d)}f((s=s.apply(n,e||[])).next())})};function gD(n){return n.endsWith("/")?n:n+"/"}function mD(n,e){var t,s;const{db:r,auth:a,realtime:l,global:u}=n,{db:d,auth:f,realtime:m,global:v}=e,y={db:Object.assign(Object.assign({},d),r),auth:Object.assign(Object.assign({},f),a),realtime:Object.assign(Object.assign({},m),l),global:Object.assign(Object.assign(Object.assign({},v),u),{headers:Object.assign(Object.assign({},(t=v?.headers)!==null&&t!==void 0?t:{}),(s=u?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>fD(this,void 0,void 0,function*(){return""})};return n.accessToken?y.accessToken=n.accessToken:delete y.accessToken,y}const J_="2.70.0",qa=30*1e3,Rm=3,Ig=Rm*qa,pD="http://localhost:9999",vD="supabase.auth.token",yD={"X-Client-Info":`gotrue-js/${J_}`},Pm="X-Supabase-Api-Version",e2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bD=6e5;class Mp extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Le(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class wD extends Mp{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function _D(n){return Le(n)&&n.name==="AuthApiError"}class t2 extends Mp{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ai extends Mp{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class Kr extends ai{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function SD(n){return Le(n)&&n.name==="AuthSessionMissingError"}class Lu extends ai{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bu extends ai{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Fu extends ai{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function CD(n){return Le(n)&&n.name==="AuthImplicitGrantRedirectError"}class aw extends ai{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lm extends ai{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Hg(n){return Le(n)&&n.name==="AuthRetryableFetchError"}class ow extends ai{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Bl extends ai{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Rd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lw=` 	
\r=`.split(""),TD=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<lw.length;e+=1)n[lw[e].charCodeAt(0)]=-2;for(let e=0;e<Rd.length;e+=1)n[Rd[e].charCodeAt(0)]=e;return n})();function cw(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Rd[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Rd[s]),e.queuedBits-=6}}function s2(n,e,t){const s=TD[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function uw(n){const e=[],t=l=>{e.push(String.fromCodePoint(l))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},a=l=>{kD(l,s,t)};for(let l=0;l<n.length;l+=1)s2(n.charCodeAt(l),r,a);return e.join("")}function jD(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function ED(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const r=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}jD(s,e)}}function kD(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if((n>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function AD(n){const e=[],t={queue:0,queuedBits:0},s=r=>{e.push(r)};for(let r=0;r<n.length;r+=1)s2(n.charCodeAt(r),t,s);return new Uint8Array(e)}function DD(n){const e=[];return ED(n,t=>e.push(t)),new Uint8Array(e)}function ND(n){const e=[],t={queue:0,queuedBits:0},s=r=>{e.push(r)};return n.forEach(r=>cw(r,t,s)),cw(null,t,s),e.join("")}function OD(n){return Math.round(Date.now()/1e3)+n}function MD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const fn=()=>typeof window<"u"&&typeof document<"u",Ei={tested:!1,writable:!1},Fl=()=>{if(!fn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ei.tested)return Ei.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ei.tested=!0,Ei.writable=!0}catch{Ei.tested=!0,Ei.writable=!1}return Ei.writable};function RD(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,a)=>{e[a]=r})}catch{}return t.searchParams.forEach((s,r)=>{e[r]=s}),e}const n2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>fc(async()=>{const{default:s}=await Promise.resolve().then(()=>mo);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},PD=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",r2=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Uu=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},zu=async(n,e)=>{await n.removeItem(e)};class rh{constructor(){this.promise=new rh.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}rh.promiseConstructor=Promise;function Gg(n){const e=n.split(".");if(e.length!==3)throw new Bl("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!xD.test(e[s]))throw new Bl("JWT not in base64url format");return{header:JSON.parse(uw(e[0])),payload:JSON.parse(uw(e[1])),signature:AD(e[2]),raw:{header:e[0],payload:e[1]}}}async function LD(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function BD(n,e){return new Promise((s,r)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await n(a);if(!e(a,null,l)){s(l);return}}catch(l){if(!e(a,l)){r(l);return}}})()})}function FD(n){return("0"+n.toString(16)).substr(-2)}function UD(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let r="";for(let a=0;a<56;a++)r+=t.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,FD).join("")}async function zD(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(a=>String.fromCharCode(a)).join("")}async function VD(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await zD(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ia(n,e,t=!1){const s=UD();let r=s;t&&(r+="/PASSWORD_RECOVERY"),await r2(n,`${e}-code-verifier`,r);const a=await VD(s);return[a,s===a?"plain":"s256"]}const ID=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function HD(n){const e=n.headers.get(Pm);if(!e||!e.match(ID))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function GD(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function $D(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const YD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ha(n){if(!YD.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var qD=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};const Ai=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),WD=[502,503,504];async function dw(n){var e;if(!PD(n))throw new Lm(Ai(n),0);if(WD.includes(n.status))throw new Lm(Ai(n),n.status);let t;try{t=await n.json()}catch(a){throw new t2(Ai(a),a)}let s;const r=HD(n);if(r&&r.getTime()>=e2["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new ow(Ai(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Kr}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new ow(Ai(t),n.status,t.weak_password.reasons);throw new wD(Ai(t),n.status||500,s)}const XD=(n,e,t,s)=>{const r={method:n,headers:e?.headers||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))};async function qe(n,e,t,s){var r;const a=Object.assign({},s?.headers);a[Pm]||(a[Pm]=e2["2024-01-01"].name),s?.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const l=(r=s?.query)!==null&&r!==void 0?r:{};s?.redirectTo&&(l.redirect_to=s.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await KD(n,e,t+u,{headers:a,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(d):{data:Object.assign({},d),error:null}}async function KD(n,e,t,s,r,a){const l=XD(e,s,r,a);let u;try{u=await n(t,Object.assign({},l))}catch(d){throw console.error(d),new Lm(Ai(d),0)}if(u.ok||await dw(u),s?.noResolveJson)return u;try{return await u.json()}catch(d){await dw(d)}}function nr(n){var e;let t=null;eN(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=OD(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function hw(n){const e=nr(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Jr(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function QD(n){return{data:n,error:null}}function ZD(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:a}=n,l=qD(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:a},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function JD(n){return n}function eN(n){return n.access_token&&n.refresh_token&&n.expires_in}const $g=["global","local","others"];var tN=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};class sN{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=n2(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=$g[0]){if($g.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${$g.join(", ")}`);try{return await qe(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Le(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await qe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Jr})}catch(s){if(Le(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=tN(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=s?.newEmail,delete r.newEmail),await qe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:ZD,redirectTo:t?.redirectTo})}catch(t){if(Le(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await qe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Jr})}catch(t){if(Le(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,a,l,u,d;try{const f={nextPage:null,lastPage:0,total:0},m=await qe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(a=(r=e?.perPage)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:""},xform:JD});if(m.error)throw m.error;const v=await m.json(),y=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(d=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(w=>{const _=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(w.split(";")[1].split("=")[1]);f[`${T}Page`]=_}),f.total=parseInt(y)),{data:Object.assign(Object.assign({},v),f),error:null}}catch(f){if(Le(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){Ha(e);try{return await qe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Jr})}catch(t){if(Le(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ha(e);try{return await qe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Jr})}catch(s){if(Le(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){Ha(e);try{return await qe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Jr})}catch(s){if(Le(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Ha(e.userId);try{const{data:t,error:s}=await qe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:s}}catch(t){if(Le(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ha(e.userId),Ha(e.id);try{return{data:await qe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Le(t))return{data:null,error:t};throw t}}}const nN={getItem:n=>Fl()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{Fl()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{Fl()&&globalThis.localStorage.removeItem(n)}};function fw(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function rN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ga={debug:!!(globalThis&&Fl()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class i2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class iN extends i2{}async function aN(n,e,t){Ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Ga.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){Ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return await t()}finally{Ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(e===0)throw Ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new iN(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ga.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}rN();const oN={url:pD,storageKey:vD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function gw(n,e,t){return await t()}class Ql{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ql.nextInstanceID,Ql.nextInstanceID+=1,this.instanceID>0&&fn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},oN),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new sN({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=n2(r.fetch),this.lock=r.lock||gw,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:fn()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=aN:this.lock=gw,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:Fl()?this.storage=nN:(this.memoryStorage={},this.storage=fw(this.memoryStorage)):(this.memoryStorage={},this.storage=fw(this.memoryStorage)),fn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${J_}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=RD(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),fn()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:a}=await this._getSessionFromURL(t,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),CD(a)){const d=(e=a.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:u}=r;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Le(t)?{error:t}:{error:new t2("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,r;try{const a=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e?.options)===null||r===void 0?void 0:r.captchaToken}},xform:nr}),{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(a){if(Le(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,s,r;try{let a;if("email"in e){const{email:m,password:v,options:y}=e;let b=null,w=null;this.flowType==="pkce"&&([b,w]=await Ia(this.storage,this.storageKey)),a=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:m,password:v,data:(t=y?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:b,code_challenge_method:w},xform:nr})}else if("phone"in e){const{phone:m,password:v,options:y}=e;a=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:v,data:(s=y?.data)!==null&&s!==void 0?s:{},channel:(r=y?.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:nr})}else throw new Bu("You must provide either an email or phone number and a password");const{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(a){if(Le(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:l,options:u}=e;t=await qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:hw})}else if("phone"in e){const{phone:a,password:l,options:u}=e;t=await qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:hw})}else throw new Bu("You must provide either an email or phone number and a password");const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Lu}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(t){if(Le(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,r,a,l,u,d,f,m,v,y,b;let w,_;if("message"in e)w=e.message,_=e.signature;else{const{chain:T,wallet:S,statement:D,options:k}=e;let M;if(fn())if(typeof S=="object")M=S;else{const L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))M=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=S}const N=new URL((t=k?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in M&&M.signIn){const L=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k?.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),D?{statement:D}:null));let A;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")A=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)A=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)w=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),_=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${N.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(r=(s=k?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((a=k?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((l=k?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((u=k?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((d=k?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((f=k?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((v=(m=k?.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||v===void 0)&&v.length?["Resources",...k.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const L=await M.signMessage(new TextEncoder().encode(w),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=L}}try{const{data:T,error:S}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:ND(_)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:nr});if(S)throw S;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new Lu}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:S})}catch(T){if(Le(T))return{data:{user:null,session:null},error:T};throw T}}async _exchangeCodeForSession(e){const t=await Uu(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(t??"").split("/");try{const{data:a,error:l}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:nr});if(await zu(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Lu}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:r??null}),error:l})}catch(a){if(Le(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:s,token:r,access_token:a,nonce:l}=e,u=await qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:nr}),{data:d,error:f}=u;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Lu}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:f})}catch(t){if(Le(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,a,l;try{if("email"in e){const{email:u,options:d}=e;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Ia(this.storage,this.storageKey));const{error:v}=await qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(t=d?.data)!==null&&t!==void 0?t:{},create_user:(s=d?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:f,code_challenge_method:m},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in e){const{phone:u,options:d}=e,{data:f,error:m}=await qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(r=d?.data)!==null&&r!==void 0?r:{},create_user:(a=d?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(l=d?.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f?.message_id},error:m}}throw new Bu("You must provide either an email or phone number.")}catch(u){if(Le(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var t,s;try{let r,a;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:l,error:u}=await qe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:nr});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,f=l.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(r){if(Le(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await Ia(this.storage,this.storageKey)),await qe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e?.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:QD})}catch(a){if(Le(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Kr;const{error:r}=await qe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Le(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:a}=e,{error:l}=await qe(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:s,type:r,options:a}=e,{data:l,error:u}=await qe(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:u}}throw new Bu("You must provide either an email or phone number and a type")}catch(t){if(Le(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Uu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Ig:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,f,m)=>(!l&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,f,m))})}return{data:{session:e},error:null}}const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Jr}):await this._useSession(async t=>{var s,r,a;const{data:l,error:u}=t;if(u)throw u;return!(!((s=l.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kr}:await qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0,xform:Jr})})}catch(t){if(Le(t))return SD(t)&&(await this._removeSession(),await zu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:a}=s;if(a)throw a;if(!r.session)throw new Kr;const l=r.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await Ia(this.storage,this.storageKey));const{data:f,error:m}=await qe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:Jr});if(m)throw m;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(s){if(Le(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Kr;const t=Date.now()/1e3;let s=t,r=!0,a=null;const{payload:l}=Gg(e.access_token);if(l.exp&&(s=l.exp,r=s<=t),r){const{session:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)throw d;a={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(Le(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:l,error:u}=t;if(u)throw u;e=(s=l.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new Kr;const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Le(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!fn())throw new Fu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Fu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new aw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fu("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new aw("No code detected.");const{data:D,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:a,refresh_token:l,expires_in:u,expires_at:d,token_type:f}=e;if(!a||!u||!l||!f)throw new Fu("No session defined in URL");const m=Math.round(Date.now()/1e3),v=parseInt(u);let y=m+v;d&&(y=parseInt(d));const b=y-m;b*1e3<=qa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${v}s`);const w=y-v;m-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,y,m):m-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,y,m);const{data:_,error:T}=await this._getUser(a);if(T)throw T;const S={provider_token:s,provider_refresh_token:r,access_token:a,expires_in:v,expires_at:y,refresh_token:l,token_type:f,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:e.type},error:null}}catch(s){if(Le(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Uu(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:a}=t;if(a)return{error:a};const l=(s=r.session)===null||s===void 0?void 0:s.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(_D(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await zu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=MD(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:a},error:l}=t;if(l)throw l;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await Ia(this.storage,this.storageKey,!0));try{return await qe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(Le(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Le(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:r}=await this._useSession(async a=>{var l,u,d,f,m;const{data:v,error:y}=a;if(y)throw y;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await qe(this.fetch,"GET",b,{headers:this.headers,jwt:(m=(f=v.session)===null||f===void 0?void 0:f.access_token)!==null&&m!==void 0?m:void 0})});if(r)throw r;return fn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(Le(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,r;const{data:a,error:l}=t;if(l)throw l;return await qe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(Le(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await BD(async r=>(r>0&&await LD(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await qe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:nr})),(r,a)=>{const l=200*Math.pow(2,r);return a&&Hg(a)&&Date.now()+l-s<qa})}catch(s){if(this._debug(t,"error",s),Le(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),fn()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await Uu(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const r=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Ig;if(this._debug(t,`session has${r?"":" not"} expired with margin of ${Ig}s`),r){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Hg(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Kr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new rh;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new Kr;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={session:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(r,"error",a),Le(a)){const l={session:null,error:a};return Hg(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,t)}catch(d){a.push(d)}});if(await Promise.all(l),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await r2(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await zu(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&fn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),qa);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/qa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${qa}ms, refresh threshold is ${Rm} ticks`),r<=Rm&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof i2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!fn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const r=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,l]=await Ia(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});r.push(u.toString())}if(s?.queryParams){const a=new URLSearchParams(s.queryParams);r.push(a.toString())}return s?.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:a}=t;return a?{data:null,error:a}:await qe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Le(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:a,error:l}=t;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:f}=await qe(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&(!((r=d?.totp)===null||r===void 0)&&r.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(t){if(Le(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:a}=t;if(a)return{data:null,error:a};const{data:l,error:u}=await qe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=r?.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(t){if(Le(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:a}=t;return a?{data:null,error:a}:await qe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=r?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Le(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=e?.factors||[],r=s.filter(l=>l.factor_type==="totp"&&l.status==="verified"),a=s.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:s,totp:r,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:r},error:a}=e;if(a)return{data:null,error:a};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Gg(r.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((s=(t=r.user.factors)===null||t===void 0?void 0:t.filter(v=>v.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(d="aal2");const m=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:m},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(l=>l.kid===e);if(s||(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+bD>Date.now()))return s;const{data:r,error:a}=await qe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!r.keys||r.keys.length===0)throw new Bl("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),s=r.keys.find(l=>l.kid===e),!s)throw new Bl("No matching signing key found in JWKS");return s}async getClaims(e,t={keys:[]}){try{let s=e;if(!s){const{data:b,error:w}=await this.getSession();if(w||!b.session)return{data:null,error:w};s=b.session.access_token}const{header:r,payload:a,signature:l,raw:{header:u,payload:d}}=Gg(s);if(GD(a.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:b}=await this.getUser(s);if(b)throw b;return{data:{claims:a,header:r,signature:l},error:null}}const f=$D(r.alg),m=await this.fetchJwk(r.kid,t),v=await crypto.subtle.importKey("jwk",m,f,!0,["verify"]);if(!await crypto.subtle.verify(f,v,l,DD(`${u}.${d}`)))throw new Bl("Invalid JWT signature");return{data:{claims:a,header:r,signature:l},error:null}}catch(s){if(Le(s))return{data:null,error:s};throw s}}}Ql.nextInstanceID=0;const lN=Ql;class cN extends lN{constructor(e){super(e)}}var uN=function(n,e,t,s){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(m){try{f(s.next(m))}catch(v){l(v)}}function d(m){try{f(s.throw(m))}catch(v){l(v)}}function f(m){m.done?a(m.value):r(m.value).then(u,d)}f((s=s.apply(n,e||[])).next())})};class dN{constructor(e,t,s){var r,a,l;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const u=gD(e),d=new URL(u);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:aD,realtime:lD,auth:Object.assign(Object.assign({},oD),{storageKey:f}),global:iD},v=mD(s??{},m);this.storageKey=(r=v.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(a=v.global.headers)!==null&&a!==void 0?a:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(y,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=v.auth)!==null&&l!==void 0?l:{},this.headers,v.global.fetch),this.fetch=hD(t,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new kA(new URL("rest/v1",d).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),v.accessToken||this._listenForAuthEvents()}get functions(){return new pA(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new sD(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return uN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:a,flowType:l,lock:u,debug:d},f,m){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new cN({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),f),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:l,lock:u,debug:d,fetch:m,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new HA(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s?.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const hN=(n,e,t)=>new dN(n,e,t),fN="https://qeknkhmmydekrjqnxooe.supabase.co",gN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFla25raG1teWRla3JqcW54b29lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIyOTIwOTYsImV4cCI6MjA2Nzg2ODA5Nn0.pGCpiP_wdpC2j1Js4v2TUZM0l8WcT6pP8dH7_DmChqI",be=hN(fN,gN),Rp=j.createContext(),mN=({children:n})=>{const[e,t]=j.useState(null),[s,r]=j.useState(null),[a,l]=j.useState(!0),u=async(b,w,_,T,S,D)=>{const{data:k,error:M}=await be.auth.signUp({email:b,password:w});if(M)return console.error("Sign-up error:",M),{success:!1,error:M};const N=k.user;if(console.log("Supabase signUp result:",k),!N)return l(!1),{success:!0,message:"Verification email sent. Please check your inbox."};k.session&&t(k.session);const{error:L}=await be.from("CUSTOMER").insert([{cus_fname:_,cus_lname:T,cus_username:S,email:b,cus_celno:D?parseInt(D.replace(/\D/g,"")):0,auth_user_id:N.id}]);return L?(console.error("Error inserting into CUSTOMER:",L),{success:!1,error:L}):(r("customer"),l(!1),{success:!0,data:k,userRole:"customer"})},d=async({email:b,password:w})=>{try{const{data:_,error:T}=await be.auth.signInWithPassword({email:b,password:w});if(T)return console.error("Sign-in error:",T),{success:!1,error:T.message};const D=_.user?.user_metadata?.role||null;return{success:!0,data:_,role:D}}catch(_){return console.error("Unexpected sign-in error:",_),{success:!1,error:"Unexpected error"}}},f=async()=>{const{error:b}=await be.auth.signOut();b?console.error("Sign-out error:",b):r(null)},m=async()=>{try{const{data:b,error:w}=await be.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/redirect`}});return w?(console.error("Google auth error:",w),{success:!1,error:w.message}):{success:!0,data:b}}catch(b){return console.error("Unexpected Google auth error:",b),{success:!1,error:"An unexpected error occurred"}}},v=async b=>{try{const{error:w}=await be.auth.resetPasswordForEmail(b,{redirectTo:`${window.location.origin}/reset-password`});return w?(console.error("Password reset error:",w),{success:!1,error:w.message}):{success:!0,message:"Password reset email sent successfully!"}}catch(w){return console.error("Unexpected password reset error:",w),{success:!1,error:"An unexpected error occurred"}}},y=async b=>{if(!b){r(null);return}const{data:w}=await be.from("CUSTOMER").select("cus_id").eq("auth_user_id",b).single();if(w){r("customer");return}const{data:_}=await be.from("ADMIN").select("admin_id").eq("admin_uid",b).single();if(_){r("admin");return}r(null)};return j.useEffect(()=>{(async()=>{try{const{data:{session:_}}=await be.auth.getSession();t(_),l(!1),_?.user?await y(_.user.id):r(null)}catch(_){console.error("Error fetching session:",_),l(!1)}})();const{data:w}=be.auth.onAuthStateChange(async(_,T)=>{t(T),T?.user?y(T.user.id):r(null)});return()=>w?.subscription?.unsubscribe()},[]),h.jsx(Rp.Provider,{value:{session:e,signInUser:d,signUpNewUser:u,signInOrUpWithGoogle:m,signOut:f,resetPassword:v,userRole:s,loading:a},children:n})},po=()=>j.useContext(Rp);let pN={data:""},vN=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||pN,yN=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,xN=/\/\*[^]*?\*\/|  +/g,mw=/\n+/g,ei=(n,e)=>{let t="",s="",r="";for(let a in n){let l=n[a];a[0]=="@"?a[1]=="i"?t=a+" "+l+";":s+=a[1]=="f"?ei(l,a):a+"{"+ei(l,a[1]=="k"?"":e)+"}":typeof l=="object"?s+=ei(l,e?e.replace(/([^,])+/g,u=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,u):u?u+" "+d:d)):a):l!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=ei.p?ei.p(a,l):a+":"+l+";")}return t+(e&&r?e+"{"+r+"}":r)+s},tr={},a2=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+a2(n[t]);return e}return n},bN=(n,e,t,s,r)=>{let a=a2(n),l=tr[a]||(tr[a]=(d=>{let f=0,m=11;for(;f<d.length;)m=101*m+d.charCodeAt(f++)>>>0;return"go"+m})(a));if(!tr[l]){let d=a!==n?n:(f=>{let m,v,y=[{}];for(;m=yN.exec(f.replace(xN,""));)m[4]?y.shift():m[3]?(v=m[3].replace(mw," ").trim(),y.unshift(y[0][v]=y[0][v]||{})):y[0][m[1]]=m[2].replace(mw," ").trim();return y[0]})(n);tr[l]=ei(r?{["@keyframes "+l]:d}:d,t?"":"."+l)}let u=t&&tr.g?tr.g:null;return t&&(tr.g=tr[l]),((d,f,m,v)=>{v?f.data=f.data.replace(v,d):f.data.indexOf(d)===-1&&(f.data=m?d+f.data:f.data+d)})(tr[l],e,s,u),l},wN=(n,e,t)=>n.reduce((s,r,a)=>{let l=e[a];if(l&&l.call){let u=l(t),d=u&&u.props&&u.props.className||/^go/.test(u)&&u;l=d?"."+d:u&&typeof u=="object"?u.props?"":ei(u,""):u===!1?"":u}return s+r+(l??"")},"");function ih(n){let e=this||{},t=n.call?n(e.p):n;return bN(t.unshift?t.raw?wN(t,[].slice.call(arguments,1),e.p):t.reduce((s,r)=>Object.assign(s,r&&r.call?r(e.p):r),{}):t,vN(e.target),e.g,e.o,e.k)}let o2,Bm,Fm;ih.bind({g:1});let mr=ih.bind({k:1});function _N(n,e,t,s){ei.p=e,o2=n,Bm=t,Fm=s}function oi(n,e){let t=this||{};return function(){let s=arguments;function r(a,l){let u=Object.assign({},a),d=u.className||r.className;t.p=Object.assign({theme:Bm&&Bm()},u),t.o=/ *go\d+/.test(d),u.className=ih.apply(t,s)+(d?" "+d:"");let f=n;return n[0]&&(f=u.as||n,delete u.as),Fm&&f[0]&&Fm(u),o2(f,u)}return r}}var SN=n=>typeof n=="function",Pd=(n,e)=>SN(n)?n(e):n,CN=(()=>{let n=0;return()=>(++n).toString()})(),l2=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),TN=20,c2=(n,e)=>{switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,TN)};case 1:return{...n,toasts:n.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:t}=e;return c2(n,{type:n.toasts.find(a=>a.id===t.id)?1:0,toast:t});case 3:let{toastId:s}=e;return{...n,toasts:n.toasts.map(a=>a.id===s||s===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let r=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+r}))}}},wd=[],Pi={toasts:[],pausedAt:void 0},Wi=n=>{Pi=c2(Pi,n),wd.forEach(e=>{e(Pi)})},jN={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},EN=(n={})=>{let[e,t]=j.useState(Pi),s=j.useRef(Pi);j.useEffect(()=>(s.current!==Pi&&t(Pi),wd.push(t),()=>{let a=wd.indexOf(t);a>-1&&wd.splice(a,1)}),[]);let r=e.toasts.map(a=>{var l,u,d;return{...n,...n[a.type],...a,removeDelay:a.removeDelay||((l=n[a.type])==null?void 0:l.removeDelay)||n?.removeDelay,duration:a.duration||((u=n[a.type])==null?void 0:u.duration)||n?.duration||jN[a.type],style:{...n.style,...(d=n[a.type])==null?void 0:d.style,...a.style}}});return{...e,toasts:r}},kN=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:t?.id||CN()}),mc=n=>(e,t)=>{let s=kN(e,n,t);return Wi({type:2,toast:s}),s.id},Oe=(n,e)=>mc("blank")(n,e);Oe.error=mc("error");Oe.success=mc("success");Oe.loading=mc("loading");Oe.custom=mc("custom");Oe.dismiss=n=>{Wi({type:3,toastId:n})};Oe.remove=n=>Wi({type:4,toastId:n});Oe.promise=(n,e,t)=>{let s=Oe.loading(e.loading,{...t,...t?.loading});return typeof n=="function"&&(n=n()),n.then(r=>{let a=e.success?Pd(e.success,r):void 0;return a?Oe.success(a,{id:s,...t,...t?.success}):Oe.dismiss(s),r}).catch(r=>{let a=e.error?Pd(e.error,r):void 0;a?Oe.error(a,{id:s,...t,...t?.error}):Oe.dismiss(s)}),n};var AN=(n,e)=>{Wi({type:1,toast:{id:n,height:e}})},DN=()=>{Wi({type:5,time:Date.now()})},Ul=new Map,NN=1e3,ON=(n,e=NN)=>{if(Ul.has(n))return;let t=setTimeout(()=>{Ul.delete(n),Wi({type:4,toastId:n})},e);Ul.set(n,t)},MN=n=>{let{toasts:e,pausedAt:t}=EN(n);j.useEffect(()=>{if(t)return;let a=Date.now(),l=e.map(u=>{if(u.duration===1/0)return;let d=(u.duration||0)+u.pauseDuration-(a-u.createdAt);if(d<0){u.visible&&Oe.dismiss(u.id);return}return setTimeout(()=>Oe.dismiss(u.id),d)});return()=>{l.forEach(u=>u&&clearTimeout(u))}},[e,t]);let s=j.useCallback(()=>{t&&Wi({type:6,time:Date.now()})},[t]),r=j.useCallback((a,l)=>{let{reverseOrder:u=!1,gutter:d=8,defaultPosition:f}=l||{},m=e.filter(b=>(b.position||f)===(a.position||f)&&b.height),v=m.findIndex(b=>b.id===a.id),y=m.filter((b,w)=>w<v&&b.visible).length;return m.filter(b=>b.visible).slice(...u?[y+1]:[0,y]).reduce((b,w)=>b+(w.height||0)+d,0)},[e]);return j.useEffect(()=>{e.forEach(a=>{if(a.dismissed)ON(a.id,a.removeDelay);else{let l=Ul.get(a.id);l&&(clearTimeout(l),Ul.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:AN,startPause:DN,endPause:s,calculateOffset:r}}},RN=mr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,PN=mr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,LN=mr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,BN=oi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${RN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${PN} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${LN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,FN=mr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,UN=oi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${FN} 1s linear infinite;
`,zN=mr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,VN=mr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,IN=oi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${zN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${VN} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,HN=oi("div")`
  position: absolute;
`,GN=oi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,$N=mr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,YN=oi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${$N} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,qN=({toast:n})=>{let{icon:e,type:t,iconTheme:s}=n;return e!==void 0?typeof e=="string"?j.createElement(YN,null,e):e:t==="blank"?null:j.createElement(GN,null,j.createElement(UN,{...s}),t!=="loading"&&j.createElement(HN,null,t==="error"?j.createElement(BN,{...s}):j.createElement(IN,{...s})))},WN=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,XN=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,KN="0%{opacity:0;} 100%{opacity:1;}",QN="0%{opacity:1;} 100%{opacity:0;}",ZN=oi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,JN=oi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,eO=(n,e)=>{let t=n.includes("top")?1:-1,[s,r]=l2()?[KN,QN]:[WN(t),XN(t)];return{animation:e?`${mr(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${mr(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},tO=j.memo(({toast:n,position:e,style:t,children:s})=>{let r=n.height?eO(n.position||e||"top-center",n.visible):{opacity:0},a=j.createElement(qN,{toast:n}),l=j.createElement(JN,{...n.ariaProps},Pd(n.message,n));return j.createElement(ZN,{className:n.className,style:{...r,...t,...n.style}},typeof s=="function"?s({icon:a,message:l}):j.createElement(j.Fragment,null,a,l))});_N(j.createElement);var sO=({id:n,className:e,style:t,onHeightUpdate:s,children:r})=>{let a=j.useCallback(l=>{if(l){let u=()=>{let d=l.getBoundingClientRect().height;s(n,d)};u(),new MutationObserver(u).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[n,s]);return j.createElement("div",{ref:a,className:e,style:t},r)},nO=(n,e)=>{let t=n.includes("top"),s=t?{top:0}:{bottom:0},r=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:l2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...s,...r}},rO=ih`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Vu=16,iO=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:s,children:r,containerStyle:a,containerClassName:l})=>{let{toasts:u,handlers:d}=MN(t);return j.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Vu,left:Vu,right:Vu,bottom:Vu,pointerEvents:"none",...a},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},u.map(f=>{let m=f.position||e,v=d.calculateOffset(f,{reverseOrder:n,gutter:s,defaultPosition:e}),y=nO(m,v);return j.createElement(sO,{id:f.id,key:f.id,onHeightUpdate:d.updateHeight,className:f.visible?rO:"",style:y},f.type==="custom"?Pd(f.message,f):r?r(f):j.createElement(tO,{toast:f,position:m}))}))},ve=Oe;const Pp=j.createContext({});function Lp(n){const e=j.useRef(null);return e.current===null&&(e.current=n()),e.current}const Bp=typeof window<"u",u2=Bp?j.useLayoutEffect:j.useEffect,ah=j.createContext(null);function Fp(n,e){n.indexOf(e)===-1&&n.push(e)}function Up(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const pr=(n,e,t)=>t>e?e:t<n?n:t;let zp=()=>{};const vr={},d2=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function h2(n){return typeof n=="object"&&n!==null}const f2=n=>/^0[^.\s]+$/u.test(n);function Vp(n){let e;return()=>(e===void 0&&(e=n()),e)}const an=n=>n,aO=(n,e)=>t=>e(n(t)),pc=(...n)=>n.reduce(aO),Zl=(n,e,t)=>{const s=e-n;return s===0?1:(t-n)/s};class Ip{constructor(){this.subscriptions=[]}add(e){return Fp(this.subscriptions,e),()=>Up(this.subscriptions,e)}notify(e,t,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,s);else for(let a=0;a<r;a++){const l=this.subscriptions[a];l&&l(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Pn=n=>n*1e3,Ln=n=>n/1e3;function g2(n,e){return e?n*(1e3/e):0}const m2=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,oO=1e-7,lO=12;function cO(n,e,t,s,r){let a,l,u=0;do l=e+(t-e)/2,a=m2(l,s,r)-n,a>0?t=l:e=l;while(Math.abs(a)>oO&&++u<lO);return l}function vc(n,e,t,s){if(n===e&&t===s)return an;const r=a=>cO(a,0,1,n,t);return a=>a===0||a===1?a:m2(r(a),e,s)}const p2=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,v2=n=>e=>1-n(1-e),y2=vc(.33,1.53,.69,.99),Hp=v2(y2),x2=p2(Hp),b2=n=>(n*=2)<1?.5*Hp(n):.5*(2-Math.pow(2,-10*(n-1))),Gp=n=>1-Math.sin(Math.acos(n)),w2=v2(Gp),_2=p2(Gp),uO=vc(.42,0,1,1),dO=vc(0,0,.58,1),S2=vc(.42,0,.58,1),hO=n=>Array.isArray(n)&&typeof n[0]!="number",C2=n=>Array.isArray(n)&&typeof n[0]=="number",fO={linear:an,easeIn:uO,easeInOut:S2,easeOut:dO,circIn:Gp,circInOut:_2,circOut:w2,backIn:Hp,backInOut:x2,backOut:y2,anticipate:b2},gO=n=>typeof n=="string",pw=n=>{if(C2(n)){zp(n.length===4);const[e,t,s,r]=n;return vc(e,t,s,r)}else if(gO(n))return fO[n];return n},Iu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],vw={value:null};function mO(n,e){let t=new Set,s=new Set,r=!1,a=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},d=0;function f(v){l.has(v)&&(m.schedule(v),n()),d++,v(u)}const m={schedule:(v,y=!1,b=!1)=>{const _=b&&r?t:s;return y&&l.add(v),_.has(v)||_.add(v),v},cancel:v=>{s.delete(v),l.delete(v)},process:v=>{if(u=v,r){a=!0;return}r=!0,[t,s]=[s,t],t.forEach(f),e&&vw.value&&vw.value.frameloop[e].push(d),d=0,t.clear(),r=!1,a&&(a=!1,m.process(v))}};return m}const pO=40;function T2(n,e){let t=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,l=Iu.reduce((k,M)=>(k[M]=mO(a,e?M:void 0),k),{}),{setup:u,read:d,resolveKeyframes:f,preUpdate:m,update:v,preRender:y,render:b,postRender:w}=l,_=()=>{const k=vr.useManualTiming?r.timestamp:performance.now();t=!1,vr.useManualTiming||(r.delta=s?1e3/60:Math.max(Math.min(k-r.timestamp,pO),1)),r.timestamp=k,r.isProcessing=!0,u.process(r),d.process(r),f.process(r),m.process(r),v.process(r),y.process(r),b.process(r),w.process(r),r.isProcessing=!1,t&&e&&(s=!1,n(_))},T=()=>{t=!0,s=!0,r.isProcessing||n(_)};return{schedule:Iu.reduce((k,M)=>{const N=l[M];return k[M]=(L,A=!1,B=!1)=>(t||T(),N.schedule(L,A,B)),k},{}),cancel:k=>{for(let M=0;M<Iu.length;M++)l[Iu[M]].cancel(k)},state:r,steps:l}}const{schedule:vt,cancel:si,state:is,steps:Yg}=T2(typeof requestAnimationFrame<"u"?requestAnimationFrame:an,!0);let _d;function vO(){_d=void 0}const Ds={now:()=>(_d===void 0&&Ds.set(is.isProcessing||vr.useManualTiming?is.timestamp:performance.now()),_d),set:n=>{_d=n,queueMicrotask(vO)}},j2=n=>e=>typeof e=="string"&&e.startsWith(n),$p=j2("--"),yO=j2("var(--"),Yp=n=>yO(n)?xO.test(n.split("/*")[0].trim()):!1,xO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,vo={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Jl={...vo,transform:n=>pr(0,1,n)},Hu={...vo,default:1},zl=n=>Math.round(n*1e5)/1e5,qp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function bO(n){return n==null}const wO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Wp=(n,e)=>t=>!!(typeof t=="string"&&wO.test(t)&&t.startsWith(n)||e&&!bO(t)&&Object.prototype.hasOwnProperty.call(t,e)),E2=(n,e,t)=>s=>{if(typeof s!="string")return s;const[r,a,l,u]=s.match(qp);return{[n]:parseFloat(r),[e]:parseFloat(a),[t]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},_O=n=>pr(0,255,n),qg={...vo,transform:n=>Math.round(_O(n))},Li={test:Wp("rgb","red"),parse:E2("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:s=1})=>"rgba("+qg.transform(n)+", "+qg.transform(e)+", "+qg.transform(t)+", "+zl(Jl.transform(s))+")"};function SO(n){let e="",t="",s="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),s=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),s=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,s+=s,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const Um={test:Wp("#"),parse:SO,transform:Li.transform},yc=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Qr=yc("deg"),Bn=yc("%"),Pe=yc("px"),CO=yc("vh"),TO=yc("vw"),yw={...Bn,parse:n=>Bn.parse(n)/100,transform:n=>Bn.transform(n*100)},Xa={test:Wp("hsl","hue"),parse:E2("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(n)+", "+Bn.transform(zl(e))+", "+Bn.transform(zl(t))+", "+zl(Jl.transform(s))+")"},Pt={test:n=>Li.test(n)||Um.test(n)||Xa.test(n),parse:n=>Li.test(n)?Li.parse(n):Xa.test(n)?Xa.parse(n):Um.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Li.transform(n):Xa.transform(n),getAnimatableNone:n=>{const e=Pt.parse(n);return e.alpha=0,Pt.transform(e)}},jO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function EO(n){return isNaN(n)&&typeof n=="string"&&(n.match(qp)?.length||0)+(n.match(jO)?.length||0)>0}const k2="number",A2="color",kO="var",AO="var(",xw="${}",DO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ec(n){const e=n.toString(),t=[],s={color:[],number:[],var:[]},r=[];let a=0;const u=e.replace(DO,d=>(Pt.test(d)?(s.color.push(a),r.push(A2),t.push(Pt.parse(d))):d.startsWith(AO)?(s.var.push(a),r.push(kO),t.push(d)):(s.number.push(a),r.push(k2),t.push(parseFloat(d))),++a,xw)).split(xw);return{values:t,split:u,indexes:s,types:r}}function D2(n){return ec(n).values}function N2(n){const{split:e,types:t}=ec(n),s=e.length;return r=>{let a="";for(let l=0;l<s;l++)if(a+=e[l],r[l]!==void 0){const u=t[l];u===k2?a+=zl(r[l]):u===A2?a+=Pt.transform(r[l]):a+=r[l]}return a}}const NO=n=>typeof n=="number"?0:Pt.test(n)?Pt.getAnimatableNone(n):n;function OO(n){const e=D2(n);return N2(n)(e.map(NO))}const ni={test:EO,parse:D2,createTransformer:N2,getAnimatableNone:OO};function Wg(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function MO({hue:n,saturation:e,lightness:t,alpha:s}){n/=360,e/=100,t/=100;let r=0,a=0,l=0;if(!e)r=a=l=t;else{const u=t<.5?t*(1+e):t+e-t*e,d=2*t-u;r=Wg(d,u,n+1/3),a=Wg(d,u,n),l=Wg(d,u,n-1/3)}return{red:Math.round(r*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:s}}function Ld(n,e){return t=>t>0?e:n}const _t=(n,e,t)=>n+(e-n)*t,Xg=(n,e,t)=>{const s=n*n,r=t*(e*e-s)+s;return r<0?0:Math.sqrt(r)},RO=[Um,Li,Xa],PO=n=>RO.find(e=>e.test(n));function bw(n){const e=PO(n);if(!e)return!1;let t=e.parse(n);return e===Xa&&(t=MO(t)),t}const ww=(n,e)=>{const t=bw(n),s=bw(e);if(!t||!s)return Ld(n,e);const r={...t};return a=>(r.red=Xg(t.red,s.red,a),r.green=Xg(t.green,s.green,a),r.blue=Xg(t.blue,s.blue,a),r.alpha=_t(t.alpha,s.alpha,a),Li.transform(r))},zm=new Set(["none","hidden"]);function LO(n,e){return zm.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function BO(n,e){return t=>_t(n,e,t)}function Xp(n){return typeof n=="number"?BO:typeof n=="string"?Yp(n)?Ld:Pt.test(n)?ww:zO:Array.isArray(n)?O2:typeof n=="object"?Pt.test(n)?ww:FO:Ld}function O2(n,e){const t=[...n],s=t.length,r=n.map((a,l)=>Xp(a)(a,e[l]));return a=>{for(let l=0;l<s;l++)t[l]=r[l](a);return t}}function FO(n,e){const t={...n,...e},s={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(s[r]=Xp(n[r])(n[r],e[r]));return r=>{for(const a in s)t[a]=s[a](r);return t}}function UO(n,e){const t=[],s={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const a=e.types[r],l=n.indexes[a][s[a]],u=n.values[l]??0;t[r]=u,s[a]++}return t}const zO=(n,e)=>{const t=ni.createTransformer(e),s=ec(n),r=ec(e);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?zm.has(n)&&!r.values.length||zm.has(e)&&!s.values.length?LO(n,e):pc(O2(UO(s,r),r.values),t):Ld(n,e)};function M2(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?_t(n,e,t):Xp(n)(n,e)}const VO=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>vt.update(e,t),stop:()=>si(e),now:()=>is.isProcessing?is.timestamp:Ds.now()}},R2=(n,e,t=10)=>{let s="";const r=Math.max(Math.round(e/t),2);for(let a=0;a<r;a++)s+=Math.round(n(a/(r-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Bd=2e4;function Kp(n){let e=0;const t=50;let s=n.next(e);for(;!s.done&&e<Bd;)e+=t,s=n.next(e);return e>=Bd?1/0:e}function IO(n,e=100,t){const s=t({...n,keyframes:[0,e]}),r=Math.min(Kp(s),Bd);return{type:"keyframes",ease:a=>s.next(r*a).value/e,duration:Ln(r)}}const HO=5;function P2(n,e,t){const s=Math.max(e-HO,0);return g2(t-n(s),e-s)}const Tt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Kg=.001;function GO({duration:n=Tt.duration,bounce:e=Tt.bounce,velocity:t=Tt.velocity,mass:s=Tt.mass}){let r,a,l=1-e;l=pr(Tt.minDamping,Tt.maxDamping,l),n=pr(Tt.minDuration,Tt.maxDuration,Ln(n)),l<1?(r=f=>{const m=f*l,v=m*n,y=m-t,b=Vm(f,l),w=Math.exp(-v);return Kg-y/b*w},a=f=>{const v=f*l*n,y=v*t+t,b=Math.pow(l,2)*Math.pow(f,2)*n,w=Math.exp(-v),_=Vm(Math.pow(f,2),l);return(-r(f)+Kg>0?-1:1)*((y-b)*w)/_}):(r=f=>{const m=Math.exp(-f*n),v=(f-t)*n+1;return-Kg+m*v},a=f=>{const m=Math.exp(-f*n),v=(t-f)*(n*n);return m*v});const u=5/n,d=YO(r,a,u);if(n=Pn(n),isNaN(d))return{stiffness:Tt.stiffness,damping:Tt.damping,duration:n};{const f=Math.pow(d,2)*s;return{stiffness:f,damping:l*2*Math.sqrt(s*f),duration:n}}}const $O=12;function YO(n,e,t){let s=t;for(let r=1;r<$O;r++)s=s-n(s)/e(s);return s}function Vm(n,e){return n*Math.sqrt(1-e*e)}const qO=["duration","bounce"],WO=["stiffness","damping","mass"];function _w(n,e){return e.some(t=>n[t]!==void 0)}function XO(n){let e={velocity:Tt.velocity,stiffness:Tt.stiffness,damping:Tt.damping,mass:Tt.mass,isResolvedFromDuration:!1,...n};if(!_w(n,WO)&&_w(n,qO))if(n.visualDuration){const t=n.visualDuration,s=2*Math.PI/(t*1.2),r=s*s,a=2*pr(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:Tt.mass,stiffness:r,damping:a}}else{const t=GO(n);e={...e,...t,mass:Tt.mass},e.isResolvedFromDuration=!0}return e}function Fd(n=Tt.visualDuration,e=Tt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:s,restDelta:r}=t;const a=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],u={done:!1,value:a},{stiffness:d,damping:f,mass:m,duration:v,velocity:y,isResolvedFromDuration:b}=XO({...t,velocity:-Ln(t.velocity||0)}),w=y||0,_=f/(2*Math.sqrt(d*m)),T=l-a,S=Ln(Math.sqrt(d/m)),D=Math.abs(T)<5;s||(s=D?Tt.restSpeed.granular:Tt.restSpeed.default),r||(r=D?Tt.restDelta.granular:Tt.restDelta.default);let k;if(_<1){const N=Vm(S,_);k=L=>{const A=Math.exp(-_*S*L);return l-A*((w+_*S*T)/N*Math.sin(N*L)+T*Math.cos(N*L))}}else if(_===1)k=N=>l-Math.exp(-S*N)*(T+(w+S*T)*N);else{const N=S*Math.sqrt(_*_-1);k=L=>{const A=Math.exp(-_*S*L),B=Math.min(N*L,300);return l-A*((w+_*S*T)*Math.sinh(B)+N*T*Math.cosh(B))/N}}const M={calculatedDuration:b&&v||null,next:N=>{const L=k(N);if(b)u.done=N>=v;else{let A=N===0?w:0;_<1&&(A=N===0?Pn(w):P2(k,N,L));const B=Math.abs(A)<=s,Y=Math.abs(l-L)<=r;u.done=B&&Y}return u.value=u.done?l:L,u},toString:()=>{const N=Math.min(Kp(M),Bd),L=R2(A=>M.next(N*A).value,N,30);return N+"ms "+L},toTransition:()=>{}};return M}Fd.applyToOptions=n=>{const e=IO(n,100,Fd);return n.ease=e.ease,n.duration=Pn(e.duration),n.type="keyframes",n};function Im({keyframes:n,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:l,min:u,max:d,restDelta:f=.5,restSpeed:m}){const v=n[0],y={done:!1,value:v},b=B=>u!==void 0&&B<u||d!==void 0&&B>d,w=B=>u===void 0?d:d===void 0||Math.abs(u-B)<Math.abs(d-B)?u:d;let _=t*e;const T=v+_,S=l===void 0?T:l(T);S!==T&&(_=S-v);const D=B=>-_*Math.exp(-B/s),k=B=>S+D(B),M=B=>{const Y=D(B),W=k(B);y.done=Math.abs(Y)<=f,y.value=y.done?S:W};let N,L;const A=B=>{b(y.value)&&(N=B,L=Fd({keyframes:[y.value,w(y.value)],velocity:P2(k,B,y.value),damping:r,stiffness:a,restDelta:f,restSpeed:m}))};return A(0),{calculatedDuration:null,next:B=>{let Y=!1;return!L&&N===void 0&&(Y=!0,M(B),A(B)),N!==void 0&&B>=N?L.next(B-N):(!Y&&M(B),y)}}}function KO(n,e,t){const s=[],r=t||vr.mix||M2,a=n.length-1;for(let l=0;l<a;l++){let u=r(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||an:e;u=pc(d,u)}s.push(u)}return s}function QO(n,e,{clamp:t=!0,ease:s,mixer:r}={}){const a=n.length;if(zp(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=KO(e,s,r),d=u.length,f=m=>{if(l&&m<n[0])return e[0];let v=0;if(d>1)for(;v<n.length-2&&!(m<n[v+1]);v++);const y=Zl(n[v],n[v+1],m);return u[v](y)};return t?m=>f(pr(n[0],n[a-1],m)):f}function ZO(n,e){const t=n[n.length-1];for(let s=1;s<=e;s++){const r=Zl(0,e,s);n.push(_t(t,1,r))}}function JO(n){const e=[0];return ZO(e,n.length-1),e}function e4(n,e){return n.map(t=>t*e)}function t4(n,e){return n.map(()=>e||S2).splice(0,n.length-1)}function Vl({duration:n=300,keyframes:e,times:t,ease:s="easeInOut"}){const r=hO(s)?s.map(pw):pw(s),a={done:!1,value:e[0]},l=e4(t&&t.length===e.length?t:JO(e),n),u=QO(l,e,{ease:Array.isArray(r)?r:t4(e,r)});return{calculatedDuration:n,next:d=>(a.value=u(d),a.done=d>=n,a)}}const s4=n=>n!==null;function Qp(n,{repeat:e,repeatType:t="loop"},s,r=1){const a=n.filter(s4),u=r<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!u||s===void 0?a[u]:s}const n4={decay:Im,inertia:Im,tween:Vl,keyframes:Vl,spring:Fd};function L2(n){typeof n.type=="string"&&(n.type=n4[n.type])}class Zp{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const r4=n=>n/100;class Jp extends Zp{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Ds.now()&&this.tick(Ds.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;L2(e);const{type:t=Vl,repeat:s=0,repeatDelay:r=0,repeatType:a,velocity:l=0}=e;let{keyframes:u}=e;const d=t||Vl;d!==Vl&&typeof u[0]!="number"&&(this.mixKeyframes=pc(r4,M2(u[0],u[1])),u=[0,100]);const f=d({...e,keyframes:u});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...u].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=Kp(f));const{calculatedDuration:m}=f;this.calculatedDuration=m,this.resolvedDuration=m+r,this.totalDuration=this.resolvedDuration*(s+1)-r,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:s,totalDuration:r,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return s.next(0);const{delay:f=0,keyframes:m,repeat:v,repeatType:y,repeatDelay:b,type:w,onUpdate:_,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const S=this.currentTime-f*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?S<0:S>r;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let k=this.currentTime,M=s;if(v){const B=Math.min(this.currentTime,r)/u;let Y=Math.floor(B),W=B%1;!W&&B>=1&&(W=1),W===1&&Y--,Y=Math.min(Y,v+1),!!(Y%2)&&(y==="reverse"?(W=1-W,b&&(W-=b/u)):y==="mirror"&&(M=l)),k=pr(0,1,W)*u}const N=D?{done:!1,value:m[0]}:M.next(k);a&&(N.value=a(N.value));let{done:L}=N;!D&&d!==null&&(L=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return A&&w!==Im&&(N.value=Qp(m,this.options,T,this.speed)),_&&_(N.value),A&&this.finish(),N}then(e,t){return this.finished.then(e,t)}get duration(){return Ln(this.calculatedDuration)}get time(){return Ln(this.currentTime)}set time(e){e=Pn(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ds.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Ln(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=VO,startTime:t}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=t??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ds.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function i4(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Bi=n=>n*180/Math.PI,Hm=n=>{const e=Bi(Math.atan2(n[1],n[0]));return Gm(e)},a4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Hm,rotateZ:Hm,skewX:n=>Bi(Math.atan(n[1])),skewY:n=>Bi(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Gm=n=>(n=n%360,n<0&&(n+=360),n),Sw=Hm,Cw=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Tw=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),o4={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Cw,scaleY:Tw,scale:n=>(Cw(n)+Tw(n))/2,rotateX:n=>Gm(Bi(Math.atan2(n[6],n[5]))),rotateY:n=>Gm(Bi(Math.atan2(-n[2],n[0]))),rotateZ:Sw,rotate:Sw,skewX:n=>Bi(Math.atan(n[4])),skewY:n=>Bi(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function $m(n){return n.includes("scale")?1:0}function Ym(n,e){if(!n||n==="none")return $m(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,r;if(t)s=o4,r=t;else{const u=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=a4,r=u}if(!r)return $m(e);const a=s[e],l=r[1].split(",").map(c4);return typeof a=="function"?a(l):l[a]}const l4=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Ym(t,e)};function c4(n){return parseFloat(n.trim())}const yo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xo=new Set(yo),jw=n=>n===vo||n===Pe,u4=new Set(["x","y","z"]),d4=yo.filter(n=>!u4.has(n));function h4(n){const e=[];return d4.forEach(t=>{const s=n.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e}const Vi={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Ym(e,"x"),y:(n,{transform:e})=>Ym(e,"y")};Vi.translateX=Vi.x;Vi.translateY=Vi.y;const Ii=new Set;let qm=!1,Wm=!1,Xm=!1;function B2(){if(Wm){const n=Array.from(Ii).filter(s=>s.needsMeasurement),e=new Set(n.map(s=>s.element)),t=new Map;e.forEach(s=>{const r=h4(s);r.length&&(t.set(s,r),s.render())}),n.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const r=t.get(s);r&&r.forEach(([a,l])=>{s.getValue(a)?.set(l)})}),n.forEach(s=>s.measureEndState()),n.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Wm=!1,qm=!1,Ii.forEach(n=>n.complete(Xm)),Ii.clear()}function F2(){Ii.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Wm=!0)})}function f4(){Xm=!0,F2(),B2(),Xm=!1}class e0{constructor(e,t,s,r,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=r,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Ii.add(this),qm||(qm=!0,vt.read(F2),vt.resolveKeyframes(B2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:r}=this;if(e[0]===null){const a=r?.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(s&&t){const u=s.readValue(t,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),r&&a===void 0&&r.set(e[0])}i4(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ii.delete(this)}cancel(){this.state==="scheduled"&&(Ii.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const g4=n=>n.startsWith("--");function m4(n,e,t){g4(e)?n.style.setProperty(e,t):n.style[e]=t}const p4=Vp(()=>window.ScrollTimeline!==void 0),v4={};function y4(n,e){const t=Vp(n);return()=>v4[e]??t()}const U2=y4(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ml=([n,e,t,s])=>`cubic-bezier(${n}, ${e}, ${t}, ${s})`,Ew={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ml([0,.65,.55,1]),circOut:Ml([.55,0,1,.45]),backIn:Ml([.31,.01,.66,-.59]),backOut:Ml([.33,1.53,.69,.99])};function z2(n,e){if(n)return typeof n=="function"?U2()?R2(n,e):"ease-out":C2(n)?Ml(n):Array.isArray(n)?n.map(t=>z2(t,e)||Ew.easeOut):Ew[n]}function x4(n,e,t,{delay:s=0,duration:r=300,repeat:a=0,repeatType:l="loop",ease:u="easeOut",times:d}={},f=void 0){const m={[e]:t};d&&(m.offset=d);const v=z2(u,r);Array.isArray(v)&&(m.easing=v);const y={delay:s,duration:r,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return f&&(y.pseudoElement=f),n.animate(m,y)}function V2(n){return typeof n=="function"&&"applyToOptions"in n}function b4({type:n,...e}){return V2(n)&&U2()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class w4 extends Zp{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:s,keyframes:r,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:u,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,zp(typeof e.type!="string");const f=b4(e);this.animation=x4(t,s,r,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const m=Qp(r,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(m):m4(t,s,m),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Ln(Number(e))}get time(){return Ln(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Pn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&p4()?(this.animation.timeline=e,an):t(this)}}const I2={anticipate:b2,backInOut:x2,circInOut:_2};function _4(n){return n in I2}function S4(n){typeof n.ease=="string"&&_4(n.ease)&&(n.ease=I2[n.ease])}const kw=10;class C4 extends w4{constructor(e){S4(e),L2(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:s,onComplete:r,element:a,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const u=new Jp({...l,autoplay:!1}),d=Pn(this.finishedTime??this.time);t.setWithVelocity(u.sample(d-kw).value,u.sample(d).value,kw),u.stop()}}const Aw=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ni.test(n)||n==="0")&&!n.startsWith("url("));function T4(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function j4(n,e,t,s){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],l=Aw(r,e),u=Aw(a,e);return!l||!u?!1:T4(n)||(t==="spring"||V2(t))&&s}function t0(n){return h2(n)&&"offsetHeight"in n}const E4=new Set(["opacity","clipPath","filter","transform"]),k4=Vp(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function A4(n){const{motionValue:e,name:t,repeatDelay:s,repeatType:r,damping:a,type:l}=n;if(!t0(e?.owner?.current))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return k4()&&t&&E4.has(t)&&(t!=="transform"||!d)&&!u&&!s&&r!=="mirror"&&a!==0&&l!=="inertia"}const D4=40;class N4 extends Zp{constructor({autoplay:e=!0,delay:t=0,type:s="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:l="loop",keyframes:u,name:d,motionValue:f,element:m,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Ds.now();const y={autoplay:e,delay:t,type:s,repeat:r,repeatDelay:a,repeatType:l,name:d,motionValue:f,element:m,...v},b=m?.KeyframeResolver||e0;this.keyframeResolver=new b(u,(w,_,T)=>this.onKeyframesResolved(w,_,y,!T),d,f,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,s,r){this.keyframeResolver=void 0;const{name:a,type:l,velocity:u,delay:d,isHandoff:f,onUpdate:m}=s;this.resolvedAt=Ds.now(),j4(e,a,l,u)||((vr.instantAnimations||!d)&&m?.(Qp(e,s,t)),e[0]=e[e.length-1],s.duration=0,s.repeat=0);const y={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>D4?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...s,keyframes:e},b=!f&&A4(y)?new C4({...y,element:y.motionValue.owner.current}):new Jp(y);b.finished.then(()=>this.notifyFinished()).catch(an),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),f4()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const O4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function M4(n){const e=O4.exec(n);if(!e)return[,];const[,t,s,r]=e;return[`--${t??s}`,r]}function H2(n,e,t=1){const[s,r]=M4(n);if(!s)return;const a=window.getComputedStyle(e).getPropertyValue(s);if(a){const l=a.trim();return d2(l)?parseFloat(l):l}return Yp(r)?H2(r,e,t+1):r}function s0(n,e){return n?.[e]??n?.default??n}const G2=new Set(["width","height","top","left","right","bottom",...yo]),R4={test:n=>n==="auto",parse:n=>n},$2=n=>e=>e.test(n),Y2=[vo,Pe,Bn,Qr,TO,CO,R4],Dw=n=>Y2.find($2(n));function P4(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||f2(n):!0}const L4=new Set(["brightness","contrast","saturate","opacity"]);function B4(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[s]=t.match(qp)||[];if(!s)return n;const r=t.replace(s,"");let a=L4.has(e)?1:0;return s!==t&&(a*=100),e+"("+a+r+")"}const F4=/\b([a-z-]*)\(.*?\)/gu,Km={...ni,getAnimatableNone:n=>{const e=n.match(F4);return e?e.map(B4).join(" "):n}},Nw={...vo,transform:Math.round},U4={rotate:Qr,rotateX:Qr,rotateY:Qr,rotateZ:Qr,scale:Hu,scaleX:Hu,scaleY:Hu,scaleZ:Hu,skew:Qr,skewX:Qr,skewY:Qr,distance:Pe,translateX:Pe,translateY:Pe,translateZ:Pe,x:Pe,y:Pe,z:Pe,perspective:Pe,transformPerspective:Pe,opacity:Jl,originX:yw,originY:yw,originZ:Pe},n0={borderWidth:Pe,borderTopWidth:Pe,borderRightWidth:Pe,borderBottomWidth:Pe,borderLeftWidth:Pe,borderRadius:Pe,radius:Pe,borderTopLeftRadius:Pe,borderTopRightRadius:Pe,borderBottomRightRadius:Pe,borderBottomLeftRadius:Pe,width:Pe,maxWidth:Pe,height:Pe,maxHeight:Pe,top:Pe,right:Pe,bottom:Pe,left:Pe,padding:Pe,paddingTop:Pe,paddingRight:Pe,paddingBottom:Pe,paddingLeft:Pe,margin:Pe,marginTop:Pe,marginRight:Pe,marginBottom:Pe,marginLeft:Pe,backgroundPositionX:Pe,backgroundPositionY:Pe,...U4,zIndex:Nw,fillOpacity:Jl,strokeOpacity:Jl,numOctaves:Nw},z4={...n0,color:Pt,backgroundColor:Pt,outlineColor:Pt,fill:Pt,stroke:Pt,borderColor:Pt,borderTopColor:Pt,borderRightColor:Pt,borderBottomColor:Pt,borderLeftColor:Pt,filter:Km,WebkitFilter:Km},q2=n=>z4[n];function W2(n,e){let t=q2(n);return t!==Km&&(t=ni),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const V4=new Set(["auto","none","0"]);function I4(n,e,t){let s=0,r;for(;s<n.length&&!r;){const a=n[s];typeof a=="string"&&!V4.has(a)&&ec(a).values.length&&(r=n[s]),s++}if(r&&t)for(const a of e)n[a]=W2(t,r)}class H4 extends e0{constructor(e,t,s,r,a){super(e,t,s,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),Yp(f))){const m=H2(f,t.current);m!==void 0&&(e[d]=m),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!G2.has(s)||e.length!==2)return;const[r,a]=e,l=Dw(r),u=Dw(a);if(l!==u)if(jw(l)&&jw(u))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else Vi[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let r=0;r<e.length;r++)(e[r]===null||P4(e[r]))&&s.push(r);s.length&&I4(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vi[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(s,r).jump(r,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const a=s.length-1,l=s[a];s[a]=Vi[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,d])=>{e.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function G4(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let s=document;const r=t?.[n]??s.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}const X2=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ow=30,$4=n=>!isNaN(parseFloat(n));class Y4{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,r=!0)=>{const a=Ds.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();r&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Ds.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=$4(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Ip);const s=this.events[e].add(t);return e==="change"?()=>{s(),vt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ds.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Ow)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Ow);return g2(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function lo(n,e){return new Y4(n,e)}const{schedule:r0}=T2(queueMicrotask,!1),gn={x:!1,y:!1};function K2(){return gn.x||gn.y}function q4(n){return n==="x"||n==="y"?gn[n]?null:(gn[n]=!0,()=>{gn[n]=!1}):gn.x||gn.y?null:(gn.x=gn.y=!0,()=>{gn.x=gn.y=!1})}function Q2(n,e){const t=G4(n),s=new AbortController,r={passive:!0,...e,signal:s.signal};return[t,r,()=>s.abort()]}function Mw(n){return!(n.pointerType==="touch"||K2())}function W4(n,e,t={}){const[s,r,a]=Q2(n,t),l=u=>{if(!Mw(u))return;const{target:d}=u,f=e(d,u);if(typeof f!="function"||!d)return;const m=v=>{Mw(v)&&(f(v),d.removeEventListener("pointerleave",m))};d.addEventListener("pointerleave",m,r)};return s.forEach(u=>{u.addEventListener("pointerenter",l,r)}),a}const Z2=(n,e)=>e?n===e?!0:Z2(n,e.parentElement):!1,i0=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,X4=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function K4(n){return X4.has(n.tagName)||n.tabIndex!==-1}const Sd=new WeakSet;function Rw(n){return e=>{e.key==="Enter"&&n(e)}}function Qg(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Q4=(n,e)=>{const t=n.currentTarget;if(!t)return;const s=Rw(()=>{if(Sd.has(t))return;Qg(t,"down");const r=Rw(()=>{Qg(t,"up")}),a=()=>Qg(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",s,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",s),e)};function Pw(n){return i0(n)&&!K2()}function Z4(n,e,t={}){const[s,r,a]=Q2(n,t),l=u=>{const d=u.currentTarget;if(!Pw(u))return;Sd.add(d);const f=e(d,u),m=(b,w)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",y),Sd.has(d)&&Sd.delete(d),Pw(b)&&typeof f=="function"&&f(b,{success:w})},v=b=>{m(b,d===window||d===document||t.useGlobalTarget||Z2(d,b.target))},y=b=>{m(b,!1)};window.addEventListener("pointerup",v,r),window.addEventListener("pointercancel",y,r)};return s.forEach(u=>{(t.useGlobalTarget?window:u).addEventListener("pointerdown",l,r),t0(u)&&(u.addEventListener("focus",f=>Q4(f,r)),!K4(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),a}function J2(n){return h2(n)&&"ownerSVGElement"in n}function J4(n){return J2(n)&&n.tagName==="svg"}const gs=n=>!!(n&&n.getVelocity),eM=[...Y2,Pt,ni],tM=n=>eM.find($2(n)),a0=j.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class sM extends j.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const s=t.offsetParent,r=t0(s)&&s.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=r-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function nM({children:n,isPresent:e,anchorX:t,root:s}){const r=j.useId(),a=j.useRef(null),l=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=j.useContext(a0);return j.useInsertionEffect(()=>{const{width:d,height:f,top:m,left:v,right:y}=l.current;if(e||!a.current||!d||!f)return;const b=t==="left"?`left: ${v}`:`right: ${y}`;a.current.dataset.motionPopId=r;const w=document.createElement("style");u&&(w.nonce=u);const _=s??document.head;return _.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${f}px !important;
            ${b}px !important;
            top: ${m}px !important;
          }
        `),()=>{_.removeChild(w),_.contains(w)&&_.removeChild(w)}},[e]),h.jsx(sM,{isPresent:e,childRef:a,sizeRef:l,children:j.cloneElement(n,{ref:a})})}const rM=({children:n,initial:e,isPresent:t,onExitComplete:s,custom:r,presenceAffectsLayout:a,mode:l,anchorX:u,root:d})=>{const f=Lp(iM),m=j.useId();let v=!0,y=j.useMemo(()=>(v=!1,{id:m,initial:e,isPresent:t,custom:r,onExitComplete:b=>{f.set(b,!0);for(const w of f.values())if(!w)return;s&&s()},register:b=>(f.set(b,!1),()=>f.delete(b))}),[t,f,s]);return a&&v&&(y={...y}),j.useMemo(()=>{f.forEach((b,w)=>f.set(w,!1))},[t]),j.useEffect(()=>{!t&&!f.size&&s&&s()},[t]),l==="popLayout"&&(n=h.jsx(nM,{isPresent:t,anchorX:u,root:d,children:n})),h.jsx(ah.Provider,{value:y,children:n})};function iM(){return new Map}function eS(n=!0){const e=j.useContext(ah);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:r}=e,a=j.useId();j.useEffect(()=>{if(n)return r(a)},[n]);const l=j.useCallback(()=>n&&s&&s(a),[a,s,n]);return!t&&s?[!1,l]:[!0]}const Gu=n=>n.key||"";function Lw(n){const e=[];return j.Children.forEach(n,t=>{j.isValidElement(t)&&e.push(t)}),e}const aM=({children:n,custom:e,initial:t=!0,onExitComplete:s,presenceAffectsLayout:r=!0,mode:a="sync",propagate:l=!1,anchorX:u="left",root:d})=>{const[f,m]=eS(l),v=j.useMemo(()=>Lw(n),[n]),y=l&&!f?[]:v.map(Gu),b=j.useRef(!0),w=j.useRef(v),_=Lp(()=>new Map),[T,S]=j.useState(v),[D,k]=j.useState(v);u2(()=>{b.current=!1,w.current=v;for(let L=0;L<D.length;L++){const A=Gu(D[L]);y.includes(A)?_.delete(A):_.get(A)!==!0&&_.set(A,!1)}},[D,y.length,y.join("-")]);const M=[];if(v!==T){let L=[...v];for(let A=0;A<D.length;A++){const B=D[A],Y=Gu(B);y.includes(Y)||(L.splice(A,0,B),M.push(B))}return a==="wait"&&M.length&&(L=M),k(Lw(L)),S(v),null}const{forceRender:N}=j.useContext(Pp);return h.jsx(h.Fragment,{children:D.map(L=>{const A=Gu(L),B=l&&!f?!1:v===D||y.includes(A),Y=()=>{if(_.has(A))_.set(A,!0);else return;let W=!0;_.forEach(K=>{K||(W=!1)}),W&&(N?.(),k(w.current),l&&m?.(),s&&s())};return h.jsx(rM,{isPresent:B,initial:!b.current||t?void 0:!1,custom:e,presenceAffectsLayout:r,mode:a,root:d,onExitComplete:B?void 0:Y,anchorX:u,children:L},A)})})},tS=j.createContext({strict:!1}),Bw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},co={};for(const n in Bw)co[n]={isEnabled:e=>Bw[n].some(t=>!!e[t])};function oM(n){for(const e in n)co[e]={...co[e],...n[e]}}const lM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ud(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||lM.has(n)}let sS=n=>!Ud(n);function cM(n){typeof n=="function"&&(sS=e=>e.startsWith("on")?!Ud(e):n(e))}try{cM(require("@emotion/is-prop-valid").default)}catch{}function uM(n,e,t){const s={};for(const r in n)r==="values"&&typeof n.values=="object"||(sS(r)||t===!0&&Ud(r)||!e&&!Ud(r)||n.draggable&&r.startsWith("onDrag"))&&(s[r]=n[r]);return s}function dM(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...s)=>n(...s);return new Proxy(t,{get:(s,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const oh=j.createContext({});function lh(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function tc(n){return typeof n=="string"||Array.isArray(n)}const o0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],l0=["initial",...o0];function ch(n){return lh(n.animate)||l0.some(e=>tc(n[e]))}function nS(n){return!!(ch(n)||n.variants)}function hM(n,e){if(ch(n)){const{initial:t,animate:s}=n;return{initial:t===!1||tc(t)?t:void 0,animate:tc(s)?s:void 0}}return n.inherit!==!1?e:{}}function fM(n){const{initial:e,animate:t}=hM(n,j.useContext(oh));return j.useMemo(()=>({initial:e,animate:t}),[Fw(e),Fw(t)])}function Fw(n){return Array.isArray(n)?n.join(" "):n}const gM=Symbol.for("motionComponentSymbol");function Ka(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function mM(n,e,t){return j.useCallback(s=>{s&&n.onMount&&n.onMount(s),e&&(s?e.mount(s):e.unmount()),t&&(typeof t=="function"?t(s):Ka(t)&&(t.current=s))},[e])}const c0=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),pM="framerAppearId",rS="data-"+c0(pM),iS=j.createContext({});function vM(n,e,t,s,r){const{visualElement:a}=j.useContext(oh),l=j.useContext(tS),u=j.useContext(ah),d=j.useContext(a0).reducedMotion,f=j.useRef(null);s=s||l.renderer,!f.current&&s&&(f.current=s(n,{visualState:e,parent:a,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const m=f.current,v=j.useContext(iS);m&&!m.projection&&r&&(m.type==="html"||m.type==="svg")&&yM(f.current,t,r,v);const y=j.useRef(!1);j.useInsertionEffect(()=>{m&&y.current&&m.update(t,u)});const b=t[rS],w=j.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return u2(()=>{m&&(y.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),r0.render(m.render),w.current&&m.animationState&&m.animationState.animateChanges())}),j.useEffect(()=>{m&&(!w.current&&m.animationState&&m.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),w.current=!1))}),m}function yM(n,e,t,s){const{layoutId:r,layout:a,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:f,layoutCrossfade:m}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:aS(n.parent)),n.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:!!l||u&&Ka(u),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:s,crossfade:m,layoutScroll:d,layoutRoot:f})}function aS(n){if(n)return n.options.allowProjection!==!1?n.projection:aS(n.parent)}function xM({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:s,Component:r}){n&&oM(n);function a(u,d){let f;const m={...j.useContext(a0),...u,layoutId:bM(u)},{isStatic:v}=m,y=fM(u),b=s(u,v);if(!v&&Bp){wM();const w=_M(m);f=w.MeasureLayout,y.visualElement=vM(r,b,m,e,w.ProjectionNode)}return h.jsxs(oh.Provider,{value:y,children:[f&&y.visualElement?h.jsx(f,{visualElement:y.visualElement,...m}):null,t(r,u,mM(b,y.visualElement,d),b,v,y.visualElement)]})}a.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const l=j.forwardRef(a);return l[gM]=r,l}function bM({layoutId:n}){const e=j.useContext(Pp).id;return e&&n!==void 0?e+"-"+n:n}function wM(n,e){j.useContext(tS).strict}function _M(n){const{drag:e,layout:t}=co;if(!e&&!t)return{};const s={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const sc={};function SM(n){for(const e in n)sc[e]=n[e],$p(e)&&(sc[e].isCSSVariable=!0)}function oS(n,{layout:e,layoutId:t}){return xo.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!sc[n]||n==="opacity")}const CM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TM=yo.length;function jM(n,e,t){let s="",r=!0;for(let a=0;a<TM;a++){const l=yo[a],u=n[l];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(l.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||t){const f=X2(u,n0[l]);if(!d){r=!1;const m=CM[l]||l;s+=`${m}(${f}) `}t&&(e[l]=f)}}return s=s.trim(),t?s=t(e,r?"":s):r&&(s="none"),s}function u0(n,e,t){const{style:s,vars:r,transformOrigin:a}=n;let l=!1,u=!1;for(const d in e){const f=e[d];if(xo.has(d)){l=!0;continue}else if($p(d)){r[d]=f;continue}else{const m=X2(f,n0[d]);d.startsWith("origin")?(u=!0,a[d]=m):s[d]=m}}if(e.transform||(l||t?s.transform=jM(e,n.transform,t):s.transform&&(s.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:m=0}=a;s.transformOrigin=`${d} ${f} ${m}`}}const d0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function lS(n,e,t){for(const s in e)!gs(e[s])&&!oS(s,t)&&(n[s]=e[s])}function EM({transformTemplate:n},e){return j.useMemo(()=>{const t=d0();return u0(t,e,n),Object.assign({},t.vars,t.style)},[e])}function kM(n,e){const t=n.style||{},s={};return lS(s,t,n),Object.assign(s,EM(n,e)),s}function AM(n,e){const t={},s=kM(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=s,t}const DM={offset:"stroke-dashoffset",array:"stroke-dasharray"},NM={offset:"strokeDashoffset",array:"strokeDasharray"};function OM(n,e,t=1,s=0,r=!0){n.pathLength=1;const a=r?DM:NM;n[a.offset]=Pe.transform(-s);const l=Pe.transform(e),u=Pe.transform(t);n[a.array]=`${l} ${u}`}function cS(n,{attrX:e,attrY:t,attrScale:s,pathLength:r,pathSpacing:a=1,pathOffset:l=0,...u},d,f,m){if(u0(n,u,f),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:y}=n;v.transform&&(y.transform=v.transform,delete v.transform),(y.transform||v.transformOrigin)&&(y.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),y.transform&&(y.transformBox=m?.transformBox??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),s!==void 0&&(v.scale=s),r!==void 0&&OM(v,r,a,l,!1)}const uS=()=>({...d0(),attrs:{}}),dS=n=>typeof n=="string"&&n.toLowerCase()==="svg";function MM(n,e,t,s){const r=j.useMemo(()=>{const a=uS();return cS(a,e,dS(s),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};lS(a,n.style,n),r.style={...a,...r.style}}return r}const RM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function h0(n){return typeof n!="string"||n.includes("-")?!1:!!(RM.indexOf(n)>-1||/[A-Z]/u.test(n))}function PM(n=!1){return(t,s,r,{latestValues:a},l)=>{const d=(h0(t)?MM:AM)(s,a,l,t),f=uM(s,typeof t=="string",n),m=t!==j.Fragment?{...f,...d,ref:r}:{},{children:v}=s,y=j.useMemo(()=>gs(v)?v.get():v,[v]);return j.createElement(t,{...m,children:y})}}function Uw(n){const e=[{},{}];return n?.values.forEach((t,s)=>{e[0][s]=t.get(),e[1][s]=t.getVelocity()}),e}function f0(n,e,t,s){if(typeof e=="function"){const[r,a]=Uw(s);e=e(t!==void 0?t:n.custom,r,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,a]=Uw(s);e=e(t!==void 0?t:n.custom,r,a)}return e}function Cd(n){return gs(n)?n.get():n}function LM({scrapeMotionValuesFromProps:n,createRenderState:e},t,s,r){return{latestValues:BM(t,s,r,n),renderState:e()}}const hS=n=>(e,t)=>{const s=j.useContext(oh),r=j.useContext(ah),a=()=>LM(n,e,s,r);return t?a():Lp(a)};function BM(n,e,t,s){const r={},a=s(n,{});for(const y in a)r[y]=Cd(a[y]);let{initial:l,animate:u}=n;const d=ch(n),f=nS(n);e&&f&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let m=t?t.initial===!1:!1;m=m||l===!1;const v=m?u:l;if(v&&typeof v!="boolean"&&!lh(v)){const y=Array.isArray(v)?v:[v];for(let b=0;b<y.length;b++){const w=f0(n,y[b]);if(w){const{transitionEnd:_,transition:T,...S}=w;for(const D in S){let k=S[D];if(Array.isArray(k)){const M=m?k.length-1:0;k=k[M]}k!==null&&(r[D]=k)}for(const D in _)r[D]=_[D]}}}return r}function g0(n,e,t){const{style:s}=n,r={};for(const a in s)(gs(s[a])||e.style&&gs(e.style[a])||oS(a,n)||t?.getValue(a)?.liveStyle!==void 0)&&(r[a]=s[a]);return r}const FM={useVisualState:hS({scrapeMotionValuesFromProps:g0,createRenderState:d0})};function fS(n,e,t){const s=g0(n,e,t);for(const r in n)if(gs(n[r])||gs(e[r])){const a=yo.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[a]=n[r]}return s}const UM={useVisualState:hS({scrapeMotionValuesFromProps:fS,createRenderState:uS})};function zM(n,e){return function(s,{forwardMotionProps:r}={forwardMotionProps:!1}){const l={...h0(s)?UM:FM,preloadedFeatures:n,useRender:PM(r),createVisualElement:e,Component:s};return xM(l)}}function nc(n,e,t){const s=n.getProps();return f0(s,e,t!==void 0?t:s.custom,n)}const Qm=n=>Array.isArray(n);function VM(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,lo(t))}function IM(n){return Qm(n)?n[n.length-1]||0:n}function HM(n,e){const t=nc(n,e);let{transitionEnd:s={},transition:r={},...a}=t||{};a={...a,...s};for(const l in a){const u=IM(a[l]);VM(n,l,u)}}function GM(n){return!!(gs(n)&&n.add)}function Zm(n,e){const t=n.getValue("willChange");if(GM(t))return t.add(e);if(!t&&vr.WillChange){const s=new vr.WillChange("auto");n.addValue("willChange",s),s.add(e)}}function gS(n){return n.props[rS]}const $M=n=>n!==null;function YM(n,{repeat:e,repeatType:t="loop"},s){const r=n.filter($M),a=e&&t!=="loop"&&e%2===1?0:r.length-1;return r[a]}const qM={type:"spring",stiffness:500,damping:25,restSpeed:10},WM=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),XM={type:"keyframes",duration:.8},KM={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},QM=(n,{keyframes:e})=>e.length>2?XM:xo.has(n)?n.startsWith("scale")?WM(e[1]):qM:KM;function ZM({when:n,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:r,repeat:a,repeatType:l,repeatDelay:u,from:d,elapsed:f,...m}){return!!Object.keys(m).length}const m0=(n,e,t,s={},r,a)=>l=>{const u=s0(s,n)||{},d=u.delay||s.delay||0;let{elapsed:f=0}=s;f=f-Pn(d);const m={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:y=>{e.set(y),u.onUpdate&&u.onUpdate(y)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:n,motionValue:e,element:a?void 0:r};ZM(u)||Object.assign(m,QM(n,m)),m.duration&&(m.duration=Pn(m.duration)),m.repeatDelay&&(m.repeatDelay=Pn(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let v=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(v=!0)),(vr.instantAnimations||vr.skipAnimations)&&(v=!0,m.duration=0,m.delay=0),m.allowFlatten=!u.type&&!u.ease,v&&!a&&e.get()!==void 0){const y=YM(m.keyframes,u);if(y!==void 0){vt.update(()=>{m.onUpdate(y),m.onComplete()});return}}return u.isSync?new Jp(m):new N4(m)};function JM({protectedKeys:n,needsAnimating:e},t){const s=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function mS(n,e,{delay:t=0,transitionOverride:s,type:r}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:l,...u}=e;s&&(a=s);const d=[],f=r&&n.animationState&&n.animationState.getState()[r];for(const m in u){const v=n.getValue(m,n.latestValues[m]??null),y=u[m];if(y===void 0||f&&JM(f,m))continue;const b={delay:t,...s0(a||{},m)},w=v.get();if(w!==void 0&&!v.isAnimating&&!Array.isArray(y)&&y===w&&!b.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const S=gS(n);if(S){const D=window.MotionHandoffAnimation(S,m,vt);D!==null&&(b.startTime=D,_=!0)}}Zm(n,m),v.start(m0(m,v,y,n.shouldReduceMotion&&G2.has(m)?{type:!1}:b,n,_));const T=v.animation;T&&d.push(T)}return l&&Promise.all(d).then(()=>{vt.update(()=>{l&&HM(n,l)})}),d}function Jm(n,e,t={}){const s=nc(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(r=t.transitionOverride);const a=s?()=>Promise.all(mS(n,s,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:v}=r;return e3(n,e,d,f,m,v,t)}:()=>Promise.resolve(),{when:u}=r;if(u){const[d,f]=u==="beforeChildren"?[a,l]:[l,a];return d().then(()=>f())}else return Promise.all([a(),l(t.delay)])}function e3(n,e,t=0,s=0,r=0,a=1,l){const u=[],d=n.variantChildren.size,f=(d-1)*r,m=typeof s=="function",v=m?y=>s(y,d):a===1?(y=0)=>y*r:(y=0)=>f-y*r;return Array.from(n.variantChildren).sort(t3).forEach((y,b)=>{y.notify("AnimationStart",e),u.push(Jm(y,e,{...l,delay:t+(m?0:s)+v(b)}).then(()=>y.notify("AnimationComplete",e)))}),Promise.all(u)}function t3(n,e){return n.sortNodePosition(e)}function s3(n,e,t={}){n.notify("AnimationStart",e);let s;if(Array.isArray(e)){const r=e.map(a=>Jm(n,a,t));s=Promise.all(r)}else if(typeof e=="string")s=Jm(n,e,t);else{const r=typeof e=="function"?nc(n,e,t.custom):e;s=Promise.all(mS(n,r,t))}return s.then(()=>{n.notify("AnimationComplete",e)})}function pS(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let s=0;s<t;s++)if(e[s]!==n[s])return!1;return!0}const n3=l0.length;function vS(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?vS(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<n3;t++){const s=l0[t],r=n.props[s];(tc(r)||r===!1)&&(e[s]=r)}return e}const r3=[...o0].reverse(),i3=o0.length;function a3(n){return e=>Promise.all(e.map(({animation:t,options:s})=>s3(n,t,s)))}function o3(n){let e=a3(n),t=zw(),s=!0;const r=d=>(f,m)=>{const v=nc(n,m,d==="exit"?n.presenceContext?.custom:void 0);if(v){const{transition:y,transitionEnd:b,...w}=v;f={...f,...w,...b}}return f};function a(d){e=d(n)}function l(d){const{props:f}=n,m=vS(n.parent)||{},v=[],y=new Set;let b={},w=1/0;for(let T=0;T<i3;T++){const S=r3[T],D=t[S],k=f[S]!==void 0?f[S]:m[S],M=tc(k),N=S===d?D.isActive:null;N===!1&&(w=T);let L=k===m[S]&&k!==f[S]&&M;if(L&&s&&n.manuallyAnimateOnMount&&(L=!1),D.protectedKeys={...b},!D.isActive&&N===null||!k&&!D.prevProp||lh(k)||typeof k=="boolean")continue;const A=l3(D.prevProp,k);let B=A||S===d&&D.isActive&&!L&&M||T>w&&M,Y=!1;const W=Array.isArray(k)?k:[k];let K=W.reduce(r(S),{});N===!1&&(K={});const{prevResolvedValues:q={}}=D,oe={...q,...K},re=$=>{B=!0,y.has($)&&(Y=!0,y.delete($)),D.needsAnimating[$]=!0;const I=n.getValue($);I&&(I.liveStyle=!1)};for(const $ in oe){const I=K[$],te=q[$];if(b.hasOwnProperty($))continue;let O=!1;Qm(I)&&Qm(te)?O=!pS(I,te):O=I!==te,O?I!=null?re($):y.add($):I!==void 0&&y.has($)?re($):D.protectedKeys[$]=!0}D.prevProp=k,D.prevResolvedValues=K,D.isActive&&(b={...b,...K}),s&&n.blockInitialAnimation&&(B=!1),B&&(!(L&&A)||Y)&&v.push(...W.map($=>({animation:$,options:{type:S}})))}if(y.size){const T={};if(typeof f.initial!="boolean"){const S=nc(n,Array.isArray(f.initial)?f.initial[0]:f.initial);S&&S.transition&&(T.transition=S.transition)}y.forEach(S=>{const D=n.getBaseTarget(S),k=n.getValue(S);k&&(k.liveStyle=!0),T[S]=D??null}),v.push({animation:T})}let _=!!v.length;return s&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(_=!1),s=!1,_?e(v):Promise.resolve()}function u(d,f){if(t[d].isActive===f)return Promise.resolve();n.variantChildren?.forEach(v=>v.animationState?.setActive(d,f)),t[d].isActive=f;const m=l(d);for(const v in t)t[v].protectedKeys={};return m}return{animateChanges:l,setActive:u,setAnimateFunction:a,getState:()=>t,reset:()=>{t=zw(),s=!0}}}function l3(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!pS(e,n):!1}function ki(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zw(){return{animate:ki(!0),whileInView:ki(),whileHover:ki(),whileTap:ki(),whileDrag:ki(),whileFocus:ki(),exit:ki()}}class li{constructor(e){this.isMounted=!1,this.node=e}update(){}}class c3 extends li{constructor(e){super(e),e.animationState||(e.animationState=o3(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();lh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let u3=0;class d3 extends li{constructor(){super(...arguments),this.id=u3++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const h3={animation:{Feature:c3},exit:{Feature:d3}};function rc(n,e,t,s={passive:!0}){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t)}function xc(n){return{point:{x:n.pageX,y:n.pageY}}}const f3=n=>e=>i0(e)&&n(e,xc(e));function Il(n,e,t,s){return rc(n,e,f3(t),s)}function yS({top:n,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:n,max:s}}}function g3({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function m3(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),s=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}const xS=1e-4,p3=1-xS,v3=1+xS,bS=.01,y3=0-bS,x3=0+bS;function xs(n){return n.max-n.min}function b3(n,e,t){return Math.abs(n-e)<=t}function Vw(n,e,t,s=.5){n.origin=s,n.originPoint=_t(e.min,e.max,n.origin),n.scale=xs(t)/xs(e),n.translate=_t(t.min,t.max,n.origin)-n.originPoint,(n.scale>=p3&&n.scale<=v3||isNaN(n.scale))&&(n.scale=1),(n.translate>=y3&&n.translate<=x3||isNaN(n.translate))&&(n.translate=0)}function Hl(n,e,t,s){Vw(n.x,e.x,t.x,s?s.originX:void 0),Vw(n.y,e.y,t.y,s?s.originY:void 0)}function Iw(n,e,t){n.min=t.min+e.min,n.max=n.min+xs(e)}function w3(n,e,t){Iw(n.x,e.x,t.x),Iw(n.y,e.y,t.y)}function Hw(n,e,t){n.min=e.min-t.min,n.max=n.min+xs(e)}function Gl(n,e,t){Hw(n.x,e.x,t.x),Hw(n.y,e.y,t.y)}const Gw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Qa=()=>({x:Gw(),y:Gw()}),$w=()=>({min:0,max:0}),Dt=()=>({x:$w(),y:$w()});function nn(n){return[n("x"),n("y")]}function Zg(n){return n===void 0||n===1}function ep({scale:n,scaleX:e,scaleY:t}){return!Zg(n)||!Zg(e)||!Zg(t)}function Di(n){return ep(n)||wS(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function wS(n){return Yw(n.x)||Yw(n.y)}function Yw(n){return n&&n!=="0%"}function zd(n,e,t){const s=n-t,r=e*s;return t+r}function qw(n,e,t,s,r){return r!==void 0&&(n=zd(n,r,s)),zd(n,t,s)+e}function tp(n,e=0,t=1,s,r){n.min=qw(n.min,e,t,s,r),n.max=qw(n.max,e,t,s,r)}function _S(n,{x:e,y:t}){tp(n.x,e.translate,e.scale,e.originPoint),tp(n.y,t.translate,t.scale,t.originPoint)}const Ww=.999999999999,Xw=1.0000000000001;function _3(n,e,t,s=!1){const r=t.length;if(!r)return;e.x=e.y=1;let a,l;for(let u=0;u<r;u++){a=t[u],l=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ja(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,_S(n,l)),s&&Di(a.latestValues)&&Ja(n,a.latestValues))}e.x<Xw&&e.x>Ww&&(e.x=1),e.y<Xw&&e.y>Ww&&(e.y=1)}function Za(n,e){n.min=n.min+e,n.max=n.max+e}function Kw(n,e,t,s,r=.5){const a=_t(n.min,n.max,r);tp(n,e,t,a,s)}function Ja(n,e){Kw(n.x,e.x,e.scaleX,e.scale,e.originX),Kw(n.y,e.y,e.scaleY,e.scale,e.originY)}function SS(n,e){return yS(m3(n.getBoundingClientRect(),e))}function S3(n,e,t){const s=SS(n,t),{scroll:r}=e;return r&&(Za(s.x,r.offset.x),Za(s.y,r.offset.y)),s}const CS=({current:n})=>n?n.ownerDocument.defaultView:null,Qw=(n,e)=>Math.abs(n-e);function C3(n,e){const t=Qw(n.x,e.x),s=Qw(n.y,e.y);return Math.sqrt(t**2+s**2)}class TS{constructor(e,t,{transformPagePoint:s,contextWindow:r=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=em(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,w=C3(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!w)return;const{point:_}=y,{timestamp:T}=is;this.history.push({..._,timestamp:T});const{onStart:S,onMove:D}=this.handlers;b||(S&&S(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,y)},this.handlePointerMove=(y,b)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Jg(b,this.transformPagePoint),vt.update(this.updatePoint,!0)},this.handlePointerUp=(y,b)=>{this.end();const{onEnd:w,onSessionEnd:_,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=em(y.type==="pointercancel"?this.lastMoveEventInfo:Jg(b,this.transformPagePoint),this.history);this.startEvent&&w&&w(y,S),_&&_(y,S)},!i0(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=s,this.distanceThreshold=l,this.contextWindow=r||window;const u=xc(e),d=Jg(u,this.transformPagePoint),{point:f}=d,{timestamp:m}=is;this.history=[{...f,timestamp:m}];const{onSessionStart:v}=t;v&&v(e,em(d,this.history)),this.removeListeners=pc(Il(this.contextWindow,"pointermove",this.handlePointerMove),Il(this.contextWindow,"pointerup",this.handlePointerUp),Il(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),si(this.updatePoint)}}function Jg(n,e){return e?{point:e(n.point)}:n}function Zw(n,e){return{x:n.x-e.x,y:n.y-e.y}}function em({point:n},e){return{point:n,delta:Zw(n,jS(e)),offset:Zw(n,T3(e)),velocity:j3(e,.1)}}function T3(n){return n[0]}function jS(n){return n[n.length-1]}function j3(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,s=null;const r=jS(n);for(;t>=0&&(s=n[t],!(r.timestamp-s.timestamp>Pn(e)));)t--;if(!s)return{x:0,y:0};const a=Ln(r.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const l={x:(r.x-s.x)/a,y:(r.y-s.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function E3(n,{min:e,max:t},s){return e!==void 0&&n<e?n=s?_t(e,n,s.min):Math.max(n,e):t!==void 0&&n>t&&(n=s?_t(t,n,s.max):Math.min(n,t)),n}function Jw(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function k3(n,{top:e,left:t,bottom:s,right:r}){return{x:Jw(n.x,t,r),y:Jw(n.y,e,s)}}function e1(n,e){let t=e.min-n.min,s=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,s]=[s,t]),{min:t,max:s}}function A3(n,e){return{x:e1(n.x,e.x),y:e1(n.y,e.y)}}function D3(n,e){let t=.5;const s=xs(n),r=xs(e);return r>s?t=Zl(e.min,e.max-s,n.min):s>r&&(t=Zl(n.min,n.max-r,e.min)),pr(0,1,t)}function N3(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const sp=.35;function O3(n=sp){return n===!1?n=0:n===!0&&(n=sp),{x:t1(n,"left","right"),y:t1(n,"top","bottom")}}function t1(n,e,t){return{min:s1(n,e),max:s1(n,t)}}function s1(n,e){return typeof n=="number"?n:n[e]||0}const M3=new WeakMap;class R3{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:s}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=v=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(xc(v).point)},l=(v,y)=>{const{drag:b,dragPropagation:w,onDragStart:_}=this.getProps();if(b&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=q4(b),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nn(S=>{let D=this.getAxisMotionValue(S).get()||0;if(Bn.test(D)){const{projection:k}=this.visualElement;if(k&&k.layout){const M=k.layout.layoutBox[S];M&&(D=xs(M)*(parseFloat(D)/100))}}this.originPoint[S]=D}),_&&vt.postRender(()=>_(v,y)),Zm(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},u=(v,y)=>{this.latestPointerEvent=v,this.latestPanInfo=y;const{dragPropagation:b,dragDirectionLock:w,onDirectionLock:_,onDrag:T}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:S}=y;if(w&&this.currentDirection===null){this.currentDirection=P3(S),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",y.point,S),this.updateAxis("y",y.point,S),this.visualElement.render(),T&&T(v,y)},d=(v,y)=>{this.latestPointerEvent=v,this.latestPanInfo=y,this.stop(v,y),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>nn(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new TS(e,{onSessionStart:a,onStart:l,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:s,contextWindow:CS(this.visualElement)})}stop(e,t){const s=e||this.latestPointerEvent,r=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!r||!s)return;const{velocity:l}=r;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&vt.postRender(()=>u(s,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:r}=this.getProps();if(!s||!$u(e,r,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(l=E3(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&Ka(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=k3(s.layoutBox,e):this.constraints=!1,this.elastic=O3(t),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&nn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=N3(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ka(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=S3(s,r.root,this.visualElement.getTransformPagePoint());let l=A3(r.layout.layoutBox,a);if(t){const u=t(g3(l));this.hasMutatedConstraints=!!u,u&&(l=yS(u))}return l}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:r,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=nn(m=>{if(!$u(m,t,this.currentDirection))return;let v=d&&d[m]||{};l&&(v={min:0,max:0});const y=r?200:1e6,b=r?40:1e7,w={type:"inertia",velocity:s?e[m]:0,bounceStiffness:y,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...v};return this.startAxisValueAnimation(m,w)});return Promise.all(f).then(u)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return Zm(this.visualElement,e),s.start(m0(e,s,0,t,this.visualElement,!1))}stopAnimation(){nn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){nn(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),r=s[t];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){nn(t=>{const{drag:s}=this.getProps();if(!$u(t,s,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(t);if(r&&r.layout){const{min:l,max:u}=r.layout.layoutBox[t];a.set(e[t]-_t(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!Ka(t)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};nn(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();r[l]=D3({min:d,max:d},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),nn(l=>{if(!$u(l,e,null))return;const u=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];u.set(_t(d,f,r[l]))})}addListeners(){if(!this.visualElement.current)return;M3.set(this.visualElement,this);const e=this.visualElement.current,t=Il(e,"pointerdown",d=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(d)}),s=()=>{const{dragConstraints:d}=this.getProps();Ka(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,a=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),vt.read(s);const l=rc(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(nn(m=>{const v=this.getAxisMotionValue(m);v&&(this.originPoint[m]+=d[m].translate,v.set(v.get()+d[m].translate))}),this.visualElement.render())});return()=>{l(),t(),a(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:l=sp,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:r,dragConstraints:a,dragElastic:l,dragMomentum:u}}}function $u(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function P3(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class L3 extends li{constructor(e){super(e),this.removeGroupControls=an,this.removeListeners=an,this.controls=new R3(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||an}unmount(){this.removeGroupControls(),this.removeListeners()}}const n1=n=>(e,t)=>{n&&vt.postRender(()=>n(e,t))};class B3 extends li{constructor(){super(...arguments),this.removePointerDownListener=an}onPointerDown(e){this.session=new TS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:CS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:n1(e),onStart:n1(t),onMove:s,onEnd:(a,l)=>{delete this.session,r&&vt.postRender(()=>r(a,l))}}}mount(){this.removePointerDownListener=Il(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Td={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function r1(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const kl={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Pe.test(n))n=parseFloat(n);else return n;const t=r1(n,e.target.x),s=r1(n,e.target.y);return`${t}% ${s}%`}},F3={correct:(n,{treeScale:e,projectionDelta:t})=>{const s=n,r=ni.parse(n);if(r.length>5)return s;const a=ni.createTransformer(n),l=typeof r[0]!="number"?1:0,u=t.x.scale*e.x,d=t.y.scale*e.y;r[0+l]/=u,r[1+l]/=d;const f=_t(u,d,.5);return typeof r[2+l]=="number"&&(r[2+l]/=f),typeof r[3+l]=="number"&&(r[3+l]/=f),a(r)}};let i1=!1;class U3 extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:r}=this.props,{projection:a}=e;SM(z3),a&&(t.group&&t.group.add(a),s&&s.register&&r&&s.register(a),i1&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Td.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:r,isPresent:a}=this.props,{projection:l}=s;return l&&(l.isPresent=a,i1=!0,r||e.layoutDependency!==t||t===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||vt.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),r0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ES(n){const[e,t]=eS(),s=j.useContext(Pp);return h.jsx(U3,{...n,layoutGroup:s,switchLayoutGroup:j.useContext(iS),isPresent:e,safeToRemove:t})}const z3={borderRadius:{...kl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:kl,borderTopRightRadius:kl,borderBottomLeftRadius:kl,borderBottomRightRadius:kl,boxShadow:F3};function V3(n,e,t){const s=gs(n)?n:lo(n);return s.start(m0("",s,e,t)),s.animation}const I3=(n,e)=>n.depth-e.depth;class H3{constructor(){this.children=[],this.isDirty=!1}add(e){Fp(this.children,e),this.isDirty=!0}remove(e){Up(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(I3),this.isDirty=!1,this.children.forEach(e)}}function G3(n,e){const t=Ds.now(),s=({timestamp:r})=>{const a=r-t;a>=e&&(si(s),n(a-e))};return vt.setup(s,!0),()=>si(s)}const kS=["TopLeft","TopRight","BottomLeft","BottomRight"],$3=kS.length,a1=n=>typeof n=="string"?parseFloat(n):n,o1=n=>typeof n=="number"||Pe.test(n);function Y3(n,e,t,s,r,a){r?(n.opacity=_t(0,t.opacity??1,q3(s)),n.opacityExit=_t(e.opacity??1,0,W3(s))):a&&(n.opacity=_t(e.opacity??1,t.opacity??1,s));for(let l=0;l<$3;l++){const u=`border${kS[l]}Radius`;let d=l1(e,u),f=l1(t,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||o1(d)===o1(f)?(n[u]=Math.max(_t(a1(d),a1(f),s),0),(Bn.test(f)||Bn.test(d))&&(n[u]+="%")):n[u]=f}(e.rotate||t.rotate)&&(n.rotate=_t(e.rotate||0,t.rotate||0,s))}function l1(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const q3=AS(0,.5,w2),W3=AS(.5,.95,an);function AS(n,e,t){return s=>s<n?0:s>e?1:t(Zl(n,e,s))}function c1(n,e){n.min=e.min,n.max=e.max}function tn(n,e){c1(n.x,e.x),c1(n.y,e.y)}function u1(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function d1(n,e,t,s,r){return n-=e,n=zd(n,1/t,s),r!==void 0&&(n=zd(n,1/r,s)),n}function X3(n,e=0,t=1,s=.5,r,a=n,l=n){if(Bn.test(e)&&(e=parseFloat(e),e=_t(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=_t(a.min,a.max,s);n===a&&(u-=e),n.min=d1(n.min,e,t,u,r),n.max=d1(n.max,e,t,u,r)}function h1(n,e,[t,s,r],a,l){X3(n,e[t],e[s],e[r],e.scale,a,l)}const K3=["x","scaleX","originX"],Q3=["y","scaleY","originY"];function f1(n,e,t,s){h1(n.x,e,K3,t?t.x:void 0,s?s.x:void 0),h1(n.y,e,Q3,t?t.y:void 0,s?s.y:void 0)}function g1(n){return n.translate===0&&n.scale===1}function DS(n){return g1(n.x)&&g1(n.y)}function m1(n,e){return n.min===e.min&&n.max===e.max}function Z3(n,e){return m1(n.x,e.x)&&m1(n.y,e.y)}function p1(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function NS(n,e){return p1(n.x,e.x)&&p1(n.y,e.y)}function v1(n){return xs(n.x)/xs(n.y)}function y1(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class J3{constructor(){this.members=[]}add(e){Fp(this.members,e),e.scheduleRender()}remove(e){if(Up(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let s;for(let r=t;r>=0;r--){const a=this.members[r];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function e5(n,e,t){let s="";const r=n.x.translate/e.x,a=n.y.translate/e.y,l=t?.z||0;if((r||a||l)&&(s=`translate3d(${r}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:m,rotateX:v,rotateY:y,skewX:b,skewY:w}=t;f&&(s=`perspective(${f}px) ${s}`),m&&(s+=`rotate(${m}deg) `),v&&(s+=`rotateX(${v}deg) `),y&&(s+=`rotateY(${y}deg) `),b&&(s+=`skewX(${b}deg) `),w&&(s+=`skewY(${w}deg) `)}const u=n.x.scale*e.x,d=n.y.scale*e.y;return(u!==1||d!==1)&&(s+=`scale(${u}, ${d})`),s||"none"}const tm=["","X","Y","Z"],t5=1e3;let s5=0;function sm(n,e,t,s){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),s&&(s[n]=0))}function OS(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=gS(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",vt,!(r||a))}const{parent:s}=n;s&&!s.hasCheckedOptimisedAppear&&OS(s)}function MS({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(l={},u=e?.()){this.id=s5++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(i5),this.nodes.forEach(c5),this.nodes.forEach(u5),this.nodes.forEach(a5)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new H3)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Ip),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=J2(l)&&!J4(l),this.instance=l;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),n){let m,v=0;const y=()=>this.root.updateBlockedByResize=!1;vt.read(()=>{v=window.innerWidth}),n(l,()=>{const b=window.innerWidth;b!==v&&(v=b,this.root.updateBlockedByResize=!0,m&&m(),m=G3(y,250),Td.hasAnimatedSinceResize&&(Td.hasAnimatedSinceResize=!1,this.nodes.forEach(w1)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:v,hasRelativeLayoutChanged:y,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||f.getDefaultTransition()||m5,{onLayoutAnimationStart:_,onLayoutAnimationComplete:T}=f.getProps(),S=!this.targetLayout||!NS(this.targetLayout,b),D=!v&&y;if(this.options.layoutRoot||this.resumeFrom||D||v&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...s0(w,"layout"),onPlay:_,onComplete:T};(f.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(m,D)}else v||w1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),si(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(d5),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&OS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const v=this.path[m];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(x1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(b1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(l5),this.nodes.forEach(n5),this.nodes.forEach(r5)):this.nodes.forEach(b1),this.clearAllSnapshots();const u=Ds.now();is.delta=pr(0,1e3/60,u-is.timestamp),is.timestamp=u,is.isProcessing=!0,Yg.update.process(is),Yg.preRender.process(is),Yg.render.process(is),is.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,r0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(o5),this.sharedNodes.forEach(h5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,vt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){vt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!xs(this.snapshot.measuredBox.x)&&!xs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const d=s(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!DS(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;l&&this.instance&&(u||Di(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),p5(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Dt();const u=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(v5))){const{scroll:f}=this.root;f&&(Za(u.x,f.offset.x),Za(u.y,f.offset.y))}return u}removeElementScroll(l){const u=Dt();if(tn(u,l),this.scroll?.wasRoot)return u;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:m,options:v}=f;f!==this.root&&m&&v.layoutScroll&&(m.wasRoot&&tn(u,l),Za(u.x,m.offset.x),Za(u.y,m.offset.y))}return u}applyTransform(l,u=!1){const d=Dt();tn(d,l);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Ja(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Di(m.latestValues)&&Ja(d,m.latestValues)}return Di(this.latestValues)&&Ja(d,this.latestValues),d}removeTransform(l){const u=Dt();tn(u,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Di(f.latestValues))continue;ep(f.latestValues)&&f.updateSnapshot();const m=Dt(),v=f.measurePageBox();tn(m,v),f1(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return Di(this.latestValues)&&f1(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==is.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:v}=this.options;if(!(!this.layout||!(m||v))){if(this.resolvedRelativeTargetAt=is.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),Gl(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),tn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Dt(),this.targetWithTransforms=Dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),w3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):tn(this.target,this.layout.layoutBox),_S(this.target,this.targetDelta)):tn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),Gl(this.relativeTargetOrigin,this.target,y.target),tn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ep(this.parent.latestValues)||wS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===is.timestamp&&(d=!1),d)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;tn(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,y=this.treeScale.y;_3(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Dt());const{target:b}=l;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(u1(this.prevProjectionDelta.x,this.projectionDelta.x),u1(this.prevProjectionDelta.y,this.projectionDelta.y)),Hl(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==y||!y1(this.projectionDelta.x,this.prevProjectionDelta.x)||!y1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Qa(),this.projectionDelta=Qa(),this.projectionDeltaWithTransform=Qa()}setAnimationOrigin(l,u=!1){const d=this.snapshot,f=d?d.latestValues:{},m={...this.latestValues},v=Qa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const y=Dt(),b=d?d.source:void 0,w=this.layout?this.layout.source:void 0,_=b!==w,T=this.getStack(),S=!T||T.members.length<=1,D=!!(_&&!S&&this.options.crossfade===!0&&!this.path.some(g5));this.animationProgress=0;let k;this.mixTargetDelta=M=>{const N=M/1e3;_1(v.x,l.x,N),_1(v.y,l.y,N),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Gl(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),f5(this.relativeTarget,this.relativeTargetOrigin,y,N),k&&Z3(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Dt()),tn(k,this.relativeTarget)),_&&(this.animationValues=m,Y3(m,f,this.latestValues,N,D,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(si(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=vt.update(()=>{Td.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=lo(0)),this.currentAnimation=V3(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(t5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:m}=l;if(!(!u||!d||!f)){if(this!==l&&this.layout&&f&&RS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||Dt();const v=xs(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const y=xs(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+y}tn(u,d),Ja(u,m),Hl(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new J3),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&sm("z",l,f,this.animationValues);for(let m=0;m<tm.length;m++)sm(`rotate${tm[m]}`,l,f,this.animationValues),sm(`skew${tm[m]}`,l,f,this.animationValues);l.render();for(const m in f)l.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Cd(u?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Cd(u?.pointerEvents)||""),this.hasProjected&&!Di(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const m=f.animationValues||f.latestValues;this.applyTransformsToTarget();let v=e5(this.projectionDeltaWithTransform,this.treeScale,m);d&&(v=d(m,v)),l.transform=v;const{x:y,y:b}=this.projectionDelta;l.transformOrigin=`${y.origin*100}% ${b.origin*100}% 0`,f.animationValues?l.opacity=f===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:l.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const w in sc){if(m[w]===void 0)continue;const{correct:_,applyTo:T,isCSSVariable:S}=sc[w],D=v==="none"?m[w]:_(m[w],f);if(T){const k=T.length;for(let M=0;M<k;M++)l[T[M]]=D}else S?this.options.visualElement.renderState.vars[w]=D:l[w]=D}this.options.layoutId&&(l.pointerEvents=f===this?Cd(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(x1),this.root.sharedNodes.clear()}}}function n5(n){n.updateLayout()}function r5(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:s}=n.layout,{animationType:r}=n.options,a=e.source!==n.layout.source;r==="size"?nn(m=>{const v=a?e.measuredBox[m]:e.layoutBox[m],y=xs(v);v.min=t[m].min,v.max=v.min+y}):RS(r,e.layoutBox,t)&&nn(m=>{const v=a?e.measuredBox[m]:e.layoutBox[m],y=xs(t[m]);v.max=v.min+y,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[m].max=n.relativeTarget[m].min+y)});const l=Qa();Hl(l,t,e.layoutBox);const u=Qa();a?Hl(u,n.applyTransform(s,!0),e.measuredBox):Hl(u,t,e.layoutBox);const d=!DS(l);let f=!1;if(!n.resumeFrom){const m=n.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:v,layout:y}=m;if(v&&y){const b=Dt();Gl(b,e.layoutBox,v.layoutBox);const w=Dt();Gl(w,t,y.layoutBox),NS(b,w)||(f=!0),m.options.layoutRoot&&(n.relativeTarget=w,n.relativeTargetOrigin=b,n.relativeParent=m)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function i5(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function a5(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function o5(n){n.clearSnapshot()}function x1(n){n.clearMeasurements()}function b1(n){n.isLayoutDirty=!1}function l5(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function w1(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function c5(n){n.resolveTargetDelta()}function u5(n){n.calcProjection()}function d5(n){n.resetSkewAndRotation()}function h5(n){n.removeLeadSnapshot()}function _1(n,e,t){n.translate=_t(e.translate,0,t),n.scale=_t(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function S1(n,e,t,s){n.min=_t(e.min,t.min,s),n.max=_t(e.max,t.max,s)}function f5(n,e,t,s){S1(n.x,e.x,t.x,s),S1(n.y,e.y,t.y,s)}function g5(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const m5={duration:.45,ease:[.4,0,.1,1]},C1=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),T1=C1("applewebkit/")&&!C1("chrome/")?Math.round:an;function j1(n){n.min=T1(n.min),n.max=T1(n.max)}function p5(n){j1(n.x),j1(n.y)}function RS(n,e,t){return n==="position"||n==="preserve-aspect"&&!b3(v1(e),v1(t),.2)}function v5(n){return n!==n.root&&n.scroll?.wasRoot}const y5=MS({attachResizeListener:(n,e)=>rc(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nm={current:void 0},PS=MS({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!nm.current){const n=new y5({});n.mount(window),n.setOptions({layoutScroll:!0}),nm.current=n}return nm.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),x5={pan:{Feature:B3},drag:{Feature:L3,ProjectionNode:PS,MeasureLayout:ES}};function E1(n,e,t){const{props:s}=n;n.animationState&&s.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,a=s[r];a&&vt.postRender(()=>a(e,xc(e)))}class b5 extends li{mount(){const{current:e}=this.node;e&&(this.unmount=W4(e,(t,s)=>(E1(this.node,s,"Start"),r=>E1(this.node,r,"End"))))}unmount(){}}class w5 extends li{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pc(rc(this.node.current,"focus",()=>this.onFocus()),rc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function k1(n,e,t){const{props:s}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&s.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),a=s[r];a&&vt.postRender(()=>a(e,xc(e)))}class _5 extends li{mount(){const{current:e}=this.node;e&&(this.unmount=Z4(e,(t,s)=>(k1(this.node,s,"Start"),(r,{success:a})=>k1(this.node,r,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const np=new WeakMap,rm=new WeakMap,S5=n=>{const e=np.get(n.target);e&&e(n)},C5=n=>{n.forEach(S5)};function T5({root:n,...e}){const t=n||document;rm.has(t)||rm.set(t,{});const s=rm.get(t),r=JSON.stringify(e);return s[r]||(s[r]=new IntersectionObserver(C5,{root:n,...e})),s[r]}function j5(n,e,t){const s=T5(e);return np.set(n,t),s.observe(n),()=>{np.delete(n),s.unobserve(n)}}const E5={some:0,all:1};class k5 extends li{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:r="some",once:a}=e,l={root:t?t.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:E5[r]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:v}=this.node.getProps(),y=f?m:v;y&&y(d)};return j5(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(A5(e,t))&&this.startObserver()}unmount(){}}function A5({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const D5={inView:{Feature:k5},tap:{Feature:_5},focus:{Feature:w5},hover:{Feature:b5}},N5={layout:{ProjectionNode:PS,MeasureLayout:ES}},rp={current:null},LS={current:!1};function O5(){if(LS.current=!0,!!Bp)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>rp.current=n.matches;n.addEventListener("change",e),e()}else rp.current=!1}const M5=new WeakMap;function R5(n,e,t){for(const s in e){const r=e[s],a=t[s];if(gs(r))n.addValue(s,r);else if(gs(a))n.addValue(s,lo(r,{owner:n}));else if(a!==r)if(n.hasValue(s)){const l=n.getValue(s);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=n.getStaticValue(s);n.addValue(s,lo(l!==void 0?l:r,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const A1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class P5{scrapeMotionValuesFromProps(e,t,s){return{}}constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:r,blockInitialAnimation:a,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=e0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Ds.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,vt.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=u,this.blockInitialAnimation=!!a,this.isControllingVariants=ch(t),this.isVariantNode=nS(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const y in v){const b=v[y];d[y]!==void 0&&gs(b)&&b.set(d[y],!1)}}mount(e){this.current=e,M5.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,s)=>this.bindToMotionValue(s,t)),LS.current||O5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:rp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),si(this.notifyUpdate),si(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=xo.has(e);s&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&vt.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),a(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in co){const t=co[e];if(!t)continue;const{isEnabled:s,Feature:r}=t;if(!this.features[e]&&r&&s(this.props)&&(this.features[e]=new r(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<A1.length;s++){const r=A1[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const a="on"+r,l=e[a];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=R5(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=lo(t===null?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(d2(s)||f2(s))?s=parseFloat(s):!tM(s)&&ni.test(t)&&(s=W2(e,t)),this.setBaseTarget(e,gs(s)?s.get():s)),gs(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let s;if(typeof t=="string"||typeof t=="object"){const a=f0(this.props,t,this.presenceContext?.custom);a&&(s=a[e])}if(t&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!gs(r)?r:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Ip),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class BS extends P5{constructor(){super(...arguments),this.KeyframeResolver=H4}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;gs(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function FS(n,{style:e,vars:t},s,r){const a=n.style;let l;for(l in e)a[l]=e[l];r?.applyProjectionStyles(a,s);for(l in t)a.setProperty(l,t[l])}function L5(n){return window.getComputedStyle(n)}class B5 extends BS{constructor(){super(...arguments),this.type="html",this.renderInstance=FS}readValueFromInstance(e,t){if(xo.has(t))return this.projection?.isProjecting?$m(t):l4(e,t);{const s=L5(e),r=($p(t)?s.getPropertyValue(t):s[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return SS(e,t)}build(e,t,s){u0(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return g0(e,t,s)}}const US=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function F5(n,e,t,s){FS(n,e,void 0,s);for(const r in e.attrs)n.setAttribute(US.has(r)?r:c0(r),e.attrs[r])}class U5 extends BS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(xo.has(t)){const s=q2(t);return s&&s.default||0}return t=US.has(t)?t:c0(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return fS(e,t,s)}build(e,t,s){cS(e,t,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,t,s,r){F5(e,t,s,r)}mount(e){this.isSVGTag=dS(e.tagName),super.mount(e)}}const z5=(n,e)=>h0(n)?new U5(e):new B5(e,{allowProjection:n!==j.Fragment}),V5=zM({...h3,...D5,...x5,...N5},z5),es=dM(V5),I5=()=>{const n=Gs(),{session:e,userRole:t}=po(),[s,r]=j.useState(!1);return h.jsxs("header",{className:`flex items-center justify-between px-4 md:px-8 w-full h-[14vh] ${t==="admin"?"bg-[#E2D2A2]":"bg-[#AF524D]"}`,children:[h.jsx(It,{to:"/#home",children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsxs("div",{className:"w-8 h-8 bg-white rounded-t-lg relative",children:[h.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/3 bg-[#DFAD56]"}),h.jsx("div",{className:"absolute bottom-1/3 left-0 right-0 h-1/3 bg-[#E2D2A2]"}),h.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-0.5 h-3 bg-yellow-400",children:h.jsx("div",{className:"absolute -top-0.5 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-orange-400 rounded-full"})})]}),h.jsxs("div",{className:"text-white font-bold text-xl",children:[h.jsx("span",{className:"text-[#F8E6B4]",children:"Bakery"}),h.jsx("span",{className:"text-white",children:"Bliss"})]})]})}),h.jsx("nav",{className:"hidden md:block",children:h.jsx("ul",{className:"flex space-x-8 font-semibold text-base",children:[...t==="admin"?[{to:"/adminpage",label:"Dashboard"},{to:"/temp",label:"Temp"}]:[{to:"/",label:"Home"},{to:"/cakecustomization",label:"Cake Customization"},{to:"/cakecatalog",label:"Cake Catalog"},{to:"/aboutus",label:"About Us"},{to:"/contactus",label:"Contact Us"}]].map(a=>h.jsxs("li",{className:"relative group",children:[h.jsx(It,{to:a.to,className:`transition-colors duration-300 ${n.pathname===a.to?t==="admin"?"text-[#613C2A]":"text-[#EBD187]":"text-white"}`,children:a.label}),h.jsx("span",{className:"absolute left-0 -bottom-1 h-[2px] w-0 bg-white transition-all duration-300 group-hover:w-full"})]},a.to))})}),h.jsx("button",{className:"md:hidden p-2",onClick:()=>r(!s),"aria-label":"Toggle mobile menu",children:h.jsxs("div",{className:"w-6 h-6 flex flex-col justify-center items-center",children:[h.jsx("span",{className:`block w-5 h-0.5 bg-white transition-all duration-300 ${s?"rotate-45 translate-y-1":"-translate-y-1"}`}),h.jsx("span",{className:`block w-5 h-0.5 bg-white transition-all duration-300 ${s?"opacity-0":"opacity-100"}`}),h.jsx("span",{className:`block w-5 h-0.5 bg-white transition-all duration-300 ${s?"-rotate-45 -translate-y-1":"translate-y-1"}`})]})}),h.jsx("div",{className:`absolute top-full left-0 w-full ${t==="admin"?"bg-[#E2D2A2]":"bg-[#AF524D]"} shadow-lg transition-all duration-300 md:hidden ${s?"opacity-100 visible":"opacity-0 invisible"}`,children:h.jsx("nav",{className:"px-4 py-4",children:h.jsx("ul",{className:"space-y-4 font-semibold text-base",children:[...t==="admin"?[{to:"/adminpage",label:"Dashboard"},{to:"/temp",label:"Temp"}]:[{to:"/",label:"Home"},{to:"/cakecustomization",label:"Cake Customization"},{to:"/cakecatalog",label:"Cake Catalog"},{to:"/aboutus",label:"About Us"},{to:"/contactus",label:"Contact Us"}]].map(a=>h.jsx("li",{children:h.jsx(It,{to:a.to,className:`block py-2 transition-colors duration-300 ${n.pathname===a.to?t==="admin"?"text-[#613C2A]":"text-[#EBD187]":"text-white"}`,onClick:()=>r(!1),children:a.label})},a.to))})})}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx(It,{to:t==="admin"?"/admin/profile":"/profile",className:"h-12 w-12",children:h.jsx("img",{src:"/Profile Icon.png",alt:"Profile",className:"w-full h-full"})}),t!=="admin"&&h.jsx(It,{to:"/cart",className:"h-12 w-12",children:h.jsx("img",{src:"/Cart.png",alt:"Cart",className:"w-full h-full"})})]})]})},H5=()=>h.jsxs("footer",{className:"bg-[#381914] h-fit p-8 flex justify-between flex-wrap text-[#F8E6B4]",children:[h.jsx("div",{className:"w-full sm:w-auto mb-6 sm:mb-0",children:h.jsx(It,{to:"/#home",children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsxs("div",{className:"w-8 h-8 bg-[#F8E6B4] rounded-full relative",children:[h.jsx("div",{className:"absolute inset-1 bg-[#8B4513] rounded-full"}),h.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-2 h-1 bg-[#8B4513] rounded-t-full"}),h.jsx("div",{className:"absolute top-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-[#F8E6B4] rounded-full"})]}),h.jsxs("div",{className:"text-[#F8E6B4] font-bold text-xl",children:[h.jsx("span",{className:"text-[#AF524D]",children:"Connie"}),h.jsx("span",{className:"text-[#F8E6B4]",children:" de Cafe"})]})]})})}),h.jsxs("div",{className:"w-full sm:w-auto mb-6 sm:mb-0",children:[h.jsx("h3",{className:"font-semibold mb-2",children:"Contact Us"}),h.jsx("p",{children:" +63 912 345 6789"}),h.jsx("p",{children:" conniescakemall@gmail.com"}),h.jsx("p",{children:" Dumaguete City, Philippines"}),h.jsx("p",{className:"mt-4 font-semibold",children:"Follow Us:"}),h.jsxs("div",{className:"flex gap-3 mt-2",children:[h.jsx("a",{href:"https://www.facebook.com/connies.cakemall",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",children:h.jsx("img",{src:"/fb_icon.png",alt:"Facebook",className:"w-6 h-6"})}),h.jsx("a",{href:"https://www.instagram.com/conniescakemall?igsh=MXNiNjUwdjVlNW5uaA==",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",children:h.jsx("img",{src:"/ig_icon.png",alt:"Instagram",className:"w-6 h-6"})})]})]}),h.jsxs("div",{className:"w-full sm:w-auto mb-6 sm:mb-0",children:[h.jsx("h3",{className:"font-semibold mb-2",children:"Quick Links"}),h.jsxs("ul",{className:"space-y-1",children:[h.jsx("li",{children:h.jsx(It,{to:"/cakes",className:"hover:text-[#AF524D] transition-colors",children:"Our Cakes"})}),h.jsx("li",{children:h.jsx(It,{to:"/aboutus",className:"hover:text-[#AF524D] transition-colors",children:"About Us"})}),h.jsx("li",{children:h.jsx(It,{to:"/contact",className:"hover:text-[#AF524D] transition-colors",children:"Contact"})})]})]}),h.jsxs("div",{className:"w-full sm:w-auto",children:[h.jsx("h3",{className:"font-semibold mb-2",children:"Legal"}),h.jsxs("ul",{className:"space-y-1",children:[h.jsx("li",{children:h.jsx(It,{to:"/terms",className:"hover:text-[#AF524D] transition-colors",children:"Terms & Conditions"})}),h.jsx("li",{children:h.jsx(It,{to:"/privacy",className:"hover:text-[#AF524D] transition-colors",children:"Privacy Policy"})}),h.jsx("li",{children:h.jsx(It,{to:"/aboutus",className:"hover:text-[#AF524D] transition-colors",children:"Location"})})]})]})]}),ds=({children:n})=>h.jsx(es.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5,ease:"easeInOut"},children:n}),G5=()=>{const[n,e]=j.useState(""),[t,s]=j.useState(""),[r,a]=j.useState(""),[l,u]=j.useState(""),[d,f]=j.useState(""),[m,v]=j.useState(""),[y,b]=j.useState(!1),[w,_]=j.useState(""),[T,S]=j.useState(!1),[D,k]=j.useState(!1),{signUpNewUser:M,signInOrUpWithGoogle:N}=po(),L=Yi(),A={length:m.length>=6,uppercase:/[A-Z]/.test(m),lowercase:/[a-z]/.test(m),number:/[0-9]/.test(m),special:/[!@#$%^&*(),.?":{}|<>]/.test(m)},B=K=>{const q=K.target.value;v(q),S(q.length>0)},Y=async()=>{if(!y){b(!0),_("");try{const K=await N();if(K.success)ve.success("Redirecting to Google...");else{const q=K?.error?.message||K?.error||"Google sign-in failed. Please try again.";_(q),ve.error(q)}}catch(K){_("An unexpected error occurred"),ve.error("An unexpected error occurred"),console.error(K)}finally{b(!1)}}},W=async K=>{if(console.log("handleSignUp called",l,m),K.preventDefault(),y)return;b(!0),_("");const q=/[A-Z]/.test(m),oe=/[a-z]/.test(m),re=/[0-9]/.test(m),fe=/[!@#$%^&*(),.?":{}|<>]/.test(m);if(!(m.length>=6)){_("Password must be at least 6 characters long"),ve.error("Password too short. Please use at least 6 characters."),b(!1);return}if(!q){_("Password must contain at least one capital letter"),ve.error("Password must contain at least one capital letter."),b(!1);return}if(!oe){_("Password must contain at least one lowercase letter"),ve.error("Password must contain at least one lowercase letter."),b(!1);return}if(!re){_("Password must contain at least one number"),ve.error("Password must contain at least one number."),b(!1);return}if(!fe){_('Password must contain at least one special character (!@#$%^&*(),.?":{}|<>)'),ve.error("Password must contain at least one special character."),b(!1);return}try{const $=await M(l,m,n,t,r,d);if($.success)ve.success("Account created successfully! Welcome to Bakery Bliss!"),$.userRole==="admin"?(L("/adminpage"),setTimeout(()=>window.scrollTo(0,0),100)):(L("/"),window.scrollTo(0,0));else{const I=$?.error?.message||"Sign-up failed. Please try again.";_(I),ve.error(I)}}catch($){_("An unexpected error occurred"),ve.error("An unexpected error occurred"),console.error($)}finally{b(!1)}};return h.jsx("div",{className:"bg-[url('/Background.png')] bg-cover bg-top min-h-screen w-full flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#52514B_100%)] flex items-center justify-center gap-6 md:gap-10 flex-col w-full max-w-lg sm:max-w-xl md:max-w-2xl lg:max-w-3xl h-auto py-8 md:py-12 px-6 md:px-10 rounded-3xl md:rounded-[2rem] shadow-2xl",children:[h.jsxs("div",{className:"text-center mb-2",children:[h.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-2",children:"Register Now!"}),h.jsx("p",{className:"text-sm md:text-base text-gray-600",children:"Please enter your details below"})]}),h.jsxs("form",{onSubmit:W,className:"flex flex-col space-y-8 w-full",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Personal Information"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:["First Name ",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("input",{className:"w-full bg-white text-gray-900 rounded-lg px-4 py-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-all duration-200",type:"text",id:"firstName",required:!0,value:n,onChange:K=>e(K.target.value),placeholder:"Enter your first name"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:["Last Name ",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("input",{className:"w-full bg-white text-gray-900 rounded-lg px-4 py-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-all duration-200",type:"text",id:"lastName",required:!0,value:t,onChange:K=>s(K.target.value),placeholder:"Enter your last name"})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Account Information"}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:["Email Address ",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("input",{className:"w-full bg-white text-gray-900 rounded-lg px-4 py-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-all duration-200",type:"email",id:"email",required:!0,value:l,onChange:K=>u(K.target.value),placeholder:"Enter your email address"}),h.jsx("p",{className:"text-xs text-gray-600",children:"We'll use this to send you order confirmations and updates"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:["Username ",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("input",{className:"w-full bg-white text-gray-900 rounded-lg px-4 py-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-all duration-200",type:"text",id:"username",required:!0,value:r,onChange:K=>a(K.target.value),placeholder:"Choose a unique username"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),h.jsx("input",{className:"w-full bg-white text-gray-900 rounded-lg px-4 py-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-all duration-200",type:"tel",id:"phoneNumber",placeholder:"Enter your phone number",value:d,onChange:K=>f(K.target.value)}),h.jsx("p",{className:"text-xs text-gray-600",children:"Optional - for delivery updates and order notifications"})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Security"}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:["Password ",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsxs("div",{className:"relative mb-4",children:[h.jsx("input",{className:"w-full bg-white text-gray-900 rounded-lg px-4 py-3 pr-12 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-all duration-200",type:D?"text":"password",id:"password",required:!0,minLength:6,value:m,onChange:B,onFocus:()=>S(m.length>0),onBlur:()=>S(!1),placeholder:"Create a strong password"}),h.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-500 hover:text-gray-700 transition-colors duration-200",onClick:()=>k(!D),children:D?h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):h.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),T&&h.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-xl p-4 z-20 w-fit",children:[h.jsx("div",{className:"text-sm font-medium text-gray-800 mb-3",children:"Password Requirements:"}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:`flex items-center text-sm ${A.length?"text-green-600":"text-red-500"}`,children:[h.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${A.length?"bg-green-500":"bg-red-500"}`}),"At least 6 characters"]}),h.jsxs("div",{className:`flex items-center text-sm ${A.uppercase?"text-green-600":"text-red-500"}`,children:[h.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${A.uppercase?"bg-green-500":"bg-red-500"}`}),"One capital letter (A-Z)"]}),h.jsxs("div",{className:`flex items-center text-sm ${A.lowercase?"text-green-600":"text-red-500"}`,children:[h.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${A.lowercase?"bg-green-500":"bg-red-500"}`}),"One lowercase letter (a-z)"]}),h.jsxs("div",{className:`flex items-center text-sm ${A.number?"text-green-600":"text-red-500"}`,children:[h.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${A.number?"bg-green-500":"bg-red-500"}`}),"One number (0-9)"]}),h.jsxs("div",{className:`flex items-center text-sm ${A.special?"text-green-600":"text-red-500"}`,children:[h.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${A.special?"bg-green-500":"bg-red-500"}`}),"One special character (!@#$%^&*)"]})]})]})]}),h.jsx("p",{className:"text-xs text-gray-900",children:"Password must be at least 6 characters with uppercase, lowercase, number, and special character"})]})]}),h.jsxs("div",{className:"pt-6 space-y-4",children:[h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 flex items-center",children:h.jsx("div",{className:"w-full border-t border-gray-300"})}),h.jsx("div",{className:"relative flex justify-center text-sm",children:h.jsx("span",{className:"px-2 bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#52514B_100%)] text-gray-500",children:"Or continue with"})})]}),h.jsxs("button",{type:"button",onClick:Y,disabled:y,className:"w-full flex items-center justify-center gap-3 bg-white text-gray-700 font-semibold py-4 px-6 rounded-xl cursor-pointer transition-all duration-300 hover:bg-gray-50 border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed text-base shadow-lg",children:[h.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[h.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),h.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),h.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),h.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),y?"Connecting...":"Continue with Google"]}),h.jsx("button",{type:"submit",disabled:y,className:"w-full bg-[#AF524D] text-white font-semibold py-4 px-6 rounded-xl cursor-pointer transition-all duration-300 hover:bg-[#8B3D3A] focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed text-base shadow-lg hover:shadow-xl",children:y?h.jsxs("div",{className:"flex items-center justify-center",children:[h.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):"Create Account"})]})]})]})})},$5=()=>h.jsx("section",{className:"bg-[url('/Hero.png')] bg-cover bg-center w-full h-[120vh] flex items-center justify-start",id:"home",children:h.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-15 max-w-2xl w-full px-8",children:[h.jsx("h1",{className:"text-[#EBD187] text-8xl font-abhaya ",children:"Connie de Caf"}),h.jsx("p",{className:"font-bold text-white/76 text-3xl",children:"Where every slice begins with your imagination"}),h.jsx("div",{className:"flex items-center justify-center mt-20",children:h.jsxs("div",{className:"group relative flex items-center space-x-4",children:[h.jsx(es.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.3,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"bg-gradient-to-r from-white/60 to-transparent text-white px-6 py-4 rounded-full hover:bg-[#FFECB5] hover:text-gray-800 transition duration-300 tracking-widest text-2xl font-bold shadow-md",children:"Customize Now"}),h.jsx("img",{src:"/g_arrow.png",alt:"arrow",className:`
                absolute 
                left-full 
                top-[120%]
                translate-y-0
                opacity-0 
                group-hover:top-1/2 
                group-hover:-translate-y-1/2
                group-hover:opacity-100 
                transition-all 
                duration-500 
                ease-in-out 
                ml-2
              `})]})})]})}),Y5=()=>h.jsx("div",{className:"bg-[linear-gradient(to_bottom,_#F2EFE8_0%,_#DFDAC7_51%,_#A8A599_100%)] h-auto py-20",children:h.jsxs("section",{className:"flex flex-col items-center text-center px-4 py-16",children:[h.jsx("h2",{className:"text-2xl md:text-5xl font-bold tracking-widest py-10 pb-30",children:"How to create your cake?"}),h.jsxs("p",{className:"max-w-2xl text-gray-700 mb-12 text-base md:text-3xl text-left",children:["Connie de Cafe's got you covered! With our drag-and-drop customization tool, you can bring your cake ideas to life  and see the magic happen in ",h.jsx("span",{className:"font-bold",children:"REAL TIME!"})]}),h.jsxs("div",{className:"relative w-full max-w-4xl p-11",children:[h.jsx("img",{src:"/Section 3.png",alt:"Cake",className:"w-full mx-auto"}),h.jsxs(es.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute top-[18%] left-[0%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-xs w-auto text-left bg-gradient-to-r from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#82171C] backdrop-filter backdrop-blur-[2px] font-semibold",children:["Add Frosting ",h.jsx("br",{}),"& Fillings"]}),h.jsxs(es.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute top-[10%] right-[5%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-xs w-auto text-left bg-gradient-to-l from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#82171C] backdrop-filter backdrop-blur-[2px] font-semibold",children:["Add Decorations ",h.jsx("br",{}),"& Toppings"]}),h.jsxs(es.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute top-[42%] left-[-8%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-fit w-auto text-left bg-gradient-to-r from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#DFAD56]/53 backdrop-filter backdrop-blur-[2px] font-semibold",children:["Choose Cake ",h.jsx("br",{}),"Flavor"]}),h.jsxs(es.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute top-[42%] right-[-8%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-fit w-auto text-left bg-gradient-to-l from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#DFAD56]/53 transition-transform hover:scale-115 duration-600 delay-100 backdrop-filter backdrop-blur-[2px] font-semibold",children:["Choose Cake ",h.jsx("br",{}),"Layers"]}),h.jsxs(es.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute bottom-[20%] left-[-7%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-fit w-auto text-left bg-gradient-to-r from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#DFAD56]/53 transition-transform hover:scale-115 duration-600 delay-100 backdrop-filter backdrop-blur-[2px] font-semibold",children:["Choose Cake ",h.jsx("br",{}),"Shape"]}),h.jsxs(es.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute bottom-[20%] right-[-12%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-fit w-auto text-left bg-gradient-to-l from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#DFAD56]/53 transition-transform hover:scale-115 duration-600 delay-100 backdrop-filter backdrop-blur-[2px] font-semibold",children:["Choose Cake ",h.jsx("br",{}),"Size"]})]})]})}),q5=()=>h.jsx("section",{className:"bg-[url('/Section3.png')] bg-cover bg-center w-full h-[120vh] py-20 flex items-center justify-end",children:h.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-15 max-w-4xl w-full px-8",children:[h.jsx("h1",{className:"text-[#381914] text-8xl font-abhaya",children:"Our Cake Collection"}),h.jsx("p",{className:"font-bold text-white/76 text-3xl",children:"Not in the Mood to Customize? Choose from our pre-designed cake collection."}),h.jsx("div",{className:"flex items-center justify-center mt-20",children:h.jsxs("div",{className:"group relative flex items-center space-x-4",children:[h.jsx(It,{to:"/cakecatalog",className:"block",children:h.jsx(es.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.3,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"bg-gradient-to-r from-white/60 to-transparent text-white px-6 py-4 rounded-full hover:bg-[#82171C] hover:text-gray-600 transition duration-300 tracking-widest text-2xl font-bold shadow-md cursor-pointer",children:"Explore"})}),h.jsx("img",{src:"/r_arrow.png",alt:"arrow",className:`
                absolute 
                right-full 
                top-[120%]
                translate-y-0
                opacity-0 
                group-hover:top-1/2 
                group-hover:-translate-y-1/2
                group-hover:opacity-100 
                transition-all 
                duration-500 
                ease-in-out 
                ml-2
              `})]})})]})}),W5=()=>h.jsxs(h.Fragment,{children:[h.jsx($5,{}),h.jsx(Y5,{}),h.jsx(q5,{})]}),X5=()=>{const[n,e]=j.useState(""),[t,s]=j.useState(""),[r,a]=j.useState(!1),[l,u]=j.useState(""),[d,f]=j.useState(!1),[m,v]=j.useState(!1),[y,b]=j.useState(""),[w,_]=j.useState(!1),[T,S]=j.useState(""),{session:D,signInUser:k,signInOrUpWithGoogle:M,resetPassword:N}=po(),L=Yi(),A=async()=>{if(!r){a(!0),u("");try{const W=await M();W.success?ve.success("Redirecting to Google..."):(u(W.error),ve.error(W.error))}catch(W){u("An unexpected error occurred"),ve.error("An unexpected error occurred"),console.error(W)}finally{a(!1)}}},B=async W=>{if(W.preventDefault(),!r){a(!0),u("");try{const K=await k({email:n,password:t});K.success?(ve.success("Login successful!"),K.role==="admin"?L("/adminpage"):(K.role,L("/")),setTimeout(()=>window.scrollTo(0,0),100)):(u(K.error),ve.error(K.error))}catch(K){u("An unexpected error occurred"),ve.error("An unexpected error occurred"),console.error(K)}finally{a(!1)}}},Y=async W=>{W.preventDefault(),_(!0),S(""),u("");try{const K=await N(y);K.success?(S(K.message),ve.success(K.message),b(""),setTimeout(()=>{v(!1),S("")},3e3)):(u(K.error),ve.error(K.error))}catch(K){u("An unexpected error occurred"),ve.error("An unexpected error occurred"),console.error(K)}finally{_(!1)}};return h.jsxs("div",{className:"bg-[url('/Background.png')] bg-cover bg-top min-h-screen w-full flex items-center justify-center p-4",children:[h.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#52514B_100%)] flex items-center justify-center gap-6 md:gap-10 flex-col w-full max-w-sm sm:max-w-md md:max-w-lg h-auto py-6 md:py-10 px-4 md:px-8 rounded-2xl md:rounded-3xl shadow-lg",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Welcome back!"}),h.jsx("p",{className:"text-xs md:text-sm mt-1",children:"Please enter your details below"})]}),h.jsxs("form",{onSubmit:B,className:"flex flex-col space-y-3 md:space-y-4 w-full",children:[h.jsxs("div",{children:[h.jsxs("label",{htmlFor:"email",className:"text-sm md:text-base",children:["Email: ",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("input",{className:"w-full bg-white text-black rounded-md px-2 py-1 md:py-2 border border-black-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] text-sm md:text-base",type:"email",id:"email",required:!0,value:n,onChange:W=>e(W.target.value)})]}),h.jsxs("div",{children:[h.jsxs("label",{htmlFor:"password",className:"text-sm md:text-base",children:["Password: ",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{className:"w-full bg-white text-black rounded-md px-2 py-1 md:py-2 pr-10 border border-black-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] text-sm md:text-base",type:d?"text":"password",id:"password",required:!0,value:t,onChange:W=>s(W.target.value)}),h.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>f(!d),children:d?h.jsx("svg",{className:"h-4 w-4 md:h-5 md:w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):h.jsxs("svg",{className:"h-4 w-4 md:h-5 md:w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("input",{className:"w-auto bg-white text-black rounded-3xl px-1 py-1/2 border border-black-300 focus:outline-none",type:"checkbox",id:"rememberMe"}),h.jsx("label",{className:"cursor-pointer text-sm md:text-base",htmlFor:"rememberMe",children:"Remember me"})]}),h.jsx("button",{type:"button",onClick:()=>v(!0),className:"cursor-pointer hover:underline hover:text-[#82171C] text-xs md:text-sm transition ease-in-out hover:font-semibold self-start sm:self-auto",children:"Forgot password?"})]}),h.jsxs("div",{className:"flex flex-col space-y-3 md:space-y-4",children:[h.jsx("button",{type:"submit",disabled:r,className:"bg-[#82171C] text-white font-bold px-4 md:px-6 py-2 md:py-3 rounded-md cursor-pointer transition ease-in-out delay-100 hover:bg-[#FFECB5] hover:text-gray-800 duration-300 tracking-wide w-full disabled:opacity-50 disabled:cursor-not-allowed text-sm md:text-base",children:r?"Logging in...":"LOGIN"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 flex items-center",children:h.jsx("div",{className:"w-full border-t border-gray-300"})}),h.jsx("div",{className:"relative flex justify-center text-sm",children:h.jsx("span",{className:"px-2 bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#52514B_100%)] text-gray-500",children:"Or continue with"})})]}),h.jsxs("button",{type:"button",onClick:A,disabled:r,className:"flex items-center justify-center gap-3 bg-white text-gray-700 font-semibold px-4 md:px-6 py-2 md:py-3 rounded-md cursor-pointer transition ease-in-out delay-100 hover:bg-gray-50 border-2 border-gray-300 duration-300 tracking-wide w-full disabled:opacity-50 disabled:cursor-not-allowed text-sm md:text-base",children:[h.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[h.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),h.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),h.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),h.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),r?"Connecting...":"Continue with Google"]}),h.jsx("hr",{}),h.jsx(It,{className:"bg-[#DFAD56]/80 text-white font-bold px-4 md:px-6 py-2 md:py-3 rounded-md cursor-pointer transition ease-in-out delay-100 hover:bg-[#FFECB5] hover:text-gray-800 duration-300 tracking-wide w-full text-center text-sm md:text-base",to:"/signup",children:"SIGN UP"})]})]})]}),m&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-lg p-4 md:p-6 w-full max-w-sm md:w-96 md:max-w-md border-4 border-[#AF524D] shadow-2xl",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-base md:text-lg font-semibold text-[#381914]",children:"Reset Password"}),h.jsx("button",{onClick:()=>{v(!1),b(""),S(""),u("")},className:"text-gray-500 hover:text-gray-700 text-xl font-bold cursor-pointer",children:""})]}),h.jsx("p",{className:"text-xs md:text-sm text-gray-600 mb-4",children:"Enter your email address and we'll send you a link to reset your password."}),h.jsxs("form",{onSubmit:Y,className:"space-y-3 md:space-y-4",children:[h.jsxs("div",{children:[h.jsxs("label",{htmlFor:"resetEmail",className:"block text-xs md:text-sm font-medium text-gray-700",children:["Email: ",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("input",{type:"email",id:"resetEmail",required:!0,value:y,onChange:W=>b(W.target.value),className:"w-full bg-white text-black rounded-md px-2 md:px-3 py-1 md:py-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent text-sm md:text-base",placeholder:"Enter your email"})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:gap-3",children:[h.jsx("button",{type:"button",onClick:()=>{v(!1),b(""),S(""),u("")},className:"px-3 md:px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm md:text-base",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:w,className:"px-3 md:px-4 py-2 bg-[#AF524D] text-white rounded-lg hover:bg-[#8B3D3A] transition-colors disabled:opacity-50 text-sm md:text-base",children:w?"Sending...":"Send Reset Link"})]})]})]})})]})},K5=()=>{const[n,e]=j.useState(""),[t,s]=j.useState(""),[r,a]=j.useState(!1),[l,u]=j.useState(""),[d,f]=j.useState(""),[m,v]=j.useState(!1),y=Yi();j.useEffect(()=>{(async()=>{try{const S=window.location.hash,D=new URLSearchParams(window.location.search);console.log("ResetPassword: Checking session and URL params"),console.log("Hash:",S),console.log("Search params:",D.toString()),console.log("Full URL:",window.location.href);const{data:{session:k}}=await be.auth.getSession();if(console.log("Session found:",!!k),k)console.log("Valid session found, user can reset password"),v(!0),u("Please enter your new password");else if(S&&(S.includes("access_token")||S.includes("refresh_token"))){console.log("Tokens found in URL hash, attempting to get session");try{const{data:M,error:N}=await be.auth.getSession();if(M.session)console.log("Session created from URL tokens"),v(!0),u("Please enter your new password");else{console.error("Failed to create session from tokens:",N),console.log("Attempting manual session recovery...");try{const L=new URLSearchParams(S.substring(1)),A=L.get("access_token"),B=L.get("refresh_token");if(A){console.log("Found access token, attempting to set session");const{data:Y,error:W}=await be.auth.setSession({access_token:A,refresh_token:B});Y.session?(console.log("Manual session recovery successful"),v(!0),u("Please enter your new password")):(console.error("Manual session recovery failed:",W),f("Failed to validate reset link. Please try again."),ve.error("Invalid reset link. Please try again."))}else f("Failed to validate reset link. Please try again."),ve.error("Invalid reset link. Please try again.")}catch(L){console.error("Manual recovery error:",L),f("Failed to validate reset link. Please try again."),ve.error("Invalid reset link. Please try again.")}}}catch(M){console.error("Error recovering session:",M),f("Failed to validate reset link. Please try again."),ve.error("Invalid reset link. Please try again.")}}else if(D.has("access_token")||D.has("refresh_token")){console.log("Tokens found in search params, attempting to get session");const{data:M,error:N}=await be.auth.getSession();if(M.session)console.log("Session created from search params"),v(!0),u("Please enter your new password");else{console.error("Failed to create session from search params:",N),console.log("Attempting manual session recovery from search params...");try{const L=D.get("access_token"),A=D.get("refresh_token");if(L){console.log("Found access token in search params, attempting to set session");const{data:B,error:Y}=await be.auth.setSession({access_token:L,refresh_token:A});B.session?(console.log("Manual session recovery from search params successful"),v(!0),u("Please enter your new password")):(console.error("Manual session recovery from search params failed:",Y),f("Failed to validate reset link. Please try again."),ve.error("Invalid reset link. Please try again."))}else f("Failed to validate reset link. Please try again."),ve.error("Invalid reset link. Please try again.")}catch(L){console.error("Manual recovery from search params error:",L),f("Failed to validate reset link. Please try again."),ve.error("Invalid reset link. Please try again.")}}}else console.log("No valid session or tokens found"),f("This reset link is invalid or has expired. Please request a new password reset from the login page."),ve.error("Invalid reset link. Please try again.")}catch(S){console.error("Error checking session:",S),f("An error occurred while validating the reset link. Please try again."),ve.error("Error validating reset link. Please try again.")}})();const{data:{subscription:T}}=be.auth.onAuthStateChange((S,D)=>{console.log("Auth state change:",S,!!D),(S==="PASSWORD_RECOVERY"||S==="SIGNED_IN")&&D&&(console.log("Session established from auth state change"),v(!0),u("Please enter your new password"),f(""))});return()=>T?.unsubscribe()},[]);const b=async _=>{_.preventDefault(),a(!0),f(""),u("");const T=/[A-Z]/.test(n),S=/[a-z]/.test(n),D=/[!@#$%^&*(),.?":{}|<>]/.test(n);if(!(n.length>=6)){f("Password must be at least 6 characters long"),ve.error("Password too short. Please use at least 6 characters."),a(!1);return}if(!T){f("Password must contain at least one capital letter"),ve.error("Password must contain at least one capital letter."),a(!1);return}if(!S){f("Password must contain at least one lowercase letter"),ve.error("Password must contain at least one lowercase letter."),a(!1);return}if(!D){f('Password must contain at least one special character (!@#$%^&*(),.?":{}|<>)'),ve.error("Password must contain at least one special character."),a(!1);return}if(n!==t){f("Passwords do not match"),ve.error("Passwords do not match. Please try again."),a(!1);return}try{const{data:M,error:N}=await be.auth.updateUser({password:n});if(N){const L=N.message.includes("JWT")?"This reset link has expired. Please request a new password reset.":N.message;f(L),ve.error("Failed to update password. Please try again.")}else u("Password updated successfully! Redirecting to login..."),ve.success("Password updated successfully!"),e(""),s(""),await be.auth.signOut(),setTimeout(()=>{y("/login"),setTimeout(()=>window.scrollTo(0,0),100)},2e3)}catch(M){f("An unexpected error occurred. Please try again."),ve.error("Something went wrong. Please try again."),console.error(M)}finally{a(!1)}},w=()=>{y("/login"),setTimeout(()=>window.scrollTo(0,0),100)};return m?h.jsx("div",{className:"bg-[url('/Background.png')] bg-cover bg-center h-screen w-full flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#52514B_100%)] flex items-center justify-center flex-col max-w-md w-full rounded-3xl shadow-2xl p-8",children:[h.jsxs("div",{className:"text-center w-full mb-6",children:[h.jsx("div",{className:"mb-4",children:h.jsx("svg",{className:"w-16 h-16 text-[#AF524D] mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),h.jsx("h1",{className:"text-3xl font-bold text-[#381914] mb-2",children:"Reset Your Password"}),h.jsx("p",{className:"text-sm text-gray-600",children:"Enter your new password below"})]}),h.jsxs("form",{onSubmit:b,className:"flex flex-col space-y-5 w-full",children:[h.jsxs("div",{children:[h.jsxs("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:["New Password: ",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("input",{type:"password",id:"newPassword",required:!0,minLength:6,value:n,onChange:_=>e(_.target.value),className:"w-full bg-white text-black rounded-md px-4 py-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-colors",placeholder:"Enter new password"}),h.jsx("p",{className:"text-xs text-gray-300 mt-2",children:"New password must be 6 characters"})]}),h.jsxs("div",{children:[h.jsxs("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirm Password: ",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("input",{type:"password",id:"confirmPassword",required:!0,value:t,onChange:_=>s(_.target.value),className:"w-full bg-white text-black rounded-md px-4 py-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-colors",placeholder:"Confirm new password"})]}),h.jsxs("div",{className:"flex flex-col space-y-3 pt-2",children:[h.jsx("button",{type:"submit",disabled:r,className:"bg-[#82171C] text-white font-bold px-6 py-3 rounded-md cursor-pointer transition ease-in-out delay-100 hover:bg-[#FFECB5] hover:text-gray-800 duration-300 tracking-wide w-full disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:r?h.jsxs(h.Fragment,{children:[h.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating Password..."]}):"Update Password"}),h.jsx("button",{type:"button",onClick:w,className:"bg-gray-500 text-white font-bold px-6 py-3 rounded-md cursor-pointer transition ease-in-out delay-100 hover:bg-gray-600 duration-300 tracking-wide w-full",children:"Back to Login"})]})]})]})}):h.jsx("div",{className:"bg-[url('/Background.png')] bg-cover bg-center h-screen w-full flex items-center justify-center p-4",children:h.jsx("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#52514B_100%)] flex items-center justify-center flex-col max-w-md w-full rounded-3xl shadow-2xl p-8",children:h.jsxs("div",{className:"text-center w-full",children:[h.jsx("div",{className:"mb-6",children:h.jsx("svg",{className:"w-20 h-20 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),h.jsx("h1",{className:"text-2xl font-bold text-[#381914] mb-4",children:"Invalid Reset Link"}),h.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed text-sm",children:d}),h.jsx("button",{onClick:w,className:"bg-[#82171C] text-white font-bold px-8 py-3 rounded-md cursor-pointer transition ease-in-out delay-100 hover:bg-[#FFECB5] hover:text-gray-800 duration-300 tracking-wide w-full",children:"Back to Login"})]})})})},bo=({message:n="Loading...",size:e="large"})=>e==="small"?h.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[h.jsx("div",{className:"w-4 h-4 border-2 border-[#AF524D] border-t-transparent rounded-full animate-spin"}),h.jsx("span",{className:"text-sm text-gray-600",children:n})]}):h.jsx("div",{className:"min-h-screen bg-[url('/Background.png')] bg-cover bg-center flex items-center justify-center",children:h.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#52514B_100%)] rounded-3xl shadow-2xl p-8 flex flex-col items-center space-y-6",children:[h.jsxs("div",{className:"relative",children:[h.jsxs("div",{className:"w-16 h-16 bg-[#AF524D] rounded-t-lg relative overflow-hidden",children:[h.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/3 bg-[#DFAD56]"}),h.jsx("div",{className:"absolute bottom-1/3 left-0 right-0 h-1/3 bg-[#E2D2A2]"}),h.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-1 h-4 bg-yellow-400",children:h.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-orange-400 rounded-full animate-pulse"})})]}),h.jsx("div",{className:"absolute inset-0 border-4 border-transparent border-t-[#AF524D] border-r-[#DFAD56] rounded-full animate-spin"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("h2",{className:"text-2xl font-bold text-[#381914] mb-2",children:"Bakery Bliss"}),h.jsx("p",{className:"text-gray-600 text-lg",children:n})]}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx("div",{className:"w-3 h-3 bg-[#AF524D] rounded-full animate-bounce",style:{animationDelay:"0ms"}}),h.jsx("div",{className:"w-3 h-3 bg-[#DFAD56] rounded-full animate-bounce",style:{animationDelay:"150ms"}}),h.jsx("div",{className:"w-3 h-3 bg-[#E2D2A2] rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})}),Q5=()=>{const[n,e]=j.useState(!0);return j.useEffect(()=>{const t=setTimeout(()=>{e(!1)},5e3);return()=>clearTimeout(t)},[]),h.jsxs("section",{className:"bg-[linear-gradient(to_bottom,_#AF524D_0%,_#AF524D_20%,_#381914_83%)] bg-cover bg-center w-full min-h-screen py-20 px-4 md:px-8 lg:px-16 xl:px-32 relative overflow-hidden",children:[h.jsxs(es.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-8 md:px-16 py-16 flex flex-col items-center justify-center rounded-3xl space-y-8 w-full shadow-2xl mb-16 relative z-10",children:[h.jsx("h1",{className:"text-5xl md:text-7xl font-bold font-jost text-center text-[#492220]",children:"About Connie de Caf"}),h.jsx("p",{className:"text-xl md:text-2xl text-center max-w-4xl text-[#492220]/80 leading-relaxed",children:"Where every slice begins with your imagination and every bite tells a story of passion, creativity, and love for the art of baking."})]}),h.jsxs("div",{className:"relative mb-20",children:[h.jsx(es.div,{initial:{opacity:0,x:-100},whileInView:{opacity:1,x:0},transition:{duration:.8},viewport:{once:!0},className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-8 md:px-12 py-12 rounded-3xl shadow-2xl w-3/4 ml-0 relative z-20",children:h.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-8",children:[h.jsx("div",{className:"w-full lg:w-2/5",children:h.jsx("img",{src:"/client.png",alt:"Connie de Caf Bakery",className:"w-full rounded-2xl shadow-xl transform rotate-2 hover:rotate-0 transition-transform duration-500"})}),h.jsxs("div",{className:"w-full lg:w-3/5 space-y-6",children:[h.jsx("h2",{className:"text-4xl md:text-5xl font-bold font-jost text-[#492220]",children:"Our Story"}),h.jsxs("div",{className:"space-y-4 text-[#492220]/90",children:[h.jsx("p",{className:"text-lg md:text-xl leading-relaxed",children:"Founded with a dream and a passion for creating extraordinary cakes, Connie de Caf began as a small home-based bakery with big aspirations."}),h.jsx("p",{className:"text-lg md:text-xl leading-relaxed",children:"Our founder, Connie June B. De Jesus, started this journey with a simple belief: every celebration deserves a cake that's as unique as the moment itself."}),h.jsx("p",{className:"text-lg md:text-xl leading-relaxed",children:"From intimate birthday celebrations to grand wedding receptions, we've had the privilege of being part of countless memorable moments."})]})]})]})}),h.jsx(es.div,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.6,delay:.3},viewport:{once:!0},className:"absolute -top-8 -right-8 w-32 h-32 bg-[#EBD187] rounded-full opacity-20 z-10"})]}),h.jsxs(es.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"mb-20",children:[h.jsx("h2",{className:"text-4xl md:text-5xl font-bold font-jost text-center mb-16 text-white",children:"What Makes Us Special"}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 relative",children:[h.jsxs(es.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},transition:{duration:.6,delay:.1},viewport:{once:!0},className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-8 py-10 rounded-2xl shadow-2xl text-center space-y-6 transform -rotate-1 hover:rotate-0 transition-transform duration-300",children:[h.jsx("div",{className:"w-20 h-20 bg-[#EBD187] rounded-full flex items-center justify-center mx-auto shadow-lg",children:h.jsx("span",{className:"text-3xl",children:""})}),h.jsx("h3",{className:"text-2xl font-bold font-jost text-[#492220]",children:"Creative Design"}),h.jsx("p",{className:"text-[#492220]/80 text-lg leading-relaxed",children:"Every cake is a canvas for creativity. We bring your wildest cake dreams to life with our innovative designs and artistic flair."})]}),h.jsxs(es.div,{initial:{opacity:0,y:-50},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},viewport:{once:!0},className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-8 py-12 rounded-2xl shadow-2xl text-center space-y-6 transform scale-105 relative z-10",children:[h.jsx("div",{className:"w-24 h-24 bg-[#EBD187] rounded-full flex items-center justify-center mx-auto shadow-lg",children:h.jsx("span",{className:"text-4xl",children:""})}),h.jsx("h3",{className:"text-2xl font-bold font-jost text-[#492220]",children:"Premium Ingredients"}),h.jsx("p",{className:"text-[#492220]/80 text-lg leading-relaxed",children:"We use only the finest, freshest ingredients to ensure every bite is a moment of pure indulgence and quality."})]}),h.jsxs(es.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},transition:{duration:.6,delay:.3},viewport:{once:!0},className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-8 py-10 rounded-2xl shadow-2xl text-center space-y-6 transform rotate-1 hover:rotate-0 transition-transform duration-300",children:[h.jsx("div",{className:"w-20 h-20 bg-[#EBD187] rounded-full flex items-center justify-center mx-auto shadow-lg",children:h.jsx("span",{className:"text-3xl",children:""})}),h.jsx("h3",{className:"text-2xl font-bold font-jost text-[#492220]",children:"Personal Touch"}),h.jsx("p",{className:"text-[#492220]/80 text-lg leading-relaxed",children:"Every cake is made with love and attention to detail, ensuring your special moments are celebrated with perfection."})]})]})]}),h.jsxs(es.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.8},viewport:{once:!0},className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-8 md:px-16 py-16 rounded-3xl shadow-2xl w-4/5 mx-auto text-center relative z-10",children:[h.jsx("h2",{className:"text-4xl md:text-5xl font-bold font-jost mb-8 text-[#492220]",children:"Ready to Create Your Dream Cake?"}),h.jsx("p",{className:"text-xl md:text-2xl mb-10 text-[#492220]/80 max-w-3xl mx-auto leading-relaxed",children:"Let's work together to bring your vision to life. Whether it's a birthday, wedding, or any special celebration, we're here to make it unforgettable."}),h.jsx(It,{to:"/cakecustomization",children:h.jsx(es.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},className:"bg-gradient-to-r from-[#AF524D] to-[#381914] text-white px-12 py-6 rounded-full text-xl font-semibold shadow-xl ",children:"Start Customizing"})})]})]})};class bc{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const Z5=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},as={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:Z5()},p0=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},J5=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=p0(n);as.publicKey=t.publicKey,as.blockHeadless=t.blockHeadless,as.storageProvider=t.storageProvider,as.blockList=t.blockList,as.limitRate=t.limitRate,as.origin=t.origin||e},zS=async(n,e,t={})=>{const s=await fetch(as.origin+n,{method:"POST",headers:t,body:e}),r=await s.text(),a=new bc(s.status,r);if(s.ok)return a;throw a},VS=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},eR=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},IS=n=>n.webdriver||!n.languages||n.languages.length===0,HS=()=>new bc(451,"Unavailable For Headless Browser"),tR=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},sR=n=>!n.list?.length||!n.watchVariable,nR=(n,e)=>n instanceof FormData?n.get(e):n[e],GS=(n,e)=>{if(sR(n))return!1;tR(n.list,n.watchVariable);const t=nR(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},$S=()=>new bc(403,"Forbidden"),rR=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},iR=async(n,e,t)=>{const s=Number(await t.get(n)||0);return e-Date.now()+s},YS=async(n,e,t)=>{if(!e.throttle||!t)return!1;rR(e.throttle,e.id);const s=e.id||n;return await iR(s,e.throttle,t)>0?!0:(await t.set(s,Date.now().toString()),!1)},qS=()=>new bc(429,"Too Many Requests"),aR=async(n,e,t,s)=>{const r=p0(s),a=r.publicKey||as.publicKey,l=r.blockHeadless||as.blockHeadless,u=r.storageProvider||as.storageProvider,d={...as.blockList,...r.blockList},f={...as.limitRate,...r.limitRate};return l&&IS(navigator)?Promise.reject(HS()):(VS(a,n,e),eR(t),t&&GS(d,t)?Promise.reject($S()):await YS(location.pathname,f,u)?Promise.reject(qS()):zS("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:a,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},oR=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},lR=n=>typeof n=="string"?document.querySelector(n):n,cR=async(n,e,t,s)=>{const r=p0(s),a=r.publicKey||as.publicKey,l=r.blockHeadless||as.blockHeadless,u=as.storageProvider||r.storageProvider,d={...as.blockList,...r.blockList},f={...as.limitRate,...r.limitRate};if(l&&IS(navigator))return Promise.reject(HS());const m=lR(t);VS(a,n,e),oR(m);const v=new FormData(m);return GS(d,v)?Promise.reject($S()):await YS(location.pathname,f,u)?Promise.reject(qS()):(v.append("lib_version","4.4.1"),v.append("service_id",n),v.append("template_id",e),v.append("user_id",a),zS("/api/v1.0/email/send-form",v))},uR={init:J5,send:aR,sendForm:cR,EmailJSResponseStatus:bc},dR=()=>{const[n,e]=j.useState({name:"",email:"",subject:"",message:""}),[t,s]=j.useState(!1),r=l=>{const{id:u,value:d}=l.target;e(f=>({...f,[u]:d}))},a=async l=>{if(l.preventDefault(),!n.name||!n.email||!n.subject||!n.message){ve.error("Please fill in all fields",{duration:4e3,position:"top-center"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)){ve.error("Please enter a valid email address",{duration:4e3,position:"top-center"});return}s(!0);try{if((await uR.send("YOUR_SERVICE_ID","YOUR_TEMPLATE_ID",{from_name:n.name,from_email:n.email,subject:n.subject,message:n.message,to_email:"conniedecafe@gmail.com"},"YOUR_PUBLIC_KEY")).status===200)ve.success("Message sent successfully! We will get back to you soon.",{duration:5e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}),e({name:"",email:"",subject:"",message:""});else throw new Error("Failed to send email")}catch(d){console.error("Error sending email:",d),ve.error("Failed to send message. Please try again.",{duration:4e3,position:"top-center"})}finally{s(!1)}};return h.jsxs("section",{className:"bg-[url('/AboutUs.png')] bg-cover bg-center w-full min-h-screen px-8 py-12 flex flex-col items-end justify-center space-y-6",children:[h.jsxs("form",{onSubmit:a,className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-8 py-8 flex flex-col items-center justify-center rounded-2xl space-y-6 w-full max-w-lg shadow-2xl",children:[h.jsx("h1",{className:"font-bold text-3xl text-center text-[#381914]",children:"Contact Us Today!"}),h.jsxs("div",{className:"flex flex-col space-y-4 w-full",children:[h.jsxs("div",{className:"flex flex-col space-y-2",children:[h.jsx("label",{className:"text-lg font-semibold text-[#381914]",htmlFor:"name",children:"Name:"}),h.jsx("input",{type:"text",id:"name",value:n.name,onChange:r,className:"w-full bg-white text-black rounded-lg px-3 py-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent"})]}),h.jsxs("div",{className:"flex flex-col space-y-2",children:[h.jsx("label",{className:"text-lg font-semibold text-[#381914]",htmlFor:"email",children:"Email:"}),h.jsx("input",{type:"email",id:"email",value:n.email,onChange:r,className:"w-full bg-white text-black rounded-lg px-3 py-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent"})]}),h.jsxs("div",{className:"flex flex-col space-y-2",children:[h.jsx("label",{className:"text-lg font-semibold text-[#381914]",htmlFor:"subject",children:"Subject:"}),h.jsx("input",{type:"text",id:"subject",value:n.subject,onChange:r,className:"w-full bg-white text-black rounded-lg px-3 py-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent"})]}),h.jsxs("div",{className:"flex flex-col space-y-2",children:[h.jsx("label",{className:"text-lg font-semibold text-[#381914]",htmlFor:"message",children:"Message:"}),h.jsx("textarea",{id:"message",value:n.message,onChange:r,className:"w-full h-24 bg-white text-black rounded-lg px-3 py-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent resize-none"})]})]}),h.jsx("div",{className:"w-full",children:h.jsx("button",{type:"submit",disabled:t,className:`bg-[#82171C] text-white font-bold px-6 py-2 rounded-lg cursor-pointer transition ease-in-out delay-100 hover:bg-[#FFECB5] hover:text-gray-800 duration-300 tracking-wide w-full ${t?"opacity-50 cursor-not-allowed":""}`,children:t?"Sending...":"Send Message"})})]}),h.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-8 py-6 flex flex-col items-center justify-center rounded-2xl space-y-4 w-full max-w-lg shadow-2xl",children:[h.jsx("h2",{className:"font-bold text-2xl text-[#381914] mb-2",children:"Get In Touch"}),h.jsxs("a",{href:"mailto:conniedecafe@gmail.com",className:"flex items-center w-full space-x-4 hover:opacity-80 transition-opacity",children:[h.jsx("img",{src:"/mail_icon.png",alt:"Mail Icon",className:"w-6 h-6"}),h.jsx("p",{className:"text-lg text-[#381914]",children:"conniedecafe@gmail.com"})]}),h.jsxs("a",{href:"tel:+639176292377",className:"flex items-center w-full space-x-4 hover:opacity-80 transition-opacity",children:[h.jsx("img",{src:"/phone_icon.png",alt:"Phone Icon",className:"w-6 h-6"}),h.jsx("p",{className:"text-lg text-[#381914]",children:"+63 917 629 2377"})]}),h.jsxs("div",{className:"flex items-center justify-center space-x-8 w-full pt-2",children:[h.jsx("a",{href:"https://www.facebook.com/connies.cakemall",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",children:h.jsx("img",{src:"/fb_icon.png",alt:"Facebook Icon",className:"w-8 h-8"})}),h.jsx("a",{href:"https://www.instagram.com/conniescakemall?igsh=MXNiNjUwdjVlNW5uaA==",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",children:h.jsx("img",{src:"/ig_icon.png",alt:"Instagram Icon",className:"w-8 h-8"})})]})]})]})};function hR(){const n=Gs();return j.useEffect(()=>{if(n.hash){const e=document.getElementById(n.hash.substring(1));e&&e.scrollIntoView({behavior:"smooth"})}},[n]),null}function D1(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function v0(n,e){n===void 0&&(n={}),e===void 0&&(e={});const t=["__proto__","constructor","prototype"];Object.keys(e).filter(s=>t.indexOf(s)<0).forEach(s=>{typeof n[s]>"u"?n[s]=e[s]:D1(e[s])&&D1(n[s])&&Object.keys(e[s]).length>0&&v0(n[s],e[s])})}const WS={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Xi(){const n=typeof document<"u"?document:{};return v0(n,WS),n}const fR={document:WS,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function ws(){const n=typeof window<"u"?window:{};return v0(n,fR),n}function gR(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function mR(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function XS(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function Vd(){return Date.now()}function pR(n){const e=ws();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function vR(n,e){e===void 0&&(e="x");const t=ws();let s,r,a;const l=pR(n);return t.WebKitCSSMatrix?(r=l.transform||l.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(u=>u.replace(",",".")).join(", ")),a=new t.WebKitCSSMatrix(r==="none"?"":r)):(a=l.MozTransform||l.OTransform||l.MsTransform||l.msTransform||l.transform||l.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),s=a.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?r=a.m41:s.length===16?r=parseFloat(s[12]):r=parseFloat(s[4])),e==="y"&&(t.WebKitCSSMatrix?r=a.m42:s.length===16?r=parseFloat(s[13]):r=parseFloat(s[5])),r||0}function Yu(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function yR(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function Hs(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const s=t<0||arguments.length<=t?void 0:arguments[t];if(s!=null&&!yR(s)){const r=Object.keys(Object(s)).filter(a=>e.indexOf(a)<0);for(let a=0,l=r.length;a<l;a+=1){const u=r[a],d=Object.getOwnPropertyDescriptor(s,u);d!==void 0&&d.enumerable&&(Yu(n[u])&&Yu(s[u])?s[u].__swiper__?n[u]=s[u]:Hs(n[u],s[u]):!Yu(n[u])&&Yu(s[u])?(n[u]={},s[u].__swiper__?n[u]=s[u]:Hs(n[u],s[u])):n[u]=s[u])}}}return n}function qu(n,e,t){n.style.setProperty(e,t)}function KS(n){let{swiper:e,targetPosition:t,side:s}=n;const r=ws(),a=-e.translate;let l=null,u;const d=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const f=t>a?"next":"prev",m=(y,b)=>f==="next"&&y>=b||f==="prev"&&y<=b,v=()=>{u=new Date().getTime(),l===null&&(l=u);const y=Math.max(Math.min((u-l)/d,1),0),b=.5-Math.cos(y*Math.PI)/2;let w=a+b*(t-a);if(m(w,t)&&(w=t),e.wrapperEl.scrollTo({[s]:w}),m(w,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[s]:w})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(v)};v()}function Mn(n,e){e===void 0&&(e="");const t=ws(),s=[...n.children];return t.HTMLSlotElement&&n instanceof HTMLSlotElement&&s.push(...n.assignedElements()),e?s.filter(r=>r.matches(e)):s}function xR(n,e){const t=[e];for(;t.length>0;){const s=t.shift();if(n===s)return!0;t.push(...s.children,...s.shadowRoot?s.shadowRoot.children:[],...s.assignedElements?s.assignedElements():[])}}function bR(n,e){const t=ws();let s=e.contains(n);return!s&&t.HTMLSlotElement&&e instanceof HTMLSlotElement&&(s=[...e.assignedElements()].includes(n),s||(s=xR(n,e))),s}function Id(n){try{console.warn(n);return}catch{}}function Hd(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:gR(e)),t}function wR(n,e){const t=[];for(;n.previousElementSibling;){const s=n.previousElementSibling;e?s.matches(e)&&t.push(s):t.push(s),n=s}return t}function _R(n,e){const t=[];for(;n.nextElementSibling;){const s=n.nextElementSibling;e?s.matches(e)&&t.push(s):t.push(s),n=s}return t}function ti(n,e){return ws().getComputedStyle(n,null).getPropertyValue(e)}function N1(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function SR(n,e){const t=[];let s=n.parentElement;for(;s;)t.push(s),s=s.parentElement;return t}function O1(n,e,t){const s=ws();return n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(s.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(s.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function sr(n){return(Array.isArray(n)?n:[n]).filter(e=>!!e)}function M1(n,e){e===void 0&&(e=""),typeof trustedTypes<"u"?n.innerHTML=trustedTypes.createPolicy("html",{createHTML:t=>t}).createHTML(e):n.innerHTML=e}let im;function CR(){const n=ws(),e=Xi();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function QS(){return im||(im=CR()),im}let am;function TR(n){let{userAgent:e}=n===void 0?{}:n;const t=QS(),s=ws(),r=s.navigator.platform,a=e||s.navigator.userAgent,l={ios:!1,android:!1},u=s.screen.width,d=s.screen.height,f=a.match(/(Android);?[\s\/]+([\d.]+)?/);let m=a.match(/(iPad).*OS\s([\d_]+)/);const v=a.match(/(iPod)(.*OS\s([\d_]+))?/),y=!m&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),b=r==="Win32";let w=r==="MacIntel";const _=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!m&&w&&t.touch&&_.indexOf(`${u}x${d}`)>=0&&(m=a.match(/(Version)\/([\d.]+)/),m||(m=[0,1,"13_0_0"]),w=!1),f&&!b&&(l.os="android",l.android=!0),(m||y||v)&&(l.os="ios",l.ios=!0),l}function ZS(n){return n===void 0&&(n={}),am||(am=TR(n)),am}let om;function jR(){const n=ws(),e=ZS();let t=!1;function s(){const u=n.navigator.userAgent.toLowerCase();return u.indexOf("safari")>=0&&u.indexOf("chrome")<0&&u.indexOf("android")<0}if(s()){const u=String(n.navigator.userAgent);if(u.includes("Version/")){const[d,f]=u.split("Version/")[1].split(" ")[0].split(".").map(m=>Number(m));t=d<16||d===16&&f<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),a=s(),l=a||r&&e.ios;return{isSafari:t||a,needPerspectiveFix:t,need3dFix:l,isWebView:r}}function JS(){return om||(om=jR()),om}function ER(n){let{swiper:e,on:t,emit:s}=n;const r=ws();let a=null,l=null;const u=()=>{!e||e.destroyed||!e.initialized||(s("beforeResize"),s("resize"))},d=()=>{!e||e.destroyed||!e.initialized||(a=new ResizeObserver(v=>{l=r.requestAnimationFrame(()=>{const{width:y,height:b}=e;let w=y,_=b;v.forEach(T=>{let{contentBoxSize:S,contentRect:D,target:k}=T;k&&k!==e.el||(w=D?D.width:(S[0]||S).inlineSize,_=D?D.height:(S[0]||S).blockSize)}),(w!==y||_!==b)&&u()})}),a.observe(e.el))},f=()=>{l&&r.cancelAnimationFrame(l),a&&a.unobserve&&e.el&&(a.unobserve(e.el),a=null)},m=()=>{!e||e.destroyed||!e.initialized||s("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){d();return}r.addEventListener("resize",u),r.addEventListener("orientationchange",m)}),t("destroy",()=>{f(),r.removeEventListener("resize",u),r.removeEventListener("orientationchange",m)})}function kR(n){let{swiper:e,extendParams:t,on:s,emit:r}=n;const a=[],l=ws(),u=function(m,v){v===void 0&&(v={});const y=l.MutationObserver||l.WebkitMutationObserver,b=new y(w=>{if(e.__preventObserver__)return;if(w.length===1){r("observerUpdate",w[0]);return}const _=function(){r("observerUpdate",w[0])};l.requestAnimationFrame?l.requestAnimationFrame(_):l.setTimeout(_,0)});b.observe(m,{attributes:typeof v.attributes>"u"?!0:v.attributes,childList:e.isElement||(typeof v.childList>"u"?!0:v).childList,characterData:typeof v.characterData>"u"?!0:v.characterData}),a.push(b)},d=()=>{if(e.params.observer){if(e.params.observeParents){const m=SR(e.hostEl);for(let v=0;v<m.length;v+=1)u(m[v])}u(e.hostEl,{childList:e.params.observeSlideChildren}),u(e.wrapperEl,{attributes:!1})}},f=()=>{a.forEach(m=>{m.disconnect()}),a.splice(0,a.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),s("init",d),s("destroy",f)}var AR={on(n,e,t){const s=this;if(!s.eventsListeners||s.destroyed||typeof e!="function")return s;const r=t?"unshift":"push";return n.split(" ").forEach(a=>{s.eventsListeners[a]||(s.eventsListeners[a]=[]),s.eventsListeners[a][r](e)}),s},once(n,e,t){const s=this;if(!s.eventsListeners||s.destroyed||typeof e!="function")return s;function r(){s.off(n,r),r.__emitterProxy&&delete r.__emitterProxy;for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];e.apply(s,l)}return r.__emitterProxy=e,s.on(n,r,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const s=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[s](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(s=>{typeof e>"u"?t.eventsListeners[s]=[]:t.eventsListeners[s]&&t.eventsListeners[s].forEach((r,a)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&t.eventsListeners[s].splice(a,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,s;for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return typeof a[0]=="string"||Array.isArray(a[0])?(e=a[0],t=a.slice(1,a.length),s=n):(e=a[0].events,t=a[0].data,s=a[0].context||n),t.unshift(s),(Array.isArray(e)?e:e.split(" ")).forEach(d=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(f=>{f.apply(s,[d,...t])}),n.eventsListeners&&n.eventsListeners[d]&&n.eventsListeners[d].forEach(f=>{f.apply(s,t)})}),n}};function DR(){const n=this;let e,t;const s=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=s.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=s.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(ti(s,"padding-left")||0,10)-parseInt(ti(s,"padding-right")||0,10),t=t-parseInt(ti(s,"padding-top")||0,10)-parseInt(ti(s,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function NR(){const n=this;function e(W,K){return parseFloat(W.getPropertyValue(n.getDirectionLabel(K))||0)}const t=n.params,{wrapperEl:s,slidesEl:r,size:a,rtlTranslate:l,wrongRTL:u}=n,d=n.virtual&&t.virtual.enabled,f=d?n.virtual.slides.length:n.slides.length,m=Mn(r,`.${n.params.slideClass}, swiper-slide`),v=d?n.virtual.slides.length:m.length;let y=[];const b=[],w=[];let _=t.slidesOffsetBefore;typeof _=="function"&&(_=t.slidesOffsetBefore.call(n));let T=t.slidesOffsetAfter;typeof T=="function"&&(T=t.slidesOffsetAfter.call(n));const S=n.snapGrid.length,D=n.slidesGrid.length;let k=t.spaceBetween,M=-_,N=0,L=0;if(typeof a>"u")return;typeof k=="string"&&k.indexOf("%")>=0?k=parseFloat(k.replace("%",""))/100*a:typeof k=="string"&&(k=parseFloat(k)),n.virtualSize=-k,m.forEach(W=>{l?W.style.marginLeft="":W.style.marginRight="",W.style.marginBottom="",W.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(qu(s,"--swiper-centered-offset-before",""),qu(s,"--swiper-centered-offset-after",""));const A=t.grid&&t.grid.rows>1&&n.grid;A?n.grid.initSlides(m):n.grid&&n.grid.unsetSlides();let B;const Y=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(W=>typeof t.breakpoints[W].slidesPerView<"u").length>0;for(let W=0;W<v;W+=1){B=0;let K;if(m[W]&&(K=m[W]),A&&n.grid.updateSlide(W,K,m),!(m[W]&&ti(K,"display")==="none")){if(t.slidesPerView==="auto"){Y&&(m[W].style[n.getDirectionLabel("width")]="");const q=getComputedStyle(K),oe=K.style.transform,re=K.style.webkitTransform;if(oe&&(K.style.transform="none"),re&&(K.style.webkitTransform="none"),t.roundLengths)B=n.isHorizontal()?O1(K,"width"):O1(K,"height");else{const fe=e(q,"width"),P=e(q,"padding-left"),$=e(q,"padding-right"),I=e(q,"margin-left"),te=e(q,"margin-right"),O=q.getPropertyValue("box-sizing");if(O&&O==="border-box")B=fe+I+te;else{const{clientWidth:H,offsetWidth:ue}=K;B=fe+P+$+I+te+(ue-H)}}oe&&(K.style.transform=oe),re&&(K.style.webkitTransform=re),t.roundLengths&&(B=Math.floor(B))}else B=(a-(t.slidesPerView-1)*k)/t.slidesPerView,t.roundLengths&&(B=Math.floor(B)),m[W]&&(m[W].style[n.getDirectionLabel("width")]=`${B}px`);m[W]&&(m[W].swiperSlideSize=B),w.push(B),t.centeredSlides?(M=M+B/2+N/2+k,N===0&&W!==0&&(M=M-a/2-k),W===0&&(M=M-a/2-k),Math.abs(M)<1/1e3&&(M=0),t.roundLengths&&(M=Math.floor(M)),L%t.slidesPerGroup===0&&y.push(M),b.push(M)):(t.roundLengths&&(M=Math.floor(M)),(L-Math.min(n.params.slidesPerGroupSkip,L))%n.params.slidesPerGroup===0&&y.push(M),b.push(M),M=M+B+k),n.virtualSize+=B+k,N=B,L+=1}}if(n.virtualSize=Math.max(n.virtualSize,a)+T,l&&u&&(t.effect==="slide"||t.effect==="coverflow")&&(s.style.width=`${n.virtualSize+k}px`),t.setWrapperSize&&(s.style[n.getDirectionLabel("width")]=`${n.virtualSize+k}px`),A&&n.grid.updateWrapperSize(B,y),!t.centeredSlides){const W=[];for(let K=0;K<y.length;K+=1){let q=y[K];t.roundLengths&&(q=Math.floor(q)),y[K]<=n.virtualSize-a&&W.push(q)}y=W,Math.floor(n.virtualSize-a)-Math.floor(y[y.length-1])>1&&y.push(n.virtualSize-a)}if(d&&t.loop){const W=w[0]+k;if(t.slidesPerGroup>1){const K=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),q=W*t.slidesPerGroup;for(let oe=0;oe<K;oe+=1)y.push(y[y.length-1]+q)}for(let K=0;K<n.virtual.slidesBefore+n.virtual.slidesAfter;K+=1)t.slidesPerGroup===1&&y.push(y[y.length-1]+W),b.push(b[b.length-1]+W),n.virtualSize+=W}if(y.length===0&&(y=[0]),k!==0){const W=n.isHorizontal()&&l?"marginLeft":n.getDirectionLabel("marginRight");m.filter((K,q)=>!t.cssMode||t.loop?!0:q!==m.length-1).forEach(K=>{K.style[W]=`${k}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let W=0;w.forEach(q=>{W+=q+(k||0)}),W-=k;const K=W>a?W-a:0;y=y.map(q=>q<=0?-_:q>K?K+T:q)}if(t.centerInsufficientSlides){let W=0;w.forEach(q=>{W+=q+(k||0)}),W-=k;const K=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(W+K<a){const q=(a-W-K)/2;y.forEach((oe,re)=>{y[re]=oe-q}),b.forEach((oe,re)=>{b[re]=oe+q})}}if(Object.assign(n,{slides:m,snapGrid:y,slidesGrid:b,slidesSizesGrid:w}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){qu(s,"--swiper-centered-offset-before",`${-y[0]}px`),qu(s,"--swiper-centered-offset-after",`${n.size/2-w[w.length-1]/2}px`);const W=-n.snapGrid[0],K=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(q=>q+W),n.slidesGrid=n.slidesGrid.map(q=>q+K)}if(v!==f&&n.emit("slidesLengthChange"),y.length!==S&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),b.length!==D&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!d&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const W=`${t.containerModifierClass}backface-hidden`,K=n.el.classList.contains(W);v<=t.maxBackfaceHiddenSlides?K||n.el.classList.add(W):K&&n.el.classList.remove(W)}}function OR(n){const e=this,t=[],s=e.virtual&&e.params.virtual.enabled;let r=0,a;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const l=u=>s?e.slides[e.getSlideIndexByData(u)]:e.slides[u];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(u=>{t.push(u)});else for(a=0;a<Math.ceil(e.params.slidesPerView);a+=1){const u=e.activeIndex+a;if(u>e.slides.length&&!s)break;t.push(l(u))}else t.push(l(e.activeIndex));for(a=0;a<t.length;a+=1)if(typeof t[a]<"u"){const u=t[a].offsetHeight;r=u>r?u:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function MR(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let s=0;s<e.length;s+=1)e[s].swiperSlideOffset=(n.isHorizontal()?e[s].offsetLeft:e[s].offsetTop)-t-n.cssOverflowAdjustment()}const R1=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function RR(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:s,rtlTranslate:r,snapGrid:a}=e;if(s.length===0)return;typeof s[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let l=-n;r&&(l=n),e.visibleSlidesIndexes=[],e.visibleSlides=[];let u=t.spaceBetween;typeof u=="string"&&u.indexOf("%")>=0?u=parseFloat(u.replace("%",""))/100*e.size:typeof u=="string"&&(u=parseFloat(u));for(let d=0;d<s.length;d+=1){const f=s[d];let m=f.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(m-=s[0].swiperSlideOffset);const v=(l+(t.centeredSlides?e.minTranslate():0)-m)/(f.swiperSlideSize+u),y=(l-a[0]+(t.centeredSlides?e.minTranslate():0)-m)/(f.swiperSlideSize+u),b=-(l-m),w=b+e.slidesSizesGrid[d],_=b>=0&&b<=e.size-e.slidesSizesGrid[d],T=b>=0&&b<e.size-1||w>1&&w<=e.size||b<=0&&w>=e.size;T&&(e.visibleSlides.push(f),e.visibleSlidesIndexes.push(d)),R1(f,T,t.slideVisibleClass),R1(f,_,t.slideFullyVisibleClass),f.progress=r?-v:v,f.originalProgress=r?-y:y}}function PR(n){const e=this;if(typeof n>"u"){const m=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*m||0}const t=e.params,s=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:a,isEnd:l,progressLoop:u}=e;const d=a,f=l;if(s===0)r=0,a=!0,l=!0;else{r=(n-e.minTranslate())/s;const m=Math.abs(n-e.minTranslate())<1,v=Math.abs(n-e.maxTranslate())<1;a=m||r<=0,l=v||r>=1,m&&(r=0),v&&(r=1)}if(t.loop){const m=e.getSlideIndexByData(0),v=e.getSlideIndexByData(e.slides.length-1),y=e.slidesGrid[m],b=e.slidesGrid[v],w=e.slidesGrid[e.slidesGrid.length-1],_=Math.abs(n);_>=y?u=(_-y)/w:u=(_+w-b)/w,u>1&&(u-=1)}Object.assign(e,{progress:r,progressLoop:u,isBeginning:a,isEnd:l}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),a&&!d&&e.emit("reachBeginning toEdge"),l&&!f&&e.emit("reachEnd toEdge"),(d&&!a||f&&!l)&&e.emit("fromEdge"),e.emit("progress",r)}const lm=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function LR(){const n=this,{slides:e,params:t,slidesEl:s,activeIndex:r}=n,a=n.virtual&&t.virtual.enabled,l=n.grid&&t.grid&&t.grid.rows>1,u=v=>Mn(s,`.${t.slideClass}${v}, swiper-slide${v}`)[0];let d,f,m;if(a)if(t.loop){let v=r-n.virtual.slidesBefore;v<0&&(v=n.virtual.slides.length+v),v>=n.virtual.slides.length&&(v-=n.virtual.slides.length),d=u(`[data-swiper-slide-index="${v}"]`)}else d=u(`[data-swiper-slide-index="${r}"]`);else l?(d=e.find(v=>v.column===r),m=e.find(v=>v.column===r+1),f=e.find(v=>v.column===r-1)):d=e[r];d&&(l||(m=_R(d,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!m&&(m=e[0]),f=wR(d,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!f===0&&(f=e[e.length-1]))),e.forEach(v=>{lm(v,v===d,t.slideActiveClass),lm(v,v===m,t.slideNextClass),lm(v,v===f,t.slidePrevClass)}),n.emitSlidesClasses()}const jd=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,s=e.closest(t());if(s){let r=s.querySelector(`.${n.params.lazyPreloaderClass}`);!r&&n.isElement&&(s.shadowRoot?r=s.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{s.shadowRoot&&(r=s.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},cm=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},ip=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const s=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),r=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const l=r,u=[l-e];u.push(...Array.from({length:e}).map((d,f)=>l+s+f)),n.slides.forEach((d,f)=>{u.includes(d.column)&&cm(n,f)});return}const a=r+s-1;if(n.params.rewind||n.params.loop)for(let l=r-e;l<=a+e;l+=1){const u=(l%t+t)%t;(u<r||u>a)&&cm(n,u)}else for(let l=Math.max(r-e,0);l<=Math.min(a+e,t-1);l+=1)l!==r&&(l>a||l<r)&&cm(n,l)};function BR(n){const{slidesGrid:e,params:t}=n,s=n.rtlTranslate?n.translate:-n.translate;let r;for(let a=0;a<e.length;a+=1)typeof e[a+1]<"u"?s>=e[a]&&s<e[a+1]-(e[a+1]-e[a])/2?r=a:s>=e[a]&&s<e[a+1]&&(r=a+1):s>=e[a]&&(r=a);return t.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function FR(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:s,params:r,activeIndex:a,realIndex:l,snapIndex:u}=e;let d=n,f;const m=b=>{let w=b-e.virtual.slidesBefore;return w<0&&(w=e.virtual.slides.length+w),w>=e.virtual.slides.length&&(w-=e.virtual.slides.length),w};if(typeof d>"u"&&(d=BR(e)),s.indexOf(t)>=0)f=s.indexOf(t);else{const b=Math.min(r.slidesPerGroupSkip,d);f=b+Math.floor((d-b)/r.slidesPerGroup)}if(f>=s.length&&(f=s.length-1),d===a&&!e.params.loop){f!==u&&(e.snapIndex=f,e.emit("snapIndexChange"));return}if(d===a&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=m(d);return}const v=e.grid&&r.grid&&r.grid.rows>1;let y;if(e.virtual&&r.virtual.enabled&&r.loop)y=m(d);else if(v){const b=e.slides.find(_=>_.column===d);let w=parseInt(b.getAttribute("data-swiper-slide-index"),10);Number.isNaN(w)&&(w=Math.max(e.slides.indexOf(b),0)),y=Math.floor(w/r.grid.rows)}else if(e.slides[d]){const b=e.slides[d].getAttribute("data-swiper-slide-index");b?y=parseInt(b,10):y=d}else y=d;Object.assign(e,{previousSnapIndex:u,snapIndex:f,previousRealIndex:l,realIndex:y,previousIndex:a,activeIndex:d}),e.initialized&&ip(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(l!==y&&e.emit("realIndexChange"),e.emit("slideChange"))}function UR(n,e){const t=this,s=t.params;let r=n.closest(`.${s.slideClass}, swiper-slide`);!r&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(u=>{!r&&u.matches&&u.matches(`.${s.slideClass}, swiper-slide`)&&(r=u)});let a=!1,l;if(r){for(let u=0;u<t.slides.length;u+=1)if(t.slides[u]===r){a=!0,l=u;break}}if(r&&a)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=l;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}s.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var zR={updateSize:DR,updateSlides:NR,updateAutoHeight:OR,updateSlidesOffset:MR,updateSlidesProgress:RR,updateProgress:PR,updateSlidesClasses:LR,updateActiveIndex:FR,updateClickedSlide:UR};function VR(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:s,translate:r,wrapperEl:a}=e;if(t.virtualTranslate)return s?-r:r;if(t.cssMode)return r;let l=vR(a,n);return l+=e.cssOverflowAdjustment(),s&&(l=-l),l||0}function IR(n,e){const t=this,{rtlTranslate:s,params:r,wrapperEl:a,progress:l}=t;let u=0,d=0;const f=0;t.isHorizontal()?u=s?-n:n:d=n,r.roundLengths&&(u=Math.floor(u),d=Math.floor(d)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?u:d,r.cssMode?a[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-u:-d:r.virtualTranslate||(t.isHorizontal()?u-=t.cssOverflowAdjustment():d-=t.cssOverflowAdjustment(),a.style.transform=`translate3d(${u}px, ${d}px, ${f}px)`);let m;const v=t.maxTranslate()-t.minTranslate();v===0?m=0:m=(n-t.minTranslate())/v,m!==l&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function HR(){return-this.snapGrid[0]}function GR(){return-this.snapGrid[this.snapGrid.length-1]}function $R(n,e,t,s,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),s===void 0&&(s=!0);const a=this,{params:l,wrapperEl:u}=a;if(a.animating&&l.preventInteractionOnTransition)return!1;const d=a.minTranslate(),f=a.maxTranslate();let m;if(s&&n>d?m=d:s&&n<f?m=f:m=n,a.updateProgress(m),l.cssMode){const v=a.isHorizontal();if(e===0)u[v?"scrollLeft":"scrollTop"]=-m;else{if(!a.support.smoothScroll)return KS({swiper:a,targetPosition:-m,side:v?"left":"top"}),!0;u.scrollTo({[v?"left":"top"]:-m,behavior:"smooth"})}return!0}return e===0?(a.setTransition(0),a.setTranslate(m),t&&(a.emit("beforeTransitionStart",e,r),a.emit("transitionEnd"))):(a.setTransition(e),a.setTranslate(m),t&&(a.emit("beforeTransitionStart",e,r),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(y){!a||a.destroyed||y.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,a.animating=!1,t&&a.emit("transitionEnd"))}),a.wrapperEl.addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd))),!0}var YR={getTranslate:VR,setTranslate:IR,minTranslate:HR,maxTranslate:GR,translateTo:$R};function qR(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function eC(n){let{swiper:e,runCallbacks:t,direction:s,step:r}=n;const{activeIndex:a,previousIndex:l}=e;let u=s;u||(a>l?u="next":a<l?u="prev":u="reset"),e.emit(`transition${r}`),t&&u==="reset"?e.emit(`slideResetTransition${r}`):t&&a!==l&&(e.emit(`slideChangeTransition${r}`),u==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`))}function WR(n,e){n===void 0&&(n=!0);const t=this,{params:s}=t;s.cssMode||(s.autoHeight&&t.updateAutoHeight(),eC({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function XR(n,e){n===void 0&&(n=!0);const t=this,{params:s}=t;t.animating=!1,!s.cssMode&&(t.setTransition(0),eC({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var KR={setTransition:qR,transitionStart:WR,transitionEnd:XR};function QR(n,e,t,s,r){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const a=this;let l=n;l<0&&(l=0);const{params:u,snapGrid:d,slidesGrid:f,previousIndex:m,activeIndex:v,rtlTranslate:y,wrapperEl:b,enabled:w}=a;if(!w&&!s&&!r||a.destroyed||a.animating&&u.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=a.params.speed);const _=Math.min(a.params.slidesPerGroupSkip,l);let T=_+Math.floor((l-_)/a.params.slidesPerGroup);T>=d.length&&(T=d.length-1);const S=-d[T];if(u.normalizeSlideIndex)for(let A=0;A<f.length;A+=1){const B=-Math.floor(S*100),Y=Math.floor(f[A]*100),W=Math.floor(f[A+1]*100);typeof f[A+1]<"u"?B>=Y&&B<W-(W-Y)/2?l=A:B>=Y&&B<W&&(l=A+1):B>=Y&&(l=A)}if(a.initialized&&l!==v&&(!a.allowSlideNext&&(y?S>a.translate&&S>a.minTranslate():S<a.translate&&S<a.minTranslate())||!a.allowSlidePrev&&S>a.translate&&S>a.maxTranslate()&&(v||0)!==l))return!1;l!==(m||0)&&t&&a.emit("beforeSlideChangeStart"),a.updateProgress(S);let D;l>v?D="next":l<v?D="prev":D="reset";const k=a.virtual&&a.params.virtual.enabled;if(!(k&&r)&&(y&&-S===a.translate||!y&&S===a.translate))return a.updateActiveIndex(l),u.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),u.effect!=="slide"&&a.setTranslate(S),D!=="reset"&&(a.transitionStart(t,D),a.transitionEnd(t,D)),!1;if(u.cssMode){const A=a.isHorizontal(),B=y?S:-S;if(e===0)k&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),k&&!a._cssModeVirtualInitialSet&&a.params.initialSlide>0?(a._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{b[A?"scrollLeft":"scrollTop"]=B})):b[A?"scrollLeft":"scrollTop"]=B,k&&requestAnimationFrame(()=>{a.wrapperEl.style.scrollSnapType="",a._immediateVirtual=!1});else{if(!a.support.smoothScroll)return KS({swiper:a,targetPosition:B,side:A?"left":"top"}),!0;b.scrollTo({[A?"left":"top"]:B,behavior:"smooth"})}return!0}const L=JS().isSafari;return k&&!r&&L&&a.isElement&&a.virtual.update(!1,!1,l),a.setTransition(e),a.setTranslate(S),a.updateActiveIndex(l),a.updateSlidesClasses(),a.emit("beforeTransitionStart",e,s),a.transitionStart(t,D),e===0?a.transitionEnd(t,D):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(B){!a||a.destroyed||B.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(t,D))}),a.wrapperEl.addEventListener("transitionend",a.onSlideToWrapperTransitionEnd)),!0}function ZR(n,e,t,s){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const r=this;if(r.destroyed)return;typeof e>"u"&&(e=r.params.speed);const a=r.grid&&r.params.grid&&r.params.grid.rows>1;let l=n;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)l=l+r.virtual.slidesBefore;else{let u;if(a){const y=l*r.params.grid.rows;u=r.slides.find(b=>b.getAttribute("data-swiper-slide-index")*1===y).column}else u=r.getSlideIndexByData(l);const d=a?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:f}=r.params;let m=r.params.slidesPerView;m==="auto"?m=r.slidesPerViewDynamic():(m=Math.ceil(parseFloat(r.params.slidesPerView,10)),f&&m%2===0&&(m=m+1));let v=d-u<m;if(f&&(v=v||u<Math.ceil(m/2)),s&&f&&r.params.slidesPerView!=="auto"&&!a&&(v=!1),v){const y=f?u<r.activeIndex?"prev":"next":u-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:y,slideTo:!0,activeSlideIndex:y==="next"?u+1:u-d+1,slideRealIndex:y==="next"?r.realIndex:void 0})}if(a){const y=l*r.params.grid.rows;l=r.slides.find(b=>b.getAttribute("data-swiper-slide-index")*1===y).column}else l=r.getSlideIndexByData(l)}return requestAnimationFrame(()=>{r.slideTo(l,e,t,s)}),r}function JR(n,e,t){e===void 0&&(e=!0);const s=this,{enabled:r,params:a,animating:l}=s;if(!r||s.destroyed)return s;typeof n>"u"&&(n=s.params.speed);let u=a.slidesPerGroup;a.slidesPerView==="auto"&&a.slidesPerGroup===1&&a.slidesPerGroupAuto&&(u=Math.max(s.slidesPerViewDynamic("current",!0),1));const d=s.activeIndex<a.slidesPerGroupSkip?1:u,f=s.virtual&&a.virtual.enabled;if(a.loop){if(l&&!f&&a.loopPreventsSliding)return!1;if(s.loopFix({direction:"next"}),s._clientLeft=s.wrapperEl.clientLeft,s.activeIndex===s.slides.length-1&&a.cssMode)return requestAnimationFrame(()=>{s.slideTo(s.activeIndex+d,n,e,t)}),!0}return a.rewind&&s.isEnd?s.slideTo(0,n,e,t):s.slideTo(s.activeIndex+d,n,e,t)}function eP(n,e,t){e===void 0&&(e=!0);const s=this,{params:r,snapGrid:a,slidesGrid:l,rtlTranslate:u,enabled:d,animating:f}=s;if(!d||s.destroyed)return s;typeof n>"u"&&(n=s.params.speed);const m=s.virtual&&r.virtual.enabled;if(r.loop){if(f&&!m&&r.loopPreventsSliding)return!1;s.loopFix({direction:"prev"}),s._clientLeft=s.wrapperEl.clientLeft}const v=u?s.translate:-s.translate;function y(D){return D<0?-Math.floor(Math.abs(D)):Math.floor(D)}const b=y(v),w=a.map(D=>y(D)),_=r.freeMode&&r.freeMode.enabled;let T=a[w.indexOf(b)-1];if(typeof T>"u"&&(r.cssMode||_)){let D;a.forEach((k,M)=>{b>=k&&(D=M)}),typeof D<"u"&&(T=_?a[D]:a[D>0?D-1:D])}let S=0;if(typeof T<"u"&&(S=l.indexOf(T),S<0&&(S=s.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(S=S-s.slidesPerViewDynamic("previous",!0)+1,S=Math.max(S,0))),r.rewind&&s.isBeginning){const D=s.params.virtual&&s.params.virtual.enabled&&s.virtual?s.virtual.slides.length-1:s.slides.length-1;return s.slideTo(D,n,e,t)}else if(r.loop&&s.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{s.slideTo(S,n,e,t)}),!0;return s.slideTo(S,n,e,t)}function tP(n,e,t){e===void 0&&(e=!0);const s=this;if(!s.destroyed)return typeof n>"u"&&(n=s.params.speed),s.slideTo(s.activeIndex,n,e,t)}function sP(n,e,t,s){e===void 0&&(e=!0),s===void 0&&(s=.5);const r=this;if(r.destroyed)return;typeof n>"u"&&(n=r.params.speed);let a=r.activeIndex;const l=Math.min(r.params.slidesPerGroupSkip,a),u=l+Math.floor((a-l)/r.params.slidesPerGroup),d=r.rtlTranslate?r.translate:-r.translate;if(d>=r.snapGrid[u]){const f=r.snapGrid[u],m=r.snapGrid[u+1];d-f>(m-f)*s&&(a+=r.params.slidesPerGroup)}else{const f=r.snapGrid[u-1],m=r.snapGrid[u];d-f<=(m-f)*s&&(a-=r.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,r.slidesGrid.length-1),r.slideTo(a,n,e,t)}function nP(){const n=this;if(n.destroyed)return;const{params:e,slidesEl:t}=n,s=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let r=n.getSlideIndexWhenGrid(n.clickedIndex),a;const l=n.isElement?"swiper-slide":`.${e.slideClass}`,u=n.grid&&n.params.grid&&n.params.grid.rows>1;if(e.loop){if(n.animating)return;a=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?n.slideToLoop(a):r>(u?(n.slides.length-s)/2-(n.params.grid.rows-1):n.slides.length-s)?(n.loopFix(),r=n.getSlideIndex(Mn(t,`${l}[data-swiper-slide-index="${a}"]`)[0]),XS(()=>{n.slideTo(r)})):n.slideTo(r)}else n.slideTo(r)}var rP={slideTo:QR,slideToLoop:ZR,slideNext:JR,slidePrev:eP,slideReset:tP,slideToClosest:sP,slideToClickedSlide:nP};function iP(n,e){const t=this,{params:s,slidesEl:r}=t;if(!s.loop||t.virtual&&t.params.virtual.enabled)return;const a=()=>{Mn(r,`.${s.slideClass}, swiper-slide`).forEach((b,w)=>{b.setAttribute("data-swiper-slide-index",w)})},l=()=>{const y=Mn(r,`.${s.slideBlankClass}`);y.forEach(b=>{b.remove()}),y.length>0&&(t.recalcSlides(),t.updateSlides())},u=t.grid&&s.grid&&s.grid.rows>1;s.loopAddBlankSlides&&(s.slidesPerGroup>1||u)&&l();const d=s.slidesPerGroup*(u?s.grid.rows:1),f=t.slides.length%d!==0,m=u&&t.slides.length%s.grid.rows!==0,v=y=>{for(let b=0;b<y;b+=1){const w=t.isElement?Hd("swiper-slide",[s.slideBlankClass]):Hd("div",[s.slideClass,s.slideBlankClass]);t.slidesEl.append(w)}};if(f){if(s.loopAddBlankSlides){const y=d-t.slides.length%d;v(y),t.recalcSlides(),t.updateSlides()}else Id("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");a()}else if(m){if(s.loopAddBlankSlides){const y=s.grid.rows-t.slides.length%s.grid.rows;v(y),t.recalcSlides(),t.updateSlides()}else Id("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");a()}else a();t.loopFix({slideRealIndex:n,direction:s.centeredSlides?void 0:"next",initial:e})}function aP(n){let{slideRealIndex:e,slideTo:t=!0,direction:s,setTranslate:r,activeSlideIndex:a,initial:l,byController:u,byMousewheel:d}=n===void 0?{}:n;const f=this;if(!f.params.loop)return;f.emit("beforeLoopFix");const{slides:m,allowSlidePrev:v,allowSlideNext:y,slidesEl:b,params:w}=f,{centeredSlides:_,initialSlide:T}=w;if(f.allowSlidePrev=!0,f.allowSlideNext=!0,f.virtual&&w.virtual.enabled){t&&(!w.centeredSlides&&f.snapIndex===0?f.slideTo(f.virtual.slides.length,0,!1,!0):w.centeredSlides&&f.snapIndex<w.slidesPerView?f.slideTo(f.virtual.slides.length+f.snapIndex,0,!1,!0):f.snapIndex===f.snapGrid.length-1&&f.slideTo(f.virtual.slidesBefore,0,!1,!0)),f.allowSlidePrev=v,f.allowSlideNext=y,f.emit("loopFix");return}let S=w.slidesPerView;S==="auto"?S=f.slidesPerViewDynamic():(S=Math.ceil(parseFloat(w.slidesPerView,10)),_&&S%2===0&&(S=S+1));const D=w.slidesPerGroupAuto?S:w.slidesPerGroup;let k=_?Math.max(D,Math.ceil(S/2)):D;k%D!==0&&(k+=D-k%D),k+=w.loopAdditionalSlides,f.loopedSlides=k;const M=f.grid&&w.grid&&w.grid.rows>1;m.length<S+k||f.params.effect==="cards"&&m.length<S+k*2?Id("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):M&&w.grid.fill==="row"&&Id("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const N=[],L=[],A=M?Math.ceil(m.length/w.grid.rows):m.length,B=l&&A-T<S&&!_;let Y=B?T:f.activeIndex;typeof a>"u"?a=f.getSlideIndex(m.find(P=>P.classList.contains(w.slideActiveClass))):Y=a;const W=s==="next"||!s,K=s==="prev"||!s;let q=0,oe=0;const fe=(M?m[a].column:a)+(_&&typeof r>"u"?-S/2+.5:0);if(fe<k){q=Math.max(k-fe,D);for(let P=0;P<k-fe;P+=1){const $=P-Math.floor(P/A)*A;if(M){const I=A-$-1;for(let te=m.length-1;te>=0;te-=1)m[te].column===I&&N.push(te)}else N.push(A-$-1)}}else if(fe+S>A-k){oe=Math.max(fe-(A-k*2),D),B&&(oe=Math.max(oe,S-A+T+1));for(let P=0;P<oe;P+=1){const $=P-Math.floor(P/A)*A;M?m.forEach((I,te)=>{I.column===$&&L.push(te)}):L.push($)}}if(f.__preventObserver__=!0,requestAnimationFrame(()=>{f.__preventObserver__=!1}),f.params.effect==="cards"&&m.length<S+k*2&&(L.includes(a)&&L.splice(L.indexOf(a),1),N.includes(a)&&N.splice(N.indexOf(a),1)),K&&N.forEach(P=>{m[P].swiperLoopMoveDOM=!0,b.prepend(m[P]),m[P].swiperLoopMoveDOM=!1}),W&&L.forEach(P=>{m[P].swiperLoopMoveDOM=!0,b.append(m[P]),m[P].swiperLoopMoveDOM=!1}),f.recalcSlides(),w.slidesPerView==="auto"?f.updateSlides():M&&(N.length>0&&K||L.length>0&&W)&&f.slides.forEach((P,$)=>{f.grid.updateSlide($,P,f.slides)}),w.watchSlidesProgress&&f.updateSlidesOffset(),t){if(N.length>0&&K){if(typeof e>"u"){const P=f.slidesGrid[Y],I=f.slidesGrid[Y+q]-P;d?f.setTranslate(f.translate-I):(f.slideTo(Y+Math.ceil(q),0,!1,!0),r&&(f.touchEventsData.startTranslate=f.touchEventsData.startTranslate-I,f.touchEventsData.currentTranslate=f.touchEventsData.currentTranslate-I))}else if(r){const P=M?N.length/w.grid.rows:N.length;f.slideTo(f.activeIndex+P,0,!1,!0),f.touchEventsData.currentTranslate=f.translate}}else if(L.length>0&&W)if(typeof e>"u"){const P=f.slidesGrid[Y],I=f.slidesGrid[Y-oe]-P;d?f.setTranslate(f.translate-I):(f.slideTo(Y-oe,0,!1,!0),r&&(f.touchEventsData.startTranslate=f.touchEventsData.startTranslate-I,f.touchEventsData.currentTranslate=f.touchEventsData.currentTranslate-I))}else{const P=M?L.length/w.grid.rows:L.length;f.slideTo(f.activeIndex-P,0,!1,!0)}}if(f.allowSlidePrev=v,f.allowSlideNext=y,f.controller&&f.controller.control&&!u){const P={slideRealIndex:e,direction:s,setTranslate:r,activeSlideIndex:a,byController:!0};Array.isArray(f.controller.control)?f.controller.control.forEach($=>{!$.destroyed&&$.params.loop&&$.loopFix({...P,slideTo:$.params.slidesPerView===w.slidesPerView?t:!1})}):f.controller.control instanceof f.constructor&&f.controller.control.params.loop&&f.controller.control.loopFix({...P,slideTo:f.controller.control.params.slidesPerView===w.slidesPerView?t:!1})}f.emit("loopFix")}function oP(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||!t||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const s=[];n.slides.forEach(r=>{const a=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;s[a]=r}),n.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),s.forEach(r=>{t.append(r)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var lP={loopCreate:iP,loopFix:aP,loopDestroy:oP};function cP(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function uP(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var dP={setGrabCursor:cP,unsetGrabCursor:uP};function hP(n,e){e===void 0&&(e=this);function t(s){if(!s||s===Xi()||s===ws())return null;s.assignedSlot&&(s=s.assignedSlot);const r=s.closest(n);return!r&&!s.getRootNode?null:r||t(s.getRootNode().host)}return t(e)}function P1(n,e,t){const s=ws(),{params:r}=n,a=r.edgeSwipeDetection,l=r.edgeSwipeThreshold;return a&&(t<=l||t>=s.innerWidth-l)?a==="prevent"?(e.preventDefault(),!0):!1:!0}function fP(n){const e=this,t=Xi();let s=n;s.originalEvent&&(s=s.originalEvent);const r=e.touchEventsData;if(s.type==="pointerdown"){if(r.pointerId!==null&&r.pointerId!==s.pointerId)return;r.pointerId=s.pointerId}else s.type==="touchstart"&&s.targetTouches.length===1&&(r.touchId=s.targetTouches[0].identifier);if(s.type==="touchstart"){P1(e,s,s.targetTouches[0].pageX);return}const{params:a,touches:l,enabled:u}=e;if(!u||!a.simulateTouch&&s.pointerType==="mouse"||e.animating&&a.preventInteractionOnTransition)return;!e.animating&&a.cssMode&&a.loop&&e.loopFix();let d=s.target;if(a.touchEventsTarget==="wrapper"&&!bR(d,e.wrapperEl)||"which"in s&&s.which===3||"button"in s&&s.button>0||r.isTouched&&r.isMoved)return;const f=!!a.noSwipingClass&&a.noSwipingClass!=="",m=s.composedPath?s.composedPath():s.path;f&&s.target&&s.target.shadowRoot&&m&&(d=m[0]);const v=a.noSwipingSelector?a.noSwipingSelector:`.${a.noSwipingClass}`,y=!!(s.target&&s.target.shadowRoot);if(a.noSwiping&&(y?hP(v,d):d.closest(v))){e.allowClick=!0;return}if(a.swipeHandler&&!d.closest(a.swipeHandler))return;l.currentX=s.pageX,l.currentY=s.pageY;const b=l.currentX,w=l.currentY;if(!P1(e,s,b))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),l.startX=b,l.startY=w,r.touchStartTime=Vd(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,a.threshold>0&&(r.allowThresholdMove=!1);let _=!0;d.matches(r.focusableElements)&&(_=!1,d.nodeName==="SELECT"&&(r.isTouched=!1)),t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==d&&(s.pointerType==="mouse"||s.pointerType!=="mouse"&&!d.matches(r.focusableElements))&&t.activeElement.blur();const T=_&&e.allowTouchMove&&a.touchStartPreventDefault;(a.touchStartForcePreventDefault||T)&&!d.isContentEditable&&s.preventDefault(),a.freeMode&&a.freeMode.enabled&&e.freeMode&&e.animating&&!a.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",s)}function gP(n){const e=Xi(),t=this,s=t.touchEventsData,{params:r,touches:a,rtlTranslate:l,enabled:u}=t;if(!u||!r.simulateTouch&&n.pointerType==="mouse")return;let d=n;if(d.originalEvent&&(d=d.originalEvent),d.type==="pointermove"&&(s.touchId!==null||d.pointerId!==s.pointerId))return;let f;if(d.type==="touchmove"){if(f=[...d.changedTouches].find(N=>N.identifier===s.touchId),!f||f.identifier!==s.touchId)return}else f=d;if(!s.isTouched){s.startMoving&&s.isScrolling&&t.emit("touchMoveOpposite",d);return}const m=f.pageX,v=f.pageY;if(d.preventedByNestedSwiper){a.startX=m,a.startY=v;return}if(!t.allowTouchMove){d.target.matches(s.focusableElements)||(t.allowClick=!1),s.isTouched&&(Object.assign(a,{startX:m,startY:v,currentX:m,currentY:v}),s.touchStartTime=Vd());return}if(r.touchReleaseOnEdges&&!r.loop)if(t.isVertical()){if(v<a.startY&&t.translate<=t.maxTranslate()||v>a.startY&&t.translate>=t.minTranslate()){s.isTouched=!1,s.isMoved=!1;return}}else{if(l&&(m>a.startX&&-t.translate<=t.maxTranslate()||m<a.startX&&-t.translate>=t.minTranslate()))return;if(!l&&(m<a.startX&&t.translate<=t.maxTranslate()||m>a.startX&&t.translate>=t.minTranslate()))return}if(e.activeElement&&e.activeElement.matches(s.focusableElements)&&e.activeElement!==d.target&&d.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&d.target===e.activeElement&&d.target.matches(s.focusableElements)){s.isMoved=!0,t.allowClick=!1;return}s.allowTouchCallbacks&&t.emit("touchMove",d),a.previousX=a.currentX,a.previousY=a.currentY,a.currentX=m,a.currentY=v;const y=a.currentX-a.startX,b=a.currentY-a.startY;if(t.params.threshold&&Math.sqrt(y**2+b**2)<t.params.threshold)return;if(typeof s.isScrolling>"u"){let N;t.isHorizontal()&&a.currentY===a.startY||t.isVertical()&&a.currentX===a.startX?s.isScrolling=!1:y*y+b*b>=25&&(N=Math.atan2(Math.abs(b),Math.abs(y))*180/Math.PI,s.isScrolling=t.isHorizontal()?N>r.touchAngle:90-N>r.touchAngle)}if(s.isScrolling&&t.emit("touchMoveOpposite",d),typeof s.startMoving>"u"&&(a.currentX!==a.startX||a.currentY!==a.startY)&&(s.startMoving=!0),s.isScrolling||d.type==="touchmove"&&s.preventTouchMoveFromPointerMove){s.isTouched=!1;return}if(!s.startMoving)return;t.allowClick=!1,!r.cssMode&&d.cancelable&&d.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&d.stopPropagation();let w=t.isHorizontal()?y:b,_=t.isHorizontal()?a.currentX-a.previousX:a.currentY-a.previousY;r.oneWayMovement&&(w=Math.abs(w)*(l?1:-1),_=Math.abs(_)*(l?1:-1)),a.diff=w,w*=r.touchRatio,l&&(w=-w,_=-_);const T=t.touchesDirection;t.swipeDirection=w>0?"prev":"next",t.touchesDirection=_>0?"prev":"next";const S=t.params.loop&&!r.cssMode,D=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!s.isMoved){if(S&&D&&t.loopFix({direction:t.swipeDirection}),s.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const N=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(N)}s.allowMomentumBounce=!1,r.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",d)}if(new Date().getTime(),r._loopSwapReset!==!1&&s.isMoved&&s.allowThresholdMove&&T!==t.touchesDirection&&S&&D&&Math.abs(w)>=1){Object.assign(a,{startX:m,startY:v,currentX:m,currentY:v,startTranslate:s.currentTranslate}),s.loopSwapReset=!0,s.startTranslate=s.currentTranslate;return}t.emit("sliderMove",d),s.isMoved=!0,s.currentTranslate=w+s.startTranslate;let k=!0,M=r.resistanceRatio;if(r.touchReleaseOnEdges&&(M=0),w>0?(S&&D&&s.allowThresholdMove&&s.currentTranslate>(r.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(r.slidesPerView!=="auto"&&t.slides.length-r.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),s.currentTranslate>t.minTranslate()&&(k=!1,r.resistance&&(s.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+s.startTranslate+w)**M))):w<0&&(S&&D&&s.allowThresholdMove&&s.currentTranslate<(r.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(r.slidesPerView!=="auto"&&t.slides.length-r.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(r.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),s.currentTranslate<t.maxTranslate()&&(k=!1,r.resistance&&(s.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-s.startTranslate-w)**M))),k&&(d.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&s.currentTranslate<s.startTranslate&&(s.currentTranslate=s.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&s.currentTranslate>s.startTranslate&&(s.currentTranslate=s.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(s.currentTranslate=s.startTranslate),r.threshold>0)if(Math.abs(w)>r.threshold||s.allowThresholdMove){if(!s.allowThresholdMove){s.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,s.currentTranslate=s.startTranslate,a.diff=t.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY;return}}else{s.currentTranslate=s.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&t.freeMode||r.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(s.currentTranslate),t.setTranslate(s.currentTranslate))}function mP(n){const e=this,t=e.touchEventsData;let s=n;s.originalEvent&&(s=s.originalEvent);let r;if(s.type==="touchend"||s.type==="touchcancel"){if(r=[...s.changedTouches].find(N=>N.identifier===t.touchId),!r||r.identifier!==t.touchId)return}else{if(t.touchId!==null||s.pointerId!==t.pointerId)return;r=s}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(s.type)&&!(["pointercancel","contextmenu"].includes(s.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:l,touches:u,rtlTranslate:d,slidesGrid:f,enabled:m}=e;if(!m||!l.simulateTouch&&s.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",s),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&l.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}l.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const v=Vd(),y=v-t.touchStartTime;if(e.allowClick){const N=s.path||s.composedPath&&s.composedPath();e.updateClickedSlide(N&&N[0]||s.target,N),e.emit("tap click",s),y<300&&v-t.lastClickTime<300&&e.emit("doubleTap doubleClick",s)}if(t.lastClickTime=Vd(),XS(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||u.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let b;if(l.followFinger?b=d?e.translate:-e.translate:b=-t.currentTranslate,l.cssMode)return;if(l.freeMode&&l.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:b});return}const w=b>=-e.maxTranslate()&&!e.params.loop;let _=0,T=e.slidesSizesGrid[0];for(let N=0;N<f.length;N+=N<l.slidesPerGroupSkip?1:l.slidesPerGroup){const L=N<l.slidesPerGroupSkip-1?1:l.slidesPerGroup;typeof f[N+L]<"u"?(w||b>=f[N]&&b<f[N+L])&&(_=N,T=f[N+L]-f[N]):(w||b>=f[N])&&(_=N,T=f[f.length-1]-f[f.length-2])}let S=null,D=null;l.rewind&&(e.isBeginning?D=l.virtual&&l.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(S=0));const k=(b-f[_])/T,M=_<l.slidesPerGroupSkip-1?1:l.slidesPerGroup;if(y>l.longSwipesMs){if(!l.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(k>=l.longSwipesRatio?e.slideTo(l.rewind&&e.isEnd?S:_+M):e.slideTo(_)),e.swipeDirection==="prev"&&(k>1-l.longSwipesRatio?e.slideTo(_+M):D!==null&&k<0&&Math.abs(k)>l.longSwipesRatio?e.slideTo(D):e.slideTo(_))}else{if(!l.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(s.target===e.navigation.nextEl||s.target===e.navigation.prevEl)?s.target===e.navigation.nextEl?e.slideTo(_+M):e.slideTo(_):(e.swipeDirection==="next"&&e.slideTo(S!==null?S:_+M),e.swipeDirection==="prev"&&e.slideTo(D!==null?D:_))}}function L1(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:s,allowSlidePrev:r,snapGrid:a}=n,l=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const u=l&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!u?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!l?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=r,n.allowSlideNext=s,n.params.watchOverflow&&a!==n.snapGrid&&n.checkOverflow()}function pP(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function vP(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:s}=n;if(!s)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let r;const a=n.maxTranslate()-n.minTranslate();a===0?r=0:r=(n.translate-n.minTranslate())/a,r!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function yP(n){const e=this;jd(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function xP(){const n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}const tC=(n,e)=>{const t=Xi(),{params:s,el:r,wrapperEl:a,device:l}=n,u=!!s.nested,d=e==="on"?"addEventListener":"removeEventListener",f=e;!r||typeof r=="string"||(t[d]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:u}),r[d]("touchstart",n.onTouchStart,{passive:!1}),r[d]("pointerdown",n.onTouchStart,{passive:!1}),t[d]("touchmove",n.onTouchMove,{passive:!1,capture:u}),t[d]("pointermove",n.onTouchMove,{passive:!1,capture:u}),t[d]("touchend",n.onTouchEnd,{passive:!0}),t[d]("pointerup",n.onTouchEnd,{passive:!0}),t[d]("pointercancel",n.onTouchEnd,{passive:!0}),t[d]("touchcancel",n.onTouchEnd,{passive:!0}),t[d]("pointerout",n.onTouchEnd,{passive:!0}),t[d]("pointerleave",n.onTouchEnd,{passive:!0}),t[d]("contextmenu",n.onTouchEnd,{passive:!0}),(s.preventClicks||s.preventClicksPropagation)&&r[d]("click",n.onClick,!0),s.cssMode&&a[d]("scroll",n.onScroll),s.updateOnWindowResize?n[f](l.ios||l.android?"resize orientationchange observerUpdate":"resize observerUpdate",L1,!0):n[f]("observerUpdate",L1,!0),r[d]("load",n.onLoad,{capture:!0}))};function bP(){const n=this,{params:e}=n;n.onTouchStart=fP.bind(n),n.onTouchMove=gP.bind(n),n.onTouchEnd=mP.bind(n),n.onDocumentTouchStart=xP.bind(n),e.cssMode&&(n.onScroll=vP.bind(n)),n.onClick=pP.bind(n),n.onLoad=yP.bind(n),tC(n,"on")}function wP(){tC(this,"off")}var _P={attachEvents:bP,detachEvents:wP};const B1=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function SP(){const n=this,{realIndex:e,initialized:t,params:s,el:r}=n,a=s.breakpoints;if(!a||a&&Object.keys(a).length===0)return;const l=Xi(),u=s.breakpointsBase==="window"||!s.breakpointsBase?s.breakpointsBase:"container",d=["window","container"].includes(s.breakpointsBase)||!s.breakpointsBase?n.el:l.querySelector(s.breakpointsBase),f=n.getBreakpoint(a,u,d);if(!f||n.currentBreakpoint===f)return;const v=(f in a?a[f]:void 0)||n.originalParams,y=B1(n,s),b=B1(n,v),w=n.params.grabCursor,_=v.grabCursor,T=s.enabled;y&&!b?(r.classList.remove(`${s.containerModifierClass}grid`,`${s.containerModifierClass}grid-column`),n.emitContainerClasses()):!y&&b&&(r.classList.add(`${s.containerModifierClass}grid`),(v.grid.fill&&v.grid.fill==="column"||!v.grid.fill&&s.grid.fill==="column")&&r.classList.add(`${s.containerModifierClass}grid-column`),n.emitContainerClasses()),w&&!_?n.unsetGrabCursor():!w&&_&&n.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(L=>{if(typeof v[L]>"u")return;const A=s[L]&&s[L].enabled,B=v[L]&&v[L].enabled;A&&!B&&n[L].disable(),!A&&B&&n[L].enable()});const S=v.direction&&v.direction!==s.direction,D=s.loop&&(v.slidesPerView!==s.slidesPerView||S),k=s.loop;S&&t&&n.changeDirection(),Hs(n.params,v);const M=n.params.enabled,N=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),T&&!M?n.disable():!T&&M&&n.enable(),n.currentBreakpoint=f,n.emit("_beforeBreakpoint",v),t&&(D?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!k&&N?(n.loopCreate(e),n.updateSlides()):k&&!N&&n.loopDestroy()),n.emit("breakpoint",v)}function CP(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let s=!1;const r=ws(),a=e==="window"?r.innerHeight:t.clientHeight,l=Object.keys(n).map(u=>{if(typeof u=="string"&&u.indexOf("@")===0){const d=parseFloat(u.substr(1));return{value:a*d,point:u}}return{value:u,point:u}});l.sort((u,d)=>parseInt(u.value,10)-parseInt(d.value,10));for(let u=0;u<l.length;u+=1){const{point:d,value:f}=l[u];e==="window"?r.matchMedia(`(min-width: ${f}px)`).matches&&(s=d):f<=t.clientWidth&&(s=d)}return s||"max"}var TP={setBreakpoint:SP,getBreakpoint:CP};function jP(n,e){const t=[];return n.forEach(s=>{typeof s=="object"?Object.keys(s).forEach(r=>{s[r]&&t.push(e+r)}):typeof s=="string"&&t.push(e+s)}),t}function EP(){const n=this,{classNames:e,params:t,rtl:s,el:r,device:a}=n,l=jP(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:s},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:a.android},{ios:a.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...l),r.classList.add(...e),n.emitContainerClasses()}function kP(){const n=this,{el:e,classNames:t}=n;!e||typeof e=="string"||(e.classList.remove(...t),n.emitContainerClasses())}var AP={addClasses:EP,removeClasses:kP};function DP(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:s}=t;if(s){const r=n.slides.length-1,a=n.slidesGrid[r]+n.slidesSizesGrid[r]+s*2;n.isLocked=n.size>a}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var NP={checkOverflow:DP},ap={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function OP(n,e){return function(s){s===void 0&&(s={});const r=Object.keys(s)[0],a=s[r];if(typeof a!="object"||a===null){Hs(e,s);return}if(n[r]===!0&&(n[r]={enabled:!0}),r==="navigation"&&n[r]&&n[r].enabled&&!n[r].prevEl&&!n[r].nextEl&&(n[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&n[r]&&n[r].enabled&&!n[r].el&&(n[r].auto=!0),!(r in n&&"enabled"in a)){Hs(e,s);return}typeof n[r]=="object"&&!("enabled"in n[r])&&(n[r].enabled=!0),n[r]||(n[r]={enabled:!1}),Hs(e,s)}}const um={eventsEmitter:AR,update:zR,translate:YR,transition:KR,slide:rP,loop:lP,grabCursor:dP,events:_P,breakpoints:TP,checkOverflow:NP,classes:AP},dm={};let y0=class rr{constructor(){let e,t;for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?t=r[0]:[e,t]=r,t||(t={}),t=Hs({},t),e&&!t.el&&(t.el=e);const l=Xi();if(t.el&&typeof t.el=="string"&&l.querySelectorAll(t.el).length>1){const m=[];return l.querySelectorAll(t.el).forEach(v=>{const y=Hs({},t,{el:v});m.push(new rr(y))}),m}const u=this;u.__swiper__=!0,u.support=QS(),u.device=ZS({userAgent:t.userAgent}),u.browser=JS(),u.eventsListeners={},u.eventsAnyListeners=[],u.modules=[...u.__modules__],t.modules&&Array.isArray(t.modules)&&u.modules.push(...t.modules);const d={};u.modules.forEach(m=>{m({params:t,swiper:u,extendParams:OP(t,d),on:u.on.bind(u),once:u.once.bind(u),off:u.off.bind(u),emit:u.emit.bind(u)})});const f=Hs({},ap,d);return u.params=Hs({},f,dm,t),u.originalParams=Hs({},u.params),u.passedParams=Hs({},t),u.params&&u.params.on&&Object.keys(u.params.on).forEach(m=>{u.on(m,u.params.on[m])}),u.params&&u.params.onAny&&u.onAny(u.params.onAny),Object.assign(u,{enabled:u.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return u.params.direction==="horizontal"},isVertical(){return u.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:u.params.allowSlideNext,allowSlidePrev:u.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:u.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:u.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),u.emit("_swiper"),u.params.init&&u.init(),u}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:s}=this,r=Mn(t,`.${s.slideClass}, swiper-slide`),a=N1(r[0]);return N1(e)-a}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>t.getAttribute("data-swiper-slide-index")*1===e))}getSlideIndexWhenGrid(e){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?e=Math.floor(e/this.params.grid.rows):this.params.grid.fill==="row"&&(e=e%Math.ceil(this.slides.length/this.params.grid.rows))),e}recalcSlides(){const e=this,{slidesEl:t,params:s}=e;e.slides=Mn(t,`.${s.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const s=this;e=Math.min(Math.max(e,0),1);const r=s.minTranslate(),l=(s.maxTranslate()-r)*e+r;s.translateTo(l,typeof t>"u"?0:t),s.updateActiveIndex(),s.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(s=>s.indexOf("swiper")===0||s.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(s=>s.indexOf("swiper-slide")===0||s.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(s=>{const r=e.getSlideClasses(s);t.push({slideEl:s,classNames:r}),e.emit("_slideClass",s,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const s=this,{params:r,slides:a,slidesGrid:l,slidesSizesGrid:u,size:d,activeIndex:f}=s;let m=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let v=a[f]?Math.ceil(a[f].swiperSlideSize):0,y;for(let b=f+1;b<a.length;b+=1)a[b]&&!y&&(v+=Math.ceil(a[b].swiperSlideSize),m+=1,v>d&&(y=!0));for(let b=f-1;b>=0;b-=1)a[b]&&!y&&(v+=a[b].swiperSlideSize,m+=1,v>d&&(y=!0))}else if(e==="current")for(let v=f+1;v<a.length;v+=1)(t?l[v]+u[v]-l[f]<d:l[v]-l[f]<d)&&(m+=1);else for(let v=f-1;v>=0;v-=1)l[f]-l[v]<d&&(m+=1);return m}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:s}=e;s.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(l=>{l.complete&&jd(e,l)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const l=e.rtlTranslate?e.translate*-1:e.translate,u=Math.min(Math.max(l,e.maxTranslate()),e.minTranslate());e.setTranslate(u),e.updateActiveIndex(),e.updateSlidesClasses()}let a;if(s.freeMode&&s.freeMode.enabled&&!s.cssMode)r(),s.autoHeight&&e.updateAutoHeight();else{if((s.slidesPerView==="auto"||s.slidesPerView>1)&&e.isEnd&&!s.centeredSlides){const l=e.virtual&&s.virtual.enabled?e.virtual.slides:e.slides;a=e.slideTo(l.length-1,0,!1,!0)}else a=e.slideTo(e.activeIndex,0,!1,!0);a||r()}s.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const s=this,r=s.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(s.el.classList.remove(`${s.params.containerModifierClass}${r}`),s.el.classList.add(`${s.params.containerModifierClass}${e}`),s.emitContainerClasses(),s.params.direction=e,s.slides.forEach(a=>{e==="vertical"?a.style.width="":a.style.height=""}),s.emit("changeDirection"),t&&s.update()),s}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let s=e||t.params.el;if(typeof s=="string"&&(s=document.querySelector(s)),!s)return!1;s.swiper=t,s.parentNode&&s.parentNode.host&&s.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let l=s&&s.shadowRoot&&s.shadowRoot.querySelector?s.shadowRoot.querySelector(r()):Mn(s,r())[0];return!l&&t.params.createElements&&(l=Hd("div",t.params.wrapperClass),s.append(l),Mn(s,`.${t.params.slideClass}`).forEach(u=>{l.append(u)})),Object.assign(t,{el:s,wrapperEl:l,slidesEl:t.isElement&&!s.parentNode.host.slideSlots?s.parentNode.host:l,hostEl:t.isElement?s.parentNode.host:s,mounted:!0,rtl:s.dir.toLowerCase()==="rtl"||ti(s,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(s.dir.toLowerCase()==="rtl"||ti(s,"direction")==="rtl"),wrongRTL:ti(l,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const r=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&r.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(a=>{a.complete?jd(t,a):a.addEventListener("load",l=>{jd(t,l.target)})}),ip(t),t.initialized=!0,ip(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const s=this,{params:r,el:a,wrapperEl:l,slides:u}=s;return typeof s.params>"u"||s.destroyed||(s.emit("beforeDestroy"),s.initialized=!1,s.detachEvents(),r.loop&&s.loopDestroy(),t&&(s.removeClasses(),a&&typeof a!="string"&&a.removeAttribute("style"),l&&l.removeAttribute("style"),u&&u.length&&u.forEach(d=>{d.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),d.removeAttribute("style"),d.removeAttribute("data-swiper-slide-index")})),s.emit("destroy"),Object.keys(s.eventsListeners).forEach(d=>{s.off(d)}),e!==!1&&(s.el&&typeof s.el!="string"&&(s.el.swiper=null),mR(s)),s.destroyed=!0),null}static extendDefaults(e){Hs(dm,e)}static get extendedDefaults(){return dm}static get defaults(){return ap}static installModule(e){rr.prototype.__modules__||(rr.prototype.__modules__=[]);const t=rr.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>rr.installModule(t)),rr):(rr.installModule(e),rr)}};Object.keys(um).forEach(n=>{Object.keys(um[n]).forEach(e=>{y0.prototype[e]=um[n][e]})});y0.use([ER,kR]);const sC=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Gi(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function no(n,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(s=>t.indexOf(s)<0).forEach(s=>{typeof n[s]>"u"?n[s]=e[s]:Gi(e[s])&&Gi(n[s])&&Object.keys(e[s]).length>0?e[s].__swiper__?n[s]=e[s]:no(n[s],e[s]):n[s]=e[s]})}function nC(n){return n===void 0&&(n={}),n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function rC(n){return n===void 0&&(n={}),n.pagination&&typeof n.pagination.el>"u"}function iC(n){return n===void 0&&(n={}),n.scrollbar&&typeof n.scrollbar.el>"u"}function aC(n){n===void 0&&(n="");const e=n.split(" ").map(s=>s.trim()).filter(s=>!!s),t=[];return e.forEach(s=>{t.indexOf(s)<0&&t.push(s)}),t.join(" ")}function MP(n){return n===void 0&&(n=""),n?n.includes("swiper-wrapper")?n:`swiper-wrapper ${n}`:"swiper-wrapper"}function RP(n){let{swiper:e,slides:t,passedParams:s,changedParams:r,nextEl:a,prevEl:l,scrollbarEl:u,paginationEl:d}=n;const f=r.filter(Y=>Y!=="children"&&Y!=="direction"&&Y!=="wrapperClass"),{params:m,pagination:v,navigation:y,scrollbar:b,virtual:w,thumbs:_}=e;let T,S,D,k,M,N,L,A;r.includes("thumbs")&&s.thumbs&&s.thumbs.swiper&&!s.thumbs.swiper.destroyed&&m.thumbs&&(!m.thumbs.swiper||m.thumbs.swiper.destroyed)&&(T=!0),r.includes("controller")&&s.controller&&s.controller.control&&m.controller&&!m.controller.control&&(S=!0),r.includes("pagination")&&s.pagination&&(s.pagination.el||d)&&(m.pagination||m.pagination===!1)&&v&&!v.el&&(D=!0),r.includes("scrollbar")&&s.scrollbar&&(s.scrollbar.el||u)&&(m.scrollbar||m.scrollbar===!1)&&b&&!b.el&&(k=!0),r.includes("navigation")&&s.navigation&&(s.navigation.prevEl||l)&&(s.navigation.nextEl||a)&&(m.navigation||m.navigation===!1)&&y&&!y.prevEl&&!y.nextEl&&(M=!0);const B=Y=>{e[Y]&&(e[Y].destroy(),Y==="navigation"?(e.isElement&&(e[Y].prevEl.remove(),e[Y].nextEl.remove()),m[Y].prevEl=void 0,m[Y].nextEl=void 0,e[Y].prevEl=void 0,e[Y].nextEl=void 0):(e.isElement&&e[Y].el.remove(),m[Y].el=void 0,e[Y].el=void 0))};r.includes("loop")&&e.isElement&&(m.loop&&!s.loop?N=!0:!m.loop&&s.loop?L=!0:A=!0),f.forEach(Y=>{if(Gi(m[Y])&&Gi(s[Y]))Object.assign(m[Y],s[Y]),(Y==="navigation"||Y==="pagination"||Y==="scrollbar")&&"enabled"in s[Y]&&!s[Y].enabled&&B(Y);else{const W=s[Y];(W===!0||W===!1)&&(Y==="navigation"||Y==="pagination"||Y==="scrollbar")?W===!1&&B(Y):m[Y]=s[Y]}}),f.includes("controller")&&!S&&e.controller&&e.controller.control&&m.controller&&m.controller.control&&(e.controller.control=m.controller.control),r.includes("children")&&t&&w&&m.virtual.enabled?(w.slides=t,w.update(!0)):r.includes("virtual")&&w&&m.virtual.enabled&&(t&&(w.slides=t),w.update(!0)),r.includes("children")&&t&&m.loop&&(A=!0),T&&_.init()&&_.update(!0),S&&(e.controller.control=m.controller.control),D&&(e.isElement&&(!d||typeof d=="string")&&(d=document.createElement("div"),d.classList.add("swiper-pagination"),d.part.add("pagination"),e.el.appendChild(d)),d&&(m.pagination.el=d),v.init(),v.render(),v.update()),k&&(e.isElement&&(!u||typeof u=="string")&&(u=document.createElement("div"),u.classList.add("swiper-scrollbar"),u.part.add("scrollbar"),e.el.appendChild(u)),u&&(m.scrollbar.el=u),b.init(),b.updateSize(),b.setTranslate()),M&&(e.isElement&&((!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-next"),M1(a,e.hostEl.constructor.nextButtonSvg),a.part.add("button-next"),e.el.appendChild(a)),(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-button-prev"),M1(l,e.hostEl.constructor.prevButtonSvg),l.part.add("button-prev"),e.el.appendChild(l))),a&&(m.navigation.nextEl=a),l&&(m.navigation.prevEl=l),y.init(),y.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=s.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=s.allowSlidePrev),r.includes("direction")&&e.changeDirection(s.direction,!1),(N||A)&&e.loopDestroy(),(L||A)&&e.loopCreate(),e.update()}function PP(n,e){n===void 0&&(n={}),e===void 0&&(e=!0);const t={on:{}},s={},r={};no(t,ap),t._emitClasses=!0,t.init=!1;const a={},l=sC.map(d=>d.replace(/_/,"")),u=Object.assign({},n);return Object.keys(u).forEach(d=>{typeof n[d]>"u"||(l.indexOf(d)>=0?Gi(n[d])?(t[d]={},r[d]={},no(t[d],n[d]),no(r[d],n[d])):(t[d]=n[d],r[d]=n[d]):d.search(/on[A-Z]/)===0&&typeof n[d]=="function"?e?s[`${d[2].toLowerCase()}${d.substr(3)}`]=n[d]:t.on[`${d[2].toLowerCase()}${d.substr(3)}`]=n[d]:a[d]=n[d])}),["navigation","pagination","scrollbar"].forEach(d=>{t[d]===!0&&(t[d]={}),t[d]===!1&&delete t[d]}),{params:t,passedParams:r,rest:a,events:s}}function LP(n,e){let{el:t,nextEl:s,prevEl:r,paginationEl:a,scrollbarEl:l,swiper:u}=n;nC(e)&&s&&r&&(u.params.navigation.nextEl=s,u.originalParams.navigation.nextEl=s,u.params.navigation.prevEl=r,u.originalParams.navigation.prevEl=r),rC(e)&&a&&(u.params.pagination.el=a,u.originalParams.pagination.el=a),iC(e)&&l&&(u.params.scrollbar.el=l,u.originalParams.scrollbar.el=l),u.init(t)}function BP(n,e,t,s,r){const a=[];if(!e)return a;const l=d=>{a.indexOf(d)<0&&a.push(d)};if(t&&s){const d=s.map(r),f=t.map(r);d.join("")!==f.join("")&&l("children"),s.length!==t.length&&l("children")}return sC.filter(d=>d[0]==="_").map(d=>d.replace(/_/,"")).forEach(d=>{if(d in n&&d in e)if(Gi(n[d])&&Gi(e[d])){const f=Object.keys(n[d]),m=Object.keys(e[d]);f.length!==m.length?l(d):(f.forEach(v=>{n[d][v]!==e[d][v]&&l(d)}),m.forEach(v=>{n[d][v]!==e[d][v]&&l(d)}))}else n[d]!==e[d]&&l(d)}),a}const FP=n=>{!n||n.destroyed||!n.params.virtual||n.params.virtual&&!n.params.virtual.enabled||(n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.emit("_virtualUpdated"),n.parallax&&n.params.parallax&&n.params.parallax.enabled&&n.parallax.setTranslate())};function Gd(){return Gd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Gd.apply(this,arguments)}function oC(n){return n.type&&n.type.displayName&&n.type.displayName.includes("SwiperSlide")}function lC(n){const e=[];return Vt.Children.toArray(n).forEach(t=>{oC(t)?e.push(t):t.props&&t.props.children&&lC(t.props.children).forEach(s=>e.push(s))}),e}function UP(n){const e=[],t={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Vt.Children.toArray(n).forEach(s=>{if(oC(s))e.push(s);else if(s.props&&s.props.slot&&t[s.props.slot])t[s.props.slot].push(s);else if(s.props&&s.props.children){const r=lC(s.props.children);r.length>0?r.forEach(a=>e.push(a)):t["container-end"].push(s)}else t["container-end"].push(s)}),{slides:e,slots:t}}function zP(n,e,t){if(!t)return null;const s=m=>{let v=m;return m<0?v=e.length+m:v>=e.length&&(v=v-e.length),v},r=n.isHorizontal()?{[n.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:a,to:l}=t,u=n.params.loop?-e.length:0,d=n.params.loop?e.length*2:e.length,f=[];for(let m=u;m<d;m+=1)m>=a&&m<=l&&f.push(e[s(m)]);return f.map((m,v)=>Vt.cloneElement(m,{swiper:n,style:r,key:m.props.virtualIndex||m.key||`slide-${v}`}))}function $l(n,e){return typeof window>"u"?j.useEffect(n,e):j.useLayoutEffect(n,e)}const F1=j.createContext(null),VP=j.createContext(null),cC=j.forwardRef(function(n,e){let{className:t,tag:s="div",wrapperTag:r="div",children:a,onSwiper:l,...u}=n===void 0?{}:n,d=!1;const[f,m]=j.useState("swiper"),[v,y]=j.useState(null),[b,w]=j.useState(!1),_=j.useRef(!1),T=j.useRef(null),S=j.useRef(null),D=j.useRef(null),k=j.useRef(null),M=j.useRef(null),N=j.useRef(null),L=j.useRef(null),A=j.useRef(null),{params:B,passedParams:Y,rest:W,events:K}=PP(u),{slides:q,slots:oe}=UP(a),re=()=>{w(!b)};Object.assign(B.on,{_containerClasses(te,O){m(O)}});const fe=()=>{Object.assign(B.on,K),d=!0;const te={...B};if(delete te.wrapperClass,S.current=new y0(te),S.current.virtual&&S.current.params.virtual.enabled){S.current.virtual.slides=q;const O={cache:!1,slides:q,renderExternal:y,renderExternalUpdate:!1};no(S.current.params.virtual,O),no(S.current.originalParams.virtual,O)}};T.current||fe(),S.current&&S.current.on("_beforeBreakpoint",re);const P=()=>{d||!K||!S.current||Object.keys(K).forEach(te=>{S.current.on(te,K[te])})},$=()=>{!K||!S.current||Object.keys(K).forEach(te=>{S.current.off(te,K[te])})};j.useEffect(()=>()=>{S.current&&S.current.off("_beforeBreakpoint",re)}),j.useEffect(()=>{!_.current&&S.current&&(S.current.emitSlidesClasses(),_.current=!0)}),$l(()=>{if(e&&(e.current=T.current),!!T.current)return S.current.destroyed&&fe(),LP({el:T.current,nextEl:M.current,prevEl:N.current,paginationEl:L.current,scrollbarEl:A.current,swiper:S.current},B),l&&!S.current.destroyed&&l(S.current),()=>{S.current&&!S.current.destroyed&&S.current.destroy(!0,!1)}},[]),$l(()=>{P();const te=BP(Y,D.current,q,k.current,O=>O.key);return D.current=Y,k.current=q,te.length&&S.current&&!S.current.destroyed&&RP({swiper:S.current,slides:q,passedParams:Y,changedParams:te,nextEl:M.current,prevEl:N.current,scrollbarEl:A.current,paginationEl:L.current}),()=>{$()}}),$l(()=>{FP(S.current)},[v]);function I(){return B.virtual?zP(S.current,q,v):q.map((te,O)=>Vt.cloneElement(te,{swiper:S.current,swiperSlideIndex:O}))}return Vt.createElement(s,Gd({ref:T,className:aC(`${f}${t?` ${t}`:""}`)},W),Vt.createElement(VP.Provider,{value:S.current},oe["container-start"],Vt.createElement(r,{className:MP(B.wrapperClass)},oe["wrapper-start"],I(),oe["wrapper-end"]),nC(B)&&Vt.createElement(Vt.Fragment,null,Vt.createElement("div",{ref:N,className:"swiper-button-prev"}),Vt.createElement("div",{ref:M,className:"swiper-button-next"})),iC(B)&&Vt.createElement("div",{ref:A,className:"swiper-scrollbar"}),rC(B)&&Vt.createElement("div",{ref:L,className:"swiper-pagination"}),oe["container-end"]))});cC.displayName="Swiper";const uC=j.forwardRef(function(n,e){let{tag:t="div",children:s,className:r="",swiper:a,zoom:l,lazy:u,virtualIndex:d,swiperSlideIndex:f,...m}=n===void 0?{}:n;const v=j.useRef(null),[y,b]=j.useState("swiper-slide"),[w,_]=j.useState(!1);function T(M,N,L){N===v.current&&b(L)}$l(()=>{if(typeof f<"u"&&(v.current.swiperSlideIndex=f),e&&(e.current=v.current),!(!v.current||!a)){if(a.destroyed){y!=="swiper-slide"&&b("swiper-slide");return}return a.on("_slideClass",T),()=>{a&&a.off("_slideClass",T)}}}),$l(()=>{a&&v.current&&!a.destroyed&&b(a.getSlideClasses(v.current))},[a]);const S={isActive:y.indexOf("swiper-slide-active")>=0,isVisible:y.indexOf("swiper-slide-visible")>=0,isPrev:y.indexOf("swiper-slide-prev")>=0,isNext:y.indexOf("swiper-slide-next")>=0},D=()=>typeof s=="function"?s(S):s,k=()=>{_(!0)};return Vt.createElement(t,Gd({ref:v,className:aC(`${y}${r?` ${r}`:""}`),"data-swiper-slide-index":d,onLoad:k},m),l&&Vt.createElement(F1.Provider,{value:S},Vt.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof l=="number"?l:void 0},D(),u&&!w&&Vt.createElement("div",{className:"swiper-lazy-preloader"}))),!l&&Vt.createElement(F1.Provider,{value:S},D(),u&&!w&&Vt.createElement("div",{className:"swiper-lazy-preloader"})))});uC.displayName="SwiperSlide";function IP(n,e,t,s){return n.params.createElements&&Object.keys(s).forEach(r=>{if(!t[r]&&t.auto===!0){let a=Mn(n.el,`.${s[r]}`)[0];a||(a=Hd("div",s[r]),a.className=s[r],n.el.append(a)),t[r]=a,e[r]=a}}),t}function HP(n){let{swiper:e,extendParams:t,on:s,emit:r}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function a(w){let _;return w&&typeof w=="string"&&e.isElement&&(_=e.el.querySelector(w)||e.hostEl.querySelector(w),_)?_:(w&&(typeof w=="string"&&(_=[...document.querySelectorAll(w)]),e.params.uniqueNavElements&&typeof w=="string"&&_&&_.length>1&&e.el.querySelectorAll(w).length===1?_=e.el.querySelector(w):_&&_.length===1&&(_=_[0])),w&&!_?w:_)}function l(w,_){const T=e.params.navigation;w=sr(w),w.forEach(S=>{S&&(S.classList[_?"add":"remove"](...T.disabledClass.split(" ")),S.tagName==="BUTTON"&&(S.disabled=_),e.params.watchOverflow&&e.enabled&&S.classList[e.isLocked?"add":"remove"](T.lockClass))})}function u(){const{nextEl:w,prevEl:_}=e.navigation;if(e.params.loop){l(_,!1),l(w,!1);return}l(_,e.isBeginning&&!e.params.rewind),l(w,e.isEnd&&!e.params.rewind)}function d(w){w.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function f(w){w.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function m(){const w=e.params.navigation;if(e.params.navigation=IP(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(w.nextEl||w.prevEl))return;let _=a(w.nextEl),T=a(w.prevEl);Object.assign(e.navigation,{nextEl:_,prevEl:T}),_=sr(_),T=sr(T);const S=(D,k)=>{D&&D.addEventListener("click",k==="next"?f:d),!e.enabled&&D&&D.classList.add(...w.lockClass.split(" "))};_.forEach(D=>S(D,"next")),T.forEach(D=>S(D,"prev"))}function v(){let{nextEl:w,prevEl:_}=e.navigation;w=sr(w),_=sr(_);const T=(S,D)=>{S.removeEventListener("click",D==="next"?f:d),S.classList.remove(...e.params.navigation.disabledClass.split(" "))};w.forEach(S=>T(S,"next")),_.forEach(S=>T(S,"prev"))}s("init",()=>{e.params.navigation.enabled===!1?b():(m(),u())}),s("toEdge fromEdge lock unlock",()=>{u()}),s("destroy",()=>{v()}),s("enable disable",()=>{let{nextEl:w,prevEl:_}=e.navigation;if(w=sr(w),_=sr(_),e.enabled){u();return}[...w,..._].filter(T=>!!T).forEach(T=>T.classList.add(e.params.navigation.lockClass))}),s("click",(w,_)=>{let{nextEl:T,prevEl:S}=e.navigation;T=sr(T),S=sr(S);const D=_.target;let k=S.includes(D)||T.includes(D);if(e.isElement&&!k){const M=_.path||_.composedPath&&_.composedPath();M&&(k=M.find(N=>T.includes(N)||S.includes(N)))}if(e.params.navigation.hideOnClick&&!k){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===D||e.pagination.el.contains(D)))return;let M;T.length?M=T[0].classList.contains(e.params.navigation.hiddenClass):S.length&&(M=S[0].classList.contains(e.params.navigation.hiddenClass)),r(M===!0?"navigationShow":"navigationHide"),[...T,...S].filter(N=>!!N).forEach(N=>N.classList.toggle(e.params.navigation.hiddenClass))}});const y=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),m(),u()},b=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),v()};Object.assign(e.navigation,{enable:y,disable:b,update:u,init:m,destroy:v})}function GP(n,e){const t=[];for(let s=0;s<n.length;s+=e)t.push(n.slice(s,s+e));return t}const $P=()=>{const[n,e]=j.useState(""),[t,s]=j.useState(""),[r,a]=j.useState(""),[l,u]=j.useState(""),[d,f]=j.useState(!1),[m,v]=j.useState(l),{session:y,signOut:b}=po(),[w,_]=j.useState(null),[T,S]=j.useState(!0),[D,k]=j.useState([]),[M,N]=j.useState(!1),L=Yi(),A=15551234567,B=()=>!l||l===A?A:l,Y=()=>!l||l===A,W=async()=>{try{await b(),L("/login"),setTimeout(()=>window.scrollTo(0,0),100)}catch(te){console.error("Error signing out:",te)}};j.useEffect(()=>{(async()=>{try{if(!y||!y.user){console.log("No session or user found.");return}const{data:O,error:H}=await be.from("CUSTOMER").select("*").eq("auth_user_id",y.user.id).single();H||!O?console.log("No profile data found for this user."):(e(O.cus_username||""),s(O.cus_fname||""),a(O.cus_lname||""),u(O.cus_celno||""),_(O))}catch(O){console.error("Error fetching profile:",O.message)}finally{S(!1)}})()},[y]),j.useEffect(()=>{w&&(async()=>{try{if(!w?.cus_id)return;const{data:O,error:H}=await be.from("CUSTOM-CAKE").select("*").eq("cus_id",w.cus_id);if(H)throw H;k(O)}catch(O){console.error("Error fetching custom cakes:",O.message)}})()},[w]);const K=GP(D,4),q=()=>{const te=Y()?"":l;v(te),f(!0)},oe=te=>{const O=te.target.value;(/^[\d]*$/.test(O)||O==="")&&v(O)},re=()=>{if(m&&!/^[\d]+$/.test(m)){ve.error("Phone number can only contain numbers",{duration:3e3,position:"top-center"});return}if(m&&(m.length<7||m.length>15)){ve.error("Phone number must be between 7 and 15 digits",{duration:3e3,position:"top-center"});return}u(m||""),f(!1)},fe=()=>{v(l),f(!1)},P=te=>{te.key==="Enter"?re():te.key==="Escape"&&fe()},$=()=>{setTimeout(()=>{f(!1)},100)},I=async()=>{if(!M){N(!0);try{if(!n.trim()){ve.error("Username is required",{duration:3e3,position:"top-center"});return}if(!t.trim()){ve.error("First name is required",{duration:3e3,position:"top-center"});return}if(!r.trim()){ve.error("Last name is required",{duration:3e3,position:"top-center"});return}const te=w?.cus_celno,O=m&&m.trim()!==""?m:A,H={cus_username:n.trim(),cus_fname:t.trim(),cus_lname:r.trim(),cus_celno:O},{error:ue}=await be.from("CUSTOMER").update(H).eq("auth_user_id",y.user.id);ue?(console.error("Error updating profile:",ue.message),ve.error(`Failed to update profile: ${ue.message}`,{duration:4e3,position:"top-center"})):(console.log("Profile updated successfully."),_(ne=>({...ne,...H})),u(O||""),f(!1),ve.success("Profile updated successfully!",{duration:3e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}))}catch(te){console.error("Unexpected error:",te),ve.error("An unexpected error occurred. Please try again.",{duration:4e3,position:"top-center"})}finally{N(!1)}}};return T?h.jsx(bo,{message:"Loading profile..."}):h.jsxs("section",{className:"bg-gradient-to-t from-[#424220] to-[#F8E6B4] min-h-screen flex flex-col items-center justify-center py-20 px-10",children:[h.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] w-full p-10 rounded-2xl shadow-2xl",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h1",{className:"text-3xl font-bold text-black",children:"My Profile"}),h.jsx("button",{onClick:W,className:"bg-red-500 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded",children:"Sign Out"})]}),h.jsx("div",{className:"flex justify-end mb-4"}),h.jsx("p",{className:"text-lg text-gray-500",children:"Manage and protect your account"}),h.jsx("hr",{className:"my-6 border-gray-400"}),h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{className:"block text-gray-500 font-semibold mb-2",children:"Username"}),h.jsx("input",{type:"text",value:n,onChange:te=>e(te.target.value),className:"bg-white border border-gray-300 px-4 py-2 rounded w-full"})]}),h.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-6",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{className:"block text-gray-500 font-semibold mb-2",children:"First Name"}),h.jsx("input",{type:"text",value:t,onChange:te=>s(te.target.value),className:"bg-white border border-gray-300 px-4 py-2 rounded w-full"})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{className:"block text-gray-500 font-semibold mb-2",children:"Last Name"}),h.jsx("input",{type:"text",value:r,onChange:te=>a(te.target.value),className:"bg-white border border-gray-300 px-4 py-2 rounded w-full"})]})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{className:"block text-gray-500 font-semibold mb-1",children:"Email"}),h.jsx("p",{className:"text-black text-lg font-medium",children:w?.email||""})]}),h.jsxs("div",{className:"mb-10 gap-3",children:[h.jsx("label",{className:"block text-gray-500 font-semibold mb-1",children:"Phone Number"}),h.jsx("div",{className:"flex items-center gap-5",children:d?h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"text",value:m||"",onChange:oe,onKeyPress:P,onBlur:$,className:"text-black text-lg font-medium border border-black rounded p-2",placeholder:"Enter your phone number",autoFocus:!0}),h.jsx("button",{onClick:re,className:"text-green-600 hover:text-green-800 cursor-pointer px-2 py-1 rounded",title:"Save",children:""}),h.jsx("button",{onClick:fe,className:"text-red-600 hover:text-red-800 cursor-pointer px-2 py-1 rounded",title:"Cancel",children:""})]}):h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("p",{className:`text-lg font-medium ${Y()?"text-gray-500 italic":"text-black"}`,children:B()}),Y()&&h.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full border border-yellow-300",children:"Default Number"}),h.jsx("button",{className:"text-blue-600 hover:text-blue-800 cursor-pointer",onClick:q,children:h.jsx("img",{className:"w-7 h-7 hover:color-red-500 ",src:"/edit.svg",alt:"Edit Icon"})})]})})]}),h.jsx("div",{className:"text-center",children:h.jsx("button",{className:`font-semibold py-2 px-10 rounded-lg text-lg cursor-pointer transition-colors ${M?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"}`,onClick:I,disabled:M,children:M?"Saving...":"Save"})})]}),h.jsxs("div",{className:"bg-gradient-to-t from-[#613C2A] to-[#EAD0C4] w-full p-10 rounded-2xl shadow-2xl mt-10",children:[h.jsx("div",{className:"bg-[#F2EFE8] p-2 rounded-full",children:h.jsx("p",{className:"text-2xl font-bold cursor-default",children:"Saved Custom Cakes:"})}),h.jsx("div",{className:"relative w-full min-h-[40vh] mt-10 bg-[#F3F0EA] rounded-r-3xl rounded-l-3xl py-6 px-4",children:D.length>0?h.jsxs(cC,{modules:[HP],navigation:{nextEl:".custom-next",prevEl:".custom-prev"},spaceBetween:20,slidesPerView:1,loop:!1,className:"w-full h-full",children:[K.map((te,O)=>h.jsx(uC,{children:h.jsx("div",{className:"flex justify-center gap-4",children:te.map((H,ue)=>h.jsxs("div",{className:"bg-white rounded-3xl shadow-lg overflow-hidden w-56 text-center",children:[h.jsx("img",{src:H.preview_url||"/placeholder.jpg",alt:`Custom Cake ${H.cc_id}`,className:"rounded-t-3xl object-cover h-40 w-full"}),h.jsxs("div",{className:"bg-[#3B3B3B] text-white py-2 px-2 rounded-b-3xl",children:[h.jsxs("h3",{className:"font-bold text-lg",children:["Custom Cake #",H.cc_id]}),h.jsxs("p",{className:"text-sm italic",children:["Order #",H.order_id]}),h.jsx("p",{className:"text-xs text-blue-200 underline",children:"click to size"})]})]},ue))})},O)),h.jsx("div",{className:"custom-prev absolute top-1/2 left-0 -translate-y-1/2 bg-gray-500 rounded-r-lg px-3 py-4 cursor-pointer z-10 text-white text-2xl",children:"<"}),h.jsx("div",{className:"custom-next absolute top-1/2 right-0 -translate-y-1/2 bg-gray-500 rounded-l-lg px-3 py-4 cursor-pointer z-10 text-white text-2xl",children:">"})]}):h.jsx("div",{className:"flex flex-col items-center justify-center h-full py-12",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"mb-4",children:h.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),h.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No Custom Cakes Yet"}),h.jsx("p",{className:"text-gray-500 mb-4",children:"You haven't created any custom cakes yet."}),h.jsx("p",{className:"text-sm text-gray-400",children:"Your custom cake designs will appear here once you create them."})]})})})]})]})},YP=n=>n?n.startsWith("http://")||n.startsWith("https://")?n:be.storage.from("cake").getPublicUrl(n).data.publicUrl:null,qP=()=>{const[n,e]=j.useState([]),[t,s]=j.useState(16e3),[r,a]=j.useState(!1),[l,u]=j.useState("default"),[d,f]=j.useState("all"),[m,v]=j.useState([]),[y,b]=j.useState(null),[w,_]=j.useState(!1),[T,S]=j.useState(1),[D,k]=j.useState(!0),M=21,[N,L]=j.useState(""),[A,B]=j.useState(""),[Y,W]=j.useState("Pickup"),[K,q]=j.useState(""),[oe,re]=j.useState(1),[fe,P]=j.useState(!1),[$,I]=j.useState(1),[te,O]=j.useState(!1),[H,ue]=j.useState(""),[ne,xe]=j.useState(!1);j.useEffect(()=>{(async()=>{try{k(!0);const{data:Be,error:We}=await be.from("CAKE").select("*");if(We){console.error("Error fetching cakes:",We.message),ve.error("Failed to load cakes. Please try again.");return}const et=Be.map(nt=>{const De=YP(nt.cake_img);return console.log(`Cake: ${nt.name}, cake_img: ${nt.cake_img}, publicUrl: ${De}`),{...nt,publicUrl:De}});e(et)}catch(Be){console.error("Error fetching cakes:",Be),ve.error("Failed to load cakes. Please try again.")}finally{k(!1)}})()},[]),j.useEffect(()=>{const he=()=>{const Be=window.scrollY,We=window.innerHeight,et=document.documentElement.scrollHeight,nt=Be+We>=et-200;Be>100&&!nt?a(!0):a(!1)};return window.addEventListener("scroll",he),()=>window.removeEventListener("scroll",he)},[]);const Ae=he=>{b(he),_(!0)},we=()=>{_(!1),b(null)},ze=()=>{if(!y)return;const he=new Date;he.setDate(he.getDate()+1),L(he.toISOString().split("T")[0]),B("14:00"),re(1),I(1),P(!0)},Ue=async()=>{if(!ne){if(console.log("handlePlaceOrder called"),console.log("selectedCake:",y),console.log("orderDate:",N),console.log("orderTime:",A),console.log("orderType:",Y),console.log("deliveryAddress:",K),!y||!N||!A||Y==="Delivery"&&!K){console.log("Validation failed - missing required fields"),ve.error("Please fill in all required fields");return}xe(!0);try{console.log("Starting order placement...");const{data:{session:he}}=await be.auth.getSession();if(!he){console.log("No user session found"),ve.error("Please log in to place an order");return}const{data:Be,error:We}=await be.from("CUSTOMER").select("cus_id").eq("auth_user_id",he.user.id).single();if(We||!Be){ve.error("Customer information not found. Please try again.");return}const et=y.price*oe,nt=new Date(`${N}T${A}`),De={order_date:new Date().toISOString().split("T")[0],delivery_method:Y,order_schedule:nt.toISOString().split("T")[0],delivery_address:Y==="Delivery"?K:null,cus_id:Be.cus_id,order_status:"Pending"};console.log("Attempting to create order with data:",De);const{data:Qe,error:jt}=await be.from("ORDER").insert([De]).select().single();if(jt){console.error("Error creating order:",jt),console.error("Order error details:",{message:jt.message,details:jt.details,hint:jt.hint,code:jt.code}),ve.error("Failed to create order. Please try again.");return}console.log("Order created successfully:",Qe),console.log("Order ID from database:",Qe.order_id),console.log("Selected cake ID:",y.cake_id),console.log("Cake quantity:",oe);const se={quantity:oe,order_id:Qe.order_id,cake_id:y.cake_id};console.log("Attempting to create cake order with data:",se),console.log("Attempting to insert into CAKE-ORDERS table...");const{data:Ee,error:me}=await be.from("CAKE-ORDERS").insert([se]).select();if(me){console.error("Error creating cake order:",me),console.error("Full error object:",JSON.stringify(me,null,2)),console.error("Error details:",{message:me.message,details:me.details,hint:me.hint,code:me.code}),ve.error("Failed to create cake order. Please try again.");return}console.log("Cake order created successfully:",Ee);const{error:ge}=await be.from("PAYMENT").insert([{payment_method:"Cash",amount_paid:et,payment_date:new Date().toISOString().split("T")[0],payment_status:"Unpaid",receipt:null,order_id:Qe.order_id}]);if(ge){console.error("Error creating payment:",ge),ve.error("Failed to create payment record. Please try again.");return}const ce=`ORD-${Qe.order_id}`;ue(ce),ve.success(`Order successfully placed for ${y.name}!`,{duration:4e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}),console.log("Advancing to step 3..."),I(3)}catch(he){console.error("Error placing order:",he),ve.error("Failed to place order. Please try again.",{duration:4e3,position:"top-center"})}finally{xe(!1)}}},dt=()=>{P(!1),L(""),B(""),W("Pickup"),q(""),re(1),I(1),O(!1),ue(""),xe(!1)},ye=()=>{console.log("nextStep called, current step:",$),$<3&&(console.log("Advancing to step:",$+1),I($+1))},_e=()=>{$>1&&I($-1)},Te=n.filter(he=>he.price<=t).filter(he=>d==="all"||he.tier===parseInt(d)).filter(he=>m.length===0||m.includes(he.theme)).sort((he,Be)=>{switch(l){case"priceLowToHigh":return he.price-Be.price;case"priceHighToLow":return Be.price-he.price;case"alphabeticalAsc":return he.name.localeCompare(Be.name);case"alphabeticalDesc":return Be.name.localeCompare(he.name);default:return 0}}),V=Math.ceil(Te.length/M),ie=T*M,pe=ie-M,je=Te.slice(pe,ie);return j.useEffect(()=>{S(1)},[t,d,m,l]),D?h.jsx(bo,{message:"Loading cake catalog..."}):h.jsxs("section",{className:"flex min-h-[120vh] bg-gradient-to-b from-[#f7f0e7] to-[#e5d6c4]",children:[h.jsx("div",{className:"w-1/3 flex items-center justify-start",children:h.jsxs("aside",{className:`${r?"fixed top-1/2 left-0 -translate-y-1/2 w-[20%]":"relative w-[80%]"} bg-white rounded-br-2xl rounded-tr-2xl shadow-lg p-4 text-[#381914]`,children:[h.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Filters"}),h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{className:"block mb-1 font-semibold",htmlFor:"sortBy",children:"Sort by"}),h.jsxs("select",{id:"sortBy",className:"w-full text-sm text-[#381914] border border-[#381914] rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#381914] cursor-pointer",value:l,onChange:he=>u(he.target.value),children:[h.jsx("option",{value:"default",children:"Default"}),h.jsx("option",{value:"priceLowToHigh",children:"Price: Low to High"}),h.jsx("option",{value:"priceHighToLow",children:"Price: High to Low"}),h.jsx("option",{value:"alphabeticalAsc",children:"Alphabetical: A  Z"}),h.jsx("option",{value:"alphabeticalDesc",children:"Alphabetical: Z  A"})]})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"font-semibold mb-2",children:"Price"}),h.jsx("input",{type:"range",min:"0",max:"16000",value:t,onChange:he=>s(he.target.value),className:"w-full cursor-pointer slider-design appearance-none bg-[#6a2e2e] rounded-lg h-2"}),h.jsxs("p",{className:"text-sm mt-1",children:["0 - ",t]})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"font-semibold mb-2",children:"Theme"}),["Plain","Birthday","Wedding","Christmas","Graduation","Anniversary","New Years"].map(he=>h.jsxs("label",{className:"block text-sm flex items-center",children:[h.jsx("input",{type:"checkbox",className:"mr-2 appearance-none w-4 h-4 border-2 border-[#381914] checked:bg-[#381914] checked:border-transparent focus:outline-none cursor-pointer",checked:m.includes(he),onChange:Be=>{Be.target.checked?v([...m,he]):v(m.filter(We=>We!==he))}}),he]},he))]}),h.jsxs("div",{children:[h.jsx("label",{className:"block mb-1 font-semibold",htmlFor:"tier",children:"Tiers"}),h.jsxs("select",{id:"tier",className:"w-full text-sm text-[#381914] border border-[#381914] rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#381914]",value:d,onChange:he=>f(he.target.value),children:[h.jsx("option",{value:"all",children:"All Tiers"}),[1,2,3,4,5].map(he=>h.jsxs("option",{value:he,children:[he," Tier"]},he))]})]})]})}),h.jsxs("main",{className:`p-8 w-full ${r?"ml-1/5":""}`,children:[h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:je.map(he=>h.jsxs("div",{className:"bg-[#FAF6F1] rounded shadow-sm p-4 text-center cursor-pointer hover:shadow-lg transition-shadow duration-200 hover:scale-105 transform transition-transform",onClick:()=>Ae(he),children:[h.jsx("img",{src:he.publicUrl||"/saved-cake.png",alt:he.name,className:"w-full h-48 object-contain mb-4",onError:Be=>{console.error(`Failed to load image for cake: ${he.name}, URL: ${he.publicUrl}`),Be.target.src="/saved-cake.png"}}),h.jsx("h3",{className:"text-md font-semibold",children:he.name}),h.jsxs("p",{className:"text-sm",children:["",he.price]})]},he.cake_id))}),V>1&&h.jsxs("div",{className:"flex justify-center items-center mt-8 space-x-2",children:[h.jsx("button",{onClick:()=>S(he=>Math.max(he-1,1)),disabled:T===1,className:"px-4 py-2 bg-[#AF524D] text-white rounded-lg hover:bg-[#8B3D3A] disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Previous"}),h.jsx("div",{className:"flex space-x-1",children:Array.from({length:V},(he,Be)=>Be+1).map(he=>h.jsx("button",{onClick:()=>S(he),className:`px-3 py-2 rounded-lg transition-colors ${T===he?"bg-[#AF524D] text-white":"bg-white text-[#381914] hover:bg-[#f0f0f0] border border-[#381914]"}`,children:he},he))}),h.jsx("button",{onClick:()=>S(he=>Math.min(he+1,V)),disabled:T===V,className:"px-4 py-2 bg-[#AF524D] text-white rounded-lg hover:bg-[#8B3D3A] disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Next"})]}),h.jsxs("div",{className:"text-center mt-4 text-sm text-[#381914]",children:["Showing ",pe+1," to ",Math.min(ie,Te.length)," of ",Te.length," cakes"]})]}),w&&y&&h.jsx("div",{className:"fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[h.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[h.jsx("h2",{className:"text-2xl font-bold text-[#381914]",children:y.name}),h.jsx("button",{onClick:we,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold cursor-pointer",children:""})]}),h.jsxs("div",{className:"p-6",children:[h.jsx("div",{className:"mb-6",children:h.jsx("img",{src:y.publicUrl||"/saved-cake.png",alt:y.name,className:"w-full h-64 object-contain rounded-lg",onError:he=>{he.target.src="/saved-cake.png"}})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-[#381914] mb-4",children:"Cake Details"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-gray-600",children:"Theme:"}),h.jsx("span",{className:"ml-2 text-[#381914]",children:y.theme})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-gray-600",children:"Tiers:"}),h.jsx("span",{className:"ml-2 text-[#381914]",children:y.tier})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-gray-600",children:"Price:"}),h.jsxs("span",{className:"ml-2 text-[#381914] font-bold",children:["",y.price]})]})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-[#381914] mb-4",children:"Description"}),h.jsx("p",{className:"text-gray-700 leading-relaxed",children:y.description||"No description available for this cake."})]})]}),h.jsx("div",{className:"mt-8 flex justify-center",children:h.jsx("button",{onClick:ze,className:"px-6 py-2 bg-[#AF524D] text-white rounded-full hover:bg-[#8B3D3A] transition-colors",children:"Order This Cake"})})]})]})}),fe&&y&&h.jsx("div",{className:"fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[h.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[h.jsx("h2",{className:"text-2xl font-bold text-[#381914]",children:"Complete Your Order"}),h.jsx("button",{onClick:dt,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold cursor-pointer",children:""})]}),h.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:h.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[h.jsxs("div",{className:`flex items-center ${$>=1?"text-[#AF524D]":"text-gray-400"}`,children:[h.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${$>=1?"bg-[#AF524D] text-white":"bg-gray-200 text-gray-500"}`,children:"1"}),h.jsx("span",{className:"ml-2 text-sm font-medium",children:"Order Details"})]}),h.jsx("div",{className:`w-8 h-1 ${$>=2?"bg-[#AF524D]":"bg-gray-200"}`}),h.jsxs("div",{className:`flex items-center ${$>=2?"text-[#AF524D]":"text-gray-400"}`,children:[h.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${$>=2?"bg-[#AF524D] text-white":"bg-gray-200 text-gray-500"}`,children:"2"}),h.jsx("span",{className:"ml-2 text-sm font-medium",children:"Review"})]}),h.jsx("div",{className:`w-8 h-1 ${$>=3?"bg-[#AF524D]":"bg-gray-200"}`}),h.jsxs("div",{className:`flex items-center ${$>=3?"text-[#AF524D]":"text-gray-400"}`,children:[h.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${$>=3?"bg-[#AF524D] text-white":"bg-gray-200 text-gray-500"}`,children:"3"}),h.jsx("span",{className:"ml-2 text-sm font-medium",children:"Success"})]})]})}),h.jsxs("div",{className:"p-6",children:[h.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("img",{src:y.publicUrl||"/saved-cake.png",alt:y.name,className:"w-16 h-16 object-contain rounded-lg",onError:he=>{he.target.src="/saved-cake.png"}}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-[#381914]",children:y.name}),h.jsxs("p",{className:"text-sm text-gray-600",children:["",y.price]})]})]})}),$===1&&h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Quantity *"}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("button",{type:"button",onClick:()=>re(Math.max(1,oe-1)),className:"w-10 h-10 rounded-full border-2 border-[#AF524D] text-[#AF524D] hover:bg-[#AF524D] hover:text-white transition-colors flex items-center justify-center font-bold text-lg",children:"-"}),h.jsx("span",{className:"w-16 text-center font-semibold text-[#381914] text-lg",children:oe}),h.jsx("button",{type:"button",onClick:()=>re(oe+1),className:"w-10 h-10 rounded-full border-2 border-[#AF524D] text-[#AF524D] hover:bg-[#AF524D] hover:text-white transition-colors flex items-center justify-center font-bold text-lg",children:"+"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Pickup/Delivery Date *"}),h.jsxs("div",{className:"relative",children:[h.jsxs("div",{className:"flex items-center gap-3 p-3 border-2 border-[#AF524D] rounded-lg bg-white",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("svg",{className:"w-6 h-6 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),h.jsx("div",{className:"flex-1",children:h.jsx("input",{type:"date",value:N,onChange:he=>L(he.target.value),min:new Date().toISOString().split("T")[0],className:"w-full bg-transparent border-none outline-none text-[#381914] font-medium cursor-pointer",required:!0})})]}),N&&h.jsx("div",{className:"mt-2 p-2 bg-[#AF524D] bg-opacity-10 rounded-lg border border-[#AF524D] border-opacity-30",children:h.jsxs("p",{className:"text-sm text-[#381914] font-medium",children:["Selected: ",new Date(N).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Pickup/Delivery Time *"}),h.jsxs("div",{className:"relative",children:[h.jsxs("div",{className:"flex items-center gap-3 p-3 border-2 border-[#AF524D] rounded-lg bg-white",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("svg",{className:"w-6 h-6 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),h.jsx("div",{className:"flex-1",children:h.jsx("input",{type:"time",value:A,onChange:he=>B(he.target.value),className:"w-full bg-transparent border-none outline-none text-[#381914] font-medium cursor-pointer",required:!0})})]}),A&&h.jsx("div",{className:"mt-2 p-2 bg-[#AF524D] bg-opacity-10 rounded-lg border border-[#AF524D] border-opacity-30",children:h.jsxs("p",{className:"text-sm text-[#381914] font-medium",children:["Selected: ",new Date(`2000-01-01T${A}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]})})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Order Type"}),h.jsxs("div",{className:"relative",children:[h.jsxs("div",{className:"flex items-center gap-3 p-3 border-2 border-[#AF524D] rounded-lg bg-white cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>O(!te),children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("svg",{className:"w-6 h-6 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),h.jsx("div",{className:"flex-1",children:h.jsx("span",{className:"text-[#381914] font-medium",children:Y})}),h.jsx("div",{className:"flex-shrink-0",children:h.jsx("svg",{className:`w-5 h-5 text-[#AF524D] transition-transform ${te?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),te&&h.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border-2 border-[#AF524D] rounded-lg shadow-lg z-10",children:[h.jsx("div",{className:"p-3 hover:bg-[#AF524D] hover:text-white cursor-pointer transition-colors border-b border-gray-100",onClick:()=>{W("Pickup"),O(!1)},children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),h.jsx("span",{className:"font-medium",children:"Pickup"})]})}),h.jsx("div",{className:"p-3 hover:bg-[#AF524D] hover:text-white cursor-pointer transition-colors",onClick:()=>{W("Delivery"),O(!1)},children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),h.jsx("span",{className:"font-medium",children:"Delivery"})]})})]}),Y&&h.jsx("div",{className:"mt-2 p-2 bg-[#AF524D] bg-opacity-10 rounded-lg border border-[#AF524D] border-opacity-30",children:h.jsxs("p",{className:"text-sm text-[#381914] font-medium",children:["Selected: ",Y]})})]})]}),Y==="Delivery"&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Delivery Address"}),h.jsx("textarea",{value:K,onChange:he=>q(he.target.value),placeholder:"Enter your complete delivery address...",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent resize-none"})]}),h.jsxs("div",{className:"flex gap-4 justify-end",children:[h.jsx("button",{onClick:dt,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-full hover:bg-gray-400 transition-colors",children:"Cancel"}),h.jsx("button",{onClick:ye,disabled:!N||!A||Y==="Delivery"&&!K,className:`px-6 py-2 rounded-full transition-colors ${!N||!A||Y==="Delivery"&&!K?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-[#AF524D] text-white hover:bg-[#8B3D3A]"}`,children:"Next"})]})]}),$===2&&h.jsxs("div",{className:"space-y-6",children:[h.jsx("h3",{className:"text-lg font-semibold text-[#381914] mb-4",children:"Review Your Order"}),h.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[h.jsx("h4",{className:"font-semibold text-[#381914] mb-4",children:"Order Summary"}),h.jsxs("div",{className:"space-y-3 text-sm",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"Cake:"}),h.jsx("span",{children:y.name})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"Quantity:"}),h.jsx("span",{children:oe})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"Price per cake:"}),h.jsxs("span",{children:["",y.price]})]}),h.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-2",children:[h.jsx("span",{className:"font-semibold",children:"Total Price:"}),h.jsxs("span",{className:"font-semibold",children:["",y.price*oe]})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"Date:"}),h.jsx("span",{children:N?new Date(N).toLocaleDateString():"Not selected"})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"Time:"}),h.jsx("span",{children:A?new Date(`2000-01-01T${A}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"Not selected"})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"Type:"}),h.jsx("span",{children:Y})]}),Y==="Delivery"&&K&&h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"Address:"}),h.jsx("span",{className:"text-right max-w-xs truncate",children:K})]})]})]}),h.jsxs("div",{className:"flex gap-4 justify-between items-center pt-4 border-t border-gray-200",children:[h.jsx("button",{onClick:_e,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-full hover:bg-gray-400 transition-colors",children:"Back"}),h.jsx("button",{onClick:Ue,disabled:ne,className:`px-6 py-2 rounded-full transition-colors ${ne?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-[#AF524D] text-white hover:bg-[#8B3D3A]"}`,children:ne?"Placing Order...":"Place Order"})]})]}),$===3&&h.jsxs("div",{className:"space-y-6",children:[h.jsx("h3",{className:"text-lg font-semibold text-[#381914] mb-4",children:"Order Successfully Placed!"}),h.jsxs("div",{className:"p-6 bg-green-50 border border-green-200 rounded-lg text-center",children:[h.jsx("div",{className:"flex items-center justify-center gap-3 mb-4",children:h.jsx("svg",{className:"w-12 h-12 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),h.jsx("h4",{className:"font-semibold text-green-800 text-xl mb-2",children:"Thank you for your order!"}),h.jsx("p",{className:"text-green-700 text-sm mb-4",children:"Your order has been successfully placed."})]}),h.jsx("div",{className:"flex gap-4 justify-center",children:h.jsx("button",{onClick:()=>{dt(),we()},className:"px-6 py-2 bg-[#AF524D] text-white rounded-full hover:bg-[#8B3D3A] transition-colors",children:"Done"})})]})]})]})})]})},WP=()=>{const{session:n}=po(),[e,t]=j.useState("toPay"),[s,r]=j.useState([]),[a,l]=j.useState(!0),[u,d]=j.useState(!1),[f,m]=j.useState(!1),[v,y]=j.useState(null),[b,w]=j.useState(null),[_,T]=j.useState(!1),S=A=>A?be.storage.from("cake").getPublicUrl(A).data.publicUrl:null,D=async()=>{if(n?.user)try{l(!0);const{data:A,error:B}=await be.from("CUSTOMER").select("cus_id").eq("auth_user_id",n.user.id).single();if(B){console.error("Error fetching customer:",B),Oe.error("Failed to load customer information");return}const{data:Y,error:W}=await be.from("ORDER").select(`
                     *,
                     CAKE-ORDERS (
                         co_id,
                         quantity,
                         cake_id,
                         CAKE (
                             cake_id,
                             name,
                             price,
                             cake_img
                         )
                     ),
                     PAYMENT (
                         payment_id,
                         payment_method,
                         amount_paid,
                         payment_status,
                         payment_date
                     )
                 `).eq("cus_id",A.cus_id).order("order_id",{ascending:!1});if(W){console.error("Error fetching orders:",W),Oe.error("Failed to load orders");return}const K=[];Y.forEach(q=>{q["CAKE-ORDERS"]&&q["CAKE-ORDERS"].length>0&&q["CAKE-ORDERS"].forEach(oe=>{K.push({order_id:q.order_id,order_date:q.order_date,delivery_method:q.delivery_method,order_schedule:q.order_schedule,delivery_address:q.delivery_address,order_status:q.order_status||"Pending",quantity:oe.quantity,cake_id:oe.cake_id,CAKE:oe.CAKE?{...oe.CAKE,publicUrl:S(oe.CAKE.cake_img)}:null,payment:q.PAYMENT?.[0]||null,total_price:oe.CAKE?oe.CAKE.price*oe.quantity:0})})}),r(K)}catch(A){console.error("Error fetching orders:",A),Oe.error("Failed to load orders")}finally{l(!1)}},k=A=>{y(A),m(!0),w(null)},M=A=>{const B=A.target.files[0];if(B){if(!B.type.startsWith("image/")){Oe.error("Please select an image file");return}if(B.size>5*1024*1024){Oe.error("File size must be less than 5MB");return}w(B)}},N=async()=>{if(!b){Oe.error("Please select a receipt image");return}if(!v){Oe.error("No order selected");return}T(!0);try{const A=`receipts/${v.order_id}_${Date.now()}.${b.name.split(".").pop()}`,{data:B,error:Y}=await be.storage.from("receipts").upload(A,b);if(Y){console.error("Error uploading file:",Y),Oe.error("Failed to upload receipt");return}const{data:W}=be.storage.from("receipts").getPublicUrl(A),{error:K}=await be.from("PAYMENT").update({receipt:W.publicUrl,payment_status:"Paid",payment_date:new Date().toISOString().split("T")[0]}).eq("order_id",v.order_id);if(K){console.error("Error updating payment:",K),Oe.error("Failed to update payment status");return}Oe.success("Receipt uploaded successfully!"),m(!1),y(null),w(null),D()}catch(A){console.error("Error processing payment:",A),Oe.error("Failed to process payment")}finally{T(!1)}},L=A=>{switch(A?.toLowerCase()){case"approved":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"cancelled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return j.useEffect(()=>{D()},[n?.user]),n?.user?a?h.jsx(bo,{message:"Loading..."}):h.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#f7f0e7] to-[#e5d6c4] py-8",children:[h.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"My Account"}),h.jsx("p",{className:"text-[#381914] opacity-80",children:"Manage your cart and view your orders"})]}),h.jsx("div",{className:"flex justify-center mb-8",children:h.jsxs("div",{className:"bg-white rounded-lg p-1 shadow-lg",children:[h.jsxs("button",{onClick:()=>t("toPay"),className:`px-6 py-3 rounded-md font-medium transition-colors ${e==="toPay"?"bg-[#AF524D] text-white":"text-[#381914] hover:bg-gray-100"}`,children:["To Pay (",s.filter(A=>A.order_status==="Pending").length,")"]}),h.jsxs("button",{onClick:()=>t("toReceive"),className:`px-6 py-3 rounded-md font-medium transition-colors ${e==="toReceive"?"bg-[#AF524D] text-white":"text-[#381914] hover:bg-gray-100"}`,children:["To Receive (",s.filter(A=>A.order_status==="Approved").length,")"]}),h.jsxs("button",{onClick:()=>t("completed"),className:`px-6 py-3 rounded-md font-medium transition-colors ${e==="completed"?"bg-[#AF524D] text-white":"text-[#381914] hover:bg-gray-100"}`,children:["Completed (",s.filter(A=>A.order_status==="Delivered").length,")"]}),h.jsxs("button",{onClick:()=>t("cancelled"),className:`px-6 py-3 rounded-md font-medium transition-colors ${e==="cancelled"?"bg-[#AF524D] text-white":"text-[#381914] hover:bg-gray-100"}`,children:["Cancelled (",s.filter(A=>A.order_status==="Cancelled").length,")"]})]})}),e==="toPay"&&h.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[h.jsx("h2",{className:"text-2xl font-bold text-[#381914] mb-6",children:"Orders to Pay"}),s.filter(A=>A.order_status==="Pending").length===0?h.jsxs("div",{className:"text-center py-12",children:[h.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m6 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})}),h.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No pending orders"}),h.jsx("p",{className:"text-gray-500",children:"Your pending orders will appear here"})]}):h.jsx("div",{className:"space-y-4",children:s.filter(A=>A.order_status==="Pending").map(A=>h.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:h.jsxs("div",{className:"flex items-start gap-4",children:[A.CAKE&&h.jsx("img",{src:A.CAKE.publicUrl||"/saved-cake.png",alt:A.CAKE.name,className:"w-16 h-16 object-cover rounded-lg",onError:B=>{B.target.src="/saved-cake.png"}}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-[#381914]",children:A.CAKE?A.CAKE.name:"Cake"}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID: ",A.order_id]}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",A.quantity]}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(A.order_date).toLocaleDateString()]}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Method: ",A.delivery_method]}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",A.order_status]}),A.payment&&h.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",A.payment.payment_status]})]}),h.jsxs("div",{className:"text-right",children:[h.jsxs("p",{className:"font-semibold text-[#381914]",children:["",A.total_price]}),h.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${L(A.order_status)}`,children:A.order_status})]})]}),h.jsx("div",{className:"flex justify-end mt-4",children:h.jsx("button",{onClick:()=>k(A),disabled:u,className:`py-2 px-6 rounded-lg font-semibold text-sm transition-all duration-200 ${u?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-[#AF524D] text-white hover:bg-[#8B3D3A] shadow-md hover:shadow-lg transform hover:scale-105"}`,children:"Pay Now"})})]})]})},A.order_id))})]}),e==="toReceive"&&h.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[h.jsx("h2",{className:"text-2xl font-bold text-[#381914] mb-6",children:"Orders to Receive"}),s.filter(A=>A.order_status==="Approved").length===0?h.jsxs("div",{className:"text-center py-12",children:[h.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),h.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No orders to receive"}),h.jsx("p",{className:"text-gray-500",children:"Your approved and paid orders will appear here"})]}):h.jsx("div",{className:"space-y-4",children:s.filter(A=>A.order_status==="Approved").map(A=>h.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:h.jsxs("div",{className:"flex items-start gap-4",children:[A.CAKE&&h.jsx("img",{src:A.CAKE.publicUrl||"/saved-cake.png",alt:A.CAKE.name,className:"w-16 h-16 object-cover rounded-lg",onError:B=>{B.target.src="/saved-cake.png"}}),h.jsx("div",{className:"flex-1",children:h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-[#381914]",children:A.CAKE?A.CAKE.name:"Cake"}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID: ",A.order_id]}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",A.quantity]}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(A.order_date).toLocaleDateString()]}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Method: ",A.delivery_method]}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",A.order_status]}),A.payment&&h.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",A.payment.payment_status]})]}),h.jsxs("div",{className:"text-right",children:[h.jsxs("p",{className:"font-semibold text-[#381914]",children:["",A.total_price]}),h.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${L(A.order_status)}`,children:A.order_status})]})]})})]})},A.order_id))})]}),e==="completed"&&h.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[h.jsx("h2",{className:"text-2xl font-bold text-[#381914] mb-6",children:"Delivered Orders"}),s.filter(A=>A.order_status==="Delivered").length===0?h.jsxs("div",{className:"text-center py-12",children:[h.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),h.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No delivered orders"}),h.jsx("p",{className:"text-gray-500",children:"Your delivered orders will appear here"})]}):h.jsx("div",{className:"space-y-4",children:s.filter(A=>A.order_status==="Delivered").map(A=>h.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:h.jsxs("div",{className:"flex items-start gap-4",children:[A.CAKE&&h.jsx("img",{src:A.CAKE.publicUrl||"/saved-cake.png",alt:A.CAKE.name,className:"w-16 h-16 object-cover rounded-lg",onError:B=>{B.target.src="/saved-cake.png"}}),h.jsx("div",{className:"flex-1",children:h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-[#381914]",children:A.CAKE?A.CAKE.name:"Cake"}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID: ",A.order_id]}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",A.quantity]}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(A.order_date).toLocaleDateString()]}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Method: ",A.delivery_method]}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",A.order_status]}),A.payment&&h.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",A.payment.payment_status]})]}),h.jsxs("div",{className:"text-right",children:[h.jsxs("p",{className:"font-semibold text-[#381914]",children:["",A.total_price]}),h.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${L(A.order_status)}`,children:A.order_status})]})]})})]})},A.order_id))})]}),e==="cancelled"&&h.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[h.jsx("h2",{className:"text-2xl font-bold text-[#381914] mb-6",children:"Cancelled Orders"}),s.filter(A=>A.order_status==="Cancelled").length===0?h.jsxs("div",{className:"text-center py-12",children:[h.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),h.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No cancelled orders"}),h.jsx("p",{className:"text-gray-500",children:"Your cancelled orders will appear here"})]}):h.jsx("div",{className:"space-y-4",children:s.filter(A=>A.order_status==="Cancelled").map(A=>h.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:h.jsxs("div",{className:"flex items-start gap-4",children:[A.CAKE&&h.jsx("img",{src:A.CAKE.publicUrl||"/saved-cake.png",alt:A.CAKE.name,className:"w-16 h-16 object-cover rounded-lg",onError:B=>{B.target.src="/saved-cake.png"}}),h.jsx("div",{className:"flex-1",children:h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-[#381914]",children:A.CAKE?A.CAKE.name:"Cake"}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID: ",A.order_id]}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",A.quantity]}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(A.order_date).toLocaleDateString()]}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Method: ",A.delivery_method]}),h.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",A.order_status]}),A.payment&&h.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",A.payment.payment_status]})]}),h.jsxs("div",{className:"text-right",children:[h.jsxs("p",{className:"font-semibold text-[#381914]",children:["",A.total_price]}),h.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${L(A.order_status)}`,children:A.order_status})]})]})})]})},A.order_id))})]})]}),f&&v&&h.jsx("div",{className:"fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-xl font-bold text-[#381914]",children:"Upload Receipt"}),h.jsx("button",{onClick:()=>{m(!1),y(null),w(null)},className:"text-gray-500 hover:text-gray-700 text-2xl font-bold cursor-pointer",children:""})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("p",{className:"text-gray-600 mb-2",children:"Order Details:"}),h.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[h.jsxs("p",{className:"text-sm text-gray-700",children:[h.jsx("span",{className:"font-semibold",children:"Order ID:"})," ",v.order_id]}),h.jsxs("p",{className:"text-sm text-gray-700",children:[h.jsx("span",{className:"font-semibold",children:"Item:"})," ",v.CAKE?v.CAKE.name:"Cake"]}),h.jsxs("p",{className:"text-sm text-gray-700",children:[h.jsx("span",{className:"font-semibold",children:"Total Amount:"})," ",v.total_price]}),h.jsxs("p",{className:"text-sm text-gray-700",children:[h.jsx("span",{className:"font-semibold",children:"Minimum Payment (50%):"})," ",(v.total_price*.5).toFixed(2)]})]}),h.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:h.jsxs("div",{className:"flex items-start",children:[h.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"Payment Instructions"}),h.jsxs("p",{className:"text-xs text-blue-700",children:["Please pay at least ",h.jsxs("span",{className:"font-semibold",children:["",(v.total_price*.5).toFixed(2)]})," to confirm your order. The remaining balance of ",h.jsxs("span",{className:"font-semibold",children:["",(v.total_price*.5).toFixed(2)]})," can be paid upon pickup or delivery."]})]})]})})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Receipt Image"}),h.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-[#AF524D] transition-colors",children:[h.jsx("input",{type:"file",accept:"image/*",onChange:M,className:"hidden",id:"receipt-upload"}),h.jsx("label",{htmlFor:"receipt-upload",className:"cursor-pointer",children:b?h.jsxs("div",{children:[h.jsx("svg",{className:"w-12 h-12 text-green-500 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.jsx("p",{className:"text-sm text-gray-600",children:b.name}),h.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click to change file"})]}):h.jsxs("div",{children:[h.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),h.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload receipt"}),h.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, JPEG up to 5MB"})]})})]})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>{m(!1),y(null),w(null)},className:"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),h.jsx("button",{onClick:N,disabled:!b||_,className:`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${!b||_?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-[#AF524D] text-white hover:bg-[#8B3D3A]"}`,children:_?"Uploading...":"Upload Receipt"})]})]})})]}):h.jsx("div",{className:"min-h-screen bg-gradient-to-b from-[#f7f0e7] to-[#e5d6c4] py-8",children:h.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"My Account"}),h.jsx("p",{className:"text-[#381914] opacity-80",children:"Manage your cart and view your orders"})]}),h.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[h.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),h.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Please Log In First"}),h.jsx("p",{className:"text-gray-500 mb-6",children:"You need to be logged in to access your cart and orders."}),h.jsx(It,{to:"/login",className:"inline-block bg-[#AF524D] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#8B3D3A] transition-colors",children:"Go to Login"})]})]})})};function U(n,e,t){return(e=function(s){var r=function(a,l){if(typeof a!="object"||!a)return a;var u=a[Symbol.toPrimitive];if(u!==void 0){var d=u.call(a,l);if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(a)}(s,"string");return typeof r=="symbol"?r:r+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function U1(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,s)}return t}function z(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?U1(Object(t),!0).forEach(function(s){U(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):U1(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function xt(n,e){if(n==null)return{};var t,s,r=function(l,u){if(l==null)return{};var d={};for(var f in l)if({}.hasOwnProperty.call(l,f)){if(u.indexOf(f)>=0)continue;d[f]=l[f]}return d}(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(s=0;s<a.length;s++)t=a[s],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function Un(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}class z1{constructor(){U(this,"browserShadowBlurConstant",1),U(this,"DPI",96),U(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),U(this,"perfLimitSizeTotal",2097152),U(this,"maxCacheSideLimit",4096),U(this,"minCacheSideLimit",256),U(this,"disableStyleCopyPaste",!1),U(this,"enableGLFiltering",!0),U(this,"textureSize",4096),U(this,"forceGLPutImageData",!1),U(this,"cachesBoundsOfCurve",!1),U(this,"fontPaths",{}),U(this,"NUM_FRACTION_DIGITS",4)}}const Ke=new class extends z1{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=z(z({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const e=new z1,t=n?.reduce((s,r)=>(s[r]=e[r],s),{})||e;this.configure(t)}},ri=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];return console[n]("fabric",...t)};class Rn extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class XP extends Rn{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class KP{}class QP extends KP{testPrecision(e,t){const s="precision ".concat(t,` float;
void main(){}`),r=e.createShader(e.FRAGMENT_SHADER);return!!r&&(e.shaderSource(r,s),e.compileShader(r),!!e.getShaderParameter(r,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(s=>this.testPrecision(t,s)),t.getExtension("WEBGL_lose_context").loseContext(),ri("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const ZP={};let V1;const Fn=()=>V1||(V1={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new QP,dispose(){},copyPasteData:ZP}),wo=()=>Fn().document,uh=()=>Fn().window,dC=()=>{var n;return Math.max((n=Ke.devicePixelRatio)!==null&&n!==void 0?n:uh().devicePixelRatio,1)},Yl=new class{constructor(){U(this,"charWidthsCache",{}),U(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:e,fontStyle:t,fontWeight:s}=n;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const r=this.charWidthsCache[e],a="".concat(t.toLowerCase(),"_").concat((s+"").toLowerCase());return r[a]||(r[a]={}),r[a]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:e}=Ke,t=Math.sqrt(e*n);return[Math.floor(t),Math.floor(e/t)]}},op="6.7.1";function Ed(){}const wc=Math.PI/2,$d=2*Math.PI,x0=Math.PI/180,bs=Object.freeze([1,0,0,1,0,0]),b0=16,Wr=.4477152502,He="center",st="left",Ns="top",lp="bottom",Nt="right",Os="none",w0=/\r?\n/,hC="moving",dh="scaling",fC="rotating",_0="rotate",gC="skewing",ic="resizing",JP="modifyPoly",eL="modifyPath",Yd="changed",hh="scale",Rs="scaleX",on="scaleY",_o="skewX",So="skewY",Ht="fill",Ms="stroke",qd="modified",$a="json",hm="svg",Se=new class{constructor(){this[$a]=new Map,this[hm]=new Map}has(n){return this[$a].has(n)}getClass(n){const e=this[$a].get(n);if(!e)throw new Rn("No class registered for ".concat(n));return e}setClass(n,e){e?this[$a].set(e,n):(this[$a].set(n.type,n),this[$a].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[hm].get(n)}setSVGClass(n,e){this[hm].set(e??n.type.toLowerCase(),n)}},Wd=new class extends Array{remove(n){const e=this.indexOf(n);e>-1&&this.splice(e,1)}cancelAll(){const n=this.splice(0);return n.forEach(e=>e.abort()),n}cancelByCanvas(n){if(!n)return[];const e=this.filter(t=>{var s;return t.target===n||typeof t.target=="object"&&((s=t.target)===null||s===void 0?void 0:s.canvas)===n});return e.forEach(t=>t.abort()),e}cancelByTarget(n){if(!n)return[];const e=this.filter(t=>t.target===n);return e.forEach(t=>t.abort()),e}};class tL{constructor(){U(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(s=>{let[r,a]=s;this.on(r,a)}),()=>this.off(e);if(t){const s=e;return this.__eventListeners[s]||(this.__eventListeners[s]=[]),this.__eventListeners[s].push(t),()=>this.off(s,t)}return()=>!1}once(e,t){if(typeof e=="object"){const s=[];return Object.entries(e).forEach(r=>{let[a,l]=r;s.push(this.once(a,l))}),()=>s.forEach(r=>r())}if(t){const s=this.on(e,function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];t.call(this,...a),s()});return s}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const s=this.__eventListeners[e],r=s.indexOf(t);r>-1&&s.splice(r,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const s in this.__eventListeners)this._removeEventListener(s);else typeof e=="object"?Object.entries(e).forEach(s=>{let[r,a]=s;this._removeEventListener(r,a)}):this._removeEventListener(e,t)}fire(e,t){var s;if(!this.__eventListeners)return;const r=(s=this.__eventListeners[e])===null||s===void 0?void 0:s.concat();if(r)for(let a=0;a<r.length;a++)r[a].call(this,t||{})}}const Wa=(n,e)=>{const t=n.indexOf(e);return t!==-1&&n.splice(t,1),n},yr=n=>{if(n===0)return 1;switch(Math.abs(n)/wc){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},xr=n=>{if(n===0)return 0;const e=n/wc,t=Math.sign(n);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(n)};class ee{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new ee(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new ee(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new ee(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new ee(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new ee(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new ee(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new ee(this.x/e.x,this.y/e.y)}scalarDivide(e){return new ee(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new ee(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,s=this.y-e.y;return Math.sqrt(t*t+s*s)}midPointFrom(e){return this.lerp(e)}min(e){return new ee(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new ee(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,s=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=s}clone(){return new ee(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S0;const s=xr(e),r=yr(e),a=this.subtract(t);return new ee(a.x*r-a.y*s,a.x*s+a.y*r).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new ee(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const S0=new ee(0,0),kd=n=>!!n&&Array.isArray(n._objects);function mC(n){class e extends n{constructor(){super(...arguments),U(this,"_objects",[])}_onObjectAdded(s){}_onObjectRemoved(s){}_onStackOrderChanged(s){}add(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];const l=this._objects.push(...r);return r.forEach(u=>this._onObjectAdded(u)),l}insertAt(s){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return this._objects.splice(s,0,...a),a.forEach(u=>this._onObjectAdded(u)),this._objects.length}remove(){const s=this._objects,r=[];for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return l.forEach(d=>{const f=s.indexOf(d);f!==-1&&(s.splice(f,1),r.push(d),this._onObjectRemoved(d))}),r}forEachObject(s){this.getObjects().forEach((r,a,l)=>s(r,a,l))}getObjects(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return r.length===0?[...this._objects]:this._objects.filter(l=>l.isType(...r))}item(s){return this._objects[s]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(s,r){return!!this._objects.includes(s)||!!r&&this._objects.some(a=>a instanceof e&&a.contains(s,!0))}complexity(){return this._objects.reduce((s,r)=>s+=r.complexity?r.complexity():0,0)}sendObjectToBack(s){return!(!s||s===this._objects[0])&&(Wa(this._objects,s),this._objects.unshift(s),this._onStackOrderChanged(s),!0)}bringObjectToFront(s){return!(!s||s===this._objects[this._objects.length-1])&&(Wa(this._objects,s),this._objects.push(s),this._onStackOrderChanged(s),!0)}sendObjectBackwards(s,r){if(!s)return!1;const a=this._objects.indexOf(s);if(a!==0){const l=this.findNewLowerIndex(s,a,r);return Wa(this._objects,s),this._objects.splice(l,0,s),this._onStackOrderChanged(s),!0}return!1}bringObjectForward(s,r){if(!s)return!1;const a=this._objects.indexOf(s);if(a!==this._objects.length-1){const l=this.findNewUpperIndex(s,a,r);return Wa(this._objects,s),this._objects.splice(l,0,s),this._onStackOrderChanged(s),!0}return!1}moveObjectTo(s,r){return s!==this._objects[r]&&(Wa(this._objects,s),this._objects.splice(r,0,s),this._onStackOrderChanged(s),!0)}findNewLowerIndex(s,r,a){let l;if(a){l=r;for(let u=r-1;u>=0;--u)if(s.isOverlapping(this._objects[u])){l=u;break}}else l=r-1;return l}findNewUpperIndex(s,r,a){let l;if(a){l=r;for(let u=r+1;u<this._objects.length;++u)if(s.isOverlapping(this._objects[u])){l=u;break}}else l=r+1;return l}collectObjects(s){let{left:r,top:a,width:l,height:u}=s,{includeIntersecting:d=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const f=[],m=new ee(r,a),v=m.add(new ee(l,u));for(let y=this._objects.length-1;y>=0;y--){const b=this._objects[y];b.selectable&&b.visible&&(d&&b.intersectsWithRect(m,v)||b.isContainedWithinRect(m,v)||d&&b.containsPoint(m)||d&&b.containsPoint(v))&&f.push(b)}return f}}return e}class pC extends tL{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function Ad(n){return uh().requestAnimationFrame(n)}function sL(n){return uh().cancelAnimationFrame(n)}let nL=0;const ii=()=>nL++,br=()=>{const n=wo().createElement("canvas");if(!n||n.getContext===void 0)throw new Rn("Failed to create `canvas` element");return n},rL=()=>wo().createElement("img"),ln=n=>{const e=br();return e.width=n.width,e.height=n.height,e},vC=(n,e,t)=>n.toDataURL("image/".concat(e),t),yC=(n,e,t)=>new Promise((s,r)=>{n.toBlob(s,"image/".concat(e),t)}),Ot=n=>n*x0,wr=n=>n/x0,iL=n=>n.every((e,t)=>e===bs[t]),As=(n,e,t)=>new ee(n).transform(e,t),xn=n=>{const e=1/(n[0]*n[3]-n[1]*n[2]),t=[e*n[3],-e*n[1],-e*n[2],e*n[0],0,0],{x:s,y:r}=new ee(n[4],n[5]).transform(t,!0);return t[4]=-s,t[5]=-r,t},os=(n,e,t)=>[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],t?0:n[0]*e[4]+n[2]*e[5]+n[4],t?0:n[1]*e[4]+n[3]*e[5]+n[5]],C0=(n,e)=>n.reduceRight((t,s)=>s&&t?os(s,t,e):s||t,void 0)||bs.concat(),xC=n=>{let[e,t]=n;return Math.atan2(t,e)},Xd=n=>{const e=xC(n),t=Math.pow(n[0],2)+Math.pow(n[1],2),s=Math.sqrt(t),r=(n[0]*n[3]-n[2]*n[1])/s,a=Math.atan2(n[0]*n[2]+n[1]*n[3],t);return{angle:wr(e),scaleX:s,scaleY:r,skewX:wr(a),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},_c=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Co(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=Ot(n),r=yr(s),a=xr(s);return[r,a,-a,r,e?e-(r*e-a*t):0,t?t-(a*e+r*t):0]}const T0=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},bC=n=>Math.tan(Ot(n)),wC=n=>[1,0,bC(n),1,0,0],_C=n=>[1,bC(n),0,1,0,0],fh=n=>{let{scaleX:e=1,scaleY:t=1,flipX:s=!1,flipY:r=!1,skewX:a=0,skewY:l=0}=n,u=T0(s?-e:e,r?-t:t);return a&&(u=os(u,wC(a),!0)),l&&(u=os(u,_C(l),!0)),u},aL=n=>{const{translateX:e=0,translateY:t=0,angle:s=0}=n;let r=_c(e,t);s&&(r=os(r,Co({angle:s})));const a=fh(n);return iL(a)||(r=os(r,a)),r},Dd=function(n){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(s,r){if(e&&e.aborted)return r(new XP("loadImage"));const a=rL();let l;e&&(l=function(d){a.src="",r(d)},e.addEventListener("abort",l,{once:!0}));const u=function(){a.onload=a.onerror=null,l&&e?.removeEventListener("abort",l),s(a)};n?(a.onload=u,a.onerror=function(){l&&e?.removeEventListener("abort",l),r(new Rn("Error loading ".concat(a.src)))},t&&(a.crossOrigin=t),a.src=n):u()})},ac=function(n){let{signal:e,reviver:t=Ed}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((s,r)=>{const a=[];e&&e.addEventListener("abort",r,{once:!0}),Promise.all(n.map(l=>Se.getClass(l.type).fromObject(l,{signal:e}).then(u=>(t(l,u),a.push(u),u)))).then(s).catch(l=>{a.forEach(u=>{u.dispose&&u.dispose()}),r(l)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},gh=function(n){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,s)=>{const r=[];e&&e.addEventListener("abort",s,{once:!0});const a=Object.values(n).map(u=>u&&u.type&&Se.has(u.type)?ac([u],{signal:e}).then(d=>{let[f]=d;return r.push(f),f}):u),l=Object.keys(n);Promise.all(a).then(u=>u.reduce((d,f,m)=>(d[l[m]]=f,d),{})).then(t).catch(u=>{r.forEach(d=>{d.dispose&&d.dispose()}),s(u)}).finally(()=>{e&&e.removeEventListener("abort",s)})})},To=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in n&&(e[t]=n[t]),e),{})},j0=(n,e)=>Object.keys(n).reduce((t,s)=>(e(n[s],s,n)&&(t[s]=n[s]),t),{}),gt=(n,e)=>parseFloat(Number(n).toFixed(e)),oc=n=>"matrix("+n.map(e=>gt(e,Ke.NUM_FRACTION_DIGITS)).join(" ")+")",rn=n=>!!n&&n.toLive!==void 0,I1=n=>!!n&&typeof n.toObject=="function",H1=n=>!!n&&n.offsetX!==void 0&&"source"in n,Oi=n=>!!n&&"multiSelectionStacking"in n;function SC(n){const e=n&&yn(n);let t=0,s=0;if(!n||!e)return{left:t,top:s};let r=n;const a=e.documentElement,l=e.body||{scrollLeft:0,scrollTop:0};for(;r&&(r.parentNode||r.host)&&(r=r.parentNode||r.host,r===e?(t=l.scrollLeft||a.scrollLeft||0,s=l.scrollTop||a.scrollTop||0):(t+=r.scrollLeft||0,s+=r.scrollTop||0),r.nodeType!==1||r.style.position!=="fixed"););return{left:t,top:s}}const yn=n=>n.ownerDocument||null,CC=n=>{var e;return((e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},TC=function(n,e,t){let{width:s,height:r}=t,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=s,n.height=r,a>1&&(n.setAttribute("width",(s*a).toString()),n.setAttribute("height",(r*a).toString()),e.scale(a,a))},cp=(n,e)=>{let{width:t,height:s}=e;t&&(n.style.width=typeof t=="number"?"".concat(t,"px"):t),s&&(n.style.height=typeof s=="number"?"".concat(s,"px"):s)};function G1(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=Os,n}class jC{constructor(e){U(this,"_originalCanvasStyle",void 0),U(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(s=e)&&s.getContext!==void 0?e:e&&wo().getElementById(e)||br();var s;if(t.hasAttribute("data-fabric"))throw new Rn("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:s}=e;const{el:r}=this.lower;r.classList.remove("lower-canvas"),r.removeAttribute("data-fabric"),r.setAttribute("width","".concat(t)),r.setAttribute("height","".concat(s)),r.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:s,ctx:r}=this.lower;TC(s,r,e,t)}setCSSDimensions(e){cp(this.lower.el,e)}calcOffset(){return function(e){var t;const s=e&&yn(e),r={left:0,top:0};if(!s)return r;const a=((t=CC(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};r.left+=parseInt(a.borderLeftWidth,10)||0,r.top+=parseInt(a.borderTopWidth,10)||0,r.left+=parseInt(a.paddingLeft,10)||0,r.top+=parseInt(a.paddingTop,10)||0;let l={left:0,top:0};const u=s.documentElement;e.getBoundingClientRect!==void 0&&(l=e.getBoundingClientRect());const d=SC(e);return{left:l.left+d.left-(u.clientLeft||0)+r.left,top:l.top+d.top-(u.clientTop||0)+r.top}}(this.lower.el)}dispose(){Fn().dispose(this.lower.el),delete this.lower}}const oL={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...bs]};class Sc extends mC(pC){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return Sc.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new jC(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];const a=super.insertAt(e,...s);return s.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),a}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(ri("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?dC():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:s=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const r=z({width:this.width,height:this.height},e);this.elements.setDimensions(r,this.getRetinaScaling()),this.hasLostContext=!0,this.width=r.width,this.height=r.height}s||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const s=e,r=[...this.viewportTransform],a=As(e,xn(r));r[0]=t,r[3]=t;const l=As(a,r);r[4]+=s.x-l.x,r[5]+=s.y-l.y,this.setViewportTransform(r)}setZoom(e){this.zoomToPoint(new ee(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new ee(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Ad(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,s=xn(this.viewportTransform),r=As({x:0,y:0},s),a=As({x:e,y:t},s),l=r.min(a),u=r.max(a);return this.vptCoords={tl:l,tr:new ee(u.x,l.y),bl:new ee(l.x,u.y),br:u}}cancelRequestedRender(){this.nextRenderHandle&&(sL(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const s=this.viewportTransform,r=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(s[0],s[1],s[2],s[3],s[4],s[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),r&&(r._set("canvas",this),r.shouldCache(),r._transformDone=!0,r.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,r)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const s=this.viewportTransform;e.save(),e.transform(...s),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let s=0,r=t.length;s<r;++s)t[s]&&t[s].render(e)}_renderBackgroundOrOverlay(e,t){const s=this["".concat(t,"Color")],r=this["".concat(t,"Image")],a=this.viewportTransform,l=this["".concat(t,"Vpt")];if(!s&&!r)return;const u=rn(s);if(s){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=u?s.toLive(e):s,l&&e.transform(...a),u){e.transform(1,0,0,1,s.offsetX||0,s.offsetY||0);const d=s.gradientTransform||s.patternTransform;d&&e.transform(...d)}e.fill(),e.restore()}if(r){e.save();const{skipOffscreen:d}=this;this.skipOffscreen=l,l&&e.transform(...a),r.render(e),this.skipOffscreen=d,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new ee(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new ee(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new ee(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new ee(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new ee(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return As(this.getCenterPoint(),xn(this.viewportTransform))}_centerObject(e,t){e.setXY(t,He,He),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const s=this.clipPath,r=s&&!s.excludeFromExport?this._toObject(s,e,t):null;return z(z(z({version:op},To(this,t)),{},{objects:this._objects.filter(a=>!a.excludeFromExport).map(a=>this._toObject(a,e,t))},this.__serializeBgOverlay(e,t)),r?{clipPath:r}:null)}_toObject(e,t,s){let r;this.includeDefaultValues||(r=e.includeDefaultValues,e.includeDefaultValues=!1);const a=e[t](s);return this.includeDefaultValues||(e.includeDefaultValues=!!r),a}__serializeBgOverlay(e,t){const s={},r=this.backgroundImage,a=this.overlayImage,l=this.backgroundColor,u=this.overlayColor;return rn(l)?l.excludeFromExport||(s.background=l.toObject(t)):l&&(s.background=l),rn(u)?u.excludeFromExport||(s.overlay=u.toObject(t)):u&&(s.overlay=u),r&&!r.excludeFromExport&&(s.backgroundImage=this._toObject(r,e,t)),a&&!a.excludeFromExport&&(s.overlayImage=this._toObject(a,e,t)),s}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const s=[];return this._setSVGPreamble(s,e),this._setSVGHeader(s,e),this.clipPath&&s.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(s,"background"),this._setSVGBgOverlayImage(s,"backgroundImage",t),this._setSVGObjects(s,t),this.clipPath&&s.push(`</g>
`),this._setSVGBgOverlayColor(s,"overlay"),this._setSVGBgOverlayImage(s,"overlayImage",t),s.push("</svg>"),s.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const s=t.width||"".concat(this.width),r=t.height||"".concat(this.height),a=Ke.NUM_FRACTION_DIGITS,l=t.viewBox;let u;if(l)u='viewBox="'.concat(l.x," ").concat(l.y," ").concat(l.width," ").concat(l.height,'" ');else if(this.svgViewportTransformation){const d=this.viewportTransform;u='viewBox="'.concat(gt(-d[4]/d[0],a)," ").concat(gt(-d[5]/d[3],a)," ").concat(gt(this.width/d[0],a)," ").concat(gt(this.height/d[3],a),'" ')}else u='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',s,'" ','height="',r,'" ',u,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",op,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(ii()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(rn(t)){const s=this["".concat(e,"Vpt")],r=this.viewportTransform,a={isType:()=>!1,width:this.width/(s?r[0]:1),height:this.height/(s?r[3]:1)};return t.toSVG(a,{additionalTransform:s?oc(r):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},s=Ke.fontPaths;this._objects.forEach(function a(l){e.push(l),kd(l)&&l._objects.forEach(a)}),e.forEach(a=>{if(!(l=a)||typeof l._renderText!="function")return;var l;const{styles:u,fontFamily:d}=a;!t[d]&&s[d]&&(t[d]=!0,u&&Object.values(u).forEach(f=>{Object.values(f).forEach(m=>{let{fontFamily:v=""}=m;!t[v]&&s[v]&&(t[v]=!0)})}))});const r=Object.keys(t).map(a=>`		@font-face {
			font-family: '`.concat(a,`';
			src: url('`).concat(s[a],`');
		}
`)).join("");return r?`	<style type="text/css"><![CDATA[
`.concat(r,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(s=>{s.excludeFromExport||this._setSVGObject(e,s,t)})}_setSVGObject(e,t,s){e.push(t.toSVG(s))}_setSVGBgOverlayImage(e,t,s){const r=this[t];r&&!r.excludeFromExport&&r.toSVG&&e.push(r.toSVG(s))}_setSVGBgOverlayColor(e,t){const s=this["".concat(t,"Color")];if(s)if(rn(s)){const r=s.repeat||"",a=this.width,l=this.height,u=this["".concat(t,"Vpt")]?oc(xn(this.viewportTransform)):"";e.push('<rect transform="'.concat(u," translate(").concat(a/2,",").concat(l/2,')" x="').concat(s.offsetX-a/2,'" y="').concat(s.offsetY-l/2,'" width="').concat(r!=="repeat-y"&&r!=="no-repeat"||!H1(s)?a:s.source.width,'" height="').concat(r!=="repeat-x"&&r!=="no-repeat"||!H1(s)?l:s.source.height,'" fill="url(#SVGID_').concat(s.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',s,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:s}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Rn("`json` is undefined"));const r=typeof e=="string"?JSON.parse(e):e,{objects:a=[],backgroundImage:l,background:u,overlayImage:d,overlay:f,clipPath:m}=r,v=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([ac(a,{reviver:t,signal:s}),gh({backgroundImage:l,backgroundColor:u,overlayImage:d,overlayColor:f,clipPath:m},{signal:s})]).then(y=>{let[b,w]=y;return this.clear(),this.add(...b),this.set(r),this.set(w),this.renderOnAddRemove=v,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=ln(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:s=1,multiplier:r=1,enableRetinaScaling:a=!1}=e,l=r*(a?this.getRetinaScaling():1);return vC(this.toCanvasElement(l,e),t,s)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:s=1,multiplier:r=1,enableRetinaScaling:a=!1}=e,l=r*(a?this.getRetinaScaling():1);return yC(this.toCanvasElement(l,e),t,s)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:s,left:r,top:a,filter:l}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const u=(t||this.width)*e,d=(s||this.height)*e,f=this.getZoom(),m=this.width,v=this.height,y=this.skipControlsDrawing,b=f*e,w=this.viewportTransform,_=[b,0,0,b,(w[4]-(r||0))*e,(w[5]-(a||0))*e],T=this.enableRetinaScaling,S=ln({width:u,height:d}),D=l?this._objects.filter(k=>l(k)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=_,this.width=u,this.height=d,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(S.getContext("2d"),D),this.viewportTransform=w,this.width=m,this.height=v,this.calcViewportBoundaries(),this.enableRetinaScaling=T,this.skipControlsDrawing=y,S}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Wd.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const s=()=>{this.destroy(),e(!0)};s.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=s:s()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}U(Sc,"ownDefaults",oL);const lL=["touchstart","touchmove","touchend"],cL=n=>{const e=SC(n.target),t=function(s){const r=s.changedTouches;return r&&r[0]?r[0]:s}(n);return new ee(t.clientX+e.left,t.clientY+e.top)},up=n=>lL.includes(n.type)||n.pointerType==="touch",$1=n=>{n.preventDefault(),n.stopPropagation()},hr=n=>{let e=0,t=0,s=0,r=0;for(let a=0,l=n.length;a<l;a++){const{x:u,y:d}=n[a];(u>s||!a)&&(s=u),(u<e||!a)&&(e=u),(d>r||!a)&&(r=d),(d<t||!a)&&(t=d)}return{left:e,top:t,width:s-e,height:r-t}},uL=["translateX","translateY","scaleX","scaleY"],dL=(n,e)=>Kd(n,os(e,n.calcOwnMatrix())),Kd=(n,e)=>{const t=Xd(e),{translateX:s,translateY:r,scaleX:a,scaleY:l}=t,u=xt(t,uL),d=new ee(s,r);n.flipX=!1,n.flipY=!1,Object.assign(n,u),n.set({scaleX:a,scaleY:l}),n.setPositionByOrigin(d,He,He)},hL=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},EC=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),E0=(n,e,t)=>{const s=n/2,r=e/2,a=[new ee(-s,-r),new ee(s,-r),new ee(-s,r),new ee(s,r)].map(u=>u.transform(t)),l=hr(a);return new ee(l.width,l.height)},mh=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:bs;return os(xn(arguments.length>1&&arguments[1]!==void 0?arguments[1]:bs),n)},ro=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bs,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:bs;return n.transform(mh(e,t))},fL=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bs,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:bs;return n.transform(mh(e,t),!0)},gL=(n,e,t)=>{const s=mh(e,t);return Kd(n,os(s,n.calcOwnMatrix())),s},kC=(n,e)=>{var t;const{transform:{target:s}}=e;(t=s.canvas)===null||t===void 0||t.fire("object:".concat(n),z(z({},e),{},{target:s})),s.fire(n,e)},mL={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Lt=n=>typeof n=="string"?mL[n]:n-.5,Qd="not-allowed";function AC(n){return Lt(n.originX)===Lt(He)&&Lt(n.originY)===Lt(He)}function Y1(n){return .5-Lt(n)}const wn=(n,e)=>n[e],DC=(n,e,t,s)=>({e:n,transform:e,pointer:new ee(t,s)});function NC(n,e){const t=n.getTotalAngle()+wr(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function k0(n,e,t,s,r){var a;let{target:l,corner:u}=n;const d=l.controls[u],f=((a=l.canvas)===null||a===void 0?void 0:a.getZoom())||1,m=l.padding/f,v=function(y,b,w,_){const T=y.getRelativeCenterPoint(),S=w!==void 0&&_!==void 0?y.translateToGivenOrigin(T,He,He,w,_):new ee(y.left,y.top);return(y.angle?b.rotate(-Ot(y.angle),T):b).subtract(S)}(l,new ee(s,r),e,t);return v.x>=m&&(v.x-=m),v.x<=-m&&(v.x+=m),v.y>=m&&(v.y-=m),v.y<=m&&(v.y+=m),v.x-=d.offsetX,v.y-=d.offsetY,v}const pL=(n,e,t,s)=>{const{target:r,offsetX:a,offsetY:l}=e,u=t-a,d=s-l,f=!wn(r,"lockMovementX")&&r.left!==u,m=!wn(r,"lockMovementY")&&r.top!==d;return f&&r.set(st,u),m&&r.set(Ns,d),(f||m)&&kC(hC,DC(n,e,t,s)),f||m},q1={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},fm=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n),W1=(n,e,t,s)=>{n/=255,e/=255,t/=255;const r=Math.max(n,e,t),a=Math.min(n,e,t);let l,u;const d=(r+a)/2;if(r===a)l=u=0;else{const f=r-a;switch(u=d>.5?f/(2-r-a):f/(r+a),r){case n:l=(e-t)/f+(e<t?6:0);break;case e:l=(t-n)/f+2;break;case t:l=(n-e)/f+4}l/=6}return[Math.round(360*l),Math.round(100*u),Math.round(100*d),s]},X1=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},Wu=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),K1=n=>{let[e,t,s,r=1]=n;const a=Math.round(.3*e+.59*t+.11*s);return[a,a,a,r]};class at{constructor(e){if(U(this,"isUnrecognised",!1),e)if(e instanceof at)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,s,r,a=1]=e;this.setSource([t,s,r,a])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in q1&&(e=q1[e]),e==="transparent"?[255,255,255,0]:at.sourceFromHex(e)||at.sourceFromRgb(e)||at.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,s]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(s,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,s]=W1(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(s,"%)")}toHsla(){const[e,t,s,r]=W1(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(s,"%,").concat(r,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,s,r]=this.getSource();return"".concat(Wu(e)).concat(Wu(t)).concat(Wu(s)).concat(Wu(Math.round(255*r)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(K1(this.getSource())),this}toBlackWhite(e){const[t,,,s]=K1(this.getSource()),r=t<(e||127)?0:255;return this.setSource([r,r,r,s]),this}overlayWith(e){e instanceof at||(e=new at(e));const t=this.getSource(),s=e.getSource(),[r,a,l]=t.map((u,d)=>Math.round(.5*u+.5*s[d]));return this.setSource([r,a,l,t[3]]),this}static fromRgb(e){return at.fromRgba(e)}static fromRgba(e){return new at(at.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[s,r,a]=t.slice(1,4).map(l=>{const u=parseFloat(l);return l.endsWith("%")?Math.round(2.55*u):u});return[s,r,a,X1(t[4])]}}static fromHsl(e){return at.fromHsla(e)}static fromHsla(e){return new at(at.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const s=(at.parseAngletoDegrees(t[1])%360+360)%360/360,r=parseFloat(t[2])/100,a=parseFloat(t[3])/100;let l,u,d;if(r===0)l=u=d=a;else{const f=a<=.5?a*(r+1):a+r-a*r,m=2*a-f;l=fm(m,f,s+1/3),u=fm(m,f,s),d=fm(m,f,s-1/3)}return[Math.round(255*l),Math.round(255*u),Math.round(255*d),X1(t[4])]}static fromHex(e){return new at(at.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let s;s=t.length<=4?t.split("").map(d=>d+d):t.match(/.{2}/g);const[r,a,l,u=255]=s.map(d=>parseInt(d,16));return[r,a,l,u/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),s=parseFloat(t);return t.includes("rad")?wr(s):t.includes("turn")?360*s:s}}const io=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b0;const t=/\D{0,2}$/.exec(n),s=parseFloat(n),r=Ke.DPI;switch(t?.[0]){case"mm":return s*r/25.4;case"cm":return s*r/2.54;case"in":return s*r;case"pt":return s*r/72;case"pc":return s*r/72*12;case"em":return s*e;default:return s}},vL=n=>{const[e,t]=n.trim().split(" "),[s,r]=(a=e)&&a!==Os?[a.slice(1,4),a.slice(5,8)]:a===Os?[a,a]:["Mid","Mid"];var a;return{meetOrSlice:t||"meet",alignX:s,alignY:r}},lc=function(n,e){let t,s,r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const a=new at(e),l=a.getAlpha();t=a.toRgb(),l!==1&&(s=l.toString())}else t="none";return r?"".concat(n,": ").concat(t,"; ").concat(s?"".concat(n,"-opacity: ").concat(s,"; "):""):"".concat(n,'="').concat(t,'" ').concat(s?"".concat(n,'-opacity="').concat(s,'" '):"")};class OC{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",s=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):Os,a=this.strokeDashOffset?this.strokeDashOffset:"0",l=this.strokeLineCap?this.strokeLineCap:"butt",u=this.strokeLineJoin?this.strokeLineJoin:"miter",d=this.strokeMiterLimit?this.strokeMiterLimit:"4",f=this.opacity!==void 0?this.opacity:"1",m=this.visible?"":" visibility: hidden;",v=e?"":this.getSvgFilter(),y=lc(Ht,this.fill);return[lc(Ms,this.stroke),"stroke-width: ",s,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",l,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",u,"; ","stroke-miterlimit: ",d,"; ",y,"fill-rule: ",t,"; ","opacity: ",f,";",v,m].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const s=e?this.calcTransformMatrix():this.calcOwnMatrix(),r='transform="'.concat(oc(s));return"".concat(r).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:s=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[this.getSvgTransform(!0,s),this.getSvgCommons()].join(""),a=e.indexOf("COMMON_PARTS");return e[a]=r,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:s,withShadow:r,additionalTransform:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l=t?"":'style="'.concat(this.getSvgStyles(),'" '),u=r?'style="'.concat(this.getSvgFilter(),'" '):"",d=this.clipPath,f=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",m=d&&d.absolutePositioned,v=this.stroke,y=this.fill,b=this.shadow,w=[],_=e.indexOf("COMMON_PARTS");let T;d&&(d.clipPathId="CLIPPATH_".concat(ii()),T='<clipPath id="'.concat(d.clipPathId,`" >
`).concat(d.toClipPathSVG(s),`</clipPath>
`)),m&&w.push("<g ",u,this.getSvgCommons(),` >
`),w.push("<g ",this.getSvgTransform(!1),m?"":u+this.getSvgCommons(),` >
`);const S=[l,f,t?"":this.addPaintOrder()," ",a?'transform="'.concat(a,'" '):""].join("");return e[_]=S,rn(y)&&w.push(y.toSVG(this)),rn(v)&&w.push(v.toSVG(this)),b&&w.push(b.toSVG(this)),d&&w.push(T),w.push(e.join("")),w.push(`</g>
`),m&&w.push(`</g>
`),s?s(w.join("")):w.join("")}addPaintOrder(){return this.paintFirst!==Ht?' paint-order="'.concat(this.paintFirst,'" '):""}}function ph(n){return new RegExp("^("+n.join("|")+")\\b","i")}const $i="textDecorationThickness",MC=["fontSize","fontWeight","fontFamily","fontStyle"],RC=["underline","overline","linethrough"],PC=[...MC,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],LC=[...PC,...RC,"textBackgroundColor","direction",$i],yL=[...MC,...RC,Ms,"strokeWidth",Ht,"deltaY","textBackgroundColor",$i],xL={_reNewline:w0,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:st,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:st,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[$i]:66.667},On="justify",Zd="justify-left",ql="justify-right",Wl="justify-center";var Q1,Z1,J1;const bn=String.raw(Q1||(Q1=Un(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),gm=String.raw(Z1||(Z1=Un(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),bL=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+bn+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+bn+"))?\\s+(.*)"),wL={cx:st,x:st,r:"radius",cy:Ns,y:Ns,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":$i},mm="font-size",pm="clip-path";ph(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);ph(["symbol","image","marker","pattern","view","svg"]);const e_=ph(["symbol","g","a","svg","clipPath","defs"]);new RegExp(String.raw(J1||(J1=Un(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),bn,gm,bn,gm,bn,gm,bn));const _L=new ee(1,0),BC=new ee,FC=(n,e)=>n.rotate(e),dp=(n,e)=>new ee(e).subtract(n),hp=n=>n.distanceFrom(BC),fp=(n,e)=>Math.atan2(Xl(n,e),CL(n,e)),SL=n=>fp(_L,n),A0=n=>n.eq(BC)?n:n.scalarDivide(hp(n)),UC=function(n){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return A0(new ee(-n.y,n.x).scalarMultiply(e?1:-1))},Xl=(n,e)=>n.x*e.y-n.y*e.x,CL=(n,e)=>n.x*e.x+n.y*e.y,t_=(n,e,t)=>{if(n.eq(e)||n.eq(t))return!0;const s=Xl(e,t),r=Xl(e,n),a=Xl(t,n);return s>=0?r>=0&&a<=0:!(r<=0&&a>=0)},s_="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",n_=new RegExp("(?:\\s|^)"+s_+s_+"("+bn+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class fr{constructor(e){const t=typeof e=="string"?fr.parseShadow(e):e;Object.assign(this,fr.ownDefaults,t),this.id=ii()}static parseShadow(e){const t=e.trim(),[,s=0,r=0,a=0]=(n_.exec(t)||[]).map(l=>parseFloat(l)||0);return{color:(t.replace(n_,"")||"rgb(0,0,0)").trim(),offsetX:s,offsetY:r,blur:a}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=FC(new ee(this.offsetX,this.offsetY),Ot(-e.angle)),s=new at(this.color);let r=40,a=40;return e.width&&e.height&&(r=100*gt((Math.abs(t.x)+this.blur)/e.width,Ke.NUM_FRACTION_DIGITS)+20,a=100*gt((Math.abs(t.y)+this.blur)/e.height,Ke.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(a,'%" height="').concat(100+2*a,'%" x="-').concat(r,'%" width="').concat(100+2*r,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(gt(this.blur?this.blur/2:0,Ke.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(gt(t.x,Ke.NUM_FRACTION_DIGITS),'" dy="').concat(gt(t.y,Ke.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(s.toRgb(),'" flood-opacity="').concat(s.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=fr.ownDefaults;return this.includeDefaultValues?e:j0(e,(s,r)=>s!==t[r])}static async fromObject(e){return new this(e)}}U(fr,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),U(fr,"type","shadow"),Se.setClass(fr,"shadow");const uo=(n,e,t)=>Math.max(n,Math.min(e,t)),TL=[Ns,st,Rs,on,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",_o,So],_r=[Ht,Ms,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],jL={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:st,originY:Ns,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Ht,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},EL=(n,e,t,s)=>-t*Math.cos(n/s*wc)+t+e,kL=()=>!1;class D0{constructor(e){let{startValue:t,byValue:s,duration:r=500,delay:a=0,easing:l=EL,onStart:u=Ed,onChange:d=Ed,onComplete:f=Ed,abort:m=kL,target:v}=e;U(this,"_state","pending"),U(this,"durationProgress",0),U(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=r,this.delay=a,this.easing=l,this._onStart=u,this._onChange=d,this._onComplete=f,this._abort=m,this.target=v,this.startValue=t,this.byValue=s,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Ad(e),this.delay):Ad(e)}tick(e){const t=(e||+new Date)-this.startTime,s=Math.min(t,this.duration);this.durationProgress=s/this.duration;const{value:r,valueProgress:a}=this.calculate(s);this.value=Object.freeze(r),this.valueProgress=a,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Ad(this.tick)))}register(){Wd.push(this)}unregister(){Wd.remove(this)}abort(){this._state="aborted",this.unregister()}}const AL=["startValue","endValue"];class DL extends D0{constructor(e){let{startValue:t=0,endValue:s=100}=e;super(z(z({},xt(e,AL)),{},{startValue:t,byValue:s-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const NL=["startValue","endValue"];class OL extends D0{constructor(e){let{startValue:t=[0],endValue:s=[100]}=e;super(z(z({},xt(e,NL)),{},{startValue:t,byValue:s.map((r,a)=>r-t[a])}))}calculate(e){const t=this.startValue.map((s,r)=>this.easing(e,s,this.byValue[r],this.duration,r));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const ML=["startValue","endValue","easing","onChange","onComplete","abort"],RL=(n,e,t,s)=>e+t*(1-Math.cos(n/s*wc)),vm=n=>n&&((e,t,s)=>n(new at(e).toRgba(),t,s));class PL extends D0{constructor(e){let{startValue:t,endValue:s,easing:r=RL,onChange:a,onComplete:l,abort:u}=e,d=xt(e,ML);const f=new at(t).getSource(),m=new at(s).getSource();super(z(z({},d),{},{startValue:f,byValue:m.map((v,y)=>v-f[y]),easing:r,onChange:vm(a),onComplete:vm(l),abort:vm(u)}))}calculate(e){const[t,s,r,a]=this.startValue.map((u,d)=>this.easing(e,u,this.byValue[d],this.duration,d)),l=[...[t,s,r].map(Math.round),uo(0,a,1)];return{value:l,valueProgress:l.map((u,d)=>this.byValue[d]!==0?Math.abs((u-this.startValue[d])/this.byValue[d]):0).find(u=>u!==0)||0}}}function zC(n){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(n)?new OL(n):new DL(n);return e.start(),e}function LL(n){const e=new PL(n);return e.start(),e}class wt{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.points=this.points.concat(t.filter(r=>!this.includes(r))),this}static isPointContained(e,t,s){let r=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(s))return e.eq(t);if(t.x===s.x)return e.x===t.x&&(r||e.y>=Math.min(t.y,s.y)&&e.y<=Math.max(t.y,s.y));if(t.y===s.y)return e.y===t.y&&(r||e.x>=Math.min(t.x,s.x)&&e.x<=Math.max(t.x,s.x));{const a=dp(t,s),l=dp(t,e).divide(a);return r?Math.abs(l.x)===Math.abs(l.y):l.x===l.y&&l.x>=0&&l.x<=1}}static isPointInPolygon(e,t){const s=new ee(e).setX(Math.min(e.x-1,...t.map(a=>a.x)));let r=0;for(let a=0;a<t.length;a++){const l=this.intersectSegmentSegment(t[a],t[(a+1)%t.length],e,s);if(l.includes(e))return!0;r+=+(l.status==="Intersection")}return r%2==1}static intersectLineLine(e,t,s,r){let a=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],l=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const u=t.x-e.x,d=t.y-e.y,f=r.x-s.x,m=r.y-s.y,v=e.x-s.x,y=e.y-s.y,b=f*y-m*v,w=u*y-d*v,_=m*u-f*d;if(_!==0){const T=b/_,S=w/_;return(a||0<=T&&T<=1)&&(l||0<=S&&S<=1)?new wt("Intersection").append(new ee(e.x+T*u,e.y+T*d)):new wt}if(b===0||w===0){const T=a||l||wt.isPointContained(e,s,r)||wt.isPointContained(t,s,r)||wt.isPointContained(s,e,t)||wt.isPointContained(r,e,t);return new wt(T?"Coincident":void 0)}return new wt("Parallel")}static intersectSegmentLine(e,t,s,r){return wt.intersectLineLine(e,t,s,r,!1,!0)}static intersectSegmentSegment(e,t,s,r){return wt.intersectLineLine(e,t,s,r,!1,!1)}static intersectLinePolygon(e,t,s){let r=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const a=new wt,l=s.length;for(let u,d,f,m=0;m<l;m++){if(u=s[m],d=s[(m+1)%l],f=wt.intersectLineLine(e,t,u,d,r,!1),f.status==="Coincident")return f;a.append(...f.points)}return a.points.length>0&&(a.status="Intersection"),a}static intersectSegmentPolygon(e,t,s){return wt.intersectLinePolygon(e,t,s,!1)}static intersectPolygonPolygon(e,t){const s=new wt,r=e.length,a=[];for(let l=0;l<r;l++){const u=e[l],d=e[(l+1)%r],f=wt.intersectSegmentPolygon(u,d,t);f.status==="Coincident"?(a.push(f),s.append(u,d)):s.append(...f.points)}return a.length>0&&a.length===e.length?new wt("Coincident"):(s.points.length>0&&(s.status="Intersection"),s)}static intersectPolygonRectangle(e,t,s){const r=t.min(s),a=t.max(s),l=new ee(a.x,r.y),u=new ee(r.x,a.y);return wt.intersectPolygonPolygon(e,[r,l,a,u])}}class BL extends pC{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?As(e,this.group.calcTransformMatrix()):e}setXY(e,t,s){this.group&&(e=As(e,xn(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,s)}getRelativeXY(){return new ee(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,s)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:s,bl:r}=this.aCoords||(this.aCoords=this.calcACoords()),a=[e,t,s,r];if(this.group){const l=this.group.calcTransformMatrix();return a.map(u=>As(u,l))}return a}intersectsWithRect(e,t){return wt.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=wt.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:s,top:r,width:a,height:l}=this.getBoundingRect();return s>=e.x&&s+a<=t.x&&r>=e.y&&r+l<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return wt.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(s=>s.x<=t.x&&s.x>=e.x&&s.y<=t.y&&s.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(s=>(s.x>=t.x||s.x<=e.x)&&(s.y>=t.y||s.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return hr(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(Rs,e),this._set(on,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?wr(xC(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||bs.concat()}calcACoords(){const e=Co({angle:this.angle}),{x:t,y:s}=this.getRelativeCenterPoint(),r=_c(t,s),a=os(r,e),l=this._getTransformedDimensions(),u=l.x/2,d=l.y/2;return{tl:As({x:-u,y:-d},a),tr:As({x:u,y:-d},a),bl:As({x:-u,y:d},a),br:As({x:u,y:d},a)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Lt(this.originX),Lt(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const s=this.transformMatrixKey(e),r=this.matrixCache;return r&&r.key.every((a,l)=>a===s[l])?r.value:(this.group&&(t=os(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:s,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const s=this.getRelativeCenterPoint(),r={angle:this.angle,translateX:s.x,translateY:s.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},a=aL(r);return this.ownMatrixCache={key:e,value:a},a}_getNonTransformedDimensions(){return new ee(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=z({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),s=t.strokeWidth;let r=s,a=0;this.strokeUniform&&(r=0,a=s);const l=t.width+r,u=t.height+r;let d;return d=t.skewX===0&&t.skewY===0?new ee(l*t.scaleX,u*t.scaleY):E0(l,u,fh(t)),d.scalarAdd(a)}translateToGivenOrigin(e,t,s,r,a){let l=e.x,u=e.y;const d=Lt(r)-Lt(t),f=Lt(a)-Lt(s);if(d||f){const m=this._getTransformedDimensions();l+=d*m.x,u+=f*m.y}return new ee(l,u)}translateToCenterPoint(e,t,s){if(t===He&&s===He)return e;const r=this.translateToGivenOrigin(e,t,s,He,He);return this.angle?r.rotate(Ot(this.angle),e):r}translateToOriginPoint(e,t,s){const r=this.translateToGivenOrigin(e,He,He,t,s);return this.angle?r.rotate(Ot(this.angle),e):r}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?As(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new ee(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,s){const r=this.translateToCenterPoint(e,t,s),a=this.translateToOriginPoint(r,this.originX,this.originY);this.set({left:a.x,top:a.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),st,Ns)}}const FL=["type"],UL=["extraParam"];let ir=class Nd extends BL{static getDefaults(){return Nd.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){ri("warn","Setting type has no effect",e)}constructor(e){super(),U(this,"_cacheContext",null),Object.assign(this,Nd.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=br(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,s=e.height,r=Ke.maxCacheSideLimit,a=Ke.minCacheSideLimit;if(t<=r&&s<=r&&t*s<=Ke.perfLimitSizeTotal)return t<a&&(e.width=a),s<a&&(e.height=a),e;const l=t/s,[u,d]=Yl.limitDimsByArea(l),f=uo(a,u,r),m=uo(a,d,r);return t>f&&(e.zoomX/=t/f,e.width=f,e.capped=!0),s>m&&(e.zoomY/=s/m,e.height=m,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),s=t.x*e.x/this.scaleX,r=t.y*e.y/this.scaleY;return{width:Math.ceil(s+2),height:Math.ceil(r+2),zoomX:e.x,zoomY:e.y,x:s,y:r}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:s,height:r,zoomX:a,zoomY:l,x:u,y:d}=this._limitCacheSize(this._getCacheCanvasDimensions()),f=s!==e.width||r!==e.height,m=this.zoomX!==a||this.zoomY!==l;if(!e||!t)return!1;if(f||m){s!==e.width||r!==e.height?(e.width=s,e.height=r):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const v=u/2,y=d/2;return this.cacheTranslationX=Math.round(e.width/2-v)+v,this.cacheTranslationY=Math.round(e.height/2-y)+y,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(a,l),this.zoomX=a,this.zoomY=l,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,s=this.calcTransformMatrix(!t);e.transform(s[0],s[1],s[2],s[3],s[4],s[5])}getObjectScaling(){if(!this.group)return new ee(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Xd(this.calcTransformMatrix());return new ee(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),s=this.getCanvasRetinaScaling();return e.scalarMultiply(t*s)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==Rs&&e!==on||(t=this._constrainScale(t)),e===Rs&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof fr||(t=new fr(t));const s=this[e]!==t;return this[e]=t,s&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||s&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:s,cacheTranslationX:r,cacheTranslationY:a}=this,{width:l,height:u}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:s,cacheTranslationX:r,cacheTranslationY:a,width:l,height:u,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Ms&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,s){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(s,0,0),e.restore()}drawObject(e,t,s){const r=this.fill,a=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,s),this.fill=r,this.stroke=a}createClipPathLayer(e,t){const s=ln(t),r=s.getContext("2d");if(r.translate(t.cacheTranslationX,t.cacheTranslationY),r.scale(t.zoomX,t.zoomY),e._cacheCanvas=s,t.parentClipPaths.forEach(a=>{a.transform(r)}),t.parentClipPaths.push(e),e.absolutePositioned){const a=xn(this.calcTransformMatrix());r.transform(a[0],a[1],a[2],a[3],a[4],a[5])}return e.transform(r),e.drawObject(r,!0,t),s}_drawClipPath(e,t,s){if(!t)return;t._transformDone=!0;const r=this.createClipPathLayer(t,s);this.drawClipPathOnCache(e,t,r)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,s=this._cacheContext;return!(!t||!s||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&s&&!e&&(s.save(),s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,t.width,t.height),s.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const s=t.stroke;s&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,rn(s)?s.gradientUnits==="percentage"||s.gradientTransform||s.patternTransform?this._applyPatternForTransformedGradient(e,s):(e.strokeStyle=s.toLive(e),this._applyPatternGradientTransform(e,s)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:s}=t;s&&(rn(s)?(e.fillStyle=s.toLive(e),this._applyPatternGradientTransform(e,s)):e.fillStyle=s)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,s=this.canvas,r=this.getCanvasRetinaScaling(),[a,,,l]=s?.viewportTransform||bs,u=a*r,d=l*r,f=t.nonScaling?new ee(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*Ke.browserShadowBlurConstant*(u+d)*(f.x+f.y)/4,e.shadowOffsetX=t.offsetX*u*f.x,e.shadowOffsetY=t.offsetY*d*f.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!rn(t))return{offsetX:0,offsetY:0};const s=t.gradientTransform||t.patternTransform,r=-this.width/2+t.offsetX||0,a=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,r,a):e.transform(1,0,0,1,r,a),s&&e.transform(s[0],s[1],s[2],s[3],s[4],s[5]),{offsetX:r,offsetY:a}}_renderPaintInOrder(e){this.paintFirst===Ms?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var s;const r=this._limitCacheSize(this._getCacheCanvasDimensions()),a=this.getCanvasRetinaScaling(),l=r.x/this.scaleX/a,u=r.y/this.scaleY/a,d=ln({width:Math.ceil(l),height:Math.ceil(u)}),f=d.getContext("2d");f&&(f.beginPath(),f.moveTo(0,0),f.lineTo(l,0),f.lineTo(l,u),f.lineTo(0,u),f.closePath(),f.translate(l/2,u/2),f.scale(r.zoomX/this.scaleX/a,r.zoomY/this.scaleY/a),this._applyPatternGradientTransform(f,t),f.fillStyle=t.toLive(e),f.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(a*this.scaleX/r.zoomX,a*this.scaleY/r.zoomY),e.strokeStyle=(s=f.createPattern(d,"no-repeat"))!==null&&s!==void 0?s:"")}_findCenterFromElement(){return new ee(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(Se.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=EC(this),s=this.group,r=this.shadow,a=Math.abs,l=e.enableRetinaScaling?dC():1,u=(e.multiplier||1)*l,d=e.canvasProvider||(D=>new Sc(D,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&hL(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&gL(this,this.getViewportTransform()),this.setCoords();const f=br(),m=this.getBoundingRect(),v=this.shadow,y=new ee;if(v){const D=v.blur,k=v.nonScaling?new ee(1,1):this.getObjectScaling();y.x=2*Math.round(a(v.offsetX)+D)*a(k.x),y.y=2*Math.round(a(v.offsetY)+D)*a(k.y)}const b=m.width+y.x,w=m.height+y.y;f.width=Math.ceil(b),f.height=Math.ceil(w);const _=d(f);e.format==="jpeg"&&(_.backgroundColor="#fff"),this.setPositionByOrigin(new ee(_.width/2,_.height/2),He,He);const T=this.canvas;_._objects=[this],this.set("canvas",_),this.setCoords();const S=_.toCanvasElement(u||1,e);return this.set("canvas",T),this.shadow=r,s&&(this.group=s),this.set(t),this.setCoords(),_._objects=[],_.destroy(),S}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return vC(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return yC(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:s,originY:r}=this;if(t){const{x:a,y:l}=this.getRelativeCenterPoint();this.originX=He,this.originY=He,this.left=a,this.top=l}if(this.set("angle",e),t){const{x:a,y:l}=this.translateToOriginPoint(this.getRelativeCenterPoint(),s,r);this.left=a,this.top=l,this.originX=s,this.originY=r}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Wd.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Fn().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((s,r)=>{let[a,l]=r;return s[a]=this._animate(a,l,t),s},{})}_animate(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.split("."),a=this.constructor.colorProperties.includes(r[r.length-1]),{abort:l,startValue:u,onChange:d,onComplete:f}=s,m=z(z({},s),{},{target:this,startValue:u??r.reduce((v,y)=>v[y],this),endValue:t,abort:l?.bind(this),onChange:(v,y,b)=>{r.reduce((w,_,T)=>(T===r.length-1&&(w[_]=v),w[_]),this),d&&d(v,y,b)},onComplete:(v,y,b)=>{this.setCoords(),f&&f(v,y,b)}});return a?LL(m):zC(m)}isDescendantOf(e){const{parent:t,group:s}=this;return t===e||s===e||!!t&&t.isDescendantOf(e)||!!s&&s!==t&&s.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),s=e.getAncestors();if(t.length===0&&s.length>0&&this===s[s.length-1])return{fork:[],otherFork:[e,...s.slice(0,s.length-1)],common:[this]};for(let r,a=0;a<t.length;a++){if(r=t[a],r===e)return{fork:[this,...t.slice(0,a)],otherFork:[],common:t.slice(a)};for(let l=0;l<s.length;l++){if(this===s[l])return{fork:[],otherFork:[e,...s.slice(0,l)],common:[this,...t]};if(r===s[l])return{fork:[this,...t.slice(0,a)],otherFork:[e,...s.slice(0,l)],common:t.slice(a)}}}return{fork:[this,...t],otherFork:[e,...s],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const s=t.common[0]||this.canvas;if(!s)return;const r=t.fork.pop(),a=t.otherFork.pop(),l=s._objects.indexOf(r),u=s._objects.indexOf(a);return l>-1&&l>u}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Nd.customProperties,this.constructor.customProperties||[]);let t;const s=Ke.NUM_FRACTION_DIGITS,{clipPath:r,fill:a,stroke:l,shadow:u,strokeDashArray:d,left:f,top:m,originX:v,originY:y,width:b,height:w,strokeWidth:_,strokeLineCap:T,strokeDashOffset:S,strokeLineJoin:D,strokeUniform:k,strokeMiterLimit:M,scaleX:N,scaleY:L,angle:A,flipX:B,flipY:Y,opacity:W,visible:K,backgroundColor:q,fillRule:oe,paintFirst:re,globalCompositeOperation:fe,skewX:P,skewY:$}=this;r&&!r.excludeFromExport&&(t=r.toObject(e.concat("inverted","absolutePositioned")));const I=O=>gt(O,s),te=z(z({},To(this,e)),{},{type:this.constructor.type,version:op,originX:v,originY:y,left:I(f),top:I(m),width:I(b),height:I(w),fill:I1(a)?a.toObject():a,stroke:I1(l)?l.toObject():l,strokeWidth:I(_),strokeDashArray:d&&d.concat(),strokeLineCap:T,strokeDashOffset:S,strokeLineJoin:D,strokeUniform:k,strokeMiterLimit:I(M),scaleX:I(N),scaleY:I(L),angle:I(A),flipX:B,flipY:Y,opacity:I(W),shadow:u&&u.toObject(),visible:K,backgroundColor:q,fillRule:oe,paintFirst:re,globalCompositeOperation:fe,skewX:I(P),skewY:I($)},t?{clipPath:t}:null);return this.includeDefaultValues?te:this._removeDefaultValues(te)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),s=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return j0(e,(r,a)=>{if(a===st||a===Ns||a==="type")return!0;const l=s[a];return r!==l&&!(Array.isArray(r)&&Array.isArray(l)&&r.length===0&&l.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=xt(e,FL),s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:r}=s,a=xt(s,UL);return gh(t,a).then(l=>r?(delete l[r],new this(t[r],l)):new this(l))}static fromObject(e,t){return this._fromObject(e,t)}};U(ir,"stateProperties",TL),U(ir,"cacheProperties",_r),U(ir,"ownDefaults",jL),U(ir,"type","FabricObject"),U(ir,"colorProperties",[Ht,Ms,"backgroundColor"]),U(ir,"customProperties",[]),Se.setClass(ir),Se.setClass(ir,"object");const jo=(n,e,t)=>(s,r,a,l)=>{const u=e(s,r,a,l);return u&&kC(n,z(z({},DC(s,r,a,l)),t)),u};function Eo(n){return(e,t,s,r)=>{const{target:a,originX:l,originY:u}=t,d=a.getRelativeCenterPoint(),f=a.translateToOriginPoint(d,l,u),m=n(e,t,s,r);return a.setPositionByOrigin(f,t.originX,t.originY),m}}const r_=jo(ic,Eo((n,e,t,s)=>{const r=k0(e,e.originX,e.originY,t,s);if(Lt(e.originX)===Lt(He)||Lt(e.originX)===Lt(Nt)&&r.x<0||Lt(e.originX)===Lt(st)&&r.x>0){const{target:a}=e,l=a.strokeWidth/(a.strokeUniform?a.scaleX:1),u=AC(e)?2:1,d=a.width,f=Math.abs(r.x*u/a.scaleX)-l;return a.set("width",Math.max(f,1)),d!==a.width}return!1}));function zL(n,e,t,s,r){s=s||{};const a=this.sizeX||s.cornerSize||r.cornerSize,l=this.sizeY||s.cornerSize||r.cornerSize,u=s.transparentCorners!==void 0?s.transparentCorners:r.transparentCorners,d=u?Ms:Ht,f=!u&&(s.cornerStrokeColor||r.cornerStrokeColor);let m,v=e,y=t;n.save(),n.fillStyle=s.cornerColor||r.cornerColor||"",n.strokeStyle=s.cornerStrokeColor||r.cornerStrokeColor||"",a>l?(m=a,n.scale(1,l/a),y=t*a/l):l>a?(m=l,n.scale(a/l,1),v=e*l/a):m=a,n.beginPath(),n.arc(v,y,m/2,0,$d,!1),n[d](),f&&n.stroke(),n.restore()}function VL(n,e,t,s,r){s=s||{};const a=this.sizeX||s.cornerSize||r.cornerSize,l=this.sizeY||s.cornerSize||r.cornerSize,u=s.transparentCorners!==void 0?s.transparentCorners:r.transparentCorners,d=u?Ms:Ht,f=!u&&(s.cornerStrokeColor||r.cornerStrokeColor),m=a/2,v=l/2;n.save(),n.fillStyle=s.cornerColor||r.cornerColor||"",n.strokeStyle=s.cornerStrokeColor||r.cornerStrokeColor||"",n.translate(e,t);const y=r.getTotalAngle();n.rotate(Ot(y)),n["".concat(d,"Rect")](-m,-v,a,l),f&&n.strokeRect(-m,-v,a,l),n.restore()}class mn{constructor(e){U(this,"visible",!0),U(this,"actionName",hh),U(this,"angle",0),U(this,"x",0),U(this,"y",0),U(this,"offsetX",0),U(this,"offsetY",0),U(this,"sizeX",0),U(this,"sizeY",0),U(this,"touchSizeX",0),U(this,"touchSizeY",0),U(this,"cursorStyle","crosshair"),U(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,s,r){var a;let{tl:l,tr:u,br:d,bl:f}=r;return((a=t.canvas)===null||a===void 0?void 0:a.getActiveObject())===t&&t.isControlVisible(e)&&wt.isPointInPolygon(s,[l,u,d,f])}getActionHandler(e,t,s){return this.actionHandler}getMouseDownHandler(e,t,s){return this.mouseDownHandler}getMouseUpHandler(e,t,s){return this.mouseUpHandler}cursorStyleHandler(e,t,s){return t.cursorStyle}getActionName(e,t,s){return t.actionName}getVisibility(e,t){var s,r;return(s=(r=e._controlsVisibility)===null||r===void 0?void 0:r[t])!==null&&s!==void 0?s:this.visible}setVisibility(e,t,s){this.visible=e}positionHandler(e,t,s,r){return new ee(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,s,r,a,l){const u=C0([_c(s,r),Co({angle:e}),T0((a?this.touchSizeX:this.sizeX)||t,(a?this.touchSizeY:this.sizeY)||t)]);return{tl:new ee(-.5,-.5).transform(u),tr:new ee(.5,-.5).transform(u),br:new ee(.5,.5).transform(u),bl:new ee(-.5,.5).transform(u)}}render(e,t,s,r,a){((r=r||{}).cornerStyle||a.cornerStyle)==="circle"?zL.call(this,e,t,s,r,a):VL.call(this,e,t,s,r,a)}}const IL=(n,e,t)=>t.lockRotation?Qd:e.cursorStyle,HL=jo(fC,Eo((n,e,t,s)=>{let{target:r,ex:a,ey:l,theta:u,originX:d,originY:f}=e;const m=r.translateToOriginPoint(r.getRelativeCenterPoint(),d,f);if(wn(r,"lockRotation"))return!1;const v=Math.atan2(l-m.y,a-m.x),y=Math.atan2(s-m.y,t-m.x);let b=wr(y-v+u);if(r.snapAngle&&r.snapAngle>0){const _=r.snapAngle,T=r.snapThreshold||_,S=Math.ceil(b/_)*_,D=Math.floor(b/_)*_;Math.abs(b-D)<T?b=D:Math.abs(b-S)<T&&(b=S)}b<0&&(b=360+b),b%=360;const w=r.angle!==b;return r.angle=b,w}));function VC(n,e){const t=e.canvas,s=n[t.uniScaleKey];return t.uniformScaling&&!s||!t.uniformScaling&&s}function IC(n,e,t){const s=wn(n,"lockScalingX"),r=wn(n,"lockScalingY");if(s&&r||!e&&(s||r)&&t||s&&e==="x"||r&&e==="y")return!0;const{width:a,height:l,strokeWidth:u}=n;return a===0&&u===0&&e!=="y"||l===0&&u===0&&e!=="x"}const GL=["e","se","s","sw","w","nw","n","ne","e"],Rl=(n,e,t)=>{const s=VC(n,t);if(IC(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",s))return Qd;const r=NC(t,e);return"".concat(GL[r],"-resize")};function N0(n,e,t,s){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const a=e.target,l=r.by,u=VC(n,a);let d,f,m,v,y,b;if(IC(a,l,u))return!1;if(e.gestureScale)f=e.scaleX*e.gestureScale,m=e.scaleY*e.gestureScale;else{if(d=k0(e,e.originX,e.originY,t,s),y=l!=="y"?Math.sign(d.x||e.signX||1):1,b=l!=="x"?Math.sign(d.y||e.signY||1):1,e.signX||(e.signX=y),e.signY||(e.signY=b),wn(a,"lockScalingFlip")&&(e.signX!==y||e.signY!==b))return!1;if(v=a._getTransformedDimensions(),u&&!l){const T=Math.abs(d.x)+Math.abs(d.y),{original:S}=e,D=T/(Math.abs(v.x*S.scaleX/a.scaleX)+Math.abs(v.y*S.scaleY/a.scaleY));f=S.scaleX*D,m=S.scaleY*D}else f=Math.abs(d.x*a.scaleX/v.x),m=Math.abs(d.y*a.scaleY/v.y);AC(e)&&(f*=2,m*=2),e.signX!==y&&l!=="y"&&(e.originX=Y1(e.originX),f*=-1,e.signX=y),e.signY!==b&&l!=="x"&&(e.originY=Y1(e.originY),m*=-1,e.signY=b)}const w=a.scaleX,_=a.scaleY;return l?(l==="x"&&a.set(Rs,f),l==="y"&&a.set(on,m)):(!wn(a,"lockScalingX")&&a.set(Rs,f),!wn(a,"lockScalingY")&&a.set(on,m)),w!==a.scaleX||_!==a.scaleY}const Xu=jo(dh,Eo((n,e,t,s)=>N0(n,e,t,s))),$L=jo(dh,Eo((n,e,t,s)=>N0(n,e,t,s,{by:"x"}))),YL=jo(dh,Eo((n,e,t,s)=>N0(n,e,t,s,{by:"y"}))),qL=["target","ex","ey","skewingSide"],ym={x:{counterAxis:"y",scale:Rs,skew:_o,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:on,skew:So,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},WL=["ns","nesw","ew","nwse"],XL=(n,e,t)=>{if(e.x!==0&&wn(t,"lockSkewingY")||e.y!==0&&wn(t,"lockSkewingX"))return Qd;const s=NC(t,e)%4;return"".concat(WL[s],"-resize")};function HC(n,e,t,s,r){const{target:a}=t,{counterAxis:l,origin:u,lockSkewing:d,skew:f,flip:m}=ym[n];if(wn(a,d))return!1;const{origin:v,flip:y}=ym[l],b=Lt(t[v])*(a[y]?-1:1),w=-Math.sign(b)*(a[m]?-1:1),_=.5*-((a[f]===0&&k0(t,He,He,s,r)[n]>0||a[f]>0?1:-1)*w)+.5;return jo(gC,Eo((S,D,k,M)=>function(N,L,A){let{target:B,ex:Y,ey:W,skewingSide:K}=L,q=xt(L,qL);const{skew:oe}=ym[N],re=A.subtract(new ee(Y,W)).divide(new ee(B.scaleX,B.scaleY))[N],fe=B[oe],P=q[oe],$=Math.tan(Ot(P)),I=N==="y"?B._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:B._getTransformedDimensions({scaleX:1,scaleY:1}).y,te=2*re*K/Math.max(I,1)+$,O=wr(Math.atan(te));B.set(oe,O);const H=fe!==B[oe];if(H&&N==="y"){const{skewX:ue,scaleX:ne}=B,xe=B._getTransformedDimensions({skewY:fe}),Ae=B._getTransformedDimensions(),we=ue!==0?xe.x/Ae.x:1;we!==1&&B.set(Rs,we*ne)}return H}(n,D,new ee(k,M))))(e,z(z({},t),{},{[u]:_,skewingSide:w}),s,r)}const KL=(n,e,t,s)=>HC("x",n,e,t,s),QL=(n,e,t,s)=>HC("y",n,e,t,s);function vh(n,e){return n[e.canvas.altActionKey]}const Ku=(n,e,t)=>{const s=vh(n,t);return e.x===0?s?_o:on:e.y===0?s?So:Rs:""},eo=(n,e,t)=>vh(n,t)?XL(0,e,t):Rl(n,e,t),i_=(n,e,t,s)=>vh(n,e.target)?QL(n,e,t,s):$L(n,e,t,s),a_=(n,e,t,s)=>vh(n,e.target)?KL(n,e,t,s):YL(n,e,t,s),GC=()=>({ml:new mn({x:-.5,y:0,cursorStyleHandler:eo,actionHandler:i_,getActionName:Ku}),mr:new mn({x:.5,y:0,cursorStyleHandler:eo,actionHandler:i_,getActionName:Ku}),mb:new mn({x:0,y:.5,cursorStyleHandler:eo,actionHandler:a_,getActionName:Ku}),mt:new mn({x:0,y:-.5,cursorStyleHandler:eo,actionHandler:a_,getActionName:Ku}),tl:new mn({x:-.5,y:-.5,cursorStyleHandler:Rl,actionHandler:Xu}),tr:new mn({x:.5,y:-.5,cursorStyleHandler:Rl,actionHandler:Xu}),bl:new mn({x:-.5,y:.5,cursorStyleHandler:Rl,actionHandler:Xu}),br:new mn({x:.5,y:.5,cursorStyleHandler:Rl,actionHandler:Xu}),mtr:new mn({x:0,y:-.5,actionHandler:HL,cursorStyleHandler:IL,offsetY:-40,withConnection:!0,actionName:_0})}),ZL=()=>({mr:new mn({x:.5,y:0,actionHandler:r_,cursorStyleHandler:eo,actionName:ic}),ml:new mn({x:-.5,y:0,actionHandler:r_,cursorStyleHandler:eo,actionName:ic})}),JL=()=>z(z({},GC()),ZL());class cc extends ir{static getDefaults(){return z(z({},super.getDefaults()),cc.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),cc.ownDefaults),this.setOptions(e)}static createControls(){return{controls:GC()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,s=t.target,r=t.action;if(this===s&&r&&r.startsWith(hh))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const s=Object.entries(this.oCoords);for(let r=s.length-1;r>=0;r--){const[a,l]=s[r],u=this.controls[a];if(u.shouldActivate(a,this,e,t?l.touchCorner:l.corner))return this.__corner=a,{key:a,control:u,coord:this.oCoords[a]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),s=_c(t.x,t.y),r=Co({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),a=os(s,r),l=os(e,a),u=os(l,[1/e[0],0,0,1/e[3],0,0]),d=this.group?Xd(this.calcTransformMatrix()):void 0;d&&(d.scaleX=Math.abs(d.scaleX),d.scaleY=Math.abs(d.scaleY));const f=this._calculateCurrentDimensions(d),m={};return this.forEachControl((v,y)=>{const b=v.positionHandler(f,u,this,v);m[y]=Object.assign(b,this._calcCornerCoords(v,b))}),m}_calcCornerCoords(e,t){const s=this.getTotalAngle();return{corner:e.calcCornerCoords(s,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(s,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),s=this._calculateCurrentDimensions(),r=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/r[0],1/r[3]),e.rotate(Ot(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-s.x/2,-s.y/2,s.x,s.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=z({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},s);e.save(),e.strokeStyle=r.borderColor,this._setLineDash(e,r.borderDashArray),this.strokeBorders(e,t),r.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:s,hasControls:r}=this,a=z({hasBorders:s,hasControls:r},t),l=this.getViewportTransform(),u=a.hasBorders,d=a.hasControls,f=os(l,this.calcTransformMatrix()),m=Xd(f);e.save(),e.translate(m.translateX,m.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(m.angle-=180),e.rotate(Ot(this.group?m.angle:this.angle)),u&&this.drawBorders(e,m,t),d&&this.drawControls(e,t),e.restore()}drawBorders(e,t,s){let r;if(s&&s.forActiveSelection||this.group){const a=E0(this.width,this.height,fh(t)),l=this.isStrokeAccountedForInDimensions()?S0:(this.strokeUniform?new ee().scalarAdd(this.canvas?this.canvas.getZoom():1):new ee(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);r=a.add(l).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else r=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,r,s)}drawControlsConnectingLines(e,t){let s=!1;e.beginPath(),this.forEachControl((r,a)=>{r.withConnection&&r.getVisibility(this,a)&&(s=!0,e.moveTo(r.x*t.x,r.y*t.y),e.lineTo(r.x*t.x+r.offsetX,r.y*t.y+r.offsetY))}),s&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const s=this.getCanvasRetinaScaling(),{cornerStrokeColor:r,cornerDashArray:a,cornerColor:l}=this,u=z({cornerStrokeColor:r,cornerDashArray:a,cornerColor:l},t);e.setTransform(s,0,0,s,0,0),e.strokeStyle=e.fillStyle=u.cornerColor,this.transparentCorners||(e.strokeStyle=u.cornerStrokeColor),this._setLineDash(e,u.cornerDashArray),this.forEachControl((d,f)=>{if(d.getVisibility(this,f)){const m=this.oCoords[f];d.render(e,m.x,m.y,u,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[s,r]=t;return this.setControlVisible(s,r)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const s=this.canvas.viewportTransform;t.save(),t.transform(s[0],s[1],s[2],s[3],s[4],s[5]),this.transform(t);const r=this.width+4,a=this.height+4;return t.clearRect(-r/2,-a/2,r,a),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function $C(n,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(s=>{s!=="constructor"&&Object.defineProperty(n.prototype,s,Object.getOwnPropertyDescriptor(t.prototype,s)||Object.create(null))})}),n}U(cc,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class ms extends cc{}$C(ms,[OC]),Se.setClass(ms),Se.setClass(ms,"object");const e6=(n,e,t,s)=>{const r=2*(s=Math.round(s))+1,{data:a}=n.getImageData(e-s,t-s,r,r);for(let l=3;l<a.length;l+=4)if(a[l]>0)return!1;return!0};class YC{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new ee(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new ee(1/this.options.scaleX,1/this.options.scaleY):new ee(1,1)}createSideVector(e,t){const s=dp(e,t);return this.options.strokeUniform?s.multiply(this.scale):s}projectOrthogonally(e,t,s){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,s)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new ee(e);return t.y+=t.x*Math.tan(Ot(this.options.skewY)),t.x+=t.y*Math.tan(Ot(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const t6=new ee;class ao extends YC{static getOrthogonalRotationFactor(e,t){const s=t?fp(e,t):SL(e);return Math.abs(s)<wc?-1:1}constructor(e,t,s,r){super(r),U(this,"AB",void 0),U(this,"AC",void 0),U(this,"alpha",void 0),U(this,"bisector",void 0),this.A=new ee(e),this.B=new ee(t),this.C=new ee(s),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=fp(this.AB,this.AC),this.bisector=A0(FC(this.AB.eq(t6)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const r=this.createSideVector(e,t),a=UC(r),l=ao.getOrthogonalRotationFactor(a,this.bisector);return this.scaleUnitVector(a,s*l)}projectBevel(){const e=[];return(this.alpha%$d==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),s=1/Math.sin(t/2),r=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*s),a=this.options.strokeUniform?hp(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return hp(r)/this.strokeProjectionMagnitude<=a&&e.push(this.applySkew(this.A.add(r))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const s=[],r=new ee(ao.getOrthogonalRotationFactor(this.bisector),ao.getOrthogonalRotationFactor(new ee(this.bisector.y,this.bisector.x)));return[new ee(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(r),new ee(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(r)].forEach(a=>{t_(a,e,t)&&s.push(this.A.add(a))}),s}projectRoundWithSkew(e,t){const s=[],{skewX:r,skewY:a,scaleX:l,scaleY:u,strokeUniform:d}=this.options,f=new ee(Math.tan(Ot(r)),Math.tan(Ot(a))),m=this.strokeProjectionMagnitude,v=d?m/u/Math.sqrt(1/u**2+1/l**2*f.y**2):m/Math.sqrt(1+f.y**2),y=new ee(Math.sqrt(Math.max(m**2-v**2,0)),v),b=d?m/Math.sqrt(1+f.x**2*(1/u)**2/(1/l+1/l*f.x*f.y)**2):m/Math.sqrt(1+f.x**2/(1+f.x*f.y)**2),w=new ee(b,Math.sqrt(Math.max(m**2-b**2,0)));return[w,w.scalarMultiply(-1),y,y.scalarMultiply(-1)].map(_=>this.applySkew(d?_.multiply(this.strokeUniformScalar):_)).forEach(_=>{t_(_,e,t)&&s.push(this.applySkew(this.A).add(_))}),s}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%$d==0,s=this.applySkew(this.A),r=e[t?0:2].subtract(s),a=e[t?1:0].subtract(s),l=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),u=Xl(r,l)>0,d=u?r:a,f=u?a:r;return this.isSkewed()?e.push(...this.projectRoundWithSkew(d,f)):e.push(...this.projectRoundNoSkew(d,f)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class o_ extends YC{constructor(e,t,s){super(s),this.A=new ee(e),this.T=new ee(t)}calcOrthogonalProjection(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const r=this.createSideVector(e,t);return this.scaleUnitVector(UC(r),s)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new ee(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new ao(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new ee(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),s=this.scaleUnitVector(A0(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),r=this.A.add(s);e.push(r.add(t),r.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const s6=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const s=[];if(n.length===0)return s;const r=n.reduce((a,l)=>(a[a.length-1].eq(l)||a.push(new ee(l)),a),[new ee(n[0])]);if(r.length===1)t=!0;else if(!t){const a=r[0],l=((u,d)=>{for(let f=u.length-1;f>=0;f--)if(d(u[f],f,u))return f;return-1})(r,u=>!u.eq(a));r.splice(l+1)}return r.forEach((a,l,u)=>{let d,f;l===0?(f=u[1],d=t?a:u[u.length-1]):l===u.length-1?(d=u[l-1],f=t?a:u[0]):(d=u[l-1],f=u[l+1]),t&&u.length===1?s.push(...new o_(a,a,e).project()):!t||l!==0&&l!==u.length-1?s.push(...new ao(a,d,f,e).project()):s.push(...new o_(a,l===0?f:d,e).project())}),s},O0=n=>{const e={};return Object.keys(n).forEach(t=>{e[t]={},Object.keys(n[t]).forEach(s=>{e[t][s]=z({},n[t][s])})}),e},n6=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let Al;const M0=n=>{if(Al||Al||(Al="Intl"in uh()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),Al){const e=Al.segment(n);return Array.from(e).map(t=>{let{segment:s}=t;return s})}return r6(n)},r6=n=>{const e=[];for(let t,s=0;s<n.length;s++)(t=i6(n,s))!==!1&&e.push(t);return e},i6=(n,e)=>{const t=n.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return n.charAt(e);if(55296<=t&&t<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";const r=n.charCodeAt(e+1);if(56320>r||r>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const s=n.charCodeAt(e-1);if(55296>s||s>56319)throw"Low surrogate without preceding high surrogate";return!1},R0=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==e.fill||n.stroke!==e.stroke||n.strokeWidth!==e.strokeWidth||n.fontSize!==e.fontSize||n.fontFamily!==e.fontFamily||n.fontWeight!==e.fontWeight||n.fontStyle!==e.fontStyle||n.textDecorationThickness!==e.textDecorationThickness||n.textBackgroundColor!==e.textBackgroundColor||n.deltaY!==e.deltaY||t&&(n.overline!==e.overline||n.underline!==e.underline||n.linethrough!==e.linethrough)},a6=(n,e)=>{const t=e.split(`
`),s=[];let r=-1,a={};n=O0(n);for(let l=0;l<t.length;l++){const u=M0(t[l]);if(n[l])for(let d=0;d<u.length;d++){r++;const f=n[l][d];f&&Object.keys(f).length>0&&(R0(a,f,!0)?s.push({start:r,end:r+1,style:f}):s[s.length-1].end++),a=f||{}}else r+=u.length,a={}}return s},o6=(n,e)=>{if(!Array.isArray(n))return O0(n);const t=e.split(w0),s={};let r=-1,a=0;for(let l=0;l<t.length;l++){const u=M0(t[l]);for(let d=0;d<u.length;d++)r++,n[a]&&n[a].start<=r&&r<n[a].end&&(s[l]=s[l]||{},s[l][d]=z({},n[a].style),r===n[a].end-1&&a++)}return s},ci=["display","transform",Ht,"fill-opacity","fill-rule","opacity",Ms,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function l_(n,e){const t=n.nodeName,s=n.getAttribute("class"),r=n.getAttribute("id"),a="(?![a-zA-Z\\-]+)";let l;if(l=new RegExp("^"+t,"i"),e=e.replace(l,""),r&&e.length&&(l=new RegExp("#"+r+a,"i"),e=e.replace(l,"")),s&&e.length){const u=s.split(" ");for(let d=u.length;d--;)l=new RegExp("\\."+u[d]+a,"i"),e=e.replace(l,"")}return e.length===0}function l6(n,e){let t=!0;const s=l_(n,e.pop());return s&&e.length&&(t=function(r,a){let l,u=!0;for(;r.parentElement&&r.parentElement.nodeType===1&&a.length;)u&&(l=a.pop()),u=l_(r=r.parentElement,l);return a.length===0}(n,e)),s&&t&&e.length===0}const c6=n=>{var e;return(e=wL[n])!==null&&e!==void 0?e:n},u6=new RegExp("(".concat(bn,")"),"gi"),d6=n=>n.replace(u6," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var c_,u_,d_,h_,f_,g_,m_;const ys="(".concat(bn,")"),h6=String.raw(c_||(c_=Un(["(skewX)(",")"],["(skewX)\\(","\\)"])),ys),f6=String.raw(u_||(u_=Un(["(skewY)(",")"],["(skewY)\\(","\\)"])),ys),g6=String.raw(d_||(d_=Un(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),ys,ys,ys),m6=String.raw(h_||(h_=Un(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),ys,ys),p6=String.raw(f_||(f_=Un(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),ys,ys),v6=String.raw(g_||(g_=Un(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),ys,ys,ys,ys,ys,ys),P0="(?:".concat(v6,"|").concat(p6,"|").concat(g6,"|").concat(m6,"|").concat(h6,"|").concat(f6,")"),y6="(?:".concat(P0,"*)"),x6=String.raw(m_||(m_=Un(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),y6),b6=new RegExp(x6),w6=new RegExp(P0),_6=new RegExp(P0,"g");function gp(n){const e=[];if(!(n=d6(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!b6.test(n))return[...bs];for(const t of n.matchAll(_6)){const s=w6.exec(t[0]);if(!s)continue;let r=bs;const a=s.filter(w=>!!w),[,l,...u]=a,[d,f,m,v,y,b]=u.map(w=>parseFloat(w));switch(l){case"translate":r=_c(d,f);break;case _0:r=Co({angle:d},{x:f,y:m});break;case hh:r=T0(d,f);break;case _o:r=wC(d);break;case So:r=_C(d);break;case"matrix":r=[d,f,m,v,y,b]}e.push(r)}return C0(e)}function S6(n,e,t,s){const r=Array.isArray(e);let a,l=e;if(n!==Ht&&n!==Ms||e!==Os){if(n==="strokeUniform")return e==="non-scaling-stroke";if(n==="strokeDashArray")l=e===Os?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")l=t&&t.transformMatrix?os(t.transformMatrix,gp(e)):gp(e);else if(n==="visible")l=e!==Os&&e!=="hidden",t&&t.visible===!1&&(l=!1);else if(n==="opacity")l=parseFloat(e),t&&t.opacity!==void 0&&(l*=t.opacity);else if(n==="textAnchor")l=e==="start"?st:e==="end"?Nt:He;else if(n==="charSpacing"||n===$i)a=io(e,s)/s*1e3;else if(n==="paintFirst"){const u=e.indexOf(Ht),d=e.indexOf(Ms);l=Ht,(u>-1&&d>-1&&d<u||u===-1&&d>-1)&&(l=Ms)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return e;if(n==="imageSmoothing")return e==="optimizeQuality";a=r?e.map(io):io(e,s)}}else l="";return!r&&isNaN(a)?l:a}function C6(n,e){const t=n.match(bL);if(!t)return;const s=t[1],r=t[3],a=t[4],l=t[5],u=t[6];s&&(e.fontStyle=s),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),a&&(e.fontSize=io(a)),u&&(e.fontFamily=u),l&&(e.lineHeight=l==="normal"?1:l)}function T6(n,e){n.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[s,r]=t.split(":");e[s.trim().toLowerCase()]=r.trim()})}function j6(n){const e={},t=n.getAttribute("style");return t&&(typeof t=="string"?T6(t,e):function(s,r){Object.entries(s).forEach(a=>{let[l,u]=a;u!==void 0&&(r[l.toLowerCase()]=u)})}(t,e)),e}const E6={stroke:"strokeOpacity",fill:"fillOpacity"};function Sr(n,e,t){if(!n)return{};let s,r={},a=b0;n.parentNode&&e_.test(n.parentNode.nodeName)&&(r=Sr(n.parentElement,e,t),r.fontSize&&(s=a=io(r.fontSize)));const l=z(z(z({},e.reduce((f,m)=>{const v=n.getAttribute(m);return v&&(f[m]=v),f},{})),function(f){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={};for(const y in m)l6(f,y.split(" "))&&(v=z(z({},v),m[y]));return v}(n,t)),j6(n));l[pm]&&n.setAttribute(pm,l[pm]),l[mm]&&(s=io(l[mm],a),l[mm]="".concat(s));const u={};for(const f in l){const m=c6(f),v=S6(m,l[f],r,s);u[m]=v}u&&u.font&&C6(u.font,u);const d=z(z({},r),u);return e_.test(n.nodeName)?d:function(f){const m=ms.getDefaults();return Object.entries(E6).forEach(v=>{let[y,b]=v;if(f[b]===void 0||f[y]==="")return;if(f[y]===void 0){if(!m[y])return;f[y]=m[y]}if(f[y].indexOf("url(")===0)return;const w=new at(f[y]);f[y]=w.setAlpha(gt(w.getAlpha()*f[b],2)).toRgba()}),f}(d)}const k6=["left","top","width","height","visible"],qC=["rx","ry"];class Nn extends ms{static getDefaults(){return z(z({},super.getDefaults()),Nn.ownDefaults)}constructor(e){super(),Object.assign(this,Nn.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:s}=this,r=-t/2,a=-s/2,l=this.rx?Math.min(this.rx,t/2):0,u=this.ry?Math.min(this.ry,s/2):0,d=l!==0||u!==0;e.beginPath(),e.moveTo(r+l,a),e.lineTo(r+t-l,a),d&&e.bezierCurveTo(r+t-Wr*l,a,r+t,a+Wr*u,r+t,a+u),e.lineTo(r+t,a+s-u),d&&e.bezierCurveTo(r+t,a+s-Wr*u,r+t-Wr*l,a+s,r+t-l,a+s),e.lineTo(r+l,a+s),d&&e.bezierCurveTo(r+Wr*l,a+s,r,a+s-Wr*u,r,a+s-u),e.lineTo(r,a+u),d&&e.bezierCurveTo(r,a+Wr*u,r+Wr*l,a,r+l,a),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...qC,...e])}_toSVG(){const{width:e,height:t,rx:s,ry:r}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(s,'" ry="').concat(r,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,s){const r=Sr(e,this.ATTRIBUTE_NAMES,s),{left:a=0,top:l=0,width:u=0,height:d=0,visible:f=!0}=r,m=xt(r,k6);return new this(z(z(z({},t),m),{},{left:a,top:l,width:u,height:d,visible:!!(f&&u&&d)}))}}U(Nn,"type","Rect"),U(Nn,"cacheProperties",[..._r,...qC]),U(Nn,"ownDefaults",{rx:0,ry:0}),U(Nn,"ATTRIBUTE_NAMES",[...ci,"x","y","rx","ry","width","height"]),Se.setClass(Nn),Se.setSVGClass(Nn);const cr="initialization",Jd="added",L0="removed",eh="imperative",WC=(n,e)=>{const{strokeUniform:t,strokeWidth:s,width:r,height:a,group:l}=e,u=l&&l!==n?mh(l.calcTransformMatrix(),n.calcTransformMatrix()):null,d=u?e.getRelativeCenterPoint().transform(u):e.getRelativeCenterPoint(),f=!e.isStrokeAccountedForInDimensions(),m=t&&f?fL(new ee(s,s),void 0,n.calcTransformMatrix()):S0,v=!t&&f?s:0,y=E0(r+v,a+v,C0([u,e.calcOwnMatrix()],!0)).add(m).scalarDivide(2);return[d.subtract(y),d.add(y)]};class yh{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:s,strategy:r}=e;return t===cr||t===eh||!!s&&r!==s}shouldLayoutClipPath(e){let{type:t,target:{clipPath:s}}=e;return t!==cr&&s&&!s.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:s,target:r}=t;if(s===eh&&t.overrides)return t.overrides;if(e.length===0)return;const{left:a,top:l,width:u,height:d}=hr(e.map(v=>WC(r,v)).reduce((v,y)=>v.concat(y),[])),f=new ee(u,d),m=new ee(a,l).add(f.scalarDivide(2));if(s===cr){const v=this.getInitialSize(t,{size:f,center:m});return{center:m,relativeCorrection:new ee(0,0),size:v}}return{center:m.transform(r.calcOwnMatrix()),size:f}}}U(yh,"type","strategy");class mp extends yh{shouldPerformLayout(e){return!0}}U(mp,"type","fit-content"),Se.setClass(mp);const A6=["strategy"],D6=["target","strategy","bubbles","prevStrategy"],XC="layoutManager";class uc{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new mp;U(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=z(z({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const s=this.getLayoutResult(t);s&&this.commitLayout(t,s),this.onAfterLayout(t,s),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:s}=t;return[qd,hC,ic,fC,dh,gC,Yd,JP,eL].map(r=>e.on(r,a=>this.performLayout(r===qd?{type:"object_modified",trigger:r,e:a,target:s}:{type:"object_modifying",trigger:r,e:a,target:s})))}subscribe(e,t){this.unsubscribe(e,t);const s=this.attachHandlers(e,t);this._subscriptions.set(e,s)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(s=>s()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:s}=e,{canvas:r}=t;if(s===cr||s===Jd?this.subscribeTargets(e):s===L0&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),r&&r.fire("object:layout:before",{target:t,context:e}),s===eh&&e.deep){const a=xt(e,A6);t.forEachObject(l=>l.layoutManager&&l.layoutManager.performLayout(z(z({},a),{},{bubbles:!1,target:l})))}}getLayoutResult(e){const{target:t,strategy:s,type:r}=e,a=s.calcLayoutResult(e,t.getObjects());if(!a)return;const l=r===cr?new ee:t.getRelativeCenterPoint(),{center:u,correction:d=new ee,relativeCorrection:f=new ee}=a,m=l.subtract(u).add(d).transform(r===cr?bs:xn(t.calcOwnMatrix()),!0).add(f);return{result:a,prevCenter:l,nextCenter:u,offset:m}}commitLayout(e,t){const{target:s}=e,{result:{size:r},nextCenter:a}=t;var l,u;s.set({width:r.x,height:r.y}),this.layoutObjects(e,t),e.type===cr?s.set({left:(l=e.x)!==null&&l!==void 0?l:a.x+r.x*Lt(s.originX),top:(u=e.y)!==null&&u!==void 0?u:a.y+r.y*Lt(s.originY)}):(s.setPositionByOrigin(a,He,He),s.setCoords(),s.set("dirty",!0))}layoutObjects(e,t){const{target:s}=e;s.forEachObject(r=>{r.group===s&&this.layoutObject(e,t,r)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,s.clipPath)}layoutObject(e,t,s){let{offset:r}=t;s.set({left:s.left+r.x,top:s.top+r.y})}onAfterLayout(e,t){const{target:s,strategy:r,bubbles:a,prevStrategy:l}=e,u=xt(e,D6),{canvas:d}=s;s.fire("layout:after",{context:e,result:t}),d&&d.fire("object:layout:after",{context:e,result:t,target:s});const f=s.parent;a&&f!=null&&f.layoutManager&&((u.path||(u.path=[])).push(s),f.layoutManager.performLayout(z(z({},u),{},{target:f}))),s.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(s=>s())),e.clear()}toObject(){return{type:XC,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}Se.setClass(uc,XC);const N6=["type","objects","layoutManager"];class O6 extends uc{performLayout(){}}class Hi extends mC(ms){static getDefaults(){return z(z({},super.getDefaults()),Hi.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),U(this,"_activeObjects",[]),U(this,"__objectSelectionTracker",void 0),U(this,"__objectSelectionDisposer",void 0),Object.assign(this,Hi.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var s;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(r=>{this.enterGroup(r,!1)}),this.layoutManager=(s=t.layoutManager)!==null&&s!==void 0?s:new uc,this.layoutManager.performLayout({type:cr,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(ri("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(ri("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,s,r)=>this.canEnterGroup(t)&&r.indexOf(t)===s)}add(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const r=this._filterObjectsBeforeEnteringGroup(t),a=super.add(...r);return this._onAfterObjectsChange(Jd,r),a}insertAt(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];const a=this._filterObjectsBeforeEnteringGroup(s),l=super.insertAt(e,...a);return this._onAfterObjectsChange(Jd,a),l}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(L0,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const s=this[e];return super._set(e,t),e==="canvas"&&s!==t&&(this._objects||[]).forEach(r=>{r._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:s}=t;const r=this._activeObjects;if(e)r.push(s),this._set("dirty",!0);else if(r.length>0){const a=r.indexOf(s);a>-1&&(r.splice(a,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&Kd(e,os(xn(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const s=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();s&&(s===e||e.isDescendantOf(s))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(Kd(e,os(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const s=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;s>-1&&this._activeObjects.splice(s,1)}shouldCache(){const e=ms.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,s){this._renderBackground(e);for(let a=0;a<this._objects.length;a++){var r;const l=this._objects[a];(r=this.canvas)!==null&&r!==void 0&&r.preserveObjectStacking&&l.group!==this?(e.save(),e.transform(...xn(this.calcTransformMatrix())),l.render(e),e.restore()):l.group===this&&l.render(e)}this._drawClipPath(e,this.clipPath,s)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(z({target:this,type:eh},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const s=this.includeDefaultValues;return this._objects.filter(function(r){return!r.excludeFromExport}).map(function(r){const a=r.includeDefaultValues;r.includeDefaultValues=s;const l=r[e||"toObject"](t);return r.includeDefaultValues=a,l})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return z(z(z({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=Nn.prototype._toSVG.call(this),s=t.indexOf("COMMON_PARTS");t[s]='for="group" ';const r=t.join("");return e?e(r):r}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],s=this._createSVGBgRect(e);s&&t.push("		",s);for(let r=0;r<this._objects.length;r++)t.push("		",this._objects[r].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],s=this._createSVGBgRect(e);s&&t.push("	",s);for(let r=0;r<this._objects.length;r++)t.push("	",this._objects[r].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:s,objects:r=[],layoutManager:a}=e,l=xt(e,N6);return Promise.all([ac(r,t),gh(l,t)]).then(u=>{let[d,f]=u;const m=new this(d,z(z(z({},l),f),{},{layoutManager:new O6}));if(a){const v=Se.getClass(a.type),y=Se.getClass(a.strategy);m.layoutManager=new v(new y)}else m.layoutManager=new uc;return m.layoutManager.subscribeTargets({type:cr,target:m,targets:m.getObjects()}),m.setCoords(),m})}}U(Hi,"type","Group"),U(Hi,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),Se.setClass(Hi);const M6=(n,e)=>Math.min(e.width/n.width,e.height/n.height),R6=(n,e)=>Math.max(e.width/n.width,e.height/n.height),pp="\\s*,?\\s*",Dl="".concat(pp,"(").concat(bn,")"),P6="".concat(Dl).concat(Dl).concat(Dl).concat(pp,"([01])").concat(pp,"([01])").concat(Dl).concat(Dl),L6={m:"l",M:"L"},B6=(n,e,t,s,r,a,l,u,d,f,m)=>{const v=yr(n),y=xr(n),b=yr(e),w=xr(e),_=t*r*b-s*a*w+l,T=s*r*b+t*a*w+u;return["C",f+d*(-t*r*y-s*a*v),m+d*(-s*r*y+t*a*v),_+d*(t*r*w+s*a*b),T+d*(s*r*w-t*a*b),_,T]},p_=(n,e,t,s)=>{const r=Math.atan2(e,n),a=Math.atan2(s,t);return a>=r?a-r:2*Math.PI-(r-a)};function v_(n,e,t,s,r,a,l,u){let d;if(Ke.cachesBoundsOfCurve&&(d=[...arguments].join(),Yl.boundsOfCurveCache[d]))return Yl.boundsOfCurveCache[d];const f=Math.sqrt,m=Math.abs,v=[],y=[[0,0],[0,0]];let b=6*n-12*t+6*r,w=-3*n+9*t-9*r+3*l,_=3*t-3*n;for(let M=0;M<2;++M){if(M>0&&(b=6*e-12*s+6*a,w=-3*e+9*s-9*a+3*u,_=3*s-3*e),m(w)<1e-12){if(m(b)<1e-12)continue;const Y=-_/b;0<Y&&Y<1&&v.push(Y);continue}const N=b*b-4*_*w;if(N<0)continue;const L=f(N),A=(-b+L)/(2*w);0<A&&A<1&&v.push(A);const B=(-b-L)/(2*w);0<B&&B<1&&v.push(B)}let T=v.length;const S=T,D=KC(n,e,t,s,r,a,l,u);for(;T--;){const{x:M,y:N}=D(v[T]);y[0][T]=M,y[1][T]=N}y[0][S]=n,y[1][S]=e,y[0][S+1]=l,y[1][S+1]=u;const k=[new ee(Math.min(...y[0]),Math.min(...y[1])),new ee(Math.max(...y[0]),Math.max(...y[1]))];return Ke.cachesBoundsOfCurve&&(Yl.boundsOfCurveCache[d]=k),k}const F6=(n,e,t)=>{let[s,r,a,l,u,d,f,m]=t;const v=((y,b,w,_,T,S,D)=>{if(w===0||_===0)return[];let k=0,M=0,N=0;const L=Math.PI,A=D*x0,B=xr(A),Y=yr(A),W=.5*(-Y*y-B*b),K=.5*(-Y*b+B*y),q=w**2,oe=_**2,re=K**2,fe=W**2,P=q*oe-q*re-oe*fe;let $=Math.abs(w),I=Math.abs(_);if(P<0){const ye=Math.sqrt(1-P/(q*oe));$*=ye,I*=ye}else N=(T===S?-1:1)*Math.sqrt(P/(q*re+oe*fe));const te=N*$*K/I,O=-N*I*W/$,H=Y*te-B*O+.5*y,ue=B*te+Y*O+.5*b;let ne=p_(1,0,(W-te)/$,(K-O)/I),xe=p_((W-te)/$,(K-O)/I,(-W-te)/$,(-K-O)/I);S===0&&xe>0?xe-=2*L:S===1&&xe<0&&(xe+=2*L);const Ae=Math.ceil(Math.abs(xe/L*2)),we=[],ze=xe/Ae,Ue=8/3*Math.sin(ze/4)*Math.sin(ze/4)/Math.sin(ze/2);let dt=ne+ze;for(let ye=0;ye<Ae;ye++)we[ye]=B6(ne,dt,Y,B,$,I,H,ue,Ue,k,M),k=we[ye][5],M=we[ye][6],ne=dt,dt+=ze;return we})(f-n,m-e,r,a,u,d,l);for(let y=0,b=v.length;y<b;y++)v[y][1]+=n,v[y][2]+=e,v[y][3]+=n,v[y][4]+=e,v[y][5]+=n,v[y][6]+=e;return v},U6=n=>{let e=0,t=0,s=0,r=0;const a=[];let l,u=0,d=0;for(const f of n){const m=[...f];let v;switch(m[0]){case"l":m[1]+=e,m[2]+=t;case"L":e=m[1],t=m[2],v=["L",e,t];break;case"h":m[1]+=e;case"H":e=m[1],v=["L",e,t];break;case"v":m[1]+=t;case"V":t=m[1],v=["L",e,t];break;case"m":m[1]+=e,m[2]+=t;case"M":e=m[1],t=m[2],s=m[1],r=m[2],v=["M",e,t];break;case"c":m[1]+=e,m[2]+=t,m[3]+=e,m[4]+=t,m[5]+=e,m[6]+=t;case"C":u=m[3],d=m[4],e=m[5],t=m[6],v=["C",m[1],m[2],u,d,e,t];break;case"s":m[1]+=e,m[2]+=t,m[3]+=e,m[4]+=t;case"S":l==="C"?(u=2*e-u,d=2*t-d):(u=e,d=t),e=m[3],t=m[4],v=["C",u,d,m[1],m[2],e,t],u=v[3],d=v[4];break;case"q":m[1]+=e,m[2]+=t,m[3]+=e,m[4]+=t;case"Q":u=m[1],d=m[2],e=m[3],t=m[4],v=["Q",u,d,e,t];break;case"t":m[1]+=e,m[2]+=t;case"T":l==="Q"?(u=2*e-u,d=2*t-d):(u=e,d=t),e=m[1],t=m[2],v=["Q",u,d,e,t];break;case"a":m[6]+=e,m[7]+=t;case"A":F6(e,t,m).forEach(y=>a.push(y)),e=m[6],t=m[7];break;case"z":case"Z":e=s,t=r,v=["Z"]}v?(a.push(v),l=v[0]):l=""}return a},th=(n,e,t,s)=>Math.sqrt((t-n)**2+(s-e)**2),KC=(n,e,t,s,r,a,l,u)=>d=>{const f=d**3,m=(b=>3*b**2*(1-b))(d),v=(b=>3*b*(1-b)**2)(d),y=(b=>(1-b)**3)(d);return new ee(l*f+r*m+t*v+n*y,u*f+a*m+s*v+e*y)},QC=n=>n**2,ZC=n=>2*n*(1-n),JC=n=>(1-n)**2,z6=(n,e,t,s,r,a,l,u)=>d=>{const f=QC(d),m=ZC(d),v=JC(d),y=3*(v*(t-n)+m*(r-t)+f*(l-r)),b=3*(v*(s-e)+m*(a-s)+f*(u-a));return Math.atan2(b,y)},V6=(n,e,t,s,r,a)=>l=>{const u=QC(l),d=ZC(l),f=JC(l);return new ee(r*u+t*d+n*f,a*u+s*d+e*f)},I6=(n,e,t,s,r,a)=>l=>{const u=1-l,d=2*(u*(t-n)+l*(r-t)),f=2*(u*(s-e)+l*(a-s));return Math.atan2(f,d)},y_=(n,e,t)=>{let s=new ee(e,t),r=0;for(let a=1;a<=100;a+=1){const l=n(a/100);r+=th(s.x,s.y,l.x,l.y),s=l}return r},H6=(n,e)=>{let t,s=0,r=0,a={x:n.x,y:n.y},l=z({},a),u=.01,d=0;const f=n.iterator,m=n.angleFinder;for(;r<e&&u>1e-4;)l=f(s),d=s,t=th(a.x,a.y,l.x,l.y),t+r>e?(s-=u,u/=2):(a=l,s+=u,r+=t);return z(z({},l),{},{angle:m(d)})},eT=n=>{let e,t,s=0,r=0,a=0,l=0,u=0;const d=[];for(const f of n){const m={x:r,y:a,command:f[0],length:0};switch(f[0]){case"M":t=m,t.x=l=r=f[1],t.y=u=a=f[2];break;case"L":t=m,t.length=th(r,a,f[1],f[2]),r=f[1],a=f[2];break;case"C":e=KC(r,a,f[1],f[2],f[3],f[4],f[5],f[6]),t=m,t.iterator=e,t.angleFinder=z6(r,a,f[1],f[2],f[3],f[4],f[5],f[6]),t.length=y_(e,r,a),r=f[5],a=f[6];break;case"Q":e=V6(r,a,f[1],f[2],f[3],f[4]),t=m,t.iterator=e,t.angleFinder=I6(r,a,f[1],f[2],f[3],f[4]),t.length=y_(e,r,a),r=f[3],a=f[4];break;case"Z":t=m,t.destX=l,t.destY=u,t.length=th(r,a,l,u),r=l,a=u}s+=t.length,d.push(t)}return d.push({length:s,x:r,y:a}),d},G6=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:eT(n),s=0;for(;e-t[s].length>0&&s<t.length-2;)e-=t[s].length,s++;const r=t[s],a=e/r.length,l=n[s];switch(r.command){case"M":return{x:r.x,y:r.y,angle:0};case"Z":return z(z({},new ee(r.x,r.y).lerp(new ee(r.destX,r.destY),a)),{},{angle:Math.atan2(r.destY-r.y,r.destX-r.x)});case"L":return z(z({},new ee(r.x,r.y).lerp(new ee(l[1],l[2]),a)),{},{angle:Math.atan2(l[2]-r.y,l[1]-r.x)});case"C":case"Q":return H6(r,e)}},$6=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),x_=new RegExp(P6,"g"),Y6=new RegExp(bn,"gi"),q6={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},W6=n=>{var e;const t=[],s=(e=n.match($6))!==null&&e!==void 0?e:[];for(const r of s){const a=r[0];if(a==="z"||a==="Z"){t.push([a]);continue}const l=q6[a.toLowerCase()];let u=[];if(a==="a"||a==="A"){x_.lastIndex=0;for(let d=null;d=x_.exec(r);)u.push(...d.slice(1))}else u=r.match(Y6)||[];for(let d=0;d<u.length;d+=l){const f=new Array(l),m=L6[a];f[0]=d>0&&m?m:a;for(let v=0;v<l;v++)f[v+1]=parseFloat(u[d+v]);t.push(f)}}return t},X6=(n,e)=>n.map(t=>t.map((s,r)=>r===0||e===void 0?s:gt(s,e)).join(" ")).join(" ");function vp(n,e){const t=n.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(s=>{let[r,a]=s;return t.setProperty(r,a)}))}class K6 extends jC{constructor(e){let{allowTouchScrolling:t=!1,containerClass:s=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),U(this,"upper",void 0),U(this,"container",void 0);const{el:r}=this.lower,a=this.createUpperCanvas();this.upper={el:a,ctx:a.getContext("2d")},this.applyCanvasStyle(r,{allowTouchScrolling:t}),this.applyCanvasStyle(a,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const l=this.createContainerElement();l.classList.add(s),r.parentNode&&r.parentNode.replaceChild(l,r),l.append(r,a),this.container=l}createUpperCanvas(){const{el:e}=this.lower,t=br();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=wo().createElement("div");return e.setAttribute("data-fabric","wrapper"),vp(e,{position:"relative"}),G1(e),e}applyCanvasStyle(e,t){const{styles:s,allowTouchScrolling:r}=t;vp(e,z(z({},s),{},{"touch-action":r?"manipulation":Os})),G1(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:s,ctx:r}=this.upper;TC(s,r,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),cp(this.upper.el,e),cp(this.container,e)}cleanupDOM(e){const t=this.container,{el:s}=this.lower,{el:r}=this.upper;super.cleanupDOM(e),t.removeChild(r),t.removeChild(s),t.parentNode&&t.parentNode.replaceChild(s,t)}dispose(){super.dispose(),Fn().dispose(this.upper.el),delete this.upper,delete this.container}}class xh extends Sc{constructor(){super(...arguments),U(this,"targets",[]),U(this,"_hoveredTargets",[]),U(this,"_objectsToRender",void 0),U(this,"_currentTransform",null),U(this,"_groupSelector",null),U(this,"contextTopDirty",!1)}static getDefaults(){return z(z({},super.getDefaults()),xh.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new K6(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),s=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=s,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,s){const r=this.targetFindTolerance,a=this.pixelFindContext;this.clearContext(a),a.save(),a.translate(-t+r,-s+r),a.transform(...this.viewportTransform);const l=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(a),e.selectionBackgroundColor=l,a.restore();const u=Math.round(r*this.getRetinaScaling());return e6(a,u,u,u)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(s=>!!s&&e[s]===!0):e[t])}_shouldClearSelection(e,t){const s=this.getActiveObjects(),r=this._activeObject;return!!(!t||t&&r&&s.length>1&&s.indexOf(t)===-1&&r!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&r&&r!==t)}_shouldCenterTransform(e,t,s){if(!e)return;let r;return t===hh||t===Rs||t===on||t===ic?r=this.centeredScaling||e.centeredScaling:t===_0&&(r=this.centeredRotation||e.centeredRotation),r?!s:s}_getOriginFromCorner(e,t){const s={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?s.x=Nt:["mr","tr","br"].includes(t)&&(s.x=st),["tl","mt","tr"].includes(t)?s.y=lp:["bl","mb","br"].includes(t)&&(s.y=Ns)),s}_setupCurrentTransform(e,t,s){var r;const a=t.group?ro(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:l="",control:u}=t.getActiveControl()||{},d=s&&u?(r=u.getActionHandler(e,t,u))===null||r===void 0?void 0:r.bind(u):pL,f=((b,w,_,T)=>{if(!w||!b)return"drag";const S=T.controls[w];return S.getActionName(_,S,T)})(s,l,e,t),m=e[this.centeredKey],v=this._shouldCenterTransform(t,f,m)?{x:He,y:He}:this._getOriginFromCorner(t,l),y={target:t,action:f,actionHandler:d,actionPerformed:!1,corner:l,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:a.x-t.left,offsetY:a.y-t.top,originX:v.x,originY:v.y,ex:a.x,ey:a.y,lastX:a.x,lastY:a.y,theta:Ot(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:m,original:z(z({},EC(t)),{},{originX:v.x,originY:v.y})};this._currentTransform=y,this.fire("before:transform",{e,transform:y})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:s,deltaX:r,deltaY:a}=this._groupSelector,l=new ee(t,s).transform(this.viewportTransform),u=new ee(t+r,s+a).transform(this.viewportTransform),d=this.selectionLineWidth/2;let f=Math.min(l.x,u.x),m=Math.min(l.y,u.y),v=Math.max(l.x,u.x),y=Math.max(l.y,u.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(f,m,v-f,y-m)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,f+=d,m+=d,v-=d,y-=d,ms.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(f,m,v-f,y-m))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),s=this._activeObject,r=this.getActiveObjects();if(this.targets=[],s&&r.length>=1){if(s.findControl(t,up(e))||r.length>1&&this.searchPossibleTargets([s],t))return s;if(s===this.searchPossibleTargets([s],t)){if(this.preserveObjectStacking){const a=this.targets;this.targets=[];const l=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&l&&l!==s?(this.targets=a,s):l}return s}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let s=e.getCoords();const r=this.getZoom(),a=e.padding/r;if(a){const[l,u,d,f]=s,m=Math.atan2(u.y-l.y,u.x-l.x),v=yr(m)*a,y=xr(m)*a,b=v+y,w=v-y;s=[new ee(l.x-w,l.y-b),new ee(u.x+b,u.y-w),new ee(d.x+w,d.y+b),new ee(f.x-b,f.y+w)]}return wt.isPointInPolygon(t,s)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,ro(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let s=e.length;for(;s--;){const r=e[s];if(this._checkTarget(r,t)){if(kd(r)&&r.subTargetCheck){const a=this._searchPossibleTargets(r._objects,t);a&&this.targets.push(a)}return r}}}searchPossibleTargets(e,t){const s=this._searchPossibleTargets(e,t);if(s&&kd(s)&&s.interactive&&this.targets[0]){const r=this.targets;for(let a=r.length-1;a>0;a--){const l=r[a];if(!kd(l)||!l.interactive)return l}return r[0]}return s}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const s=this.upperCanvasEl,r=s.getBoundingClientRect();let a=cL(e),l=r.width||0,u=r.height||0;l&&u||(Ns in r&&lp in r&&(u=Math.abs(r.top-r.bottom)),Nt in r&&st in r&&(l=Math.abs(r.right-r.left))),this.calcOffset(),a.x=a.x-this._offset.left,a.y=a.y-this._offset.top,t||(a=ro(a,void 0,this.viewportTransform));const d=this.getRetinaScaling();d!==1&&(a.x/=d,a.y/=d);const f=l===0||u===0?new ee(1,1):new ee(s.width/l,s.height/u);return a.multiply(f)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=br(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return Oi(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let s=!1,r=!1;const a=this.getActiveObjects(),l=[],u=[];e.forEach(d=>{a.includes(d)||(s=!0,d.fire("deselected",{e:t,target:d}),u.push(d))}),a.forEach(d=>{e.includes(d)||(s=!0,d.fire("selected",{e:t,target:d}),l.push(d))}),e.length>0&&a.length>0?(r=!0,s&&this.fire("selection:updated",{e:t,selected:l,deselected:u})):a.length>0?(r=!0,this.fire("selection:created",{e:t,selected:l})):e.length>0&&(r=!0,this.fire("selection:cleared",{e:t,deselected:u})),r&&(this._objectsToRender=void 0)}setActiveObject(e,t){const s=this.getActiveObjects(),r=this._setActiveObject(e,t);return this._fireSelectionEvents(s,t),r}_setActiveObject(e,t){const s=this._activeObject;return s!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Oi(e)&&s!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const s=this._activeObject;return!!s&&!s.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===s&&this.endCurrentTransform(e),Oi(s)&&s===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),s=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[s]});const r=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),r}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,s=t.target,r={e,target:s,transform:t,action:t.action};s._scaling&&(s._scaling=!1),s.setCoords(),t.actionPerformed&&(this.fire("object:modified",r),s.fire(qd,r))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;Oi(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,s){const r=this._realizeGroupTransformOnObject(e),a=super._toObject(e,t,s);return e.set(r),a}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&Oi(t)&&this._activeObject===t){const s=To(e,["angle","flipX","flipY",st,Rs,on,_o,So,Ns]);return dL(e,t.calcOwnMatrix()),s}return{}}_setSVGObject(e,t,s){const r=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,s),t.set(r)}}U(xh,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class Q6{constructor(e){U(this,"targets",[]),U(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:r}=e.getActiveObject()||{};r&&r.focus()},s=e.upperCanvasEl;s.addEventListener("click",t),this.__disposer=()=>s.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),Wa(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const Z6=["target","oldTarget","fireCanvas","e"],Is={passive:!1},Ya=(n,e)=>{const t=n.getViewportPoint(e),s=n.getScenePoint(e);return{viewportPoint:t,scenePoint:s,pointer:t,absolutePointer:s}},Xr=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];return n.addEventListener(...t)},sn=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];return n.removeEventListener(...t)},J6={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class yp extends xh{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),U(this,"_isClick",void 0),U(this,"textEditingManager",new Q6(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(Xr,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const s=this.upperCanvasEl,r=this._getEventPrefix();e(CC(s),"resize",this._onResize),e(s,r+"down",this._onMouseDown),e(s,"".concat(r,"move"),this._onMouseMove,Is),e(s,"".concat(r,"out"),this._onMouseOut),e(s,"".concat(r,"enter"),this._onMouseEnter),e(s,"wheel",this._onMouseWheel),e(s,"contextmenu",this._onContextMenu),e(s,"click",this._onClick),e(s,"dblclick",this._onClick),e(s,"dragstart",this._onDragStart),e(s,"dragend",this._onDragEnd),e(s,"dragover",this._onDragOver),e(s,"dragenter",this._onDragEnter),e(s,"dragleave",this._onDragLeave),e(s,"drop",this._onDrop),this.enablePointerEvents||e(s,"touchstart",this._onTouchStart,Is)}removeListeners(){this.addOrRemove(sn,"remove");const e=this._getEventPrefix(),t=yn(this.upperCanvasEl);sn(t,"".concat(e,"up"),this._onMouseUp),sn(t,"touchend",this._onTouchEnd,Is),sn(t,"".concat(e,"move"),this._onMouseMove,Is),sn(t,"touchmove",this._onMouseMove,Is),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,s=z({e},Ya(this,e));this.fire("mouse:out",z(z({},s),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",z({},s)),this._hoveredTargets.forEach(r=>{this.fire("mouse:out",z(z({},s),{},{target:r})),r&&r.fire("mouseout",z({},s))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",z({e},Ya(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const s={e,target:t};return this.fire("dragstart",s),t.fire("dragstart",s),void Xr(this.upperCanvasEl,"drag",this._onDragProgress)}$1(e)}_renderDragEffects(e,t,s){let r=!1;const a=this._dropTarget;a&&a!==t&&a!==s&&(a.clearContextTop(),r=!0),t?.clearContextTop(),s!==t&&s?.clearContextTop();const l=this.contextTop;l.save(),l.transform(...this.viewportTransform),t&&(l.save(),t.transform(l),t.renderDragSourceEffect(e),l.restore(),r=!0),s&&(l.save(),s.transform(l),s.renderDropTargetEffect(e),l.restore(),r=!0),l.restore(),r&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==Os,s=t?this._activeObject:void 0,r={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:s};sn(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",r),this._dragSource&&this._dragSource.fire("dragend",r),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:s,targets:r}=this.findDragTargets(e),a=this._dragSource,l={e,target:s,subTargets:r,dragSource:a,canDrop:!1,dropTarget:void 0};let u;this.fire(t,l),this._fireEnterLeaveEvents(s,l),s&&(s.canDrop(e)&&(u=s),s.fire(t,l));for(let d=0;d<r.length;d++){const f=r[d];f.canDrop(e)&&(u=f),f.fire(t,l)}this._renderDragEffects(e,a,u),this._dropTarget=u}_onDragEnter(e){const{target:t,targets:s}=this.findDragTargets(e),r={e,target:t,subTargets:s,dragSource:this._dragSource};this.fire("dragenter",r),this._fireEnterLeaveEvents(t,r)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:s}=this.findDragTargets(e),r=this._basicEventHandler("drop:before",z({e,target:t,subTargets:s,dragSource:this._dragSource},Ya(this,e)));r.didDrop=!1,r.dropTarget=void 0,this._basicEventHandler("drop",r),this.fire("drop:after",r)}_onContextMenu(e){const t=this.findTarget(e),s=this.targets||[],r=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:s});return this.stopContextMenu&&$1(e),this._basicEventHandler("contextmenu",r),!1}_onClick(e){const t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),t==2&&e.type==="dblclick"&&this._handleEvent(e,"dblclick"),t==3&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const s=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||s&&this._target===s)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const r=this.upperCanvasEl,a=this._getEventPrefix(),l=yn(r);Xr(l,"touchend",this._onTouchEnd,Is),t&&Xr(l,"touchmove",this._onMouseMove,Is),sn(r,"".concat(a,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,s=this._getEventPrefix();sn(t,"".concat(s,"move"),this._onMouseMove,Is);const r=yn(t);Xr(r,"".concat(s,"up"),this._onMouseUp),Xr(r,"".concat(s,"move"),this._onMouseMove,Is)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),s=yn(this.upperCanvasEl);sn(s,"touchend",this._onTouchEnd,Is),sn(s,"touchmove",this._onMouseMove,Is),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Xr(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,s=this._getEventPrefix();if(this._isMainEvent(e)){const r=yn(this.upperCanvasEl);sn(r,"".concat(s,"up"),this._onMouseUp),sn(r,"".concat(s,"move"),this._onMouseMove,Is),Xr(t,"".concat(s,"move"),this._onMouseMove,Is)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const s=this._currentTransform,r=this._isClick,a=this._target,{button:l}=e;if(l)return(this.fireMiddleClick&&l===1||this.fireRightClick&&l===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let u,d,f=!1;if(s&&(this._finalizeCurrentTransform(e),f=s.actionPerformed),!r){const m=a===this._activeObject;this.handleSelection(e),f||(f=this._shouldRender(a)||!m&&a===this._activeObject)}if(a){const m=a.findControl(this.getViewportPoint(e),up(e)),{key:v,control:y}=m||{};if(d=v,a.selectable&&a!==this._activeObject&&a.activeOn==="up")this.setActiveObject(a,e),f=!0;else if(y){const b=y.getMouseUpHandler(e,a,y);b&&(u=this.getScenePoint(e),b.call(y,e,s,u.x,u.y))}a.isMoving=!1}if(s&&(s.target!==a||s.corner!==d)){const m=s.target&&s.target.controls[s.corner],v=m&&m.getMouseUpHandler(e,s.target,m);u=u||this.getScenePoint(e),v&&v.call(m,e,s,u.x,u.y)}this._setCursorFromEvent(e,a),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,a&&(a.__corner=void 0),f?this.requestRenderAll():r||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:s,subTargets:r=[]}=t;this.fire(e,t),s&&s.fire(e,t);for(let a=0;a<r.length;a++)r[a]!==s&&r[a].fire(e,t);return t}_handleEvent(e,t,s){const r=this._target,a=this.targets||[],l=z(z(z({e,target:r,subTargets:a},Ya(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),t==="down:before"||t==="down"?s:{});this.fire("mouse:".concat(t),l),r&&r.fire("mouse".concat(t),l);for(let u=0;u<a.length;u++)a[u]!==r&&a[u].fire("mouse".concat(t),l)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target,s=!!t&&t===this._activeObject;const{button:r}=e;if(r)return(this.fireMiddleClick&&r===1||this.fireRightClick&&r===2)&&this._handleEvent(e,"down",{alreadySelected:s}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let a=this._shouldRender(t),l=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,l=!0,a=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const u=this.getScenePoint(e);this._groupSelector={x:u.x,y:u.y,deltaY:0,deltaX:0}}if(s=!!t&&t===this._activeObject,t){t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const u=t.findControl(this.getViewportPoint(e),up(e));if(t===this._activeObject&&(u||!l)){this._setupCurrentTransform(e,t,s);const d=u?u.control:void 0,f=this.getScenePoint(e),m=d&&d.getMouseDownHandler(e,t,d);m&&m.call(d,e,this._currentTransform,f.x,f.y)}}a&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:s}),a&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=ro(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const s=this.getScenePoint(e);t.deltaX=s.x-t.x,t.deltaY=s.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const s=this.findTarget(e);this._setCursorFromEvent(e,s),this._fireOverOutEvents(e,s)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const s=this._hoveredTarget,r=this._hoveredTargets,a=this.targets,l=Math.max(r.length,a.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:s,fireCanvas:!0});for(let u=0;u<l;u++)this.fireSyntheticInOutEvents("mouse",{e,target:a[u],oldTarget:r[u]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const s=this._draggedoverTarget,r=this._hoveredTargets,a=this.targets,l=Math.max(r.length,a.length);this.fireSyntheticInOutEvents("drag",z(z({},t),{},{target:e,oldTarget:s,fireCanvas:!0}));for(let u=0;u<l;u++)this.fireSyntheticInOutEvents("drag",z(z({},t),{},{target:a[u],oldTarget:r[u]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:s,oldTarget:r,fireCanvas:a,e:l}=t,u=xt(t,Z6);const{targetIn:d,targetOut:f,canvasIn:m,canvasOut:v}=J6[e],y=r!==s;if(r&&y){const b=z(z({},u),{},{e:l,target:r,nextTarget:s},Ya(this,l));a&&this.fire(v,b),r.fire(f,b)}if(s&&y){const b=z(z({},u),{},{e:l,target:s,previousTarget:r},Ya(this,l));a&&this.fire(m,b),s.fire(d,b)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),s=this._currentTransform,r=s.target,a=r.group?ro(t,void 0,r.group.calcTransformMatrix()):t;s.shiftKey=e.shiftKey,s.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,s,a),s.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,s){const{action:r,actionHandler:a,target:l}=t,u=!!a&&a(e,t,s.x,s.y);u&&l.setCoords(),r==="drag"&&u&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||u}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let s=t.hoverCursor||this.hoverCursor;const r=Oi(this._activeObject)?this._activeObject:null,a=(!r||t.group!==r)&&t.findControl(this.getViewportPoint(e));if(a){const l=a.control;this.setCursor(l.cursorStyleHandler(e,l,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(l=>{s=l.hoverCursor||s}),this.setCursor(s)}handleMultiSelection(e,t){const s=this._activeObject,r=Oi(s);if(s&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(s!==t||r)&&(r||!t.isDescendantOf(s)&&!s.isDescendantOf(t))&&!t.onSelect({e})&&!s.getActiveControl()){if(r){const a=s.getObjects();if(t===s){const l=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(a,l)||this.searchPossibleTargets(this._objects,l))||!t.selectable)return!1}t.group===s?(s.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],s.size()===1&&this._setActiveObject(s.item(0),e)):(s.multiSelectAdd(t),this._hoveredTarget=s,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(a,e)}else{s.isEditing&&s.exitEditing();const a=new(Se.getClass("ActiveSelection"))([],{canvas:this});a.multiSelectAdd(s,t),this._hoveredTarget=a,this._setActiveObject(a,e),this._fireSelectionEvents([s],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:s,deltaX:r,deltaY:a}=this._groupSelector,l=new ee(t,s),u=l.add(new ee(r,a)),d=l.min(u),f=l.max(u).subtract(d),m=this.collectObjects({left:d.x,top:d.y,width:f.x,height:f.y},{includeIntersecting:!this.selectionFullyContained}),v=l.eq(u)?m[0]?[m[0]]:[]:m.length>1?m.filter(y=>!y.onSelect({e})).reverse():m;if(v.length===1)this.setActiveObject(v[0],e);else if(v.length>1){const y=Se.getClass("ActiveSelection");this.setActiveObject(new y(v,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const tT={x1:0,y1:0,x2:0,y2:0},e8=z(z({},tT),{},{r1:0,r2:0}),to=(n,e)=>isNaN(n)&&typeof e=="number"?e:n,t8=/^(\d+\.\d+)%|(\d+)%$/;function sT(n){return n&&t8.test(n)}function nT(n,e){const t=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(sT(n)?100:1):NaN;return uo(0,to(t,e),1)}const s8=/\s*;\s*/,n8=/\s*:\s*/;function r8(n,e){let t,s;const r=n.getAttribute("style");if(r){const l=r.split(s8);l[l.length-1]===""&&l.pop();for(let u=l.length;u--;){const[d,f]=l[u].split(n8).map(m=>m.trim());d==="stop-color"?t=f:d==="stop-opacity"&&(s=f)}}const a=new at(t||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:nT(n.getAttribute("offset"),0),color:a.toRgb(),opacity:to(parseFloat(s||n.getAttribute("stop-opacity")||""),1)*a.getAlpha()*e}}function i8(n,e){const t=[],s=n.getElementsByTagName("stop"),r=nT(e,1);for(let a=s.length;a--;)t.push(r8(s[a],r));return t}function rT(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function iT(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function hn(n,e){return n.getAttribute(e)}function a8(n,e){return function(t,s){let r,{width:a,height:l,gradientUnits:u}=s;return Object.keys(t).reduce((d,f)=>{const m=t[f];return m==="Infinity"?r=1:m==="-Infinity"?r=0:(r=typeof m=="string"?parseFloat(m):m,typeof m=="string"&&sT(m)&&(r*=.01,u==="pixels"&&(f!=="x1"&&f!=="x2"&&f!=="r2"||(r*=a),f!=="y1"&&f!=="y2"||(r*=l)))),d[f]=r,d},{})}(rT(n)==="linear"?function(t){return{x1:hn(t,"x1")||0,y1:hn(t,"y1")||0,x2:hn(t,"x2")||"100%",y2:hn(t,"y2")||0}}(n):function(t){return{x1:hn(t,"fx")||hn(t,"cx")||"50%",y1:hn(t,"fy")||hn(t,"cy")||"50%",r1:0,x2:hn(t,"cx")||"50%",y2:hn(t,"cy")||"50%",r2:hn(t,"r")||"50%"}}(n),z(z({},e),{},{gradientUnits:iT(n)}))}class Qu{constructor(e){const{type:t="linear",gradientUnits:s="pixels",coords:r={},colorStops:a=[],offsetX:l=0,offsetY:u=0,gradientTransform:d,id:f}=e||{};Object.assign(this,{type:t,gradientUnits:s,coords:z(z({},t==="radial"?e8:tT),r),colorStops:a,offsetX:l,offsetY:u,gradientTransform:d,id:f?"".concat(f,"_").concat(ii()):ii()})}addColorStop(e){for(const t in e){const s=new at(e[t]);this.colorStops.push({offset:parseFloat(t),color:s.toRgb(),opacity:s.getAlpha()})}return this}toObject(e){return z(z({},To(this,e)),{},{type:this.type,coords:z({},this.coords),colorStops:this.colorStops.map(t=>z({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[],r=this.gradientTransform?this.gradientTransform.concat():bs.concat(),a=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",l=this.colorStops.map(v=>z({},v)).sort((v,y)=>v.offset-y.offset);let u=-this.offsetX,d=-this.offsetY;var f;a==="objectBoundingBox"?(u/=e.width,d/=e.height):(u+=e.width/2,d+=e.height/2),(f=e)&&typeof f._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(u-=e.pathOffset.x,d-=e.pathOffset.y),r[4]-=u,r[5]-=d;const m=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(a,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(oc(r),'"'),""].join(" ");if(this.type==="linear"){const{x1:v,y1:y,x2:b,y2:w}=this.coords;s.push("<linearGradient ",m,' x1="',v,'" y1="',y,'" x2="',b,'" y2="',w,`">
`)}else if(this.type==="radial"){const{x1:v,y1:y,x2:b,y2:w,r1:_,r2:T}=this.coords,S=_>T;s.push("<radialGradient ",m,' cx="',S?v:b,'" cy="',S?y:w,'" r="',S?_:T,'" fx="',S?b:v,'" fy="',S?w:y,`">
`),S&&(l.reverse(),l.forEach(k=>{k.offset=1-k.offset}));const D=Math.min(_,T);if(D>0){const k=D/Math.max(_,T);l.forEach(M=>{M.offset+=k*(1-M.offset)})}}return l.forEach(v=>{let{color:y,offset:b,opacity:w}=v;s.push("<stop ",'offset="',100*b+"%",'" style="stop-color:',y,w!==void 0?";stop-opacity: "+w:";",`"/>
`)}),s.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),s.join("")}toLive(e){const{x1:t,y1:s,x2:r,y2:a,r1:l,r2:u}=this.coords,d=this.type==="linear"?e.createLinearGradient(t,s,r,a):e.createRadialGradient(t,s,l,r,a,u);return this.colorStops.forEach(f=>{let{color:m,opacity:v,offset:y}=f;d.addColorStop(y,v!==void 0?new at(m).setAlpha(v).toRgba():m)}),d}static async fromObject(e){const{colorStops:t,gradientTransform:s}=e;return new this(z(z({},e),{},{colorStops:t?t.map(r=>z({},r)):void 0,gradientTransform:s?[...s]:void 0}))}static fromElement(e,t,s){const r=iT(e),a=t._findCenterFromElement();return new this(z({id:e.getAttribute("id")||void 0,type:rT(e),coords:a8(e,{width:s.viewBoxWidth||s.width,height:s.viewBoxHeight||s.height}),colorStops:i8(e,s.opacity),gradientUnits:r,gradientTransform:gp(e.getAttribute("gradientTransform")||"")},r==="pixels"?{offsetX:t.width/2-a.x,offsetY:t.height/2-a.y}:{offsetX:0,offsetY:0}))}}U(Qu,"type","Gradient"),Se.setClass(Qu,"gradient"),Se.setClass(Qu,"linear"),Se.setClass(Qu,"radial");const o8=["type","source","patternTransform"];class xm{get type(){return"pattern"}set type(e){ri("warn","Setting type has no effect",e)}constructor(e){U(this,"repeat","repeat"),U(this,"offsetX",0),U(this,"offsetY",0),U(this,"crossOrigin",""),this.id=ii(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:s}=this;return z(z({},To(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:s,offsetX:gt(this.offsetX,Ke.NUM_FRACTION_DIGITS),offsetY:gt(this.offsetY,Ke.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:s}=e;const{source:r,repeat:a,id:l}=this,u=to(this.offsetX/t,0),d=to(this.offsetY/s,0),f=a==="repeat-y"||a==="no-repeat"?1+Math.abs(u||0):to(r.width/t,0),m=a==="repeat-x"||a==="no-repeat"?1+Math.abs(d||0):to(r.height/s,0);return['<pattern id="SVGID_'.concat(l,'" x="').concat(u,'" y="').concat(d,'" width="').concat(f,'" height="').concat(m,'">'),'<image x="0" y="0" width="'.concat(r.width,'" height="').concat(r.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:s,source:r,patternTransform:a}=e,l=xt(e,o8);const u=await Dd(r,z(z({},t),{},{crossOrigin:l.crossOrigin}));return new this(z(z({},l),{},{patternTransform:a&&a.slice(0),source:u}))}}U(xm,"type","Pattern"),Se.setClass(xm),Se.setClass(xm,"pattern");const l8=["path","left","top"],c8=["d"];class Mi extends ms{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:s,left:r,top:a}=t,l=xt(t,l8);super(),Object.assign(this,Mi.ownDefaults),this.setOptions(l),this._setPath(e||[],!0),typeof r=="number"&&this.set(st,r),typeof a=="number"&&this.set(Ns,a)}_setPath(e,t){this.path=U6(Array.isArray(e)?e:W6(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new ee(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,s=-this.pathOffset.y;e.beginPath();for(const r of this.path)switch(r[0]){case"L":e.lineTo(r[1]+t,r[2]+s);break;case"M":e.moveTo(r[1]+t,r[2]+s);break;case"C":e.bezierCurveTo(r[1]+t,r[2]+s,r[3]+t,r[4]+s,r[5]+t,r[6]+s);break;case"Q":e.quadraticCurveTo(r[1]+t,r[2]+s,r[3]+t,r[4]+s);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z(z({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=X6(this.path,Ke.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=Ke.NUM_FRACTION_DIGITS;return" translate(".concat(gt(-this.pathOffset.x,e),", ").concat(gt(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:s,pathOffset:r}=this._calcDimensions();this.set({width:t,height:s,pathOffset:r}),e&&this.setPositionByOrigin(r,He,He)}_calcBoundsFromPath(){const e=[];let t=0,s=0,r=0,a=0;for(const l of this.path)switch(l[0]){case"L":r=l[1],a=l[2],e.push({x:t,y:s},{x:r,y:a});break;case"M":r=l[1],a=l[2],t=r,s=a;break;case"C":e.push(...v_(r,a,l[1],l[2],l[3],l[4],l[5],l[6])),r=l[5],a=l[6];break;case"Q":e.push(...v_(r,a,l[1],l[2],l[1],l[2],l[3],l[4])),r=l[3],a=l[4];break;case"Z":r=t,a=s}return hr(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return z(z({},e),{},{pathOffset:new ee(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,s){const r=Sr(e,this.ATTRIBUTE_NAMES,s),{d:a}=r;return new this(a,z(z(z({},xt(r,c8)),t),{},{left:void 0,top:void 0}))}}U(Mi,"type","Path"),U(Mi,"cacheProperties",[..._r,"path","fillRule"]),U(Mi,"ATTRIBUTE_NAMES",[...ci,"d"]),Se.setClass(Mi),Se.setSVGClass(Mi);const u8=["left","top","radius"],aT=["radius","startAngle","endAngle","counterClockwise"];class or extends ms{static getDefaults(){return z(z({},super.getDefaults()),or.ownDefaults)}constructor(e){super(),Object.assign(this,or.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Ot(this.startAngle),Ot(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(Rs)}getRadiusY(){return this.get("radius")*this.get(on)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...aT,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,s=Ot(this.startAngle),r=Ot(this.endAngle),a=yr(s)*t,l=xr(s)*t,u=yr(r)*t,d=xr(r)*t,f=e>180?1:0,m=this.counterClockwise?0:1;return['<path d="M '.concat(a," ").concat(l," A ").concat(t," ").concat(t," 0 ").concat(f," ").concat(m," ").concat(u," ").concat(d,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,s){const r=Sr(e,this.ATTRIBUTE_NAMES,s),{left:a=0,top:l=0,radius:u=0}=r;return new this(z(z({},xt(r,u8)),{},{radius:u,left:a-u,top:l-u}))}static fromObject(e){return super._fromObject(e)}}U(or,"type","Circle"),U(or,"cacheProperties",[..._r,...aT]),U(or,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),U(or,"ATTRIBUTE_NAMES",["cx","cy","r",...ci]),Se.setClass(or),Se.setSVGClass(or);const d8=["x1","y1","x2","y2"],h8=["x1","y1","x2","y2"],xp=["x1","x2","y1","y2"];class Ri extends ms{constructor(){let[e,t,s,r]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Ri.ownDefaults),this.setOptions(a),this.x1=e,this.x2=s,this.y1=t,this.y2=r,this._setWidthHeight();const{left:l,top:u}=a;typeof l=="number"&&this.set(st,l),typeof u=="number"&&this.set(Ns,u)}_setWidthHeight(){const{x1:e,y1:t,x2:s,y2:r}=this;this.width=Math.abs(s-e),this.height=Math.abs(r-t);const{left:a,top:l,width:u,height:d}=hr([{x:e,y:t},{x:s,y:r}]),f=new ee(a+u/2,l+d/2);this.setPositionByOrigin(f,He,He)}_set(e,t){return super._set(e,t),xp.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const s=e.strokeStyle;var r;rn(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(r=this.stroke)!==null&&r!==void 0?r:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=s}_findCenterFromElement(){return new ee((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z(z({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:s,y2:r,width:a,height:l}=this,u=e<=t?-1:1,d=s<=r?-1:1;return{x1:u*a/2,x2:u*-a/2,y1:d*l/2,y2:d*-l/2}}_toSVG(){const{x1:e,x2:t,y1:s,y2:r}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(s,'" x2="').concat(t,'" y2="').concat(r,`" />
`)]}static async fromElement(e,t,s){const r=Sr(e,this.ATTRIBUTE_NAMES,s),{x1:a=0,y1:l=0,x2:u=0,y2:d=0}=r;return new this([a,l,u,d],xt(r,d8))}static fromObject(e){let{x1:t,y1:s,x2:r,y2:a}=e,l=xt(e,h8);return this._fromObject(z(z({},l),{},{points:[t,s,r,a]}),{extraParam:"points"})}}U(Ri,"type","Line"),U(Ri,"cacheProperties",[..._r,...xp]),U(Ri,"ATTRIBUTE_NAMES",ci.concat(xp)),Se.setClass(Ri),Se.setSVGClass(Ri);class Fi extends ms{static getDefaults(){return z(z({},super.getDefaults()),Fi.ownDefaults)}constructor(e){super(),Object.assign(this,Fi.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,s=this.height/2;e.beginPath(),e.moveTo(-t,s),e.lineTo(0,-s),e.lineTo(t,s),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}U(Fi,"type","Triangle"),U(Fi,"ownDefaults",{width:100,height:100}),Se.setClass(Fi),Se.setSVGClass(Fi);const oT=["rx","ry"];class lr extends ms{static getDefaults(){return z(z({},super.getDefaults()),lr.ownDefaults)}constructor(e){super(),Object.assign(this,lr.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(Rs)}getRy(){return this.get("ry")*this.get(on)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...oT,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,$d,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,s){const r=Sr(e,this.ATTRIBUTE_NAMES,s);return r.left=(r.left||0)-r.rx,r.top=(r.top||0)-r.ry,new this(r)}}function f8(n){if(!n)return[];const e=n.replace(/,/g," ").trim().split(/\s+/),t=[];for(let s=0;s<e.length;s+=2)t.push({x:parseFloat(e[s]),y:parseFloat(e[s+1])});return t}U(lr,"type","Ellipse"),U(lr,"cacheProperties",[..._r,...oT]),U(lr,"ownDefaults",{rx:0,ry:0}),U(lr,"ATTRIBUTE_NAMES",[...ci,"cx","cy","rx","ry"]),Se.setClass(lr),Se.setSVGClass(lr);const g8=["left","top"],lT={exactBoundingBox:!1};class vn extends ms{static getDefaults(){return z(z({},super.getDefaults()),vn.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),U(this,"strokeDiff",void 0),Object.assign(this,vn.ownDefaults),this.setOptions(t),this.points=e;const{left:s,top:r}=t;this.initialized=!0,this.setBoundingBox(!0),typeof s=="number"&&this.set(st,s),typeof r=="number"&&this.set(Ns,r)}isOpen(){return!0}_projectStrokeOnPoints(e){return s6(this.points,e,this.isOpen())}_calcDimensions(e){e=z({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(f=>f.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new ee,strokeOffset:new ee,strokeDiff:new ee};const s=hr(t),r=fh(z(z({},e),{},{scaleX:1,scaleY:1})),a=hr(this.points.map(f=>As(f,r,!0))),l=new ee(this.scaleX,this.scaleY);let u=s.left+s.width/2,d=s.top+s.height/2;return this.exactBoundingBox&&(u-=d*Math.tan(Ot(this.skewX)),d-=u*Math.tan(Ot(this.skewY))),z(z({},s),{},{pathOffset:new ee(u,d),strokeOffset:new ee(a.left,a.top).subtract(new ee(s.left,s.top)).multiply(l),strokeDiff:new ee(s.width,s.height).subtract(new ee(a.width,a.height)).multiply(l)})}_findCenterFromElement(){const e=hr(this.points);return new ee(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:s,width:r,height:a,pathOffset:l,strokeOffset:u,strokeDiff:d}=this._calcDimensions();this.set({width:r,height:a,pathOffset:l,strokeOffset:u,strokeDiff:d}),e&&this.setPositionByOrigin(new ee(t+r/2,s+a/2),He,He)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new ee(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let l;if(Object.keys(e).some(u=>this.strokeUniform||this.constructor.layoutProperties.includes(u))){var t,s;const{width:u,height:d}=this._calcDimensions(e);l=new ee((t=e.width)!==null&&t!==void 0?t:u,(s=e.height)!==null&&s!==void 0?s:d)}else{var r,a;l=new ee((r=e.width)!==null&&r!==void 0?r:this.width,(a=e.height)!==null&&a!==void 0?a:this.height)}return l.multiply(new ee(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const s=this.initialized&&this[e]!==t,r=super._set(e,t);return this.exactBoundingBox&&s&&((e===Rs||e===on)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),r}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z(z({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:s,y:r}=t;return{x:s,y:r}})})}_toSVG(){const e=[],t=this.pathOffset.x,s=this.pathOffset.y,r=Ke.NUM_FRACTION_DIGITS;for(let a=0,l=this.points.length;a<l;a++)e.push(gt(this.points[a].x-t,r),",",gt(this.points[a].y-s,r)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,s=this.pathOffset.x,r=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-s,this.points[0].y-r);for(let a=0;a<t;a++){const l=this.points[a];e.lineTo(l.x-s,l.y-r)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,s){return new this(f8(e.getAttribute("points")),z(z({},xt(Sr(e,this.ATTRIBUTE_NAMES,s),g8)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}U(vn,"ownDefaults",lT),U(vn,"type","Polyline"),U(vn,"layoutProperties",[_o,So,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),U(vn,"cacheProperties",[..._r,"points"]),U(vn,"ATTRIBUTE_NAMES",[...ci]),Se.setClass(vn),Se.setSVGClass(vn);class Zu extends vn{isOpen(){return!1}}U(Zu,"ownDefaults",lT),U(Zu,"type","Polygon"),Se.setClass(Zu),Se.setSVGClass(Zu);class cT extends ms{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const s in t)for(const r in t[s])for(const a in t[s][r])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const s=t===void 0?this.styles:{0:this.styles[t]};for(const r in s)for(const a in s[r])if(s[r][a][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let s,r,a=0,l=!0,u=0;for(const d in t){s=0;for(const f in t[d]){const m=t[d][f]||{};a++,m[e]!==void 0?(r?m[e]!==r&&(l=!1):r=m[e],m[e]===this[e]&&delete m[e]):l=!1,Object.keys(m).length!==0?s++:delete t[d][f]}s===0&&delete t[d]}for(let d=0;d<this._textLines.length;d++)u+=this._textLines[d].length;l&&a===u&&(this[e]=r,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let s,r,a;for(r in t){for(a in s=t[r],s)delete s[a][e],Object.keys(s[a]).length===0&&delete s[a];Object.keys(s).length===0&&delete t[r]}}_extendStyles(e,t){const{lineIndex:s,charIndex:r}=this.get2DCursorLocation(e);this._getLineStyle(s)||this._setLineStyle(s);const a=j0(z(z({},this._getStyleDeclaration(s,r)),t),l=>l!==void 0);this._setStyleDeclaration(s,r,a)}getSelectionStyles(e,t,s){const r=[];for(let a=e;a<(t||e);a++)r.push(this.getStyleAtPosition(a,s));return r}getStyleAtPosition(e,t){const{lineIndex:s,charIndex:r}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(s,r):this._getStyleDeclaration(s,r)}setSelectionStyles(e,t,s){for(let r=t;r<(s||t);r++)this._extendStyles(r,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var s;const r=this.styles&&this.styles[e];return r&&(s=r[t])!==null&&s!==void 0?s:{}}getCompleteStyleDeclaration(e,t){return z(z({},To(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,s){this.styles[e][t]=s}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}U(cT,"_styleProperties",yL);const m8=/  +/g,p8=/"/g;function bm(n,e,t,s,r){return"		".concat(function(a,l){let{left:u,top:d,width:f,height:m}=l,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ke.NUM_FRACTION_DIGITS;const y=lc(Ht,a,!1),[b,w,_,T]=[u,d,f,m].map(S=>gt(S,v));return"<rect ".concat(y,' x="').concat(b,'" y="').concat(w,'" width="').concat(_,'" height="').concat(T,'"></rect>')}(n,{left:e,top:t,width:s,height:r}),`
`)}const v8=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let wm;class fs extends cT{static getDefaults(){return z(z({},super.getDefaults()),fs.ownDefaults)}constructor(e,t){super(),U(this,"__charBounds",[]),Object.assign(this,fs.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=eT(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(On)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,s,r,a,l,u;for(let d=0,f=this._textLines.length;d<f;d++)if((this.textAlign===On||d!==f-1&&!this.isEndOfWrapping(d))&&(r=0,a=this._textLines[d],t=this.getLineWidth(d),t<this.width&&(u=this.textLines[d].match(this._reSpacesAndTabs)))){s=u.length,e=(this.width-t)/s;for(let m=0;m<=a.length;m++)l=this.__charBounds[d][m],this._reSpaceAndTab.test(a[m])?(l.width+=e,l.kernedWidth+=e,l.left+=r,r+=e):l.left+=r}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const s=t?this._unwrappedTextLines:this._textLines;let r;for(r=0;r<s.length;r++){if(e<=s[r].length)return{lineIndex:r,charIndex:e};e-=s[r].length+this.missingNewlineOffset(r,t)}return{lineIndex:r-1,charIndex:s[r-1].length<e?s[r-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Ms?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,s){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case He:e.textBaseline="middle";break;case"ascender":e.textBaseline=Ns;break;case"descender":e.textBaseline=lp}e.font=this._getFontDeclaration(t,s)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,s=this._textLines.length;t<s;t++){const r=this.getLineWidth(t);r>e&&(e=r)}return e}_renderTextLine(e,t,s,r,a,l){this._renderChars(e,t,s,r,a,l)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,s=this._getLeftOffset();let r=this._getTopOffset();for(let a=0,l=this._textLines.length;a<l;a++){const u=this.getHeightOfLine(a);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",a)){r+=u;continue}const d=this._textLines[a].length,f=this._getLineLeftOffset(a);let m,v,y=0,b=0,w=this.getValueOfPropertyAt(a,0,"textBackgroundColor");for(let _=0;_<d;_++){const T=this.__charBounds[a][_];v=this.getValueOfPropertyAt(a,_,"textBackgroundColor"),this.path?(e.save(),e.translate(T.renderLeft,T.renderTop),e.rotate(T.angle),e.fillStyle=v,v&&e.fillRect(-T.width/2,-u/this.lineHeight*(1-this._fontSizeFraction),T.width,u/this.lineHeight),e.restore()):v!==w?(m=s+f+b,this.direction==="rtl"&&(m=this.width-m-y),e.fillStyle=w,w&&e.fillRect(m,r,y,u/this.lineHeight),b=T.left,y=T.width,w=v):y+=T.kernedWidth}v&&!this.path&&(m=s+f+b,this.direction==="rtl"&&(m=this.width-m-y),e.fillStyle=v,e.fillRect(m,r,y,u/this.lineHeight)),r+=u}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,s,r){const a=Yl.getFontCache(t),l=this._getFontDeclaration(t),u=s+e,d=s&&l===this._getFontDeclaration(r),f=t.fontSize/this.CACHE_FONT_SIZE;let m,v,y,b;if(s&&a[s]!==void 0&&(y=a[s]),a[e]!==void 0&&(b=m=a[e]),d&&a[u]!==void 0&&(v=a[u],b=v-y),m===void 0||y===void 0||v===void 0){const w=function(){return wm||(wm=ln({width:0,height:0}).getContext("2d")),wm}();this._setTextStyles(w,t,!0),m===void 0&&(b=m=w.measureText(e).width,a[e]=m),y===void 0&&d&&s&&(y=w.measureText(s).width,a[s]=y),d&&v===void 0&&(v=w.measureText(u).width,a[u]=v,b=v-y)}return{width:m*f,kernedWidth:b*f}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,s,r=0;const a=this.pathSide===Nt,l=this.path,u=this._textLines[e],d=u.length,f=new Array(d);this.__charBounds[e]=f;for(let m=0;m<d;m++){const v=u[m];s=this._getGraphemeBox(v,e,m,t),f[m]=s,r+=s.kernedWidth,t=v}if(f[d]={left:s?s.left+s.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},l&&l.segmentsInfo){let m=0;const v=l.segmentsInfo[l.segmentsInfo.length-1].length;switch(this.textAlign){case st:m=a?v-r:0;break;case He:m=(v-r)/2;break;case Nt:m=a?0:v-r}m+=this.pathStartOffset*(a?-1:1);for(let y=a?d-1:0;a?y>=0:y<d;a?y--:y++)s=f[y],m>v?m%=v:m<0&&(m+=v),this._setGraphemeOnPath(m,s),m+=s.kernedWidth}return{width:r,numOfSpaces:0}}_setGraphemeOnPath(e,t){const s=e+t.kernedWidth/2,r=this.path,a=G6(r.path,s,r.segmentsInfo);t.renderLeft=a.x-r.pathOffset.x,t.renderTop=a.y-r.pathOffset.y,t.angle=a.angle+(this.pathSide===Nt?Math.PI:0)}_getGraphemeBox(e,t,s,r,a){const l=this.getCompleteStyleDeclaration(t,s),u=r?this.getCompleteStyleDeclaration(t,s-1):{},d=this._measureChar(e,l,r,u);let f,m=d.kernedWidth,v=d.width;this.charSpacing!==0&&(f=this._getWidthOfCharSpacing(),v+=f,m+=f);const y={width:v,left:0,height:l.fontSize,kernedWidth:m,deltaY:l.deltaY};if(s>0&&!a){const b=this.__charBounds[t][s-1];y.left=b.left+b.width+d.kernedWidth-d.width}return y}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let s=1,r=this._textLines[e].length;s<r;s++)t=Math.max(this.getHeightOfChar(e,s),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let s=0,r=this._textLines.length;s<r;s++)e=this.getHeightOfLine(s),t+=s===r-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let s=0;const r=this._getLeftOffset(),a=this._getTopOffset();for(let l=0,u=this._textLines.length;l<u;l++){const d=this.getHeightOfLine(l),f=d/this.lineHeight,m=this._getLineLeftOffset(l);this._renderTextLine(t,e,this._textLines[l],r+m,a+s+f,l),s+=d}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(Ht))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,s,r,a,l){const u=this.getHeightOfLine(l),d=this.textAlign.includes(On),f=this.path,m=!d&&this.charSpacing===0&&this.isEmptyStyles(l)&&!f,v=this.direction==="ltr",y=this.direction==="ltr"?1:-1,b=t.direction;let w,_,T,S,D,k="",M=0;if(t.save(),b!==this.direction&&(t.canvas.setAttribute("dir",v?"ltr":"rtl"),t.direction=v?"ltr":"rtl",t.textAlign=v?st:Nt),a-=u*this._fontSizeFraction/this.lineHeight,m)return this._renderChar(e,t,l,0,s.join(""),r,a),void t.restore();for(let N=0,L=s.length-1;N<=L;N++)S=N===L||this.charSpacing||f,k+=s[N],T=this.__charBounds[l][N],M===0?(r+=y*(T.kernedWidth-T.width),M+=T.width):M+=T.kernedWidth,d&&!S&&this._reSpaceAndTab.test(s[N])&&(S=!0),S||(w=w||this.getCompleteStyleDeclaration(l,N),_=this.getCompleteStyleDeclaration(l,N+1),S=R0(w,_,!1)),S&&(f?(t.save(),t.translate(T.renderLeft,T.renderTop),t.rotate(T.angle),this._renderChar(e,t,l,N,k,-M/2,0),t.restore()):(D=r,this._renderChar(e,t,l,N,k,D,a)),k="",w=_,r+=y*M,M=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,s=this.height+this.strokeWidth,r=ln({width:t,height:s}),a=r.getContext("2d");return r.width=t,r.height=s,a.beginPath(),a.moveTo(0,0),a.lineTo(t,0),a.lineTo(t,s),a.lineTo(0,s),a.closePath(),a.translate(t/2,s/2),a.fillStyle=e.toLive(a),this._applyPatternGradientTransform(a,e),a.fill(),a.createPattern(r,"no-repeat")}handleFiller(e,t,s){let r,a;return rn(s)?s.gradientUnits==="percentage"||s.gradientTransform||s.patternTransform?(r=-this.width/2,a=-this.height/2,e.translate(r,a),e[t]=this._applyPatternGradientTransformText(s),{offsetX:r,offsetY:a}):(e[t]=s.toLive(e),this._applyPatternGradientTransform(e,s)):(e[t]=s,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:s,strokeWidth:r}=t;return e.lineWidth=r,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",s)}_setFillStyles(e,t){let{fill:s}=t;return this.handleFiller(e,"fillStyle",s)}_renderChar(e,t,s,r,a,l,u){const d=this._getStyleDeclaration(s,r),f=this.getCompleteStyleDeclaration(s,r),m=e==="fillText"&&f.fill,v=e==="strokeText"&&f.stroke&&f.strokeWidth;if(v||m){if(t.save(),t.font=this._getFontDeclaration(f),d.textBackgroundColor&&this._removeShadow(t),d.deltaY&&(u+=d.deltaY),m){const y=this._setFillStyles(t,f);t.fillText(a,l-y.offsetX,u-y.offsetY)}if(v){const y=this._setStrokeStyles(t,f);t.strokeText(a,l-y.offsetX,u-y.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,s){const r=this.get2DCursorLocation(e,!0),a=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"fontSize"),l=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"deltaY"),u={fontSize:a*s.size,deltaY:l+a*s.baseline};this.setSelectionStyles(u,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),s=this.width-t,r=this.textAlign,a=this.direction,l=this.isEndOfWrapping(e);let u=0;return r===On||r===Wl&&!l||r===ql&&!l||r===Zd&&!l?0:(r===He&&(u=s/2),r===Nt&&(u=s),r===Wl&&(u=s/2),r===ql&&(u=s),a==="rtl"&&(r===Nt||r===On||r===ql?u=0:r===st||r===Zd?u=-s:r!==He&&r!==Wl||(u=-s/2)),u)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,s){var r;return(r=this._getStyleDeclaration(e,t)[s])!==null&&r!==void 0?r:this[s]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let s=this._getTopOffset();const r=this._getLeftOffset(),a=this.path,l=this._getWidthOfCharSpacing(),u=t==="linethrough"?.5:t==="overline"?1:0,d=this.offsets[t];for(let f=0,m=this._textLines.length;f<m;f++){const v=this.getHeightOfLine(f);if(!this[t]&&!this.styleHas(t,f)){s+=v;continue}const y=this._textLines[f],b=v/this.lineHeight,w=this._getLineLeftOffset(f);let _=0,T=0,S=this.getValueOfPropertyAt(f,0,t),D=this.getValueOfPropertyAt(f,0,Ht),k=this.getValueOfPropertyAt(f,0,$i),M=S,N=D,L=k;const A=s+b*(1-this._fontSizeFraction);let B=this.getHeightOfChar(f,0),Y=this.getValueOfPropertyAt(f,0,"deltaY");for(let q=0,oe=y.length;q<oe;q++){const re=this.__charBounds[f][q];M=this.getValueOfPropertyAt(f,q,t),N=this.getValueOfPropertyAt(f,q,Ht),L=this.getValueOfPropertyAt(f,q,$i);const fe=this.getHeightOfChar(f,q),P=this.getValueOfPropertyAt(f,q,"deltaY");if(a&&M&&N){const $=this.fontSize*L/1e3;e.save(),e.fillStyle=D,e.translate(re.renderLeft,re.renderTop),e.rotate(re.angle),e.fillRect(-re.kernedWidth/2,d*fe+P-u*$,re.kernedWidth,$),e.restore()}else if((M!==S||N!==D||fe!==B||L!==k||P!==Y)&&T>0){const $=this.fontSize*k/1e3;let I=r+w+_;this.direction==="rtl"&&(I=this.width-I-T),S&&D&&k&&(e.fillStyle=D,e.fillRect(I,A+d*B+Y-u*$,T,$)),_=re.left,T=re.width,S=M,k=L,D=N,B=fe,Y=P}else T+=re.kernedWidth}let W=r+w+_;this.direction==="rtl"&&(W=this.width-W-T),e.fillStyle=N;const K=this.fontSize*L/1e3;M&&N&&L&&e.fillRect(W,A+d*B+Y-u*K,T-l,K),s+=v}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:s=this.fontWeight,fontSize:r=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const l=e.includes("'")||e.includes('"')||e.includes(",")||fs.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,s,"".concat(a?this.CACHE_FONT_SIZE:r,"px"),l].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return M0(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),s=new Array(t.length),r=[`
`];let a=[];for(let l=0;l<t.length;l++)s[l]=this.graphemeSplit(t[l]),a=a.concat(s[l],r);return a.pop(),{_unwrappedLines:s,lines:t,graphemeText:a,graphemeLines:s}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z(z({},super.toObject([...LC,...e])),{},{styles:a6(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:s}=this.constructor;super.set(e,t);let r=!1,a=!1;if(typeof e=="object")for(const l in e)l==="path"&&this.setPathInfo(),r=r||s.includes(l),a=a||l==="path";else r=s.includes(e),a=e==="path";return a&&this.setPathInfo(),r&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,s){const r=Sr(e,fs.ATTRIBUTE_NAMES,s),a=z(z({},t),r),{textAnchor:l=st,textDecoration:u="",dx:d=0,dy:f=0,top:m=0,left:v=0,fontSize:y=b0,strokeWidth:b=1}=a,w=xt(a,v8),_=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),z({left:v+d,top:m+f,underline:u.includes("underline"),overline:u.includes("overline"),linethrough:u.includes("line-through"),strokeWidth:0,fontSize:y},w)),T=_.getScaledHeight()/_.height,S=((_.height+_.strokeWidth)*_.lineHeight-_.height)*T,D=_.getScaledHeight()+S;let k=0;return l===He&&(k=_.getScaledWidth()/2),l===Nt&&(k=_.getScaledWidth()),_.set({left:_.left-k,top:_.top-(D-_.fontSize*(.07+_._fontSizeFraction))/_.lineHeight,strokeWidth:b}),_}static fromObject(e){return this._fromObject(z(z({},e),{},{styles:o6(e.styles||{},e.text)}),{extraParam:"text"})}}U(fs,"textLayoutProperties",PC),U(fs,"cacheProperties",[..._r,...LC]),U(fs,"ownDefaults",xL),U(fs,"type","Text"),U(fs,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),U(fs,"ATTRIBUTE_NAMES",ci.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),$C(fs,[class extends OC{_toSVG(){const n=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(n){const e=this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0}),t=this.path;return t?e+t._createBaseSVGMarkup(t._toSVG(),{reviver:n,withShadow:!0,additionalTransform:oc(this.calcOwnMatrix())}):e}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:e,textSpans:t}=n;const s=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(p8,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",s?'text-decoration="'.concat(s,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(n,e){const t=[],s=[];let r,a=n;this.backgroundColor&&s.push(...bm(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let l=0,u=this._textLines.length;l<u;l++)r=this._getLineLeftOffset(l),this.direction==="rtl"&&(r+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",l))&&this._setSVGTextLineBg(s,l,e+r,a),this._setSVGTextLineText(t,l,e+r,a),a+=this.getHeightOfLine(l);return{textSpans:t,textBgRects:s}}_createTextCharSpan(n,e,t,s,r){const a=Ke.NUM_FRACTION_DIGITS,l=this.getSvgSpanStyles(e,n!==n.trim()||!!n.match(m8)),u=l?'style="'.concat(l,'"'):"",d=e.deltaY,f=d?' dy="'.concat(gt(d,a),'" '):"",{angle:m,renderLeft:v,renderTop:y,width:b}=r;let w="";if(v!==void 0){const _=b/2;m&&(w=' rotate="'.concat(gt(wr(m),a),'"'));const T=Co({angle:wr(m)});T[4]=v,T[5]=y;const S=new ee(-_,0).transform(T);t=S.x,s=S.y}return'<tspan x="'.concat(gt(t,a),'" y="').concat(gt(s,a),'" ').concat(f).concat(w).concat(u,">").concat(n6(n),"</tspan>")}_setSVGTextLineText(n,e,t,s){const r=this.getHeightOfLine(e),a=this.textAlign.includes(On),l=this._textLines[e];let u,d,f,m,v,y="",b=0;s+=r*(1-this._fontSizeFraction)/this.lineHeight;for(let w=0,_=l.length-1;w<=_;w++)v=w===_||this.charSpacing||this.path,y+=l[w],f=this.__charBounds[e][w],b===0?(t+=f.kernedWidth-f.width,b+=f.width):b+=f.kernedWidth,a&&!v&&this._reSpaceAndTab.test(l[w])&&(v=!0),v||(u=u||this.getCompleteStyleDeclaration(e,w),d=this.getCompleteStyleDeclaration(e,w+1),v=R0(u,d,!0)),v&&(m=this._getStyleDeclaration(e,w),n.push(this._createTextCharSpan(y,m,t,s,f)),y="",u=d,this.direction==="rtl"?t-=b:t+=b,b=0)}_setSVGTextLineBg(n,e,t,s){const r=this._textLines[e],a=this.getHeightOfLine(e)/this.lineHeight;let l,u=0,d=0,f=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let m=0;m<r.length;m++){const{left:v,width:y,kernedWidth:b}=this.__charBounds[e][m];l=this.getValueOfPropertyAt(e,m,"textBackgroundColor"),l!==f?(f&&n.push(...bm(f,t+d,s,u,a)),d=v,u=y,f=l):u+=b}l&&n.push(...bm(f,t+d,s,u,a))}_getSVGLineTopOffset(n){let e,t=0;for(e=0;e<n;e++)t+=this.getHeightOfLine(e);const s=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*s/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," text-decoration-thickness: ").concat(gt(this.textDecorationThickness*this.getObjectScaling().y/10,Ke.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(n,e){const{fontFamily:t,strokeWidth:s,stroke:r,fill:a,fontSize:l,fontStyle:u,fontWeight:d,deltaY:f,textDecorationThickness:m,linethrough:v,overline:y,underline:b}=n,w=this.getSvgTextDecoration({underline:b??this.underline,overline:y??this.overline,linethrough:v??this.linethrough}),_=m||this.textDecorationThickness;return[r?lc(Ms,r):"",s?"stroke-width: ".concat(s,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",l?"font-size: ".concat(l,"px; "):"",u?"font-style: ".concat(u,"; "):"",d?"font-weight: ".concat(d,"; "):"",w?"text-decoration: ".concat(w,"; text-decoration-thickness: ").concat(gt(_*this.getObjectScaling().y/10,Ke.NUM_FRACTION_DIGITS),"%; "):"",a?lc(Ht,a):"",f?"baseline-shift: ".concat(-f,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(e=>n[e.replace("-","")]).join(" ")}}]),Se.setClass(fs),Se.setSVGClass(fs);class y8{constructor(e){U(this,"target",void 0),U(this,"__mouseDownInPlace",!1),U(this,"__dragStartFired",!1),U(this,"__isDraggingOver",!1),U(this,"__dragStartSelection",void 0),U(this,"__dragImageDisposer",void 0),U(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(s=>s()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,s=t.getSelectionStartFromPointer(e);return t.isEditing&&s>=t.selectionStart&&s<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var s;let{selectionStart:r,selectionEnd:a}=t;const l=this.target,u=l.canvas,d=new ee(l.flipX?-1:1,l.flipY?-1:1),f=l._getCursorBoundaries(r),m=new ee(f.left+f.leftOffset,f.top+f.topOffset).multiply(d).transform(l.calcTransformMatrix()),v=u.getScenePoint(e).subtract(m),y=l.getCanvasRetinaScaling(),b=l.getBoundingRect(),w=m.subtract(new ee(b.left,b.top)),_=u.viewportTransform,T=w.add(v).transform(_,!0),S=l.backgroundColor,D=O0(l.styles);l.backgroundColor="";const k={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};l.setSelectionStyles(k,0,r),l.setSelectionStyles(k,a,l.text.length),l.dirty=!0;const M=l.toCanvasElement({enableRetinaScaling:u.enableRetinaScaling,viewportTransform:!0});l.backgroundColor=S,l.styles=D,l.dirty=!0,vp(M,{position:"fixed",left:"".concat(-M.width,"px"),border:Os,width:"".concat(M.width/y,"px"),height:"".concat(M.height/y,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{M.remove()},yn(e.target||this.target.hiddenTextarea).body.appendChild(M),(s=e.dataTransfer)===null||s===void 0||s.setDragImage(M,T.x,T.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,s=this.isActive();if(s&&e.dataTransfer){const r=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},a=t._text.slice(r.selectionStart,r.selectionEnd).join(""),l=z({text:t.text,value:a},r);e.dataTransfer.setData("text/plain",a),e.dataTransfer.setData("application/fabric",JSON.stringify({value:a,styles:t.getSelectionStyles(r.selectionStart,r.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,l)}return t.abortCursorAnimation(),s}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),s=this.__dragStartSelection;return t<s.selectionStart||t>s.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const s=this.targetCanDrop(t);!this.__isDraggingOver&&s&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,s=this.targetCanDrop(t);!this.__isDraggingOver&&s?this.__isDraggingOver=!0:this.__isDraggingOver&&!s&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:s}=e,r=s.defaultPrevented;this.__isDraggingOver=!1,s.preventDefault();let a=(t=s.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(a&&!r){const l=this.target,u=l.canvas;let d=l.getSelectionStartFromPointer(s);const{styles:f}=s.dataTransfer.types.includes("application/fabric")?JSON.parse(s.dataTransfer.getData("application/fabric")):{},m=a[Math.max(0,a.length-1)],v=0;if(this.__dragStartSelection){const y=this.__dragStartSelection.selectionStart,b=this.__dragStartSelection.selectionEnd;d>y&&d<=b?d=y:d>b&&(d-=b-y),l.removeChars(y,b),delete this.__dragStartSelection}l._reNewline.test(m)&&(l._reNewline.test(l._text[d])||d===l._text.length)&&(a=a.trimEnd()),e.didDrop=!0,e.dropTarget=l,l.insertChars(a,f,d),u.setActiveObject(l),l.enterEditing(s),l.selectionStart=Math.min(d+v,l._text.length),l.selectionEnd=Math.min(l.selectionStart+a.length,l._text.length),l.hiddenTextarea.value=l.text,l._updateTextarea(),l.hiddenTextarea.focus(),l.fire(Yd,{index:d+v,action:"drop"}),u.fire("text:changed",{target:l}),u.contextTopDirty=!0,u.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var s;const r=this.target,a=this.target.canvas,{selectionStart:l,selectionEnd:u}=this.__dragStartSelection,d=((s=t.dataTransfer)===null||s===void 0?void 0:s.dropEffect)||Os;d===Os?(r.selectionStart=l,r.selectionEnd=u,r._updateTextarea(),r.hiddenTextarea.focus()):(r.clearContextTop(),d==="move"&&(r.removeChars(l,u),r.selectionStart=r.selectionEnd=l,r.hiddenTextarea&&(r.hiddenTextarea.value=r.text),r._updateTextarea(),r.fire(Yd,{index:l,action:"dragend"}),a.fire("text:changed",{target:r}),a.requestRenderAll()),r.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const b_=/[ \n\.,;!\?\-]/;class x8 extends fs{constructor(){super(...arguments),U(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:s,delay:r,onComplete:a}=e;return zC({startValue:this._currentCursorOpacity,endValue:t,duration:s,delay:r,onComplete:a,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:l=>{this._currentCursorOpacity=l,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,s=e-1;if(this._reSpace.test(this._text[s]))for(;this._reSpace.test(this._text[s]);)t++,s--;for(;/\S/.test(this._text[s])&&s>-1;)t++,s--;return e-t}findWordBoundaryRight(e){let t=0,s=e;if(this._reSpace.test(this._text[s]))for(;this._reSpace.test(this._text[s]);)t++,s++;for(;/\S/.test(this._text[s])&&s<this._text.length;)t++,s++;return e+t}findLineBoundaryLeft(e){let t=0,s=e-1;for(;!/\n/.test(this._text[s])&&s>-1;)t++,s--;return e-t}findLineBoundaryRight(e){let t=0,s=e;for(;!/\n/.test(this._text[s])&&s<this._text.length;)t++,s++;return e+t}searchWordBoundary(e,t){const s=this._text;let r=e>0&&this._reSpace.test(s[e])&&(t===-1||!w0.test(s[e-1]))?e-1:e,a=s[r];for(;r>0&&r<s.length&&!b_.test(a);)r+=t,a=s[r];return t===-1&&b_.test(a)&&r++,r}selectWord(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const s=this.searchWordBoundary(e,-1),r=Math.max(s,this.searchWordBoundary(e,1));this.selectionStart=s,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const s=this.findLineBoundaryLeft(e),r=this.findLineBoundaryRight(e);this.selectionStart=s,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;yn(t).activeElement!==t&&t.focus();const s=this.getSelectionStartFromPointer(e),r=this.selectionStart,a=this.selectionEnd;(s===this.__selectionStartOnMouseDown&&r!==a||r!==s&&a!==s)&&(s>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=s):(this.selectionStart=s,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===r&&this.selectionEnd===a||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,s){const r=s.slice(0,e),a=this.graphemeSplit(r).length;if(e===t)return{selectionStart:a,selectionEnd:a};const l=s.slice(e,t);return{selectionStart:a,selectionEnd:a+this.graphemeSplit(l).length}}fromGraphemeToStringSelection(e,t,s){const r=s.slice(0,e).join("").length;return e===t?{selectionStart:r,selectionEnd:r}:{selectionStart:r,selectionEnd:r+s.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),s=this.get2DCursorLocation(e),r=s.lineIndex,a=s.charIndex,l=this.getValueOfPropertyAt(r,a,"fontSize")*this.lineHeight,u=t.leftOffset,d=this.getCanvasRetinaScaling(),f=this.canvas.upperCanvasEl,m=f.width/d,v=f.height/d,y=m-l,b=v-l,w=new ee(t.left+u,t.top+t.topOffset+l).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new ee(f.clientWidth/m,f.clientHeight/v));return w.x<0&&(w.x=0),w.x>y&&(w.x=y),w.y<0&&(w.y=0),w.y>b&&(w.y=b),w.x+=this.canvas._offset.left,w.y+=this.canvas._offset.top,{left:"".concat(w.x,"px"),top:"".concat(w.y,"px"),fontSize:"".concat(l,"px"),charHeight:l}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(qd),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:s,charIndex:r}=this.get2DCursorLocation(e,!0),{lineIndex:a,charIndex:l}=this.get2DCursorLocation(t,!0);if(s!==a){if(this.styles[s])for(let u=r;u<this._unwrappedTextLines[s].length;u++)delete this.styles[s][u];if(this.styles[a])for(let u=l;u<this._unwrappedTextLines[a].length;u++){const d=this.styles[a][u];d&&(this.styles[s]||(this.styles[s]={}),this.styles[s][r+u-l]=d)}for(let u=s+1;u<=a;u++)delete this.styles[u];this.shiftLineStyles(a,s-a)}else if(this.styles[s]){const u=this.styles[s],d=l-r;for(let f=r;f<l;f++)delete u[f];for(const f in this.styles[s]){const m=parseInt(f,10);m>=l&&(u[m-d]=u[f],delete u[f])}}}shiftLineStyles(e,t){const s=Object.assign({},this.styles);for(const r in this.styles){const a=parseInt(r,10);a>e&&(this.styles[a+t]=s[a],s[a-t]||delete this.styles[a])}}insertNewlineStyleObject(e,t,s,r){const a={},l=this._unwrappedTextLines[e].length,u=l===t;let d=!1;s||(s=1),this.shiftLineStyles(e,s);const f=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const v in this.styles[e]){const y=parseInt(v,10);y>=t&&(d=!0,a[y-t]=this.styles[e][v],u&&t===0||delete this.styles[e][v])}let m=!1;for(d&&!u&&(this.styles[e+s]=a,m=!0),(m||l>t)&&s--;s>0;)r&&r[s-1]?this.styles[e+s]={0:z({},r[s-1])}:f?this.styles[e+s]={0:z({},f)}:delete this.styles[e+s],s--;this._forceClearCache=!0}insertCharStyleObject(e,t,s,r){this.styles||(this.styles={});const a=this.styles[e],l=a?z({},a):{};s||(s=1);for(const d in l){const f=parseInt(d,10);f>=t&&(a[f+s]=l[f],l[f-s]||delete a[f])}if(this._forceClearCache=!0,r){for(;s--;)Object.keys(r[s]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+s]=z({},r[s]));return}if(!a)return;const u=a[t?t-1:1];for(;u&&s--;)this.styles[e][t+s]=z({},u)}insertNewStyleBlock(e,t,s){const r=this.get2DCursorLocation(t,!0),a=[0];let l,u=0;for(let d=0;d<e.length;d++)e[d]===`
`?(u++,a[u]=0):a[u]++;for(a[0]>0&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,a[0],s),s=s&&s.slice(a[0]+1)),u&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+a[0],u),l=1;l<u;l++)a[l]>0?this.insertCharStyleObject(r.lineIndex+l,0,a[l],s):s&&this.styles[r.lineIndex+l]&&s[0]&&(this.styles[r.lineIndex+l][0]=s[0]),s=s&&s.slice(a[l]+1);a[l]>0&&this.insertCharStyleObject(r.lineIndex+l,0,a[l],s)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:s;r>s&&this.removeStyleFromTo(s,r);const a=this.graphemeSplit(e);this.insertNewStyleBlock(a,s,t),this._text=[...this._text.slice(0,s),...a,...this._text.slice(r)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,s){s<=e?(t===e?this._selectionDirection=st:this._selectionDirection===Nt&&(this._selectionDirection=st,this.selectionEnd=e),this.selectionStart=s):s>e&&s<t?this._selectionDirection===Nt?this.selectionEnd=s:this.selectionStart=s:(t===e?this._selectionDirection=Nt:this._selectionDirection===st&&(this._selectionDirection=Nt,this.selectionStart=t),this.selectionEnd=s)}}class b8 extends x8{initHiddenTextarea(){const e=this.canvas&&yn(this.canvas.getElement())||wo(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(l=>{let[u,d]=l;return t.setAttribute(u,d)});const{top:s,left:r,fontSize:a}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(s,"; left: ").concat(r,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(a,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(l=>{let[u,d]=l;return t.addEventListener(u,this[d].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste,{value:s,selectionStart:r,selectionEnd:a}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const l=()=>{this.updateFromTextArea(),this.fire(Yd),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void l();const u=this._splitTextIntoLines(s).graphemeText,d=this._text.length,f=u.length,m=this.selectionStart,v=this.selectionEnd,y=m!==v;let b,w,_,T,S=f-d;const D=this.fromStringToGraphemeSelection(r,a,s),k=m>D.selectionStart;y?(w=this._text.slice(m,v),S+=v-m):f<d&&(w=k?this._text.slice(v+S,v):this._text.slice(m,m-S));const M=u.slice(D.selectionEnd-S,D.selectionEnd);if(w&&w.length&&(M.length&&(b=this.getSelectionStyles(m,m+1,!1),b=M.map(()=>b[0])),y?(_=m,T=v):k?(_=v-w.length,T=v):(_=v,T=v+w.length),this.removeStyleFromTo(_,T)),M.length){const{copyPasteData:N}=Fn();t&&M.join("")===N.copiedText&&!Ke.disableStyleCopyPaste&&(b=N.copiedTextStyle),this.insertNewStyleBlock(M,m,b)}l()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:s,selectionEnd:r}=t;this.compositionStart=s,this.compositionEnd=r,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Fn();e.copiedText=this.getSelectedText(),Ke.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let s,r=this._getLineLeftOffset(e);return t>0&&(s=this.__charBounds[e][t-1],r+=s.left+s.width),r}getDownCursorOffset(e,t){const s=this._getSelectionForOffset(e,t),r=this.get2DCursorLocation(s),a=r.lineIndex;if(a===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-s;const l=r.charIndex,u=this._getWidthBeforeCursor(a,l),d=this._getIndexOnLine(a+1,u);return this._textLines[a].slice(l).length+d+1+this.missingNewlineOffset(a)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const s=this._getSelectionForOffset(e,t),r=this.get2DCursorLocation(s),a=r.lineIndex;if(a===0||e.metaKey||e.keyCode===33)return-s;const l=r.charIndex,u=this._getWidthBeforeCursor(a,l),d=this._getIndexOnLine(a-1,u),f=this._textLines[a].slice(0,l),m=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+d-f.length+(1-m)}_getIndexOnLine(e,t){const s=this._textLines[e];let r,a,l=this._getLineLeftOffset(e),u=0;for(let d=0,f=s.length;d<f;d++)if(r=this.__charBounds[e][d].width,l+=r,l>t){a=!0;const m=l-r,v=l,y=Math.abs(m-t);u=Math.abs(v-t)<y?d:d-1;break}return a||(u=s.length-1),u}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const s=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===Nt);if(t.shiftKey?this.moveCursorWithShift(s):this.moveCursorWithoutShift(s),s!==0){const r=this.text.length;this.selectionStart=uo(0,this.selectionStart,r),this.selectionEnd=uo(0,this.selectionEnd,r),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===st?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,s){let r;if(e.altKey)r=this["findWordBoundary".concat(s)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=s==="Left"?-1:1,!0;r=this["findLineBoundary".concat(s)](this[t])}return r!==void 0&&this[t]!==r&&(this[t]=r,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=st,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Nt&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=st,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const s="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[s](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===st&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Nt,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Nt,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const w_=n=>!!n.button;class w8 extends b8{constructor(){super(...arguments),U(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new y8(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:s}=e;this.canvas&&this.editable&&!w_(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),s&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=s||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:s}=e;const r=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const a=this.canvas._activeObject;if(a&&a!==this)return}!this.editable||this.group&&!this.group.interactive||s&&s.actionPerformed||w_(t)||r||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),s=this.selectionStart,r=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(s,r,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(xn(this.calcTransformMatrix())).add(new ee(-this._getLeftOffset(),-this._getTopOffset()));let s=0,r=0,a=0;for(let f=0;f<this._textLines.length&&s<=t.y;f++)s+=this.getHeightOfLine(f),a=f,f>0&&(r+=this._textLines[f-1].length+this.missingNewlineOffset(f-1));let l=Math.abs(this._getLineLeftOffset(a));const u=this._textLines[a].length,d=this.__charBounds[a];for(let f=0;f<u;f++){const m=l+d[f].kernedWidth;if(t.x<=m){Math.abs(t.x-m)<=Math.abs(t.x-l)&&r++;break}l=m,r++}return Math.min(this.flipX?u-r:r,this._text.length)}}const Ju="moveCursorUp",ed="moveCursorDown",td="moveCursorLeft",sd="moveCursorRight",nd="exitEditing",__=(n,e)=>{const t=e.getRetinaScaling();n.setTransform(t,0,0,t,0,0);const s=e.viewportTransform;n.transform(s[0],s[1],s[2],s[3],s[4],s[5])},_8=z({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:nd,27:nd,33:Ju,34:ed,35:sd,36:td,37:td,38:Ju,39:sd,40:ed},keysMapRtl:{9:nd,27:nd,33:Ju,34:ed,35:td,36:sd,37:sd,38:Ju,39:td,40:ed},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class ur extends w8{static getDefaults(){return z(z({},super.getDefaults()),ur.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,z(z({},ur.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof yp&&this.canvas.textEditingManager.remove(this),t instanceof yp&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,s=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,s)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,s)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const s=super.toCanvasElement(e);return this.isEditing=t,s}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries(),s=this.findAncestorsWithClipPath(),r=s.length>0;let a,l=e;if(r){a=ln(e.canvas),l=a.getContext("2d"),__(l,this.canvas);const u=this.calcTransformMatrix();l.transform(u[0],u[1],u[2],u[3],u[4],u[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(l,t):this.renderCursor(l,t),r)for(const u of s){const d=u.clipPath,f=ln(e.canvas),m=f.getContext("2d");if(__(m,this.canvas),!d.absolutePositioned){const v=u.calcTransformMatrix();m.transform(v[0],v[1],v[2],v[3],v[4],v[5])}d.transform(m),d.drawObject(m,!0,{}),this.drawClipPathOnCache(l,d,f)}r&&(e.setTransform(1,0,0,1,0,0),e.drawImage(a,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const s=this._getLeftOffset(),r=this._getTopOffset(),a=this._getCursorBoundariesOffsets(e,t);return{left:s,top:r,leftOffset:a.left,topOffset:a.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,s=0;const{charIndex:r,lineIndex:a}=this.get2DCursorLocation(e);for(let f=0;f<a;f++)t+=this.getHeightOfLine(f);const l=this._getLineLeftOffset(a),u=this.__charBounds[a][r];u&&(s=u.left),this.charSpacing!==0&&r===this._textLines[a].length&&(s-=this._getWidthOfCharSpacing());const d={top:t,left:l+(s>0?s:0)};return this.direction==="rtl"&&(this.textAlign===Nt||this.textAlign===On||this.textAlign===ql?d.left*=-1:this.textAlign===st||this.textAlign===Zd?d.left=l-(s>0?s:0):this.textAlign!==He&&this.textAlign!==Wl||(d.left=l-(s>0?s:0))),d}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const s=this.get2DCursorLocation(e),r=s.lineIndex,a=s.charIndex>0?s.charIndex-1:0,l=this.getValueOfPropertyAt(r,a,"fontSize"),u=this.getObjectScaling().x*this.canvas.getZoom(),d=this.cursorWidth/u,f=this.getValueOfPropertyAt(r,a,"deltaY"),m=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-l*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(r,a,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-d/2,top:m+t.top+f,width:d,height:l}}_renderCursor(e,t,s){const{color:r,opacity:a,left:l,top:u,width:d,height:f}=this.getCursorRenderingData(s,t);e.fillStyle=r,e.globalAlpha=a,e.fillRect(l,u,d,f)}renderSelection(e,t){const s={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,s,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,s){const r=t.selectionStart,a=t.selectionEnd,l=this.textAlign.includes(On),u=this.get2DCursorLocation(r),d=this.get2DCursorLocation(a),f=u.lineIndex,m=d.lineIndex,v=u.charIndex<0?0:u.charIndex,y=d.charIndex<0?0:d.charIndex;for(let b=f;b<=m;b++){const w=this._getLineLeftOffset(b)||0;let _=this.getHeightOfLine(b),T=0,S=0,D=0;if(b===f&&(S=this.__charBounds[f][v].left),b>=f&&b<m)D=l&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===m)if(y===0)D=this.__charBounds[m][y].left;else{const A=this._getWidthOfCharSpacing();D=this.__charBounds[m][y-1].left+this.__charBounds[m][y-1].width-A}T=_,(this.lineHeight<1||b===m&&this.lineHeight>1)&&(_/=this.lineHeight);let k=s.left+w+S,M=_,N=0;const L=D-S;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",M=1,N=_):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Nt||this.textAlign===On||this.textAlign===ql?k=this.width-k-L:this.textAlign===st||this.textAlign===Zd?k=s.left+w-D:this.textAlign!==He&&this.textAlign!==Wl||(k=s.left+w-D)),e.fillRect(k,s.top+s.topOffset+N,L,M),s.topOffset+=T}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,Ht)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}U(ur,"ownDefaults",_8),U(ur,"type","IText"),Se.setClass(ur),Se.setClass(ur,"i-text");class Ui extends ur{static getDefaults(){return z(z({},super.getDefaults()),Ui.ownDefaults)}constructor(e,t){super(e,z(z({},Ui.ownDefaults),t))}static createControls(){return{controls:JL()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(On)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,s=0,r=0;const a={};for(let l=0;l<e.graphemeLines.length;l++)e.graphemeText[r]===`
`&&l>0?(s=0,r++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[r])&&l>0&&(s++,r++),a[l]={line:t,offset:s},r+=e.graphemeLines[l].length,s+=e.graphemeLines[l].length;return a}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const s=this._styleMap[t];s&&(t=s.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,s=0,r=e+1,a=!1;const l=this._styleMap[e],u=this._styleMap[e+1];l&&(e=l.line,s=l.offset),u&&(r=u.line,a=r===e,t=u.offset);const d=e===void 0?this.styles:{line:this.styles[e]};for(const f in d)for(const m in d[f]){const v=parseInt(m,10);if(v>=s&&(!a||v<t))for(const y in d[f][m])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const s=this._styleMap[e];if(!s)return{};e=s.line,t=s.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,s){const r=this._styleMap[e];super._setStyleDeclaration(r.line,r.offset+t,s)}_deleteStyleDeclaration(e,t){const s=this._styleMap[e];super._deleteStyleDeclaration(s.line,s.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const s=this.getGraphemeDataForRender(e),r=[];for(let a=0;a<s.wordsData.length;a++)r.push(...this._wrapLine(a,t,s));return this.isWrapping=!1,r}getGraphemeDataForRender(e){const t=this.splitByGrapheme,s=t?"":" ";let r=0;return{wordsData:e.map((a,l)=>{let u=0;const d=t?this.graphemeSplit(a):this.wordSplit(a);return d.length===0?[{word:[],width:0}]:d.map(f=>{const m=t?[f]:this.graphemeSplit(f),v=this._measureWord(m,l,u);return r=Math.max(v,r),u+=m.length+s.length,{word:m,width:v}})}),largestWordWidth:r}}_measureWord(e,t){let s,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=0;for(let l=0,u=e.length;l<u;l++)a+=this._getGraphemeBox(e[l],t,l+r,s,!0).kernedWidth,s=e[l];return a}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,s){let{largestWordWidth:r,wordsData:a}=s,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const u=this._getWidthOfCharSpacing(),d=this.splitByGrapheme,f=[],m=d?"":" ";let v=0,y=[],b=0,w=0,_=!0;t-=l;const T=Math.max(t,r,this.dynamicMinWidth),S=a[e];let D;for(b=0,D=0;D<S.length;D++){const{word:k,width:M}=S[D];b+=k.length,v+=w+M-u,v>T&&!_?(f.push(y),y=[],v=M,_=!0):v+=u,_||d||y.push(m),y=y.concat(k),w=d?0:this._measureWord([m],e,b),b++,_=!1}return D&&f.push(y),r+l>this.dynamicMinWidth&&(this.dynamicMinWidth=r-u+l),f}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),s=this._wrapText(t.lines,this.width),r=new Array(s.length);for(let a=0;a<s.length;a++)r[a]=s[a].join("");return t.lines=r,t.graphemeLines=s,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const s=parseInt(t,10);if(this._textLines[s]){const r=this._styleMap[t].line;e.set("".concat(r),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}U(Ui,"type","Textbox"),U(Ui,"textLayoutProperties",[...ur.textLayoutProperties,"width"]),U(Ui,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),Se.setClass(Ui);class S_ extends yh{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:s}=e,{clipPath:r,group:a}=s;if(!r||!this.shouldPerformLayout(e))return;const{width:l,height:u}=hr(WC(s,r)),d=new ee(l,u);if(r.absolutePositioned)return{center:ro(r.getRelativeCenterPoint(),void 0,a?a.calcTransformMatrix():void 0),size:d};{const f=r.getRelativeCenterPoint().transform(s.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:m=new ee,correction:v=new ee}=this.calcBoundingBox(t,e)||{};return{center:m.add(f),correction:v.subtract(f),size:d}}return{center:s.getRelativeCenterPoint().add(f),size:d}}}}U(S_,"type","clip-path"),Se.setClass(S_);class C_ extends yh{getInitialSize(e,t){let{target:s}=e,{size:r}=t;return new ee(s.width||r.x,s.height||r.y)}}U(C_,"type","fixed"),Se.setClass(C_);class S8 extends uc{subscribeTargets(e){const t=e.target;e.targets.reduce((s,r)=>(r.parent&&s.add(r.parent),s),new Set).forEach(s=>{s.layoutManager.subscribeTargets({target:s,targets:[t]})})}unsubscribeTargets(e){const t=e.target,s=t.getObjects();e.targets.reduce((r,a)=>(a.parent&&r.add(a.parent),r),new Set).forEach(r=>{!s.some(a=>a.parent===r)&&r.layoutManager.unsubscribeTargets({target:r,targets:[t]})})}}class zi extends Hi{static getDefaults(){return z(z({},super.getDefaults()),zi.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,zi.ownDefaults),this.setOptions(t);const{left:s,top:r,layoutManager:a}=t;this.groupInit(e,{left:s,top:r,layoutManager:a??new S8})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(r=>{const a=this._objects.findIndex(u=>u.isInFrontOf(r)),l=a===-1?this.size():a;this.insertAt(l,r)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(ri("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const s=new Set;t.forEach(r=>{const{parent:a}=r;a&&s.add(a)}),e===L0?s.forEach(r=>{r._onAfterObjectsChange(Jd,t)}):s.forEach(r=>{r._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,s){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const r=z(z({hasControls:!1},s),{},{forActiveSelection:!0});for(let a=0;a<this._objects.length;a++)this._objects[a]._renderControls(e,r);super._renderControls(e,t),e.restore()}}U(zi,"type","ActiveSelection"),U(zi,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),Se.setClass(zi),Se.setClass(zi,"activeSelection");class C8{constructor(){U(this,"resources",{})}applyFilters(e,t,s,r,a){const l=a.getContext("2d");if(!l)return;l.drawImage(t,0,0,s,r);const u={sourceWidth:s,sourceHeight:r,imageData:l.getImageData(0,0,s,r),originalEl:t,originalImageData:l.getImageData(0,0,s,r),canvasEl:a,ctx:l,filterBackend:this};e.forEach(f=>{f.applyTo(u)});const{imageData:d}=u;return d.width===s&&d.height===r||(a.width=d.width,a.height=d.height),l.putImageData(d,0,0),u}}class uT{constructor(){let{tileSize:e=Ke.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};U(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),U(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const s=ln({width:e,height:t}),r=s.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});r&&(r.clearColor(0,0,0,0),this.canvas=s,this.gl=r)}applyFilters(e,t,s,r,a,l){const u=this.gl,d=a.getContext("2d");if(!u||!d)return;let f;l&&(f=this.getCachedTexture(l,t));const m={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:s,sourceHeight:r,destinationWidth:s,destinationHeight:r,context:u,sourceTexture:this.createTexture(u,s,r,f?void 0:t),targetTexture:this.createTexture(u,s,r),originalTexture:f||this.createTexture(u,s,r,f?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:a},v=u.createFramebuffer();return u.bindFramebuffer(u.FRAMEBUFFER,v),e.forEach(y=>{y&&y.applyTo(m)}),function(y){const b=y.targetCanvas,w=b.width,_=b.height,T=y.destinationWidth,S=y.destinationHeight;w===T&&_===S||(b.width=T,b.height=S)}(m),this.copyGLTo2D(u,m),u.bindTexture(u.TEXTURE_2D,null),u.deleteTexture(m.sourceTexture),u.deleteTexture(m.targetTexture),u.deleteFramebuffer(v),d.setTransform(1,0,0,1,0,0),m}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,s,r,a){const{NEAREST:l,TEXTURE_2D:u,RGBA:d,UNSIGNED_BYTE:f,CLAMP_TO_EDGE:m,TEXTURE_MAG_FILTER:v,TEXTURE_MIN_FILTER:y,TEXTURE_WRAP_S:b,TEXTURE_WRAP_T:w}=e,_=e.createTexture();return e.bindTexture(u,_),e.texParameteri(u,v,a||l),e.texParameteri(u,y,a||l),e.texParameteri(u,b,m),e.texParameteri(u,w,m),r?e.texImage2D(u,0,d,d,f,r):e.texImage2D(u,0,d,t,s,0,d,f,null),_}getCachedTexture(e,t,s){const{textureCache:r}=this;if(r[e])return r[e];{const a=this.createTexture(this.gl,t.width,t.height,t,s);return a&&(r[e]=a),a}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const s=e.canvas,r=t.targetCanvas,a=r.getContext("2d");if(!a)return;a.translate(0,r.height),a.scale(1,-1);const l=s.height-r.height;a.drawImage(s,0,l,r.width,r.height,0,0,r.width,r.height)}copyGLTo2DPutImageData(e,t){const s=t.targetCanvas.getContext("2d"),r=t.destinationWidth,a=t.destinationHeight,l=r*a*4;if(!s)return;const u=new Uint8Array(this.imageBuffer,0,l),d=new Uint8ClampedArray(this.imageBuffer,0,l);e.readPixels(0,0,r,a,e.RGBA,e.UNSIGNED_BYTE,u);const f=new ImageData(d,r,a);s.putImageData(f,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const s=e.getExtension("WEBGL_debug_renderer_info");if(s){const r=e.getParameter(s.UNMASKED_RENDERER_WEBGL),a=e.getParameter(s.UNMASKED_VENDOR_WEBGL);r&&(t.renderer=r.toLowerCase()),a&&(t.vendor=a.toLowerCase())}return this.gpuInfo=t,t}}let _m;function T8(){const{WebGLProbe:n}=Fn();return n.queryWebGL(br()),Ke.enableGLFiltering&&n.isSupported(Ke.textureSize)?new uT({tileSize:Ke.textureSize}):new C8}function Sm(){return!_m&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(_m=T8()),_m}const j8=["filters","resizeFilter","src","crossOrigin","type"],dT=["cropX","cropY"];class vs extends ms{static getDefaults(){return z(z({},super.getDefaults()),vs.ownDefaults)}constructor(e,t){super(),U(this,"_lastScaleX",1),U(this,"_lastScaleY",1),U(this,"_filterScalingX",1),U(this,"_filterScalingY",1),this.filters=[],Object.assign(this,vs.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(ii()),this.setElement(typeof e=="string"?(this.canvas&&yn(this.canvas.getElement())||wo()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(s),(t=e.classList)===null||t===void 0||t.add(vs.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Sm(!1);t instanceof uT&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Fn().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,s=this.height/2;e.beginPath(),e.moveTo(-t,-s),e.lineTo(t,-s),e.lineTo(t,s),e.lineTo(-t,s),e.lineTo(-t,-s),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(s=>{s&&t.push(s.toObject())}),z(z({},super.toObject([...dT,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,s=-this.width/2,r=-this.height/2;let a=[],l=[],u="",d="";if(!t)return[];if(this.hasCrop()){const f=ii();a.push('<clipPath id="imageCrop_'+f+`">
`,'	<rect x="'+s+'" y="'+r+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),u=' clip-path="url(#imageCrop_'+f+')" '}if(this.imageSmoothing||(d=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(s-this.cropX,'" y="').concat(r-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(d).concat(u,`></image>
`)),this.stroke||this.strokeDashArray){const f=this.fill;this.fill=null,l=['	<rect x="'.concat(s,'" y="').concat(r,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=f}return a=this.paintFirst!==Ht?a.concat(l,e):a.concat(e,l),a}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Dd(e,{crossOrigin:t,signal:s}).then(r=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(r)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,s=this.getTotalObjectScaling(),r=s.x,a=s.y,l=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||r>t&&a>t)return this._element=l,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,void(this._lastScaleY=a);const u=ln(l),{width:d,height:f}=l;this._element=u,this._lastScaleX=e.scaleX=r,this._lastScaleY=e.scaleY=a,Sm().applyFilters([e],l,d,f,this._element),this._filterScalingX=u.width/this._originalElement.width,this._filterScalingY=u.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(a=>a&&!a.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,s=t.naturalWidth||t.width,r=t.naturalHeight||t.height;if(this._element===this._originalElement){const a=ln({width:s,height:r});this._element=a,this._filteredEl=a}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,s,r),this._lastScaleX=1,this._lastScaleY=1);Sm().applyFilters(e,this._originalElement,s,r,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const s=this._filterScalingX,r=this._filterScalingY,a=this.width,l=this.height,u=Math.max(this.cropX,0),d=Math.max(this.cropY,0),f=t.naturalWidth||t.width,m=t.naturalHeight||t.height,v=u*s,y=d*r,b=Math.min(a*s,f-v),w=Math.min(l*r,m-y),_=-a/2,T=-l/2,S=Math.min(a,f/s-u),D=Math.min(l,m/r-d);t&&e.drawImage(t,v,y,b,w,_,T,S,D)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s=this.getOriginalSize();this.width=e||s.width,this.height=t||s.height}parsePreserveAspectRatioAttribute(){const e=vL(this.preserveAspectRatio||""),t=this.width,s=this.height,r={width:t,height:s};let a,l=this._element.width,u=this._element.height,d=1,f=1,m=0,v=0,y=0,b=0;return!e||e.alignX===Os&&e.alignY===Os?(d=t/l,f=s/u):(e.meetOrSlice==="meet"&&(d=f=M6(this._element,r),a=(t-l*d)/2,e.alignX==="Min"&&(m=-a),e.alignX==="Max"&&(m=a),a=(s-u*f)/2,e.alignY==="Min"&&(v=-a),e.alignY==="Max"&&(v=a)),e.meetOrSlice==="slice"&&(d=f=R6(this._element,r),a=l-t/d,e.alignX==="Mid"&&(y=a/2),e.alignX==="Max"&&(y=a),a=u-s/f,e.alignY==="Mid"&&(b=a/2),e.alignY==="Max"&&(b=a),l=t/d,u=s/f)),{width:l,height:u,scaleX:d,scaleY:f,offsetLeft:m,offsetTop:v,cropX:y,cropY:b}}static fromObject(e,t){let{filters:s,resizeFilter:r,src:a,crossOrigin:l,type:u}=e,d=xt(e,j8);return Promise.all([Dd(a,z(z({},t),{},{crossOrigin:l})),s&&ac(s,t),r&&ac([r],t),gh(d,t)]).then(f=>{let[m,v=[],[y]=[],b={}]=f;return new this(m,z(z({},d),{},{src:a,filters:v,resizeFilter:y},b))})}static fromURL(e){let{crossOrigin:t=null,signal:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return Dd(e,{crossOrigin:t,signal:s}).then(a=>new this(a,r))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;const r=Sr(e,this.ATTRIBUTE_NAMES,s);return this.fromURL(r["xlink:href"]||r.href,t,r).catch(a=>(ri("log","Unable to parse Image",a),null))}}U(vs,"type","Image"),U(vs,"cacheProperties",[..._r,...dT]),U(vs,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),U(vs,"CSS_CANVAS","canvas-img"),U(vs,"ATTRIBUTE_NAMES",[...ci,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),Se.setClass(vs),Se.setSVGClass(vs);ph(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const bh=n=>n.webgl!==void 0,B0="precision highp float",E8=`
    `.concat(B0,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),k8=["type"],A8=["type"],D8=new RegExp(B0,"g");class Gt{get type(){return this.constructor.type}constructor(){let e=xt(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},k8);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return E8}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:r="highp"}}=Fn();r!=="highp"&&(t=t.replace(D8,B0.replace("highp",r)));const a=e.createShader(e.VERTEX_SHADER),l=e.createShader(e.FRAGMENT_SHADER),u=e.createProgram();if(!a||!l||!u)throw new Rn("Vertex, fragment shader or program creation error");if(e.shaderSource(a,s),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new Rn("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(a)));if(e.shaderSource(l,t),e.compileShader(l),!e.getShaderParameter(l,e.COMPILE_STATUS))throw new Rn("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(l)));if(e.attachShader(u,a),e.attachShader(u,l),e.linkProgram(u),!e.getProgramParameter(u,e.LINK_STATUS))throw new Rn('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(u)));const d=this.getUniformLocations(e,u)||{};return d.uStepW=e.getUniformLocation(u,"uStepW"),d.uStepH=e.getUniformLocation(u,"uStepH"),{program:u,attributeLocations:this.getAttributeLocations(e,u),uniformLocations:d}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const s=this.constructor.uniformLocations,r={};for(let a=0;a<s.length;a++)r[s[a]]=e.getUniformLocation(t,s[a]);return r}sendAttributeData(e,t,s){const r=t.aPosition,a=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const s=e.destinationWidth,r=e.destinationHeight;e.sourceWidth===s&&e.sourceHeight===r||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,s,r)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){bh(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,s=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(s.program),this.sendAttributeData(t,s.attributeLocations,e.aPosition),t.uniform1f(s.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(s.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,s.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,s){e.activeTexture(s),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:s}=e,r=ln({width:t,height:s});e.helpLayer=r}}toObject(){const e=Object.keys(this.constructor.defaults||{});return z({type:this.type},e.reduce((t,s)=>(t[s]=this[s],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(xt(e,A8))}}U(Gt,"type","BaseFilter"),U(Gt,"uniformLocations",[]);const N8={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class rd extends Gt{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(N8[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const s=new at(this.color).getSource(),r=this.alpha,a=s[0]*r,l=s[1]*r,u=s[2]*r,d=1-r;for(let f=0;f<t.length;f+=4){const m=t[f],v=t[f+1],y=t[f+2];let b,w,_;switch(this.mode){case"multiply":b=m*a/255,w=v*l/255,_=y*u/255;break;case"screen":b=255-(255-m)*(255-a)/255,w=255-(255-v)*(255-l)/255,_=255-(255-y)*(255-u)/255;break;case"add":b=m+a,w=v+l,_=y+u;break;case"difference":b=Math.abs(m-a),w=Math.abs(v-l),_=Math.abs(y-u);break;case"subtract":b=m-a,w=v-l,_=y-u;break;case"darken":b=Math.min(m,a),w=Math.min(v,l),_=Math.min(y,u);break;case"lighten":b=Math.max(m,a),w=Math.max(v,l),_=Math.max(y,u);break;case"overlay":b=a<128?2*m*a/255:255-2*(255-m)*(255-a)/255,w=l<128?2*v*l/255:255-2*(255-v)*(255-l)/255,_=u<128?2*y*u/255:255-2*(255-y)*(255-u)/255;break;case"exclusion":b=a+m-2*a*m/255,w=l+v-2*l*v/255,_=u+y-2*u*y/255;break;case"tint":b=a+m*d,w=l+v*d,_=u+y*d}t[f]=b,t[f+1]=w,t[f+2]=_}}sendUniformData(e,t){const s=new at(this.color).getSource();s[0]=this.alpha*s[0]/255,s[1]=this.alpha*s[1]/255,s[2]=this.alpha*s[2]/255,s[3]=this.alpha,e.uniform4fv(t.uColor,s)}}U(rd,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),U(rd,"type","BlendColor"),U(rd,"uniformLocations",["uColor"]),Se.setClass(rd);const O8={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},M8=["type","image"];class id extends Gt{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return O8[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,s=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,s,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:s}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/s,1]}applyTo2d(e){let{imageData:{data:t,width:s,height:r},filterBackend:{resources:a}}=e;const l=this.image;a.blendImage||(a.blendImage=br());const u=a.blendImage,d=u.getContext("2d");u.width!==s||u.height!==r?(u.width=s,u.height=r):d.clearRect(0,0,s,r),d.setTransform(l.scaleX,0,0,l.scaleY,l.left,l.top),d.drawImage(l.getElement(),0,0,s,r);const f=d.getImageData(0,0,s,r).data;for(let m=0;m<t.length;m+=4){const v=t[m],y=t[m+1],b=t[m+2],w=t[m+3],_=f[m],T=f[m+1],S=f[m+2],D=f[m+3];switch(this.mode){case"multiply":t[m]=v*_/255,t[m+1]=y*T/255,t[m+2]=b*S/255,t[m+3]=w*D/255;break;case"mask":t[m+3]=D}}}sendUniformData(e,t){const s=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,s)}toObject(){return z(z({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:s,image:r}=e,a=xt(e,M8);return vs.fromObject(r,t).then(l=>new this(z(z({},a),{},{image:l})))}}U(id,"type","BlendImage"),U(id,"defaults",{mode:"multiply",alpha:1}),U(id,"uniformLocations",["uTransformMatrix","uImage"]),Se.setClass(id);class ad extends Gt{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(e){bh(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){let{imageData:{data:t,width:s,height:r}}=e;this.aspectRatio=s/r,this.horizontal=!0;let a=this.getBlurValue()*s;const l=new Uint8ClampedArray(t),u=15,d=4*s;for(let f=0;f<t.length;f+=4){let m=0,v=0,y=0,b=0,w=0;const _=f-f%d,T=_+d;for(let S=-14;S<u;S++){const D=S/u,k=4*Math.floor(a*D),M=1-Math.abs(D);let N=f+k;N<_?N=_:N>T&&(N=T);const L=t[N+3]*M;m+=t[N]*L,v+=t[N+1]*L,y+=t[N+2]*L,b+=L,w+=M}l[f]=m/b,l[f+1]=v/b,l[f+2]=y/b,l[f+3]=b/w}this.horizontal=!1,a=this.getBlurValue()*r;for(let f=0;f<l.length;f+=4){let m=0,v=0,y=0,b=0,w=0;const _=f%d,T=l.length-d+_;for(let S=-14;S<u;S++){const D=S/u,k=Math.floor(a*D)*d,M=1-Math.abs(D);let N=f+k;N<_?N=_:N>T&&(N=T);const L=l[N+3]*M;m+=l[N]*L,v+=l[N+1]*L,y+=l[N+2]*L,b+=L,w+=M}t[f]=m/b,t[f+1]=v/b,t[f+2]=y/b,t[f+3]=b/w}}sendUniformData(e,t){const s=this.chooseRightDelta();e.uniform2fv(t.uDelta,s)}isNeutralState(){return this.blur===0}getBlurValue(){let e=1;const{horizontal:t,aspectRatio:s}=this;return t?s>1&&(e=1/s):s<1&&(e=s),e*this.blur*.12}chooseRightDelta(){const e=this.getBlurValue();return this.horizontal?[e,0]:[0,e]}}U(ad,"type","Blur"),U(ad,"defaults",{blur:0}),U(ad,"uniformLocations",["uDelta"]),Se.setClass(ad);class od extends Gt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=Math.round(255*this.brightness);for(let r=0;r<t.length;r+=4)t[r]+=s,t[r+1]+=s,t[r+2]+=s}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}U(od,"type","Brightness"),U(od,"defaults",{brightness:0}),U(od,"uniformLocations",["uBrightness"]),Se.setClass(od);const hT={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class so extends Gt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,s=this.matrix,r=this.colorsOnly;for(let a=0;a<t.length;a+=4){const l=t[a],u=t[a+1],d=t[a+2];if(t[a]=l*s[0]+u*s[1]+d*s[2]+255*s[4],t[a+1]=l*s[5]+u*s[6]+d*s[7]+255*s[9],t[a+2]=l*s[10]+u*s[11]+d*s[12]+255*s[14],!r){const f=t[a+3];t[a]+=f*s[3],t[a+1]+=f*s[8],t[a+2]+=f*s[13],t[a+3]=l*s[15]+u*s[16]+d*s[17]+f*s[18]+255*s[19]}}}sendUniformData(e,t){const s=this.matrix,r=[s[0],s[1],s[2],s[3],s[5],s[6],s[7],s[8],s[10],s[11],s[12],s[13],s[15],s[16],s[17],s[18]],a=[s[4],s[9],s[14],s[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,r),e.uniform4fv(t.uConstants,a)}toObject(){return z(z({},super.toObject()),{},{matrix:[...this.matrix]})}}function Ki(n,e){var t;const s=(U(t=class extends so{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),U(t,"defaults",{colorsOnly:!1,matrix:e}),t);return Se.setClass(s,n),s}U(so,"type","ColorMatrix"),U(so,"defaults",hT),U(so,"uniformLocations",["uColorMatrix","uConstants"]),Se.setClass(so);Ki("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);Ki("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);Ki("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);Ki("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);Ki("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);Ki("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);Ki("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class T_ extends Gt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){bh(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(s=>Se.getClass(s.type).fromObject(s,t))).then(s=>new this({subFilters:s}))}}U(T_,"type","Composed"),Se.setClass(T_);class ld extends Gt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const s=Math.floor(255*this.contrast),r=259*(s+255)/(255*(259-s));for(let a=0;a<t.length;a+=4)t[a]=r*(t[a]-128)+128,t[a+1]=r*(t[a+1]-128)+128,t[a+2]=r*(t[a+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}U(ld,"type","Contrast"),U(ld,"defaults",{contrast:0}),U(ld,"uniformLocations",["uContrast"]),Se.setClass(ld);const R8={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class cd extends Gt{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return R8[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,s=t.data,r=this.matrix,a=Math.round(Math.sqrt(r.length)),l=Math.floor(a/2),u=t.width,d=t.height,f=e.ctx.createImageData(u,d),m=f.data,v=this.opaque?1:0;let y,b,w,_,T,S,D,k,M,N,L,A,B;for(L=0;L<d;L++)for(N=0;N<u;N++){for(T=4*(L*u+N),y=0,b=0,w=0,_=0,B=0;B<a;B++)for(A=0;A<a;A++)D=L+B-l,S=N+A-l,D<0||D>=d||S<0||S>=u||(k=4*(D*u+S),M=r[B*a+A],y+=s[k]*M,b+=s[k+1]*M,w+=s[k+2]*M,v||(_+=s[k+3]*M));m[T]=y,m[T+1]=b,m[T+2]=w,m[T+3]=v?s[T+3]:_}e.imageData=f}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return z(z({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}U(cd,"type","Convolute"),U(cd,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),U(cd,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),Se.setClass(cd);const fT="Gamma";class ud extends Gt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const s=this.gamma,r=1/s[0],a=1/s[1],l=1/s[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const u=this.rgbValues;for(let d=0;d<256;d++)u.r[d]=255*Math.pow(d/255,r),u.g[d]=255*Math.pow(d/255,a),u.b[d]=255*Math.pow(d/255,l);for(let d=0;d<t.length;d+=4)t[d]=u.r[t[d]],t[d+1]=u.g[t[d+1]],t[d+2]=u.b[t[d+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:fT,gamma:this.gamma.concat()}}}U(ud,"type",fT),U(ud,"defaults",{gamma:[1,1,1]}),U(ud,"uniformLocations",["uGamma"]),Se.setClass(ud);const P8={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class dd extends Gt{applyTo2d(e){let{imageData:{data:t}}=e;for(let s,r=0;r<t.length;r+=4){const a=t[r],l=t[r+1],u=t[r+2];switch(this.mode){case"average":s=(a+l+u)/3;break;case"lightness":s=(Math.min(a,l,u)+Math.max(a,l,u))/2;break;case"luminosity":s=.21*a+.72*l+.07*u}t[r+2]=t[r+1]=t[r]=s}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return P8[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}U(dd,"type","Grayscale"),U(dd,"defaults",{mode:"average"}),U(dd,"uniformLocations",["uMode"]),Se.setClass(dd);const L8=z(z({},hT),{},{rotation:0});class Cm extends so{calculateMatrix(){const e=this.rotation*Math.PI,t=yr(e),s=xr(e),r=1/3,a=Math.sqrt(r)*s,l=1-t;this.matrix=[t+l/3,r*l-a,r*l+a,0,0,r*l+a,t+r*l,r*l-a,0,0,r*l-a,r*l+a,t+r*l,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}U(Cm,"type","HueRotation"),U(Cm,"defaults",L8),Se.setClass(Cm);class hd extends Gt{applyTo2d(e){let{imageData:{data:t}}=e;for(let s=0;s<t.length;s+=4)t[s]=255-t[s],t[s+1]=255-t[s+1],t[s+2]=255-t[s+2],this.alpha&&(t[s+3]=255-t[s+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}U(hd,"type","Invert"),U(hd,"defaults",{alpha:!1,invert:!0}),U(hd,"uniformLocations",["uInvert","uAlpha"]),Se.setClass(hd);class fd extends Gt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=this.noise;for(let r=0;r<t.length;r+=4){const a=(.5-Math.random())*s;t[r]+=a,t[r+1]+=a,t[r+2]+=a}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}U(fd,"type","Noise"),U(fd,"defaults",{noise:0}),U(fd,"uniformLocations",["uNoise","uSeed"]),Se.setClass(fd);class gd extends Gt{applyTo2d(e){let{imageData:{data:t,width:s,height:r}}=e;for(let a=0;a<r;a+=this.blocksize)for(let l=0;l<s;l+=this.blocksize){const u=4*a*s+4*l,d=t[u],f=t[u+1],m=t[u+2],v=t[u+3];for(let y=a;y<Math.min(a+this.blocksize,r);y++)for(let b=l;b<Math.min(l+this.blocksize,s);b++){const w=4*y*s+4*b;t[w]=d,t[w+1]=f,t[w+2]=m,t[w+3]=v}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}U(gd,"type","Pixelate"),U(gd,"defaults",{blocksize:4}),U(gd,"uniformLocations",["uBlocksize"]),Se.setClass(gd);class md extends Gt{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=255*this.distance,r=new at(this.color).getSource(),a=[r[0]-s,r[1]-s,r[2]-s],l=[r[0]+s,r[1]+s,r[2]+s];for(let u=0;u<t.length;u+=4){const d=t[u],f=t[u+1],m=t[u+2];d>a[0]&&f>a[1]&&m>a[2]&&d<l[0]&&f<l[1]&&m<l[2]&&(t[u+3]=0)}}sendUniformData(e,t){const s=new at(this.color).getSource(),r=this.distance,a=[0+s[0]/255-r,0+s[1]/255-r,0+s[2]/255-r,1],l=[s[0]/255+r,s[1]/255+r,s[2]/255+r,1];e.uniform4fv(t.uLow,a),e.uniform4fv(t.uHigh,l)}}U(md,"type","RemoveColor"),U(md,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),U(md,"uniformLocations",["uLow","uHigh"]),Se.setClass(md);class pd extends Gt{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,s=this.getFilterWindow(),r=new Array(s);for(let a=1;a<=s;a++)r[a-1]=e(a*t);return r}generateShader(e){const t=new Array(e);for(let s=1;s<=e;s++)t[s-1]="".concat(s,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((s,r)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(s,") * uTaps[").concat(r,"] + texture2D(uTexture, vTexCoord - ").concat(s,") * uTaps[").concat(r,`];
              sum += 2.0 * uTaps[`).concat(r,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){bh(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const s=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(s)/s}}applyTo2d(e){const t=e.imageData,s=this.scaleX,r=this.scaleY;this.rcpScaleX=1/s,this.rcpScaleY=1/r;const a=t.width,l=t.height,u=Math.round(a*s),d=Math.round(l*r);let f;f=this.resizeType==="sliceHack"?this.sliceByTwo(e,a,l,u,d):this.resizeType==="hermite"?this.hermiteFastResize(e,a,l,u,d):this.resizeType==="bilinear"?this.bilinearFiltering(e,a,l,u,d):this.resizeType==="lanczos"?this.lanczosResize(e,a,l,u,d):new ImageData(u,d),e.imageData=f}sliceByTwo(e,t,s,r,a){const l=e.imageData,u=.5;let d=!1,f=!1,m=t*u,v=s*u;const y=e.filterBackend.resources;let b=0,w=0;const _=t;let T=0;y.sliceByTwo||(y.sliceByTwo=br());const S=y.sliceByTwo;(S.width<1.5*t||S.height<s)&&(S.width=1.5*t,S.height=s);const D=S.getContext("2d");for(D.clearRect(0,0,1.5*t,s),D.putImageData(l,0,0),r=Math.floor(r),a=Math.floor(a);!d||!f;)t=m,s=v,r<Math.floor(m*u)?m=Math.floor(m*u):(m=r,d=!0),a<Math.floor(v*u)?v=Math.floor(v*u):(v=a,f=!0),D.drawImage(S,b,w,t,s,_,T,m,v),b=_,w=T,T+=v;return D.getImageData(b,w,r,a)}lanczosResize(e,t,s,r,a){const l=e.imageData.data,u=e.ctx.createImageData(r,a),d=u.data,f=this.lanczosCreate(this.lanczosLobes),m=this.rcpScaleX,v=this.rcpScaleY,y=2/this.rcpScaleX,b=2/this.rcpScaleY,w=Math.ceil(m*this.lanczosLobes/2),_=Math.ceil(v*this.lanczosLobes/2),T={},S={x:0,y:0},D={x:0,y:0};return function k(M){let N,L,A,B,Y,W,K,q,oe,re,fe;for(S.x=(M+.5)*m,D.x=Math.floor(S.x),N=0;N<a;N++){for(S.y=(N+.5)*v,D.y=Math.floor(S.y),Y=0,W=0,K=0,q=0,oe=0,L=D.x-w;L<=D.x+w;L++)if(!(L<0||L>=t)){re=Math.floor(1e3*Math.abs(L-S.x)),T[re]||(T[re]={});for(let P=D.y-_;P<=D.y+_;P++)P<0||P>=s||(fe=Math.floor(1e3*Math.abs(P-S.y)),T[re][fe]||(T[re][fe]=f(Math.sqrt(Math.pow(re*y,2)+Math.pow(fe*b,2))/1e3)),A=T[re][fe],A>0&&(B=4*(P*t+L),Y+=A,W+=A*l[B],K+=A*l[B+1],q+=A*l[B+2],oe+=A*l[B+3]))}B=4*(N*r+M),d[B]=W/Y,d[B+1]=K/Y,d[B+2]=q/Y,d[B+3]=oe/Y}return++M<r?k(M):u}(0)}bilinearFiltering(e,t,s,r,a){let l,u,d,f,m,v,y,b,w,_,T,S,D,k=0;const M=this.rcpScaleX,N=this.rcpScaleY,L=4*(t-1),A=e.imageData.data,B=e.ctx.createImageData(r,a),Y=B.data;for(y=0;y<a;y++)for(b=0;b<r;b++)for(m=Math.floor(M*b),v=Math.floor(N*y),w=M*b-m,_=N*y-v,D=4*(v*t+m),T=0;T<4;T++)l=A[D+T],u=A[D+4+T],d=A[D+L+T],f=A[D+L+4+T],S=l*(1-w)*(1-_)+u*w*(1-_)+d*_*(1-w)+f*w*_,Y[k++]=S;return B}hermiteFastResize(e,t,s,r,a){const l=this.rcpScaleX,u=this.rcpScaleY,d=Math.ceil(l/2),f=Math.ceil(u/2),m=e.imageData.data,v=e.ctx.createImageData(r,a),y=v.data;for(let b=0;b<a;b++)for(let w=0;w<r;w++){const _=4*(w+b*r);let T=0,S=0,D=0,k=0,M=0,N=0,L=0;const A=(b+.5)*u;for(let B=Math.floor(b*u);B<(b+1)*u;B++){const Y=Math.abs(A-(B+.5))/f,W=(w+.5)*l,K=Y*Y;for(let q=Math.floor(w*l);q<(w+1)*l;q++){let oe=Math.abs(W-(q+.5))/d;const re=Math.sqrt(K+oe*oe);re>1&&re<-1||(T=2*re*re*re-3*re*re+1,T>0&&(oe=4*(q+B*t),L+=T*m[oe+3],D+=T,m[oe+3]<255&&(T=T*m[oe+3]/250),k+=T*m[oe],M+=T*m[oe+1],N+=T*m[oe+2],S+=T))}}y[_]=k/S,y[_+1]=M/S,y[_+2]=N/S,y[_+3]=L/D}return v}}U(pd,"type","Resize"),U(pd,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),U(pd,"uniformLocations",["uDelta","uTaps"]),Se.setClass(pd);class vd extends Gt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=-this.saturation;for(let r=0;r<t.length;r+=4){const a=t[r],l=t[r+1],u=t[r+2],d=Math.max(a,l,u);t[r]+=d!==a?(d-a)*s:0,t[r+1]+=d!==l?(d-l)*s:0,t[r+2]+=d!==u?(d-u)*s:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}U(vd,"type","Saturation"),U(vd,"defaults",{saturation:0}),U(vd,"uniformLocations",["uSaturation"]),Se.setClass(vd);class yd extends Gt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=-this.vibrance;for(let r=0;r<t.length;r+=4){const a=t[r],l=t[r+1],u=t[r+2],d=Math.max(a,l,u),f=(a+l+u)/3,m=2*Math.abs(d-f)/255*s;t[r]+=d!==a?(d-a)*m:0,t[r+1]+=d!==l?(d-l)*m:0,t[r+2]+=d!==u?(d-u)*m:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}U(yd,"type","Vibrance"),U(yd,"defaults",{vibrance:0}),U(yd,"uniformLocations",["uVibrance"]),Se.setClass(yd);const B8=()=>{console.log("=== CakeCustomization Component Initialized ===");const n=j.useRef(null),e=j.useRef(null),t=j.useRef(null),[s,r]=j.useState(!0),[a,l]=j.useState([]),[u,d]=j.useState([]),[f,m]=j.useState([]),[v,y]=j.useState("select"),[b,w]=j.useState("#FF0000"),[_,T]=j.useState(""),[S,D]=j.useState(24),[k,M]=j.useState("Arial"),[N,L]=j.useState(!1),[A,B]=j.useState(null),[Y,W]=j.useState(0),[K,q]=j.useState("cake base");console.log("Initial state:",{loading:s,canvasReady:N,selectedColor:b}),j.useEffect(()=>{console.log("=== CanvasReady state changed ==="),console.log("New canvasReady value:",N)},[N]);const oe=V=>{if(!V)return console.log("getPublicImageUrl: No path provided"),null;if(V.startsWith("http"))return console.log("getPublicImageUrl: Path is already a URL:",V),V;console.log("getPublicImageUrl: Processing path:",V);try{const ie="asset";console.log(`getPublicImageUrl: Using bucket "${ie}"`);let pe=V;V.includes("/")||console.log(`getPublicImageUrl: Path doesn't include folder, using filename: ${V}`);const{data:je,error:he}=be.storage.from(ie).getPublicUrl(pe);return he?(console.log(`getPublicImageUrl: Error with bucket "${ie}":`,he),null):je&&je.publicUrl?(console.log(`getPublicImageUrl: Success with bucket "${ie}":`,je.publicUrl),je.publicUrl):(console.error(`getPublicImageUrl: No public URL generated for bucket "${ie}"`),null)}catch(ie){return console.error("getPublicImageUrl: Unexpected error:",ie),null}},re=async V=>{if(!V)return!1;try{return(await fetch(V,{method:"HEAD"})).ok}catch(ie){return console.log("testImageUrl: Error testing URL:",V,ie),!1}},fe=async()=>{try{console.log("=== TESTING STORAGE BUCKET STRUCTURE ===");const V="asset",{data:ie,error:pe}=await be.storage.from(V).list("",{limit:100});if(pe){console.error("Error listing bucket contents:",pe);return}console.log("Bucket contents:",ie);const je=["cake base","icing","topping"];for(const he of je)try{const{data:Be,error:We}=await be.storage.from(V).list(he,{limit:100});We?console.log(`Error listing folder "${he}":`,We):console.log(`Folder "${he}" contents:`,Be)}catch(Be){console.log(`Exception listing folder "${he}":`,Be)}}catch(V){console.error("Error testing storage bucket:",V)}},P=()=>{const V=t.current;if(!V){console.log("Color wheel canvas not ready");return}const ie=V.getContext("2d");if(!ie){console.log("Color wheel context not ready");return}const pe=V.width/2,je=V.height/2,he=Math.min(pe,je)-10;ie.clearRect(0,0,V.width,V.height);const Be=ie.createImageData(V.width,V.height),We=Be.data;for(let et=0;et<V.height;et++)for(let nt=0;nt<V.width;nt++){const De=nt-pe,Qe=et-je,jt=Math.sqrt(De*De+Qe*Qe),se=Math.atan2(Qe,De);if(jt<=he){const Ee=(se*180/Math.PI+360)%360,me=Math.min(jt/he*100,100),ge=50,ce=(Ve,ts,_s)=>{ts/=100,_s/=100;const mt=(1-Math.abs(2*_s-1))*ts,Bt=mt*(1-Math.abs(Ve/60%2-1)),Tn=_s-mt/2;let Yt=0,Ft=0,Et=0;return 0<=Ve&&Ve<60?(Yt=mt,Ft=Bt,Et=0):60<=Ve&&Ve<120?(Yt=Bt,Ft=mt,Et=0):120<=Ve&&Ve<180?(Yt=0,Ft=mt,Et=Bt):180<=Ve&&Ve<240?(Yt=0,Ft=Bt,Et=mt):240<=Ve&&Ve<300?(Yt=Bt,Ft=0,Et=mt):300<=Ve&&Ve<360&&(Yt=mt,Ft=0,Et=Bt),[Math.round((Yt+Tn)*255),Math.round((Ft+Tn)*255),Math.round((Et+Tn)*255)]},[Ze,$s,Cr]=ce(Ee,me,ge),$t=(et*V.width+nt)*4;We[$t]=Ze,We[$t+1]=$s,We[$t+2]=Cr,We[$t+3]=255}}ie.putImageData(Be,0,0),ie.beginPath(),ie.arc(pe,je,20,0,2*Math.PI),ie.fillStyle=b,ie.fill(),ie.strokeStyle="#333",ie.lineWidth=2,ie.stroke(),console.log("Color wheel drawn successfully")},$=V=>{console.log("=== Get Color From Wheel called ==="),console.log("Event:",V);const ie=t.current;if(console.log("Color wheel canvas:",ie),!ie){console.log("Color wheel canvas not available");return}const pe=ie.getBoundingClientRect(),je=V.clientX-pe.left,he=V.clientY-pe.top,Be=ie.width/2,We=ie.height/2;console.log("Click coordinates:",{x:je,y:he,centerX:Be,centerY:We});const et=je-Be,nt=he-We,De=Math.sqrt(et*et+nt*nt),Qe=Math.min(Be,We)-10;if(console.log("Distance calculation:",{deltaX:et,deltaY:nt,distance:De,radius:Qe}),De<=Qe){const se=(Math.atan2(nt,et)*180/Math.PI+360)%360,Ee=Math.min(De/Qe*100,100),me=50,ge=(Ve,ts,_s)=>{ts/=100,_s/=100;const mt=(1-Math.abs(2*_s-1))*ts,Bt=mt*(1-Math.abs(Ve/60%2-1)),Tn=_s-mt/2;let Yt=0,Ft=0,Et=0;return 0<=Ve&&Ve<60?(Yt=mt,Ft=Bt,Et=0):60<=Ve&&Ve<120?(Yt=Bt,Ft=mt,Et=0):120<=Ve&&Ve<180?(Yt=0,Ft=mt,Et=Bt):180<=Ve&&Ve<240?(Yt=0,Ft=Bt,Et=mt):240<=Ve&&Ve<300?(Yt=Bt,Ft=0,Et=mt):300<=Ve&&Ve<360&&(Yt=mt,Ft=0,Et=Bt),[Math.round((Yt+Tn)*255),Math.round((Ft+Tn)*255),Math.round((Et+Tn)*255)]},ce=(Ve,ts,_s)=>"#"+[Ve,ts,_s].map(mt=>{const Bt=mt.toString(16);return Bt.length===1?"0"+Bt:Bt}).join(""),[Ze,$s,Cr]=ge(se,Ee,me),$t=ce(Ze,$s,Cr);if(console.log("Calculated color:",$t),w($t),console.log("Checking canvas readiness for color change"),console.log("canvasReady:",N),console.log("canvas.current:",e.current),console.log("getActiveObject method:",e.current?.getActiveObject),N&&e.current&&e.current.getActiveObject){console.log("Canvas is ready, getting active object");const Ve=e.current.getActiveObject();console.log("Active object for color change:",Ve),Ve?(console.log("Setting fill color on active object"),Ve.set("fill",$t),e.current.renderAll(),console.log("Color changed successfully"),A&&A===Ve&&W(ts=>ts+1)):console.log("No active object for color change")}else console.log("Canvas not ready for color change")}else console.log("Click outside color wheel radius")},I=V=>{console.log("=== Mouse Down on Color Wheel ==="),t.current&&(document.addEventListener("mousemove",te),document.addEventListener("mouseup",O),$(V))},te=V=>{console.log("=== Mouse Move on Color Wheel ===");const ie={clientX:V.clientX,clientY:V.clientY};$(ie)},O=()=>{console.log("=== Mouse Up on Color Wheel ==="),document.removeEventListener("mousemove",te),document.removeEventListener("mouseup",O)};j.useEffect(()=>{console.log("=== Fetch Images useEffect triggered ==="),(async()=>{try{console.log("Setting loading to true"),r(!0);const{data:ie,error:pe}=await be.from("ASSET").select("*");if(pe){console.error("Error fetching assets:",pe),Oe.error("Failed to load assets");return}console.log("=== ASSET DATA DEBUG ==="),console.log("Raw asset data:",ie),console.log("Asset count:",ie?.length||0),ie&&ie.length>0&&(console.log("Sample asset:",ie[0]),console.log("Asset structure:",Object.keys(ie[0]))),await fe();const je=ie.filter(De=>De.type==="cake base"),he=ie.filter(De=>De.type==="icing"),Be=ie.filter(De=>De.type==="topping");console.log("Filtered cake bases:",je),console.log("Filtered icing assets:",he),console.log("Filtered topping assets:",Be);const We=je.map(De=>{const Qe=`cake base/${De.src}`,jt=oe(Qe);return console.log(`Processing cake base ${De.src}:`,{asset:De,fullPath:Qe,publicUrl:jt}),{cake_id:De.asset_id,name:De.src.replace(".png","").replace(/_/g," ").replace(/\b\w/g,se=>se.toUpperCase()),publicUrl:jt,admin_id:De.admin_id}}),et=he.map(De=>{const Qe=`icing/${De.src}`,jt=oe(Qe);return console.log(`Processing icing ${De.src}:`,{asset:De,fullPath:Qe,publicUrl:jt}),{id:De.asset_id,name:De.src.replace(".png","").replace(/_/g," ").replace(/\b\w/g,se=>se.toUpperCase()),image_path:Qe,category:De.type,admin_id:De.admin_id}}),nt=Be.map(De=>{const Qe=`topping/${De.src}`,jt=oe(Qe);return console.log(`Processing topping ${De.src}:`,{asset:De,fullPath:Qe,publicUrl:jt}),{id:De.asset_id,name:De.src.replace(".png","").replace(/_/g," ").replace(/\b\w/g,se=>se.toUpperCase()),category:De.type,admin_id:De.admin_id}});if(console.log("=== PROCESSED DATA DEBUG ==="),console.log("Final cake images:",We),console.log("Final icing assets:",et),console.log("Final topping assets:",nt),We.length>0){console.log("Testing first cake image URL...");const De=We[0].publicUrl;if(console.log("First cake URL:",De),De){const Qe=await re(De);console.log("First cake URL accessible:",Qe)}}if(et.length>0){console.log("Testing first icing URL...");const De=oe(et[0].image_path);if(console.log("First icing URL:",De),De){const Qe=await re(De);console.log("First icing URL accessible:",Qe)}}We.length===0&&console.warn("No cake bases found in ASSET table"),et.length===0&&console.warn("No icing assets found in ASSET table"),nt.length===0&&console.warn("No topping assets found in ASSET table"),l(We),d(et),m(nt)}catch(ie){console.error("Error fetching images:",ie),Oe.error("Failed to load images")}finally{console.log("Setting loading to false"),r(!1)}})()},[]),j.useEffect(()=>{if(console.log("=== Canvas Initialization useEffect triggered ==="),console.log("Loading state:",s),console.log("Canvas ref:",n.current),!s&&n.current&&!e.current){console.log("Loading is false, initializing canvas..."),console.log("Canvas ref element:",n.current);try{const V=n.current.parentElement,ie=V.getBoundingClientRect();console.log("=== Canvas Sizing Debug ==="),console.log("Container element:",V),console.log("Container rect:",ie),console.log("Container width:",ie.width),console.log("Container height:",ie.height);const pe=ie.width,je=ie.height;console.log("Calculated maxWidth:",pe),console.log("Calculated maxHeight:",je),console.log("Canvas element before creation:",n.current),e.current=new yp(n.current,{width:pe,height:je,backgroundColor:"#f8f9fa"}),console.log("Canvas created successfully:",e.current),console.log("Canvas dimensions after creation:",{width:e.current.width,height:e.current.height}),console.log("Container computed styles:",{width:window.getComputedStyle(V).width,height:window.getComputedStyle(V).height,maxWidth:window.getComputedStyle(V).maxWidth,maxHeight:window.getComputedStyle(V).maxHeight,overflow:window.getComputedStyle(V).overflow}),console.log("Canvas element computed styles:",{width:window.getComputedStyle(n.current).width,height:window.getComputedStyle(n.current).height,maxWidth:window.getComputedStyle(n.current).maxWidth,maxHeight:window.getComputedStyle(n.current).maxHeight}),e.current.on("selection:created",ue),e.current.on("selection:cleared",ne),e.current.on("object:modified",xe),e.current.on("object:moving",xe),e.current.on("object:scaling",xe),e.current.on("object:rotating",xe),console.log("Event listeners added"),console.log("Setting canvasReady to true"),setTimeout(()=>{console.log("Delayed canvas ready set to true"),L(!0)},100)}catch(V){console.error("Error creating Canvas:",V)}}else console.log("Loading is still true, canvas ref not ready, or canvas already exists")},[s]);const H=()=>{if(console.log("=== Canvas Resize Debug ==="),console.log("Canvas current:",e.current),console.log("Canvas ref:",n.current),e.current&&n.current){const ie=n.current.parentElement.getBoundingClientRect();console.log("Resize - Container rect:",ie),console.log("Resize - Container width:",ie.width),console.log("Resize - Container height:",ie.height);const pe=ie.width,je=ie.height;console.log("Resize - Calculated maxWidth:",pe),console.log("Resize - Calculated maxHeight:",je),console.log("Resize - Current canvas dimensions:",{width:e.current.width,height:e.current.height}),e.current.setDimensions({width:pe,height:je}),e.current.renderAll(),console.log("Resize - New canvas dimensions:",{width:e.current.width,height:e.current.height})}else console.log("Resize - Canvas not ready for resize")};j.useEffect(()=>{if(N&&e.current)return window.addEventListener("resize",H),()=>{window.removeEventListener("resize",H)}},[N]),j.useEffect(()=>()=>{console.log("Canvas cleanup - disposing canvas"),e.current&&(e.current.dispose(),e.current=null),console.log("Setting canvasReady to false"),L(!1)},[]),j.useEffect(()=>{console.log("=== Color Wheel useEffect triggered ==="),console.log("Selected color:",b),console.log("Color wheel ref:",t.current),t.current?(console.log("Drawing color wheel..."),P()):console.log("Color wheel ref not ready")},[b,Y]),j.useEffect(()=>{console.log("=== Color Wheel Mount useEffect triggered ===");const V=setTimeout(()=>{console.log("Attempting to draw color wheel on mount"),console.log("Color wheel ref on mount:",t.current),t.current?(console.log("Drawing color wheel on mount..."),P()):console.log("Color wheel ref not ready on mount")},100);return()=>{console.log("Clearing color wheel mount timer"),clearTimeout(V)}},[]);const ue=()=>{if(console.log("=== Handle Selection called ==="),console.log("Canvas ready:",N),console.log("Canvas current:",e.current),!e.current){console.log("Canvas not available in handleSelection");return}const V=e.current.getActiveObject();console.log("Active object:",V),V&&(console.log("Active object type:",V.type),B(V),W(ie=>ie+1),V.type==="text"?(console.log("Setting text properties from active object"),T(V.text),D(V.fontSize),M(V.fontFamily),w(V.fill)):w(V.fill||"#FF0000"))},ne=()=>{console.log("=== Handle Deselection called ==="),console.log("Resetting text properties"),T(""),D(24),M("Arial"),w("#FF0000"),B(null),W(0)},xe=()=>{console.log("=== Handle Object Modified called ==="),W(V=>V+1)},Ae=V=>{if(console.log("=== Add Cake Base called ==="),console.log("Cake:",V),console.log("Canvas ready:",N),console.log("Canvas current:",e.current),!N||!e.current){console.log("Canvas not ready for addCakeBase"),Oe.error("Canvas not ready");return}console.log("Creating image for cake base");const ie=new Image;ie.onload=()=>{console.log("Image loaded successfully, creating FabricImage");const pe=new vs(ie);pe.scaleToWidth(300),pe.set({left:250,top:200,name:"cake-base"}),console.log("Adding fabric image to canvas"),e.current.add(pe),e.current.setActiveObject(pe),e.current.renderAll(),console.log("Cake base added successfully"),Oe.success(`${V.name} added to canvas`)},ie.onerror=pe=>{console.error("Image failed to load:",pe),console.log("Image src that failed:",V.publicUrl),Oe.error("Failed to load cake image")},ie.src=V.publicUrl,console.log("Image src set to:",V.publicUrl)},we=V=>{if(!N||!e.current){Oe.error("Canvas not ready");return}const ie=oe(V.image_path);console.log("Adding decoration:",{decoration:V,imageUrl:ie});const pe=new Image;pe.onload=()=>{const je=new vs(pe);je.scaleToWidth(80),je.set({left:300,top:250,name:"decoration"}),e.current.add(je),e.current.setActiveObject(je),e.current.renderAll(),Oe.success(`${V.name} added to canvas`)},pe.onerror=je=>{console.error("Decoration image failed to load:",je),console.log("Image src that failed:",ie),Oe.error("Failed to load decoration image")},pe.src=ie},ze=V=>{if(!N||!e.current){Oe.error("Canvas not ready");return}const ie=oe(`topping/${V.src}`);console.log("Adding topping:",{topping:V,imageUrl:ie});const pe=new Image;pe.onload=()=>{const je=new vs(pe);je.scaleToWidth(60),je.set({left:320,top:270,name:"topping"}),e.current.add(je),e.current.setActiveObject(je),e.current.renderAll(),Oe.success(`${V.name} added to canvas`)},pe.onerror=je=>{console.error("Topping image failed to load:",je),console.log("Image src that failed:",ie),Oe.error("Failed to load topping image")},pe.src=ie},Ue=()=>{if(!_.trim()){Oe.error("Please enter some text");return}if(!N||!e.current){Oe.error("Canvas not ready");return}const V=new fs(_,{left:350,top:100,fontSize:S,fontFamily:k,fill:b,name:"text"});e.current.add(V),e.current.setActiveObject(V),e.current.renderAll(),T(""),Oe.success("Text added to canvas")},dt=V=>{if(console.log("=== Change Size called ==="),console.log("Scale:",V),console.log("Canvas ready:",N),console.log("Canvas current:",e.current),console.log("Canvas getActiveObject method:",e.current?.getActiveObject),!N){console.log("Canvas not ready - canvasReady is false"),Oe.error("Canvas not ready");return}if(!e.current){console.log("Canvas not ready - canvas.current is null"),Oe.error("Canvas not ready");return}if(typeof e.current.getActiveObject!="function"){console.log("Canvas not ready - getActiveObject is not a function"),console.log("getActiveObject type:",typeof e.current.getActiveObject),Oe.error("Canvas not ready");return}console.log("Getting active object");const ie=e.current.getActiveObject();console.log("Active object:",ie),ie?(console.log("Scaling active object by:",V),ie.scale(V),e.current.renderAll(),W(pe=>pe+1),console.log("Size changed successfully")):(console.log("No active object found"),Oe.error("Please select an object first"))},ye=()=>{if(!N||!e.current||!e.current.getActiveObject){Oe.error("Canvas not ready");return}const V=e.current.getActiveObject();V?(e.current.remove(V),e.current.renderAll(),Oe.success("Object deleted")):Oe.error("Please select an object first")},_e=()=>{if(!N||!e.current){Oe.error("Canvas not ready");return}e.current.clear(),e.current.backgroundColor="#f8f9fa",e.current.renderAll(),Oe.success("Canvas cleared")},Te=()=>{if(!N||!e.current){Oe.error("Canvas not ready");return}const V=e.current.toDataURL({format:"png",quality:1}),ie=document.createElement("a");ie.download="custom-cake-design.png",ie.href=V,ie.click(),Oe.success("Design exported successfully")};return console.log("=== Render called ==="),console.log("Current state:",{loading:s,canvasReady:N,selectedColor:b,cakeImages:a.length}),s?(console.log("Showing loading spinner"),h.jsx(bo,{message:"Loading cake designer..."})):h.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[h.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-2 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Cake Designer"}),h.jsx("div",{className:"h-4 w-px bg-gray-300"}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("button",{onClick:()=>y("select"),className:`p-2 rounded hover:bg-gray-100 transition-colors ${v==="select"?"bg-blue-100 text-blue-600":"text-gray-600"}`,title:"Select Tool (V)",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.122 2.122"})})}),h.jsx("button",{onClick:()=>y("text"),className:`p-2 rounded hover:bg-gray-100 transition-colors ${v==="text"?"bg-blue-100 text-blue-600":"text-gray-600"}`,title:"Text Tool (T)",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})})})]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("button",{onClick:()=>dt(.8),className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Decrease Size",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12H3"})})}),h.jsx("button",{onClick:()=>dt(1.2),className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Increase Size",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),h.jsx("div",{className:"h-4 w-px bg-gray-300"}),h.jsx("button",{onClick:ye,className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete Selected",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),h.jsx("button",{onClick:_e,className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Clear Canvas",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),h.jsx("button",{onClick:Te,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",title:"Save Design",children:"Save"})]})]}),h.jsxs("div",{className:"flex-1 flex min-h-0 overflow-hidden",children:[h.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col overflow-hidden",children:[v==="text"&&h.jsxs("div",{className:"p-4 border-b border-gray-200",children:[h.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Text"}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("input",{type:"text",value:_,onChange:V=>T(V.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter text..."}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Size"}),h.jsx("input",{type:"range",min:"12",max:"72",value:S,onChange:V=>D(parseInt(V.target.value)),className:"w-full"}),h.jsxs("span",{className:"text-xs text-gray-500",children:[S,"px"]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Font"}),h.jsxs("select",{value:k,onChange:V=>M(V.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",children:[h.jsx("option",{value:"Arial",children:"Arial"}),h.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),h.jsx("option",{value:"Courier New",children:"Courier New"}),h.jsx("option",{value:"Georgia",children:"Georgia"}),h.jsx("option",{value:"Verdana",children:"Verdana"})]})]}),h.jsx("button",{onClick:Ue,className:"w-full px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Add Text"})]})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0",children:[h.jsxs("div",{className:"flex space-x-1 p-4 pb-2 bg-gray-50 border-b border-gray-200",children:[h.jsx("button",{onClick:()=>q("cake base"),className:`flex-1 py-2 px-3 text-xs font-medium rounded-md transition-colors ${K==="cake base"?"bg-white text-gray-900 shadow-sm border border-gray-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Cake Bases"}),h.jsx("button",{onClick:()=>q("icing"),className:`flex-1 py-2 px-3 text-xs font-medium rounded-md transition-colors ${K==="icing"?"bg-white text-gray-900 shadow-sm border border-gray-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Icing"}),h.jsx("button",{onClick:()=>q("topping"),className:`flex-1 py-2 px-3 text-xs font-medium rounded-md transition-colors ${K==="topping"?"bg-white text-gray-900 shadow-sm border border-gray-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Toppings"})]}),h.jsxs("div",{className:"p-4",children:[K==="cake base"&&h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Cake Bases"}),a.length>0?h.jsx("div",{className:"space-y-2",children:a.map(V=>h.jsxs("div",{className:"group cursor-pointer",children:[h.jsxs("div",{className:"relative",children:[h.jsx("img",{src:V.publicUrl,alt:V.name,className:"w-full h-16 object-cover rounded border border-gray-200 group-hover:border-blue-300 transition-colors",onError:ie=>{ie.target.src="/saved-cake.png"}}),h.jsx("button",{onClick:()=>Ae(V),className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-colors duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100",children:h.jsx("span",{className:"text-white text-xs font-medium",children:"Add"})})]}),h.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:V.name})]},V.cake_id))}):h.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No cake bases found"})]}),K==="icing"&&h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Icing & Decorations"}),u.length>0?h.jsx("div",{className:"space-y-2",children:u.map(V=>h.jsxs("div",{className:"group cursor-pointer",children:[h.jsxs("div",{className:"relative",children:[h.jsx("img",{src:oe(V.image_path),alt:V.name,className:"w-full h-16 object-cover rounded border border-gray-200 group-hover:border-blue-300 transition-colors",onError:ie=>{console.error("Decoration image failed to load in UI:",V.image_path),ie.target.src="/saved-cake.png"}}),h.jsx("button",{onClick:()=>we(V),className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-colors duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100",children:h.jsx("span",{className:"text-white text-xs font-medium",children:"Add"})})]}),h.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:V.name})]},V.id))}):h.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No icing decorations found"})]}),K==="topping"&&h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Toppings"}),f.length>0?h.jsx("div",{className:"space-y-2",children:f.map(V=>h.jsxs("div",{className:"group cursor-pointer",children:[h.jsxs("div",{className:"relative",children:[h.jsx("img",{src:oe(`topping/${V.src}`),alt:V.name,className:"w-full h-16 object-cover rounded border border-gray-200 group-hover:border-blue-300 transition-colors",onError:ie=>{console.error("Topping image failed to load in UI:",`topping/${V.src}`),ie.target.src="/saved-cake.png"}}),h.jsx("button",{onClick:()=>ze(V),className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-colors duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100",children:h.jsx("span",{className:"text-white text-xs font-medium",children:"Add"})})]}),h.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:V.name})]},V.id))}):h.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No toppings found"})]})]})]})]}),h.jsx("div",{className:"flex-1 bg-gray-100 flex items-center justify-center p-4 min-h-0 overflow-hidden",children:h.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden w-full h-full min-w-[800px] min-h-[600px]",children:h.jsx("canvas",{ref:n,className:"w-full h-full"})})}),h.jsxs("div",{className:"w-64 bg-white border-l border-gray-200 p-4",children:[h.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Properties"}),A?h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Color"}),h.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[h.jsx("canvas",{ref:t,width:"120",height:"120",className:"border border-gray-300 rounded cursor-pointer",onMouseDown:I,title:"Click and drag to select color"}),h.jsx("div",{className:"flex items-center space-x-2",children:h.jsx("span",{className:"text-sm text-gray-600 font-mono",children:b})})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Type"}),h.jsx("div",{className:"text-sm font-medium text-gray-900 capitalize",children:A.type})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Position"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsx("input",{type:"number",value:Math.round(A.left||0),onChange:V=>{A.set("left",parseFloat(V.target.value)),e.current.renderAll(),W(ie=>ie+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),h.jsx("input",{type:"number",value:Math.round(A.top||0),onChange:V=>{A.set("top",parseFloat(V.target.value)),e.current.renderAll(),W(ie=>ie+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Size"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsx("input",{type:"number",value:Math.round(A.width*(A.scaleX||1)),onChange:V=>{const pe=parseFloat(V.target.value)/A.width;A.set("scaleX",pe),e.current.renderAll(),W(je=>je+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),h.jsx("input",{type:"number",value:Math.round(A.height*(A.scaleY||1)),onChange:V=>{const pe=parseFloat(V.target.value)/A.height;A.set("scaleY",pe),e.current.renderAll(),W(je=>je+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Rotation"}),h.jsx("input",{type:"number",value:Math.round(A.angle||0),onChange:V=>{A.set("angle",parseFloat(V.target.value)),e.current.renderAll(),W(ie=>ie+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Opacity"}),h.jsx("input",{type:"range",min:"0",max:"100",value:Math.round((A.opacity||1)*100),onChange:V=>{A.set("opacity",parseFloat(V.target.value)/100),e.current.renderAll(),W(ie=>ie+1)},className:"w-full"}),h.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round((A.opacity||1)*100),"%"]})]}),A.type==="text"&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Text"}),h.jsx("input",{type:"text",value:A.text||"",onChange:V=>{A.set("text",V.target.value),e.current.renderAll(),W(ie=>ie+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]},Y):h.jsx("div",{className:"text-sm text-gray-500 text-center py-8",children:"Select an object to view its properties"})]})]})]})},j_=()=>{const[n,e]=j.useState([]),[t,s]=j.useState([]),[r,a]=j.useState(null),[l,u]=j.useState({id:null,field:null}),[d,f]=j.useState({}),[m,v]=j.useState(""),[y,b]=j.useState(""),[w,_]=j.useState(""),[T,S]=j.useState([]),[D,k]=j.useState(""),[M,N]=j.useState(!1);j.useEffect(()=>{(async()=>{const{data:oe,error:re}=await be.from("INVENTORY").select(`
          inven_id,
          stock_quantity,
          last_updated,
          ingred_id,
          INGREDIENT (
            ingred_name,
            unit
          )
        `);if(re)console.error(re);else{const fe=oe.map(P=>({inven_id:P.inven_id,quantity:P.stock_quantity,updated:P.last_updated,name:P.INGREDIENT?.ingred_name,unit:P.INGREDIENT?.unit,ingred_id:P.ingred_id}));e(fe)}})()},[]),j.useEffect(()=>{(async()=>{const{data:oe,error:re}=await be.from("INGREDIENT").select("ingred_id, ingred_name, unit").order("ingred_name");re?console.error("Error fetching ingredients:",re):(S(oe||[]),console.log("Available ingredients:",oe))})()},[]);const L=()=>{const q=`new-${Date.now()}`;s([...t,{inven_id:q,quantity:"0",updated:new Date().toISOString().split("T")[0],name:"Item Name",ingred_id:null,isNew:!0}])},A=async()=>{if(!r)return;if(r.toString().startsWith("new-"))s(t.filter(oe=>oe.inven_id!==r));else try{const{data:oe,error:re}=await be.from("INVENTORY").select("ingred_id").eq("inven_id",r).single();if(re){console.error("Error fetching inventory record:",re),ve.error(`Failed to fetch inventory record: ${re.message}`,{duration:4e3,position:"top-center"});return}const fe=oe.ingred_id,{error:P}=await be.from("INVENTORY").delete().eq("inven_id",r);if(P){console.error("Delete inventory error:",P),ve.error(`Failed to delete inventory item: ${P.message}`,{duration:4e3,position:"top-center"});return}const{data:$,error:I}=await be.from("INVENTORY").select("inven_id").eq("ingred_id",fe);if(I)console.error("Error checking other inventory records:",I);else if(!$||$.length===0){console.log(`Deleting ingredient with ID ${fe} as it's no longer used`);const{error:te}=await be.from("INGREDIENT").delete().eq("ingred_id",fe);te?console.error("Delete ingredient error:",te):console.log(`Successfully deleted ingredient with ID ${fe}`)}else console.log(`Ingredient with ID ${fe} is still used in other inventory records, keeping it`);e(n.filter(te=>te.inven_id!==r))}catch(oe){console.error("Error in delete operation:",oe)}a(null)},B=async()=>{if(M)return;N(!0),console.log("=== SAVE CHANGES START ==="),console.log("New rows to save:",t),console.log("Edited rows to save:",d),console.log("Available ingredients:",T);for(const re of t){if(console.log("Processing new row:",re),!re.name||!re.quantity){console.warn("Skipping incomplete new row:",re);continue}try{console.log(`Looking for ingredient: "${re.name.trim()}"`);const{data:fe,error:P}=await be.from("INGREDIENT").select("ingred_id, unit").ilike("ingred_name",re.name.trim());if(P){console.error("Ingredient fetch error (insert):",P);continue}console.log("Found ingredients:",fe);let $,I=re.unit||"pcs";if(!fe||fe.length===0){console.log(`Creating new ingredient: "${re.name.trim()}" with unit: "${I}"`);const{data:O,error:H}=await be.from("INGREDIENT").insert([{ingred_name:re.name.trim(),unit:I}]).select("ingred_id").single();if(H){console.error("Error creating ingredient:",H);continue}$=O.ingred_id,console.log(`Created new ingredient with ID ${$} for "${re.name}"`)}else{$=fe[0].ingred_id;const O=fe[0].unit;if(I!==O){console.log(`Updating unit for ingredient "${re.name}" from "${O}" to "${I}"`);const{error:H}=await be.from("INGREDIENT").update({unit:I}).eq("ingred_id",$);H&&console.error("Error updating ingredient unit:",H)}console.log(`Found existing ingredient ID ${$} for "${re.name}"`)}const{error:te}=await be.from("INVENTORY").insert([{stock_quantity:parseFloat(re.quantity),last_updated:new Date().toISOString().split("T")[0],ingred_id:$}]);te?(console.error("Insert error:",te),ve.error(`Failed to save inventory item "${re.name}": ${te.message}`,{duration:4e3,position:"top-center"})):console.log(`Successfully inserted new row for "${re.name}"`)}catch(fe){console.error("Error processing new row:",fe)}}for(const[re,fe]of Object.entries(d)){console.log(`Processing edited row ${re}:`,fe),console.log("Values object keys:",Object.keys(fe)),console.log("Values object:",fe);const P=n.find(H=>H.inven_id===parseInt(re));if(!P){console.warn(`Original row not found for ID ${re}`);continue}const $={name:fe.name||P.name,quantity:fe.quantity!==void 0?fe.quantity:P.quantity,unit:fe.unit||P.unit||"pcs"};console.log(`Merged data for row ${re}:`,$);const{quantity:I,name:te,unit:O}=$;if(!te||I===void 0){console.warn("Skipping incomplete edited row:",{id:re,mergedData:$});continue}try{console.log(`Looking for ingredient: "${te.trim()}"`);const{data:H,error:ue}=await be.from("INGREDIENT").select("ingred_id, unit").ilike("ingred_name",te.trim());if(ue){console.error("Ingredient fetch error (update):",ue);continue}console.log("Found ingredients:",H);let ne,xe=O||"pcs";if(!H||H.length===0){console.log(`Creating new ingredient: "${te.trim()}" with unit: "${xe}"`);const{data:we,error:ze}=await be.from("INGREDIENT").insert([{ingred_name:te.trim(),unit:xe}]).select("ingred_id").single();if(ze){console.error("Error creating ingredient:",ze);continue}ne=we.ingred_id,console.log(`Created new ingredient with ID ${ne} for "${te}"`)}else{ne=H[0].ingred_id;const we=H[0].unit;if(xe!==we){console.log(`Updating unit for ingredient "${te}" from "${we}" to "${xe}"`);const{error:ze}=await be.from("INGREDIENT").update({unit:xe}).eq("ingred_id",ne);ze&&console.error("Error updating ingredient unit:",ze)}console.log(`Found existing ingredient ID ${ne} for "${te}"`)}const{error:Ae}=await be.from("INVENTORY").update({stock_quantity:parseFloat(I),last_updated:new Date().toISOString().split("T")[0],ingred_id:ne}).eq("inven_id",re);Ae?(console.error(`Update error for inven_id ${re}:`,Ae),ve.error(`Failed to update inventory item: ${Ae.message}`,{duration:4e3,position:"top-center"})):console.log(`Successfully updated row with inven_id ${re}`)}catch(H){console.error("Error processing updated row:",H)}}f({}),s([]),u({id:null,field:null}),a(null),console.log("Refreshing inventory...");const{data:q,error:oe}=await be.from("INVENTORY").select(`
        inven_id,
        stock_quantity,
        last_updated,
        ingred_id,
        INGREDIENT (
          ingred_name,
          unit
        )
      `);if(oe)console.error("Refresh fetch error:",oe);else if(q){const re=q.map(fe=>({inven_id:fe.inven_id,quantity:fe.stock_quantity,updated:fe.last_updated,name:fe.INGREDIENT?.ingred_name,unit:fe.INGREDIENT?.unit,ingred_id:fe.ingred_id}));console.log("Inventory refreshed:",re),e(re)}console.log("=== SAVE CHANGES END ==="),ve.success("Inventory saved successfully!",{duration:3e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}),N(!1)},Y=q=>{a(oe=>oe===q?null:q)},W=(q,oe,re)=>{q.toString().startsWith("new-")?s(fe=>fe.map(P=>P.inven_id===q?{...P,[oe]:re}:P)):f(fe=>({...fe,[q]:{...fe[q],[oe]:re}}))},K=[...t,...n].filter(q=>(q.name||"").toLowerCase().includes(D.toLowerCase()));return h.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 w-full border-2 border-[#AF524D] min-h-[80vh] max-h-[80vh] flex flex-col",children:[h.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center mb-8",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"Inventory Management"}),h.jsx("p",{className:"text-gray-600",children:"Manage your bakery ingredients and stock levels"})]}),h.jsx("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:h.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[h.jsx("input",{type:"text",placeholder:"Search by ingredient name...",value:D,onChange:q=>k(q.target.value),className:"w-full sm:w-80 border-2 border-gray-200 rounded-xl px-5 py-3 pl-12 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base"}),h.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})})]}),h.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50 rounded-xl border border-gray-200",children:h.jsx("div",{className:"overflow-auto h-full max-h-[45vh] pb-4",children:h.jsxs("table",{className:"w-full border-collapse table-fixed",children:[h.jsx("thead",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white sticky top-0 z-20",children:h.jsxs("tr",{children:[h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/4",children:"Item Name"}),h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/4",children:"Quantity"}),h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/4",children:"Unit"}),h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/4",children:"Last Updated"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-200",children:K.map(q=>{const oe=r===q.inven_id,re=d[q.inven_id]||{},fe=l.id===q.inven_id&&l.field==="name";return h.jsxs("tr",{className:`transition-all duration-200 cursor-pointer ${oe?"bg-blue-50 border-l-4 border-l-blue-500 shadow-md":"hover:bg-gray-100 border-l-4 border-l-transparent"}`,onClick:()=>Y(q.inven_id),children:[h.jsx("td",{className:"py-6 px-6 align-top",children:h.jsx("div",{className:"space-y-2",children:fe?h.jsx("input",{type:"text",className:"border-2 border-gray-200 rounded-lg px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D]",value:m,onChange:P=>v(P.target.value),onBlur:()=>{W(q.inven_id,"name",m),u({id:null,field:null})},autoFocus:!0}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h4",{className:"font-semibold text-gray-900 text-base",children:re.name??q.name}),h.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:P=>{P.stopPropagation(),u({id:q.inven_id,field:"name"}),v(re.name??q.name)},children:"Edit"})]})})}),h.jsx("td",{className:"py-6 px-6 align-top",children:h.jsx("div",{className:"space-y-2",children:l.id===q.inven_id&&l.field==="quantity"?h.jsx("input",{type:"number",className:"border-2 border-gray-200 rounded-lg px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D]",value:y,onChange:P=>b(P.target.value),onBlur:()=>{W(q.inven_id,"quantity",y),u({id:null,field:null})},autoFocus:!0}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-lg font-semibold text-gray-900",children:re.quantity??q.quantity}),h.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:P=>{P.stopPropagation(),u({id:q.inven_id,field:"quantity"}),b(re.quantity??q.quantity)},children:"Edit"})]})})}),h.jsx("td",{className:"py-6 px-6 align-top",children:h.jsx("div",{className:"space-y-2",children:l.id===q.inven_id&&l.field==="unit"?h.jsx("input",{type:"text",className:"border-2 border-gray-200 rounded-lg px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D]",value:w,onChange:P=>_(P.target.value),onBlur:()=>{W(q.inven_id,"unit",w),u({id:null,field:null})},autoFocus:!0}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800",children:re.unit??q.unit??"pcs"}),h.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:P=>{P.stopPropagation(),u({id:q.inven_id,field:"unit"}),_(re.unit??q.unit??"pcs")},children:"Edit"})]})})}),h.jsx("td",{className:"py-6 px-6 align-top",children:h.jsx("div",{className:"space-y-2",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm text-gray-600",children:new Date(q.updated).toLocaleDateString()}),h.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})]})})})]},q.inven_id)})})]})})}),h.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-between gap-4",children:[h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{className:"bg-[#AF524D] hover:bg-[#8B3A3A] text-white px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:L,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Item"]})}),h.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${r?"bg-red-600 hover:bg-red-700 text-white hover:shadow-xl transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:A,disabled:!r,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Item"]})})]}),h.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${M?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white hover:shadow-xl transform hover:-translate-y-0.5"}`,onClick:B,disabled:M,children:h.jsx("div",{className:"flex items-center gap-2",children:M?h.jsxs(h.Fragment,{children:[h.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving Changes..."]}):h.jsxs(h.Fragment,{children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save All Changes"]})})})]})]})},F8=n=>n?n.startsWith("http://")||n.startsWith("https://")?n:be.storage.from("cake").getPublicUrl(n).data.publicUrl:null,U8=()=>{const[n,e]=j.useState([]),[t,s]=j.useState([]),[r,a]=j.useState(null),[l,u]=j.useState({id:null,field:null}),[d,f]=j.useState({}),[m,v]=j.useState(""),[y,b]=j.useState(""),[w,_]=j.useState(""),[T,S]=j.useState(""),[D,k]=j.useState(null),[M,N]=j.useState(""),[L,A]=j.useState(!1),[B,Y]=j.useState(null),[W,K]=j.useState(""),[q,oe]=j.useState(!1),[re,fe]=j.useState(""),[P,$]=j.useState("");j.useEffect(()=>{(async()=>{const{data:_e,error:Te}=await be.from("CAKE").select("*").order("name");Te?console.error("Error fetching cakes:",Te):(console.log("Fetched cakes from database:",_e),e(_e||[]))})()},[]);const I=ye=>{a(_e=>_e===ye?null:ye)},te=()=>{const ye=`new-${Date.now()}`;s([...t,{id:ye,name:"New Cake",theme:"Theme",description:"Description",tier:1,price:0,cake_img:"",isNew:!0}])},O=async()=>{if(!r)return;if(r.toString().startsWith("new-"))s(t.filter(_e=>_e.id!==r));else try{const{error:_e}=await be.from("CAKE").delete().eq("cake_id",r);if(_e){console.error("Delete error:",_e);return}e(n.filter(Te=>Te.cake_id!==r))}catch(_e){console.error("Error in delete operation:",_e)}a(null)},H=(ye,_e,Te)=>{console.log(`handleFieldChange called: id=${ye}, field=${_e}, value=${Te}`);let V=Te;_e==="tier"?V=parseInt(Te)||1:_e==="price"&&(V=parseFloat(Te)||0),ye&&ye.toString().startsWith("new-")?s(pe=>pe.map(je=>je.id===ye?{...je,[_e]:V}:je)):f(pe=>{const je={...pe,[ye]:{...pe[ye],[_e]:V}};return console.log(`Updated editedValues for ID ${ye}:`,je[ye]),je})},ue=(ye,_e)=>{Y(ye),K(_e),A(!0)},ne=()=>{B&&(H(B,"description",W),A(!1),Y(null),K(""))},xe=()=>{A(!1),Y(null),K("")},Ae=async(ye,_e)=>{const Te=ye.target.files[0];if(Te)try{k(_e);const ie=[...n,...t].find(et=>et.cake_id===_e||et.id===_e)?.name||"cake",pe=Te.name.split(".").pop(),he=`${ie.replace(/[^a-zA-Z0-9]/g,"_").toLowerCase()}_${Date.now()}.${pe}`,{error:Be}=await be.storage.from("cake").upload(he,Te);if(Be){console.error("Error uploading image:",Be),k(null);return}const{data:{publicUrl:We}}=be.storage.from("cake").getPublicUrl(he);H(_e,"cake_img",We),k(null),console.log("Image uploaded successfully:",We),console.log("Stored URL in database:",We),ve.success("Image uploaded successfully!",{duration:2e3,position:"top-center"})}catch(V){console.error("Error in image upload:",V),k(null),ve.error("Failed to upload image. Please try again.",{duration:4e3,position:"top-center"})}},we=async()=>{if(q)return;oe(!0),console.log("=== SAVE CAKES CHANGES START ==="),console.log("New rows to save:",t),console.log("Edited rows to save:",d);for(const Te of t){if(console.log("Processing new cake:",Te),!Te.name){console.warn("Skipping incomplete new cake:",Te);continue}try{const{error:V}=await be.from("CAKE").insert([{name:Te.name,theme:Te.theme,description:Te.description,tier:parseInt(Te.tier)||1,price:parseFloat(Te.price)||0,cake_img:Te.cake_img||""}]);V?(console.error("Insert error:",V),ve.error(`Failed to save cake "${Te.name}": ${V.message}`,{duration:4e3,position:"top-center"})):console.log(`Successfully inserted new cake: "${Te.name}"`)}catch(V){console.error("Error processing new cake:",V)}}console.log("All editedValues before processing:",d);for(const[Te,V]of Object.entries(d)){if(console.log(`Processing edited cake ${Te}:`,V),!Te||Te==="undefined"){console.warn("Skipping row with invalid ID:",Te);continue}const ie=n.find(pe=>pe.cake_id===parseInt(Te)||pe.cake_id===Te);console.log(`Original row for ID ${Te}:`,ie);try{const pe={name:V.name!==void 0?V.name:ie?.name,theme:V.theme!==void 0?V.theme:ie?.theme,description:V.description!==void 0?V.description:ie?.description,tier:V.tier!==void 0?parseInt(V.tier)||1:ie?.tier,price:V.price!==void 0?parseFloat(V.price)||0:ie?.price,cake_img:V.cake_img!==void 0?V.cake_img:ie?.cake_img||""};console.log(`Update data for cake ID ${Te}:`,pe);const{error:je}=await be.from("CAKE").update(pe).eq("cake_id",Te);je?(console.error(`Update error for cake ID ${Te}:`,je),ve.error(`Failed to update cake: ${je.message}`,{duration:4e3,position:"top-center"})):console.log(`Successfully updated cake with ID ${Te}`)}catch(pe){console.error("Error processing updated cake:",pe)}}f({}),s([]),u({id:null,field:null}),a(null),console.log("Refreshing cakes...");const{data:ye,error:_e}=await be.from("CAKE").select("*").order("name");_e?console.error("Refresh fetch error:",_e):ye&&(console.log("Cakes refreshed:",ye),e(ye)),console.log("=== SAVE CAKES CHANGES END ==="),ve.success("Cakes saved successfully!",{duration:3e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}),oe(!1)},ze=[...t,...n].filter(ye=>{const _e=ye.name||"",Te=ye.theme||"",V=ye.tier||1,ie=_e.toLowerCase().includes(M.toLowerCase()),pe=re===""||Te.toLowerCase().includes(re.toLowerCase()),je=P===""||V.toString()===P;return ie&&pe&&je}),Ue=[...new Set([...n,...t].map(ye=>ye.theme).filter(Boolean))],dt=[...new Set([...n,...t].map(ye=>ye.tier).filter(Boolean))].sort((ye,_e)=>ye-_e);return h.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 w-full border-2 border-[#AF524D] min-h-[80vh] max-h-[80vh] flex flex-col",children:[h.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center mb-8",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"Cakes Management"}),h.jsx("p",{className:"text-gray-600",children:"Manage your cake catalog and designs"})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:[h.jsxs("div",{className:"relative",children:[h.jsxs("select",{value:re,onChange:ye=>fe(ye.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-3 pl-10 pr-8 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base appearance-none bg-white",children:[h.jsx("option",{value:"",children:"All Themes"}),Ue.map(ye=>h.jsx("option",{value:ye,children:ye},ye))]}),h.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),h.jsx("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),h.jsxs("div",{className:"relative",children:[h.jsxs("select",{value:P,onChange:ye=>$(ye.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-3 pl-10 pr-8 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base appearance-none bg-white",children:[h.jsx("option",{value:"",children:"All Tiers"}),dt.map(ye=>h.jsxs("option",{value:ye,children:[ye," Tier",ye>1?"s":""]},ye))]}),h.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),h.jsx("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",placeholder:"Search by cake name...",value:M,onChange:ye=>N(ye.target.value),className:"border-2 border-gray-200 rounded-xl px-5 py-3 pl-12 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base"}),h.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})]}),h.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50 rounded-xl border border-gray-200",children:h.jsx("div",{className:"overflow-auto h-full max-h-[45vh] pb-4",children:h.jsxs("table",{className:"w-full border-collapse table-fixed",children:[h.jsx("thead",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white sticky top-0 z-20",children:h.jsxs("tr",{children:[h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Cake Name"}),h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Theme"}),h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Description"}),h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Tiers"}),h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Price"}),h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Cake Image"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-200",children:ze.map(ye=>{const _e=ye.cake_id||ye.id,Te=r===_e,V=d[_e]||{},ie=l.id===_e&&l.field==="name";return h.jsxs("tr",{className:`transition-all duration-200 cursor-pointer ${Te?"bg-blue-50 border-l-4 border-l-blue-500 shadow-md":"hover:bg-gray-100 border-l-4 border-l-transparent"}`,onClick:()=>I(_e),children:[h.jsx("td",{className:"py-2 px-4",children:h.jsx("div",{className:"flex items-center gap-2",children:ie?h.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-40",value:m,onChange:pe=>v(pe.target.value),onBlur:()=>{H(_e,"name",m),u({id:null,field:null})},autoFocus:!0}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex-grow truncate",children:V.name??ye.name}),h.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:pe=>{pe.stopPropagation(),u({id:_e,field:"name"}),v(V.name??ye.name)},children:h.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),h.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-name-${_e}`)})]})})}),h.jsx("td",{className:"py-2 px-4",children:h.jsx("div",{className:"flex items-center gap-2",children:l.id===_e&&l.field==="theme"?h.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-20",value:y,onChange:pe=>b(pe.target.value),onBlur:()=>{H(_e,"theme",y),u({id:null,field:null})},autoFocus:!0}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex-grow truncate",children:V.theme??ye.theme}),h.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:pe=>{pe.stopPropagation(),u({id:_e,field:"theme"}),b(V.theme??ye.theme)},children:h.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),h.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-theme-${_e}`)})]})})}),h.jsx("td",{className:"py-2 px-4",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"flex-grow truncate",children:V.description??ye.description}),h.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:pe=>{pe.stopPropagation(),ue(_e,V.description??ye.description)},children:h.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),h.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-description-${_e}`)})]})}),h.jsx("td",{className:"py-2 px-4",children:h.jsx("div",{className:"flex items-center gap-2",children:l.id===_e&&l.field==="tier"?h.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-16",value:T,onChange:pe=>S(pe.target.value),onBlur:()=>{H(_e,"tier",parseInt(T)||1),u({id:null,field:null})},autoFocus:!0}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"truncate",children:V.tier??ye.tier}),h.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:pe=>{pe.stopPropagation(),u({id:_e,field:"tier"}),S(V.tier??ye.tier)},children:h.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),h.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-tier-${_e}`)})]})})}),h.jsx("td",{className:"py-2 px-4",children:h.jsx("div",{className:"flex items-center gap-2",children:l.id===_e&&l.field==="price"?h.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-16",value:w,onChange:pe=>_(pe.target.value),onBlur:()=>{H(_e,"price",parseFloat(w)||0),u({id:null,field:null})},autoFocus:!0}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"truncate",children:["",V.price??ye.price]}),h.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:pe=>{pe.stopPropagation(),u({id:_e,field:"price"}),_(V.price??ye.price)},children:h.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),h.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-price-${_e}`)})]})})}),h.jsx("td",{className:"py-2 px-4",children:h.jsx("div",{className:"relative",children:D===_e?h.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded border-2 border-dashed border-gray-300 flex items-center justify-center",children:h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#AF524D]"}),h.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Uploading..."})]})}):V.cake_img||ye.cake_img?h.jsxs("div",{className:"relative w-16 h-16 rounded overflow-hidden border border-gray-300 group",children:[h.jsx("img",{src:F8(V.cake_img||ye.cake_img),alt:"Cake",className:"w-full h-full object-cover",onError:pe=>{pe.target.style.display="none",pe.target.nextSibling.style.display="flex"}}),h.jsx("div",{className:"absolute inset-0 bg-gray-200 flex items-center justify-center hidden",children:h.jsx("span",{className:"text-xs text-gray-500",children:"No Image"})}),h.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 flex items-center justify-center",children:h.jsxs("label",{className:"cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[h.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),h.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:pe=>Ae(pe,_e),onClick:pe=>pe.stopPropagation()})]})})]}):h.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded border-2 border-dashed border-gray-300 flex items-center justify-center hover:border-[#AF524D] transition-colors duration-200",children:h.jsxs("label",{className:"cursor-pointer flex flex-col items-center",children:[h.jsx("svg",{className:"w-6 h-6 text-gray-400 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),h.jsx("span",{className:"text-xs text-gray-500",children:"Upload"}),h.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:pe=>Ae(pe,_e),onClick:pe=>pe.stopPropagation()})]})})})})]},_e)})})]})})}),h.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-between gap-4",children:[h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{className:"bg-[#AF524D] hover:bg-[#8B3A3A] text-white px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:te,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Cake"]})}),h.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${r?"bg-red-600 hover:bg-red-700 text-white hover:shadow-xl transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:O,disabled:!r,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Cake"]})})]}),h.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${q?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white hover:shadow-xl transform hover:-translate-y-0.5"}`,onClick:we,disabled:q,children:h.jsx("div",{className:"flex items-center gap-2",children:q?h.jsxs(h.Fragment,{children:[h.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving Changes..."]}):h.jsxs(h.Fragment,{children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save All Changes"]})})})]}),L&&h.jsx("div",{className:"fixed inset-0 bg-gray/50 backdrop-blur-sm flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-w-md border-4 border-[#AF524D] shadow-2xl",children:[h.jsx("h3",{className:"text-lg font-semibold mb-4 text-[#381914]",children:"Edit Description"}),h.jsx("textarea",{value:W,onChange:ye=>K(ye.target.value),className:"w-full h-32 p-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent",placeholder:"Enter cake description...",autoFocus:!0}),h.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[h.jsx("button",{onClick:xe,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",children:"Cancel"}),h.jsx("button",{onClick:ne,className:"px-4 py-2 bg-[#AF524D] text-white rounded-lg hover:bg-[#8B3D3A] transition-colors cursor-pointer",children:"Save"})]})]})})]})},Nl=n=>n?n.startsWith("http://")||n.startsWith("https://")?n:be.storage.from("cake").getPublicUrl(n).data.publicUrl:null,z8=()=>{const[n,e]=j.useState([]),[t,s]=j.useState([]),[r,a]=j.useState(null),[l,u]=j.useState({id:null,field:null}),[d,f]=j.useState({}),[m,v]=j.useState(""),[y,b]=j.useState(""),[w,_]=j.useState(""),[T,S]=j.useState(""),[D,k]=j.useState(""),[M,N]=j.useState(""),[L,A]=j.useState(""),[B,Y]=j.useState(""),[W,K]=j.useState(""),[q,oe]=j.useState([]),[re,fe]=j.useState([]),[P,$]=j.useState(""),[I,te]=j.useState(!1),[O,H]=j.useState(!1),[ue,ne]=j.useState(null),[xe,Ae]=j.useState(!1),[we,ze]=j.useState(null),[Ue,dt]=j.useState(!1),[ye,_e]=j.useState(null),[Te,V]=j.useState(null),[ie,pe]=j.useState(!1);j.useEffect(()=>{(async()=>{const{data:Ee,error:me}=await be.from("ORDER").select(`
          order_id,
          order_date,
          delivery_method,
          order_schedule,
          delivery_address,
          order_status,
          cus_id,
          CUSTOMER (
            cus_id,
            cus_fname,
            cus_lname,
            cus_celno,
            email
          ),
          PAYMENT (
            payment_id,
            payment_method,
            amount_paid,
            payment_date,
            payment_status,
            receipt
          ),
          "CAKE-ORDERS" (
            co_id,
            quantity,
            cake_id,
            CAKE (
              cake_id,
              name,
              cake_img,
              price,
              theme,
              tier,
              description
            )
          )
        `);if(console.log("Query result:",{data:Ee,error:me}),Ee&&Ee.length>0&&(console.log("Raw database response - first order:",Ee[0]),console.log("Customer data from first order:",Ee[0].customer),console.log("Cake orders from first order:",Ee[0]["CAKE-ORDERS"]),console.log("Testing different customer relationship names:"),console.log("data[0].CUSTOMER:",Ee[0].CUSTOMER),console.log("data[0].customer:",Ee[0].customer),console.log("data[0].Customer:",Ee[0].Customer),console.log("data[0].customers:",Ee[0].customers)),me)console.error("Database error:",me);else{const ge=Ee.flatMap(ce=>!ce["CAKE-ORDERS"]||ce["CAKE-ORDERS"].length===0?[{order_id:ce.order_id,co_id:null,customer_id:ce.cus_id,customer:ce.CUSTOMER?`${ce.CUSTOMER.cus_fname} ${ce.CUSTOMER.cus_lname}`:"Unknown Customer",customer_email:ce.CUSTOMER?.email||"N/A",customer_phone:ce.CUSTOMER?.cus_celno||"N/A",cake:"No Cake Assigned",cake_img:null,cake_img_url:null,cake_price:0,cake_theme:"N/A",cake_tier:"N/A",cake_description:"N/A",scheduled_date:ce.order_schedule,order_type:ce.delivery_method,delivery_address:ce.delivery_address||"N/A",cake_id:null,quantity:0,amount_paid:ce.PAYMENT?.[0]?.amount_paid||0,payment_date:ce.PAYMENT?.[0]?.payment_date,payment_status:ce.PAYMENT?.[0]?.payment_status||"Pending",payment_method:ce.PAYMENT?.[0]?.payment_method||"Cash",receipt_path:ce.PAYMENT?.[0]?.receipt,order_status:ce.order_status,order_date:ce.order_date}]:ce["CAKE-ORDERS"].map(Ze=>({order_id:ce.order_id,co_id:Ze.co_id,customer_id:ce.cus_id,customer:ce.CUSTOMER?`${ce.CUSTOMER.cus_fname} ${ce.CUSTOMER.cus_lname}`:"Unknown Customer",customer_email:ce.CUSTOMER?.email||"N/A",customer_phone:ce.CUSTOMER?.cus_celno||"N/A",cake:Ze.CAKE?.name||"Unknown Cake",cake_img:Ze.CAKE?.cake_img,cake_img_url:Nl(Ze.CAKE?.cake_img),cake_price:Ze.CAKE?.price||0,cake_theme:Ze.CAKE?.theme||"N/A",cake_tier:Ze.CAKE?.tier||"N/A",cake_description:Ze.CAKE?.description||"N/A",scheduled_date:ce.order_schedule,order_type:ce.delivery_method,delivery_address:ce.delivery_address||"N/A",cake_id:Ze.cake_id,quantity:Ze.quantity||0,amount_paid:ce.PAYMENT?.[0]?.amount_paid||0,payment_date:ce.PAYMENT?.[0]?.payment_date,payment_status:ce.PAYMENT?.[0]?.payment_status||"Pending",payment_method:ce.PAYMENT?.[0]?.payment_method||"Cash",receipt_path:ce.PAYMENT?.[0]?.receipt,order_status:ce.order_status,order_date:ce.order_date})));ge.length>0&&console.log("Customer info from first row:",{customer:ge[0].customer,customer_id:ge[0].customer_id,customer_email:ge[0].customer_email,customer_phone:ge[0].customer_phone}),e(ge)}})()},[]),j.useEffect(()=>{(async()=>{const{data:Ee,error:me}=await be.from("CAKE").select("cake_id, name, cake_img, price, theme, tier, description").order("name");me?console.error("Error fetching cakes:",me):(oe(Ee||[]),console.log("Available cakes:",Ee))})()},[]),j.useEffect(()=>{(async()=>{const{data:Ee,error:me}=await be.from("CUSTOMER").select("cus_id, cus_fname, cus_lname, email, cus_celno").order("cus_fname");me?console.error("Error fetching customers:",me):(fe(Ee||[]),console.log("Available customers:",Ee))})()},[]);const je=()=>{const se=`new-${Date.now()}`;s([...t,{order_id:se,co_id:se,customer_id:null,customer:"Select Customer",customer_email:"",customer_phone:"",cake:"Select Cake",cake_img:null,cake_img_url:null,cake_price:0,cake_theme:"",cake_tier:"",cake_description:"",scheduled_date:new Date().toISOString().split("T")[0],order_type:"pickup",delivery_address:"Delivery Address",cake_id:null,quantity:1,amount_paid:0,payment_date:new Date().toISOString().split("T")[0],payment_status:"Pending",payment_method:"Cash",receipt_path:null,order_status:"Pending",order_date:new Date().toISOString().split("T")[0],isNew:!0}])},he=async()=>{if(!r)return;if(r.toString().startsWith("new-"))s(t.filter(Ee=>Ee.order_id!==r));else try{const{error:Ee}=await be.from("CAKE-ORDERS").delete().eq("order_id",r);Ee?(console.error("Error deleting order:",Ee),ve.error("Failed to delete order")):(e(n.filter(me=>me.order_id!==r)),a(null),ve.success("Order deleted successfully"))}catch(Ee){console.error("Error deleting order:",Ee),ve.error("Failed to delete order")}},Be=async()=>{te(!0);try{for(const me of t){const ge=q.find($t=>$t.name===me.cake),ce=ge?ge.cake_id:null,Ze=re.find($t=>`${$t.cus_fname} ${$t.cus_lname}`===me.customer),$s=Ze?Ze.cus_id:null,{error:Cr}=await be.from("CAKE-ORDERS").insert({customer_id:$s,cake_id:ce,scheduled_date:me.scheduled_date,order_type:me.order_type,delivery_address:me.delivery_address,amount_paid:parseFloat(me.amount_paid)||0,payment_date:me.payment_date,payment_status:me.payment_status,payment_method:me.payment_method,receipt_path:me.receipt_path});if(Cr){console.error("Error inserting new order:",Cr),ve.error("Failed to save new order"),te(!1);return}}for(const[me,ge]of Object.entries(d)){if(me.toString().startsWith("new-"))continue;const ce={};if(ge.scheduled_date!==void 0&&(ce.scheduled_date=ge.scheduled_date),ge.order_type!==void 0&&(ce.order_type=ge.order_type),ge.delivery_address!==void 0&&(ce.delivery_address=ge.delivery_address),ge.amount_paid!==void 0&&(ce.amount_paid=parseFloat(ge.amount_paid)||0),ge.payment_date!==void 0&&(ce.payment_date=ge.payment_date),ge.payment_status!==void 0&&(ce.payment_status=ge.payment_status),ge.payment_method!==void 0&&(ce.payment_method=ge.payment_method),ge.receipt_path!==void 0&&(ce.receipt_path=ge.receipt_path),ge.cake!==void 0){const Ze=q.find($s=>$s.name===ge.cake);ce.cake_id=Ze?Ze.cake_id:null}if(ge.customer!==void 0){const Ze=re.find($s=>`${$s.cus_fname} ${$s.cus_lname}`===ge.customer);ce.customer_id=Ze?Ze.cus_id:null}if(Object.keys(ce).length>0){const{error:Ze}=await be.from("CAKE-ORDERS").update(ce).eq("order_id",me);if(Ze){console.error("Error updating order:",Ze),ve.error("Failed to update order"),te(!1);return}}}const{data:se,error:Ee}=await be.from("ORDER").select(`
          order_id,
          order_date,
          delivery_method,
          order_schedule,
          delivery_address,
          order_status,
          cus_id,
          CUSTOMER (
            cus_id,
            cus_fname,
            cus_lname,
            cus_celno,
            email
          ),
          PAYMENT (
            payment_id,
            payment_method,
            amount_paid,
            payment_date,
            payment_status,
            receipt
          ),
          "CAKE-ORDERS" (
            co_id,
            quantity,
            cake_id,
            CAKE (
              cake_id,
              name,
              cake_img,
              price,
              theme,
              tier,
              description
            )
          )
        `);if(Ee)console.error("Error refreshing data:",Ee);else{const me=se.flatMap(ge=>!ge["CAKE-ORDERS"]||ge["CAKE-ORDERS"].length===0?[{order_id:ge.order_id,co_id:null,customer_id:ge.cus_id,customer:ge.CUSTOMER?`${ge.CUSTOMER.cus_fname} ${ge.CUSTOMER.cus_lname}`:"Unknown Customer",customer_email:ge.CUSTOMER?.email||"N/A",customer_phone:ge.CUSTOMER?.cus_celno||"N/A",cake:"No Cake Assigned",cake_img:null,cake_img_url:null,cake_price:0,cake_theme:"N/A",cake_tier:"N/A",cake_description:"N/A",scheduled_date:ge.order_schedule,order_type:ge.delivery_method,delivery_address:ge.delivery_address||"N/A",cake_id:null,quantity:0,amount_paid:ge.PAYMENT?.[0]?.amount_paid||0,payment_date:ge.PAYMENT?.[0]?.payment_date,payment_status:ge.PAYMENT?.[0]?.payment_status||"Pending",payment_method:ge.PAYMENT?.[0]?.payment_method||"Cash",receipt_path:ge.PAYMENT?.[0]?.receipt,order_status:ge.order_status,order_date:ge.order_date}]:ge.CAKE-ORDERS.map(ce=>({order_id:ge.order_id,co_id:ce.co_id,customer_id:ge.cus_id,customer:ge.CUSTOMER?`${ge.CUSTOMER.cus_fname} ${ge.CUSTOMER.cus_lname}`:"Unknown Customer",customer_email:ge.CUSTOMER?.email||"N/A",customer_phone:ge.CUSTOMER?.cus_celno||"N/A",cake:ce.CAKE?.name||"Unknown Cake",cake_img:ce.CAKE?.cake_img,cake_img_url:Nl(ce.CAKE?.cake_img),cake_price:ce.CAKE?.price||0,cake_theme:ce.CAKE?.theme||"N/A",cake_tier:ce.CAKE?.tier||"N/A",cake_description:ce.CAKE?.description||"N/A",scheduled_date:ge.order_schedule,order_type:ge.delivery_method,delivery_address:ge.delivery_address||"N/A",cake_id:ce.cake_id,quantity:ce.quantity||0,amount_paid:ge.PAYMENT?.[0]?.amount_paid||0,payment_date:ge.PAYMENT?.[0]?.payment_date,payment_status:ge.PAYMENT?.[0]?.payment_status||"Pending",payment_method:ge.PAYMENT?.[0]?.payment_method||"Cash",receipt_path:ge.PAYMENT?.[0]?.receipt,order_status:ge.order_status,order_date:ge.order_date})));e(me)}s([]),f({}),a(null),ve.success("Changes saved successfully")}catch(se){console.error("Error saving changes:",se),ve.error("Failed to save changes")}finally{te(!1)}},We=se=>{a(se)},et=(se,Ee,me)=>{if(f(ge=>({...ge,[se]:{...ge[se],[Ee]:me}})),Ee==="cake"){const ge=q.find(ce=>ce.name===me);ge&&f(ce=>({...ce,[se]:{...ce[se],cake_img_url:Nl(ge.cake_img),cake_price:ge.price,cake_theme:ge.theme,cake_tier:ge.tier,cake_description:ge.description}}))}},nt=se=>{ue&&(et(ue,"cake",se.name),f(Ee=>({...Ee,[ue]:{...Ee[ue],cake_img_url:Nl(se.cake_img),cake_price:se.price,cake_theme:se.theme,cake_tier:se.tier,cake_description:se.description}}))),H(!1),ne(null)},De=se=>{if(we){const Ee=`${se.cus_fname} ${se.cus_lname}`;et(we,"customer",Ee),f(me=>({...me,[we]:{...me[we],customer_email:se.email,customer_phone:se.cus_celno}}))}Ae(!1),ze(null)},Qe=async()=>{if(!(!Te||!ye)){pe(!0);try{const se=Te.name.split(".").pop(),Ee=`receipt_${ye}_${Date.now()}.${se}`,{error:me}=await be.storage.from("receipts").upload(Ee,Te);if(me)throw me;const{data:{publicUrl:ge}}=be.storage.from("receipts").getPublicUrl(Ee),{error:ce}=await be.from("CAKE-ORDERS").update({receipt_path:ge}).eq("order_id",ye);if(ce)throw ce;e(n.map(Ze=>Ze.order_id===ye?{...Ze,receipt_path:ge}:Ze)),ve.success("Receipt uploaded successfully"),dt(!1),_e(null),V(null)}catch(se){console.error("Error uploading receipt:",se),ve.error("Failed to upload receipt")}finally{pe(!1)}}},jt=[...t,...n].filter(se=>{const Ee=se.customer||"",me=se.cake||"",ge=se.cake_theme||"",ce=se.cake_tier||"";return Ee.toLowerCase().includes(P.toLowerCase())||me.toLowerCase().includes(P.toLowerCase())||ge.toLowerCase().includes(P.toLowerCase())||ce.toLowerCase().includes(P.toLowerCase())});return h.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 w-full border-2 border-[#AF524D] min-h-[80vh] max-h-[80vh] flex flex-col",children:[h.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center mb-8",children:[h.jsx("div",{className:"flex-1",children:h.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"Cake Orders Management"})}),h.jsx("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:h.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[h.jsx("input",{type:"text",placeholder:"Search by customer, cake, theme, or tier...",value:P,onChange:se=>$(se.target.value),className:"w-full sm:w-80 border-2 border-gray-200 rounded-xl px-5 py-3 pl-12 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base"}),h.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})})]}),h.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50 rounded-xl border border-gray-200",children:h.jsx("div",{className:"overflow-auto h-full max-h-[45vh] pb-4",children:h.jsxs("table",{className:"w-full border-collapse table-fixed",children:[h.jsx("thead",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white sticky top-0 z-20",children:h.jsxs("tr",{children:[h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Customer Details"}),h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Cake Information"}),h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Order Details"}),h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Schedule & Delivery"}),h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Payment Details"}),h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Receipt"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-200",children:jt.map(se=>{const Ee=r===se.order_id,me=d[se.order_id]||{},ge=l.id===se.order_id&&l.field==="scheduled_date";return l.id===se.order_id&&l.field,l.id===se.order_id&&l.field,l.id===se.order_id&&l.field,l.id===se.order_id&&l.field,l.id===se.order_id&&l.field,l.id===se.order_id&&l.field,h.jsxs("tr",{className:`transition-all duration-200 cursor-pointer ${Ee?"bg-blue-50 border-l-4 border-l-blue-500 shadow-md":"hover:bg-gray-100 border-l-4 border-l-transparent"}`,onClick:()=>We(se.order_id),children:[h.jsx("td",{className:"py-6 px-6 align-top",children:h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h4",{className:"font-semibold text-gray-900 text-base",children:me.customer??se.customer}),h.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium px-3 py-1 rounded-lg hover:bg-blue-50 transition-colors",onClick:ce=>{ce.stopPropagation(),ze(se.order_id),Ae(!0)},children:"Edit"})]}),h.jsxs("div",{className:"space-y-2 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),me.customer_email??se.customer_email]}),h.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),me.customer_phone??se.customer_phone]})]})]})}),h.jsx("td",{className:"py-6 px-6 align-top",children:h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"w-16 h-16 flex-shrink-0",children:[me.cake_img_url||se.cake_img_url?h.jsx("img",{src:me.cake_img_url||se.cake_img_url,alt:me.cake||se.cake||"Cake",className:"w-full h-full object-cover rounded-lg border-2 border-gray-200 shadow-sm",onError:ce=>{ce.target.style.display="none",ce.target.nextSibling.style.display="flex"}}):null,(!(me.cake_img_url||se.cake_img_url)||(me.cake_img_url||se.cake_img_url)==="")&&h.jsx("div",{className:"w-full h-full bg-gray-200 rounded-lg border-2 border-gray-300 flex items-center justify-center text-gray-500 text-xs font-medium",children:"No Image"})]}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h4",{className:"font-semibold text-gray-900 text-base truncate",children:me.cake??se.cake}),h.jsxs("p",{className:"text-lg font-bold text-[#AF524D]",children:["",(me.cake_price??se.cake_price).toLocaleString()]}),h.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:me.cake_description??se.cake_description})]})]}),h.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium px-3 py-1 rounded-lg hover:bg-blue-50 transition-colors",onClick:ce=>{ce.stopPropagation(),ne(se.order_id),H(!0)},children:"Change Cake"})]})}),h.jsx("td",{className:"py-6 px-6 align-top",children:h.jsxs("div",{className:"space-y-2 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9zm9-3h-2v3H8V6h8z"})}),h.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Quantity:"})]}),h.jsx("p",{className:"text-base font-medium text-gray-900",children:me.quantity??se.quantity}),h.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l3-7m3 7V4M12 10V2m0 14a2 2 0 100-4 2 2 0 000 4zm-8-6a3 3 0 11-6 0 3 3 0 016 0z"})}),h.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Theme:"})]}),h.jsx("p",{className:"text-base font-medium text-gray-900",children:me.cake_theme??se.cake_theme}),h.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H7a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2"})}),h.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tier:"})]}),h.jsx("p",{className:"text-base font-medium text-gray-900",children:me.cake_tier??se.cake_tier}),h.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),h.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Order Status:"})]}),h.jsx("p",{className:"text-base font-medium text-gray-900",children:me.order_status??se.order_status})]})}),h.jsx("td",{className:"py-6 px-6 align-top",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),h.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Scheduled Date:"})]}),ge?h.jsx("input",{type:"date",className:"border-2 border-gray-200 rounded-lg px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D]",value:w,onChange:ce=>_(ce.target.value),onBlur:()=>{et(se.order_id,"scheduled_date",w),u({id:null,field:null})},autoFocus:!0}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:"text-base font-medium text-gray-900",children:me.scheduled_date?new Date(me.scheduled_date).toLocaleDateString():new Date(se.scheduled_date).toLocaleDateString()}),h.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:ce=>{ce.stopPropagation(),u({id:se.order_id,field:"scheduled_date"}),_(me.scheduled_date??se.scheduled_date)},children:"Edit"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),h.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Order Type:"})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${(me.order_type??se.order_type)==="Pickup"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:me.order_type??se.order_type}),h.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:ce=>{ce.stopPropagation(),u({id:se.order_id,field:"order_type"}),S(me.order_type??se.order_type)},children:"Edit"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),h.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Delivery Address:"})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:"text-sm text-gray-600 max-w-32 truncate",children:me.delivery_address??se.delivery_address}),h.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:ce=>{ce.stopPropagation(),u({id:se.order_id,field:"delivery_address"}),k(me.delivery_address??se.delivery_address)},children:"Edit"})]})]})]})}),h.jsx("td",{className:"py-6 px-6 align-top",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),h.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Amount:"})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("p",{className:"text-xl font-bold text-[#AF524D]",children:["",(me.amount_paid??se.amount_paid).toLocaleString()]}),h.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:ce=>{ce.stopPropagation(),u({id:se.order_id,field:"amount_paid"}),N(me.amount_paid??se.amount_paid)},children:"Edit"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m2 0h1m-1 0h1m1 0h1m-1 0h1m1 0h1m-1 0h1m1 0h1M7 15h1m2 0h1m-1 0h1m1 0h1m-1 0h1m1 0h1m-1 0h1m1 0h1"})}),h.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Payment Method:"})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm font-medium",children:me.payment_method??se.payment_method}),h.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:ce=>{ce.stopPropagation(),u({id:se.order_id,field:"payment_method"}),A(me.payment_method??se.payment_method)},children:"Edit"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Payment Status:"})]}),h.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${(me.payment_status??se.payment_status)==="Paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:me.payment_status??se.payment_status})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),h.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Payment Date:"})]}),h.jsx("p",{className:"text-sm text-gray-600",children:me.payment_date?new Date(me.payment_date).toLocaleDateString():se.payment_date?new Date(se.payment_date).toLocaleDateString():"Not specified"})]})]})}),h.jsx("td",{className:"py-6 px-6 align-top",children:h.jsxs("div",{className:"space-y-3",children:[h.jsx("div",{className:"text-center",children:me.receipt_path??se.receipt_path?h.jsxs("div",{className:"flex flex-col items-center gap-2",children:[h.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:h.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),h.jsx("span",{className:"text-sm font-medium text-green-700",children:"Receipt Uploaded"})]}):h.jsxs("div",{className:"flex flex-col items-center gap-2",children:[h.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:h.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),h.jsx("span",{className:"text-sm font-medium text-gray-500",children:"No Receipt"})]})}),h.jsx("button",{className:"w-full text-blue-600 hover:text-blue-800 text-sm font-medium px-4 py-2 rounded-lg hover:bg-blue-50 transition-colors border border-blue-200",onClick:ce=>{ce.stopPropagation(),_e(se.order_id),dt(!0)},children:me.receipt_path??se.receipt_path?"Change Receipt":"Upload Receipt"})]})})]},se.order_id)})})]})})}),h.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-between gap-4",children:[h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{className:"bg-[#AF524D] hover:bg-[#8B3A3A] text-white px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:je,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Order"]})}),h.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${r?"bg-red-600 hover:bg-red-700 text-white hover:shadow-xl transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:he,disabled:!r,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Order"]})})]}),h.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${I?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white hover:shadow-xl transform hover:-translate-y-0.5"}`,onClick:Be,disabled:I,children:h.jsx("div",{className:"flex items-center gap-2",children:I?h.jsxs(h.Fragment,{children:[h.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving Changes..."]}):h.jsxs(h.Fragment,{children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save All Changes"]})})})]}),O&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-2xl p-8 w-full max-w-6xl max-h-[90vh] overflow-y-auto border-2 border-[#AF524D] shadow-2xl",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-2xl font-bold text-[#381914]",children:"Select a Cake"}),h.jsx("p",{className:"text-gray-600 mt-1",children:"Choose from available cakes in the catalog"})]}),h.jsx("button",{onClick:()=>{H(!1),ne(null)},className:"text-gray-500 hover:text-gray-700 text-3xl font-bold cursor-pointer hover:bg-gray-100 rounded-full w-10 h-10 flex items-center justify-center transition-colors",children:""})]}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:q.map(se=>h.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-4 cursor-pointer hover:border-[#AF524D] hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1",onClick:()=>nt(se),children:[h.jsxs("div",{className:"aspect-square mb-4",children:[se.cake_img?h.jsx("img",{src:Nl(se.cake_img),alt:se.name,className:"w-full h-full object-cover rounded-lg border-2 border-gray-200",onError:Ee=>{Ee.target.style.display="none",Ee.target.nextSibling.style.display="flex"}}):null,(!se.cake_img||se.cake_img==="")&&h.jsx("div",{className:"w-full h-full bg-gray-200 rounded-lg border-2 border-gray-300 flex items-center justify-center text-gray-500 text-sm font-medium",children:"No Image"})]}),h.jsx("h4",{className:"font-semibold text-gray-800 text-center text-sm mb-2 truncate",children:se.name}),h.jsxs("div",{className:"space-y-1 text-center",children:[h.jsxs("p",{className:"text-lg font-bold text-[#AF524D]",children:["",se.price?.toLocaleString()||"0"]}),h.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-600",children:[h.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:se.theme}),h.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full",children:[se.tier," Tier"]})]}),h.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:se.description})]})]},se.cake_id))}),h.jsx("div",{className:"mt-8 flex justify-end",children:h.jsx("button",{onClick:()=>{H(!1),ne(null)},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-xl hover:bg-gray-400 transition-colors font-medium",children:"Cancel Selection"})})]})}),xe&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-2xl p-8 w-full max-w-3xl max-h-[90vh] overflow-y-auto border-2 border-[#AF524D] shadow-2xl",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-2xl font-bold text-[#381914]",children:"Select a Customer"}),h.jsx("p",{className:"text-gray-600 mt-1",children:"Choose from registered customers"})]}),h.jsx("button",{onClick:()=>{Ae(!1),ze(null)},className:"text-gray-500 hover:text-gray-700 text-3xl font-bold cursor-pointer hover:bg-gray-100 rounded-full w-10 h-10 flex items-center justify-center transition-colors",children:""})]}),h.jsx("div",{className:"space-y-4",children:re.map(se=>h.jsx("div",{className:"border-2 border-gray-200 rounded-xl p-6 cursor-pointer hover:border-[#AF524D] hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1",onClick:()=>De(se),children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("h4",{className:"font-semibold text-gray-800 text-lg mb-2",children:[se.cus_fname," ",se.cus_lname]}),h.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),se.email]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),se.cus_celno]})]})]}),h.jsx("div",{className:"text-blue-600",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},se.cus_id))}),h.jsx("div",{className:"mt-8 flex justify-end",children:h.jsx("button",{onClick:()=>{Ae(!1),ze(null)},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-xl hover:bg-gray-400 transition-colors font-medium",children:"Cancel Selection"})})]})}),Ue&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-2xl p-8 w-full max-w-md border-2 border-[#AF524D] shadow-2xl",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-2xl font-bold text-[#381914]",children:"Upload Receipt"}),h.jsx("p",{className:"text-gray-600 mt-1",children:"Upload payment receipt for this order"})]}),h.jsx("button",{onClick:()=>{dt(!1),_e(null),V(null)},className:"text-gray-500 hover:text-gray-700 text-3xl font-bold cursor-pointer hover:bg-gray-100 rounded-full w-10 h-10 flex items-center justify-center transition-colors",children:""})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Select Receipt File"}),h.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-[#AF524D] transition-colors",children:[h.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:se=>V(se.target.files[0]),className:"w-full opacity-0 absolute inset-0 cursor-pointer"}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:h.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),h.jsxs("div",{className:"text-sm text-gray-600",children:[h.jsx("span",{className:"font-medium text-[#AF524D]",children:"Click to upload"})," or drag and drop"]}),h.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, PDF up to 10MB"})]})]}),Te&&h.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:h.jsxs("p",{className:"text-sm text-green-800 font-medium",children:["Selected: ",Te.name]})})]}),h.jsxs("div",{className:"flex justify-end gap-3",children:[h.jsx("button",{onClick:()=>{dt(!1),_e(null),V(null)},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-xl hover:bg-gray-400 transition-colors font-medium",children:"Cancel"}),h.jsx("button",{onClick:Qe,disabled:!Te||ie,className:`px-6 py-3 rounded-xl font-medium transition-all duration-200 ${!Te||ie?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}`,children:ie?h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):"Upload Receipt"})]})]})]})})]})},Tm=(n,e=null)=>{if(console.log(" getPublicImageUrl called with path:",n,"and type:",e),!n)return console.log(" No path provided, returning null"),null;if(n.startsWith("http://")||n.startsWith("https://"))return console.log(" Path is already a full URL:",n),n;let t=n;if(!n.includes("/")&&e){const a={"cake base":"cake base",icing:"icing",topping:"topping"}[e];a&&(t=`${a}/${n}`,console.log(" Added folder to path:",t))}const s=be.storage.from("asset").getPublicUrl(t).data.publicUrl;return console.log(" Generated public URL:",s),s},V8=()=>{const[n,e]=j.useState([]),[t,s]=j.useState([]),[r,a]=j.useState(null),[l,u]=j.useState({id:null,field:null}),[d,f]=j.useState({}),[m,v]=j.useState(""),[y,b]=j.useState(""),[w,_]=j.useState(""),[T,S]=j.useState(!1),[D,k]=j.useState(!1),[M,N]=j.useState(null),[L,A]=j.useState(null),[B,Y]=j.useState(!1),W=["cake base","icing","topping"];j.useEffect(()=>{(async()=>{console.log(" Fetching assets from database...");const{data:te,error:O}=await be.from("ASSET").select("*").order("asset_id");if(O)console.error(" Database error:",O),ve.error("Failed to fetch assets");else{console.log(" Raw data from database:",te);const H=te.map(ue=>{const ne=Tm(ue.src,ue.type);return console.log(` Asset ${ue.asset_id}:`,{originalSrc:ue.src,publicUrl:ne,type:ue.type}),{asset_id:ue.asset_id,src:ue.src,src_url:ne,type:ue.type,admin_id:ue.admin_id}});console.log(" Mapped rows:",H),e(H)}})()},[]);const K=()=>{const I=`new-${Date.now()}`;s([...t,{asset_id:I,src:"",src_url:null,type:"cake base",admin_id:null,isNew:!0}])},q=async()=>{if(!r)return;if(r.toString().startsWith("new-"))s(t.filter(te=>te.asset_id!==r));else try{const{error:te}=await be.from("ASSET").delete().eq("asset_id",r);te?(console.error("Error deleting asset:",te),ve.error("Failed to delete asset")):(e(n.filter(O=>O.asset_id!==r)),a(null),ve.success("Asset deleted successfully"))}catch(te){console.error("Error deleting asset:",te),ve.error("Failed to delete asset")}},oe=async()=>{S(!0);try{for(const O of t){const{error:H}=await be.from("ASSET").insert({src:O.src,type:O.type,admin_id:O.admin_id});if(H){console.error("Error inserting new asset:",H),ve.error("Failed to save new asset"),S(!1);return}}for(const[O,H]of Object.entries(d)){if(O.toString().startsWith("new-"))continue;const ue={};if(H.src!==void 0&&(ue.src=H.src),H.type!==void 0&&(ue.type=H.type),Object.keys(ue).length>0){const{error:ne}=await be.from("ASSET").update(ue).eq("asset_id",O);if(ne){console.error("Error updating asset:",ne),ve.error("Failed to update asset"),S(!1);return}}}const{data:I,error:te}=await be.from("ASSET").select("*").order("asset_id");if(te)console.error("Error refreshing data:",te);else{const O=I.map(H=>({asset_id:H.asset_id,src:H.src,src_url:Tm(H.src,H.type),type:H.type,admin_id:H.admin_id}));e(O)}s([]),f({}),a(null),ve.success("Changes saved successfully")}catch(I){console.error("Error saving changes:",I),ve.error("Failed to save changes")}finally{S(!1)}},re=I=>{a(I)},fe=(I,te,O)=>{f(H=>({...H,[I]:{...H[I],[te]:O}}))},P=async()=>{if(!(!L||!M)){Y(!0);try{const te=n.find(Ue=>Ue.asset_id===M)?.type||"misc",H={"cake base":"cake base",icing:"icing",topping:"topping"}[te]||"misc",ue=L.name.split(".").pop(),ne=`asset_${M}_${Date.now()}.${ue}`,xe=`${H}/${ne}`,{error:Ae}=await be.storage.from("asset").upload(xe,L);if(Ae)throw Ae;const{data:{publicUrl:we}}=be.storage.from("asset").getPublicUrl(xe),{error:ze}=await be.from("ASSET").update({src:we}).eq("asset_id",M);if(ze)throw ze;e(n.map(Ue=>Ue.asset_id===M?{...Ue,src:we,src_url:we}:Ue)),ve.success("Asset uploaded successfully"),k(!1),N(null),A(null)}catch(I){console.error("Error uploading asset:",I),ve.error("Failed to upload asset")}finally{Y(!1)}}},$=[...t,...n].filter(I=>{const te=I.src||"",O=I.type||"";return te.toLowerCase().includes(w.toLowerCase())||O.toLowerCase().includes(w.toLowerCase())});return h.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 w-full border-2 border-[#AF524D] min-h-[80vh] max-h-[80vh] flex flex-col",children:[h.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center mb-8",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"Assets Management"}),h.jsx("p",{className:"text-gray-600",children:"Manage your custom cake assets and decorations"})]}),h.jsx("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:h.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[h.jsx("input",{type:"text",placeholder:"Search by source or type...",value:w,onChange:I=>_(I.target.value),className:"w-full sm:w-80 border-2 border-gray-200 rounded-xl px-5 py-3 pl-12 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base"}),h.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})})]}),h.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50 rounded-xl border border-gray-200",children:h.jsx("div",{className:"overflow-auto h-full max-h-[45vh] pb-4",children:h.jsxs("table",{className:"w-full border-collapse table-fixed",children:[h.jsx("thead",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white sticky top-0 z-20",children:h.jsxs("tr",{children:[h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/4",children:"Asset ID"}),h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/4",children:"Preview"}),h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/4",children:"Source"}),h.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/4",children:"Type"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-200",children:$.map(I=>{const te=r===I.asset_id,O=d[I.asset_id]||{},H=l.id===I.asset_id&&l.field==="src",ue=l.id===I.asset_id&&l.field==="type";return h.jsxs("tr",{className:`transition-all duration-200 cursor-pointer ${te?"bg-blue-50 border-l-4 border-l-blue-500 shadow-md":"hover:bg-gray-100 border-l-4 border-l-transparent"}`,onClick:()=>re(I.asset_id),children:[h.jsx("td",{className:"py-6 px-6 align-top",children:h.jsx("div",{className:"space-y-2",children:h.jsx("h4",{className:"font-semibold text-gray-900 text-base",children:I.asset_id})})}),h.jsx("td",{className:"py-6 px-6 align-top",children:h.jsxs("div",{className:"relative w-20 h-20 rounded overflow-hidden border border-gray-300 group",children:[h.jsx("img",{src:Tm(O.src||I.src,O.type||I.type),alt:"Asset preview",className:"w-full h-full object-cover",onError:ne=>{ne.target.style.display="none",ne.target.nextSibling.style.display="flex"}}),h.jsx("div",{className:"absolute inset-0 bg-gray-200 flex items-center justify-center hidden",children:h.jsx("span",{className:"text-xs text-gray-500",children:"No Image"})})]})}),h.jsx("td",{className:"py-6 px-6 align-top",children:h.jsxs("div",{className:"space-y-2",children:[H?h.jsx("input",{type:"text",className:"border-2 border-gray-200 rounded-lg px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D]",value:m,onChange:ne=>v(ne.target.value),onBlur:()=>{fe(I.asset_id,"src",m),u({id:null,field:null})},autoFocus:!0}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:"text-sm text-gray-600 max-w-48 truncate",children:(O.src??I.src)||"No source"}),h.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:ne=>{ne.stopPropagation(),u({id:I.asset_id,field:"src"}),v(O.src??I.src)},children:"Edit"})]}),h.jsx("button",{className:"w-full text-blue-600 hover:text-blue-800 text-sm font-medium px-3 py-2 rounded-lg hover:bg-blue-50 transition-colors border border-blue-200",onClick:ne=>{ne.stopPropagation(),N(I.asset_id),k(!0)},children:"Upload File"})]})}),h.jsx("td",{className:"py-6 px-6 align-top",children:h.jsx("div",{className:"space-y-2",children:ue?h.jsx("select",{className:"border-2 border-gray-200 rounded-lg px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D]",value:y,onChange:ne=>b(ne.target.value),onBlur:()=>{fe(I.asset_id,"type",y),u({id:null,field:null})},autoFocus:!0,children:W.map(ne=>h.jsx("option",{value:ne,children:ne.charAt(0).toUpperCase()+ne.slice(1).replace("_"," ")},ne))}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${(O.type??I.type)==="cake base"?"bg-amber-100 text-amber-800":(O.type??I.type)==="icing"?"bg-pink-100 text-pink-800":(O.type??I.type)==="topping"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:(O.type??I.type)?.charAt(0).toUpperCase()+(O.type??I.type)?.slice(1).replace("_"," ")||"Unknown"}),h.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:ne=>{ne.stopPropagation(),u({id:I.asset_id,field:"type"}),b(O.type??I.type)},children:"Edit"})]})})})]},I.asset_id)})})]})})}),h.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-between gap-4",children:[h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{className:"bg-[#AF524D] hover:bg-[#8B3A3A] text-white px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:K,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Asset"]})}),h.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${r?"bg-red-600 hover:bg-red-700 text-white hover:shadow-xl transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:q,disabled:!r,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Asset"]})})]}),h.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${T?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white hover:shadow-xl transform hover:-translate-y-0.5"}`,onClick:oe,disabled:T,children:h.jsx("div",{className:"flex items-center gap-2",children:T?h.jsxs(h.Fragment,{children:[h.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving Changes..."]}):h.jsxs(h.Fragment,{children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save All Changes"]})})})]}),D&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-2xl p-8 w-full max-w-md border-2 border-[#AF524D] shadow-2xl",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-2xl font-bold text-[#381914]",children:"Upload Asset"}),h.jsx("p",{className:"text-gray-600 mt-1",children:"Upload a new asset file"})]}),h.jsx("button",{onClick:()=>{k(!1),N(null),A(null)},className:"text-gray-500 hover:text-gray-700 text-3xl font-bold cursor-pointer hover:bg-gray-100 rounded-full w-10 h-10 flex items-center justify-center transition-colors",children:""})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Select Asset File"}),h.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-[#AF524D] transition-colors",children:[h.jsx("input",{type:"file",accept:"image/*,.svg,.png,.jpg,.jpeg,.gif",onChange:I=>A(I.target.files[0]),className:"w-full opacity-0 absolute inset-0 cursor-pointer"}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:h.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),h.jsxs("div",{className:"text-sm text-gray-600",children:[h.jsx("span",{className:"font-medium text-[#AF524D]",children:"Click to upload"})," or drag and drop"]}),h.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, SVG, GIF up to 10MB"})]})]}),L&&h.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:h.jsxs("p",{className:"text-sm text-green-800 font-medium",children:["Selected: ",L.name]})})]}),h.jsxs("div",{className:"flex justify-end gap-3",children:[h.jsx("button",{onClick:()=>{k(!1),N(null),A(null)},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-xl hover:bg-gray-400 transition-colors font-medium",children:"Cancel"}),h.jsx("button",{onClick:P,disabled:!L||B,className:`px-6 py-3 rounded-xl font-medium transition-all duration-200 ${!L||B?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}`,children:B?h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):"Upload Asset"})]})]})]})})]})},jm=({children:n,allowedRoles:e})=>{const{session:t,userRole:s,loading:r}=j.useContext(Rp);return r?h.jsx(bo,{message:"Checking authentication..."}):!t||!t.user?h.jsx(zb,{to:"/login"}):e.includes(s)?n:h.jsx(zb,{to:"/"})},I8=()=>{const n=Gs(),e=n.pathname.split("/"),t=e.indexOf("adminpage"),s=t!==-1&&e[t+1]?e[t+1]:"inventory";return console.log(" AdminSidebar Debug:",{fullPath:n.pathname,pathSegments:e,adminIndex:t,currentPath:s,decodedPath:decodeURIComponent(s)}),h.jsx("aside",{className:"w-52 bg-white border-4 border-[#AF524D] py-4 px-2 rounded-2xl max-h-fit",children:h.jsx("ul",{className:"space-y-2",children:[{name:"Inventory",path:"inventory"},{name:"Cake Orders",path:"cake orders"},{name:"Cakes",path:"cakes"},{name:"Custom Cake Assets",path:"custom cake assets"}].map((r,a)=>{const l=decodeURIComponent(s),u=l===r.path;return console.log(` Checking ${r.name}:`,{optPath:r.path,currentPath:s,decodedCurrentPath:l,isActive:u}),h.jsx(It,{to:`/adminpage/${r.path}`,className:`block text-sm px-3 py-2 rounded border transition-all duration-200 ${u?"bg-[#AF524D] text-white border-[#AF524D] shadow-md transform scale-105":"text-gray-700 hover:bg-[#DFBFA6] border-gray-300 hover:border-[#AF524D] hover:text-[#AF524D]"}`,children:r.name},a)})})})},H8=()=>h.jsxs("section",{className:"flex flex-col md:flex-row gap-4 p-4 bg-[#F8E6B4] min-h-screen",children:[h.jsx(I8,{}),h.jsx("div",{className:"flex-1",children:h.jsx(Ak,{})})]}),G8=()=>{const[n,e]=j.useState(null),[t,s]=j.useState(!0),{session:r,signOut:a}=po(),l=Yi();j.useEffect(()=>{(async()=>{if(!r?.user?.id)return;const{data:f,error:m}=await be.from("ADMIN").select("*").eq("admin_uid",r.user.id).single();m?(console.error("Admin not found:",m.message),e(null)):e(f),s(!1)})()},[r]);const u=async()=>{try{await a(),l("/login"),setTimeout(()=>window.scrollTo(0,0),100)}catch(d){console.error("Error signing out:",d)}};return t?h.jsx(bo,{message:"Loading profile..."}):n?h.jsx("section",{className:"bg-gradient-to-t from-[#424220] to-[#F8E6B4] min-h-screen flex flex-col items-center justify-center py-20 px-10",children:h.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] w-full p-10 rounded-2xl shadow-2xl max-w-xl",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h1",{className:"text-3xl font-bold text-black",children:"Admin Profile"}),h.jsx("button",{onClick:u,className:"bg-red-500 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded cursor-pointer",children:"Sign Out"})]}),h.jsx("p",{className:"text-lg text-gray-500",children:"View your admin account information"}),h.jsx("hr",{className:"my-6 border-gray-400"}),h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{className:"block text-gray-500 font-semibold mb-2",children:"Username"}),h.jsx("p",{className:"text-black text-lg",children:n.username})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{className:"block text-gray-500 font-semibold mb-2",children:"Email"}),h.jsx("p",{className:"text-black text-lg",children:n.admin_email})]})]})}):h.jsx("p",{className:"text-center text-red-500 text-lg",children:"No admin data found."})},$8=()=>{const{pathname:n}=Gs();j.useEffect(()=>{const e=()=>{window.scrollTo?window.scrollTo(0,0):window.scroll?window.scroll(0,0):document.documentElement.scrollTop!==void 0?document.documentElement.scrollTop=0:document.body.scrollTop!==void 0&&(document.body.scrollTop=0)};e();const t=setTimeout(e,100);return()=>clearTimeout(t)},[n])};function Y8(){const n=Gs();return h.jsx(aM,{mode:"wait",children:h.jsxs(Nk,{location:n,children:[h.jsx(Zt,{path:"/signup",element:h.jsx(ds,{children:h.jsx(G5,{})})}),h.jsx(Zt,{path:"/login",element:h.jsx(ds,{children:h.jsx(X5,{})})}),h.jsx(Zt,{path:"/reset-password",element:h.jsx(ds,{children:h.jsx(K5,{})})}),h.jsx(Zt,{path:"/",element:h.jsx(ds,{children:h.jsx(W5,{})})}),h.jsx(Zt,{path:"/aboutus",element:h.jsx(ds,{children:h.jsx(Q5,{})})}),h.jsx(Zt,{path:"/contactus",element:h.jsx(ds,{children:h.jsx(dR,{})})}),h.jsx(Zt,{path:"/cakecatalog",element:h.jsx(ds,{children:h.jsx(qP,{})})}),h.jsx(Zt,{path:"/cart",element:h.jsx(ds,{children:h.jsx(WP,{})})}),h.jsx(Zt,{path:"/cakecustomization",element:h.jsx(ds,{children:h.jsx(B8,{})})}),h.jsx(Zt,{path:"/profile",element:h.jsx(jm,{allowedRoles:["customer"],children:h.jsx(ds,{children:h.jsx($P,{})})})}),h.jsxs(Zt,{path:"/adminpage",element:h.jsx(jm,{allowedRoles:["admin"],children:h.jsx(H8,{})}),children:[h.jsx(Zt,{index:!0,element:h.jsx(ds,{children:h.jsx(j_,{})})}),h.jsx(Zt,{path:"inventory",element:h.jsx(ds,{children:h.jsx(j_,{})})}),h.jsx(Zt,{path:"cakes",element:h.jsx(ds,{children:h.jsx(U8,{})})}),h.jsx(Zt,{path:"cake orders",element:h.jsx(ds,{children:h.jsx(z8,{})})}),h.jsx(Zt,{path:"custom cake assets",element:h.jsx(ds,{children:h.jsx(V8,{})})})]}),h.jsx(Zt,{path:"/admin/profile",element:h.jsx(jm,{allowedRoles:["admin"],children:h.jsx(ds,{children:h.jsx(G8,{})})})})]},n.pathname)})}function q8(){return $8(),h.jsxs(h.Fragment,{children:[h.jsx(iO,{position:"top-center",reverseOrder:!1}),h.jsx(I5,{}),h.jsx(Y8,{}),h.jsx(hR,{}),h.jsx(H5,{})]})}BE.createRoot(document.getElementById("root")).render(h.jsx(mN,{children:h.jsx(tA,{children:h.jsx(q8,{})})}));
