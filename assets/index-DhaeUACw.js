(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();function Rp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function k3(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function s(){var n=!1;try{n=this instanceof s}catch{}return n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var n=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(t,s,n.get?n:{enumerable:!0,get:function(){return r[s]}})}),t}var Ym={exports:{}},Ul={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O1;function A3(){if(O1)return Ul;O1=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,n,a){var l=null;if(a!==void 0&&(l=""+a),n.key!==void 0&&(l=""+n.key),"key"in n){a={};for(var d in n)d!=="key"&&(a[d]=n[d])}else a=n;return n=a.ref,{$$typeof:r,type:s,key:l,ref:n!==void 0?n:null,props:a}}return Ul.Fragment=e,Ul.jsx=t,Ul.jsxs=t,Ul}var M1;function E3(){return M1||(M1=1,Ym.exports=A3()),Ym.exports}var c=E3(),qm={exports:{}},Vl={},Xm={exports:{}},Km={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L1;function N3(){return L1||(L1=1,function(r){function e(L,$){var K=L.length;L.push($);e:for(;0<K;){var pe=K-1>>>1,M=L[pe];if(0<n(M,$))L[pe]=$,L[K]=M,K=pe;else break e}}function t(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var $=L[0],K=L.pop();if(K!==$){L[0]=K;e:for(var pe=0,M=L.length,J=M>>>1;pe<J;){var ye=2*(pe+1)-1,te=L[ye],fe=ye+1,re=L[fe];if(0>n(te,K))fe<M&&0>n(re,te)?(L[pe]=re,L[fe]=K,pe=fe):(L[pe]=te,L[ye]=K,pe=ye);else if(fe<M&&0>n(re,K))L[pe]=re,L[fe]=K,pe=fe;else break e}}return $}function n(L,$){var K=L.sortIndex-$.sortIndex;return K!==0?K:L.id-$.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();r.unstable_now=function(){return l.now()-d}}var h=[],f=[],g=1,x=null,v=3,b=!1,w=!1,_=!1,T=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function O(L){for(var $=t(f);$!==null;){if($.callback===null)s(f);else if($.startTime<=L)s(f),$.sortIndex=$.expirationTime,e(h,$);else break;$=t(f)}}function D(L){if(_=!1,O(L),!w)if(t(h)!==null)w=!0,F||(F=!0,G());else{var $=t(f);$!==null&&ie(D,$.startTime-L)}}var F=!1,B=-1,P=5,H=-1;function N(){return T?!0:!(r.unstable_now()-H<P)}function V(){if(T=!1,F){var L=r.unstable_now();H=L;var $=!0;try{e:{w=!1,_&&(_=!1,E(B),B=-1),b=!0;var K=v;try{t:{for(O(L),x=t(h);x!==null&&!(x.expirationTime>L&&N());){var pe=x.callback;if(typeof pe=="function"){x.callback=null,v=x.priorityLevel;var M=pe(x.expirationTime<=L);if(L=r.unstable_now(),typeof M=="function"){x.callback=M,O(L),$=!0;break t}x===t(h)&&s(h),O(L)}else s(h);x=t(h)}if(x!==null)$=!0;else{var J=t(f);J!==null&&ie(D,J.startTime-L),$=!1}}break e}finally{x=null,v=K,b=!1}$=void 0}}finally{$?G():F=!1}}}var G;if(typeof A=="function")G=function(){A(V)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,Q=ne.port2;ne.port1.onmessage=V,G=function(){Q.postMessage(null)}}else G=function(){S(V,0)};function ie(L,$){B=S(function(){L(r.unstable_now())},$)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(L){L.callback=null},r.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<L?Math.floor(1e3/L):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(L){switch(v){case 1:case 2:case 3:var $=3;break;default:$=v}var K=v;v=$;try{return L()}finally{v=K}},r.unstable_requestPaint=function(){T=!0},r.unstable_runWithPriority=function(L,$){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var K=v;v=L;try{return $()}finally{v=K}},r.unstable_scheduleCallback=function(L,$,K){var pe=r.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?pe+K:pe):K=pe,L){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=K+M,L={id:g++,callback:$,priorityLevel:L,startTime:K,expirationTime:M,sortIndex:-1},K>pe?(L.sortIndex=K,e(f,L),t(h)===null&&L===t(f)&&(_?(E(B),B=-1):_=!0,ie(D,K-pe))):(L.sortIndex=M,e(h,L),w||b||(w=!0,F||(F=!0,G()))),L},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(L){var $=v;return function(){var K=v;v=$;try{return L.apply(this,arguments)}finally{v=K}}}}(Km)),Km}var R1;function D3(){return R1||(R1=1,Xm.exports=N3()),Xm.exports}var Zm={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P1;function O3(){if(P1)return qe;P1=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.iterator;function v(M){return M===null||typeof M!="object"?null:(M=x&&M[x]||M["@@iterator"],typeof M=="function"?M:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function T(M,J,ye){this.props=M,this.context=J,this.refs=_,this.updater=ye||b}T.prototype.isReactComponent={},T.prototype.setState=function(M,J){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,J,"setState")},T.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function S(){}S.prototype=T.prototype;function E(M,J,ye){this.props=M,this.context=J,this.refs=_,this.updater=ye||b}var A=E.prototype=new S;A.constructor=E,w(A,T.prototype),A.isPureReactComponent=!0;var O=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function B(M,J,ye,te,fe,re){return ye=re.ref,{$$typeof:r,type:M,key:J,ref:ye!==void 0?ye:null,props:re}}function P(M,J){return B(M.type,J,void 0,void 0,void 0,M.props)}function H(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function N(M){var J={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ye){return J[ye]})}var V=/\/+/g;function G(M,J){return typeof M=="object"&&M!==null&&M.key!=null?N(""+M.key):J.toString(36)}function ne(){}function Q(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ne,ne):(M.status="pending",M.then(function(J){M.status==="pending"&&(M.status="fulfilled",M.value=J)},function(J){M.status==="pending"&&(M.status="rejected",M.reason=J)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function ie(M,J,ye,te,fe){var re=typeof M;(re==="undefined"||re==="boolean")&&(M=null);var le=!1;if(M===null)le=!0;else switch(re){case"bigint":case"string":case"number":le=!0;break;case"object":switch(M.$$typeof){case r:case e:le=!0;break;case g:return le=M._init,ie(le(M._payload),J,ye,te,fe)}}if(le)return fe=fe(M),le=te===""?"."+G(M,0):te,O(fe)?(ye="",le!=null&&(ye=le.replace(V,"$&/")+"/"),ie(fe,J,ye,"",function(Me){return Me})):fe!=null&&(H(fe)&&(fe=P(fe,ye+(fe.key==null||M&&M.key===fe.key?"":(""+fe.key).replace(V,"$&/")+"/")+le)),J.push(fe)),1;le=0;var de=te===""?".":te+":";if(O(M))for(var Ce=0;Ce<M.length;Ce++)te=M[Ce],re=de+G(te,Ce),le+=ie(te,J,ye,re,fe);else if(Ce=v(M),typeof Ce=="function")for(M=Ce.call(M),Ce=0;!(te=M.next()).done;)te=te.value,re=de+G(te,Ce++),le+=ie(te,J,ye,re,fe);else if(re==="object"){if(typeof M.then=="function")return ie(Q(M),J,ye,te,fe);throw J=String(M),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return le}function L(M,J,ye){if(M==null)return M;var te=[],fe=0;return ie(M,te,"","",function(re){return J.call(ye,re,fe++)}),te}function $(M){if(M._status===-1){var J=M._result;J=J(),J.then(function(ye){(M._status===0||M._status===-1)&&(M._status=1,M._result=ye)},function(ye){(M._status===0||M._status===-1)&&(M._status=2,M._result=ye)}),M._status===-1&&(M._status=0,M._result=J)}if(M._status===1)return M._result.default;throw M._result}var K=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function pe(){}return qe.Children={map:L,forEach:function(M,J,ye){L(M,function(){J.apply(this,arguments)},ye)},count:function(M){var J=0;return L(M,function(){J++}),J},toArray:function(M){return L(M,function(J){return J})||[]},only:function(M){if(!H(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},qe.Component=T,qe.Fragment=t,qe.Profiler=n,qe.PureComponent=E,qe.StrictMode=s,qe.Suspense=h,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,qe.__COMPILER_RUNTIME={__proto__:null,c:function(M){return D.H.useMemoCache(M)}},qe.cache=function(M){return function(){return M.apply(null,arguments)}},qe.cloneElement=function(M,J,ye){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var te=w({},M.props),fe=M.key,re=void 0;if(J!=null)for(le in J.ref!==void 0&&(re=void 0),J.key!==void 0&&(fe=""+J.key),J)!F.call(J,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&J.ref===void 0||(te[le]=J[le]);var le=arguments.length-2;if(le===1)te.children=ye;else if(1<le){for(var de=Array(le),Ce=0;Ce<le;Ce++)de[Ce]=arguments[Ce+2];te.children=de}return B(M.type,fe,void 0,void 0,re,te)},qe.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:a,_context:M},M},qe.createElement=function(M,J,ye){var te,fe={},re=null;if(J!=null)for(te in J.key!==void 0&&(re=""+J.key),J)F.call(J,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(fe[te]=J[te]);var le=arguments.length-2;if(le===1)fe.children=ye;else if(1<le){for(var de=Array(le),Ce=0;Ce<le;Ce++)de[Ce]=arguments[Ce+2];fe.children=de}if(M&&M.defaultProps)for(te in le=M.defaultProps,le)fe[te]===void 0&&(fe[te]=le[te]);return B(M,re,void 0,void 0,null,fe)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(M){return{$$typeof:d,render:M}},qe.isValidElement=H,qe.lazy=function(M){return{$$typeof:g,_payload:{_status:-1,_result:M},_init:$}},qe.memo=function(M,J){return{$$typeof:f,type:M,compare:J===void 0?null:J}},qe.startTransition=function(M){var J=D.T,ye={};D.T=ye;try{var te=M(),fe=D.S;fe!==null&&fe(ye,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(pe,K)}catch(re){K(re)}finally{D.T=J}},qe.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},qe.use=function(M){return D.H.use(M)},qe.useActionState=function(M,J,ye){return D.H.useActionState(M,J,ye)},qe.useCallback=function(M,J){return D.H.useCallback(M,J)},qe.useContext=function(M){return D.H.useContext(M)},qe.useDebugValue=function(){},qe.useDeferredValue=function(M,J){return D.H.useDeferredValue(M,J)},qe.useEffect=function(M,J,ye){var te=D.H;if(typeof ye=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return te.useEffect(M,J)},qe.useId=function(){return D.H.useId()},qe.useImperativeHandle=function(M,J,ye){return D.H.useImperativeHandle(M,J,ye)},qe.useInsertionEffect=function(M,J){return D.H.useInsertionEffect(M,J)},qe.useLayoutEffect=function(M,J){return D.H.useLayoutEffect(M,J)},qe.useMemo=function(M,J){return D.H.useMemo(M,J)},qe.useOptimistic=function(M,J){return D.H.useOptimistic(M,J)},qe.useReducer=function(M,J,ye){return D.H.useReducer(M,J,ye)},qe.useRef=function(M){return D.H.useRef(M)},qe.useState=function(M){return D.H.useState(M)},qe.useSyncExternalStore=function(M,J,ye){return D.H.useSyncExternalStore(M,J,ye)},qe.useTransition=function(){return D.H.useTransition()},qe.version="19.1.0",qe}var F1;function Pp(){return F1||(F1=1,Zm.exports=O3()),Zm.exports}var Qm={exports:{}},vs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B1;function M3(){if(B1)return vs;B1=1;var r=Pp();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},n=Symbol.for("react.portal");function a(h,f,g){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:x==null?null:""+x,children:h,containerInfo:f,implementation:g}}var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return vs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,vs.createPortal=function(h,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(h,f,null,g)},vs.flushSync=function(h){var f=l.T,g=s.p;try{if(l.T=null,s.p=2,h)return h()}finally{l.T=f,s.p=g,s.d.f()}},vs.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(h,f))},vs.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},vs.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var g=f.as,x=d(g,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?s.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:x,integrity:v,fetchPriority:b}):g==="script"&&s.d.X(h,{crossOrigin:x,integrity:v,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},vs.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=d(f.as,f.crossOrigin);s.d.M(h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(h)},vs.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,x=d(g,f.crossOrigin);s.d.L(h,g,{crossOrigin:x,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},vs.preloadModule=function(h,f){if(typeof h=="string")if(f){var g=d(f.as,f.crossOrigin);s.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(h)},vs.requestFormReset=function(h){s.d.r(h)},vs.unstable_batchedUpdates=function(h,f){return h(f)},vs.useFormState=function(h,f,g){return l.H.useFormState(h,f,g)},vs.useFormStatus=function(){return l.H.useHostTransitionStatus()},vs.version="19.1.0",vs}var z1;function L3(){if(z1)return Qm.exports;z1=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Qm.exports=M3(),Qm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U1;function R3(){if(U1)return Vl;U1=1;var r=D3(),e=Pp(),t=L3();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function d(i){if(a(i)!==i)throw Error(s(188))}function h(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(s(188));return o!==i?null:i}for(var u=i,m=o;;){var p=u.return;if(p===null)break;var y=p.alternate;if(y===null){if(m=p.return,m!==null){u=m;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===u)return d(p),i;if(y===m)return d(p),o;y=y.sibling}throw Error(s(188))}if(u.return!==m.return)u=p,m=y;else{for(var j=!1,k=p.child;k;){if(k===u){j=!0,u=p,m=y;break}if(k===m){j=!0,m=p,u=y;break}k=k.sibling}if(!j){for(k=y.child;k;){if(k===u){j=!0,u=y,m=p;break}if(k===m){j=!0,m=y,u=p;break}k=k.sibling}if(!j)throw Error(s(189))}}if(u.alternate!==m)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?i:o}function f(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=f(i),o!==null)return o;i=i.sibling}return null}var g=Object.assign,x=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),A=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=V&&i[V]||i["@@iterator"],typeof i=="function"?i:null)}var ne=Symbol.for("react.client.reference");function Q(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ne?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case T:return"Profiler";case _:return"StrictMode";case D:return"Suspense";case F:return"SuspenseList";case H:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case A:return(i.displayName||"Context")+".Provider";case E:return(i._context.displayName||"Context")+".Consumer";case O:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case B:return o=i.displayName||null,o!==null?o:Q(i.type)||"Memo";case P:o=i._payload,i=i._init;try{return Q(i(o))}catch{}}return null}var ie=Array.isArray,L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},pe=[],M=-1;function J(i){return{current:i}}function ye(i){0>M||(i.current=pe[M],pe[M]=null,M--)}function te(i,o){M++,pe[M]=i.current,i.current=o}var fe=J(null),re=J(null),le=J(null),de=J(null);function Ce(i,o){switch(te(le,o),te(re,i),te(fe,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?a1(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=a1(o),i=o1(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ye(fe),te(fe,i)}function Me(){ye(fe),ye(re),ye(le)}function ce(i){i.memoizedState!==null&&te(de,i);var o=fe.current,u=o1(o,i.type);o!==u&&(te(re,i),te(fe,u))}function je(i){re.current===i&&(ye(fe),ye(re)),de.current===i&&(ye(de),Rl._currentValue=K)}var Te=Object.prototype.hasOwnProperty,we=r.unstable_scheduleCallback,Ue=r.unstable_cancelCallback,Ee=r.unstable_shouldYield,$e=r.unstable_requestPaint,Se=r.unstable_now,tt=r.unstable_getCurrentPriorityLevel,$t=r.unstable_ImmediatePriority,gs=r.unstable_UserBlockingPriority,js=r.unstable_NormalPriority,Js=r.unstable_LowPriority,Vs=r.unstable_IdlePriority,er=r.log,ae=r.unstable_setDisableYieldValue,Le=null,be=null;function me(i){if(typeof er=="function"&&ae(i),be&&typeof be.setStrictMode=="function")try{be.setStrictMode(Le,i)}catch{}}var ue=Math.clz32?Math.clz32:fa,rt=Math.log,Br=Math.LN2;function fa(i){return i>>>=0,i===0?32:31-(rt(i)/Br|0)|0}var yr=256,ma=4194304;function zr(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ga(i,o,u){var m=i.pendingLanes;if(m===0)return 0;var p=0,y=i.suspendedLanes,j=i.pingedLanes;i=i.warmLanes;var k=m&134217727;return k!==0?(m=k&~y,m!==0?p=zr(m):(j&=k,j!==0?p=zr(j):u||(u=k&~i,u!==0&&(p=zr(u))))):(k=m&~y,k!==0?p=zr(k):j!==0?p=zr(j):u||(u=m&~i,u!==0&&(p=zr(u)))),p===0?0:o!==0&&o!==p&&(o&y)===0&&(y=p&-p,u=o&-o,y>=u||y===32&&(u&4194048)!==0)?o:p}function Ti(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Hc(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $o(){var i=yr;return yr<<=1,(yr&4194048)===0&&(yr=256),i}function Go(){var i=ma;return ma<<=1,(ma&62914560)===0&&(ma=4194304),i}function pa(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function ki(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Wo(i,o,u,m,p,y){var j=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var k=i.entanglements,R=i.expirationTimes,X=i.hiddenUpdates;for(u=j&~u;0<u;){var oe=31-ue(u),ge=1<<oe;k[oe]=0,R[oe]=-1;var Z=X[oe];if(Z!==null)for(X[oe]=null,oe=0;oe<Z.length;oe++){var ee=Z[oe];ee!==null&&(ee.lane&=-536870913)}u&=~ge}m!==0&&$c(i,m,0),y!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=y&~(j&~o))}function $c(i,o,u){i.pendingLanes|=o,i.suspendedLanes&=~o;var m=31-ue(o);i.entangledLanes|=o,i.entanglements[m]=i.entanglements[m]|1073741824|u&4194090}function Gc(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var m=31-ue(u),p=1<<m;p&o|i[m]&o&&(i[m]|=o),u&=~p}}function Yo(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function q(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ve(){var i=$.p;return i!==0?i:(i=window.event,i===void 0?32:T1(i.type))}function He(i,o){var u=$.p;try{return $.p=i,o()}finally{$.p=u}}var ke=Math.random().toString(36).slice(2),Ae="__reactFiber$"+ke,Re="__reactProps$"+ke,Ge="__reactContainer$"+ke,Ot="__reactEvents$"+ke,Qt="__reactListeners$"+ke,Fe="__reactHandles$"+ke,ct="__reactResources$"+ke,Jt="__reactMarker$"+ke;function tn(i){delete i[Ae],delete i[Re],delete i[Ot],delete i[Qt],delete i[Fe]}function es(i){var o=i[Ae];if(o)return o;for(var u=i.parentNode;u;){if(o=u[Ge]||u[Ae]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=d1(i);i!==null;){if(u=i[Ae])return u;i=d1(i)}return o}i=u,u=i.parentNode}return null}function br(i){if(i=i[Ae]||i[Ge]){var o=i.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return i}return null}function Ur(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function Is(i){var o=i[ct];return o||(o=i[ct]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function ot(i){i[Jt]=!0}var xa=new Set,va={};function ps(i,o){Ye(i,o),Ye(i+"Capture",o)}function Ye(i,o){for(va[i]=o,i=0;i<o.length;i++)xa.add(o[i])}var wr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tr={},At={};function Gt(i){return Te.call(At,i)?!0:Te.call(tr,i)?!1:wr.test(i)?At[i]=!0:(tr[i]=!0,!1)}function sr(i,o,u){if(Gt(o))if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+u)}}function Bt(i,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+u)}}function bt(i,o,u,m){if(m===null)i.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(o,u,""+m)}}var Wt,J0;function ya(i){if(Wt===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);Wt=o&&o[1]||"",J0=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wt+i+J0}var Vh=!1;function Ih(i,o){if(!i||Vh)return"";Vh=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(ee){var Z=ee}Reflect.construct(i,[],ge)}else{try{ge.call()}catch(ee){Z=ee}i.call(ge.prototype)}}else{try{throw Error()}catch(ee){Z=ee}(ge=i())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(ee){if(ee&&Z&&typeof ee.stack=="string")return[ee.stack,Z.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=m.DetermineComponentFrameRoot(),j=y[0],k=y[1];if(j&&k){var R=j.split(`
`),X=k.split(`
`);for(p=m=0;m<R.length&&!R[m].includes("DetermineComponentFrameRoot");)m++;for(;p<X.length&&!X[p].includes("DetermineComponentFrameRoot");)p++;if(m===R.length||p===X.length)for(m=R.length-1,p=X.length-1;1<=m&&0<=p&&R[m]!==X[p];)p--;for(;1<=m&&0<=p;m--,p--)if(R[m]!==X[p]){if(m!==1||p!==1)do if(m--,p--,0>p||R[m]!==X[p]){var oe=`
`+R[m].replace(" at new "," at ");return i.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",i.displayName)),oe}while(1<=m&&0<=p);break}}}finally{Vh=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?ya(u):""}function wj(i){switch(i.tag){case 26:case 27:case 5:return ya(i.type);case 16:return ya("Lazy");case 13:return ya("Suspense");case 19:return ya("SuspenseList");case 0:case 15:return Ih(i.type,!1);case 11:return Ih(i.type.render,!1);case 1:return Ih(i.type,!0);case 31:return ya("Activity");default:return""}}function ex(i){try{var o="";do o+=wj(i),i=i.return;while(i);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function rr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function tx(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function _j(i){var o=tx(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),m=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(j){m=""+j,y.call(this,j)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return m},setValue:function(j){m=""+j},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Wc(i){i._valueTracker||(i._valueTracker=_j(i))}function sx(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),m="";return i&&(m=tx(i)?i.checked?"true":"false":i.value),i=m,i!==u?(o.setValue(i),!0):!1}function Yc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Sj=/[\n"\\]/g;function nr(i){return i.replace(Sj,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Hh(i,o,u,m,p,y,j,k){i.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?i.type=j:i.removeAttribute("type"),o!=null?j==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+rr(o)):i.value!==""+rr(o)&&(i.value=""+rr(o)):j!=="submit"&&j!=="reset"||i.removeAttribute("value"),o!=null?$h(i,j,rr(o)):u!=null?$h(i,j,rr(u)):m!=null&&i.removeAttribute("value"),p==null&&y!=null&&(i.defaultChecked=!!y),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?i.name=""+rr(k):i.removeAttribute("name")}function rx(i,o,u,m,p,y,j,k){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),o!=null||u!=null){if(!(y!=="submit"&&y!=="reset"||o!=null))return;u=u!=null?""+rr(u):"",o=o!=null?""+rr(o):u,k||o===i.value||(i.value=o),i.defaultValue=o}m=m??p,m=typeof m!="function"&&typeof m!="symbol"&&!!m,i.checked=k?i.checked:!!m,i.defaultChecked=!!m,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(i.name=j)}function $h(i,o,u){o==="number"&&Yc(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function ba(i,o,u,m){if(i=i.options,o){o={};for(var p=0;p<u.length;p++)o["$"+u[p]]=!0;for(u=0;u<i.length;u++)p=o.hasOwnProperty("$"+i[u].value),i[u].selected!==p&&(i[u].selected=p),p&&m&&(i[u].defaultSelected=!0)}else{for(u=""+rr(u),o=null,p=0;p<i.length;p++){if(i[p].value===u){i[p].selected=!0,m&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function nx(i,o,u){if(o!=null&&(o=""+rr(o),o!==i.value&&(i.value=o),u==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=u!=null?""+rr(u):""}function ix(i,o,u,m){if(o==null){if(m!=null){if(u!=null)throw Error(s(92));if(ie(m)){if(1<m.length)throw Error(s(93));m=m[0]}u=m}u==null&&(u=""),o=u}u=rr(o),i.defaultValue=u,m=i.textContent,m===u&&m!==""&&m!==null&&(i.value=m)}function wa(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var jj=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ax(i,o,u){var m=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?m?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":m?i.setProperty(o,u):typeof u!="number"||u===0||jj.has(o)?o==="float"?i.cssFloat=u:i[o]=(""+u).trim():i[o]=u+"px"}function ox(i,o,u){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,u!=null){for(var m in u)!u.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?i.setProperty(m,""):m==="float"?i.cssFloat="":i[m]="");for(var p in o)m=o[p],o.hasOwnProperty(p)&&u[p]!==m&&ax(i,p,m)}else for(var y in o)o.hasOwnProperty(y)&&ax(i,y,o[y])}function Gh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cj=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tj=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qc(i){return Tj.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Wh=null;function Yh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var _a=null,Sa=null;function lx(i){var o=br(i);if(o&&(i=o.stateNode)){var u=i[Re]||null;e:switch(i=o.stateNode,o.type){case"input":if(Hh(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+nr(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var m=u[o];if(m!==i&&m.form===i.form){var p=m[Re]||null;if(!p)throw Error(s(90));Hh(m,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(o=0;o<u.length;o++)m=u[o],m.form===i.form&&sx(m)}break e;case"textarea":nx(i,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&ba(i,!!u.multiple,o,!1)}}}var qh=!1;function cx(i,o,u){if(qh)return i(o,u);qh=!0;try{var m=i(o);return m}finally{if(qh=!1,(_a!==null||Sa!==null)&&(Mu(),_a&&(o=_a,i=Sa,Sa=_a=null,lx(o),i)))for(o=0;o<i.length;o++)lx(i[o])}}function qo(i,o){var u=i.stateNode;if(u===null)return null;var m=u[Re]||null;if(m===null)return null;u=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(s(231,o,typeof u));return u}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xh=!1;if(sn)try{var Xo={};Object.defineProperty(Xo,"passive",{get:function(){Xh=!0}}),window.addEventListener("test",Xo,Xo),window.removeEventListener("test",Xo,Xo)}catch{Xh=!1}var In=null,Kh=null,Xc=null;function ux(){if(Xc)return Xc;var i,o=Kh,u=o.length,m,p="value"in In?In.value:In.textContent,y=p.length;for(i=0;i<u&&o[i]===p[i];i++);var j=u-i;for(m=1;m<=j&&o[u-m]===p[y-m];m++);return Xc=p.slice(i,1<m?1-m:void 0)}function Kc(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Zc(){return!0}function dx(){return!1}function Ns(i){function o(u,m,p,y,j){this._reactName=u,this._targetInst=p,this.type=m,this.nativeEvent=y,this.target=j,this.currentTarget=null;for(var k in i)i.hasOwnProperty(k)&&(u=i[k],this[k]=u?u(y):y[k]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Zc:dx,this.isPropagationStopped=dx,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Zc)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Zc)},persist:function(){},isPersistent:Zc}),o}var Ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qc=Ns(Ai),Ko=g({},Ai,{view:0,detail:0}),kj=Ns(Ko),Zh,Qh,Zo,Jc=g({},Ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ef,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Zo&&(Zo&&i.type==="mousemove"?(Zh=i.screenX-Zo.screenX,Qh=i.screenY-Zo.screenY):Qh=Zh=0,Zo=i),Zh)},movementY:function(i){return"movementY"in i?i.movementY:Qh}}),hx=Ns(Jc),Aj=g({},Jc,{dataTransfer:0}),Ej=Ns(Aj),Nj=g({},Ko,{relatedTarget:0}),Jh=Ns(Nj),Dj=g({},Ai,{animationName:0,elapsedTime:0,pseudoElement:0}),Oj=Ns(Dj),Mj=g({},Ai,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Lj=Ns(Mj),Rj=g({},Ai,{data:0}),fx=Ns(Rj),Pj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zj(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Bj[i])?!!o[i]:!1}function ef(){return zj}var Uj=g({},Ko,{key:function(i){if(i.key){var o=Pj[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Kc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Fj[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ef,charCode:function(i){return i.type==="keypress"?Kc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Kc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Vj=Ns(Uj),Ij=g({},Jc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mx=Ns(Ij),Hj=g({},Ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ef}),$j=Ns(Hj),Gj=g({},Ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wj=Ns(Gj),Yj=g({},Jc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),qj=Ns(Yj),Xj=g({},Ai,{newState:0,oldState:0}),Kj=Ns(Xj),Zj=[9,13,27,32],tf=sn&&"CompositionEvent"in window,Qo=null;sn&&"documentMode"in document&&(Qo=document.documentMode);var Qj=sn&&"TextEvent"in window&&!Qo,gx=sn&&(!tf||Qo&&8<Qo&&11>=Qo),px=" ",xx=!1;function vx(i,o){switch(i){case"keyup":return Zj.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yx(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ja=!1;function Jj(i,o){switch(i){case"compositionend":return yx(o);case"keypress":return o.which!==32?null:(xx=!0,px);case"textInput":return i=o.data,i===px&&xx?null:i;default:return null}}function eC(i,o){if(ja)return i==="compositionend"||!tf&&vx(i,o)?(i=ux(),Xc=Kh=In=null,ja=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return gx&&o.locale!=="ko"?null:o.data;default:return null}}var tC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bx(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!tC[i.type]:o==="textarea"}function wx(i,o,u,m){_a?Sa?Sa.push(m):Sa=[m]:_a=m,o=zu(o,"onChange"),0<o.length&&(u=new Qc("onChange","change",null,u,m),i.push({event:u,listeners:o}))}var Jo=null,el=null;function sC(i){t1(i,0)}function eu(i){var o=Ur(i);if(sx(o))return i}function _x(i,o){if(i==="change")return o}var Sx=!1;if(sn){var sf;if(sn){var rf="oninput"in document;if(!rf){var jx=document.createElement("div");jx.setAttribute("oninput","return;"),rf=typeof jx.oninput=="function"}sf=rf}else sf=!1;Sx=sf&&(!document.documentMode||9<document.documentMode)}function Cx(){Jo&&(Jo.detachEvent("onpropertychange",Tx),el=Jo=null)}function Tx(i){if(i.propertyName==="value"&&eu(el)){var o=[];wx(o,el,i,Yh(i)),cx(sC,o)}}function rC(i,o,u){i==="focusin"?(Cx(),Jo=o,el=u,Jo.attachEvent("onpropertychange",Tx)):i==="focusout"&&Cx()}function nC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return eu(el)}function iC(i,o){if(i==="click")return eu(o)}function aC(i,o){if(i==="input"||i==="change")return eu(o)}function oC(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Hs=typeof Object.is=="function"?Object.is:oC;function tl(i,o){if(Hs(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),m=Object.keys(o);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var p=u[m];if(!Te.call(o,p)||!Hs(i[p],o[p]))return!1}return!0}function kx(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ax(i,o){var u=kx(i);i=0;for(var m;u;){if(u.nodeType===3){if(m=i+u.textContent.length,i<=o&&m>=o)return{node:u,offset:o-i};i=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=kx(u)}}function Ex(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Ex(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Nx(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Yc(i.document);o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Yc(i.document)}return o}function nf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var lC=sn&&"documentMode"in document&&11>=document.documentMode,Ca=null,af=null,sl=null,of=!1;function Dx(i,o,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;of||Ca==null||Ca!==Yc(m)||(m=Ca,"selectionStart"in m&&nf(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),sl&&tl(sl,m)||(sl=m,m=zu(af,"onSelect"),0<m.length&&(o=new Qc("onSelect","select",null,o,u),i.push({event:o,listeners:m}),o.target=Ca)))}function Ei(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var Ta={animationend:Ei("Animation","AnimationEnd"),animationiteration:Ei("Animation","AnimationIteration"),animationstart:Ei("Animation","AnimationStart"),transitionrun:Ei("Transition","TransitionRun"),transitionstart:Ei("Transition","TransitionStart"),transitioncancel:Ei("Transition","TransitionCancel"),transitionend:Ei("Transition","TransitionEnd")},lf={},Ox={};sn&&(Ox=document.createElement("div").style,"AnimationEvent"in window||(delete Ta.animationend.animation,delete Ta.animationiteration.animation,delete Ta.animationstart.animation),"TransitionEvent"in window||delete Ta.transitionend.transition);function Ni(i){if(lf[i])return lf[i];if(!Ta[i])return i;var o=Ta[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in Ox)return lf[i]=o[u];return i}var Mx=Ni("animationend"),Lx=Ni("animationiteration"),Rx=Ni("animationstart"),cC=Ni("transitionrun"),uC=Ni("transitionstart"),dC=Ni("transitioncancel"),Px=Ni("transitionend"),Fx=new Map,cf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cf.push("scrollEnd");function _r(i,o){Fx.set(i,o),ps(o,[i])}var Bx=new WeakMap;function ir(i,o){if(typeof i=="object"&&i!==null){var u=Bx.get(i);return u!==void 0?u:(o={value:i,source:o,stack:ex(o)},Bx.set(i,o),o)}return{value:i,source:o,stack:ex(o)}}var ar=[],ka=0,uf=0;function tu(){for(var i=ka,o=uf=ka=0;o<i;){var u=ar[o];ar[o++]=null;var m=ar[o];ar[o++]=null;var p=ar[o];ar[o++]=null;var y=ar[o];if(ar[o++]=null,m!==null&&p!==null){var j=m.pending;j===null?p.next=p:(p.next=j.next,j.next=p),m.pending=p}y!==0&&zx(u,p,y)}}function su(i,o,u,m){ar[ka++]=i,ar[ka++]=o,ar[ka++]=u,ar[ka++]=m,uf|=m,i.lanes|=m,i=i.alternate,i!==null&&(i.lanes|=m)}function df(i,o,u,m){return su(i,o,u,m),ru(i)}function Aa(i,o){return su(i,null,null,o),ru(i)}function zx(i,o,u){i.lanes|=u;var m=i.alternate;m!==null&&(m.lanes|=u);for(var p=!1,y=i.return;y!==null;)y.childLanes|=u,m=y.alternate,m!==null&&(m.childLanes|=u),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(p=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,p&&o!==null&&(p=31-ue(u),i=y.hiddenUpdates,m=i[p],m===null?i[p]=[o]:m.push(o),o.lane=u|536870912),y):null}function ru(i){if(50<kl)throw kl=0,xm=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Ea={};function hC(i,o,u,m){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $s(i,o,u,m){return new hC(i,o,u,m)}function hf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function rn(i,o){var u=i.alternate;return u===null?(u=$s(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function Ux(i,o){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,o=u.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function nu(i,o,u,m,p,y){var j=0;if(m=i,typeof i=="function")hf(i)&&(j=1);else if(typeof i=="string")j=m3(i,u,fe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case H:return i=$s(31,u,o,p),i.elementType=H,i.lanes=y,i;case w:return Di(u.children,p,y,o);case _:j=8,p|=24;break;case T:return i=$s(12,u,o,p|2),i.elementType=T,i.lanes=y,i;case D:return i=$s(13,u,o,p),i.elementType=D,i.lanes=y,i;case F:return i=$s(19,u,o,p),i.elementType=F,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case S:case A:j=10;break e;case E:j=9;break e;case O:j=11;break e;case B:j=14;break e;case P:j=16,m=null;break e}j=29,u=Error(s(130,i===null?"null":typeof i,"")),m=null}return o=$s(j,u,o,p),o.elementType=i,o.type=m,o.lanes=y,o}function Di(i,o,u,m){return i=$s(7,i,m,o),i.lanes=u,i}function ff(i,o,u){return i=$s(6,i,null,o),i.lanes=u,i}function mf(i,o,u){return o=$s(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Na=[],Da=0,iu=null,au=0,or=[],lr=0,Oi=null,nn=1,an="";function Mi(i,o){Na[Da++]=au,Na[Da++]=iu,iu=i,au=o}function Vx(i,o,u){or[lr++]=nn,or[lr++]=an,or[lr++]=Oi,Oi=i;var m=nn;i=an;var p=32-ue(m)-1;m&=~(1<<p),u+=1;var y=32-ue(o)+p;if(30<y){var j=p-p%5;y=(m&(1<<j)-1).toString(32),m>>=j,p-=j,nn=1<<32-ue(o)+p|u<<p|m,an=y+i}else nn=1<<y|u<<p|m,an=i}function gf(i){i.return!==null&&(Mi(i,1),Vx(i,1,0))}function pf(i){for(;i===iu;)iu=Na[--Da],Na[Da]=null,au=Na[--Da],Na[Da]=null;for(;i===Oi;)Oi=or[--lr],or[lr]=null,an=or[--lr],or[lr]=null,nn=or[--lr],or[lr]=null}var Cs=null,Et=null,at=!1,Li=null,Vr=!1,xf=Error(s(519));function Ri(i){var o=Error(s(418,""));throw il(ir(o,i)),xf}function Ix(i){var o=i.stateNode,u=i.type,m=i.memoizedProps;switch(o[Ae]=i,o[Re]=m,u){case"dialog":Je("cancel",o),Je("close",o);break;case"iframe":case"object":case"embed":Je("load",o);break;case"video":case"audio":for(u=0;u<El.length;u++)Je(El[u],o);break;case"source":Je("error",o);break;case"img":case"image":case"link":Je("error",o),Je("load",o);break;case"details":Je("toggle",o);break;case"input":Je("invalid",o),rx(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Wc(o);break;case"select":Je("invalid",o);break;case"textarea":Je("invalid",o),ix(o,m.value,m.defaultValue,m.children),Wc(o)}u=m.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||m.suppressHydrationWarning===!0||i1(o.textContent,u)?(m.popover!=null&&(Je("beforetoggle",o),Je("toggle",o)),m.onScroll!=null&&Je("scroll",o),m.onScrollEnd!=null&&Je("scrollend",o),m.onClick!=null&&(o.onclick=Uu),o=!0):o=!1,o||Ri(i)}function Hx(i){for(Cs=i.return;Cs;)switch(Cs.tag){case 5:case 13:Vr=!1;return;case 27:case 3:Vr=!0;return;default:Cs=Cs.return}}function rl(i){if(i!==Cs)return!1;if(!at)return Hx(i),at=!0,!1;var o=i.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||Mm(i.type,i.memoizedProps)),u=!u),u&&Et&&Ri(i),Hx(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8)if(u=i.data,u==="/$"){if(o===0){Et=jr(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++;i=i.nextSibling}Et=null}}else o===27?(o=Et,ni(i.type)?(i=Fm,Fm=null,Et=i):Et=o):Et=Cs?jr(i.stateNode.nextSibling):null;return!0}function nl(){Et=Cs=null,at=!1}function $x(){var i=Li;return i!==null&&(Ms===null?Ms=i:Ms.push.apply(Ms,i),Li=null),i}function il(i){Li===null?Li=[i]:Li.push(i)}var vf=J(null),Pi=null,on=null;function Hn(i,o,u){te(vf,o._currentValue),o._currentValue=u}function ln(i){i._currentValue=vf.current,ye(vf)}function yf(i,o,u){for(;i!==null;){var m=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),i===u)break;i=i.return}}function bf(i,o,u,m){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var y=p.dependencies;if(y!==null){var j=p.child;y=y.firstContext;e:for(;y!==null;){var k=y;y=p;for(var R=0;R<o.length;R++)if(k.context===o[R]){y.lanes|=u,k=y.alternate,k!==null&&(k.lanes|=u),yf(y.return,u,i),m||(j=null);break e}y=k.next}}else if(p.tag===18){if(j=p.return,j===null)throw Error(s(341));j.lanes|=u,y=j.alternate,y!==null&&(y.lanes|=u),yf(j,u,i),j=null}else j=p.child;if(j!==null)j.return=p;else for(j=p;j!==null;){if(j===i){j=null;break}if(p=j.sibling,p!==null){p.return=j.return,j=p;break}j=j.return}p=j}}function al(i,o,u,m){i=null;for(var p=o,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var j=p.alternate;if(j===null)throw Error(s(387));if(j=j.memoizedProps,j!==null){var k=p.type;Hs(p.pendingProps.value,j.value)||(i!==null?i.push(k):i=[k])}}else if(p===de.current){if(j=p.alternate,j===null)throw Error(s(387));j.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(Rl):i=[Rl])}p=p.return}i!==null&&bf(o,i,u,m),o.flags|=262144}function ou(i){for(i=i.firstContext;i!==null;){if(!Hs(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Fi(i){Pi=i,on=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function xs(i){return Gx(Pi,i)}function lu(i,o){return Pi===null&&Fi(i),Gx(i,o)}function Gx(i,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},on===null){if(i===null)throw Error(s(308));on=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else on=on.next=o;return u}var fC=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(u,m){i.push(m)}};this.abort=function(){o.aborted=!0,i.forEach(function(u){return u()})}},mC=r.unstable_scheduleCallback,gC=r.unstable_NormalPriority,Yt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wf(){return{controller:new fC,data:new Map,refCount:0}}function ol(i){i.refCount--,i.refCount===0&&mC(gC,function(){i.controller.abort()})}var ll=null,_f=0,Oa=0,Ma=null;function pC(i,o){if(ll===null){var u=ll=[];_f=0,Oa=jm(),Ma={status:"pending",value:void 0,then:function(m){u.push(m)}}}return _f++,o.then(Wx,Wx),o}function Wx(){if(--_f===0&&ll!==null){Ma!==null&&(Ma.status="fulfilled");var i=ll;ll=null,Oa=0,Ma=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function xC(i,o){var u=[],m={status:"pending",value:null,reason:null,then:function(p){u.push(p)}};return i.then(function(){m.status="fulfilled",m.value=o;for(var p=0;p<u.length;p++)(0,u[p])(o)},function(p){for(m.status="rejected",m.reason=p,p=0;p<u.length;p++)(0,u[p])(void 0)}),m}var Yx=L.S;L.S=function(i,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&pC(i,o),Yx!==null&&Yx(i,o)};var Bi=J(null);function Sf(){var i=Bi.current;return i!==null?i:xt.pooledCache}function cu(i,o){o===null?te(Bi,Bi.current):te(Bi,o.pool)}function qx(){var i=Sf();return i===null?null:{parent:Yt._currentValue,pool:i}}var cl=Error(s(460)),Xx=Error(s(474)),uu=Error(s(542)),jf={then:function(){}};function Kx(i){return i=i.status,i==="fulfilled"||i==="rejected"}function du(){}function Zx(i,o,u){switch(u=i[u],u===void 0?i.push(o):u!==o&&(o.then(du,du),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Jx(i),i;default:if(typeof o.status=="string")o.then(du,du);else{if(i=xt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(m){if(o.status==="pending"){var p=o;p.status="fulfilled",p.value=m}},function(m){if(o.status==="pending"){var p=o;p.status="rejected",p.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Jx(i),i}throw ul=o,cl}}var ul=null;function Qx(){if(ul===null)throw Error(s(459));var i=ul;return ul=null,i}function Jx(i){if(i===cl||i===uu)throw Error(s(483))}var $n=!1;function Cf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tf(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Gn(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Wn(i,o,u){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(ut&2)!==0){var p=m.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),m.pending=o,o=ru(i),zx(i,null,u),o}return su(i,m,o,u),ru(i)}function dl(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var m=o.lanes;m&=i.pendingLanes,u|=m,o.lanes=u,Gc(i,u)}}function kf(i,o){var u=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var p=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var j={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};y===null?p=y=j:y=y.next=j,u=u.next}while(u!==null);y===null?p=y=o:y=y.next=o}else p=y=o;u={baseState:m.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:m.shared,callbacks:m.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}var Af=!1;function hl(){if(Af){var i=Ma;if(i!==null)throw i}}function fl(i,o,u,m){Af=!1;var p=i.updateQueue;$n=!1;var y=p.firstBaseUpdate,j=p.lastBaseUpdate,k=p.shared.pending;if(k!==null){p.shared.pending=null;var R=k,X=R.next;R.next=null,j===null?y=X:j.next=X,j=R;var oe=i.alternate;oe!==null&&(oe=oe.updateQueue,k=oe.lastBaseUpdate,k!==j&&(k===null?oe.firstBaseUpdate=X:k.next=X,oe.lastBaseUpdate=R))}if(y!==null){var ge=p.baseState;j=0,oe=X=R=null,k=y;do{var Z=k.lane&-536870913,ee=Z!==k.lane;if(ee?(st&Z)===Z:(m&Z)===Z){Z!==0&&Z===Oa&&(Af=!0),oe!==null&&(oe=oe.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Ve=i,Be=k;Z=o;var gt=u;switch(Be.tag){case 1:if(Ve=Be.payload,typeof Ve=="function"){ge=Ve.call(gt,ge,Z);break e}ge=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=Be.payload,Z=typeof Ve=="function"?Ve.call(gt,ge,Z):Ve,Z==null)break e;ge=g({},ge,Z);break e;case 2:$n=!0}}Z=k.callback,Z!==null&&(i.flags|=64,ee&&(i.flags|=8192),ee=p.callbacks,ee===null?p.callbacks=[Z]:ee.push(Z))}else ee={lane:Z,tag:k.tag,payload:k.payload,callback:k.callback,next:null},oe===null?(X=oe=ee,R=ge):oe=oe.next=ee,j|=Z;if(k=k.next,k===null){if(k=p.shared.pending,k===null)break;ee=k,k=ee.next,ee.next=null,p.lastBaseUpdate=ee,p.shared.pending=null}}while(!0);oe===null&&(R=ge),p.baseState=R,p.firstBaseUpdate=X,p.lastBaseUpdate=oe,y===null&&(p.shared.lanes=0),ei|=j,i.lanes=j,i.memoizedState=ge}}function ev(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function tv(i,o){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)ev(u[i],o)}var La=J(null),hu=J(0);function sv(i,o){i=gn,te(hu,i),te(La,o),gn=i|o.baseLanes}function Ef(){te(hu,gn),te(La,La.current)}function Nf(){gn=hu.current,ye(La),ye(hu)}var Yn=0,Xe=null,ft=null,zt=null,fu=!1,Ra=!1,zi=!1,mu=0,ml=0,Pa=null,vC=0;function Mt(){throw Error(s(321))}function Df(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!Hs(i[u],o[u]))return!1;return!0}function Of(i,o,u,m,p,y){return Yn=y,Xe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,L.H=i===null||i.memoizedState===null?zv:Uv,zi=!1,y=u(m,p),zi=!1,Ra&&(y=nv(o,u,m,p)),rv(i),y}function rv(i){L.H=bu;var o=ft!==null&&ft.next!==null;if(Yn=0,zt=ft=Xe=null,fu=!1,ml=0,Pa=null,o)throw Error(s(300));i===null||ts||(i=i.dependencies,i!==null&&ou(i)&&(ts=!0))}function nv(i,o,u,m){Xe=i;var p=0;do{if(Ra&&(Pa=null),ml=0,Ra=!1,25<=p)throw Error(s(301));if(p+=1,zt=ft=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}L.H=CC,y=o(u,m)}while(Ra);return y}function yC(){var i=L.H,o=i.useState()[0];return o=typeof o.then=="function"?gl(o):o,i=i.useState()[0],(ft!==null?ft.memoizedState:null)!==i&&(Xe.flags|=1024),o}function Mf(){var i=mu!==0;return mu=0,i}function Lf(i,o,u){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~u}function Rf(i){if(fu){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}fu=!1}Yn=0,zt=ft=Xe=null,Ra=!1,ml=mu=0,Pa=null}function Ds(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?Xe.memoizedState=zt=i:zt=zt.next=i,zt}function Ut(){if(ft===null){var i=Xe.alternate;i=i!==null?i.memoizedState:null}else i=ft.next;var o=zt===null?Xe.memoizedState:zt.next;if(o!==null)zt=o,ft=i;else{if(i===null)throw Xe.alternate===null?Error(s(467)):Error(s(310));ft=i,i={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},zt===null?Xe.memoizedState=zt=i:zt=zt.next=i}return zt}function Pf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gl(i){var o=ml;return ml+=1,Pa===null&&(Pa=[]),i=Zx(Pa,i,o),o=Xe,(zt===null?o.memoizedState:zt.next)===null&&(o=o.alternate,L.H=o===null||o.memoizedState===null?zv:Uv),i}function gu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return gl(i);if(i.$$typeof===A)return xs(i)}throw Error(s(438,String(i)))}function Ff(i){var o=null,u=Xe.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var m=Xe.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(p){return p.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Pf(),Xe.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(i),m=0;m<i;m++)u[m]=N;return o.index++,u}function cn(i,o){return typeof o=="function"?o(i):o}function pu(i){var o=Ut();return Bf(o,ft,i)}function Bf(i,o,u){var m=i.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=u;var p=i.baseQueue,y=m.pending;if(y!==null){if(p!==null){var j=p.next;p.next=y.next,y.next=j}o.baseQueue=p=y,m.pending=null}if(y=i.baseState,p===null)i.memoizedState=y;else{o=p.next;var k=j=null,R=null,X=o,oe=!1;do{var ge=X.lane&-536870913;if(ge!==X.lane?(st&ge)===ge:(Yn&ge)===ge){var Z=X.revertLane;if(Z===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ge===Oa&&(oe=!0);else if((Yn&Z)===Z){X=X.next,Z===Oa&&(oe=!0);continue}else ge={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},R===null?(k=R=ge,j=y):R=R.next=ge,Xe.lanes|=Z,ei|=Z;ge=X.action,zi&&u(y,ge),y=X.hasEagerState?X.eagerState:u(y,ge)}else Z={lane:ge,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},R===null?(k=R=Z,j=y):R=R.next=Z,Xe.lanes|=ge,ei|=ge;X=X.next}while(X!==null&&X!==o);if(R===null?j=y:R.next=k,!Hs(y,i.memoizedState)&&(ts=!0,oe&&(u=Ma,u!==null)))throw u;i.memoizedState=y,i.baseState=j,i.baseQueue=R,m.lastRenderedState=y}return p===null&&(m.lanes=0),[i.memoizedState,m.dispatch]}function zf(i){var o=Ut(),u=o.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=i;var m=u.dispatch,p=u.pending,y=o.memoizedState;if(p!==null){u.pending=null;var j=p=p.next;do y=i(y,j.action),j=j.next;while(j!==p);Hs(y,o.memoizedState)||(ts=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,m]}function iv(i,o,u){var m=Xe,p=Ut(),y=at;if(y){if(u===void 0)throw Error(s(407));u=u()}else u=o();var j=!Hs((ft||p).memoizedState,u);j&&(p.memoizedState=u,ts=!0),p=p.queue;var k=lv.bind(null,m,p,i);if(pl(2048,8,k,[i]),p.getSnapshot!==o||j||zt!==null&&zt.memoizedState.tag&1){if(m.flags|=2048,Fa(9,xu(),ov.bind(null,m,p,u,o),null),xt===null)throw Error(s(349));y||(Yn&124)!==0||av(m,o,u)}return u}function av(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=Xe.updateQueue,o===null?(o=Pf(),Xe.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function ov(i,o,u,m){o.value=u,o.getSnapshot=m,cv(o)&&uv(i)}function lv(i,o,u){return u(function(){cv(o)&&uv(i)})}function cv(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!Hs(i,u)}catch{return!0}}function uv(i){var o=Aa(i,2);o!==null&&Xs(o,i,2)}function Uf(i){var o=Ds();if(typeof i=="function"){var u=i;if(i=u(),zi){me(!0);try{u()}finally{me(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cn,lastRenderedState:i},o}function dv(i,o,u,m){return i.baseState=u,Bf(i,ft,typeof m=="function"?m:cn)}function bC(i,o,u,m,p){if(yu(i))throw Error(s(485));if(i=o.action,i!==null){var y={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){y.listeners.push(j)}};L.T!==null?u(!0):y.isTransition=!1,m(y),u=o.pending,u===null?(y.next=o.pending=y,hv(o,y)):(y.next=u.next,o.pending=u.next=y)}}function hv(i,o){var u=o.action,m=o.payload,p=i.state;if(o.isTransition){var y=L.T,j={};L.T=j;try{var k=u(p,m),R=L.S;R!==null&&R(j,k),fv(i,o,k)}catch(X){Vf(i,o,X)}finally{L.T=y}}else try{y=u(p,m),fv(i,o,y)}catch(X){Vf(i,o,X)}}function fv(i,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(m){mv(i,o,m)},function(m){return Vf(i,o,m)}):mv(i,o,u)}function mv(i,o,u){o.status="fulfilled",o.value=u,gv(o),i.state=u,o=i.pending,o!==null&&(u=o.next,u===o?i.pending=null:(u=u.next,o.next=u,hv(i,u)))}function Vf(i,o,u){var m=i.pending;if(i.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=u,gv(o),o=o.next;while(o!==m)}i.action=null}function gv(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function pv(i,o){return o}function xv(i,o){if(at){var u=xt.formState;if(u!==null){e:{var m=Xe;if(at){if(Et){t:{for(var p=Et,y=Vr;p.nodeType!==8;){if(!y){p=null;break t}if(p=jr(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){Et=jr(p.nextSibling),m=p.data==="F!";break e}}Ri(m)}m=!1}m&&(o=u[0])}}return u=Ds(),u.memoizedState=u.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pv,lastRenderedState:o},u.queue=m,u=Pv.bind(null,Xe,m),m.dispatch=u,m=Uf(!1),y=Wf.bind(null,Xe,!1,m.queue),m=Ds(),p={state:o,dispatch:null,action:i,pending:null},m.queue=p,u=bC.bind(null,Xe,p,y,u),p.dispatch=u,m.memoizedState=i,[o,u,!1]}function vv(i){var o=Ut();return yv(o,ft,i)}function yv(i,o,u){if(o=Bf(i,o,pv)[0],i=pu(cn)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=gl(o)}catch(j){throw j===cl?uu:j}else m=o;o=Ut();var p=o.queue,y=p.dispatch;return u!==o.memoizedState&&(Xe.flags|=2048,Fa(9,xu(),wC.bind(null,p,u),null)),[m,y,i]}function wC(i,o){i.action=o}function bv(i){var o=Ut(),u=ft;if(u!==null)return yv(o,u,i);Ut(),o=o.memoizedState,u=Ut();var m=u.queue.dispatch;return u.memoizedState=i,[o,m,!1]}function Fa(i,o,u,m){return i={tag:i,create:u,deps:m,inst:o,next:null},o=Xe.updateQueue,o===null&&(o=Pf(),Xe.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=i.next=i:(m=u.next,u.next=i,i.next=m,o.lastEffect=i),i}function xu(){return{destroy:void 0,resource:void 0}}function wv(){return Ut().memoizedState}function vu(i,o,u,m){var p=Ds();m=m===void 0?null:m,Xe.flags|=i,p.memoizedState=Fa(1|o,xu(),u,m)}function pl(i,o,u,m){var p=Ut();m=m===void 0?null:m;var y=p.memoizedState.inst;ft!==null&&m!==null&&Df(m,ft.memoizedState.deps)?p.memoizedState=Fa(o,y,u,m):(Xe.flags|=i,p.memoizedState=Fa(1|o,y,u,m))}function _v(i,o){vu(8390656,8,i,o)}function Sv(i,o){pl(2048,8,i,o)}function jv(i,o){return pl(4,2,i,o)}function Cv(i,o){return pl(4,4,i,o)}function Tv(i,o){if(typeof o=="function"){i=i();var u=o(i);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function kv(i,o,u){u=u!=null?u.concat([i]):null,pl(4,4,Tv.bind(null,o,i),u)}function If(){}function Av(i,o){var u=Ut();o=o===void 0?null:o;var m=u.memoizedState;return o!==null&&Df(o,m[1])?m[0]:(u.memoizedState=[i,o],i)}function Ev(i,o){var u=Ut();o=o===void 0?null:o;var m=u.memoizedState;if(o!==null&&Df(o,m[1]))return m[0];if(m=i(),zi){me(!0);try{i()}finally{me(!1)}}return u.memoizedState=[m,o],m}function Hf(i,o,u){return u===void 0||(Yn&1073741824)!==0?i.memoizedState=o:(i.memoizedState=u,i=Oy(),Xe.lanes|=i,ei|=i,u)}function Nv(i,o,u,m){return Hs(u,o)?u:La.current!==null?(i=Hf(i,u,m),Hs(i,o)||(ts=!0),i):(Yn&42)===0?(ts=!0,i.memoizedState=u):(i=Oy(),Xe.lanes|=i,ei|=i,o)}function Dv(i,o,u,m,p){var y=$.p;$.p=y!==0&&8>y?y:8;var j=L.T,k={};L.T=k,Wf(i,!1,o,u);try{var R=p(),X=L.S;if(X!==null&&X(k,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var oe=xC(R,m);xl(i,o,oe,qs(i))}else xl(i,o,m,qs(i))}catch(ge){xl(i,o,{then:function(){},status:"rejected",reason:ge},qs())}finally{$.p=y,L.T=j}}function _C(){}function $f(i,o,u,m){if(i.tag!==5)throw Error(s(476));var p=Ov(i).queue;Dv(i,p,o,K,u===null?_C:function(){return Mv(i),u(m)})}function Ov(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cn,lastRenderedState:K},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cn,lastRenderedState:u},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function Mv(i){var o=Ov(i).next.queue;xl(i,o,{},qs())}function Gf(){return xs(Rl)}function Lv(){return Ut().memoizedState}function Rv(){return Ut().memoizedState}function SC(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var u=qs();i=Gn(u);var m=Wn(o,i,u);m!==null&&(Xs(m,o,u),dl(m,o,u)),o={cache:wf()},i.payload=o;return}o=o.return}}function jC(i,o,u){var m=qs();u={lane:m,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},yu(i)?Fv(o,u):(u=df(i,o,u,m),u!==null&&(Xs(u,i,m),Bv(u,o,m)))}function Pv(i,o,u){var m=qs();xl(i,o,u,m)}function xl(i,o,u,m){var p={lane:m,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(yu(i))Fv(o,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var j=o.lastRenderedState,k=y(j,u);if(p.hasEagerState=!0,p.eagerState=k,Hs(k,j))return su(i,o,p,0),xt===null&&tu(),!1}catch{}finally{}if(u=df(i,o,p,m),u!==null)return Xs(u,i,m),Bv(u,o,m),!0}return!1}function Wf(i,o,u,m){if(m={lane:2,revertLane:jm(),action:m,hasEagerState:!1,eagerState:null,next:null},yu(i)){if(o)throw Error(s(479))}else o=df(i,u,m,2),o!==null&&Xs(o,i,2)}function yu(i){var o=i.alternate;return i===Xe||o!==null&&o===Xe}function Fv(i,o){Ra=fu=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Bv(i,o,u){if((u&4194048)!==0){var m=o.lanes;m&=i.pendingLanes,u|=m,o.lanes=u,Gc(i,u)}}var bu={readContext:xs,use:gu,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt},zv={readContext:xs,use:gu,useCallback:function(i,o){return Ds().memoizedState=[i,o===void 0?null:o],i},useContext:xs,useEffect:_v,useImperativeHandle:function(i,o,u){u=u!=null?u.concat([i]):null,vu(4194308,4,Tv.bind(null,o,i),u)},useLayoutEffect:function(i,o){return vu(4194308,4,i,o)},useInsertionEffect:function(i,o){vu(4,2,i,o)},useMemo:function(i,o){var u=Ds();o=o===void 0?null:o;var m=i();if(zi){me(!0);try{i()}finally{me(!1)}}return u.memoizedState=[m,o],m},useReducer:function(i,o,u){var m=Ds();if(u!==void 0){var p=u(o);if(zi){me(!0);try{u(o)}finally{me(!1)}}}else p=o;return m.memoizedState=m.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},m.queue=i,i=i.dispatch=jC.bind(null,Xe,i),[m.memoizedState,i]},useRef:function(i){var o=Ds();return i={current:i},o.memoizedState=i},useState:function(i){i=Uf(i);var o=i.queue,u=Pv.bind(null,Xe,o);return o.dispatch=u,[i.memoizedState,u]},useDebugValue:If,useDeferredValue:function(i,o){var u=Ds();return Hf(u,i,o)},useTransition:function(){var i=Uf(!1);return i=Dv.bind(null,Xe,i.queue,!0,!1),Ds().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,u){var m=Xe,p=Ds();if(at){if(u===void 0)throw Error(s(407));u=u()}else{if(u=o(),xt===null)throw Error(s(349));(st&124)!==0||av(m,o,u)}p.memoizedState=u;var y={value:u,getSnapshot:o};return p.queue=y,_v(lv.bind(null,m,y,i),[i]),m.flags|=2048,Fa(9,xu(),ov.bind(null,m,y,u,o),null),u},useId:function(){var i=Ds(),o=xt.identifierPrefix;if(at){var u=an,m=nn;u=(m&~(1<<32-ue(m)-1)).toString(32)+u,o="«"+o+"R"+u,u=mu++,0<u&&(o+="H"+u.toString(32)),o+="»"}else u=vC++,o="«"+o+"r"+u.toString(32)+"»";return i.memoizedState=o},useHostTransitionStatus:Gf,useFormState:xv,useActionState:xv,useOptimistic:function(i){var o=Ds();o.memoizedState=o.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Wf.bind(null,Xe,!0,u),u.dispatch=o,[i,o]},useMemoCache:Ff,useCacheRefresh:function(){return Ds().memoizedState=SC.bind(null,Xe)}},Uv={readContext:xs,use:gu,useCallback:Av,useContext:xs,useEffect:Sv,useImperativeHandle:kv,useInsertionEffect:jv,useLayoutEffect:Cv,useMemo:Ev,useReducer:pu,useRef:wv,useState:function(){return pu(cn)},useDebugValue:If,useDeferredValue:function(i,o){var u=Ut();return Nv(u,ft.memoizedState,i,o)},useTransition:function(){var i=pu(cn)[0],o=Ut().memoizedState;return[typeof i=="boolean"?i:gl(i),o]},useSyncExternalStore:iv,useId:Lv,useHostTransitionStatus:Gf,useFormState:vv,useActionState:vv,useOptimistic:function(i,o){var u=Ut();return dv(u,ft,i,o)},useMemoCache:Ff,useCacheRefresh:Rv},CC={readContext:xs,use:gu,useCallback:Av,useContext:xs,useEffect:Sv,useImperativeHandle:kv,useInsertionEffect:jv,useLayoutEffect:Cv,useMemo:Ev,useReducer:zf,useRef:wv,useState:function(){return zf(cn)},useDebugValue:If,useDeferredValue:function(i,o){var u=Ut();return ft===null?Hf(u,i,o):Nv(u,ft.memoizedState,i,o)},useTransition:function(){var i=zf(cn)[0],o=Ut().memoizedState;return[typeof i=="boolean"?i:gl(i),o]},useSyncExternalStore:iv,useId:Lv,useHostTransitionStatus:Gf,useFormState:bv,useActionState:bv,useOptimistic:function(i,o){var u=Ut();return ft!==null?dv(u,ft,i,o):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:Ff,useCacheRefresh:Rv},Ba=null,vl=0;function wu(i){var o=vl;return vl+=1,Ba===null&&(Ba=[]),Zx(Ba,i,o)}function yl(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function _u(i,o){throw o.$$typeof===x?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Vv(i){var o=i._init;return o(i._payload)}function Iv(i){function o(W,z){if(i){var Y=W.deletions;Y===null?(W.deletions=[z],W.flags|=16):Y.push(z)}}function u(W,z){if(!i)return null;for(;z!==null;)o(W,z),z=z.sibling;return null}function m(W){for(var z=new Map;W!==null;)W.key!==null?z.set(W.key,W):z.set(W.index,W),W=W.sibling;return z}function p(W,z){return W=rn(W,z),W.index=0,W.sibling=null,W}function y(W,z,Y){return W.index=Y,i?(Y=W.alternate,Y!==null?(Y=Y.index,Y<z?(W.flags|=67108866,z):Y):(W.flags|=67108866,z)):(W.flags|=1048576,z)}function j(W){return i&&W.alternate===null&&(W.flags|=67108866),W}function k(W,z,Y,he){return z===null||z.tag!==6?(z=ff(Y,W.mode,he),z.return=W,z):(z=p(z,Y),z.return=W,z)}function R(W,z,Y,he){var Oe=Y.type;return Oe===w?oe(W,z,Y.props.children,he,Y.key):z!==null&&(z.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===P&&Vv(Oe)===z.type)?(z=p(z,Y.props),yl(z,Y),z.return=W,z):(z=nu(Y.type,Y.key,Y.props,null,W.mode,he),yl(z,Y),z.return=W,z)}function X(W,z,Y,he){return z===null||z.tag!==4||z.stateNode.containerInfo!==Y.containerInfo||z.stateNode.implementation!==Y.implementation?(z=mf(Y,W.mode,he),z.return=W,z):(z=p(z,Y.children||[]),z.return=W,z)}function oe(W,z,Y,he,Oe){return z===null||z.tag!==7?(z=Di(Y,W.mode,he,Oe),z.return=W,z):(z=p(z,Y),z.return=W,z)}function ge(W,z,Y){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=ff(""+z,W.mode,Y),z.return=W,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case v:return Y=nu(z.type,z.key,z.props,null,W.mode,Y),yl(Y,z),Y.return=W,Y;case b:return z=mf(z,W.mode,Y),z.return=W,z;case P:var he=z._init;return z=he(z._payload),ge(W,z,Y)}if(ie(z)||G(z))return z=Di(z,W.mode,Y,null),z.return=W,z;if(typeof z.then=="function")return ge(W,wu(z),Y);if(z.$$typeof===A)return ge(W,lu(W,z),Y);_u(W,z)}return null}function Z(W,z,Y,he){var Oe=z!==null?z.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Oe!==null?null:k(W,z,""+Y,he);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:return Y.key===Oe?R(W,z,Y,he):null;case b:return Y.key===Oe?X(W,z,Y,he):null;case P:return Oe=Y._init,Y=Oe(Y._payload),Z(W,z,Y,he)}if(ie(Y)||G(Y))return Oe!==null?null:oe(W,z,Y,he,null);if(typeof Y.then=="function")return Z(W,z,wu(Y),he);if(Y.$$typeof===A)return Z(W,z,lu(W,Y),he);_u(W,Y)}return null}function ee(W,z,Y,he,Oe){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return W=W.get(Y)||null,k(z,W,""+he,Oe);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case v:return W=W.get(he.key===null?Y:he.key)||null,R(z,W,he,Oe);case b:return W=W.get(he.key===null?Y:he.key)||null,X(z,W,he,Oe);case P:var Ze=he._init;return he=Ze(he._payload),ee(W,z,Y,he,Oe)}if(ie(he)||G(he))return W=W.get(Y)||null,oe(z,W,he,Oe,null);if(typeof he.then=="function")return ee(W,z,Y,wu(he),Oe);if(he.$$typeof===A)return ee(W,z,Y,lu(z,he),Oe);_u(z,he)}return null}function Ve(W,z,Y,he){for(var Oe=null,Ze=null,Pe=z,ze=z=0,rs=null;Pe!==null&&ze<Y.length;ze++){Pe.index>ze?(rs=Pe,Pe=null):rs=Pe.sibling;var it=Z(W,Pe,Y[ze],he);if(it===null){Pe===null&&(Pe=rs);break}i&&Pe&&it.alternate===null&&o(W,Pe),z=y(it,z,ze),Ze===null?Oe=it:Ze.sibling=it,Ze=it,Pe=rs}if(ze===Y.length)return u(W,Pe),at&&Mi(W,ze),Oe;if(Pe===null){for(;ze<Y.length;ze++)Pe=ge(W,Y[ze],he),Pe!==null&&(z=y(Pe,z,ze),Ze===null?Oe=Pe:Ze.sibling=Pe,Ze=Pe);return at&&Mi(W,ze),Oe}for(Pe=m(Pe);ze<Y.length;ze++)rs=ee(Pe,W,ze,Y[ze],he),rs!==null&&(i&&rs.alternate!==null&&Pe.delete(rs.key===null?ze:rs.key),z=y(rs,z,ze),Ze===null?Oe=rs:Ze.sibling=rs,Ze=rs);return i&&Pe.forEach(function(ci){return o(W,ci)}),at&&Mi(W,ze),Oe}function Be(W,z,Y,he){if(Y==null)throw Error(s(151));for(var Oe=null,Ze=null,Pe=z,ze=z=0,rs=null,it=Y.next();Pe!==null&&!it.done;ze++,it=Y.next()){Pe.index>ze?(rs=Pe,Pe=null):rs=Pe.sibling;var ci=Z(W,Pe,it.value,he);if(ci===null){Pe===null&&(Pe=rs);break}i&&Pe&&ci.alternate===null&&o(W,Pe),z=y(ci,z,ze),Ze===null?Oe=ci:Ze.sibling=ci,Ze=ci,Pe=rs}if(it.done)return u(W,Pe),at&&Mi(W,ze),Oe;if(Pe===null){for(;!it.done;ze++,it=Y.next())it=ge(W,it.value,he),it!==null&&(z=y(it,z,ze),Ze===null?Oe=it:Ze.sibling=it,Ze=it);return at&&Mi(W,ze),Oe}for(Pe=m(Pe);!it.done;ze++,it=Y.next())it=ee(Pe,W,ze,it.value,he),it!==null&&(i&&it.alternate!==null&&Pe.delete(it.key===null?ze:it.key),z=y(it,z,ze),Ze===null?Oe=it:Ze.sibling=it,Ze=it);return i&&Pe.forEach(function(T3){return o(W,T3)}),at&&Mi(W,ze),Oe}function gt(W,z,Y,he){if(typeof Y=="object"&&Y!==null&&Y.type===w&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:e:{for(var Oe=Y.key;z!==null;){if(z.key===Oe){if(Oe=Y.type,Oe===w){if(z.tag===7){u(W,z.sibling),he=p(z,Y.props.children),he.return=W,W=he;break e}}else if(z.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===P&&Vv(Oe)===z.type){u(W,z.sibling),he=p(z,Y.props),yl(he,Y),he.return=W,W=he;break e}u(W,z);break}else o(W,z);z=z.sibling}Y.type===w?(he=Di(Y.props.children,W.mode,he,Y.key),he.return=W,W=he):(he=nu(Y.type,Y.key,Y.props,null,W.mode,he),yl(he,Y),he.return=W,W=he)}return j(W);case b:e:{for(Oe=Y.key;z!==null;){if(z.key===Oe)if(z.tag===4&&z.stateNode.containerInfo===Y.containerInfo&&z.stateNode.implementation===Y.implementation){u(W,z.sibling),he=p(z,Y.children||[]),he.return=W,W=he;break e}else{u(W,z);break}else o(W,z);z=z.sibling}he=mf(Y,W.mode,he),he.return=W,W=he}return j(W);case P:return Oe=Y._init,Y=Oe(Y._payload),gt(W,z,Y,he)}if(ie(Y))return Ve(W,z,Y,he);if(G(Y)){if(Oe=G(Y),typeof Oe!="function")throw Error(s(150));return Y=Oe.call(Y),Be(W,z,Y,he)}if(typeof Y.then=="function")return gt(W,z,wu(Y),he);if(Y.$$typeof===A)return gt(W,z,lu(W,Y),he);_u(W,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,z!==null&&z.tag===6?(u(W,z.sibling),he=p(z,Y),he.return=W,W=he):(u(W,z),he=ff(Y,W.mode,he),he.return=W,W=he),j(W)):u(W,z)}return function(W,z,Y,he){try{vl=0;var Oe=gt(W,z,Y,he);return Ba=null,Oe}catch(Pe){if(Pe===cl||Pe===uu)throw Pe;var Ze=$s(29,Pe,null,W.mode);return Ze.lanes=he,Ze.return=W,Ze}finally{}}}var za=Iv(!0),Hv=Iv(!1),cr=J(null),Ir=null;function qn(i){var o=i.alternate;te(qt,qt.current&1),te(cr,i),Ir===null&&(o===null||La.current!==null||o.memoizedState!==null)&&(Ir=i)}function $v(i){if(i.tag===22){if(te(qt,qt.current),te(cr,i),Ir===null){var o=i.alternate;o!==null&&o.memoizedState!==null&&(Ir=i)}}else Xn()}function Xn(){te(qt,qt.current),te(cr,cr.current)}function un(i){ye(cr),Ir===i&&(Ir=null),ye(qt)}var qt=J(0);function Su(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Pm(u)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Yf(i,o,u,m){o=i.memoizedState,u=u(m,o),u=u==null?o:g({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var qf={enqueueSetState:function(i,o,u){i=i._reactInternals;var m=qs(),p=Gn(m);p.payload=o,u!=null&&(p.callback=u),o=Wn(i,p,m),o!==null&&(Xs(o,i,m),dl(o,i,m))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var m=qs(),p=Gn(m);p.tag=1,p.payload=o,u!=null&&(p.callback=u),o=Wn(i,p,m),o!==null&&(Xs(o,i,m),dl(o,i,m))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=qs(),m=Gn(u);m.tag=2,o!=null&&(m.callback=o),o=Wn(i,m,u),o!==null&&(Xs(o,i,u),dl(o,i,u))}};function Gv(i,o,u,m,p,y,j){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,y,j):o.prototype&&o.prototype.isPureReactComponent?!tl(u,m)||!tl(p,y):!0}function Wv(i,o,u,m){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,m),o.state!==i&&qf.enqueueReplaceState(o,o.state,null)}function Ui(i,o){var u=o;if("ref"in o){u={};for(var m in o)m!=="ref"&&(u[m]=o[m])}if(i=i.defaultProps){u===o&&(u=g({},u));for(var p in i)u[p]===void 0&&(u[p]=i[p])}return u}var ju=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Yv(i){ju(i)}function qv(i){console.error(i)}function Xv(i){ju(i)}function Cu(i,o){try{var u=i.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function Kv(i,o,u){try{var m=i.onCaughtError;m(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Xf(i,o,u){return u=Gn(u),u.tag=3,u.payload={element:null},u.callback=function(){Cu(i,o)},u}function Zv(i){return i=Gn(i),i.tag=3,i}function Qv(i,o,u,m){var p=u.type.getDerivedStateFromError;if(typeof p=="function"){var y=m.value;i.payload=function(){return p(y)},i.callback=function(){Kv(o,u,m)}}var j=u.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(i.callback=function(){Kv(o,u,m),typeof p!="function"&&(ti===null?ti=new Set([this]):ti.add(this));var k=m.stack;this.componentDidCatch(m.value,{componentStack:k!==null?k:""})})}function TC(i,o,u,m,p){if(u.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=u.alternate,o!==null&&al(o,u,p,!0),u=cr.current,u!==null){switch(u.tag){case 13:return Ir===null?ym():u.alternate===null&&Nt===0&&(Nt=3),u.flags&=-257,u.flags|=65536,u.lanes=p,m===jf?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([m]):o.add(m),wm(i,m,p)),!1;case 22:return u.flags|=65536,m===jf?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([m]):u.add(m)),wm(i,m,p)),!1}throw Error(s(435,u.tag))}return wm(i,m,p),ym(),!1}if(at)return o=cr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=p,m!==xf&&(i=Error(s(422),{cause:m}),il(ir(i,u)))):(m!==xf&&(o=Error(s(423),{cause:m}),il(ir(o,u))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,m=ir(m,u),p=Xf(i.stateNode,m,p),kf(i,p),Nt!==4&&(Nt=2)),!1;var y=Error(s(520),{cause:m});if(y=ir(y,u),Tl===null?Tl=[y]:Tl.push(y),Nt!==4&&(Nt=2),o===null)return!0;m=ir(m,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,i=p&-p,u.lanes|=i,i=Xf(u.stateNode,m,i),kf(u,i),!1;case 1:if(o=u.type,y=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ti===null||!ti.has(y))))return u.flags|=65536,p&=-p,u.lanes|=p,p=Zv(p),Qv(p,i,u,m),kf(u,p),!1}u=u.return}while(u!==null);return!1}var Jv=Error(s(461)),ts=!1;function ls(i,o,u,m){o.child=i===null?Hv(o,null,u,m):za(o,i.child,u,m)}function ey(i,o,u,m,p){u=u.render;var y=o.ref;if("ref"in m){var j={};for(var k in m)k!=="ref"&&(j[k]=m[k])}else j=m;return Fi(o),m=Of(i,o,u,j,y,p),k=Mf(),i!==null&&!ts?(Lf(i,o,p),dn(i,o,p)):(at&&k&&gf(o),o.flags|=1,ls(i,o,m,p),o.child)}function ty(i,o,u,m,p){if(i===null){var y=u.type;return typeof y=="function"&&!hf(y)&&y.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=y,sy(i,o,y,m,p)):(i=nu(u.type,null,m,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,!rm(i,p)){var j=y.memoizedProps;if(u=u.compare,u=u!==null?u:tl,u(j,m)&&i.ref===o.ref)return dn(i,o,p)}return o.flags|=1,i=rn(y,m),i.ref=o.ref,i.return=o,o.child=i}function sy(i,o,u,m,p){if(i!==null){var y=i.memoizedProps;if(tl(y,m)&&i.ref===o.ref)if(ts=!1,o.pendingProps=m=y,rm(i,p))(i.flags&131072)!==0&&(ts=!0);else return o.lanes=i.lanes,dn(i,o,p)}return Kf(i,o,u,m,p)}function ry(i,o,u){var m=o.pendingProps,p=m.children,y=i!==null?i.memoizedState:null;if(m.mode==="hidden"){if((o.flags&128)!==0){if(m=y!==null?y.baseLanes|u:u,i!==null){for(p=o.child=i.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;o.childLanes=y&~m}else o.childLanes=0,o.child=null;return ny(i,o,m,u)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&cu(o,y!==null?y.cachePool:null),y!==null?sv(o,y):Ef(),$v(o);else return o.lanes=o.childLanes=536870912,ny(i,o,y!==null?y.baseLanes|u:u,u)}else y!==null?(cu(o,y.cachePool),sv(o,y),Xn(),o.memoizedState=null):(i!==null&&cu(o,null),Ef(),Xn());return ls(i,o,p,u),o.child}function ny(i,o,u,m){var p=Sf();return p=p===null?null:{parent:Yt._currentValue,pool:p},o.memoizedState={baseLanes:u,cachePool:p},i!==null&&cu(o,null),Ef(),$v(o),i!==null&&al(i,o,m,!0),null}function Tu(i,o){var u=o.ref;if(u===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(s(284));(i===null||i.ref!==u)&&(o.flags|=4194816)}}function Kf(i,o,u,m,p){return Fi(o),u=Of(i,o,u,m,void 0,p),m=Mf(),i!==null&&!ts?(Lf(i,o,p),dn(i,o,p)):(at&&m&&gf(o),o.flags|=1,ls(i,o,u,p),o.child)}function iy(i,o,u,m,p,y){return Fi(o),o.updateQueue=null,u=nv(o,m,u,p),rv(i),m=Mf(),i!==null&&!ts?(Lf(i,o,y),dn(i,o,y)):(at&&m&&gf(o),o.flags|=1,ls(i,o,u,y),o.child)}function ay(i,o,u,m,p){if(Fi(o),o.stateNode===null){var y=Ea,j=u.contextType;typeof j=="object"&&j!==null&&(y=xs(j)),y=new u(m,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=qf,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=m,y.state=o.memoizedState,y.refs={},Cf(o),j=u.contextType,y.context=typeof j=="object"&&j!==null?xs(j):Ea,y.state=o.memoizedState,j=u.getDerivedStateFromProps,typeof j=="function"&&(Yf(o,u,j,m),y.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(j=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),j!==y.state&&qf.enqueueReplaceState(y,y.state,null),fl(o,m,y,p),hl(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(i===null){y=o.stateNode;var k=o.memoizedProps,R=Ui(u,k);y.props=R;var X=y.context,oe=u.contextType;j=Ea,typeof oe=="object"&&oe!==null&&(j=xs(oe));var ge=u.getDerivedStateFromProps;oe=typeof ge=="function"||typeof y.getSnapshotBeforeUpdate=="function",k=o.pendingProps!==k,oe||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(k||X!==j)&&Wv(o,y,m,j),$n=!1;var Z=o.memoizedState;y.state=Z,fl(o,m,y,p),hl(),X=o.memoizedState,k||Z!==X||$n?(typeof ge=="function"&&(Yf(o,u,ge,m),X=o.memoizedState),(R=$n||Gv(o,u,R,m,Z,X,j))?(oe||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=X),y.props=m,y.state=X,y.context=j,m=R):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{y=o.stateNode,Tf(i,o),j=o.memoizedProps,oe=Ui(u,j),y.props=oe,ge=o.pendingProps,Z=y.context,X=u.contextType,R=Ea,typeof X=="object"&&X!==null&&(R=xs(X)),k=u.getDerivedStateFromProps,(X=typeof k=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(j!==ge||Z!==R)&&Wv(o,y,m,R),$n=!1,Z=o.memoizedState,y.state=Z,fl(o,m,y,p),hl();var ee=o.memoizedState;j!==ge||Z!==ee||$n||i!==null&&i.dependencies!==null&&ou(i.dependencies)?(typeof k=="function"&&(Yf(o,u,k,m),ee=o.memoizedState),(oe=$n||Gv(o,u,oe,m,Z,ee,R)||i!==null&&i.dependencies!==null&&ou(i.dependencies))?(X||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(m,ee,R),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(m,ee,R)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||j===i.memoizedProps&&Z===i.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||j===i.memoizedProps&&Z===i.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=ee),y.props=m,y.state=ee,y.context=R,m=oe):(typeof y.componentDidUpdate!="function"||j===i.memoizedProps&&Z===i.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||j===i.memoizedProps&&Z===i.memoizedState||(o.flags|=1024),m=!1)}return y=m,Tu(i,o),m=(o.flags&128)!==0,y||m?(y=o.stateNode,u=m&&typeof u.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,i!==null&&m?(o.child=za(o,i.child,null,p),o.child=za(o,null,u,p)):ls(i,o,u,p),o.memoizedState=y.state,i=o.child):i=dn(i,o,p),i}function oy(i,o,u,m){return nl(),o.flags|=256,ls(i,o,u,m),o.child}var Zf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qf(i){return{baseLanes:i,cachePool:qx()}}function Jf(i,o,u){return i=i!==null?i.childLanes&~u:0,o&&(i|=ur),i}function ly(i,o,u){var m=o.pendingProps,p=!1,y=(o.flags&128)!==0,j;if((j=y)||(j=i!==null&&i.memoizedState===null?!1:(qt.current&2)!==0),j&&(p=!0,o.flags&=-129),j=(o.flags&32)!==0,o.flags&=-33,i===null){if(at){if(p?qn(o):Xn(),at){var k=Et,R;if(R=k){e:{for(R=k,k=Vr;R.nodeType!==8;){if(!k){k=null;break e}if(R=jr(R.nextSibling),R===null){k=null;break e}}k=R}k!==null?(o.memoizedState={dehydrated:k,treeContext:Oi!==null?{id:nn,overflow:an}:null,retryLane:536870912,hydrationErrors:null},R=$s(18,null,null,0),R.stateNode=k,R.return=o,o.child=R,Cs=o,Et=null,R=!0):R=!1}R||Ri(o)}if(k=o.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return Pm(k)?o.lanes=32:o.lanes=536870912,null;un(o)}return k=m.children,m=m.fallback,p?(Xn(),p=o.mode,k=ku({mode:"hidden",children:k},p),m=Di(m,p,u,null),k.return=o,m.return=o,k.sibling=m,o.child=k,p=o.child,p.memoizedState=Qf(u),p.childLanes=Jf(i,j,u),o.memoizedState=Zf,m):(qn(o),em(o,k))}if(R=i.memoizedState,R!==null&&(k=R.dehydrated,k!==null)){if(y)o.flags&256?(qn(o),o.flags&=-257,o=tm(i,o,u)):o.memoizedState!==null?(Xn(),o.child=i.child,o.flags|=128,o=null):(Xn(),p=m.fallback,k=o.mode,m=ku({mode:"visible",children:m.children},k),p=Di(p,k,u,null),p.flags|=2,m.return=o,p.return=o,m.sibling=p,o.child=m,za(o,i.child,null,u),m=o.child,m.memoizedState=Qf(u),m.childLanes=Jf(i,j,u),o.memoizedState=Zf,o=p);else if(qn(o),Pm(k)){if(j=k.nextSibling&&k.nextSibling.dataset,j)var X=j.dgst;j=X,m=Error(s(419)),m.stack="",m.digest=j,il({value:m,source:null,stack:null}),o=tm(i,o,u)}else if(ts||al(i,o,u,!1),j=(u&i.childLanes)!==0,ts||j){if(j=xt,j!==null&&(m=u&-u,m=(m&42)!==0?1:Yo(m),m=(m&(j.suspendedLanes|u))!==0?0:m,m!==0&&m!==R.retryLane))throw R.retryLane=m,Aa(i,m),Xs(j,i,m),Jv;k.data==="$?"||ym(),o=tm(i,o,u)}else k.data==="$?"?(o.flags|=192,o.child=i.child,o=null):(i=R.treeContext,Et=jr(k.nextSibling),Cs=o,at=!0,Li=null,Vr=!1,i!==null&&(or[lr++]=nn,or[lr++]=an,or[lr++]=Oi,nn=i.id,an=i.overflow,Oi=o),o=em(o,m.children),o.flags|=4096);return o}return p?(Xn(),p=m.fallback,k=o.mode,R=i.child,X=R.sibling,m=rn(R,{mode:"hidden",children:m.children}),m.subtreeFlags=R.subtreeFlags&65011712,X!==null?p=rn(X,p):(p=Di(p,k,u,null),p.flags|=2),p.return=o,m.return=o,m.sibling=p,o.child=m,m=p,p=o.child,k=i.child.memoizedState,k===null?k=Qf(u):(R=k.cachePool,R!==null?(X=Yt._currentValue,R=R.parent!==X?{parent:X,pool:X}:R):R=qx(),k={baseLanes:k.baseLanes|u,cachePool:R}),p.memoizedState=k,p.childLanes=Jf(i,j,u),o.memoizedState=Zf,m):(qn(o),u=i.child,i=u.sibling,u=rn(u,{mode:"visible",children:m.children}),u.return=o,u.sibling=null,i!==null&&(j=o.deletions,j===null?(o.deletions=[i],o.flags|=16):j.push(i)),o.child=u,o.memoizedState=null,u)}function em(i,o){return o=ku({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function ku(i,o){return i=$s(22,i,null,o),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function tm(i,o,u){return za(o,i.child,null,u),i=em(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function cy(i,o,u){i.lanes|=o;var m=i.alternate;m!==null&&(m.lanes|=o),yf(i.return,o,u)}function sm(i,o,u,m,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=m,y.tail=u,y.tailMode=p)}function uy(i,o,u){var m=o.pendingProps,p=m.revealOrder,y=m.tail;if(ls(i,o,m.children,u),m=qt.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&cy(i,u,o);else if(i.tag===19)cy(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}switch(te(qt,m),p){case"forwards":for(u=o.child,p=null;u!==null;)i=u.alternate,i!==null&&Su(i)===null&&(p=u),u=u.sibling;u=p,u===null?(p=o.child,o.child=null):(p=u.sibling,u.sibling=null),sm(o,!1,p,u,y);break;case"backwards":for(u=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&Su(i)===null){o.child=p;break}i=p.sibling,p.sibling=u,u=p,p=i}sm(o,!0,u,null,y);break;case"together":sm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function dn(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),ei|=o.lanes,(u&o.childLanes)===0)if(i!==null){if(al(i,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,u=rn(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=rn(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function rm(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&ou(i)))}function kC(i,o,u){switch(o.tag){case 3:Ce(o,o.stateNode.containerInfo),Hn(o,Yt,i.memoizedState.cache),nl();break;case 27:case 5:ce(o);break;case 4:Ce(o,o.stateNode.containerInfo);break;case 10:Hn(o,o.type,o.memoizedProps.value);break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(qn(o),o.flags|=128,null):(u&o.child.childLanes)!==0?ly(i,o,u):(qn(o),i=dn(i,o,u),i!==null?i.sibling:null);qn(o);break;case 19:var p=(i.flags&128)!==0;if(m=(u&o.childLanes)!==0,m||(al(i,o,u,!1),m=(u&o.childLanes)!==0),p){if(m)return uy(i,o,u);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),te(qt,qt.current),m)break;return null;case 22:case 23:return o.lanes=0,ry(i,o,u);case 24:Hn(o,Yt,i.memoizedState.cache)}return dn(i,o,u)}function dy(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps)ts=!0;else{if(!rm(i,u)&&(o.flags&128)===0)return ts=!1,kC(i,o,u);ts=(i.flags&131072)!==0}else ts=!1,at&&(o.flags&1048576)!==0&&Vx(o,au,o.index);switch(o.lanes=0,o.tag){case 16:e:{i=o.pendingProps;var m=o.elementType,p=m._init;if(m=p(m._payload),o.type=m,typeof m=="function")hf(m)?(i=Ui(m,i),o.tag=1,o=ay(null,o,m,i,u)):(o.tag=0,o=Kf(null,o,m,i,u));else{if(m!=null){if(p=m.$$typeof,p===O){o.tag=11,o=ey(null,o,m,i,u);break e}else if(p===B){o.tag=14,o=ty(null,o,m,i,u);break e}}throw o=Q(m)||m,Error(s(306,o,""))}}return o;case 0:return Kf(i,o,o.type,o.pendingProps,u);case 1:return m=o.type,p=Ui(m,o.pendingProps),ay(i,o,m,p,u);case 3:e:{if(Ce(o,o.stateNode.containerInfo),i===null)throw Error(s(387));m=o.pendingProps;var y=o.memoizedState;p=y.element,Tf(i,o),fl(o,m,null,u);var j=o.memoizedState;if(m=j.cache,Hn(o,Yt,m),m!==y.cache&&bf(o,[Yt],u,!0),hl(),m=j.element,y.isDehydrated)if(y={element:m,isDehydrated:!1,cache:j.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=oy(i,o,m,u);break e}else if(m!==p){p=ir(Error(s(424)),o),il(p),o=oy(i,o,m,u);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Et=jr(i.firstChild),Cs=o,at=!0,Li=null,Vr=!0,u=Hv(o,null,m,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(nl(),m===p){o=dn(i,o,u);break e}ls(i,o,m,u)}o=o.child}return o;case 26:return Tu(i,o),i===null?(u=g1(o.type,null,o.pendingProps,null))?o.memoizedState=u:at||(u=o.type,i=o.pendingProps,m=Vu(le.current).createElement(u),m[Ae]=o,m[Re]=i,us(m,u,i),ot(m),o.stateNode=m):o.memoizedState=g1(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return ce(o),i===null&&at&&(m=o.stateNode=h1(o.type,o.pendingProps,le.current),Cs=o,Vr=!0,p=Et,ni(o.type)?(Fm=p,Et=jr(m.firstChild)):Et=p),ls(i,o,o.pendingProps.children,u),Tu(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&at&&((p=m=Et)&&(m=t3(m,o.type,o.pendingProps,Vr),m!==null?(o.stateNode=m,Cs=o,Et=jr(m.firstChild),Vr=!1,p=!0):p=!1),p||Ri(o)),ce(o),p=o.type,y=o.pendingProps,j=i!==null?i.memoizedProps:null,m=y.children,Mm(p,y)?m=null:j!==null&&Mm(p,j)&&(o.flags|=32),o.memoizedState!==null&&(p=Of(i,o,yC,null,null,u),Rl._currentValue=p),Tu(i,o),ls(i,o,m,u),o.child;case 6:return i===null&&at&&((i=u=Et)&&(u=s3(u,o.pendingProps,Vr),u!==null?(o.stateNode=u,Cs=o,Et=null,i=!0):i=!1),i||Ri(o)),null;case 13:return ly(i,o,u);case 4:return Ce(o,o.stateNode.containerInfo),m=o.pendingProps,i===null?o.child=za(o,null,m,u):ls(i,o,m,u),o.child;case 11:return ey(i,o,o.type,o.pendingProps,u);case 7:return ls(i,o,o.pendingProps,u),o.child;case 8:return ls(i,o,o.pendingProps.children,u),o.child;case 12:return ls(i,o,o.pendingProps.children,u),o.child;case 10:return m=o.pendingProps,Hn(o,o.type,m.value),ls(i,o,m.children,u),o.child;case 9:return p=o.type._context,m=o.pendingProps.children,Fi(o),p=xs(p),m=m(p),o.flags|=1,ls(i,o,m,u),o.child;case 14:return ty(i,o,o.type,o.pendingProps,u);case 15:return sy(i,o,o.type,o.pendingProps,u);case 19:return uy(i,o,u);case 31:return m=o.pendingProps,u=o.mode,m={mode:m.mode,children:m.children},i===null?(u=ku(m,u),u.ref=o.ref,o.child=u,u.return=o,o=u):(u=rn(i.child,m),u.ref=o.ref,o.child=u,u.return=o,o=u),o;case 22:return ry(i,o,u);case 24:return Fi(o),m=xs(Yt),i===null?(p=Sf(),p===null&&(p=xt,y=wf(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=u),p=y),o.memoizedState={parent:m,cache:p},Cf(o),Hn(o,Yt,p)):((i.lanes&u)!==0&&(Tf(i,o),fl(o,null,null,u),hl()),p=i.memoizedState,y=o.memoizedState,p.parent!==m?(p={parent:m,cache:m},o.memoizedState=p,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=p),Hn(o,Yt,m)):(m=y.cache,Hn(o,Yt,m),m!==p.cache&&bf(o,[Yt],u,!0))),ls(i,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function hn(i){i.flags|=4}function hy(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!b1(o)){if(o=cr.current,o!==null&&((st&4194048)===st?Ir!==null:(st&62914560)!==st&&(st&536870912)===0||o!==Ir))throw ul=jf,Xx;i.flags|=8192}}function Au(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Go():536870912,i.lanes|=o,Ha|=o)}function bl(i,o){if(!at)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function Ct(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,m=0;if(o)for(var p=i.child;p!==null;)u|=p.lanes|p.childLanes,m|=p.subtreeFlags&65011712,m|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)u|=p.lanes|p.childLanes,m|=p.subtreeFlags,m|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=m,i.childLanes=u,o}function AC(i,o,u){var m=o.pendingProps;switch(pf(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(o),null;case 1:return Ct(o),null;case 3:return u=o.stateNode,m=null,i!==null&&(m=i.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),ln(Yt),Me(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(rl(o)?hn(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,$x())),Ct(o),null;case 26:return u=o.memoizedState,i===null?(hn(o),u!==null?(Ct(o),hy(o,u)):(Ct(o),o.flags&=-16777217)):u?u!==i.memoizedState?(hn(o),Ct(o),hy(o,u)):(Ct(o),o.flags&=-16777217):(i.memoizedProps!==m&&hn(o),Ct(o),o.flags&=-16777217),null;case 27:je(o),u=le.current;var p=o.type;if(i!==null&&o.stateNode!=null)i.memoizedProps!==m&&hn(o);else{if(!m){if(o.stateNode===null)throw Error(s(166));return Ct(o),null}i=fe.current,rl(o)?Ix(o):(i=h1(p,m,u),o.stateNode=i,hn(o))}return Ct(o),null;case 5:if(je(o),u=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==m&&hn(o);else{if(!m){if(o.stateNode===null)throw Error(s(166));return Ct(o),null}if(i=fe.current,rl(o))Ix(o);else{switch(p=Vu(le.current),i){case 1:i=p.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:i=p.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":i=p.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":i=p.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":i=p.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof m.is=="string"?p.createElement("select",{is:m.is}):p.createElement("select"),m.multiple?i.multiple=!0:m.size&&(i.size=m.size);break;default:i=typeof m.is=="string"?p.createElement(u,{is:m.is}):p.createElement(u)}}i[Ae]=o,i[Re]=m;e:for(p=o.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===o)break e;for(;p.sibling===null;){if(p.return===null||p.return===o)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}o.stateNode=i;e:switch(us(i,u,m),u){case"button":case"input":case"select":case"textarea":i=!!m.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&hn(o)}}return Ct(o),o.flags&=-16777217,null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==m&&hn(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(s(166));if(i=le.current,rl(o)){if(i=o.stateNode,u=o.memoizedProps,m=null,p=Cs,p!==null)switch(p.tag){case 27:case 5:m=p.memoizedProps}i[Ae]=o,i=!!(i.nodeValue===u||m!==null&&m.suppressHydrationWarning===!0||i1(i.nodeValue,u)),i||Ri(o)}else i=Vu(i).createTextNode(m),i[Ae]=o,o.stateNode=i}return Ct(o),null;case 13:if(m=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=rl(o),m!==null&&m.dehydrated!==null){if(i===null){if(!p)throw Error(s(318));if(p=o.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[Ae]=o}else nl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ct(o),p=!1}else p=$x(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return o.flags&256?(un(o),o):(un(o),null)}if(un(o),(o.flags&128)!==0)return o.lanes=u,o;if(u=m!==null,i=i!==null&&i.memoizedState!==null,u){m=o.child,p=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(p=m.alternate.memoizedState.cachePool.pool);var y=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(y=m.memoizedState.cachePool.pool),y!==p&&(m.flags|=2048)}return u!==i&&u&&(o.child.flags|=8192),Au(o,o.updateQueue),Ct(o),null;case 4:return Me(),i===null&&Am(o.stateNode.containerInfo),Ct(o),null;case 10:return ln(o.type),Ct(o),null;case 19:if(ye(qt),p=o.memoizedState,p===null)return Ct(o),null;if(m=(o.flags&128)!==0,y=p.rendering,y===null)if(m)bl(p,!1);else{if(Nt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(y=Su(i),y!==null){for(o.flags|=128,bl(p,!1),i=y.updateQueue,o.updateQueue=i,Au(o,i),o.subtreeFlags=0,i=u,u=o.child;u!==null;)Ux(u,i),u=u.sibling;return te(qt,qt.current&1|2),o.child}i=i.sibling}p.tail!==null&&Se()>Du&&(o.flags|=128,m=!0,bl(p,!1),o.lanes=4194304)}else{if(!m)if(i=Su(y),i!==null){if(o.flags|=128,m=!0,i=i.updateQueue,o.updateQueue=i,Au(o,i),bl(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!at)return Ct(o),null}else 2*Se()-p.renderingStartTime>Du&&u!==536870912&&(o.flags|=128,m=!0,bl(p,!1),o.lanes=4194304);p.isBackwards?(y.sibling=o.child,o.child=y):(i=p.last,i!==null?i.sibling=y:o.child=y,p.last=y)}return p.tail!==null?(o=p.tail,p.rendering=o,p.tail=o.sibling,p.renderingStartTime=Se(),o.sibling=null,i=qt.current,te(qt,m?i&1|2:i&1),o):(Ct(o),null);case 22:case 23:return un(o),Nf(),m=o.memoizedState!==null,i!==null?i.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(u&536870912)!==0&&(o.flags&128)===0&&(Ct(o),o.subtreeFlags&6&&(o.flags|=8192)):Ct(o),u=o.updateQueue,u!==null&&Au(o,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==u&&(o.flags|=2048),i!==null&&ye(Bi),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),ln(Yt),Ct(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function EC(i,o){switch(pf(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ln(Yt),Me(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return je(o),null;case 13:if(un(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));nl()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ye(qt),null;case 4:return Me(),null;case 10:return ln(o.type),null;case 22:case 23:return un(o),Nf(),i!==null&&ye(Bi),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return ln(Yt),null;case 25:return null;default:return null}}function fy(i,o){switch(pf(o),o.tag){case 3:ln(Yt),Me();break;case 26:case 27:case 5:je(o);break;case 4:Me();break;case 13:un(o);break;case 19:ye(qt);break;case 10:ln(o.type);break;case 22:case 23:un(o),Nf(),i!==null&&ye(Bi);break;case 24:ln(Yt)}}function wl(i,o){try{var u=o.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var p=m.next;u=p;do{if((u.tag&i)===i){m=void 0;var y=u.create,j=u.inst;m=y(),j.destroy=m}u=u.next}while(u!==p)}}catch(k){pt(o,o.return,k)}}function Kn(i,o,u){try{var m=o.updateQueue,p=m!==null?m.lastEffect:null;if(p!==null){var y=p.next;m=y;do{if((m.tag&i)===i){var j=m.inst,k=j.destroy;if(k!==void 0){j.destroy=void 0,p=o;var R=u,X=k;try{X()}catch(oe){pt(p,R,oe)}}}m=m.next}while(m!==y)}}catch(oe){pt(o,o.return,oe)}}function my(i){var o=i.updateQueue;if(o!==null){var u=i.stateNode;try{tv(o,u)}catch(m){pt(i,i.return,m)}}}function gy(i,o,u){u.props=Ui(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(m){pt(i,o,m)}}function _l(i,o){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var m=i.stateNode;break;case 30:m=i.stateNode;break;default:m=i.stateNode}typeof u=="function"?i.refCleanup=u(m):u.current=m}}catch(p){pt(i,o,p)}}function Hr(i,o){var u=i.ref,m=i.refCleanup;if(u!==null)if(typeof m=="function")try{m()}catch(p){pt(i,o,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(p){pt(i,o,p)}else u.current=null}function py(i){var o=i.type,u=i.memoizedProps,m=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&m.focus();break e;case"img":u.src?m.src=u.src:u.srcSet&&(m.srcset=u.srcSet)}}catch(p){pt(i,i.return,p)}}function nm(i,o,u){try{var m=i.stateNode;KC(m,i.type,u,o),m[Re]=o}catch(p){pt(i,i.return,p)}}function xy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ni(i.type)||i.tag===4}function im(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||xy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ni(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function am(i,o,u){var m=i.tag;if(m===5||m===6)i=i.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(i),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Uu));else if(m!==4&&(m===27&&ni(i.type)&&(u=i.stateNode,o=null),i=i.child,i!==null))for(am(i,o,u),i=i.sibling;i!==null;)am(i,o,u),i=i.sibling}function Eu(i,o,u){var m=i.tag;if(m===5||m===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(m!==4&&(m===27&&ni(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(Eu(i,o,u),i=i.sibling;i!==null;)Eu(i,o,u),i=i.sibling}function vy(i){var o=i.stateNode,u=i.memoizedProps;try{for(var m=i.type,p=o.attributes;p.length;)o.removeAttributeNode(p[0]);us(o,m,u),o[Ae]=i,o[Re]=u}catch(y){pt(i,i.return,y)}}var fn=!1,Lt=!1,om=!1,yy=typeof WeakSet=="function"?WeakSet:Set,ss=null;function NC(i,o){if(i=i.containerInfo,Dm=Yu,i=Nx(i),nf(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var p=m.anchorOffset,y=m.focusNode;m=m.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var j=0,k=-1,R=-1,X=0,oe=0,ge=i,Z=null;t:for(;;){for(var ee;ge!==u||p!==0&&ge.nodeType!==3||(k=j+p),ge!==y||m!==0&&ge.nodeType!==3||(R=j+m),ge.nodeType===3&&(j+=ge.nodeValue.length),(ee=ge.firstChild)!==null;)Z=ge,ge=ee;for(;;){if(ge===i)break t;if(Z===u&&++X===p&&(k=j),Z===y&&++oe===m&&(R=j),(ee=ge.nextSibling)!==null)break;ge=Z,Z=ge.parentNode}ge=ee}u=k===-1||R===-1?null:{start:k,end:R}}else u=null}u=u||{start:0,end:0}}else u=null;for(Om={focusedElem:i,selectionRange:u},Yu=!1,ss=o;ss!==null;)if(o=ss,i=o.child,(o.subtreeFlags&1024)!==0&&i!==null)i.return=o,ss=i;else for(;ss!==null;){switch(o=ss,y=o.alternate,i=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,u=o,p=y.memoizedProps,y=y.memoizedState,m=u.stateNode;try{var Ve=Ui(u.type,p,u.elementType===u.type);i=m.getSnapshotBeforeUpdate(Ve,y),m.__reactInternalSnapshotBeforeUpdate=i}catch(Be){pt(u,u.return,Be)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,u=i.nodeType,u===9)Rm(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Rm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,ss=i;break}ss=o.return}}function by(i,o,u){var m=u.flags;switch(u.tag){case 0:case 11:case 15:Zn(i,u),m&4&&wl(5,u);break;case 1:if(Zn(i,u),m&4)if(i=u.stateNode,o===null)try{i.componentDidMount()}catch(j){pt(u,u.return,j)}else{var p=Ui(u.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(p,o,i.__reactInternalSnapshotBeforeUpdate)}catch(j){pt(u,u.return,j)}}m&64&&my(u),m&512&&_l(u,u.return);break;case 3:if(Zn(i,u),m&64&&(i=u.updateQueue,i!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{tv(i,o)}catch(j){pt(u,u.return,j)}}break;case 27:o===null&&m&4&&vy(u);case 26:case 5:Zn(i,u),o===null&&m&4&&py(u),m&512&&_l(u,u.return);break;case 12:Zn(i,u);break;case 13:Zn(i,u),m&4&&Sy(i,u),m&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=zC.bind(null,u),r3(i,u))));break;case 22:if(m=u.memoizedState!==null||fn,!m){o=o!==null&&o.memoizedState!==null||Lt,p=fn;var y=Lt;fn=m,(Lt=o)&&!y?Qn(i,u,(u.subtreeFlags&8772)!==0):Zn(i,u),fn=p,Lt=y}break;case 30:break;default:Zn(i,u)}}function wy(i){var o=i.alternate;o!==null&&(i.alternate=null,wy(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&tn(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var wt=null,Os=!1;function mn(i,o,u){for(u=u.child;u!==null;)_y(i,o,u),u=u.sibling}function _y(i,o,u){if(be&&typeof be.onCommitFiberUnmount=="function")try{be.onCommitFiberUnmount(Le,u)}catch{}switch(u.tag){case 26:Lt||Hr(u,o),mn(i,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Lt||Hr(u,o);var m=wt,p=Os;ni(u.type)&&(wt=u.stateNode,Os=!1),mn(i,o,u),Dl(u.stateNode),wt=m,Os=p;break;case 5:Lt||Hr(u,o);case 6:if(m=wt,p=Os,wt=null,mn(i,o,u),wt=m,Os=p,wt!==null)if(Os)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(u.stateNode)}catch(y){pt(u,o,y)}else try{wt.removeChild(u.stateNode)}catch(y){pt(u,o,y)}break;case 18:wt!==null&&(Os?(i=wt,u1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),zl(i)):u1(wt,u.stateNode));break;case 4:m=wt,p=Os,wt=u.stateNode.containerInfo,Os=!0,mn(i,o,u),wt=m,Os=p;break;case 0:case 11:case 14:case 15:Lt||Kn(2,u,o),Lt||Kn(4,u,o),mn(i,o,u);break;case 1:Lt||(Hr(u,o),m=u.stateNode,typeof m.componentWillUnmount=="function"&&gy(u,o,m)),mn(i,o,u);break;case 21:mn(i,o,u);break;case 22:Lt=(m=Lt)||u.memoizedState!==null,mn(i,o,u),Lt=m;break;default:mn(i,o,u)}}function Sy(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{zl(i)}catch(u){pt(o,o.return,u)}}function DC(i){switch(i.tag){case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new yy),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new yy),o;default:throw Error(s(435,i.tag))}}function lm(i,o){var u=DC(i);o.forEach(function(m){var p=UC.bind(null,i,m);u.has(m)||(u.add(m),m.then(p,p))})}function Gs(i,o){var u=o.deletions;if(u!==null)for(var m=0;m<u.length;m++){var p=u[m],y=i,j=o,k=j;e:for(;k!==null;){switch(k.tag){case 27:if(ni(k.type)){wt=k.stateNode,Os=!1;break e}break;case 5:wt=k.stateNode,Os=!1;break e;case 3:case 4:wt=k.stateNode.containerInfo,Os=!0;break e}k=k.return}if(wt===null)throw Error(s(160));_y(y,j,p),wt=null,Os=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)jy(o,i),o=o.sibling}var Sr=null;function jy(i,o){var u=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Gs(o,i),Ws(i),m&4&&(Kn(3,i,i.return),wl(3,i),Kn(5,i,i.return));break;case 1:Gs(o,i),Ws(i),m&512&&(Lt||u===null||Hr(u,u.return)),m&64&&fn&&(i=i.updateQueue,i!==null&&(m=i.callbacks,m!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?m:u.concat(m))));break;case 26:var p=Sr;if(Gs(o,i),Ws(i),m&512&&(Lt||u===null||Hr(u,u.return)),m&4){var y=u!==null?u.memoizedState:null;if(m=i.memoizedState,u===null)if(m===null)if(i.stateNode===null){e:{m=i.type,u=i.memoizedProps,p=p.ownerDocument||p;t:switch(m){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Jt]||y[Ae]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(m),p.head.insertBefore(y,p.querySelector("head > title"))),us(y,m,u),y[Ae]=i,ot(y),m=y;break e;case"link":var j=v1("link","href",p).get(m+(u.href||""));if(j){for(var k=0;k<j.length;k++)if(y=j[k],y.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&y.getAttribute("rel")===(u.rel==null?null:u.rel)&&y.getAttribute("title")===(u.title==null?null:u.title)&&y.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){j.splice(k,1);break t}}y=p.createElement(m),us(y,m,u),p.head.appendChild(y);break;case"meta":if(j=v1("meta","content",p).get(m+(u.content||""))){for(k=0;k<j.length;k++)if(y=j[k],y.getAttribute("content")===(u.content==null?null:""+u.content)&&y.getAttribute("name")===(u.name==null?null:u.name)&&y.getAttribute("property")===(u.property==null?null:u.property)&&y.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&y.getAttribute("charset")===(u.charSet==null?null:u.charSet)){j.splice(k,1);break t}}y=p.createElement(m),us(y,m,u),p.head.appendChild(y);break;default:throw Error(s(468,m))}y[Ae]=i,ot(y),m=y}i.stateNode=m}else y1(p,i.type,i.stateNode);else i.stateNode=x1(p,m,i.memoizedProps);else y!==m?(y===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):y.count--,m===null?y1(p,i.type,i.stateNode):x1(p,m,i.memoizedProps)):m===null&&i.stateNode!==null&&nm(i,i.memoizedProps,u.memoizedProps)}break;case 27:Gs(o,i),Ws(i),m&512&&(Lt||u===null||Hr(u,u.return)),u!==null&&m&4&&nm(i,i.memoizedProps,u.memoizedProps);break;case 5:if(Gs(o,i),Ws(i),m&512&&(Lt||u===null||Hr(u,u.return)),i.flags&32){p=i.stateNode;try{wa(p,"")}catch(ee){pt(i,i.return,ee)}}m&4&&i.stateNode!=null&&(p=i.memoizedProps,nm(i,p,u!==null?u.memoizedProps:p)),m&1024&&(om=!0);break;case 6:if(Gs(o,i),Ws(i),m&4){if(i.stateNode===null)throw Error(s(162));m=i.memoizedProps,u=i.stateNode;try{u.nodeValue=m}catch(ee){pt(i,i.return,ee)}}break;case 3:if($u=null,p=Sr,Sr=Iu(o.containerInfo),Gs(o,i),Sr=p,Ws(i),m&4&&u!==null&&u.memoizedState.isDehydrated)try{zl(o.containerInfo)}catch(ee){pt(i,i.return,ee)}om&&(om=!1,Cy(i));break;case 4:m=Sr,Sr=Iu(i.stateNode.containerInfo),Gs(o,i),Ws(i),Sr=m;break;case 12:Gs(o,i),Ws(i);break;case 13:Gs(o,i),Ws(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(mm=Se()),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,lm(i,m)));break;case 22:p=i.memoizedState!==null;var R=u!==null&&u.memoizedState!==null,X=fn,oe=Lt;if(fn=X||p,Lt=oe||R,Gs(o,i),Lt=oe,fn=X,Ws(i),m&8192)e:for(o=i.stateNode,o._visibility=p?o._visibility&-2:o._visibility|1,p&&(u===null||R||fn||Lt||Vi(i)),u=null,o=i;;){if(o.tag===5||o.tag===26){if(u===null){R=u=o;try{if(y=R.stateNode,p)j=y.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{k=R.stateNode;var ge=R.memoizedProps.style,Z=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;k.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(ee){pt(R,R.return,ee)}}}else if(o.tag===6){if(u===null){R=o;try{R.stateNode.nodeValue=p?"":R.memoizedProps}catch(ee){pt(R,R.return,ee)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=i.updateQueue,m!==null&&(u=m.retryQueue,u!==null&&(m.retryQueue=null,lm(i,u))));break;case 19:Gs(o,i),Ws(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,lm(i,m)));break;case 30:break;case 21:break;default:Gs(o,i),Ws(i)}}function Ws(i){var o=i.flags;if(o&2){try{for(var u,m=i.return;m!==null;){if(xy(m)){u=m;break}m=m.return}if(u==null)throw Error(s(160));switch(u.tag){case 27:var p=u.stateNode,y=im(i);Eu(i,y,p);break;case 5:var j=u.stateNode;u.flags&32&&(wa(j,""),u.flags&=-33);var k=im(i);Eu(i,k,j);break;case 3:case 4:var R=u.stateNode.containerInfo,X=im(i);am(i,X,R);break;default:throw Error(s(161))}}catch(oe){pt(i,i.return,oe)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Cy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;Cy(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Zn(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)by(i,o.alternate,o),o=o.sibling}function Vi(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Kn(4,o,o.return),Vi(o);break;case 1:Hr(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&gy(o,o.return,u),Vi(o);break;case 27:Dl(o.stateNode);case 26:case 5:Hr(o,o.return),Vi(o);break;case 22:o.memoizedState===null&&Vi(o);break;case 30:Vi(o);break;default:Vi(o)}i=i.sibling}}function Qn(i,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,p=i,y=o,j=y.flags;switch(y.tag){case 0:case 11:case 15:Qn(p,y,u),wl(4,y);break;case 1:if(Qn(p,y,u),m=y,p=m.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(X){pt(m,m.return,X)}if(m=y,p=m.updateQueue,p!==null){var k=m.stateNode;try{var R=p.shared.hiddenCallbacks;if(R!==null)for(p.shared.hiddenCallbacks=null,p=0;p<R.length;p++)ev(R[p],k)}catch(X){pt(m,m.return,X)}}u&&j&64&&my(y),_l(y,y.return);break;case 27:vy(y);case 26:case 5:Qn(p,y,u),u&&m===null&&j&4&&py(y),_l(y,y.return);break;case 12:Qn(p,y,u);break;case 13:Qn(p,y,u),u&&j&4&&Sy(p,y);break;case 22:y.memoizedState===null&&Qn(p,y,u),_l(y,y.return);break;case 30:break;default:Qn(p,y,u)}o=o.sibling}}function cm(i,o){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&ol(u))}function um(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&ol(i))}function $r(i,o,u,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Ty(i,o,u,m),o=o.sibling}function Ty(i,o,u,m){var p=o.flags;switch(o.tag){case 0:case 11:case 15:$r(i,o,u,m),p&2048&&wl(9,o);break;case 1:$r(i,o,u,m);break;case 3:$r(i,o,u,m),p&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&ol(i)));break;case 12:if(p&2048){$r(i,o,u,m),i=o.stateNode;try{var y=o.memoizedProps,j=y.id,k=y.onPostCommit;typeof k=="function"&&k(j,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(R){pt(o,o.return,R)}}else $r(i,o,u,m);break;case 13:$r(i,o,u,m);break;case 23:break;case 22:y=o.stateNode,j=o.alternate,o.memoizedState!==null?y._visibility&2?$r(i,o,u,m):Sl(i,o):y._visibility&2?$r(i,o,u,m):(y._visibility|=2,Ua(i,o,u,m,(o.subtreeFlags&10256)!==0)),p&2048&&cm(j,o);break;case 24:$r(i,o,u,m),p&2048&&um(o.alternate,o);break;default:$r(i,o,u,m)}}function Ua(i,o,u,m,p){for(p=p&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var y=i,j=o,k=u,R=m,X=j.flags;switch(j.tag){case 0:case 11:case 15:Ua(y,j,k,R,p),wl(8,j);break;case 23:break;case 22:var oe=j.stateNode;j.memoizedState!==null?oe._visibility&2?Ua(y,j,k,R,p):Sl(y,j):(oe._visibility|=2,Ua(y,j,k,R,p)),p&&X&2048&&cm(j.alternate,j);break;case 24:Ua(y,j,k,R,p),p&&X&2048&&um(j.alternate,j);break;default:Ua(y,j,k,R,p)}o=o.sibling}}function Sl(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=i,m=o,p=m.flags;switch(m.tag){case 22:Sl(u,m),p&2048&&cm(m.alternate,m);break;case 24:Sl(u,m),p&2048&&um(m.alternate,m);break;default:Sl(u,m)}o=o.sibling}}var jl=8192;function Va(i){if(i.subtreeFlags&jl)for(i=i.child;i!==null;)ky(i),i=i.sibling}function ky(i){switch(i.tag){case 26:Va(i),i.flags&jl&&i.memoizedState!==null&&p3(Sr,i.memoizedState,i.memoizedProps);break;case 5:Va(i);break;case 3:case 4:var o=Sr;Sr=Iu(i.stateNode.containerInfo),Va(i),Sr=o;break;case 22:i.memoizedState===null&&(o=i.alternate,o!==null&&o.memoizedState!==null?(o=jl,jl=16777216,Va(i),jl=o):Va(i));break;default:Va(i)}}function Ay(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Cl(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];ss=m,Ny(m,i)}Ay(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ey(i),i=i.sibling}function Ey(i){switch(i.tag){case 0:case 11:case 15:Cl(i),i.flags&2048&&Kn(9,i,i.return);break;case 3:Cl(i);break;case 12:Cl(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Nu(i)):Cl(i);break;default:Cl(i)}}function Nu(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];ss=m,Ny(m,i)}Ay(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Kn(8,o,o.return),Nu(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Nu(o));break;default:Nu(o)}i=i.sibling}}function Ny(i,o){for(;ss!==null;){var u=ss;switch(u.tag){case 0:case 11:case 15:Kn(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var m=u.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:ol(u.memoizedState.cache)}if(m=u.child,m!==null)m.return=u,ss=m;else e:for(u=i;ss!==null;){m=ss;var p=m.sibling,y=m.return;if(wy(m),m===u){ss=null;break e}if(p!==null){p.return=y,ss=p;break e}ss=y}}}var OC={getCacheForType:function(i){var o=xs(Yt),u=o.data.get(i);return u===void 0&&(u=i(),o.data.set(i,u)),u}},MC=typeof WeakMap=="function"?WeakMap:Map,ut=0,xt=null,Qe=null,st=0,dt=0,Ys=null,Jn=!1,Ia=!1,dm=!1,gn=0,Nt=0,ei=0,Ii=0,hm=0,ur=0,Ha=0,Tl=null,Ms=null,fm=!1,mm=0,Du=1/0,Ou=null,ti=null,cs=0,si=null,$a=null,Ga=0,gm=0,pm=null,Dy=null,kl=0,xm=null;function qs(){if((ut&2)!==0&&st!==0)return st&-st;if(L.T!==null){var i=Oa;return i!==0?i:jm()}return ve()}function Oy(){ur===0&&(ur=(st&536870912)===0||at?$o():536870912);var i=cr.current;return i!==null&&(i.flags|=32),ur}function Xs(i,o,u){(i===xt&&(dt===2||dt===9)||i.cancelPendingCommit!==null)&&(Wa(i,0),ri(i,st,ur,!1)),ki(i,u),((ut&2)===0||i!==xt)&&(i===xt&&((ut&2)===0&&(Ii|=u),Nt===4&&ri(i,st,ur,!1)),Gr(i))}function My(i,o,u){if((ut&6)!==0)throw Error(s(327));var m=!u&&(o&124)===0&&(o&i.expiredLanes)===0||Ti(i,o),p=m?PC(i,o):bm(i,o,!0),y=m;do{if(p===0){Ia&&!m&&ri(i,o,0,!1);break}else{if(u=i.current.alternate,y&&!LC(u)){p=bm(i,o,!1),y=!1;continue}if(p===2){if(y=o,i.errorRecoveryDisabledLanes&y)var j=0;else j=i.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){o=j;e:{var k=i;p=Tl;var R=k.current.memoizedState.isDehydrated;if(R&&(Wa(k,j).flags|=256),j=bm(k,j,!1),j!==2){if(dm&&!R){k.errorRecoveryDisabledLanes|=y,Ii|=y,p=4;break e}y=Ms,Ms=p,y!==null&&(Ms===null?Ms=y:Ms.push.apply(Ms,y))}p=j}if(y=!1,p!==2)continue}}if(p===1){Wa(i,0),ri(i,o,0,!0);break}e:{switch(m=i,y=p,y){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:ri(m,o,ur,!Jn);break e;case 2:Ms=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(p=mm+300-Se(),10<p)){if(ri(m,o,ur,!Jn),ga(m,0,!0)!==0)break e;m.timeoutHandle=l1(Ly.bind(null,m,u,Ms,Ou,fm,o,ur,Ii,Ha,Jn,y,2,-0,0),p);break e}Ly(m,u,Ms,Ou,fm,o,ur,Ii,Ha,Jn,y,0,-0,0)}}break}while(!0);Gr(i)}function Ly(i,o,u,m,p,y,j,k,R,X,oe,ge,Z,ee){if(i.timeoutHandle=-1,ge=o.subtreeFlags,(ge&8192||(ge&16785408)===16785408)&&(Ll={stylesheets:null,count:0,unsuspend:g3},ky(o),ge=x3(),ge!==null)){i.cancelPendingCommit=ge(Vy.bind(null,i,o,y,u,m,p,j,k,R,oe,1,Z,ee)),ri(i,y,j,!X);return}Vy(i,o,y,u,m,p,j,k,R)}function LC(i){for(var o=i;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var m=0;m<u.length;m++){var p=u[m],y=p.getSnapshot;p=p.value;try{if(!Hs(y(),p))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ri(i,o,u,m){o&=~hm,o&=~Ii,i.suspendedLanes|=o,i.pingedLanes&=~o,m&&(i.warmLanes|=o),m=i.expirationTimes;for(var p=o;0<p;){var y=31-ue(p),j=1<<y;m[y]=-1,p&=~j}u!==0&&$c(i,u,o)}function Mu(){return(ut&6)===0?(Al(0),!1):!0}function vm(){if(Qe!==null){if(dt===0)var i=Qe.return;else i=Qe,on=Pi=null,Rf(i),Ba=null,vl=0,i=Qe;for(;i!==null;)fy(i.alternate,i),i=i.return;Qe=null}}function Wa(i,o){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,QC(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),vm(),xt=i,Qe=u=rn(i.current,null),st=o,dt=0,Ys=null,Jn=!1,Ia=Ti(i,o),dm=!1,Ha=ur=hm=Ii=ei=Nt=0,Ms=Tl=null,fm=!1,(o&8)!==0&&(o|=o&32);var m=i.entangledLanes;if(m!==0)for(i=i.entanglements,m&=o;0<m;){var p=31-ue(m),y=1<<p;o|=i[p],m&=~y}return gn=o,tu(),u}function Ry(i,o){Xe=null,L.H=bu,o===cl||o===uu?(o=Qx(),dt=3):o===Xx?(o=Qx(),dt=4):dt=o===Jv?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ys=o,Qe===null&&(Nt=1,Cu(i,ir(o,i.current)))}function Py(){var i=L.H;return L.H=bu,i===null?bu:i}function Fy(){var i=L.A;return L.A=OC,i}function ym(){Nt=4,Jn||(st&4194048)!==st&&cr.current!==null||(Ia=!0),(ei&134217727)===0&&(Ii&134217727)===0||xt===null||ri(xt,st,ur,!1)}function bm(i,o,u){var m=ut;ut|=2;var p=Py(),y=Fy();(xt!==i||st!==o)&&(Ou=null,Wa(i,o)),o=!1;var j=Nt;e:do try{if(dt!==0&&Qe!==null){var k=Qe,R=Ys;switch(dt){case 8:vm(),j=6;break e;case 3:case 2:case 9:case 6:cr.current===null&&(o=!0);var X=dt;if(dt=0,Ys=null,Ya(i,k,R,X),u&&Ia){j=0;break e}break;default:X=dt,dt=0,Ys=null,Ya(i,k,R,X)}}RC(),j=Nt;break}catch(oe){Ry(i,oe)}while(!0);return o&&i.shellSuspendCounter++,on=Pi=null,ut=m,L.H=p,L.A=y,Qe===null&&(xt=null,st=0,tu()),j}function RC(){for(;Qe!==null;)By(Qe)}function PC(i,o){var u=ut;ut|=2;var m=Py(),p=Fy();xt!==i||st!==o?(Ou=null,Du=Se()+500,Wa(i,o)):Ia=Ti(i,o);e:do try{if(dt!==0&&Qe!==null){o=Qe;var y=Ys;t:switch(dt){case 1:dt=0,Ys=null,Ya(i,o,y,1);break;case 2:case 9:if(Kx(y)){dt=0,Ys=null,zy(o);break}o=function(){dt!==2&&dt!==9||xt!==i||(dt=7),Gr(i)},y.then(o,o);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:Kx(y)?(dt=0,Ys=null,zy(o)):(dt=0,Ys=null,Ya(i,o,y,7));break;case 5:var j=null;switch(Qe.tag){case 26:j=Qe.memoizedState;case 5:case 27:var k=Qe;if(!j||b1(j)){dt=0,Ys=null;var R=k.sibling;if(R!==null)Qe=R;else{var X=k.return;X!==null?(Qe=X,Lu(X)):Qe=null}break t}}dt=0,Ys=null,Ya(i,o,y,5);break;case 6:dt=0,Ys=null,Ya(i,o,y,6);break;case 8:vm(),Nt=6;break e;default:throw Error(s(462))}}FC();break}catch(oe){Ry(i,oe)}while(!0);return on=Pi=null,L.H=m,L.A=p,ut=u,Qe!==null?0:(xt=null,st=0,tu(),Nt)}function FC(){for(;Qe!==null&&!Ee();)By(Qe)}function By(i){var o=dy(i.alternate,i,gn);i.memoizedProps=i.pendingProps,o===null?Lu(i):Qe=o}function zy(i){var o=i,u=o.alternate;switch(o.tag){case 15:case 0:o=iy(u,o,o.pendingProps,o.type,void 0,st);break;case 11:o=iy(u,o,o.pendingProps,o.type.render,o.ref,st);break;case 5:Rf(o);default:fy(u,o),o=Qe=Ux(o,gn),o=dy(u,o,gn)}i.memoizedProps=i.pendingProps,o===null?Lu(i):Qe=o}function Ya(i,o,u,m){on=Pi=null,Rf(o),Ba=null,vl=0;var p=o.return;try{if(TC(i,p,o,u,st)){Nt=1,Cu(i,ir(u,i.current)),Qe=null;return}}catch(y){if(p!==null)throw Qe=p,y;Nt=1,Cu(i,ir(u,i.current)),Qe=null;return}o.flags&32768?(at||m===1?i=!0:Ia||(st&536870912)!==0?i=!1:(Jn=i=!0,(m===2||m===9||m===3||m===6)&&(m=cr.current,m!==null&&m.tag===13&&(m.flags|=16384))),Uy(o,i)):Lu(o)}function Lu(i){var o=i;do{if((o.flags&32768)!==0){Uy(o,Jn);return}i=o.return;var u=AC(o.alternate,o,gn);if(u!==null){Qe=u;return}if(o=o.sibling,o!==null){Qe=o;return}Qe=o=i}while(o!==null);Nt===0&&(Nt=5)}function Uy(i,o){do{var u=EC(i.alternate,i);if(u!==null){u.flags&=32767,Qe=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(i=i.sibling,i!==null)){Qe=i;return}Qe=i=u}while(i!==null);Nt=6,Qe=null}function Vy(i,o,u,m,p,y,j,k,R){i.cancelPendingCommit=null;do Ru();while(cs!==0);if((ut&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(y=o.lanes|o.childLanes,y|=uf,Wo(i,u,y,j,k,R),i===xt&&(Qe=xt=null,st=0),$a=o,si=i,Ga=u,gm=y,pm=p,Dy=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,VC(js,function(){return Wy(),null})):(i.callbackNode=null,i.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=L.T,L.T=null,p=$.p,$.p=2,j=ut,ut|=4;try{NC(i,o,u)}finally{ut=j,$.p=p,L.T=m}}cs=1,Iy(),Hy(),$y()}}function Iy(){if(cs===1){cs=0;var i=si,o=$a,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=L.T,L.T=null;var m=$.p;$.p=2;var p=ut;ut|=4;try{jy(o,i);var y=Om,j=Nx(i.containerInfo),k=y.focusedElem,R=y.selectionRange;if(j!==k&&k&&k.ownerDocument&&Ex(k.ownerDocument.documentElement,k)){if(R!==null&&nf(k)){var X=R.start,oe=R.end;if(oe===void 0&&(oe=X),"selectionStart"in k)k.selectionStart=X,k.selectionEnd=Math.min(oe,k.value.length);else{var ge=k.ownerDocument||document,Z=ge&&ge.defaultView||window;if(Z.getSelection){var ee=Z.getSelection(),Ve=k.textContent.length,Be=Math.min(R.start,Ve),gt=R.end===void 0?Be:Math.min(R.end,Ve);!ee.extend&&Be>gt&&(j=gt,gt=Be,Be=j);var W=Ax(k,Be),z=Ax(k,gt);if(W&&z&&(ee.rangeCount!==1||ee.anchorNode!==W.node||ee.anchorOffset!==W.offset||ee.focusNode!==z.node||ee.focusOffset!==z.offset)){var Y=ge.createRange();Y.setStart(W.node,W.offset),ee.removeAllRanges(),Be>gt?(ee.addRange(Y),ee.extend(z.node,z.offset)):(Y.setEnd(z.node,z.offset),ee.addRange(Y))}}}}for(ge=[],ee=k;ee=ee.parentNode;)ee.nodeType===1&&ge.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<ge.length;k++){var he=ge[k];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}Yu=!!Dm,Om=Dm=null}finally{ut=p,$.p=m,L.T=u}}i.current=o,cs=2}}function Hy(){if(cs===2){cs=0;var i=si,o=$a,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=L.T,L.T=null;var m=$.p;$.p=2;var p=ut;ut|=4;try{by(i,o.alternate,o)}finally{ut=p,$.p=m,L.T=u}}cs=3}}function $y(){if(cs===4||cs===3){cs=0,$e();var i=si,o=$a,u=Ga,m=Dy;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?cs=5:(cs=0,$a=si=null,Gy(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(ti=null),q(u),o=o.stateNode,be&&typeof be.onCommitFiberRoot=="function")try{be.onCommitFiberRoot(Le,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=L.T,p=$.p,$.p=2,L.T=null;try{for(var y=i.onRecoverableError,j=0;j<m.length;j++){var k=m[j];y(k.value,{componentStack:k.stack})}}finally{L.T=o,$.p=p}}(Ga&3)!==0&&Ru(),Gr(i),p=i.pendingLanes,(u&4194090)!==0&&(p&42)!==0?i===xm?kl++:(kl=0,xm=i):kl=0,Al(0)}}function Gy(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,ol(o)))}function Ru(i){return Iy(),Hy(),$y(),Wy()}function Wy(){if(cs!==5)return!1;var i=si,o=gm;gm=0;var u=q(Ga),m=L.T,p=$.p;try{$.p=32>u?32:u,L.T=null,u=pm,pm=null;var y=si,j=Ga;if(cs=0,$a=si=null,Ga=0,(ut&6)!==0)throw Error(s(331));var k=ut;if(ut|=4,Ey(y.current),Ty(y,y.current,j,u),ut=k,Al(0,!1),be&&typeof be.onPostCommitFiberRoot=="function")try{be.onPostCommitFiberRoot(Le,y)}catch{}return!0}finally{$.p=p,L.T=m,Gy(i,o)}}function Yy(i,o,u){o=ir(u,o),o=Xf(i.stateNode,o,2),i=Wn(i,o,2),i!==null&&(ki(i,2),Gr(i))}function pt(i,o,u){if(i.tag===3)Yy(i,i,u);else for(;o!==null;){if(o.tag===3){Yy(o,i,u);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ti===null||!ti.has(m))){i=ir(u,i),u=Zv(2),m=Wn(o,u,2),m!==null&&(Qv(u,m,o,i),ki(m,2),Gr(m));break}}o=o.return}}function wm(i,o,u){var m=i.pingCache;if(m===null){m=i.pingCache=new MC;var p=new Set;m.set(o,p)}else p=m.get(o),p===void 0&&(p=new Set,m.set(o,p));p.has(u)||(dm=!0,p.add(u),i=BC.bind(null,i,o,u),o.then(i,i))}function BC(i,o,u){var m=i.pingCache;m!==null&&m.delete(o),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,xt===i&&(st&u)===u&&(Nt===4||Nt===3&&(st&62914560)===st&&300>Se()-mm?(ut&2)===0&&Wa(i,0):hm|=u,Ha===st&&(Ha=0)),Gr(i)}function qy(i,o){o===0&&(o=Go()),i=Aa(i,o),i!==null&&(ki(i,o),Gr(i))}function zC(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),qy(i,u)}function UC(i,o){var u=0;switch(i.tag){case 13:var m=i.stateNode,p=i.memoizedState;p!==null&&(u=p.retryLane);break;case 19:m=i.stateNode;break;case 22:m=i.stateNode._retryCache;break;default:throw Error(s(314))}m!==null&&m.delete(o),qy(i,u)}function VC(i,o){return we(i,o)}var Pu=null,qa=null,_m=!1,Fu=!1,Sm=!1,Hi=0;function Gr(i){i!==qa&&i.next===null&&(qa===null?Pu=qa=i:qa=qa.next=i),Fu=!0,_m||(_m=!0,HC())}function Al(i,o){if(!Sm&&Fu){Sm=!0;do for(var u=!1,m=Pu;m!==null;){if(i!==0){var p=m.pendingLanes;if(p===0)var y=0;else{var j=m.suspendedLanes,k=m.pingedLanes;y=(1<<31-ue(42|i)+1)-1,y&=p&~(j&~k),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(u=!0,Qy(m,y))}else y=st,y=ga(m,m===xt?y:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(y&3)===0||Ti(m,y)||(u=!0,Qy(m,y));m=m.next}while(u);Sm=!1}}function IC(){Xy()}function Xy(){Fu=_m=!1;var i=0;Hi!==0&&(ZC()&&(i=Hi),Hi=0);for(var o=Se(),u=null,m=Pu;m!==null;){var p=m.next,y=Ky(m,o);y===0?(m.next=null,u===null?Pu=p:u.next=p,p===null&&(qa=u)):(u=m,(i!==0||(y&3)!==0)&&(Fu=!0)),m=p}Al(i)}function Ky(i,o){for(var u=i.suspendedLanes,m=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var j=31-ue(y),k=1<<j,R=p[j];R===-1?((k&u)===0||(k&m)!==0)&&(p[j]=Hc(k,o)):R<=o&&(i.expiredLanes|=k),y&=~k}if(o=xt,u=st,u=ga(i,i===o?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m=i.callbackNode,u===0||i===o&&(dt===2||dt===9)||i.cancelPendingCommit!==null)return m!==null&&m!==null&&Ue(m),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||Ti(i,u)){if(o=u&-u,o===i.callbackPriority)return o;switch(m!==null&&Ue(m),q(u)){case 2:case 8:u=gs;break;case 32:u=js;break;case 268435456:u=Vs;break;default:u=js}return m=Zy.bind(null,i),u=we(u,m),i.callbackPriority=o,i.callbackNode=u,o}return m!==null&&m!==null&&Ue(m),i.callbackPriority=2,i.callbackNode=null,2}function Zy(i,o){if(cs!==0&&cs!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(Ru()&&i.callbackNode!==u)return null;var m=st;return m=ga(i,i===xt?m:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m===0?null:(My(i,m,o),Ky(i,Se()),i.callbackNode!=null&&i.callbackNode===u?Zy.bind(null,i):null)}function Qy(i,o){if(Ru())return null;My(i,o,!0)}function HC(){JC(function(){(ut&6)!==0?we($t,IC):Xy()})}function jm(){return Hi===0&&(Hi=$o()),Hi}function Jy(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:qc(""+i)}function e1(i,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,i.id&&u.setAttribute("form",i.id),o.parentNode.insertBefore(u,o),i=new FormData(i),u.parentNode.removeChild(u),i}function $C(i,o,u,m,p){if(o==="submit"&&u&&u.stateNode===p){var y=Jy((p[Re]||null).action),j=m.submitter;j&&(o=(o=j[Re]||null)?Jy(o.formAction):j.getAttribute("formAction"),o!==null&&(y=o,j=null));var k=new Qc("action","action",null,m,p);i.push({event:k,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Hi!==0){var R=j?e1(p,j):new FormData(p);$f(u,{pending:!0,data:R,method:p.method,action:y},null,R)}}else typeof y=="function"&&(k.preventDefault(),R=j?e1(p,j):new FormData(p),$f(u,{pending:!0,data:R,method:p.method,action:y},y,R))},currentTarget:p}]})}}for(var Cm=0;Cm<cf.length;Cm++){var Tm=cf[Cm],GC=Tm.toLowerCase(),WC=Tm[0].toUpperCase()+Tm.slice(1);_r(GC,"on"+WC)}_r(Mx,"onAnimationEnd"),_r(Lx,"onAnimationIteration"),_r(Rx,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(cC,"onTransitionRun"),_r(uC,"onTransitionStart"),_r(dC,"onTransitionCancel"),_r(Px,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ps("onBeforeInput",["compositionend","keypress","textInput","paste"]),ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(El));function t1(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var m=i[u],p=m.event;m=m.listeners;e:{var y=void 0;if(o)for(var j=m.length-1;0<=j;j--){var k=m[j],R=k.instance,X=k.currentTarget;if(k=k.listener,R!==y&&p.isPropagationStopped())break e;y=k,p.currentTarget=X;try{y(p)}catch(oe){ju(oe)}p.currentTarget=null,y=R}else for(j=0;j<m.length;j++){if(k=m[j],R=k.instance,X=k.currentTarget,k=k.listener,R!==y&&p.isPropagationStopped())break e;y=k,p.currentTarget=X;try{y(p)}catch(oe){ju(oe)}p.currentTarget=null,y=R}}}}function Je(i,o){var u=o[Ot];u===void 0&&(u=o[Ot]=new Set);var m=i+"__bubble";u.has(m)||(s1(o,i,2,!1),u.add(m))}function km(i,o,u){var m=0;o&&(m|=4),s1(u,i,m,o)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function Am(i){if(!i[Bu]){i[Bu]=!0,xa.forEach(function(u){u!=="selectionchange"&&(YC.has(u)||km(u,!1,i),km(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Bu]||(o[Bu]=!0,km("selectionchange",!1,o))}}function s1(i,o,u,m){switch(T1(o)){case 2:var p=b3;break;case 8:p=w3;break;default:p=Im}u=p.bind(null,o,u,i),p=void 0,!Xh||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),m?p!==void 0?i.addEventListener(o,u,{capture:!0,passive:p}):i.addEventListener(o,u,!0):p!==void 0?i.addEventListener(o,u,{passive:p}):i.addEventListener(o,u,!1)}function Em(i,o,u,m,p){var y=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var j=m.tag;if(j===3||j===4){var k=m.stateNode.containerInfo;if(k===p)break;if(j===4)for(j=m.return;j!==null;){var R=j.tag;if((R===3||R===4)&&j.stateNode.containerInfo===p)return;j=j.return}for(;k!==null;){if(j=es(k),j===null)return;if(R=j.tag,R===5||R===6||R===26||R===27){m=y=j;continue e}k=k.parentNode}}m=m.return}cx(function(){var X=y,oe=Yh(u),ge=[];e:{var Z=Fx.get(i);if(Z!==void 0){var ee=Qc,Ve=i;switch(i){case"keypress":if(Kc(u)===0)break e;case"keydown":case"keyup":ee=Vj;break;case"focusin":Ve="focus",ee=Jh;break;case"focusout":Ve="blur",ee=Jh;break;case"beforeblur":case"afterblur":ee=Jh;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=hx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Ej;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=$j;break;case Mx:case Lx:case Rx:ee=Oj;break;case Px:ee=Wj;break;case"scroll":case"scrollend":ee=kj;break;case"wheel":ee=qj;break;case"copy":case"cut":case"paste":ee=Lj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=mx;break;case"toggle":case"beforetoggle":ee=Kj}var Be=(o&4)!==0,gt=!Be&&(i==="scroll"||i==="scrollend"),W=Be?Z!==null?Z+"Capture":null:Z;Be=[];for(var z=X,Y;z!==null;){var he=z;if(Y=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||Y===null||W===null||(he=qo(z,W),he!=null&&Be.push(Nl(z,he,Y))),gt)break;z=z.return}0<Be.length&&(Z=new ee(Z,Ve,null,u,oe),ge.push({event:Z,listeners:Be}))}}if((o&7)===0){e:{if(Z=i==="mouseover"||i==="pointerover",ee=i==="mouseout"||i==="pointerout",Z&&u!==Wh&&(Ve=u.relatedTarget||u.fromElement)&&(es(Ve)||Ve[Ge]))break e;if((ee||Z)&&(Z=oe.window===oe?oe:(Z=oe.ownerDocument)?Z.defaultView||Z.parentWindow:window,ee?(Ve=u.relatedTarget||u.toElement,ee=X,Ve=Ve?es(Ve):null,Ve!==null&&(gt=a(Ve),Be=Ve.tag,Ve!==gt||Be!==5&&Be!==27&&Be!==6)&&(Ve=null)):(ee=null,Ve=X),ee!==Ve)){if(Be=hx,he="onMouseLeave",W="onMouseEnter",z="mouse",(i==="pointerout"||i==="pointerover")&&(Be=mx,he="onPointerLeave",W="onPointerEnter",z="pointer"),gt=ee==null?Z:Ur(ee),Y=Ve==null?Z:Ur(Ve),Z=new Be(he,z+"leave",ee,u,oe),Z.target=gt,Z.relatedTarget=Y,he=null,es(oe)===X&&(Be=new Be(W,z+"enter",Ve,u,oe),Be.target=Y,Be.relatedTarget=gt,he=Be),gt=he,ee&&Ve)t:{for(Be=ee,W=Ve,z=0,Y=Be;Y;Y=Xa(Y))z++;for(Y=0,he=W;he;he=Xa(he))Y++;for(;0<z-Y;)Be=Xa(Be),z--;for(;0<Y-z;)W=Xa(W),Y--;for(;z--;){if(Be===W||W!==null&&Be===W.alternate)break t;Be=Xa(Be),W=Xa(W)}Be=null}else Be=null;ee!==null&&r1(ge,Z,ee,Be,!1),Ve!==null&&gt!==null&&r1(ge,gt,Ve,Be,!0)}}e:{if(Z=X?Ur(X):window,ee=Z.nodeName&&Z.nodeName.toLowerCase(),ee==="select"||ee==="input"&&Z.type==="file")var Oe=_x;else if(bx(Z))if(Sx)Oe=aC;else{Oe=nC;var Ze=rC}else ee=Z.nodeName,!ee||ee.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?X&&Gh(X.elementType)&&(Oe=_x):Oe=iC;if(Oe&&(Oe=Oe(i,X))){wx(ge,Oe,u,oe);break e}Ze&&Ze(i,Z,X),i==="focusout"&&X&&Z.type==="number"&&X.memoizedProps.value!=null&&$h(Z,"number",Z.value)}switch(Ze=X?Ur(X):window,i){case"focusin":(bx(Ze)||Ze.contentEditable==="true")&&(Ca=Ze,af=X,sl=null);break;case"focusout":sl=af=Ca=null;break;case"mousedown":of=!0;break;case"contextmenu":case"mouseup":case"dragend":of=!1,Dx(ge,u,oe);break;case"selectionchange":if(lC)break;case"keydown":case"keyup":Dx(ge,u,oe)}var Pe;if(tf)e:{switch(i){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else ja?vx(i,u)&&(ze="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(ze="onCompositionStart");ze&&(gx&&u.locale!=="ko"&&(ja||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&ja&&(Pe=ux()):(In=oe,Kh="value"in In?In.value:In.textContent,ja=!0)),Ze=zu(X,ze),0<Ze.length&&(ze=new fx(ze,i,null,u,oe),ge.push({event:ze,listeners:Ze}),Pe?ze.data=Pe:(Pe=yx(u),Pe!==null&&(ze.data=Pe)))),(Pe=Qj?Jj(i,u):eC(i,u))&&(ze=zu(X,"onBeforeInput"),0<ze.length&&(Ze=new fx("onBeforeInput","beforeinput",null,u,oe),ge.push({event:Ze,listeners:ze}),Ze.data=Pe)),$C(ge,i,X,u,oe)}t1(ge,o)})}function Nl(i,o,u){return{instance:i,listener:o,currentTarget:u}}function zu(i,o){for(var u=o+"Capture",m=[];i!==null;){var p=i,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=qo(i,u),p!=null&&m.unshift(Nl(i,p,y)),p=qo(i,o),p!=null&&m.push(Nl(i,p,y))),i.tag===3)return m;i=i.return}return[]}function Xa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function r1(i,o,u,m,p){for(var y=o._reactName,j=[];u!==null&&u!==m;){var k=u,R=k.alternate,X=k.stateNode;if(k=k.tag,R!==null&&R===m)break;k!==5&&k!==26&&k!==27||X===null||(R=X,p?(X=qo(u,y),X!=null&&j.unshift(Nl(u,X,R))):p||(X=qo(u,y),X!=null&&j.push(Nl(u,X,R)))),u=u.return}j.length!==0&&i.push({event:o,listeners:j})}var qC=/\r\n?/g,XC=/\u0000|\uFFFD/g;function n1(i){return(typeof i=="string"?i:""+i).replace(qC,`
`).replace(XC,"")}function i1(i,o){return o=n1(o),n1(i)===o}function Uu(){}function mt(i,o,u,m,p,y){switch(u){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||wa(i,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&wa(i,""+m);break;case"className":Bt(i,"class",m);break;case"tabIndex":Bt(i,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Bt(i,u,m);break;case"style":ox(i,m,y);break;case"data":if(o!=="object"){Bt(i,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||u!=="href")){i.removeAttribute(u);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(u);break}m=qc(""+m),i.setAttribute(u,m);break;case"action":case"formAction":if(typeof m=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(u==="formAction"?(o!=="input"&&mt(i,o,"name",p.name,p,null),mt(i,o,"formEncType",p.formEncType,p,null),mt(i,o,"formMethod",p.formMethod,p,null),mt(i,o,"formTarget",p.formTarget,p,null)):(mt(i,o,"encType",p.encType,p,null),mt(i,o,"method",p.method,p,null),mt(i,o,"target",p.target,p,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(u);break}m=qc(""+m),i.setAttribute(u,m);break;case"onClick":m!=null&&(i.onclick=Uu);break;case"onScroll":m!=null&&Je("scroll",i);break;case"onScrollEnd":m!=null&&Je("scrollend",i);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(s(61));if(u=m.__html,u!=null){if(p.children!=null)throw Error(s(60));i.innerHTML=u}}break;case"multiple":i.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":i.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){i.removeAttribute("xlink:href");break}u=qc(""+m),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(u,""+m):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":m===!0?i.setAttribute(u,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(u,m):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?i.setAttribute(u,m):i.removeAttribute(u);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?i.removeAttribute(u):i.setAttribute(u,m);break;case"popover":Je("beforetoggle",i),Je("toggle",i),sr(i,"popover",m);break;case"xlinkActuate":bt(i,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":bt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":bt(i,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":bt(i,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":bt(i,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":bt(i,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":bt(i,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":bt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":bt(i,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":sr(i,"is",m);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Cj.get(u)||u,sr(i,u,m))}}function Nm(i,o,u,m,p,y){switch(u){case"style":ox(i,m,y);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(s(61));if(u=m.__html,u!=null){if(p.children!=null)throw Error(s(60));i.innerHTML=u}}break;case"children":typeof m=="string"?wa(i,m):(typeof m=="number"||typeof m=="bigint")&&wa(i,""+m);break;case"onScroll":m!=null&&Je("scroll",i);break;case"onScrollEnd":m!=null&&Je("scrollend",i);break;case"onClick":m!=null&&(i.onclick=Uu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!va.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(p=u.endsWith("Capture"),o=u.slice(2,p?u.length-7:void 0),y=i[Re]||null,y=y!=null?y[u]:null,typeof y=="function"&&i.removeEventListener(o,y,p),typeof m=="function")){typeof y!="function"&&y!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(o,m,p);break e}u in i?i[u]=m:m===!0?i.setAttribute(u,""):sr(i,u,m)}}}function us(i,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",i),Je("load",i);var m=!1,p=!1,y;for(y in u)if(u.hasOwnProperty(y)){var j=u[y];if(j!=null)switch(y){case"src":m=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:mt(i,o,y,j,u,null)}}p&&mt(i,o,"srcSet",u.srcSet,u,null),m&&mt(i,o,"src",u.src,u,null);return;case"input":Je("invalid",i);var k=y=j=p=null,R=null,X=null;for(m in u)if(u.hasOwnProperty(m)){var oe=u[m];if(oe!=null)switch(m){case"name":p=oe;break;case"type":j=oe;break;case"checked":R=oe;break;case"defaultChecked":X=oe;break;case"value":y=oe;break;case"defaultValue":k=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(s(137,o));break;default:mt(i,o,m,oe,u,null)}}rx(i,y,k,R,X,j,p,!1),Wc(i);return;case"select":Je("invalid",i),m=j=y=null;for(p in u)if(u.hasOwnProperty(p)&&(k=u[p],k!=null))switch(p){case"value":y=k;break;case"defaultValue":j=k;break;case"multiple":m=k;default:mt(i,o,p,k,u,null)}o=y,u=j,i.multiple=!!m,o!=null?ba(i,!!m,o,!1):u!=null&&ba(i,!!m,u,!0);return;case"textarea":Je("invalid",i),y=p=m=null;for(j in u)if(u.hasOwnProperty(j)&&(k=u[j],k!=null))switch(j){case"value":m=k;break;case"defaultValue":p=k;break;case"children":y=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(91));break;default:mt(i,o,j,k,u,null)}ix(i,m,p,y),Wc(i);return;case"option":for(R in u)if(u.hasOwnProperty(R)&&(m=u[R],m!=null))switch(R){case"selected":i.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:mt(i,o,R,m,u,null)}return;case"dialog":Je("beforetoggle",i),Je("toggle",i),Je("cancel",i),Je("close",i);break;case"iframe":case"object":Je("load",i);break;case"video":case"audio":for(m=0;m<El.length;m++)Je(El[m],i);break;case"image":Je("error",i),Je("load",i);break;case"details":Je("toggle",i);break;case"embed":case"source":case"link":Je("error",i),Je("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in u)if(u.hasOwnProperty(X)&&(m=u[X],m!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:mt(i,o,X,m,u,null)}return;default:if(Gh(o)){for(oe in u)u.hasOwnProperty(oe)&&(m=u[oe],m!==void 0&&Nm(i,o,oe,m,u,void 0));return}}for(k in u)u.hasOwnProperty(k)&&(m=u[k],m!=null&&mt(i,o,k,m,u,null))}function KC(i,o,u,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,j=null,k=null,R=null,X=null,oe=null;for(ee in u){var ge=u[ee];if(u.hasOwnProperty(ee)&&ge!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":R=ge;default:m.hasOwnProperty(ee)||mt(i,o,ee,null,m,ge)}}for(var Z in m){var ee=m[Z];if(ge=u[Z],m.hasOwnProperty(Z)&&(ee!=null||ge!=null))switch(Z){case"type":y=ee;break;case"name":p=ee;break;case"checked":X=ee;break;case"defaultChecked":oe=ee;break;case"value":j=ee;break;case"defaultValue":k=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,o));break;default:ee!==ge&&mt(i,o,Z,ee,m,ge)}}Hh(i,j,k,R,X,oe,y,p);return;case"select":ee=j=k=Z=null;for(y in u)if(R=u[y],u.hasOwnProperty(y)&&R!=null)switch(y){case"value":break;case"multiple":ee=R;default:m.hasOwnProperty(y)||mt(i,o,y,null,m,R)}for(p in m)if(y=m[p],R=u[p],m.hasOwnProperty(p)&&(y!=null||R!=null))switch(p){case"value":Z=y;break;case"defaultValue":k=y;break;case"multiple":j=y;default:y!==R&&mt(i,o,p,y,m,R)}o=k,u=j,m=ee,Z!=null?ba(i,!!u,Z,!1):!!m!=!!u&&(o!=null?ba(i,!!u,o,!0):ba(i,!!u,u?[]:"",!1));return;case"textarea":ee=Z=null;for(k in u)if(p=u[k],u.hasOwnProperty(k)&&p!=null&&!m.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:mt(i,o,k,null,m,p)}for(j in m)if(p=m[j],y=u[j],m.hasOwnProperty(j)&&(p!=null||y!=null))switch(j){case"value":Z=p;break;case"defaultValue":ee=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==y&&mt(i,o,j,p,m,y)}nx(i,Z,ee);return;case"option":for(var Ve in u)if(Z=u[Ve],u.hasOwnProperty(Ve)&&Z!=null&&!m.hasOwnProperty(Ve))switch(Ve){case"selected":i.selected=!1;break;default:mt(i,o,Ve,null,m,Z)}for(R in m)if(Z=m[R],ee=u[R],m.hasOwnProperty(R)&&Z!==ee&&(Z!=null||ee!=null))switch(R){case"selected":i.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:mt(i,o,R,Z,m,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in u)Z=u[Be],u.hasOwnProperty(Be)&&Z!=null&&!m.hasOwnProperty(Be)&&mt(i,o,Be,null,m,Z);for(X in m)if(Z=m[X],ee=u[X],m.hasOwnProperty(X)&&Z!==ee&&(Z!=null||ee!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,o));break;default:mt(i,o,X,Z,m,ee)}return;default:if(Gh(o)){for(var gt in u)Z=u[gt],u.hasOwnProperty(gt)&&Z!==void 0&&!m.hasOwnProperty(gt)&&Nm(i,o,gt,void 0,m,Z);for(oe in m)Z=m[oe],ee=u[oe],!m.hasOwnProperty(oe)||Z===ee||Z===void 0&&ee===void 0||Nm(i,o,oe,Z,m,ee);return}}for(var W in u)Z=u[W],u.hasOwnProperty(W)&&Z!=null&&!m.hasOwnProperty(W)&&mt(i,o,W,null,m,Z);for(ge in m)Z=m[ge],ee=u[ge],!m.hasOwnProperty(ge)||Z===ee||Z==null&&ee==null||mt(i,o,ge,Z,m,ee)}var Dm=null,Om=null;function Vu(i){return i.nodeType===9?i:i.ownerDocument}function a1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function o1(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Mm(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Lm=null;function ZC(){var i=window.event;return i&&i.type==="popstate"?i===Lm?!1:(Lm=i,!0):(Lm=null,!1)}var l1=typeof setTimeout=="function"?setTimeout:void 0,QC=typeof clearTimeout=="function"?clearTimeout:void 0,c1=typeof Promise=="function"?Promise:void 0,JC=typeof queueMicrotask=="function"?queueMicrotask:typeof c1<"u"?function(i){return c1.resolve(null).then(i).catch(e3)}:l1;function e3(i){setTimeout(function(){throw i})}function ni(i){return i==="head"}function u1(i,o){var u=o,m=0,p=0;do{var y=u.nextSibling;if(i.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"){if(0<m&&8>m){u=m;var j=i.ownerDocument;if(u&1&&Dl(j.documentElement),u&2&&Dl(j.body),u&4)for(u=j.head,Dl(u),j=u.firstChild;j;){var k=j.nextSibling,R=j.nodeName;j[Jt]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&j.rel.toLowerCase()==="stylesheet"||u.removeChild(j),j=k}}if(p===0){i.removeChild(y),zl(o);return}p--}else u==="$"||u==="$?"||u==="$!"?p++:m=u.charCodeAt(0)-48;else m=0;u=y}while(u);zl(o)}function Rm(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Rm(u),tn(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function t3(i,o,u,m){for(;i.nodeType===1;){var p=u;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(m){if(!i[Jt])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=jr(i.nextSibling),i===null)break}return null}function s3(i,o,u){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=jr(i.nextSibling),i===null))return null;return i}function Pm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function r3(i,o){var u=i.ownerDocument;if(i.data!=="$?"||u.readyState==="complete")o();else{var m=function(){o(),u.removeEventListener("DOMContentLoaded",m)};u.addEventListener("DOMContentLoaded",m),i._reactRetry=m}}function jr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return i}var Fm=null;function d1(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}function h1(i,o,u){switch(o=Vu(u),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Dl(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);tn(i)}var dr=new Map,f1=new Set;function Iu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var pn=$.d;$.d={f:n3,r:i3,D:a3,C:o3,L:l3,m:c3,X:d3,S:u3,M:h3};function n3(){var i=pn.f(),o=Mu();return i||o}function i3(i){var o=br(i);o!==null&&o.tag===5&&o.type==="form"?Mv(o):pn.r(i)}var Ka=typeof document>"u"?null:document;function m1(i,o,u){var m=Ka;if(m&&typeof o=="string"&&o){var p=nr(o);p='link[rel="'+i+'"][href="'+p+'"]',typeof u=="string"&&(p+='[crossorigin="'+u+'"]'),f1.has(p)||(f1.add(p),i={rel:i,crossOrigin:u,href:o},m.querySelector(p)===null&&(o=m.createElement("link"),us(o,"link",i),ot(o),m.head.appendChild(o)))}}function a3(i){pn.D(i),m1("dns-prefetch",i,null)}function o3(i,o){pn.C(i,o),m1("preconnect",i,o)}function l3(i,o,u){pn.L(i,o,u);var m=Ka;if(m&&i&&o){var p='link[rel="preload"][as="'+nr(o)+'"]';o==="image"&&u&&u.imageSrcSet?(p+='[imagesrcset="'+nr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(p+='[imagesizes="'+nr(u.imageSizes)+'"]')):p+='[href="'+nr(i)+'"]';var y=p;switch(o){case"style":y=Za(i);break;case"script":y=Qa(i)}dr.has(y)||(i=g({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:i,as:o},u),dr.set(y,i),m.querySelector(p)!==null||o==="style"&&m.querySelector(Ol(y))||o==="script"&&m.querySelector(Ml(y))||(o=m.createElement("link"),us(o,"link",i),ot(o),m.head.appendChild(o)))}}function c3(i,o){pn.m(i,o);var u=Ka;if(u&&i){var m=o&&typeof o.as=="string"?o.as:"script",p='link[rel="modulepreload"][as="'+nr(m)+'"][href="'+nr(i)+'"]',y=p;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Qa(i)}if(!dr.has(y)&&(i=g({rel:"modulepreload",href:i},o),dr.set(y,i),u.querySelector(p)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Ml(y)))return}m=u.createElement("link"),us(m,"link",i),ot(m),u.head.appendChild(m)}}}function u3(i,o,u){pn.S(i,o,u);var m=Ka;if(m&&i){var p=Is(m).hoistableStyles,y=Za(i);o=o||"default";var j=p.get(y);if(!j){var k={loading:0,preload:null};if(j=m.querySelector(Ol(y)))k.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":o},u),(u=dr.get(y))&&Bm(i,u);var R=j=m.createElement("link");ot(R),us(R,"link",i),R._p=new Promise(function(X,oe){R.onload=X,R.onerror=oe}),R.addEventListener("load",function(){k.loading|=1}),R.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Hu(j,o,m)}j={type:"stylesheet",instance:j,count:1,state:k},p.set(y,j)}}}function d3(i,o){pn.X(i,o);var u=Ka;if(u&&i){var m=Is(u).hoistableScripts,p=Qa(i),y=m.get(p);y||(y=u.querySelector(Ml(p)),y||(i=g({src:i,async:!0},o),(o=dr.get(p))&&zm(i,o),y=u.createElement("script"),ot(y),us(y,"link",i),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},m.set(p,y))}}function h3(i,o){pn.M(i,o);var u=Ka;if(u&&i){var m=Is(u).hoistableScripts,p=Qa(i),y=m.get(p);y||(y=u.querySelector(Ml(p)),y||(i=g({src:i,async:!0,type:"module"},o),(o=dr.get(p))&&zm(i,o),y=u.createElement("script"),ot(y),us(y,"link",i),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},m.set(p,y))}}function g1(i,o,u,m){var p=(p=le.current)?Iu(p):null;if(!p)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=Za(u.href),u=Is(p).hoistableStyles,m=u.get(o),m||(m={type:"style",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=Za(u.href);var y=Is(p).hoistableStyles,j=y.get(i);if(j||(p=p.ownerDocument||p,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,j),(y=p.querySelector(Ol(i)))&&!y._p&&(j.instance=y,j.state.loading=5),dr.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},dr.set(i,u),y||f3(p,i,u,j.state))),o&&m===null)throw Error(s(528,""));return j}if(o&&m!==null)throw Error(s(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Qa(u),u=Is(p).hoistableScripts,m=u.get(o),m||(m={type:"script",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Za(i){return'href="'+nr(i)+'"'}function Ol(i){return'link[rel="stylesheet"]['+i+"]"}function p1(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function f3(i,o,u,m){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=i.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),us(o,"link",u),ot(o),i.head.appendChild(o))}function Qa(i){return'[src="'+nr(i)+'"]'}function Ml(i){return"script[async]"+i}function x1(i,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var m=i.querySelector('style[data-href~="'+nr(u.href)+'"]');if(m)return o.instance=m,ot(m),m;var p=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return m=(i.ownerDocument||i).createElement("style"),ot(m),us(m,"style",p),Hu(m,u.precedence,i),o.instance=m;case"stylesheet":p=Za(u.href);var y=i.querySelector(Ol(p));if(y)return o.state.loading|=4,o.instance=y,ot(y),y;m=p1(u),(p=dr.get(p))&&Bm(m,p),y=(i.ownerDocument||i).createElement("link"),ot(y);var j=y;return j._p=new Promise(function(k,R){j.onload=k,j.onerror=R}),us(y,"link",m),o.state.loading|=4,Hu(y,u.precedence,i),o.instance=y;case"script":return y=Qa(u.src),(p=i.querySelector(Ml(y)))?(o.instance=p,ot(p),p):(m=u,(p=dr.get(y))&&(m=g({},u),zm(m,p)),i=i.ownerDocument||i,p=i.createElement("script"),ot(p),us(p,"link",m),i.head.appendChild(p),o.instance=p);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,Hu(m,u.precedence,i));return o.instance}function Hu(i,o,u){for(var m=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=m.length?m[m.length-1]:null,y=p,j=0;j<m.length;j++){var k=m[j];if(k.dataset.precedence===o)y=k;else if(y!==p)break}y?y.parentNode.insertBefore(i,y.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(i,o.firstChild))}function Bm(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function zm(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var $u=null;function v1(i,o,u){if($u===null){var m=new Map,p=$u=new Map;p.set(u,m)}else p=$u,m=p.get(u),m||(m=new Map,p.set(u,m));if(m.has(i))return m;for(m.set(i,null),u=u.getElementsByTagName(i),p=0;p<u.length;p++){var y=u[p];if(!(y[Jt]||y[Ae]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var j=y.getAttribute(o)||"";j=i+j;var k=m.get(j);k?k.push(y):m.set(j,[y])}}return m}function y1(i,o,u){i=i.ownerDocument||i,i.head.insertBefore(u,o==="title"?i.querySelector("head > title"):null)}function m3(i,o,u){if(u===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function b1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Ll=null;function g3(){}function p3(i,o,u){if(Ll===null)throw Error(s(475));var m=Ll;if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=Za(u.href),y=i.querySelector(Ol(p));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(m.count++,m=Gu.bind(m),i.then(m,m)),o.state.loading|=4,o.instance=y,ot(y);return}y=i.ownerDocument||i,u=p1(u),(p=dr.get(p))&&Bm(u,p),y=y.createElement("link"),ot(y);var j=y;j._p=new Promise(function(k,R){j.onload=k,j.onerror=R}),us(y,"link",u),o.instance=y}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(m.count++,o=Gu.bind(m),i.addEventListener("load",o),i.addEventListener("error",o))}}function x3(){if(Ll===null)throw Error(s(475));var i=Ll;return i.stylesheets&&i.count===0&&Um(i,i.stylesheets),0<i.count?function(o){var u=setTimeout(function(){if(i.stylesheets&&Um(i,i.stylesheets),i.unsuspend){var m=i.unsuspend;i.unsuspend=null,m()}},6e4);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(u)}}:null}function Gu(){if(this.count--,this.count===0){if(this.stylesheets)Um(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Wu=null;function Um(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Wu=new Map,o.forEach(v3,i),Wu=null,Gu.call(i))}function v3(i,o){if(!(o.state.loading&4)){var u=Wu.get(i);if(u)var m=u.get(null);else{u=new Map,Wu.set(i,u);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var j=p[y];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(u.set(j.dataset.precedence,j),m=j)}m&&u.set(null,m)}p=o.instance,j=p.getAttribute("data-precedence"),y=u.get(j)||m,y===m&&u.set(null,p),u.set(j,p),this.count++,m=Gu.bind(this),p.addEventListener("load",m),p.addEventListener("error",m),y?y.parentNode.insertBefore(p,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),o.state.loading|=4}}var Rl={$$typeof:A,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function y3(i,o,u,m,p,y,j,k){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pa(0),this.hiddenUpdates=pa(null),this.identifierPrefix=m,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function w1(i,o,u,m,p,y,j,k,R,X,oe,ge){return i=new y3(i,o,u,j,k,R,X,ge),o=1,y===!0&&(o|=24),y=$s(3,null,null,o),i.current=y,y.stateNode=i,o=wf(),o.refCount++,i.pooledCache=o,o.refCount++,y.memoizedState={element:m,isDehydrated:u,cache:o},Cf(y),i}function _1(i){return i?(i=Ea,i):Ea}function S1(i,o,u,m,p,y){p=_1(p),m.context===null?m.context=p:m.pendingContext=p,m=Gn(o),m.payload={element:u},y=y===void 0?null:y,y!==null&&(m.callback=y),u=Wn(i,m,o),u!==null&&(Xs(u,i,o),dl(u,i,o))}function j1(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function Vm(i,o){j1(i,o),(i=i.alternate)&&j1(i,o)}function C1(i){if(i.tag===13){var o=Aa(i,67108864);o!==null&&Xs(o,i,67108864),Vm(i,67108864)}}var Yu=!0;function b3(i,o,u,m){var p=L.T;L.T=null;var y=$.p;try{$.p=2,Im(i,o,u,m)}finally{$.p=y,L.T=p}}function w3(i,o,u,m){var p=L.T;L.T=null;var y=$.p;try{$.p=8,Im(i,o,u,m)}finally{$.p=y,L.T=p}}function Im(i,o,u,m){if(Yu){var p=Hm(m);if(p===null)Em(i,o,m,qu,u),k1(i,m);else if(S3(p,i,o,u,m))m.stopPropagation();else if(k1(i,m),o&4&&-1<_3.indexOf(i)){for(;p!==null;){var y=br(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var j=zr(y.pendingLanes);if(j!==0){var k=y;for(k.pendingLanes|=2,k.entangledLanes|=2;j;){var R=1<<31-ue(j);k.entanglements[1]|=R,j&=~R}Gr(y),(ut&6)===0&&(Du=Se()+500,Al(0))}}break;case 13:k=Aa(y,2),k!==null&&Xs(k,y,2),Mu(),Vm(y,2)}if(y=Hm(m),y===null&&Em(i,o,m,qu,u),y===p)break;p=y}p!==null&&m.stopPropagation()}else Em(i,o,m,null,u)}}function Hm(i){return i=Yh(i),$m(i)}var qu=null;function $m(i){if(qu=null,i=es(i),i!==null){var o=a(i);if(o===null)i=null;else{var u=o.tag;if(u===13){if(i=l(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return qu=i,null}function T1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tt()){case $t:return 2;case gs:return 8;case js:case Js:return 32;case Vs:return 268435456;default:return 32}default:return 32}}var Gm=!1,ii=null,ai=null,oi=null,Pl=new Map,Fl=new Map,li=[],_3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function k1(i,o){switch(i){case"focusin":case"focusout":ii=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":oi=null;break;case"pointerover":case"pointerout":Pl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(o.pointerId)}}function Bl(i,o,u,m,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:u,eventSystemFlags:m,nativeEvent:y,targetContainers:[p]},o!==null&&(o=br(o),o!==null&&C1(o)),i):(i.eventSystemFlags|=m,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function S3(i,o,u,m,p){switch(o){case"focusin":return ii=Bl(ii,i,o,u,m,p),!0;case"dragenter":return ai=Bl(ai,i,o,u,m,p),!0;case"mouseover":return oi=Bl(oi,i,o,u,m,p),!0;case"pointerover":var y=p.pointerId;return Pl.set(y,Bl(Pl.get(y)||null,i,o,u,m,p)),!0;case"gotpointercapture":return y=p.pointerId,Fl.set(y,Bl(Fl.get(y)||null,i,o,u,m,p)),!0}return!1}function A1(i){var o=es(i.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){i.blockedOn=o,He(i.priority,function(){if(u.tag===13){var m=qs();m=Yo(m);var p=Aa(u,m);p!==null&&Xs(p,u,m),Vm(u,m)}});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xu(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Hm(i.nativeEvent);if(u===null){u=i.nativeEvent;var m=new u.constructor(u.type,u);Wh=m,u.target.dispatchEvent(m),Wh=null}else return o=br(u),o!==null&&C1(o),i.blockedOn=u,!1;o.shift()}return!0}function E1(i,o,u){Xu(i)&&u.delete(o)}function j3(){Gm=!1,ii!==null&&Xu(ii)&&(ii=null),ai!==null&&Xu(ai)&&(ai=null),oi!==null&&Xu(oi)&&(oi=null),Pl.forEach(E1),Fl.forEach(E1)}function Ku(i,o){i.blockedOn===o&&(i.blockedOn=null,Gm||(Gm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,j3)))}var Zu=null;function N1(i){Zu!==i&&(Zu=i,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Zu===i&&(Zu=null);for(var o=0;o<i.length;o+=3){var u=i[o],m=i[o+1],p=i[o+2];if(typeof m!="function"){if($m(m||u)===null)continue;break}var y=br(u);y!==null&&(i.splice(o,3),o-=3,$f(y,{pending:!0,data:p,method:u.method,action:m},m,p))}}))}function zl(i){function o(R){return Ku(R,i)}ii!==null&&Ku(ii,i),ai!==null&&Ku(ai,i),oi!==null&&Ku(oi,i),Pl.forEach(o),Fl.forEach(o);for(var u=0;u<li.length;u++){var m=li[u];m.blockedOn===i&&(m.blockedOn=null)}for(;0<li.length&&(u=li[0],u.blockedOn===null);)A1(u),u.blockedOn===null&&li.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(m=0;m<u.length;m+=3){var p=u[m],y=u[m+1],j=p[Re]||null;if(typeof y=="function")j||N1(u);else if(j){var k=null;if(y&&y.hasAttribute("formAction")){if(p=y,j=y[Re]||null)k=j.formAction;else if($m(p)!==null)continue}else k=j.action;typeof k=="function"?u[m+1]=k:(u.splice(m,3),m-=3),N1(u)}}}function Wm(i){this._internalRoot=i}Qu.prototype.render=Wm.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var u=o.current,m=qs();S1(u,m,i,o,null,null)},Qu.prototype.unmount=Wm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;S1(i.current,2,null,i,null,null),Mu(),o[Ge]=null}};function Qu(i){this._internalRoot=i}Qu.prototype.unstable_scheduleHydration=function(i){if(i){var o=ve();i={blockedOn:null,target:i,priority:o};for(var u=0;u<li.length&&o!==0&&o<li[u].priority;u++);li.splice(u,0,i),u===0&&A1(i)}};var D1=e.version;if(D1!=="19.1.0")throw Error(s(527,D1,"19.1.0"));$.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=h(o),i=i!==null?f(i):null,i=i===null?null:i.stateNode,i};var C3={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ju.isDisabled&&Ju.supportsFiber)try{Le=Ju.inject(C3),be=Ju}catch{}}return Vl.createRoot=function(i,o){if(!n(i))throw Error(s(299));var u=!1,m="",p=Yv,y=qv,j=Xv,k=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(j=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(k=o.unstable_transitionCallbacks)),o=w1(i,1,!1,null,null,u,m,p,y,j,k,null),i[Ge]=o.current,Am(i),new Wm(o)},Vl.hydrateRoot=function(i,o,u){if(!n(i))throw Error(s(299));var m=!1,p="",y=Yv,j=qv,k=Xv,R=null,X=null;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(j=u.onCaughtError),u.onRecoverableError!==void 0&&(k=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(R=u.unstable_transitionCallbacks),u.formState!==void 0&&(X=u.formState)),o=w1(i,1,!0,o,u??null,m,p,y,j,k,R,X),o.context=_1(null),u=o.current,m=qs(),m=Yo(m),p=Gn(m),p.callback=null,Wn(u,p,m),u=m,o.current.lanes=u,ki(o,u),Gr(o),i[Ge]=o.current,Am(i),new Qu(o)},Vl.version="19.1.0",Vl}var V1;function P3(){if(V1)return qm.exports;V1=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),qm.exports=R3(),qm.exports}var F3=P3();const B3=Rp(F3);var C=Pp();const Xt=Rp(C);var Il={},I1;function z3(){if(I1)return Il;I1=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.parse=l,Il.serialize=f;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,n=Object.prototype.toString,a=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function l(v,b){const w=new a,_=v.length;if(_<2)return w;const T=b?.decode||g;let S=0;do{const E=v.indexOf("=",S);if(E===-1)break;const A=v.indexOf(";",S),O=A===-1?_:A;if(E>O){S=v.lastIndexOf(";",E-1)+1;continue}const D=d(v,S,E),F=h(v,E,D),B=v.slice(D,F);if(w[B]===void 0){let P=d(v,E+1,O),H=h(v,O,P);const N=T(v.slice(P,H));w[B]=N}S=O+1}while(S<_);return w}function d(v,b,w){do{const _=v.charCodeAt(b);if(_!==32&&_!==9)return b}while(++b<w);return w}function h(v,b,w){for(;b>w;){const _=v.charCodeAt(--b);if(_!==32&&_!==9)return b+1}return w}function f(v,b,w){const _=w?.encode||encodeURIComponent;if(!r.test(v))throw new TypeError(`argument name is invalid: ${v}`);const T=_(b);if(!e.test(T))throw new TypeError(`argument val is invalid: ${b}`);let S=v+"="+T;if(!w)return S;if(w.maxAge!==void 0){if(!Number.isInteger(w.maxAge))throw new TypeError(`option maxAge is invalid: ${w.maxAge}`);S+="; Max-Age="+w.maxAge}if(w.domain){if(!t.test(w.domain))throw new TypeError(`option domain is invalid: ${w.domain}`);S+="; Domain="+w.domain}if(w.path){if(!s.test(w.path))throw new TypeError(`option path is invalid: ${w.path}`);S+="; Path="+w.path}if(w.expires){if(!x(w.expires)||!Number.isFinite(w.expires.valueOf()))throw new TypeError(`option expires is invalid: ${w.expires}`);S+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(S+="; HttpOnly"),w.secure&&(S+="; Secure"),w.partitioned&&(S+="; Partitioned"),w.priority)switch(typeof w.priority=="string"?w.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${w.priority}`)}if(w.sameSite)switch(typeof w.sameSite=="string"?w.sameSite.toLowerCase():w.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${w.sameSite}`)}return S}function g(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function x(v){return n.call(v)==="[object Date]"}return Il}z3();var H1="popstate";function U3(r={}){function e(s,n){let{pathname:a,search:l,hash:d}=s.location;return Ig("",{pathname:a,search:l,hash:d},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function t(s,n){return typeof n=="string"?n:gc(n)}return I3(e,t,null,r)}function St(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Rr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function V3(){return Math.random().toString(36).substring(2,10)}function $1(r,e){return{usr:r.state,key:r.key,idx:e}}function Ig(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Eo(e):e,state:t,key:e&&e.key||s||V3()}}function gc({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Eo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function I3(r,e,t,s={}){let{window:n=document.defaultView,v5Compat:a=!1}=s,l=n.history,d="POP",h=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function x(){d="POP";let T=g(),S=T==null?null:T-f;f=T,h&&h({action:d,location:_.location,delta:S})}function v(T,S){d="PUSH";let E=Ig(_.location,T,S);f=g()+1;let A=$1(E,f),O=_.createHref(E);try{l.pushState(A,"",O)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;n.location.assign(O)}a&&h&&h({action:d,location:_.location,delta:1})}function b(T,S){d="REPLACE";let E=Ig(_.location,T,S);f=g();let A=$1(E,f),O=_.createHref(E);l.replaceState(A,"",O),a&&h&&h({action:d,location:_.location,delta:0})}function w(T){return H3(T)}let _={get action(){return d},get location(){return r(n,l)},listen(T){if(h)throw new Error("A history only accepts one active listener");return n.addEventListener(H1,x),h=T,()=>{n.removeEventListener(H1,x),h=null}},createHref(T){return e(n,T)},createURL:w,encodeLocation(T){let S=w(T);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:v,replace:b,go(T){return l.go(T)}};return _}function H3(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),St(t,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:gc(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function Lw(r,e,t="/"){return $3(r,e,t,!1)}function $3(r,e,t,s){let n=typeof e=="string"?Eo(e):e,a=Nn(n.pathname||"/",t);if(a==null)return null;let l=Rw(r);G3(l);let d=null;for(let h=0;d==null&&h<l.length;++h){let f=sT(a);d=eT(l[h],f,s)}return d}function Rw(r,e=[],t=[],s=""){let n=(a,l,d)=>{let h={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};h.relativePath.startsWith("/")&&(St(h.relativePath.startsWith(s),`Absolute route path "${h.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(s.length));let f=kn([s,h.relativePath]),g=t.concat(h);a.children&&a.children.length>0&&(St(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Rw(a.children,e,g,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:Q3(f,a.index),routesMeta:g})};return r.forEach((a,l)=>{if(a.path===""||!a.path?.includes("?"))n(a,l);else for(let d of Pw(a.path))n(a,l,d)}),e}function Pw(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,n=t.endsWith("?"),a=t.replace(/\?$/,"");if(s.length===0)return n?[a,""]:[a];let l=Pw(s.join("/")),d=[];return d.push(...l.map(h=>h===""?a:[a,h].join("/"))),n&&d.push(...l),d.map(h=>r.startsWith("/")&&h===""?"/":h)}function G3(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:J3(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var W3=/^:[\w-]+$/,Y3=3,q3=2,X3=1,K3=10,Z3=-2,G1=r=>r==="*";function Q3(r,e){let t=r.split("/"),s=t.length;return t.some(G1)&&(s+=Z3),e&&(s+=q3),t.filter(n=>!G1(n)).reduce((n,a)=>n+(W3.test(a)?Y3:a===""?X3:K3),s)}function J3(r,e){return r.length===e.length&&r.slice(0,-1).every((s,n)=>s===e[n])?r[r.length-1]-e[e.length-1]:0}function eT(r,e,t=!1){let{routesMeta:s}=r,n={},a="/",l=[];for(let d=0;d<s.length;++d){let h=s[d],f=d===s.length-1,g=a==="/"?e:e.slice(a.length)||"/",x=Qd({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),v=h.route;if(!x&&f&&t&&!s[s.length-1].route.index&&(x=Qd({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!x)return null;Object.assign(n,x.params),l.push({params:n,pathname:kn([a,x.pathname]),pathnameBase:aT(kn([a,x.pathnameBase])),route:v}),x.pathnameBase!=="/"&&(a=kn([a,x.pathnameBase]))}return l}function Qd(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=tT(r.path,r.caseSensitive,r.end),n=e.match(t);if(!n)return null;let a=n[0],l=a.replace(/(.)\/+$/,"$1"),d=n.slice(1);return{params:s.reduce((f,{paramName:g,isOptional:x},v)=>{if(g==="*"){let w=d[v]||"";l=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const b=d[v];return x&&!b?f[g]=void 0:f[g]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:l,pattern:r}}function tT(r,e=!1,t=!0){Rr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],n="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,h)=>(s.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),n+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":r!==""&&r!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),s]}function sT(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rr(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Nn(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function rT(r,e="/"){let{pathname:t,search:s="",hash:n=""}=typeof r=="string"?Eo(r):r;return{pathname:t?t.startsWith("/")?t:nT(t,e):e,search:oT(s),hash:lT(n)}}function nT(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(n=>{n===".."?t.length>1&&t.pop():n!=="."&&t.push(n)}),t.length>1?t.join("/"):"/"}function Jm(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iT(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Fp(r){let e=iT(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function Bp(r,e,t,s=!1){let n;typeof r=="string"?n=Eo(r):(n={...r},St(!n.pathname||!n.pathname.includes("?"),Jm("?","pathname","search",n)),St(!n.pathname||!n.pathname.includes("#"),Jm("#","pathname","hash",n)),St(!n.search||!n.search.includes("#"),Jm("#","search","hash",n)));let a=r===""||n.pathname==="",l=a?"/":n.pathname,d;if(l==null)d=t;else{let x=e.length-1;if(!s&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),x-=1;n.pathname=v.join("/")}d=x>=0?e[x]:"/"}let h=rT(n,d),f=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}var kn=r=>r.join("/").replace(/\/\/+/g,"/"),aT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),oT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,lT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function cT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Fw=["POST","PUT","PATCH","DELETE"];new Set(Fw);var uT=["GET",...Fw];new Set(uT);var No=C.createContext(null);No.displayName="DataRouter";var _h=C.createContext(null);_h.displayName="DataRouterState";var Bw=C.createContext({isTransitioning:!1});Bw.displayName="ViewTransition";var dT=C.createContext(new Map);dT.displayName="Fetchers";var hT=C.createContext(null);hT.displayName="Await";var Pr=C.createContext(null);Pr.displayName="Navigation";var Nc=C.createContext(null);Nc.displayName="Location";var Fr=C.createContext({outlet:null,matches:[],isDataRoute:!1});Fr.displayName="Route";var zp=C.createContext(null);zp.displayName="RouteError";function fT(r,{relative:e}={}){St(Do(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=C.useContext(Pr),{hash:n,pathname:a,search:l}=Dc(r,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:kn([t,a])),s.createHref({pathname:d,search:l,hash:n})}function Do(){return C.useContext(Nc)!=null}function Qs(){return St(Do(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Nc).location}var zw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Uw(r){C.useContext(Pr).static||C.useLayoutEffect(r)}function Bn(){let{isDataRoute:r}=C.useContext(Fr);return r?AT():mT()}function mT(){St(Do(),"useNavigate() may be used only in the context of a <Router> component.");let r=C.useContext(No),{basename:e,navigator:t}=C.useContext(Pr),{matches:s}=C.useContext(Fr),{pathname:n}=Qs(),a=JSON.stringify(Fp(s)),l=C.useRef(!1);return Uw(()=>{l.current=!0}),C.useCallback((h,f={})=>{if(Rr(l.current,zw),!l.current)return;if(typeof h=="number"){t.go(h);return}let g=Bp(h,JSON.parse(a),n,f.relative==="path");r==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:kn([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,a,n,r])}var gT=C.createContext(null);function pT(r){let e=C.useContext(Fr).outlet;return e&&C.createElement(gT.Provider,{value:r},e)}function Dc(r,{relative:e}={}){let{matches:t}=C.useContext(Fr),{pathname:s}=Qs(),n=JSON.stringify(Fp(t));return C.useMemo(()=>Bp(r,JSON.parse(n),s,e==="path"),[r,n,s,e])}function xT(r,e){return Vw(r,e)}function Vw(r,e,t,s){St(Do(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n}=C.useContext(Pr),{matches:a}=C.useContext(Fr),l=a[a.length-1],d=l?l.params:{},h=l?l.pathname:"/",f=l?l.pathnameBase:"/",g=l&&l.route;{let S=g&&g.path||"";Iw(h,!g||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let x=Qs(),v;if(e){let S=typeof e=="string"?Eo(e):e;St(f==="/"||S.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${S.pathname}" was given in the \`location\` prop.`),v=S}else v=x;let b=v.pathname||"/",w=b;if(f!=="/"){let S=f.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(S.length).join("/")}let _=Lw(r,{pathname:w});Rr(g||_!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Rr(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=_T(_&&_.map(S=>Object.assign({},S,{params:Object.assign({},d,S.params),pathname:kn([f,n.encodeLocation?n.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?f:kn([f,n.encodeLocation?n.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,t,s);return e&&T?C.createElement(Nc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},T):T}function vT(){let r=kT(),e=cT(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",r),l=C.createElement(C.Fragment,null,C.createElement("p",null,"💿 Hey developer 👋"),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:a},"ErrorBoundary")," or"," ",C.createElement("code",{style:a},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:n},t):null,l)}var yT=C.createElement(vT,null),bT=class extends C.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?C.createElement(Fr.Provider,{value:this.props.routeContext},C.createElement(zp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function wT({routeContext:r,match:e,children:t}){let s=C.useContext(No);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(Fr.Provider,{value:r},t)}function _T(r,e=[],t=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let n=r,a=t?.errors;if(a!=null){let h=n.findIndex(f=>f.route.id&&a?.[f.route.id]!==void 0);St(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),n=n.slice(0,Math.min(n.length,h+1))}let l=!1,d=-1;if(t)for(let h=0;h<n.length;h++){let f=n[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:g,errors:x}=t,v=f.route.loader&&!g.hasOwnProperty(f.route.id)&&(!x||x[f.route.id]===void 0);if(f.route.lazy||v){l=!0,d>=0?n=n.slice(0,d+1):n=[n[0]];break}}}return n.reduceRight((h,f,g)=>{let x,v=!1,b=null,w=null;t&&(x=a&&f.route.id?a[f.route.id]:void 0,b=f.route.errorElement||yT,l&&(d<0&&g===0?(Iw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,w=null):d===g&&(v=!0,w=f.route.hydrateFallbackElement||null)));let _=e.concat(n.slice(0,g+1)),T=()=>{let S;return x?S=b:v?S=w:f.route.Component?S=C.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=h,C.createElement(wT,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:t!=null},children:S})};return t&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?C.createElement(bT,{location:t.location,revalidation:t.revalidation,component:b,error:x,children:T(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):T()},null)}function Up(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ST(r){let e=C.useContext(No);return St(e,Up(r)),e}function jT(r){let e=C.useContext(_h);return St(e,Up(r)),e}function CT(r){let e=C.useContext(Fr);return St(e,Up(r)),e}function Vp(r){let e=CT(r),t=e.matches[e.matches.length-1];return St(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function TT(){return Vp("useRouteId")}function kT(){let r=C.useContext(zp),e=jT("useRouteError"),t=Vp("useRouteError");return r!==void 0?r:e.errors?.[t]}function AT(){let{router:r}=ST("useNavigate"),e=Vp("useNavigate"),t=C.useRef(!1);return Uw(()=>{t.current=!0}),C.useCallback(async(n,a={})=>{Rr(t.current,zw),t.current&&(typeof n=="number"?r.navigate(n):await r.navigate(n,{fromRouteId:e,...a}))},[r,e])}var W1={};function Iw(r,e,t){!e&&!W1[r]&&(W1[r]=!0,Rr(!1,t))}C.memo(ET);function ET({routes:r,future:e,state:t}){return Vw(r,void 0,t,e)}function Y1({to:r,replace:e,state:t,relative:s}){St(Do(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=C.useContext(Pr);Rr(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=C.useContext(Fr),{pathname:l}=Qs(),d=Bn(),h=Bp(r,Fp(a),l,s==="path"),f=JSON.stringify(h);return C.useEffect(()=>{d(JSON.parse(f),{replace:e,state:t,relative:s})},[d,f,s,e,t]),null}function NT(r){return pT(r.context)}function is(r){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function DT({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:n,static:a=!1}){St(!Do(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=r.replace(/^\/*/,"/"),d=C.useMemo(()=>({basename:l,navigator:n,static:a,future:{}}),[l,n,a]);typeof t=="string"&&(t=Eo(t));let{pathname:h="/",search:f="",hash:g="",state:x=null,key:v="default"}=t,b=C.useMemo(()=>{let w=Nn(h,l);return w==null?null:{location:{pathname:w,search:f,hash:g,state:x,key:v},navigationType:s}},[l,h,f,g,x,v,s]);return Rr(b!=null,`<Router basename="${l}"> is not able to match the URL "${h}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:C.createElement(Pr.Provider,{value:d},C.createElement(Nc.Provider,{children:e,value:b}))}function OT({children:r,location:e}){return xT(Hg(r),e)}function Hg(r,e=[]){let t=[];return C.Children.forEach(r,(s,n)=>{if(!C.isValidElement(s))return;let a=[...e,n];if(s.type===C.Fragment){t.push.apply(t,Hg(s.props.children,a));return}St(s.type===is,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=Hg(s.props.children,a)),t.push(l)}),t}var zd="get",Ud="application/x-www-form-urlencoded";function Sh(r){return r!=null&&typeof r.tagName=="string"}function MT(r){return Sh(r)&&r.tagName.toLowerCase()==="button"}function LT(r){return Sh(r)&&r.tagName.toLowerCase()==="form"}function RT(r){return Sh(r)&&r.tagName.toLowerCase()==="input"}function PT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function FT(r,e){return r.button===0&&(!e||e==="_self")&&!PT(r)}var ed=null;function BT(){if(ed===null)try{new FormData(document.createElement("form"),0),ed=!1}catch{ed=!0}return ed}var zT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function eg(r){return r!=null&&!zT.has(r)?(Rr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ud}"`),null):r}function UT(r,e){let t,s,n,a,l;if(LT(r)){let d=r.getAttribute("action");s=d?Nn(d,e):null,t=r.getAttribute("method")||zd,n=eg(r.getAttribute("enctype"))||Ud,a=new FormData(r)}else if(MT(r)||RT(r)&&(r.type==="submit"||r.type==="image")){let d=r.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=r.getAttribute("formaction")||d.getAttribute("action");if(s=h?Nn(h,e):null,t=r.getAttribute("formmethod")||d.getAttribute("method")||zd,n=eg(r.getAttribute("formenctype"))||eg(d.getAttribute("enctype"))||Ud,a=new FormData(d,r),!BT()){let{name:f,type:g,value:x}=r;if(g==="image"){let v=f?`${f}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else f&&a.append(f,x)}}else{if(Sh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=zd,s=null,n=Ud,l=r}return a&&n==="text/plain"&&(l=a,a=void 0),{action:s,method:t.toLowerCase(),encType:n,formData:a,body:l}}function Ip(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function VT(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function IT(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function HT(r,e,t){let s=await Promise.all(r.map(async n=>{let a=e.routes[n.route.id];if(a){let l=await VT(a,t);return l.links?l.links():[]}return[]}));return YT(s.flat(1).filter(IT).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function q1(r,e,t,s,n,a){let l=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,d=(h,f)=>t[f].pathname!==h.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==h.params["*"];return a==="assets"?e.filter((h,f)=>l(h,f)||d(h,f)):a==="data"?e.filter((h,f)=>{let g=s.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(l(h,f)||d(h,f))return!0;if(h.route.shouldRevalidate){let x=h.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function $T(r,e,{includeHydrateFallback:t}={}){return GT(r.map(s=>{let n=e.routes[s.route.id];if(!n)return[];let a=[n.module];return n.clientActionModule&&(a=a.concat(n.clientActionModule)),n.clientLoaderModule&&(a=a.concat(n.clientLoaderModule)),t&&n.hydrateFallbackModule&&(a=a.concat(n.hydrateFallbackModule)),n.imports&&(a=a.concat(n.imports)),a}).flat(1))}function GT(r){return[...new Set(r)]}function WT(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function YT(r,e){let t=new Set;return new Set(e),r.reduce((s,n)=>{let a=JSON.stringify(WT(n));return t.has(a)||(t.add(a),s.push({key:a,link:n})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var qT=new Set([100,101,204,205]);function XT(r,e){let t=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t.pathname==="/"?t.pathname="_root.data":e&&Nn(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Hw(){let r=C.useContext(No);return Ip(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function KT(){let r=C.useContext(_h);return Ip(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Hp=C.createContext(void 0);Hp.displayName="FrameworkContext";function $w(){let r=C.useContext(Hp);return Ip(r,"You must render this element inside a <HydratedRouter> element"),r}function ZT(r,e){let t=C.useContext(Hp),[s,n]=C.useState(!1),[a,l]=C.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:f,onMouseLeave:g,onTouchStart:x}=e,v=C.useRef(null);C.useEffect(()=>{if(r==="render"&&l(!0),r==="viewport"){let _=S=>{S.forEach(E=>{l(E.isIntersecting)})},T=new IntersectionObserver(_,{threshold:.5});return v.current&&T.observe(v.current),()=>{T.disconnect()}}},[r]),C.useEffect(()=>{if(s){let _=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(_)}}},[s]);let b=()=>{n(!0)},w=()=>{n(!1),l(!1)};return t?r!=="intent"?[a,v,{}]:[a,v,{onFocus:Hl(d,b),onBlur:Hl(h,w),onMouseEnter:Hl(f,b),onMouseLeave:Hl(g,w),onTouchStart:Hl(x,b)}]:[!1,v,{}]}function Hl(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function QT({page:r,...e}){let{router:t}=Hw(),s=C.useMemo(()=>Lw(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?C.createElement(e5,{page:r,matches:s,...e}):null}function JT(r){let{manifest:e,routeModules:t}=$w(),[s,n]=C.useState([]);return C.useEffect(()=>{let a=!1;return HT(r,e,t).then(l=>{a||n(l)}),()=>{a=!0}},[r,e,t]),s}function e5({page:r,matches:e,...t}){let s=Qs(),{manifest:n,routeModules:a}=$w(),{basename:l}=Hw(),{loaderData:d,matches:h}=KT(),f=C.useMemo(()=>q1(r,e,h,n,s,"data"),[r,e,h,n,s]),g=C.useMemo(()=>q1(r,e,h,n,s,"assets"),[r,e,h,n,s]),x=C.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let w=new Set,_=!1;if(e.forEach(S=>{let E=n.routes[S.route.id];!E||!E.hasLoader||(!f.some(A=>A.route.id===S.route.id)&&S.route.id in d&&a[S.route.id]?.shouldRevalidate||E.hasClientLoader?_=!0:w.add(S.route.id))}),w.size===0)return[];let T=XT(r,l);return _&&w.size>0&&T.searchParams.set("_routes",e.filter(S=>w.has(S.route.id)).map(S=>S.route.id).join(",")),[T.pathname+T.search]},[l,d,s,n,f,e,r,a]),v=C.useMemo(()=>$T(g,n),[g,n]),b=JT(g);return C.createElement(C.Fragment,null,x.map(w=>C.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),v.map(w=>C.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),b.map(({key:w,link:_})=>C.createElement("link",{key:w,..._})))}function t5(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Gw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Gw&&(window.__reactRouterVersion="7.6.3")}catch{}function s5({basename:r,children:e,window:t}){let s=C.useRef();s.current==null&&(s.current=U3({window:t,v5Compat:!0}));let n=s.current,[a,l]=C.useState({action:n.action,location:n.location}),d=C.useCallback(h=>{C.startTransition(()=>l(h))},[l]);return C.useLayoutEffect(()=>n.listen(d),[n,d]),C.createElement(DT,{basename:r,children:e,location:a.location,navigationType:a.action,navigator:n})}var Ww=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,It=C.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:n,reloadDocument:a,replace:l,state:d,target:h,to:f,preventScrollReset:g,viewTransition:x,...v},b){let{basename:w}=C.useContext(Pr),_=typeof f=="string"&&Ww.test(f),T,S=!1;if(typeof f=="string"&&_&&(T=f,Gw))try{let H=new URL(window.location.href),N=f.startsWith("//")?new URL(H.protocol+f):new URL(f),V=Nn(N.pathname,w);N.origin===H.origin&&V!=null?f=V+N.search+N.hash:S=!0}catch{Rr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=fT(f,{relative:n}),[A,O,D]=ZT(s,v),F=a5(f,{replace:l,state:d,target:h,preventScrollReset:g,relative:n,viewTransition:x});function B(H){e&&e(H),H.defaultPrevented||F(H)}let P=C.createElement("a",{...v,...D,href:T||E,onClick:S||a?e:B,ref:t5(b,O),target:h,"data-discover":!_&&t==="render"?"true":void 0});return A&&!_?C.createElement(C.Fragment,null,P,C.createElement(QT,{page:E})):P});It.displayName="Link";var r5=C.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:n=!1,style:a,to:l,viewTransition:d,children:h,...f},g){let x=Dc(l,{relative:f.relative}),v=Qs(),b=C.useContext(_h),{navigator:w,basename:_}=C.useContext(Pr),T=b!=null&&d5(x)&&d===!0,S=w.encodeLocation?w.encodeLocation(x).pathname:x.pathname,E=v.pathname,A=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(E=E.toLowerCase(),A=A?A.toLowerCase():null,S=S.toLowerCase()),A&&_&&(A=Nn(A,_)||A);const O=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let D=E===S||!n&&E.startsWith(S)&&E.charAt(O)==="/",F=A!=null&&(A===S||!n&&A.startsWith(S)&&A.charAt(S.length)==="/"),B={isActive:D,isPending:F,isTransitioning:T},P=D?e:void 0,H;typeof s=="function"?H=s(B):H=[s,D?"active":null,F?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(B):a;return C.createElement(It,{...f,"aria-current":P,className:H,ref:g,style:N,to:l,viewTransition:d},typeof h=="function"?h(B):h)});r5.displayName="NavLink";var n5=C.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:n,state:a,method:l=zd,action:d,onSubmit:h,relative:f,preventScrollReset:g,viewTransition:x,...v},b)=>{let w=c5(),_=u5(d,{relative:f}),T=l.toLowerCase()==="get"?"get":"post",S=typeof d=="string"&&Ww.test(d),E=A=>{if(h&&h(A),A.defaultPrevented)return;A.preventDefault();let O=A.nativeEvent.submitter,D=O?.getAttribute("formmethod")||l;w(O||A.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:n,state:a,relative:f,preventScrollReset:g,viewTransition:x})};return C.createElement("form",{ref:b,method:T,action:_,onSubmit:s?h:E,...v,"data-discover":!S&&r==="render"?"true":void 0})});n5.displayName="Form";function i5(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Yw(r){let e=C.useContext(No);return St(e,i5(r)),e}function a5(r,{target:e,replace:t,state:s,preventScrollReset:n,relative:a,viewTransition:l}={}){let d=Bn(),h=Qs(),f=Dc(r,{relative:a});return C.useCallback(g=>{if(FT(g,e)){g.preventDefault();let x=t!==void 0?t:gc(h)===gc(f);d(r,{replace:x,state:s,preventScrollReset:n,relative:a,viewTransition:l})}},[h,d,f,t,s,e,r,n,a,l])}var o5=0,l5=()=>`__${String(++o5)}__`;function c5(){let{router:r}=Yw("useSubmit"),{basename:e}=C.useContext(Pr),t=TT();return C.useCallback(async(s,n={})=>{let{action:a,method:l,encType:d,formData:h,body:f}=UT(s,e);if(n.navigate===!1){let g=n.fetcherKey||l5();await r.fetch(g,t,n.action||a,{preventScrollReset:n.preventScrollReset,formData:h,body:f,formMethod:n.method||l,formEncType:n.encType||d,flushSync:n.flushSync})}else await r.navigate(n.action||a,{preventScrollReset:n.preventScrollReset,formData:h,body:f,formMethod:n.method||l,formEncType:n.encType||d,replace:n.replace,state:n.state,fromRouteId:t,flushSync:n.flushSync,viewTransition:n.viewTransition})},[r,e,t])}function u5(r,{relative:e}={}){let{basename:t}=C.useContext(Pr),s=C.useContext(Fr);St(s,"useFormAction must be used inside a RouteContext");let[n]=s.matches.slice(-1),a={...Dc(r||".",{relative:e})},l=Qs();if(r==null){a.search=l.search;let d=new URLSearchParams(a.search),h=d.getAll("index");if(h.some(g=>g==="")){d.delete("index"),h.filter(x=>x).forEach(x=>d.append("index",x));let g=d.toString();a.search=g?`?${g}`:""}}return(!r||r===".")&&n.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:kn([t,a.pathname])),gc(a)}function d5(r,e={}){let t=C.useContext(Bw);St(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Yw("useViewTransitionState"),n=Dc(r,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Nn(t.currentLocation.pathname,s)||t.currentLocation.pathname,l=Nn(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Qd(n.pathname,l)!=null||Qd(n.pathname,a)!=null}[...qT];const h5="modulepreload",f5=function(r){return"/"+r},X1={},Oc=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){let f=function(g){return Promise.all(g.map(x=>Promise.resolve(x).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var l=f;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");n=f(t.map(g=>{if(g=f5(g),g in X1)return;X1[g]=!0;const x=g.endsWith(".css"),v=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const b=document.createElement("link");if(b.rel=x?"stylesheet":h5,x||(b.as="script"),b.crossOrigin="",b.href=g,h&&b.setAttribute("nonce",h),document.head.appendChild(b),x)return new Promise((w,_)=>{b.addEventListener("load",w),b.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${g}`)))})}))}function a(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return n.then(d=>{for(const h of d||[])h.status==="rejected"&&a(h.reason);return e().catch(a)})},m5=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Oc(async()=>{const{default:s}=await Promise.resolve().then(()=>Oo);return{default:s}},[]).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class $p extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class g5 extends $p{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class K1 extends $p{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Z1 extends $p{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var $g;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})($g||($g={}));var p5=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function d(g){try{f(s.next(g))}catch(x){l(x)}}function h(g){try{f(s.throw(g))}catch(x){l(x)}}function f(g){g.done?a(g.value):n(g.value).then(d,h)}f((s=s.apply(r,e||[])).next())})};class x5{constructor(e,{headers:t={},customFetch:s,region:n=$g.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=m5(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return p5(this,void 0,void 0,function*(){try{const{headers:n,method:a,body:l}=t;let d={},{region:h}=t;h||(h=this.region);const f=new URL(`${this.url}/${e}`);h&&h!=="any"&&(d["x-region"]=h,f.searchParams.set("forceFunctionRegion",h));let g;l&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",g=l):typeof l=="string"?(d["Content-Type"]="text/plain",g=l):typeof FormData<"u"&&l instanceof FormData?g=l:(d["Content-Type"]="application/json",g=JSON.stringify(l)));const x=yield this.fetch(f.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),n),body:g}).catch(_=>{throw new g5(_)}),v=x.headers.get("x-relay-error");if(v&&v==="true")throw new K1(x);if(!x.ok)throw new Z1(x);let b=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield x.json():b==="application/octet-stream"?w=yield x.blob():b==="text/event-stream"?w=x:b==="multipart/form-data"?w=yield x.formData():w=yield x.text(),{data:w,error:null,response:x}}catch(n){return{data:null,error:n,response:n instanceof Z1||n instanceof K1?n.context:void 0}}})}}var ns={},Ja={},eo={},to={},so={},ro={},v5=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Co=v5();const y5=Co.fetch,qw=Co.fetch.bind(Co),Xw=Co.Headers,b5=Co.Request,w5=Co.Response,Oo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Xw,Request:b5,Response:w5,default:qw,fetch:y5},Symbol.toStringTag,{value:"Module"})),_5=k3(Oo);var td={},Q1;function Kw(){if(Q1)return td;Q1=1,Object.defineProperty(td,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return td.default=r,td}var J1;function Zw(){if(J1)return ro;J1=1;var r=ro&&ro.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ro,"__esModule",{value:!0});const e=r(_5),t=r(Kw());class s{constructor(a){this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=a.headers,this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=a.shouldThrowOnError,this.signal=a.signal,this.isMaybeSingle=a.isMaybeSingle,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=Object.assign({},this.headers),this.headers[a]=l,this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const d=this.fetch;let h=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var g,x,v;let b=null,w=null,_=null,T=f.status,S=f.statusText;if(f.ok){if(this.method!=="HEAD"){const D=await f.text();D===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?w=D:w=JSON.parse(D))}const A=(g=this.headers.Prefer)===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),O=(x=f.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");A&&O&&O.length>1&&(_=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(b={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,_=null,T=406,S="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const A=await f.text();try{b=JSON.parse(A),Array.isArray(b)&&f.status===404&&(w=[],b=null,T=200,S="OK")}catch{f.status===404&&A===""?(T=204,S="No Content"):b={message:A}}if(b&&this.isMaybeSingle&&(!((v=b?.details)===null||v===void 0)&&v.includes("0 rows"))&&(b=null,T=200,S="OK"),b&&this.shouldThrowOnError)throw new t.default(b)}return{error:b,data:w,count:_,status:T,statusText:S}});return this.shouldThrowOnError||(h=h.catch(f=>{var g,x,v;return{error:{message:`${(g=f?.name)!==null&&g!==void 0?g:"FetchError"}: ${f?.message}`,details:`${(x=f?.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(v=f?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),h.then(a,l)}returns(){return this}overrideTypes(){return this}}return ro.default=s,ro}var e2;function Qw(){if(e2)return so;e2=1;var r=so&&so.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(so,"__esModule",{value:!0});const e=r(Zw());class t extends e.default{select(n){let a=!1;const l=(n??"*").split("").map(d=>/\s/.test(d)&&!a?"":(d==='"'&&(a=!a),d)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(n,{ascending:a=!0,nullsFirst:l,foreignTable:d,referencedTable:h=d}={}){const f=h?`${h}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${n}.${a?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:a,referencedTable:l=a}={}){const d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${n}`),this}range(n,a,{foreignTable:l,referencedTable:d=l}={}){const h=typeof d>"u"?"offset":`${d}.offset`,f=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${n}`),this.url.searchParams.set(f,`${a-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:n=!1,verbose:a=!1,settings:l=!1,buffers:d=!1,wal:h=!1,format:f="text"}={}){var g;const x=[n?"analyze":null,a?"verbose":null,l?"settings":null,d?"buffers":null,h?"wal":null].filter(Boolean).join("|"),v=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${f}; for="${v}"; options=${x};`,f==="json"?this:this}rollback(){var n;return((n=this.headers.Prefer)!==null&&n!==void 0?n:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return so.default=t,so}var t2;function Gp(){if(t2)return to;t2=1;var r=to&&to.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(to,"__esModule",{value:!0});const e=r(Qw());class t extends e.default{eq(n,a){return this.url.searchParams.append(n,`eq.${a}`),this}neq(n,a){return this.url.searchParams.append(n,`neq.${a}`),this}gt(n,a){return this.url.searchParams.append(n,`gt.${a}`),this}gte(n,a){return this.url.searchParams.append(n,`gte.${a}`),this}lt(n,a){return this.url.searchParams.append(n,`lt.${a}`),this}lte(n,a){return this.url.searchParams.append(n,`lte.${a}`),this}like(n,a){return this.url.searchParams.append(n,`like.${a}`),this}likeAllOf(n,a){return this.url.searchParams.append(n,`like(all).{${a.join(",")}}`),this}likeAnyOf(n,a){return this.url.searchParams.append(n,`like(any).{${a.join(",")}}`),this}ilike(n,a){return this.url.searchParams.append(n,`ilike.${a}`),this}ilikeAllOf(n,a){return this.url.searchParams.append(n,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(n,a){return this.url.searchParams.append(n,`ilike(any).{${a.join(",")}}`),this}is(n,a){return this.url.searchParams.append(n,`is.${a}`),this}in(n,a){const l=Array.from(new Set(a)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(n,`in.(${l})`),this}contains(n,a){return typeof a=="string"?this.url.searchParams.append(n,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(n,`cs.{${a.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(a)}`),this}containedBy(n,a){return typeof a=="string"?this.url.searchParams.append(n,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(n,`cd.{${a.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(a)}`),this}rangeGt(n,a){return this.url.searchParams.append(n,`sr.${a}`),this}rangeGte(n,a){return this.url.searchParams.append(n,`nxl.${a}`),this}rangeLt(n,a){return this.url.searchParams.append(n,`sl.${a}`),this}rangeLte(n,a){return this.url.searchParams.append(n,`nxr.${a}`),this}rangeAdjacent(n,a){return this.url.searchParams.append(n,`adj.${a}`),this}overlaps(n,a){return typeof a=="string"?this.url.searchParams.append(n,`ov.${a}`):this.url.searchParams.append(n,`ov.{${a.join(",")}}`),this}textSearch(n,a,{config:l,type:d}={}){let h="";d==="plain"?h="pl":d==="phrase"?h="ph":d==="websearch"&&(h="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(n,`${h}fts${f}.${a}`),this}match(n){return Object.entries(n).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(n,a,l){return this.url.searchParams.append(n,`not.${a}.${l}`),this}or(n,{foreignTable:a,referencedTable:l=a}={}){const d=l?`${l}.or`:"or";return this.url.searchParams.append(d,`(${n})`),this}filter(n,a,l){return this.url.searchParams.append(n,`${a}.${l}`),this}}return to.default=t,to}var s2;function Jw(){if(s2)return eo;s2=1;var r=eo&&eo.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(eo,"__esModule",{value:!0});const e=r(Gp());class t{constructor(n,{headers:a={},schema:l,fetch:d}){this.url=n,this.headers=a,this.schema=l,this.fetch=d}select(n,{head:a=!1,count:l}={}){const d=a?"HEAD":"GET";let h=!1;const f=(n??"*").split("").map(g=>/\s/.test(g)&&!h?"":(g==='"'&&(h=!h),g)).join("");return this.url.searchParams.set("select",f),l&&(this.headers.Prefer=`count=${l}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(n,{count:a,defaultToNull:l=!0}={}){const d="POST",h=[];if(this.headers.Prefer&&h.push(this.headers.Prefer),a&&h.push(`count=${a}`),l||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(n)){const f=n.reduce((g,x)=>g.concat(Object.keys(x)),[]);if(f.length>0){const g=[...new Set(f)].map(x=>`"${x}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}upsert(n,{onConflict:a,ignoreDuplicates:l=!1,count:d,defaultToNull:h=!0}={}){const f="POST",g=[`resolution=${l?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&g.push(this.headers.Prefer),d&&g.push(`count=${d}`),h||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(n)){const x=n.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(x.length>0){const v=[...new Set(x)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}update(n,{count:a}={}){const l="PATCH",d=[];return this.headers.Prefer&&d.push(this.headers.Prefer),a&&d.push(`count=${a}`),this.headers.Prefer=d.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}delete({count:n}={}){const a="DELETE",l=[];return n&&l.push(`count=${n}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return eo.default=t,eo}var $l={},Gl={},r2;function S5(){return r2||(r2=1,Object.defineProperty(Gl,"__esModule",{value:!0}),Gl.version=void 0,Gl.version="0.0.0-automated"),Gl}var n2;function j5(){if(n2)return $l;n2=1,Object.defineProperty($l,"__esModule",{value:!0}),$l.DEFAULT_HEADERS=void 0;const r=S5();return $l.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${r.version}`},$l}var i2;function C5(){if(i2)return Ja;i2=1;var r=Ja&&Ja.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ja,"__esModule",{value:!0});const e=r(Jw()),t=r(Gp()),s=j5();class n{constructor(l,{headers:d={},schema:h,fetch:f}={}){this.url=l,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),d),this.schemaName=h,this.fetch=f}from(l){const d=new URL(`${this.url}/${l}`);return new e.default(d,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new n(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,d={},{head:h=!1,get:f=!1,count:g}={}){let x;const v=new URL(`${this.url}/rpc/${l}`);let b;h||f?(x=h?"HEAD":"GET",Object.entries(d).filter(([_,T])=>T!==void 0).map(([_,T])=>[_,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([_,T])=>{v.searchParams.append(_,T)})):(x="POST",b=d);const w=Object.assign({},this.headers);return g&&(w.Prefer=`count=${g}`),new t.default({method:x,url:v,headers:w,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return Ja.default=n,Ja}var a2;function T5(){if(a2)return ns;a2=1;var r=ns&&ns.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(ns,"__esModule",{value:!0}),ns.PostgrestError=ns.PostgrestBuilder=ns.PostgrestTransformBuilder=ns.PostgrestFilterBuilder=ns.PostgrestQueryBuilder=ns.PostgrestClient=void 0;const e=r(C5());ns.PostgrestClient=e.default;const t=r(Jw());ns.PostgrestQueryBuilder=t.default;const s=r(Gp());ns.PostgrestFilterBuilder=s.default;const n=r(Qw());ns.PostgrestTransformBuilder=n.default;const a=r(Zw());ns.PostgrestBuilder=a.default;const l=r(Kw());return ns.PostgrestError=l.default,ns.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:n.default,PostgrestBuilder:a.default,PostgrestError:l.default},ns}var k5=T5();const A5=Rp(k5),{PostgrestClient:E5,PostgrestQueryBuilder:qL,PostgrestFilterBuilder:XL,PostgrestTransformBuilder:KL,PostgrestBuilder:ZL,PostgrestError:QL}=A5;function N5(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const D5=N5(),O5="2.11.15",M5=`realtime-js/${O5}`,L5="1.0.0",e_=1e4,R5=1e3;var ec;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(ec||(ec={}));var bs;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(bs||(bs={}));var Er;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Er||(Er={}));var Gg;(function(r){r.websocket="websocket"})(Gg||(Gg={}));var qi;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(qi||(qi={}));class P5{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),a=t.getUint8(2);let l=this.HEADER_LENGTH+2;const d=s.decode(e.slice(l,l+n));l=l+n;const h=s.decode(e.slice(l,l+a));l=l+a;const f=JSON.parse(s.decode(e.slice(l,e.byteLength)));return{ref:null,topic:d,event:h,payload:f}}}class t_{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var vt;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(vt||(vt={}));const o2=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((a,l)=>(a[l]=F5(l,r,e,n),a),{})},F5=(r,e,t,s)=>{const n=e.find(d=>d.name===r),a=n?.type,l=t[r];return a&&!s.includes(a)?s_(a,l):Wg(l)},s_=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return V5(e,t)}switch(r){case vt.bool:return B5(e);case vt.float4:case vt.float8:case vt.int2:case vt.int4:case vt.int8:case vt.numeric:case vt.oid:return z5(e);case vt.json:case vt.jsonb:return U5(e);case vt.timestamp:return I5(e);case vt.abstime:case vt.date:case vt.daterange:case vt.int4range:case vt.int8range:case vt.money:case vt.reltime:case vt.text:case vt.time:case vt.timestamptz:case vt.timetz:case vt.tsrange:case vt.tstzrange:return Wg(e);default:return Wg(e)}},Wg=r=>r,B5=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},z5=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},U5=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},V5=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let a;const l=r.slice(1,t);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(d=>s_(e,d))}return r},I5=r=>typeof r=="string"?r.replace(" ","T"):r,r_=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class tg{constructor(e,t,s={},n=e_){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var l2;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(l2||(l2={}));class tc{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:a,onLeave:l,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tc.syncState(this.state,n,a,l),this.pendingDiffs.forEach(h=>{this.state=tc.syncDiff(this.state,h,a,l)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},n=>{const{onJoin:a,onLeave:l,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=tc.syncDiff(this.state,n,a,l),d())}),this.onJoin((n,a,l)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:a,newPresences:l})}),this.onLeave((n,a,l)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const a=this.cloneDeep(e),l=this.transformState(t),d={},h={};return this.map(a,(f,g)=>{l[f]||(h[f]=g)}),this.map(l,(f,g)=>{const x=a[f];if(x){const v=g.map(T=>T.presence_ref),b=x.map(T=>T.presence_ref),w=g.filter(T=>b.indexOf(T.presence_ref)<0),_=x.filter(T=>v.indexOf(T.presence_ref)<0);w.length>0&&(d[f]=w),_.length>0&&(h[f]=_)}else d[f]=g}),this.syncDiff(a,{joins:d,leaves:h},s,n)}static syncDiff(e,t,s,n){const{joins:a,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(a,(d,h)=>{var f;const g=(f=e[d])!==null&&f!==void 0?f:[];if(e[d]=this.cloneDeep(h),g.length>0){const x=e[d].map(b=>b.presence_ref),v=g.filter(b=>x.indexOf(b.presence_ref)<0);e[d].unshift(...v)}s(d,g,h)}),this.map(l,(d,h)=>{let f=e[d];if(!f)return;const g=h.map(x=>x.presence_ref);f=f.filter(x=>g.indexOf(x.presence_ref)<0),e[d]=f,n(d,f,h),f.length===0&&delete e[d]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var c2;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(c2||(c2={}));var u2;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(u2||(u2={}));var _n;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(_n||(_n={}));class Wp{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=bs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new tg(this,Er.join,this.params,this.timeout),this.rejoinTimer=new t_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=bs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=bs.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=bs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=bs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Er.reply,{},(n,a)=>{this._trigger(this._replyEventName(a),n)}),this.presence=new tc(this),this.broadcastEndpointURL=r_(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==bs.closed){const{config:{broadcast:a,presence:l,private:d}}=this.params;this._onError(g=>e?.(_n.CHANNEL_ERROR,g)),this._onClose(()=>e?.(_n.CLOSED));const h={},f={broadcast:a,presence:l,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(g=>g.filter))!==null&&n!==void 0?n:[],private:d};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:g})=>{var x;if(this.socket.setAuth(),g===void 0){e?.(_n.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(x=v?.length)!==null&&x!==void 0?x:0,w=[];for(let _=0;_<b;_++){const T=v[_],{filter:{event:S,schema:E,table:A,filter:O}}=T,D=g&&g[_];if(D&&D.event===S&&D.schema===E&&D.table===A&&D.filter===O)w.push(Object.assign(Object.assign({},T),{id:D.id}));else{this.unsubscribe(),this.state=bs.errored,e?.(_n.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(_n.SUBSCRIBED);return}}).receive("error",g=>{this.state=bs.errored,e?.(_n.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e?.(_n.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:l}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=f.body)===null||n===void 0?void 0:n.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,d,h;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(d=(l=this.params)===null||l===void 0?void 0:l.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&a("ok"),f.receive("ok",()=>a("ok")),f.receive("error",()=>a("error")),f.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=bs.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Er.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new tg(this,Er.leave,{},e),s.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const n=new AbortController,a=setTimeout(()=>n.abort(),s),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(a),l}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new tg(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,a;const l=e.toLocaleLowerCase(),{close:d,error:h,leave:f,join:g}=Er;if(s&&[d,h,f,g].indexOf(l)>=0&&s!==this._joinRef())return;let v=this._onMessage(l,t,s);if(t&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(b=>{var w,_,T;return((w=b.filter)===null||w===void 0?void 0:w.event)==="*"||((T=(_=b.filter)===null||_===void 0?void 0:_.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===l}).map(b=>b.callback(v,s)):(a=this.bindings[l])===null||a===void 0||a.filter(b=>{var w,_,T,S,E,A;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const O=b.id,D=(w=b.filter)===null||w===void 0?void 0:w.event;return O&&((_=t.ids)===null||_===void 0?void 0:_.includes(O))&&(D==="*"||D?.toLocaleLowerCase()===((T=t.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const O=(E=(S=b?.filter)===null||S===void 0?void 0:S.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return O==="*"||O===((A=t?.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof v=="object"&&"ids"in v){const w=v.data,{schema:_,table:T,commit_timestamp:S,type:E,errors:A}=w;v=Object.assign(Object.assign({},{schema:_,table:T,commit_timestamp:S,eventType:E,new:{},old:{},errors:A}),this._getPayloadRecords(w))}b.callback(v,s)})}_isClosed(){return this.state===bs.closed}_isJoined(){return this.state===bs.joined}_isJoining(){return this.state===bs.joining}_isLeaving(){return this.state===bs.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),a={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var a;return!(((a=n.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&Wp.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Er.close,{},e)}_onError(e){this._on(Er.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=bs.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=o2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=o2(e.columns,e.old_record)),t}}const d2=()=>{},H5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $5{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=e_,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=d2,this.ref=0,this.logger=d2,this.conn=null,this.sendBuffer=[],this.serializer=new P5,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...d)=>Oc(async()=>{const{default:h}=await Promise.resolve().then(()=>Oo);return{default:h}},void 0).then(({default:h})=>h(...d)):l=fetch,(...d)=>l(...d)},this.endPoint=`${e}/${Gg.websocket}`,this.httpEndpoint=r_(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(s=t?.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=t?.encode?t.encode:(a,l)=>l(JSON.stringify(a)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new t_(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=D5),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:L5}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ec.connecting:return qi.Connecting;case ec.open:return qi.Open;case ec.closing:return qi.Closing;default:return qi.Closed}}isConnected(){return this.connectionState()===qi.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(a=>a.topic===s);if(n)return n;{const a=new Wp(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:s,payload:n,ref:a}=e,l=()=>{this.encode(e,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${t} ${s} (${a})`,n),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const n={access_token:t,version:M5};t&&s.updateJoinPayload(n),s.joinedOnce&&s._isJoined()&&s._push(Er.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(R5,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:a,ref:l}=t;s==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${s} ${n} ${l&&"("+l+")"||""}`,a),Array.from(this.channels).filter(d=>d._isMember(s)).forEach(d=>d._trigger(n,a,l)),this.stateChangeCallbacks.message.forEach(d=>d(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Er.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([H5],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class Yp extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function as(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class G5 extends Yp{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Yg extends Yp{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var W5=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function d(g){try{f(s.next(g))}catch(x){l(x)}}function h(g){try{f(s.throw(g))}catch(x){l(x)}}function f(g){g.done?a(g.value):n(g.value).then(d,h)}f((s=s.apply(r,e||[])).next())})};const n_=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Oc(async()=>{const{default:s}=await Promise.resolve().then(()=>Oo);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Y5=()=>W5(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Oc(()=>Promise.resolve().then(()=>Oo),void 0)).Response:Response}),qg=r=>{if(Array.isArray(r))return r.map(t=>qg(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const n=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[n]=qg(s)}),e};var ca=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function d(g){try{f(s.next(g))}catch(x){l(x)}}function h(g){try{f(s.throw(g))}catch(x){l(x)}}function f(g){g.done?a(g.value):n(g.value).then(d,h)}f((s=s.apply(r,e||[])).next())})};const sg=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),q5=(r,e,t)=>ca(void 0,void 0,void 0,function*(){const s=yield Y5();r instanceof s&&!t?.noResolveJson?r.json().then(n=>{e(new G5(sg(n),r.status||500))}).catch(n=>{e(new Yg(sg(n),n))}):e(new Yg(sg(r),r))}),X5=(r,e,t,s)=>{const n={method:r,headers:e?.headers||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),t))};function Mc(r,e,t,s,n,a){return ca(this,void 0,void 0,function*(){return new Promise((l,d)=>{r(t,X5(e,s,n,a)).then(h=>{if(!h.ok)throw h;return s?.noResolveJson?h:h.json()}).then(h=>l(h)).catch(h=>q5(h,d,s))})})}function Jd(r,e,t,s){return ca(this,void 0,void 0,function*(){return Mc(r,"GET",e,t,s)})}function mi(r,e,t,s,n){return ca(this,void 0,void 0,function*(){return Mc(r,"POST",e,s,n,t)})}function K5(r,e,t,s,n){return ca(this,void 0,void 0,function*(){return Mc(r,"PUT",e,s,n,t)})}function Z5(r,e,t,s){return ca(this,void 0,void 0,function*(){return Mc(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function i_(r,e,t,s,n){return ca(this,void 0,void 0,function*(){return Mc(r,"DELETE",e,s,n,t)})}var Ls=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function d(g){try{f(s.next(g))}catch(x){l(x)}}function h(g){try{f(s.throw(g))}catch(x){l(x)}}function f(g){g.done?a(g.value):n(g.value).then(d,h)}f((s=s.apply(r,e||[])).next())})};const Q5={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},h2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class J5{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=n_(n)}uploadOrUpdate(e,t,s,n){return Ls(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},h2),n);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),h&&a.append("metadata",this.encodeMetadata(h)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",l.cacheControl),h&&a.append("metadata",this.encodeMetadata(h))):(a=s,d["cache-control"]=`max-age=${l.cacheControl}`,d["content-type"]=l.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),n?.headers&&(d=Object.assign(Object.assign({},d),n.headers));const f=this._removeEmptyFolders(t),g=this._getFinalPath(f),x=yield this.fetch(`${this.url}/object/${g}`,Object.assign({method:e,body:a,headers:d},l?.duplex?{duplex:l.duplex}:{})),v=yield x.json();return x.ok?{data:{path:f,id:v.Id,fullPath:v.Key},error:null}:{data:null,error:v}}catch(a){if(as(a))return{data:null,error:a};throw a}})}upload(e,t,s){return Ls(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return Ls(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),d=new URL(this.url+`/object/upload/sign/${l}`);d.searchParams.set("token",t);try{let h;const f=Object.assign({upsert:h2.upsert},n),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&s instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),h.append("",s)):typeof FormData<"u"&&s instanceof FormData?(h=s,h.append("cacheControl",f.cacheControl)):(h=s,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType);const x=yield this.fetch(d.toString(),{method:"PUT",body:h,headers:g}),v=yield x.json();return x.ok?{data:{path:a,fullPath:v.Key},error:null}:{data:null,error:v}}catch(h){if(as(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,t){return Ls(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);t?.upsert&&(n["x-upsert"]="true");const a=yield mi(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),l=new URL(this.url+a.url),d=l.searchParams.get("token");if(!d)throw new Yp("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:d},error:null}}catch(s){if(as(s))return{data:null,error:s};throw s}})}update(e,t,s){return Ls(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Ls(this,void 0,void 0,function*(){try{return{data:yield mi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(as(n))return{data:null,error:n};throw n}})}copy(e,t,s){return Ls(this,void 0,void 0,function*(){try{return{data:{path:(yield mi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(as(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return Ls(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),a=yield mi(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const l=s?.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(n){if(as(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return Ls(this,void 0,void 0,function*(){try{const n=yield mi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(n){if(as(n))return{data:null,error:n};throw n}})}download(e,t){return Ls(this,void 0,void 0,function*(){const n=typeof t?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(t?.transform||{}),l=a?`?${a}`:"";try{const d=this._getFinalPath(e);return{data:yield(yield Jd(this.fetch,`${this.url}/${n}/${d}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(d){if(as(d))return{data:null,error:d};throw d}})}info(e){return Ls(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Jd(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:qg(s),error:null}}catch(s){if(as(s))return{data:null,error:s};throw s}})}exists(e){return Ls(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Z5(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(as(s)&&s instanceof Yg){const n=s.originalError;if([400,404].includes(n?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],a=t?.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const d=typeof t?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(t?.transform||{});h!==""&&n.push(h);let f=n.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${s}${f}`)}}}remove(e){return Ls(this,void 0,void 0,function*(){try{return{data:yield i_(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(as(t))return{data:null,error:t};throw t}})}list(e,t,s){return Ls(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Q5),t),{prefix:e||""});return{data:yield mi(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(as(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const ek="2.7.1",tk={"X-Client-Info":`storage-js/${ek}`};var no=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function d(g){try{f(s.next(g))}catch(x){l(x)}}function h(g){try{f(s.throw(g))}catch(x){l(x)}}function f(g){g.done?a(g.value):n(g.value).then(d,h)}f((s=s.apply(r,e||[])).next())})};class sk{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},tk),t),this.fetch=n_(s)}listBuckets(){return no(this,void 0,void 0,function*(){try{return{data:yield Jd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(as(e))return{data:null,error:e};throw e}})}getBucket(e){return no(this,void 0,void 0,function*(){try{return{data:yield Jd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(as(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return no(this,void 0,void 0,function*(){try{return{data:yield mi(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(as(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return no(this,void 0,void 0,function*(){try{return{data:yield K5(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(as(s))return{data:null,error:s};throw s}})}emptyBucket(e){return no(this,void 0,void 0,function*(){try{return{data:yield mi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(as(t))return{data:null,error:t};throw t}})}deleteBucket(e){return no(this,void 0,void 0,function*(){try{return{data:yield i_(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(as(t))return{data:null,error:t};throw t}})}}class rk extends sk{constructor(e,t={},s){super(e,t,s)}from(e){return new J5(this.url,this.headers,e,this.fetch)}}const nk="2.50.5";let Kl="";typeof Deno<"u"?Kl="deno":typeof document<"u"?Kl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Kl="react-native":Kl="node";const ik={"X-Client-Info":`supabase-js-${Kl}/${nk}`},ak={headers:ik},ok={schema:"public"},lk={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ck={};var uk=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function d(g){try{f(s.next(g))}catch(x){l(x)}}function h(g){try{f(s.throw(g))}catch(x){l(x)}}function f(g){g.done?a(g.value):n(g.value).then(d,h)}f((s=s.apply(r,e||[])).next())})};const dk=r=>{let e;return r?e=r:typeof fetch>"u"?e=qw:e=fetch,(...t)=>e(...t)},hk=()=>typeof Headers>"u"?Xw:Headers,fk=(r,e,t)=>{const s=dk(t),n=hk();return(a,l)=>uk(void 0,void 0,void 0,function*(){var d;const h=(d=yield e())!==null&&d!==void 0?d:r;let f=new n(l?.headers);return f.has("apikey")||f.set("apikey",r),f.has("Authorization")||f.set("Authorization",`Bearer ${h}`),s(a,Object.assign(Object.assign({},l),{headers:f}))})};var mk=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function d(g){try{f(s.next(g))}catch(x){l(x)}}function h(g){try{f(s.throw(g))}catch(x){l(x)}}function f(g){g.done?a(g.value):n(g.value).then(d,h)}f((s=s.apply(r,e||[])).next())})};function gk(r){return r.endsWith("/")?r:r+"/"}function pk(r,e){var t,s;const{db:n,auth:a,realtime:l,global:d}=r,{db:h,auth:f,realtime:g,global:x}=e,v={db:Object.assign(Object.assign({},h),n),auth:Object.assign(Object.assign({},f),a),realtime:Object.assign(Object.assign({},g),l),global:Object.assign(Object.assign(Object.assign({},x),d),{headers:Object.assign(Object.assign({},(t=x?.headers)!==null&&t!==void 0?t:{}),(s=d?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>mk(this,void 0,void 0,function*(){return""})};return r.accessToken?v.accessToken=r.accessToken:delete v.accessToken,v}const a_="2.70.0",uo=30*1e3,Xg=3,rg=Xg*uo,xk="http://localhost:9999",vk="supabase.auth.token",yk={"X-Client-Info":`gotrue-js/${a_}`},Kg="X-Supabase-Api-Version",o_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wk=6e5;class qp extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function We(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class _k extends qp{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function Sk(r){return We(r)&&r.name==="AuthApiError"}class l_ extends qp{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class _i extends qp{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class hi extends _i{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jk(r){return We(r)&&r.name==="AuthSessionMissingError"}class sd extends _i{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class rd extends _i{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class nd extends _i{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ck(r){return We(r)&&r.name==="AuthImplicitGrantRedirectError"}class f2 extends _i{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Zg extends _i{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ng(r){return We(r)&&r.name==="AuthRetryableFetchError"}class m2 extends _i{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class sc extends _i{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const eh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),g2=` 	
\r=`.split(""),Tk=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<g2.length;e+=1)r[g2[e].charCodeAt(0)]=-2;for(let e=0;e<eh.length;e+=1)r[eh[e].charCodeAt(0)]=e;return r})();function p2(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(eh[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(eh[s]),e.queuedBits-=6}}function c_(r,e,t){const s=Tk[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function x2(r){const e=[],t=l=>{e.push(String.fromCodePoint(l))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},a=l=>{Ek(l,s,t)};for(let l=0;l<r.length;l+=1)c_(r.charCodeAt(l),n,a);return e.join("")}function kk(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Ak(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}kk(s,e)}}function Ek(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if((r>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Nk(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<r.length;n+=1)c_(r.charCodeAt(n),t,s);return new Uint8Array(e)}function Dk(r){const e=[];return Ak(r,t=>e.push(t)),new Uint8Array(e)}function Ok(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};return r.forEach(n=>p2(n,t,s)),p2(null,t,s),e.join("")}function Mk(r){return Math.round(Date.now()/1e3)+r}function Lk(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Tr=()=>typeof window<"u"&&typeof document<"u",$i={tested:!1,writable:!1},rc=()=>{if(!Tr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($i.tested)return $i.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),$i.tested=!0,$i.writable=!0}catch{$i.tested=!0,$i.writable=!1}return $i.writable};function Rk(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,a)=>{e[a]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const u_=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Oc(async()=>{const{default:s}=await Promise.resolve().then(()=>Oo);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Pk=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",d_=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},id=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ad=async(r,e)=>{await r.removeItem(e)};class jh{constructor(){this.promise=new jh.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}jh.promiseConstructor=Promise;function ig(r){const e=r.split(".");if(e.length!==3)throw new sc("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!bk.test(e[s]))throw new sc("JWT not in base64url format");return{header:JSON.parse(x2(e[0])),payload:JSON.parse(x2(e[1])),signature:Nk(e[2]),raw:{header:e[0],payload:e[1]}}}async function Fk(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Bk(r,e){return new Promise((s,n)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await r(a);if(!e(a,null,l)){s(l);return}}catch(l){if(!e(a,l)){n(l);return}}})()})}function zk(r){return("0"+r.toString(16)).substr(-2)}function Uk(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let a=0;a<56;a++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,zk).join("")}async function Vk(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(a=>String.fromCharCode(a)).join("")}async function Ik(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Vk(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function io(r,e,t=!1){const s=Uk();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await d_(r,`${e}-code-verifier`,n);const a=await Ik(s);return[a,s===a?"plain":"s256"]}const Hk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $k(r){const e=r.headers.get(Kg);if(!e||!e.match(Hk))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Gk(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function Wk(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Yk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ao(r){if(!Yk.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var qk=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const Wi=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Xk=[502,503,504];async function v2(r){var e;if(!Pk(r))throw new Zg(Wi(r),0);if(Xk.includes(r.status))throw new Zg(Wi(r),r.status);let t;try{t=await r.json()}catch(a){throw new l_(Wi(a),a)}let s;const n=$k(r);if(n&&n.getTime()>=o_["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new m2(Wi(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new hi}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new m2(Wi(t),r.status,t.weak_password.reasons);throw new _k(Wi(t),r.status||500,s)}const Kk=(r,e,t,s)=>{const n={method:r,headers:e?.headers||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function et(r,e,t,s){var n;const a=Object.assign({},s?.headers);a[Kg]||(a[Kg]=o_["2024-01-01"].name),s?.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const l=(n=s?.query)!==null&&n!==void 0?n:{};s?.redirectTo&&(l.redirect_to=s.redirectTo);const d=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await Zk(r,e,t+d,{headers:a,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(h):{data:Object.assign({},h),error:null}}async function Zk(r,e,t,s,n,a){const l=Kk(e,s,n,a);let d;try{d=await r(t,Object.assign({},l))}catch(h){throw console.error(h),new Zg(Wi(h),0)}if(d.ok||await v2(d),s?.noResolveJson)return d;try{return await d.json()}catch(h){await v2(h)}}function yn(r){var e;let t=null;tA(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Mk(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function y2(r){const e=yn(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function gi(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Qk(r){return{data:r,error:null}}function Jk(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:a}=r,l=qk(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:a},h=Object.assign({},l);return{data:{properties:d,user:h},error:null}}function eA(r){return r}function tA(r){return r.access_token&&r.refresh_token&&r.expires_in}const ag=["global","local","others"];var sA=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class rA{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=u_(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=ag[0]){if(ag.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ag.join(", ")}`);try{return await et(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await et(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:gi})}catch(s){if(We(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=sA(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s?.newEmail,delete n.newEmail),await et(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Jk,redirectTo:t?.redirectTo})}catch(t){if(We(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await et(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:gi})}catch(t){if(We(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,a,l,d,h;try{const f={nextPage:null,lastPage:0,total:0},g=await et(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(a=(n=e?.perPage)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""},xform:eA});if(g.error)throw g.error;const x=await g.json(),v=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(h=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(w=>{const _=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(w.split(";")[1].split("=")[1]);f[`${T}Page`]=_}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},x),f),error:null}}catch(f){if(We(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){ao(e);try{return await et(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:gi})}catch(t){if(We(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){ao(e);try{return await et(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:gi})}catch(s){if(We(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){ao(e);try{return await et(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:gi})}catch(s){if(We(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){ao(e.userId);try{const{data:t,error:s}=await et(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(We(t))return{data:null,error:t};throw t}}async _deleteFactor(e){ao(e.userId),ao(e.id);try{return{data:await et(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(We(t))return{data:null,error:t};throw t}}}const nA={getItem:r=>rc()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{rc()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{rc()&&globalThis.localStorage.removeItem(r)}};function b2(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function iA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const oo={debug:!!(globalThis&&rc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class h_ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class aA extends h_{}async function oA(r,e,t){oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),oo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new aA(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(oo.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}iA();const lA={url:xk,storageKey:vk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function w2(r,e,t){return await t()}class pc{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=pc.nextInstanceID,pc.nextInstanceID+=1,this.instanceID>0&&Tr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},lA),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new rA({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=u_(n.fetch),this.lock=n.lock||w2,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Tr()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=oA:this.lock=w2,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:rc()?this.storage=nA:(this.memoryStorage={},this.storage=b2(this.memoryStorage)):(this.memoryStorage={},this.storage=b2(this.memoryStorage)),Tr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${a_}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Rk(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),Tr()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:a}=await this._getSessionFromURL(t,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Ck(a)){const h=(e=a.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:d}=n;return this._debug("#_initialize()","detected session in URL",l,"redirect type",d),await this._saveSession(l),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return We(t)?{error:t}:{error:new l_("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const a=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e?.options)===null||n===void 0?void 0:n.captchaToken}},xform:yn}),{data:l,error:d}=a;if(d||!l)return{data:{user:null,session:null},error:d};const h=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(a){if(We(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,s,n;try{let a;if("email"in e){const{email:g,password:x,options:v}=e;let b=null,w=null;this.flowType==="pkce"&&([b,w]=await io(this.storage,this.storageKey)),a=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:g,password:x,data:(t=v?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:w},xform:yn})}else if("phone"in e){const{phone:g,password:x,options:v}=e;a=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:x,data:(s=v?.data)!==null&&s!==void 0?s:{},channel:(n=v?.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:yn})}else throw new rd("You must provide either an email or phone number and a password");const{data:l,error:d}=a;if(d||!l)return{data:{user:null,session:null},error:d};const h=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(a){if(We(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:l,options:d}=e;t=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:y2})}else if("phone"in e){const{phone:a,password:l,options:d}=e;t=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:y2})}else throw new rd("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new sd}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(We(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,n,a,l,d,h,f,g,x,v,b;let w,_;if("message"in e)w=e.message,_=e.signature;else{const{chain:T,wallet:S,statement:E,options:A}=e;let O;if(Tr())if(typeof S=="object")O=S;else{const F=window;if("solana"in F&&typeof F.solana=="object"&&("signIn"in F.solana&&typeof F.solana.signIn=="function"||"signMessage"in F.solana&&typeof F.solana.signMessage=="function"))O=F.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=S}const D=new URL((t=A?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in O&&O.signIn){const F=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),E?{statement:E}:null));let B;if(Array.isArray(F)&&F[0]&&typeof F[0]=="object")B=F[0];else if(F&&typeof F=="object"&&"signedMessage"in F&&"signature"in F)B=F;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)w=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),_=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${D.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(n=(s=A?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((a=A?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((l=A?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((d=A?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((h=A?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((f=A?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((x=(g=A?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||x===void 0)&&x.length?["Resources",...A.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const F=await O.signMessage(new TextEncoder().encode(w),"utf8");if(!F||!(F instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=F}}try{const{data:T,error:S}=await et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Ok(_)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:yn});if(S)throw S;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new sd}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:S})}catch(T){if(We(T))return{data:{user:null,session:null},error:T};throw T}}async _exchangeCodeForSession(e){const t=await id(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/");try{const{data:a,error:l}=await et(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:yn});if(await ad(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new sd}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:n??null}),error:l})}catch(a){if(We(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:a,nonce:l}=e,d=await et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:yn}),{data:h,error:f}=d;return f?{data:{user:null,session:null},error:f}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new sd}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:f})}catch(t){if(We(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,a,l;try{if("email"in e){const{email:d,options:h}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await io(this.storage,this.storageKey));const{error:x}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(t=h?.data)!==null&&t!==void 0?t:{},create_user:(s=h?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:h?.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in e){const{phone:d,options:h}=e,{data:f,error:g}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(n=h?.data)!==null&&n!==void 0?n:{},create_user:(a=h?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(l=h?.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f?.message_id},error:g}}throw new rd("You must provide either an email or phone number.")}catch(d){if(We(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var t,s;try{let n,a;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:l,error:d}=await et(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:yn});if(d)throw d;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,f=l.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(n){if(We(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await io(this.storage,this.storageKey)),await et(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e?.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Qk})}catch(a){if(We(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new hi;const{error:n}=await et(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(We(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:a}=e,{error:l}=await et(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:s,type:n,options:a}=e,{data:l,error:d}=await et(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:d}}throw new rd("You must provide either an email or phone number and a type")}catch(t){if(We(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await id(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<rg:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(h,f,g)=>(!l&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,f,g))})}return{data:{session:e},error:null}}const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:gi}):await this._useSession(async t=>{var s,n,a;const{data:l,error:d}=t;if(d)throw d;return!(!((s=l.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new hi}:await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0,xform:gi})})}catch(t){if(We(t))return jk(t)&&(await this._removeSession(),await ad(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:a}=s;if(a)throw a;if(!n.session)throw new hi;const l=n.session;let d=null,h=null;this.flowType==="pkce"&&e.email!=null&&([d,h]=await io(this.storage,this.storageKey));const{data:f,error:g}=await et(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:h}),jwt:l.access_token,xform:gi});if(g)throw g;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(s){if(We(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new hi;const t=Date.now()/1e3;let s=t,n=!0,a=null;const{payload:l}=ig(e.access_token);if(l.exp&&(s=l.exp,n=s<=t),n){const{session:d,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!d)return{data:{user:null,session:null},error:null};a=d}else{const{data:d,error:h}=await this._getUser(e.access_token);if(h)throw h;a={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(We(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:l,error:d}=t;if(d)throw d;e=(s=l.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new hi;const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(We(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Tr())throw new nd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new nd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new f2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new nd("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new f2("No code detected.");const{data:E,error:A}=await this._exchangeCodeForSession(e.code);if(A)throw A;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:a,refresh_token:l,expires_in:d,expires_at:h,token_type:f}=e;if(!a||!d||!l||!f)throw new nd("No session defined in URL");const g=Math.round(Date.now()/1e3),x=parseInt(d);let v=g+x;h&&(v=parseInt(h));const b=v-g;b*1e3<=uo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${x}s`);const w=v-x;g-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,v,g):g-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,v,g);const{data:_,error:T}=await this._getUser(a);if(T)throw T;const S={provider_token:s,provider_refresh_token:n,access_token:a,expires_in:x,expires_at:v,refresh_token:l,token_type:f,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:e.type},error:null}}catch(s){if(We(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await id(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:a}=t;if(a)return{error:a};const l=(s=n.session)===null||s===void 0?void 0:s.access_token;if(l){const{error:d}=await this.admin.signOut(l,e);if(d&&!(Sk(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await ad(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Lk(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:a},error:l}=t;if(l)throw l;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await io(this.storage,this.storageKey,!0));try{return await et(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(We(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(We(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async a=>{var l,d,h,f,g;const{data:x,error:v}=a;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await et(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(f=x.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(n)throw n;return Tr()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(We(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:a,error:l}=t;if(l)throw l;return await et(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(We(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Bk(async n=>(n>0&&await Fk(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await et(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:yn})),(n,a)=>{const l=200*Math.pow(2,n);return a&&ng(a)&&Date.now()+l-s<uo})}catch(s){if(this._debug(t,"error",s),We(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Tr()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await id(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const n=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<rg;if(this._debug(t,`session has${n?"":" not"} expired with margin of ${rg}s`),n){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),ng(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new hi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new jh;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new hi;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const d={session:a.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(a){if(this._debug(n,"error",a),We(a)){const l={session:null,error:a};return ng(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,t)}catch(h){a.push(h)}});if(await Promise.all(l),a.length>0){for(let d=0;d<a.length;d+=1)console.error(a[d]);throw a[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await d_(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ad(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Tr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),uo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/uo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${uo}ms, refresh threshold is ${Xg} ticks`),n<=Xg&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof h_)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,l]=await io(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});n.push(d.toString())}if(s?.queryParams){const a=new URLSearchParams(s.queryParams);n.push(a.toString())}return s?.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;return a?{data:null,error:a}:await et(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(We(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:a,error:l}=t;if(l)return{data:null,error:l};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:h,error:f}=await et(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&(!((n=h?.totp)===null||n===void 0)&&n.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(t){if(We(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;if(a)return{data:null,error:a};const{data:l,error:d}=await et(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n?.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:d})})}catch(t){if(We(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;return a?{data:null,error:a}:await et(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(We(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=e?.factors||[],n=s.filter(l=>l.factor_type==="totp"&&l.status==="verified"),a=s.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:s,totp:n,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:a}=e;if(a)return{data:null,error:a};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=ig(n.access_token);let d=null;l.aal&&(d=l.aal);let h=d;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(x=>x.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(h="aal2");const g=l.amr||[];return{data:{currentLevel:d,nextLevel:h,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(l=>l.kid===e);if(s||(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+wk>Date.now()))return s;const{data:n,error:a}=await et(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!n.keys||n.keys.length===0)throw new sc("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),s=n.keys.find(l=>l.kid===e),!s)throw new sc("No matching signing key found in JWKS");return s}async getClaims(e,t={keys:[]}){try{let s=e;if(!s){const{data:b,error:w}=await this.getSession();if(w||!b.session)return{data:null,error:w};s=b.session.access_token}const{header:n,payload:a,signature:l,raw:{header:d,payload:h}}=ig(s);if(Gk(a.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:b}=await this.getUser(s);if(b)throw b;return{data:{claims:a,header:n,signature:l},error:null}}const f=Wk(n.alg),g=await this.fetchJwk(n.kid,t),x=await crypto.subtle.importKey("jwk",g,f,!0,["verify"]);if(!await crypto.subtle.verify(f,x,l,Dk(`${d}.${h}`)))throw new sc("Invalid JWT signature");return{data:{claims:a,header:n,signature:l},error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}}}pc.nextInstanceID=0;const cA=pc;class uA extends cA{constructor(e){super(e)}}var dA=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function d(g){try{f(s.next(g))}catch(x){l(x)}}function h(g){try{f(s.throw(g))}catch(x){l(x)}}function f(g){g.done?a(g.value):n(g.value).then(d,h)}f((s=s.apply(r,e||[])).next())})};class hA{constructor(e,t,s){var n,a,l;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const d=gk(e),h=new URL(d);this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const f=`sb-${h.hostname.split(".")[0]}-auth-token`,g={db:ok,realtime:ck,auth:Object.assign(Object.assign({},lk),{storageKey:f}),global:ak},x=pk(s??{},g);this.storageKey=(n=x.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=x.global.headers)!==null&&a!==void 0?a:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(v,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=x.auth)!==null&&l!==void 0?l:{},this.headers,x.global.fetch),this.fetch=fk(t,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new E5(new URL("rest/v1",h).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),x.accessToken||this._listenForAuthEvents()}get functions(){return new x5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new rk(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return dA(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:a,flowType:l,lock:d,debug:h},f,g){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new uA({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),f),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:l,lock:d,debug:h,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new $5(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s?.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const fA=(r,e,t)=>new hA(r,e,t),mA="https://qeknkhmmydekrjqnxooe.supabase.co",gA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFla25raG1teWRla3JqcW54b29lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIyOTIwOTYsImV4cCI6MjA2Nzg2ODA5Nn0.pGCpiP_wdpC2j1Js4v2TUZM0l8WcT6pP8dH7_DmChqI",xe=fA(mA,gA),Xp=C.createContext(),pA=({children:r})=>{const[e,t]=C.useState(null),[s,n]=C.useState(null),[a,l]=C.useState(!0),d=async(b,w,_,T,S,E)=>{const{data:A,error:O}=await xe.auth.signUp({email:b,password:w});if(O)return console.error("Sign-up error:",O),{success:!1,error:O};const D=A.user;if(console.log("Supabase signUp result:",A),!D)return l(!1),{success:!0,message:"Verification email sent. Please check your inbox."};A.session&&t(A.session);const{error:F}=await xe.from("CUSTOMER").insert([{cus_fname:_,cus_lname:T,cus_username:S,email:b,cus_celno:E?parseInt(E.replace(/\D/g,"")):0,auth_user_id:D.id}]);return F?(console.error("Error inserting into CUSTOMER:",F),{success:!1,error:F}):(n("customer"),l(!1),{success:!0,data:A,userRole:"customer"})},h=async({email:b,password:w})=>{try{const{data:_,error:T}=await xe.auth.signInWithPassword({email:b,password:w});if(T)return console.error("Sign-in error:",T),{success:!1,error:T.message};const E=_.user?.user_metadata?.role||null;return{success:!0,data:_,role:E}}catch(_){return console.error("Unexpected sign-in error:",_),{success:!1,error:"Unexpected error"}}},f=async()=>{const{error:b}=await xe.auth.signOut();b?console.error("Sign-out error:",b):n(null)},g=async()=>{try{const{data:b,error:w}=await xe.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/redirect`}});return w?(console.error("Google auth error:",w),{success:!1,error:w.message}):{success:!0,data:b}}catch(b){return console.error("Unexpected Google auth error:",b),{success:!1,error:"An unexpected error occurred"}}},x=async b=>{try{const{error:w}=await xe.auth.resetPasswordForEmail(b,{redirectTo:`${window.location.origin}/reset-password`});return w?(console.error("Password reset error:",w),{success:!1,error:w.message}):{success:!0,message:"Password reset email sent successfully!"}}catch(w){return console.error("Unexpected password reset error:",w),{success:!1,error:"An unexpected error occurred"}}},v=async b=>{if(!b){n(null);return}const{data:w}=await xe.from("CUSTOMER").select("cus_id").eq("auth_user_id",b).single();if(w){n("customer");return}const{data:_}=await xe.from("ADMIN").select("admin_id").eq("admin_uid",b).single();if(_){n("admin");return}n(null)};return C.useEffect(()=>{(async()=>{try{const{data:{session:_}}=await xe.auth.getSession();t(_),l(!1),_?.user?await v(_.user.id):n(null)}catch(_){console.error("Error fetching session:",_),l(!1)}})();const{data:w}=xe.auth.onAuthStateChange(async(_,T)=>{t(T),T?.user?v(T.user.id):n(null)});return()=>w?.subscription?.unsubscribe()},[]),c.jsx(Xp.Provider,{value:{session:e,signInUser:h,signUpNewUser:d,signInOrUpWithGoogle:g,signOut:f,resetPassword:x,userRole:s,loading:a},children:r})},zn=()=>C.useContext(Xp);let xA={data:""},vA=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||xA,yA=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,bA=/\/\*[^]*?\*\/|  +/g,_2=/\n+/g,pi=(r,e)=>{let t="",s="",n="";for(let a in r){let l=r[a];a[0]=="@"?a[1]=="i"?t=a+" "+l+";":s+=a[1]=="f"?pi(l,a):a+"{"+pi(l,a[1]=="k"?"":e)+"}":typeof l=="object"?s+=pi(l,e?e.replace(/([^,])+/g,d=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,d):d?d+" "+h:h)):a):l!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=pi.p?pi.p(a,l):a+":"+l+";")}return t+(e&&n?e+"{"+n+"}":n)+s},xn={},f_=r=>{if(typeof r=="object"){let e="";for(let t in r)e+=t+f_(r[t]);return e}return r},wA=(r,e,t,s,n)=>{let a=f_(r),l=xn[a]||(xn[a]=(h=>{let f=0,g=11;for(;f<h.length;)g=101*g+h.charCodeAt(f++)>>>0;return"go"+g})(a));if(!xn[l]){let h=a!==r?r:(f=>{let g,x,v=[{}];for(;g=yA.exec(f.replace(bA,""));)g[4]?v.shift():g[3]?(x=g[3].replace(_2," ").trim(),v.unshift(v[0][x]=v[0][x]||{})):v[0][g[1]]=g[2].replace(_2," ").trim();return v[0]})(r);xn[l]=pi(n?{["@keyframes "+l]:h}:h,t?"":"."+l)}let d=t&&xn.g?xn.g:null;return t&&(xn.g=xn[l]),((h,f,g,x)=>{x?f.data=f.data.replace(x,h):f.data.indexOf(h)===-1&&(f.data=g?h+f.data:f.data+h)})(xn[l],e,s,d),l},_A=(r,e,t)=>r.reduce((s,n,a)=>{let l=e[a];if(l&&l.call){let d=l(t),h=d&&d.props&&d.props.className||/^go/.test(d)&&d;l=h?"."+h:d&&typeof d=="object"?d.props?"":pi(d,""):d===!1?"":d}return s+n+(l??"")},"");function Ch(r){let e=this||{},t=r.call?r(e.p):r;return wA(t.unshift?t.raw?_A(t,[].slice.call(arguments,1),e.p):t.reduce((s,n)=>Object.assign(s,n&&n.call?n(e.p):n),{}):t,vA(e.target),e.g,e.o,e.k)}let m_,Qg,Jg;Ch.bind({g:1});let Dn=Ch.bind({k:1});function SA(r,e,t,s){pi.p=e,m_=r,Qg=t,Jg=s}function Si(r,e){let t=this||{};return function(){let s=arguments;function n(a,l){let d=Object.assign({},a),h=d.className||n.className;t.p=Object.assign({theme:Qg&&Qg()},d),t.o=/ *go\d+/.test(h),d.className=Ch.apply(t,s)+(h?" "+h:"");let f=r;return r[0]&&(f=d.as||r,delete d.as),Jg&&f[0]&&Jg(d),m_(f,d)}return n}}var jA=r=>typeof r=="function",th=(r,e)=>jA(r)?r(e):r,CA=(()=>{let r=0;return()=>(++r).toString()})(),g_=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");r=!e||e.matches}return r}})(),TA=20,p_=(r,e)=>{switch(e.type){case 0:return{...r,toasts:[e.toast,...r.toasts].slice(0,TA)};case 1:return{...r,toasts:r.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:t}=e;return p_(r,{type:r.toasts.find(a=>a.id===t.id)?1:0,toast:t});case 3:let{toastId:s}=e;return{...r,toasts:r.toasts.map(a=>a.id===s||s===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...r,pausedAt:e.time};case 6:let n=e.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+n}))}}},Vd=[],Qi={toasts:[],pausedAt:void 0},ua=r=>{Qi=p_(Qi,r),Vd.forEach(e=>{e(Qi)})},kA={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},AA=(r={})=>{let[e,t]=C.useState(Qi),s=C.useRef(Qi);C.useEffect(()=>(s.current!==Qi&&t(Qi),Vd.push(t),()=>{let a=Vd.indexOf(t);a>-1&&Vd.splice(a,1)}),[]);let n=e.toasts.map(a=>{var l,d,h;return{...r,...r[a.type],...a,removeDelay:a.removeDelay||((l=r[a.type])==null?void 0:l.removeDelay)||r?.removeDelay,duration:a.duration||((d=r[a.type])==null?void 0:d.duration)||r?.duration||kA[a.type],style:{...r.style,...(h=r[a.type])==null?void 0:h.style,...a.style}}});return{...e,toasts:n}},EA=(r,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...t,id:t?.id||CA()}),Lc=r=>(e,t)=>{let s=EA(e,r,t);return ua({type:2,toast:s}),s.id},Ne=(r,e)=>Lc("blank")(r,e);Ne.error=Lc("error");Ne.success=Lc("success");Ne.loading=Lc("loading");Ne.custom=Lc("custom");Ne.dismiss=r=>{ua({type:3,toastId:r})};Ne.remove=r=>ua({type:4,toastId:r});Ne.promise=(r,e,t)=>{let s=Ne.loading(e.loading,{...t,...t?.loading});return typeof r=="function"&&(r=r()),r.then(n=>{let a=e.success?th(e.success,n):void 0;return a?Ne.success(a,{id:s,...t,...t?.success}):Ne.dismiss(s),n}).catch(n=>{let a=e.error?th(e.error,n):void 0;a?Ne.error(a,{id:s,...t,...t?.error}):Ne.dismiss(s)}),r};var NA=(r,e)=>{ua({type:1,toast:{id:r,height:e}})},DA=()=>{ua({type:5,time:Date.now()})},nc=new Map,OA=1e3,MA=(r,e=OA)=>{if(nc.has(r))return;let t=setTimeout(()=>{nc.delete(r),ua({type:4,toastId:r})},e);nc.set(r,t)},LA=r=>{let{toasts:e,pausedAt:t}=AA(r);C.useEffect(()=>{if(t)return;let a=Date.now(),l=e.map(d=>{if(d.duration===1/0)return;let h=(d.duration||0)+d.pauseDuration-(a-d.createdAt);if(h<0){d.visible&&Ne.dismiss(d.id);return}return setTimeout(()=>Ne.dismiss(d.id),h)});return()=>{l.forEach(d=>d&&clearTimeout(d))}},[e,t]);let s=C.useCallback(()=>{t&&ua({type:6,time:Date.now()})},[t]),n=C.useCallback((a,l)=>{let{reverseOrder:d=!1,gutter:h=8,defaultPosition:f}=l||{},g=e.filter(b=>(b.position||f)===(a.position||f)&&b.height),x=g.findIndex(b=>b.id===a.id),v=g.filter((b,w)=>w<x&&b.visible).length;return g.filter(b=>b.visible).slice(...d?[v+1]:[0,v]).reduce((b,w)=>b+(w.height||0)+h,0)},[e]);return C.useEffect(()=>{e.forEach(a=>{if(a.dismissed)MA(a.id,a.removeDelay);else{let l=nc.get(a.id);l&&(clearTimeout(l),nc.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:NA,startPause:DA,endPause:s,calculateOffset:n}}},RA=Dn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,PA=Dn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,FA=Dn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,BA=Si("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${RA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${PA} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${FA} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,zA=Dn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,UA=Si("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${zA} 1s linear infinite;
`,VA=Dn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,IA=Dn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,HA=Si("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${VA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${IA} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,$A=Si("div")`
  position: absolute;
`,GA=Si("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,WA=Dn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,YA=Si("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${WA} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,qA=({toast:r})=>{let{icon:e,type:t,iconTheme:s}=r;return e!==void 0?typeof e=="string"?C.createElement(YA,null,e):e:t==="blank"?null:C.createElement(GA,null,C.createElement(UA,{...s}),t!=="loading"&&C.createElement($A,null,t==="error"?C.createElement(BA,{...s}):C.createElement(HA,{...s})))},XA=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,KA=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,ZA="0%{opacity:0;} 100%{opacity:1;}",QA="0%{opacity:1;} 100%{opacity:0;}",JA=Si("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,eE=Si("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,tE=(r,e)=>{let t=r.includes("top")?1:-1,[s,n]=g_()?[ZA,QA]:[XA(t),KA(t)];return{animation:e?`${Dn(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Dn(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},sE=C.memo(({toast:r,position:e,style:t,children:s})=>{let n=r.height?tE(r.position||e||"top-center",r.visible):{opacity:0},a=C.createElement(qA,{toast:r}),l=C.createElement(eE,{...r.ariaProps},th(r.message,r));return C.createElement(JA,{className:r.className,style:{...n,...t,...r.style}},typeof s=="function"?s({icon:a,message:l}):C.createElement(C.Fragment,null,a,l))});SA(C.createElement);var rE=({id:r,className:e,style:t,onHeightUpdate:s,children:n})=>{let a=C.useCallback(l=>{if(l){let d=()=>{let h=l.getBoundingClientRect().height;s(r,h)};d(),new MutationObserver(d).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[r,s]);return C.createElement("div",{ref:a,className:e,style:t},n)},nE=(r,e)=>{let t=r.includes("top"),s=t?{top:0}:{bottom:0},n=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:g_()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...s,...n}},iE=Ch`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,od=16,aE=({reverseOrder:r,position:e="top-center",toastOptions:t,gutter:s,children:n,containerStyle:a,containerClassName:l})=>{let{toasts:d,handlers:h}=LA(t);return C.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:od,left:od,right:od,bottom:od,pointerEvents:"none",...a},className:l,onMouseEnter:h.startPause,onMouseLeave:h.endPause},d.map(f=>{let g=f.position||e,x=h.calculateOffset(f,{reverseOrder:r,gutter:s,defaultPosition:e}),v=nE(g,x);return C.createElement(rE,{id:f.id,key:f.id,onHeightUpdate:h.updateHeight,className:f.visible?iE:"",style:v},f.type==="custom"?th(f.message,f):n?n(f):C.createElement(sE,{toast:f,position:g}))}))},_e=Ne;const Kp=C.createContext({});function Zp(r){const e=C.useRef(null);return e.current===null&&(e.current=r()),e.current}const Qp=typeof window<"u",x_=Qp?C.useLayoutEffect:C.useEffect,Th=C.createContext(null);function Jp(r,e){r.indexOf(e)===-1&&r.push(e)}function e0(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}const On=(r,e,t)=>t>e?e:t<r?r:t;let t0=()=>{};const Mn={},v_=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function y_(r){return typeof r=="object"&&r!==null}const b_=r=>/^0[^.\s]+$/u.test(r);function s0(r){let e;return()=>(e===void 0&&(e=r()),e)}const pr=r=>r,oE=(r,e)=>t=>e(r(t)),Rc=(...r)=>r.reduce(oE),xc=(r,e,t)=>{const s=e-r;return s===0?1:(t-r)/s};class r0{constructor(){this.subscriptions=[]}add(e){return Jp(this.subscriptions,e),()=>e0(this.subscriptions,e)}notify(e,t,s){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](e,t,s);else for(let a=0;a<n;a++){const l=this.subscriptions[a];l&&l(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Kr=r=>r*1e3,Zr=r=>r/1e3;function w_(r,e){return e?r*(1e3/e):0}const __=(r,e,t)=>(((1-3*t+3*e)*r+(3*t-6*e))*r+3*e)*r,lE=1e-7,cE=12;function uE(r,e,t,s,n){let a,l,d=0;do l=e+(t-e)/2,a=__(l,s,n)-r,a>0?t=l:e=l;while(Math.abs(a)>lE&&++d<cE);return l}function Pc(r,e,t,s){if(r===e&&t===s)return pr;const n=a=>uE(a,0,1,r,t);return a=>a===0||a===1?a:__(n(a),e,s)}const S_=r=>e=>e<=.5?r(2*e)/2:(2-r(2*(1-e)))/2,j_=r=>e=>1-r(1-e),C_=Pc(.33,1.53,.69,.99),n0=j_(C_),T_=S_(n0),k_=r=>(r*=2)<1?.5*n0(r):.5*(2-Math.pow(2,-10*(r-1))),i0=r=>1-Math.sin(Math.acos(r)),A_=j_(i0),E_=S_(i0),dE=Pc(.42,0,1,1),hE=Pc(0,0,.58,1),N_=Pc(.42,0,.58,1),fE=r=>Array.isArray(r)&&typeof r[0]!="number",D_=r=>Array.isArray(r)&&typeof r[0]=="number",mE={linear:pr,easeIn:dE,easeInOut:N_,easeOut:hE,circIn:i0,circInOut:E_,circOut:A_,backIn:n0,backInOut:T_,backOut:C_,anticipate:k_},gE=r=>typeof r=="string",S2=r=>{if(D_(r)){t0(r.length===4);const[e,t,s,n]=r;return Pc(e,t,s,n)}else if(gE(r))return mE[r];return r},ld=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],j2={value:null};function pE(r,e){let t=new Set,s=new Set,n=!1,a=!1;const l=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1},h=0;function f(x){l.has(x)&&(g.schedule(x),r()),h++,x(d)}const g={schedule:(x,v=!1,b=!1)=>{const _=b&&n?t:s;return v&&l.add(x),_.has(x)||_.add(x),x},cancel:x=>{s.delete(x),l.delete(x)},process:x=>{if(d=x,n){a=!0;return}n=!0,[t,s]=[s,t],t.forEach(f),e&&j2.value&&j2.value.frameloop[e].push(h),h=0,t.clear(),n=!1,a&&(a=!1,g.process(x))}};return g}const xE=40;function O_(r,e){let t=!1,s=!0;const n={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,l=ld.reduce((A,O)=>(A[O]=pE(a,e?O:void 0),A),{}),{setup:d,read:h,resolveKeyframes:f,preUpdate:g,update:x,preRender:v,render:b,postRender:w}=l,_=()=>{const A=Mn.useManualTiming?n.timestamp:performance.now();t=!1,Mn.useManualTiming||(n.delta=s?1e3/60:Math.max(Math.min(A-n.timestamp,xE),1)),n.timestamp=A,n.isProcessing=!0,d.process(n),h.process(n),f.process(n),g.process(n),x.process(n),v.process(n),b.process(n),w.process(n),n.isProcessing=!1,t&&e&&(s=!1,r(_))},T=()=>{t=!0,s=!0,n.isProcessing||r(_)};return{schedule:ld.reduce((A,O)=>{const D=l[O];return A[O]=(F,B=!1,P=!1)=>(t||T(),D.schedule(F,B,P)),A},{}),cancel:A=>{for(let O=0;O<ld.length;O++)l[ld[O]].cancel(A)},state:n,steps:l}}const{schedule:_t,cancel:vi,state:ds,steps:og}=O_(typeof requestAnimationFrame<"u"?requestAnimationFrame:pr,!0);let Id;function vE(){Id=void 0}const Ps={now:()=>(Id===void 0&&Ps.set(ds.isProcessing||Mn.useManualTiming?ds.timestamp:performance.now()),Id),set:r=>{Id=r,queueMicrotask(vE)}},M_=r=>e=>typeof e=="string"&&e.startsWith(r),a0=M_("--"),yE=M_("var(--"),o0=r=>yE(r)?bE.test(r.split("/*")[0].trim()):!1,bE=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Mo={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},vc={...Mo,transform:r=>On(0,1,r)},cd={...Mo,default:1},ic=r=>Math.round(r*1e5)/1e5,l0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function wE(r){return r==null}const _E=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,c0=(r,e)=>t=>!!(typeof t=="string"&&_E.test(t)&&t.startsWith(r)||e&&!wE(t)&&Object.prototype.hasOwnProperty.call(t,e)),L_=(r,e,t)=>s=>{if(typeof s!="string")return s;const[n,a,l,d]=s.match(l0);return{[r]:parseFloat(n),[e]:parseFloat(a),[t]:parseFloat(l),alpha:d!==void 0?parseFloat(d):1}},SE=r=>On(0,255,r),lg={...Mo,transform:r=>Math.round(SE(r))},Ji={test:c0("rgb","red"),parse:L_("red","green","blue"),transform:({red:r,green:e,blue:t,alpha:s=1})=>"rgba("+lg.transform(r)+", "+lg.transform(e)+", "+lg.transform(t)+", "+ic(vc.transform(s))+")"};function jE(r){let e="",t="",s="",n="";return r.length>5?(e=r.substring(1,3),t=r.substring(3,5),s=r.substring(5,7),n=r.substring(7,9)):(e=r.substring(1,2),t=r.substring(2,3),s=r.substring(3,4),n=r.substring(4,5),e+=e,t+=t,s+=s,n+=n),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:n?parseInt(n,16)/255:1}}const ep={test:c0("#"),parse:jE,transform:Ji.transform},Fc=r=>({test:e=>typeof e=="string"&&e.endsWith(r)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${r}`}),fi=Fc("deg"),Qr=Fc("%"),Ie=Fc("px"),CE=Fc("vh"),TE=Fc("vw"),C2={...Qr,parse:r=>Qr.parse(r)/100,transform:r=>Qr.transform(r*100)},fo={test:c0("hsl","hue"),parse:L_("hue","saturation","lightness"),transform:({hue:r,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(r)+", "+Qr.transform(ic(e))+", "+Qr.transform(ic(t))+", "+ic(vc.transform(s))+")"},Vt={test:r=>Ji.test(r)||ep.test(r)||fo.test(r),parse:r=>Ji.test(r)?Ji.parse(r):fo.test(r)?fo.parse(r):ep.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Ji.transform(r):fo.transform(r),getAnimatableNone:r=>{const e=Vt.parse(r);return e.alpha=0,Vt.transform(e)}},kE=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function AE(r){return isNaN(r)&&typeof r=="string"&&(r.match(l0)?.length||0)+(r.match(kE)?.length||0)>0}const R_="number",P_="color",EE="var",NE="var(",T2="${}",DE=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function yc(r){const e=r.toString(),t=[],s={color:[],number:[],var:[]},n=[];let a=0;const d=e.replace(DE,h=>(Vt.test(h)?(s.color.push(a),n.push(P_),t.push(Vt.parse(h))):h.startsWith(NE)?(s.var.push(a),n.push(EE),t.push(h)):(s.number.push(a),n.push(R_),t.push(parseFloat(h))),++a,T2)).split(T2);return{values:t,split:d,indexes:s,types:n}}function F_(r){return yc(r).values}function B_(r){const{split:e,types:t}=yc(r),s=e.length;return n=>{let a="";for(let l=0;l<s;l++)if(a+=e[l],n[l]!==void 0){const d=t[l];d===R_?a+=ic(n[l]):d===P_?a+=Vt.transform(n[l]):a+=n[l]}return a}}const OE=r=>typeof r=="number"?0:Vt.test(r)?Vt.getAnimatableNone(r):r;function ME(r){const e=F_(r);return B_(r)(e.map(OE))}const yi={test:AE,parse:F_,createTransformer:B_,getAnimatableNone:ME};function cg(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function LE({hue:r,saturation:e,lightness:t,alpha:s}){r/=360,e/=100,t/=100;let n=0,a=0,l=0;if(!e)n=a=l=t;else{const d=t<.5?t*(1+e):t+e-t*e,h=2*t-d;n=cg(h,d,r+1/3),a=cg(h,d,r),l=cg(h,d,r-1/3)}return{red:Math.round(n*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:s}}function sh(r,e){return t=>t>0?e:r}const kt=(r,e,t)=>r+(e-r)*t,ug=(r,e,t)=>{const s=r*r,n=t*(e*e-s)+s;return n<0?0:Math.sqrt(n)},RE=[ep,Ji,fo],PE=r=>RE.find(e=>e.test(r));function k2(r){const e=PE(r);if(!e)return!1;let t=e.parse(r);return e===fo&&(t=LE(t)),t}const A2=(r,e)=>{const t=k2(r),s=k2(e);if(!t||!s)return sh(r,e);const n={...t};return a=>(n.red=ug(t.red,s.red,a),n.green=ug(t.green,s.green,a),n.blue=ug(t.blue,s.blue,a),n.alpha=kt(t.alpha,s.alpha,a),Ji.transform(n))},tp=new Set(["none","hidden"]);function FE(r,e){return tp.has(r)?t=>t<=0?r:e:t=>t>=1?e:r}function BE(r,e){return t=>kt(r,e,t)}function u0(r){return typeof r=="number"?BE:typeof r=="string"?o0(r)?sh:Vt.test(r)?A2:VE:Array.isArray(r)?z_:typeof r=="object"?Vt.test(r)?A2:zE:sh}function z_(r,e){const t=[...r],s=t.length,n=r.map((a,l)=>u0(a)(a,e[l]));return a=>{for(let l=0;l<s;l++)t[l]=n[l](a);return t}}function zE(r,e){const t={...r,...e},s={};for(const n in t)r[n]!==void 0&&e[n]!==void 0&&(s[n]=u0(r[n])(r[n],e[n]));return n=>{for(const a in s)t[a]=s[a](n);return t}}function UE(r,e){const t=[],s={color:0,var:0,number:0};for(let n=0;n<e.values.length;n++){const a=e.types[n],l=r.indexes[a][s[a]],d=r.values[l]??0;t[n]=d,s[a]++}return t}const VE=(r,e)=>{const t=yi.createTransformer(e),s=yc(r),n=yc(e);return s.indexes.var.length===n.indexes.var.length&&s.indexes.color.length===n.indexes.color.length&&s.indexes.number.length>=n.indexes.number.length?tp.has(r)&&!n.values.length||tp.has(e)&&!s.values.length?FE(r,e):Rc(z_(UE(s,n),n.values),t):sh(r,e)};function U_(r,e,t){return typeof r=="number"&&typeof e=="number"&&typeof t=="number"?kt(r,e,t):u0(r)(r,e)}const IE=r=>{const e=({timestamp:t})=>r(t);return{start:(t=!0)=>_t.update(e,t),stop:()=>vi(e),now:()=>ds.isProcessing?ds.timestamp:Ps.now()}},V_=(r,e,t=10)=>{let s="";const n=Math.max(Math.round(e/t),2);for(let a=0;a<n;a++)s+=Math.round(r(a/(n-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},rh=2e4;function d0(r){let e=0;const t=50;let s=r.next(e);for(;!s.done&&e<rh;)e+=t,s=r.next(e);return e>=rh?1/0:e}function HE(r,e=100,t){const s=t({...r,keyframes:[0,e]}),n=Math.min(d0(s),rh);return{type:"keyframes",ease:a=>s.next(n*a).value/e,duration:Zr(n)}}const $E=5;function I_(r,e,t){const s=Math.max(e-$E,0);return w_(t-r(s),e-s)}const Dt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},dg=.001;function GE({duration:r=Dt.duration,bounce:e=Dt.bounce,velocity:t=Dt.velocity,mass:s=Dt.mass}){let n,a,l=1-e;l=On(Dt.minDamping,Dt.maxDamping,l),r=On(Dt.minDuration,Dt.maxDuration,Zr(r)),l<1?(n=f=>{const g=f*l,x=g*r,v=g-t,b=sp(f,l),w=Math.exp(-x);return dg-v/b*w},a=f=>{const x=f*l*r,v=x*t+t,b=Math.pow(l,2)*Math.pow(f,2)*r,w=Math.exp(-x),_=sp(Math.pow(f,2),l);return(-n(f)+dg>0?-1:1)*((v-b)*w)/_}):(n=f=>{const g=Math.exp(-f*r),x=(f-t)*r+1;return-dg+g*x},a=f=>{const g=Math.exp(-f*r),x=(t-f)*(r*r);return g*x});const d=5/r,h=YE(n,a,d);if(r=Kr(r),isNaN(h))return{stiffness:Dt.stiffness,damping:Dt.damping,duration:r};{const f=Math.pow(h,2)*s;return{stiffness:f,damping:l*2*Math.sqrt(s*f),duration:r}}}const WE=12;function YE(r,e,t){let s=t;for(let n=1;n<WE;n++)s=s-r(s)/e(s);return s}function sp(r,e){return r*Math.sqrt(1-e*e)}const qE=["duration","bounce"],XE=["stiffness","damping","mass"];function E2(r,e){return e.some(t=>r[t]!==void 0)}function KE(r){let e={velocity:Dt.velocity,stiffness:Dt.stiffness,damping:Dt.damping,mass:Dt.mass,isResolvedFromDuration:!1,...r};if(!E2(r,XE)&&E2(r,qE))if(r.visualDuration){const t=r.visualDuration,s=2*Math.PI/(t*1.2),n=s*s,a=2*On(.05,1,1-(r.bounce||0))*Math.sqrt(n);e={...e,mass:Dt.mass,stiffness:n,damping:a}}else{const t=GE(r);e={...e,...t,mass:Dt.mass},e.isResolvedFromDuration=!0}return e}function nh(r=Dt.visualDuration,e=Dt.bounce){const t=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:e}:r;let{restSpeed:s,restDelta:n}=t;const a=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],d={done:!1,value:a},{stiffness:h,damping:f,mass:g,duration:x,velocity:v,isResolvedFromDuration:b}=KE({...t,velocity:-Zr(t.velocity||0)}),w=v||0,_=f/(2*Math.sqrt(h*g)),T=l-a,S=Zr(Math.sqrt(h/g)),E=Math.abs(T)<5;s||(s=E?Dt.restSpeed.granular:Dt.restSpeed.default),n||(n=E?Dt.restDelta.granular:Dt.restDelta.default);let A;if(_<1){const D=sp(S,_);A=F=>{const B=Math.exp(-_*S*F);return l-B*((w+_*S*T)/D*Math.sin(D*F)+T*Math.cos(D*F))}}else if(_===1)A=D=>l-Math.exp(-S*D)*(T+(w+S*T)*D);else{const D=S*Math.sqrt(_*_-1);A=F=>{const B=Math.exp(-_*S*F),P=Math.min(D*F,300);return l-B*((w+_*S*T)*Math.sinh(P)+D*T*Math.cosh(P))/D}}const O={calculatedDuration:b&&x||null,next:D=>{const F=A(D);if(b)d.done=D>=x;else{let B=D===0?w:0;_<1&&(B=D===0?Kr(w):I_(A,D,F));const P=Math.abs(B)<=s,H=Math.abs(l-F)<=n;d.done=P&&H}return d.value=d.done?l:F,d},toString:()=>{const D=Math.min(d0(O),rh),F=V_(B=>O.next(D*B).value,D,30);return D+"ms "+F},toTransition:()=>{}};return O}nh.applyToOptions=r=>{const e=HE(r,100,nh);return r.ease=e.ease,r.duration=Kr(e.duration),r.type="keyframes",r};function rp({keyframes:r,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:n=10,bounceStiffness:a=500,modifyTarget:l,min:d,max:h,restDelta:f=.5,restSpeed:g}){const x=r[0],v={done:!1,value:x},b=P=>d!==void 0&&P<d||h!==void 0&&P>h,w=P=>d===void 0?h:h===void 0||Math.abs(d-P)<Math.abs(h-P)?d:h;let _=t*e;const T=x+_,S=l===void 0?T:l(T);S!==T&&(_=S-x);const E=P=>-_*Math.exp(-P/s),A=P=>S+E(P),O=P=>{const H=E(P),N=A(P);v.done=Math.abs(H)<=f,v.value=v.done?S:N};let D,F;const B=P=>{b(v.value)&&(D=P,F=nh({keyframes:[v.value,w(v.value)],velocity:I_(A,P,v.value),damping:n,stiffness:a,restDelta:f,restSpeed:g}))};return B(0),{calculatedDuration:null,next:P=>{let H=!1;return!F&&D===void 0&&(H=!0,O(P),B(P)),D!==void 0&&P>=D?F.next(P-D):(!H&&O(P),v)}}}function ZE(r,e,t){const s=[],n=t||Mn.mix||U_,a=r.length-1;for(let l=0;l<a;l++){let d=n(r[l],r[l+1]);if(e){const h=Array.isArray(e)?e[l]||pr:e;d=Rc(h,d)}s.push(d)}return s}function QE(r,e,{clamp:t=!0,ease:s,mixer:n}={}){const a=r.length;if(t0(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=r[0]===r[1];r[0]>r[a-1]&&(r=[...r].reverse(),e=[...e].reverse());const d=ZE(e,s,n),h=d.length,f=g=>{if(l&&g<r[0])return e[0];let x=0;if(h>1)for(;x<r.length-2&&!(g<r[x+1]);x++);const v=xc(r[x],r[x+1],g);return d[x](v)};return t?g=>f(On(r[0],r[a-1],g)):f}function JE(r,e){const t=r[r.length-1];for(let s=1;s<=e;s++){const n=xc(0,e,s);r.push(kt(t,1,n))}}function eN(r){const e=[0];return JE(e,r.length-1),e}function tN(r,e){return r.map(t=>t*e)}function sN(r,e){return r.map(()=>e||N_).splice(0,r.length-1)}function ac({duration:r=300,keyframes:e,times:t,ease:s="easeInOut"}){const n=fE(s)?s.map(S2):S2(s),a={done:!1,value:e[0]},l=tN(t&&t.length===e.length?t:eN(e),r),d=QE(l,e,{ease:Array.isArray(n)?n:sN(e,n)});return{calculatedDuration:r,next:h=>(a.value=d(h),a.done=h>=r,a)}}const rN=r=>r!==null;function h0(r,{repeat:e,repeatType:t="loop"},s,n=1){const a=r.filter(rN),d=n<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!d||s===void 0?a[d]:s}const nN={decay:rp,inertia:rp,tween:ac,keyframes:ac,spring:nh};function H_(r){typeof r.type=="string"&&(r.type=nN[r.type])}class f0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const iN=r=>r/100;class m0 extends f0{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Ps.now()&&this.tick(Ps.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;H_(e);const{type:t=ac,repeat:s=0,repeatDelay:n=0,repeatType:a,velocity:l=0}=e;let{keyframes:d}=e;const h=t||ac;h!==ac&&typeof d[0]!="number"&&(this.mixKeyframes=Rc(iN,U_(d[0],d[1])),d=[0,100]);const f=h({...e,keyframes:d});a==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...d].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=d0(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+n,this.totalDuration=this.resolvedDuration*(s+1)-n,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:s,totalDuration:n,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:d,calculatedDuration:h}=this;if(this.startTime===null)return s.next(0);const{delay:f=0,keyframes:g,repeat:x,repeatType:v,repeatDelay:b,type:w,onUpdate:_,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-n/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const S=this.currentTime-f*(this.playbackSpeed>=0?1:-1),E=this.playbackSpeed>=0?S<0:S>n;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=n);let A=this.currentTime,O=s;if(x){const P=Math.min(this.currentTime,n)/d;let H=Math.floor(P),N=P%1;!N&&P>=1&&(N=1),N===1&&H--,H=Math.min(H,x+1),!!(H%2)&&(v==="reverse"?(N=1-N,b&&(N-=b/d)):v==="mirror"&&(O=l)),A=On(0,1,N)*d}const D=E?{done:!1,value:g[0]}:O.next(A);a&&(D.value=a(D.value));let{done:F}=D;!E&&h!==null&&(F=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const B=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return B&&w!==rp&&(D.value=h0(g,this.options,T,this.speed)),_&&_(D.value),B&&this.finish(),D}then(e,t){return this.finished.then(e,t)}get duration(){return Zr(this.calculatedDuration)}get time(){return Zr(this.currentTime)}set time(e){e=Kr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ps.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Zr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=IE,startTime:t}=this.options;this.driver||(this.driver=e(n=>this.tick(n))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=t??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ps.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function aN(r){for(let e=1;e<r.length;e++)r[e]??(r[e]=r[e-1])}const ea=r=>r*180/Math.PI,np=r=>{const e=ea(Math.atan2(r[1],r[0]));return ip(e)},oN={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:np,rotateZ:np,skewX:r=>ea(Math.atan(r[1])),skewY:r=>ea(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},ip=r=>(r=r%360,r<0&&(r+=360),r),N2=np,D2=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),O2=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),lN={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:D2,scaleY:O2,scale:r=>(D2(r)+O2(r))/2,rotateX:r=>ip(ea(Math.atan2(r[6],r[5]))),rotateY:r=>ip(ea(Math.atan2(-r[2],r[0]))),rotateZ:N2,rotate:N2,skewX:r=>ea(Math.atan(r[4])),skewY:r=>ea(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function ap(r){return r.includes("scale")?1:0}function op(r,e){if(!r||r==="none")return ap(e);const t=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,n;if(t)s=lN,n=t;else{const d=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=oN,n=d}if(!n)return ap(e);const a=s[e],l=n[1].split(",").map(uN);return typeof a=="function"?a(l):l[a]}const cN=(r,e)=>{const{transform:t="none"}=getComputedStyle(r);return op(t,e)};function uN(r){return parseFloat(r.trim())}const Lo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ro=new Set(Lo),M2=r=>r===Mo||r===Ie,dN=new Set(["x","y","z"]),hN=Lo.filter(r=>!dN.has(r));function fN(r){const e=[];return hN.forEach(t=>{const s=r.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e}const na={width:({x:r},{paddingLeft:e="0",paddingRight:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),height:({y:r},{paddingTop:e="0",paddingBottom:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),top:(r,{top:e})=>parseFloat(e),left:(r,{left:e})=>parseFloat(e),bottom:({y:r},{top:e})=>parseFloat(e)+(r.max-r.min),right:({x:r},{left:e})=>parseFloat(e)+(r.max-r.min),x:(r,{transform:e})=>op(e,"x"),y:(r,{transform:e})=>op(e,"y")};na.translateX=na.x;na.translateY=na.y;const ia=new Set;let lp=!1,cp=!1,up=!1;function $_(){if(cp){const r=Array.from(ia).filter(s=>s.needsMeasurement),e=new Set(r.map(s=>s.element)),t=new Map;e.forEach(s=>{const n=fN(s);n.length&&(t.set(s,n),s.render())}),r.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const n=t.get(s);n&&n.forEach(([a,l])=>{s.getValue(a)?.set(l)})}),r.forEach(s=>s.measureEndState()),r.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}cp=!1,lp=!1,ia.forEach(r=>r.complete(up)),ia.clear()}function G_(){ia.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(cp=!0)})}function mN(){up=!0,G_(),$_(),up=!1}class g0{constructor(e,t,s,n,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=n,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(ia.add(this),lp||(lp=!0,_t.read(G_),_t.resolveKeyframes($_))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:n}=this;if(e[0]===null){const a=n?.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(s&&t){const d=s.readValue(t,l);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=l),n&&a===void 0&&n.set(e[0])}aN(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ia.delete(this)}cancel(){this.state==="scheduled"&&(ia.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const gN=r=>r.startsWith("--");function pN(r,e,t){gN(e)?r.style.setProperty(e,t):r.style[e]=t}const xN=s0(()=>window.ScrollTimeline!==void 0),vN={};function yN(r,e){const t=s0(r);return()=>vN[e]??t()}const W_=yN(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Zl=([r,e,t,s])=>`cubic-bezier(${r}, ${e}, ${t}, ${s})`,L2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zl([0,.65,.55,1]),circOut:Zl([.55,0,1,.45]),backIn:Zl([.31,.01,.66,-.59]),backOut:Zl([.33,1.53,.69,.99])};function Y_(r,e){if(r)return typeof r=="function"?W_()?V_(r,e):"ease-out":D_(r)?Zl(r):Array.isArray(r)?r.map(t=>Y_(t,e)||L2.easeOut):L2[r]}function bN(r,e,t,{delay:s=0,duration:n=300,repeat:a=0,repeatType:l="loop",ease:d="easeOut",times:h}={},f=void 0){const g={[e]:t};h&&(g.offset=h);const x=Y_(d,n);Array.isArray(x)&&(g.easing=x);const v={delay:s,duration:n,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),r.animate(g,v)}function q_(r){return typeof r=="function"&&"applyToOptions"in r}function wN({type:r,...e}){return q_(r)&&W_()?r.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class _N extends f0{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:s,keyframes:n,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:d,onComplete:h}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,t0(typeof e.type!="string");const f=wN(e);this.animation=bN(t,s,n,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const g=h0(n,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(g):pN(t,s,g),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Zr(Number(e))}get time(){return Zr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Kr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&xN()?(this.animation.timeline=e,pr):t(this)}}const X_={anticipate:k_,backInOut:T_,circInOut:E_};function SN(r){return r in X_}function jN(r){typeof r.ease=="string"&&SN(r.ease)&&(r.ease=X_[r.ease])}const R2=10;class CN extends _N{constructor(e){jN(e),H_(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:s,onComplete:n,element:a,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const d=new m0({...l,autoplay:!1}),h=Kr(this.finishedTime??this.time);t.setWithVelocity(d.sample(h-R2).value,d.sample(h).value,R2),d.stop()}}const P2=(r,e)=>e==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(yi.test(r)||r==="0")&&!r.startsWith("url("));function TN(r){const e=r[0];if(r.length===1)return!0;for(let t=0;t<r.length;t++)if(r[t]!==e)return!0}function kN(r,e,t,s){const n=r[0];if(n===null)return!1;if(e==="display"||e==="visibility")return!0;const a=r[r.length-1],l=P2(n,e),d=P2(a,e);return!l||!d?!1:TN(r)||(t==="spring"||q_(t))&&s}function p0(r){return y_(r)&&"offsetHeight"in r}const AN=new Set(["opacity","clipPath","filter","transform"]),EN=s0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function NN(r){const{motionValue:e,name:t,repeatDelay:s,repeatType:n,damping:a,type:l}=r;if(!p0(e?.owner?.current))return!1;const{onUpdate:d,transformTemplate:h}=e.owner.getProps();return EN()&&t&&AN.has(t)&&(t!=="transform"||!h)&&!d&&!s&&n!=="mirror"&&a!==0&&l!=="inertia"}const DN=40;class ON extends f0{constructor({autoplay:e=!0,delay:t=0,type:s="keyframes",repeat:n=0,repeatDelay:a=0,repeatType:l="loop",keyframes:d,name:h,motionValue:f,element:g,...x}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Ps.now();const v={autoplay:e,delay:t,type:s,repeat:n,repeatDelay:a,repeatType:l,name:h,motionValue:f,element:g,...x},b=g?.KeyframeResolver||g0;this.keyframeResolver=new b(d,(w,_,T)=>this.onKeyframesResolved(w,_,v,!T),h,f,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,s,n){this.keyframeResolver=void 0;const{name:a,type:l,velocity:d,delay:h,isHandoff:f,onUpdate:g}=s;this.resolvedAt=Ps.now(),kN(e,a,l,d)||((Mn.instantAnimations||!h)&&g?.(h0(e,s,t)),e[0]=e[e.length-1],s.duration=0,s.repeat=0);const v={startTime:n?this.resolvedAt?this.resolvedAt-this.createdAt>DN?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...s,keyframes:e},b=!f&&NN(v)?new CN({...v,element:v.motionValue.owner.current}):new m0(v);b.finished.then(()=>this.notifyFinished()).catch(pr),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),mN()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const MN=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function LN(r){const e=MN.exec(r);if(!e)return[,];const[,t,s,n]=e;return[`--${t??s}`,n]}function K_(r,e,t=1){const[s,n]=LN(r);if(!s)return;const a=window.getComputedStyle(e).getPropertyValue(s);if(a){const l=a.trim();return v_(l)?parseFloat(l):l}return o0(n)?K_(n,e,t+1):n}function x0(r,e){return r?.[e]??r?.default??r}const Z_=new Set(["width","height","top","left","right","bottom",...Lo]),RN={test:r=>r==="auto",parse:r=>r},Q_=r=>e=>e.test(r),J_=[Mo,Ie,Qr,fi,TE,CE,RN],F2=r=>J_.find(Q_(r));function PN(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||b_(r):!0}const FN=new Set(["brightness","contrast","saturate","opacity"]);function BN(r){const[e,t]=r.slice(0,-1).split("(");if(e==="drop-shadow")return r;const[s]=t.match(l0)||[];if(!s)return r;const n=t.replace(s,"");let a=FN.has(e)?1:0;return s!==t&&(a*=100),e+"("+a+n+")"}const zN=/\b([a-z-]*)\(.*?\)/gu,dp={...yi,getAnimatableNone:r=>{const e=r.match(zN);return e?e.map(BN).join(" "):r}},B2={...Mo,transform:Math.round},UN={rotate:fi,rotateX:fi,rotateY:fi,rotateZ:fi,scale:cd,scaleX:cd,scaleY:cd,scaleZ:cd,skew:fi,skewX:fi,skewY:fi,distance:Ie,translateX:Ie,translateY:Ie,translateZ:Ie,x:Ie,y:Ie,z:Ie,perspective:Ie,transformPerspective:Ie,opacity:vc,originX:C2,originY:C2,originZ:Ie},v0={borderWidth:Ie,borderTopWidth:Ie,borderRightWidth:Ie,borderBottomWidth:Ie,borderLeftWidth:Ie,borderRadius:Ie,radius:Ie,borderTopLeftRadius:Ie,borderTopRightRadius:Ie,borderBottomRightRadius:Ie,borderBottomLeftRadius:Ie,width:Ie,maxWidth:Ie,height:Ie,maxHeight:Ie,top:Ie,right:Ie,bottom:Ie,left:Ie,padding:Ie,paddingTop:Ie,paddingRight:Ie,paddingBottom:Ie,paddingLeft:Ie,margin:Ie,marginTop:Ie,marginRight:Ie,marginBottom:Ie,marginLeft:Ie,backgroundPositionX:Ie,backgroundPositionY:Ie,...UN,zIndex:B2,fillOpacity:vc,strokeOpacity:vc,numOctaves:B2},VN={...v0,color:Vt,backgroundColor:Vt,outlineColor:Vt,fill:Vt,stroke:Vt,borderColor:Vt,borderTopColor:Vt,borderRightColor:Vt,borderBottomColor:Vt,borderLeftColor:Vt,filter:dp,WebkitFilter:dp},eS=r=>VN[r];function tS(r,e){let t=eS(r);return t!==dp&&(t=yi),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const IN=new Set(["auto","none","0"]);function HN(r,e,t){let s=0,n;for(;s<r.length&&!n;){const a=r[s];typeof a=="string"&&!IN.has(a)&&yc(a).values.length&&(n=r[s]),s++}if(n&&t)for(const a of e)r[a]=tS(t,n)}class $N extends g0{constructor(e,t,s,n,a){super(e,t,s,n,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),o0(f))){const g=K_(f,t.current);g!==void 0&&(e[h]=g),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!Z_.has(s)||e.length!==2)return;const[n,a]=e,l=F2(n),d=F2(a);if(l!==d)if(M2(l)&&M2(d))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else na[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let n=0;n<e.length;n++)(e[n]===null||PN(e[n]))&&s.push(n);s.length&&HN(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=na[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const n=t[t.length-1];n!==void 0&&e.getValue(s,n).jump(n,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const n=e.getValue(t);n&&n.jump(this.measuredOrigin,!1);const a=s.length-1,l=s[a];s[a]=na[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([d,h])=>{e.getValue(d).set(h)}),this.resolveNoneKeyframes()}}function GN(r,e,t){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let s=document;const n=t?.[r]??s.querySelectorAll(r);return n?Array.from(n):[]}return Array.from(r)}const sS=(r,e)=>e&&typeof r=="number"?e.transform(r):r,z2=30,WN=r=>!isNaN(parseFloat(r));class YN{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,n=!0)=>{const a=Ps.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();n&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Ps.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=WN(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new r0);const s=this.events[e].add(t);return e==="change"?()=>{s(),_t.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ps.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>z2)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,z2);return w_(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function To(r,e){return new YN(r,e)}const{schedule:y0}=O_(queueMicrotask,!1),kr={x:!1,y:!1};function rS(){return kr.x||kr.y}function qN(r){return r==="x"||r==="y"?kr[r]?null:(kr[r]=!0,()=>{kr[r]=!1}):kr.x||kr.y?null:(kr.x=kr.y=!0,()=>{kr.x=kr.y=!1})}function nS(r,e){const t=GN(r),s=new AbortController,n={passive:!0,...e,signal:s.signal};return[t,n,()=>s.abort()]}function U2(r){return!(r.pointerType==="touch"||rS())}function XN(r,e,t={}){const[s,n,a]=nS(r,t),l=d=>{if(!U2(d))return;const{target:h}=d,f=e(h,d);if(typeof f!="function"||!h)return;const g=x=>{U2(x)&&(f(x),h.removeEventListener("pointerleave",g))};h.addEventListener("pointerleave",g,n)};return s.forEach(d=>{d.addEventListener("pointerenter",l,n)}),a}const iS=(r,e)=>e?r===e?!0:iS(r,e.parentElement):!1,b0=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,KN=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ZN(r){return KN.has(r.tagName)||r.tabIndex!==-1}const Hd=new WeakSet;function V2(r){return e=>{e.key==="Enter"&&r(e)}}function hg(r,e){r.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const QN=(r,e)=>{const t=r.currentTarget;if(!t)return;const s=V2(()=>{if(Hd.has(t))return;hg(t,"down");const n=V2(()=>{hg(t,"up")}),a=()=>hg(t,"cancel");t.addEventListener("keyup",n,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",s,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",s),e)};function I2(r){return b0(r)&&!rS()}function JN(r,e,t={}){const[s,n,a]=nS(r,t),l=d=>{const h=d.currentTarget;if(!I2(d))return;Hd.add(h);const f=e(h,d),g=(b,w)=>{window.removeEventListener("pointerup",x),window.removeEventListener("pointercancel",v),Hd.has(h)&&Hd.delete(h),I2(b)&&typeof f=="function"&&f(b,{success:w})},x=b=>{g(b,h===window||h===document||t.useGlobalTarget||iS(h,b.target))},v=b=>{g(b,!1)};window.addEventListener("pointerup",x,n),window.addEventListener("pointercancel",v,n)};return s.forEach(d=>{(t.useGlobalTarget?window:d).addEventListener("pointerdown",l,n),p0(d)&&(d.addEventListener("focus",f=>QN(f,n)),!ZN(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),a}function aS(r){return y_(r)&&"ownerSVGElement"in r}function eD(r){return aS(r)&&r.tagName==="svg"}const _s=r=>!!(r&&r.getVelocity),tD=[...J_,Vt,yi],sD=r=>tD.find(Q_(r)),w0=C.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class rD extends C.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const s=t.offsetParent,n=p0(s)&&s.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=n-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function nD({children:r,isPresent:e,anchorX:t,root:s}){const n=C.useId(),a=C.useRef(null),l=C.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=C.useContext(w0);return C.useInsertionEffect(()=>{const{width:h,height:f,top:g,left:x,right:v}=l.current;if(e||!a.current||!h||!f)return;const b=t==="left"?`left: ${x}`:`right: ${v}`;a.current.dataset.motionPopId=n;const w=document.createElement("style");d&&(w.nonce=d);const _=s??document.head;return _.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${f}px !important;
            ${b}px !important;
            top: ${g}px !important;
          }
        `),()=>{_.removeChild(w),_.contains(w)&&_.removeChild(w)}},[e]),c.jsx(rD,{isPresent:e,childRef:a,sizeRef:l,children:C.cloneElement(r,{ref:a})})}const iD=({children:r,initial:e,isPresent:t,onExitComplete:s,custom:n,presenceAffectsLayout:a,mode:l,anchorX:d,root:h})=>{const f=Zp(aD),g=C.useId();let x=!0,v=C.useMemo(()=>(x=!1,{id:g,initial:e,isPresent:t,custom:n,onExitComplete:b=>{f.set(b,!0);for(const w of f.values())if(!w)return;s&&s()},register:b=>(f.set(b,!1),()=>f.delete(b))}),[t,f,s]);return a&&x&&(v={...v}),C.useMemo(()=>{f.forEach((b,w)=>f.set(w,!1))},[t]),C.useEffect(()=>{!t&&!f.size&&s&&s()},[t]),l==="popLayout"&&(r=c.jsx(nD,{isPresent:t,anchorX:d,root:h,children:r})),c.jsx(Th.Provider,{value:v,children:r})};function aD(){return new Map}function oS(r=!0){const e=C.useContext(Th);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:n}=e,a=C.useId();C.useEffect(()=>{if(r)return n(a)},[r]);const l=C.useCallback(()=>r&&s&&s(a),[a,s,r]);return!t&&s?[!1,l]:[!0]}const ud=r=>r.key||"";function H2(r){const e=[];return C.Children.forEach(r,t=>{C.isValidElement(t)&&e.push(t)}),e}const oD=({children:r,custom:e,initial:t=!0,onExitComplete:s,presenceAffectsLayout:n=!0,mode:a="sync",propagate:l=!1,anchorX:d="left",root:h})=>{const[f,g]=oS(l),x=C.useMemo(()=>H2(r),[r]),v=l&&!f?[]:x.map(ud),b=C.useRef(!0),w=C.useRef(x),_=Zp(()=>new Map),[T,S]=C.useState(x),[E,A]=C.useState(x);x_(()=>{b.current=!1,w.current=x;for(let F=0;F<E.length;F++){const B=ud(E[F]);v.includes(B)?_.delete(B):_.get(B)!==!0&&_.set(B,!1)}},[E,v.length,v.join("-")]);const O=[];if(x!==T){let F=[...x];for(let B=0;B<E.length;B++){const P=E[B],H=ud(P);v.includes(H)||(F.splice(B,0,P),O.push(P))}return a==="wait"&&O.length&&(F=O),A(H2(F)),S(x),null}const{forceRender:D}=C.useContext(Kp);return c.jsx(c.Fragment,{children:E.map(F=>{const B=ud(F),P=l&&!f?!1:x===E||v.includes(B),H=()=>{if(_.has(B))_.set(B,!0);else return;let N=!0;_.forEach(V=>{V||(N=!1)}),N&&(D?.(),A(w.current),l&&g?.(),s&&s())};return c.jsx(iD,{isPresent:P,initial:!b.current||t?void 0:!1,custom:e,presenceAffectsLayout:n,mode:a,root:h,onExitComplete:P?void 0:H,anchorX:d,children:F},B)})})},lS=C.createContext({strict:!1}),$2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ko={};for(const r in $2)ko[r]={isEnabled:e=>$2[r].some(t=>!!e[t])};function lD(r){for(const e in r)ko[e]={...ko[e],...r[e]}}const cD=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ih(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||cD.has(r)}let cS=r=>!ih(r);function uD(r){typeof r=="function"&&(cS=e=>e.startsWith("on")?!ih(e):r(e))}try{uD(require("@emotion/is-prop-valid").default)}catch{}function dD(r,e,t){const s={};for(const n in r)n==="values"&&typeof r.values=="object"||(cS(n)||t===!0&&ih(n)||!e&&!ih(n)||r.draggable&&n.startsWith("onDrag"))&&(s[n]=r[n]);return s}function hD(r){if(typeof Proxy>"u")return r;const e=new Map,t=(...s)=>r(...s);return new Proxy(t,{get:(s,n)=>n==="create"?r:(e.has(n)||e.set(n,r(n)),e.get(n))})}const kh=C.createContext({});function Ah(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function bc(r){return typeof r=="string"||Array.isArray(r)}const _0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],S0=["initial",..._0];function Eh(r){return Ah(r.animate)||S0.some(e=>bc(r[e]))}function uS(r){return!!(Eh(r)||r.variants)}function fD(r,e){if(Eh(r)){const{initial:t,animate:s}=r;return{initial:t===!1||bc(t)?t:void 0,animate:bc(s)?s:void 0}}return r.inherit!==!1?e:{}}function mD(r){const{initial:e,animate:t}=fD(r,C.useContext(kh));return C.useMemo(()=>({initial:e,animate:t}),[G2(e),G2(t)])}function G2(r){return Array.isArray(r)?r.join(" "):r}const gD=Symbol.for("motionComponentSymbol");function mo(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function pD(r,e,t){return C.useCallback(s=>{s&&r.onMount&&r.onMount(s),e&&(s?e.mount(s):e.unmount()),t&&(typeof t=="function"?t(s):mo(t)&&(t.current=s))},[e])}const j0=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xD="framerAppearId",dS="data-"+j0(xD),hS=C.createContext({});function vD(r,e,t,s,n){const{visualElement:a}=C.useContext(kh),l=C.useContext(lS),d=C.useContext(Th),h=C.useContext(w0).reducedMotion,f=C.useRef(null);s=s||l.renderer,!f.current&&s&&(f.current=s(r,{visualState:e,parent:a,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const g=f.current,x=C.useContext(hS);g&&!g.projection&&n&&(g.type==="html"||g.type==="svg")&&yD(f.current,t,n,x);const v=C.useRef(!1);C.useInsertionEffect(()=>{g&&v.current&&g.update(t,d)});const b=t[dS],w=C.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return x_(()=>{g&&(v.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),y0.render(g.render),w.current&&g.animationState&&g.animationState.animateChanges())}),C.useEffect(()=>{g&&(!w.current&&g.animationState&&g.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),w.current=!1))}),g}function yD(r,e,t,s){const{layoutId:n,layout:a,drag:l,dragConstraints:d,layoutScroll:h,layoutRoot:f,layoutCrossfade:g}=e;r.projection=new t(r.latestValues,e["data-framer-portal-id"]?void 0:fS(r.parent)),r.projection.setOptions({layoutId:n,layout:a,alwaysMeasureLayout:!!l||d&&mo(d),visualElement:r,animationType:typeof a=="string"?a:"both",initialPromotionConfig:s,crossfade:g,layoutScroll:h,layoutRoot:f})}function fS(r){if(r)return r.options.allowProjection!==!1?r.projection:fS(r.parent)}function bD({preloadedFeatures:r,createVisualElement:e,useRender:t,useVisualState:s,Component:n}){r&&lD(r);function a(d,h){let f;const g={...C.useContext(w0),...d,layoutId:wD(d)},{isStatic:x}=g,v=mD(d),b=s(d,x);if(!x&&Qp){_D();const w=SD(g);f=w.MeasureLayout,v.visualElement=vD(n,b,g,e,w.ProjectionNode)}return c.jsxs(kh.Provider,{value:v,children:[f&&v.visualElement?c.jsx(f,{visualElement:v.visualElement,...g}):null,t(n,d,pD(b,v.visualElement,h),b,x,v.visualElement)]})}a.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const l=C.forwardRef(a);return l[gD]=n,l}function wD({layoutId:r}){const e=C.useContext(Kp).id;return e&&r!==void 0?e+"-"+r:r}function _D(r,e){C.useContext(lS).strict}function SD(r){const{drag:e,layout:t}=ko;if(!e&&!t)return{};const s={...e,...t};return{MeasureLayout:e?.isEnabled(r)||t?.isEnabled(r)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const wc={};function jD(r){for(const e in r)wc[e]=r[e],a0(e)&&(wc[e].isCSSVariable=!0)}function mS(r,{layout:e,layoutId:t}){return Ro.has(r)||r.startsWith("origin")||(e||t!==void 0)&&(!!wc[r]||r==="opacity")}const CD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TD=Lo.length;function kD(r,e,t){let s="",n=!0;for(let a=0;a<TD;a++){const l=Lo[a],d=r[l];if(d===void 0)continue;let h=!0;if(typeof d=="number"?h=d===(l.startsWith("scale")?1:0):h=parseFloat(d)===0,!h||t){const f=sS(d,v0[l]);if(!h){n=!1;const g=CD[l]||l;s+=`${g}(${f}) `}t&&(e[l]=f)}}return s=s.trim(),t?s=t(e,n?"":s):n&&(s="none"),s}function C0(r,e,t){const{style:s,vars:n,transformOrigin:a}=r;let l=!1,d=!1;for(const h in e){const f=e[h];if(Ro.has(h)){l=!0;continue}else if(a0(h)){n[h]=f;continue}else{const g=sS(f,v0[h]);h.startsWith("origin")?(d=!0,a[h]=g):s[h]=g}}if(e.transform||(l||t?s.transform=kD(e,r.transform,t):s.transform&&(s.transform="none")),d){const{originX:h="50%",originY:f="50%",originZ:g=0}=a;s.transformOrigin=`${h} ${f} ${g}`}}const T0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function gS(r,e,t){for(const s in e)!_s(e[s])&&!mS(s,t)&&(r[s]=e[s])}function AD({transformTemplate:r},e){return C.useMemo(()=>{const t=T0();return C0(t,e,r),Object.assign({},t.vars,t.style)},[e])}function ED(r,e){const t=r.style||{},s={};return gS(s,t,r),Object.assign(s,AD(r,e)),s}function ND(r,e){const t={},s=ED(r,e);return r.drag&&r.dragListener!==!1&&(t.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(t.tabIndex=0),t.style=s,t}const DD={offset:"stroke-dashoffset",array:"stroke-dasharray"},OD={offset:"strokeDashoffset",array:"strokeDasharray"};function MD(r,e,t=1,s=0,n=!0){r.pathLength=1;const a=n?DD:OD;r[a.offset]=Ie.transform(-s);const l=Ie.transform(e),d=Ie.transform(t);r[a.array]=`${l} ${d}`}function pS(r,{attrX:e,attrY:t,attrScale:s,pathLength:n,pathSpacing:a=1,pathOffset:l=0,...d},h,f,g){if(C0(r,d,f),h){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:x,style:v}=r;x.transform&&(v.transform=x.transform,delete x.transform),(v.transform||x.transformOrigin)&&(v.transformOrigin=x.transformOrigin??"50% 50%",delete x.transformOrigin),v.transform&&(v.transformBox=g?.transformBox??"fill-box",delete x.transformBox),e!==void 0&&(x.x=e),t!==void 0&&(x.y=t),s!==void 0&&(x.scale=s),n!==void 0&&MD(x,n,a,l,!1)}const xS=()=>({...T0(),attrs:{}}),vS=r=>typeof r=="string"&&r.toLowerCase()==="svg";function LD(r,e,t,s){const n=C.useMemo(()=>{const a=xS();return pS(a,e,vS(s),r.transformTemplate,r.style),{...a.attrs,style:{...a.style}}},[e]);if(r.style){const a={};gS(a,r.style,r),n.style={...a,...n.style}}return n}const RD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function k0(r){return typeof r!="string"||r.includes("-")?!1:!!(RD.indexOf(r)>-1||/[A-Z]/u.test(r))}function PD(r=!1){return(t,s,n,{latestValues:a},l)=>{const h=(k0(t)?LD:ND)(s,a,l,t),f=dD(s,typeof t=="string",r),g=t!==C.Fragment?{...f,...h,ref:n}:{},{children:x}=s,v=C.useMemo(()=>_s(x)?x.get():x,[x]);return C.createElement(t,{...g,children:v})}}function W2(r){const e=[{},{}];return r?.values.forEach((t,s)=>{e[0][s]=t.get(),e[1][s]=t.getVelocity()}),e}function A0(r,e,t,s){if(typeof e=="function"){const[n,a]=W2(s);e=e(t!==void 0?t:r.custom,n,a)}if(typeof e=="string"&&(e=r.variants&&r.variants[e]),typeof e=="function"){const[n,a]=W2(s);e=e(t!==void 0?t:r.custom,n,a)}return e}function $d(r){return _s(r)?r.get():r}function FD({scrapeMotionValuesFromProps:r,createRenderState:e},t,s,n){return{latestValues:BD(t,s,n,r),renderState:e()}}const yS=r=>(e,t)=>{const s=C.useContext(kh),n=C.useContext(Th),a=()=>FD(r,e,s,n);return t?a():Zp(a)};function BD(r,e,t,s){const n={},a=s(r,{});for(const v in a)n[v]=$d(a[v]);let{initial:l,animate:d}=r;const h=Eh(r),f=uS(r);e&&f&&!h&&r.inherit!==!1&&(l===void 0&&(l=e.initial),d===void 0&&(d=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const x=g?d:l;if(x&&typeof x!="boolean"&&!Ah(x)){const v=Array.isArray(x)?x:[x];for(let b=0;b<v.length;b++){const w=A0(r,v[b]);if(w){const{transitionEnd:_,transition:T,...S}=w;for(const E in S){let A=S[E];if(Array.isArray(A)){const O=g?A.length-1:0;A=A[O]}A!==null&&(n[E]=A)}for(const E in _)n[E]=_[E]}}}return n}function E0(r,e,t){const{style:s}=r,n={};for(const a in s)(_s(s[a])||e.style&&_s(e.style[a])||mS(a,r)||t?.getValue(a)?.liveStyle!==void 0)&&(n[a]=s[a]);return n}const zD={useVisualState:yS({scrapeMotionValuesFromProps:E0,createRenderState:T0})};function bS(r,e,t){const s=E0(r,e,t);for(const n in r)if(_s(r[n])||_s(e[n])){const a=Lo.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;s[a]=r[n]}return s}const UD={useVisualState:yS({scrapeMotionValuesFromProps:bS,createRenderState:xS})};function VD(r,e){return function(s,{forwardMotionProps:n}={forwardMotionProps:!1}){const l={...k0(s)?UD:zD,preloadedFeatures:r,useRender:PD(n),createVisualElement:e,Component:s};return bD(l)}}function _c(r,e,t){const s=r.getProps();return A0(s,e,t!==void 0?t:s.custom,r)}const hp=r=>Array.isArray(r);function ID(r,e,t){r.hasValue(e)?r.getValue(e).set(t):r.addValue(e,To(t))}function HD(r){return hp(r)?r[r.length-1]||0:r}function $D(r,e){const t=_c(r,e);let{transitionEnd:s={},transition:n={},...a}=t||{};a={...a,...s};for(const l in a){const d=HD(a[l]);ID(r,l,d)}}function GD(r){return!!(_s(r)&&r.add)}function fp(r,e){const t=r.getValue("willChange");if(GD(t))return t.add(e);if(!t&&Mn.WillChange){const s=new Mn.WillChange("auto");r.addValue("willChange",s),s.add(e)}}function wS(r){return r.props[dS]}const WD=r=>r!==null;function YD(r,{repeat:e,repeatType:t="loop"},s){const n=r.filter(WD),a=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[a]}const qD={type:"spring",stiffness:500,damping:25,restSpeed:10},XD=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),KD={type:"keyframes",duration:.8},ZD={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},QD=(r,{keyframes:e})=>e.length>2?KD:Ro.has(r)?r.startsWith("scale")?XD(e[1]):qD:ZD;function JD({when:r,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:n,repeat:a,repeatType:l,repeatDelay:d,from:h,elapsed:f,...g}){return!!Object.keys(g).length}const N0=(r,e,t,s={},n,a)=>l=>{const d=x0(s,r)||{},h=d.delay||s.delay||0;let{elapsed:f=0}=s;f=f-Kr(h);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-f,onUpdate:v=>{e.set(v),d.onUpdate&&d.onUpdate(v)},onComplete:()=>{l(),d.onComplete&&d.onComplete()},name:r,motionValue:e,element:a?void 0:n};JD(d)||Object.assign(g,QD(r,g)),g.duration&&(g.duration=Kr(g.duration)),g.repeatDelay&&(g.repeatDelay=Kr(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let x=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(x=!0)),(Mn.instantAnimations||Mn.skipAnimations)&&(x=!0,g.duration=0,g.delay=0),g.allowFlatten=!d.type&&!d.ease,x&&!a&&e.get()!==void 0){const v=YD(g.keyframes,d);if(v!==void 0){_t.update(()=>{g.onUpdate(v),g.onComplete()});return}}return d.isSync?new m0(g):new ON(g)};function e6({protectedKeys:r,needsAnimating:e},t){const s=r.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function _S(r,e,{delay:t=0,transitionOverride:s,type:n}={}){let{transition:a=r.getDefaultTransition(),transitionEnd:l,...d}=e;s&&(a=s);const h=[],f=n&&r.animationState&&r.animationState.getState()[n];for(const g in d){const x=r.getValue(g,r.latestValues[g]??null),v=d[g];if(v===void 0||f&&e6(f,g))continue;const b={delay:t,...x0(a||{},g)},w=x.get();if(w!==void 0&&!x.isAnimating&&!Array.isArray(v)&&v===w&&!b.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const S=wS(r);if(S){const E=window.MotionHandoffAnimation(S,g,_t);E!==null&&(b.startTime=E,_=!0)}}fp(r,g),x.start(N0(g,x,v,r.shouldReduceMotion&&Z_.has(g)?{type:!1}:b,r,_));const T=x.animation;T&&h.push(T)}return l&&Promise.all(h).then(()=>{_t.update(()=>{l&&$D(r,l)})}),h}function mp(r,e,t={}){const s=_c(r,e,t.type==="exit"?r.presenceContext?.custom:void 0);let{transition:n=r.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(n=t.transitionOverride);const a=s?()=>Promise.all(_S(r,s,t)):()=>Promise.resolve(),l=r.variantChildren&&r.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:g,staggerDirection:x}=n;return t6(r,e,h,f,g,x,t)}:()=>Promise.resolve(),{when:d}=n;if(d){const[h,f]=d==="beforeChildren"?[a,l]:[l,a];return h().then(()=>f())}else return Promise.all([a(),l(t.delay)])}function t6(r,e,t=0,s=0,n=0,a=1,l){const d=[],h=r.variantChildren.size,f=(h-1)*n,g=typeof s=="function",x=g?v=>s(v,h):a===1?(v=0)=>v*n:(v=0)=>f-v*n;return Array.from(r.variantChildren).sort(s6).forEach((v,b)=>{v.notify("AnimationStart",e),d.push(mp(v,e,{...l,delay:t+(g?0:s)+x(b)}).then(()=>v.notify("AnimationComplete",e)))}),Promise.all(d)}function s6(r,e){return r.sortNodePosition(e)}function r6(r,e,t={}){r.notify("AnimationStart",e);let s;if(Array.isArray(e)){const n=e.map(a=>mp(r,a,t));s=Promise.all(n)}else if(typeof e=="string")s=mp(r,e,t);else{const n=typeof e=="function"?_c(r,e,t.custom):e;s=Promise.all(_S(r,n,t))}return s.then(()=>{r.notify("AnimationComplete",e)})}function SS(r,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==r.length)return!1;for(let s=0;s<t;s++)if(e[s]!==r[s])return!1;return!0}const n6=S0.length;function jS(r){if(!r)return;if(!r.isControllingVariants){const t=r.parent?jS(r.parent)||{}:{};return r.props.initial!==void 0&&(t.initial=r.props.initial),t}const e={};for(let t=0;t<n6;t++){const s=S0[t],n=r.props[s];(bc(n)||n===!1)&&(e[s]=n)}return e}const i6=[..._0].reverse(),a6=_0.length;function o6(r){return e=>Promise.all(e.map(({animation:t,options:s})=>r6(r,t,s)))}function l6(r){let e=o6(r),t=Y2(),s=!0;const n=h=>(f,g)=>{const x=_c(r,g,h==="exit"?r.presenceContext?.custom:void 0);if(x){const{transition:v,transitionEnd:b,...w}=x;f={...f,...w,...b}}return f};function a(h){e=h(r)}function l(h){const{props:f}=r,g=jS(r.parent)||{},x=[],v=new Set;let b={},w=1/0;for(let T=0;T<a6;T++){const S=i6[T],E=t[S],A=f[S]!==void 0?f[S]:g[S],O=bc(A),D=S===h?E.isActive:null;D===!1&&(w=T);let F=A===g[S]&&A!==f[S]&&O;if(F&&s&&r.manuallyAnimateOnMount&&(F=!1),E.protectedKeys={...b},!E.isActive&&D===null||!A&&!E.prevProp||Ah(A)||typeof A=="boolean")continue;const B=c6(E.prevProp,A);let P=B||S===h&&E.isActive&&!F&&O||T>w&&O,H=!1;const N=Array.isArray(A)?A:[A];let V=N.reduce(n(S),{});D===!1&&(V={});const{prevResolvedValues:G={}}=E,ne={...G,...V},Q=$=>{P=!0,v.has($)&&(H=!0,v.delete($)),E.needsAnimating[$]=!0;const K=r.getValue($);K&&(K.liveStyle=!1)};for(const $ in ne){const K=V[$],pe=G[$];if(b.hasOwnProperty($))continue;let M=!1;hp(K)&&hp(pe)?M=!SS(K,pe):M=K!==pe,M?K!=null?Q($):v.add($):K!==void 0&&v.has($)?Q($):E.protectedKeys[$]=!0}E.prevProp=A,E.prevResolvedValues=V,E.isActive&&(b={...b,...V}),s&&r.blockInitialAnimation&&(P=!1),P&&(!(F&&B)||H)&&x.push(...N.map($=>({animation:$,options:{type:S}})))}if(v.size){const T={};if(typeof f.initial!="boolean"){const S=_c(r,Array.isArray(f.initial)?f.initial[0]:f.initial);S&&S.transition&&(T.transition=S.transition)}v.forEach(S=>{const E=r.getBaseTarget(S),A=r.getValue(S);A&&(A.liveStyle=!0),T[S]=E??null}),x.push({animation:T})}let _=!!x.length;return s&&(f.initial===!1||f.initial===f.animate)&&!r.manuallyAnimateOnMount&&(_=!1),s=!1,_?e(x):Promise.resolve()}function d(h,f){if(t[h].isActive===f)return Promise.resolve();r.variantChildren?.forEach(x=>x.animationState?.setActive(h,f)),t[h].isActive=f;const g=l(h);for(const x in t)t[x].protectedKeys={};return g}return{animateChanges:l,setActive:d,setAnimateFunction:a,getState:()=>t,reset:()=>{t=Y2(),s=!0}}}function c6(r,e){return typeof e=="string"?e!==r:Array.isArray(e)?!SS(e,r):!1}function Gi(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Y2(){return{animate:Gi(!0),whileInView:Gi(),whileHover:Gi(),whileTap:Gi(),whileDrag:Gi(),whileFocus:Gi(),exit:Gi()}}class ji{constructor(e){this.isMounted=!1,this.node=e}update(){}}class u6 extends ji{constructor(e){super(e),e.animationState||(e.animationState=l6(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ah(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let d6=0;class h6 extends ji{constructor(){super(...arguments),this.id=d6++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const n=this.node.animationState.setActive("exit",!e);t&&!e&&n.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const f6={animation:{Feature:u6},exit:{Feature:h6}};function Sc(r,e,t,s={passive:!0}){return r.addEventListener(e,t,s),()=>r.removeEventListener(e,t)}function Bc(r){return{point:{x:r.pageX,y:r.pageY}}}const m6=r=>e=>b0(e)&&r(e,Bc(e));function oc(r,e,t,s){return Sc(r,e,m6(t),s)}function CS({top:r,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:r,max:s}}}function g6({x:r,y:e}){return{top:e.min,right:r.max,bottom:e.max,left:r.min}}function p6(r,e){if(!e)return r;const t=e({x:r.left,y:r.top}),s=e({x:r.right,y:r.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}const TS=1e-4,x6=1-TS,v6=1+TS,kS=.01,y6=0-kS,b6=0+kS;function ks(r){return r.max-r.min}function w6(r,e,t){return Math.abs(r-e)<=t}function q2(r,e,t,s=.5){r.origin=s,r.originPoint=kt(e.min,e.max,r.origin),r.scale=ks(t)/ks(e),r.translate=kt(t.min,t.max,r.origin)-r.originPoint,(r.scale>=x6&&r.scale<=v6||isNaN(r.scale))&&(r.scale=1),(r.translate>=y6&&r.translate<=b6||isNaN(r.translate))&&(r.translate=0)}function lc(r,e,t,s){q2(r.x,e.x,t.x,s?s.originX:void 0),q2(r.y,e.y,t.y,s?s.originY:void 0)}function X2(r,e,t){r.min=t.min+e.min,r.max=r.min+ks(e)}function _6(r,e,t){X2(r.x,e.x,t.x),X2(r.y,e.y,t.y)}function K2(r,e,t){r.min=e.min-t.min,r.max=r.min+ks(e)}function cc(r,e,t){K2(r.x,e.x,t.x),K2(r.y,e.y,t.y)}const Z2=()=>({translate:0,scale:1,origin:0,originPoint:0}),go=()=>({x:Z2(),y:Z2()}),Q2=()=>({min:0,max:0}),Rt=()=>({x:Q2(),y:Q2()});function mr(r){return[r("x"),r("y")]}function fg(r){return r===void 0||r===1}function gp({scale:r,scaleX:e,scaleY:t}){return!fg(r)||!fg(e)||!fg(t)}function Yi(r){return gp(r)||AS(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function AS(r){return J2(r.x)||J2(r.y)}function J2(r){return r&&r!=="0%"}function ah(r,e,t){const s=r-t,n=e*s;return t+n}function eb(r,e,t,s,n){return n!==void 0&&(r=ah(r,n,s)),ah(r,t,s)+e}function pp(r,e=0,t=1,s,n){r.min=eb(r.min,e,t,s,n),r.max=eb(r.max,e,t,s,n)}function ES(r,{x:e,y:t}){pp(r.x,e.translate,e.scale,e.originPoint),pp(r.y,t.translate,t.scale,t.originPoint)}const tb=.999999999999,sb=1.0000000000001;function S6(r,e,t,s=!1){const n=t.length;if(!n)return;e.x=e.y=1;let a,l;for(let d=0;d<n;d++){a=t[d],l=a.projectionDelta;const{visualElement:h}=a.options;h&&h.props.style&&h.props.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&xo(r,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,ES(r,l)),s&&Yi(a.latestValues)&&xo(r,a.latestValues))}e.x<sb&&e.x>tb&&(e.x=1),e.y<sb&&e.y>tb&&(e.y=1)}function po(r,e){r.min=r.min+e,r.max=r.max+e}function rb(r,e,t,s,n=.5){const a=kt(r.min,r.max,n);pp(r,e,t,a,s)}function xo(r,e){rb(r.x,e.x,e.scaleX,e.scale,e.originX),rb(r.y,e.y,e.scaleY,e.scale,e.originY)}function NS(r,e){return CS(p6(r.getBoundingClientRect(),e))}function j6(r,e,t){const s=NS(r,t),{scroll:n}=e;return n&&(po(s.x,n.offset.x),po(s.y,n.offset.y)),s}const DS=({current:r})=>r?r.ownerDocument.defaultView:null,nb=(r,e)=>Math.abs(r-e);function C6(r,e){const t=nb(r.x,e.x),s=nb(r.y,e.y);return Math.sqrt(t**2+s**2)}class OS{constructor(e,t,{transformPagePoint:s,contextWindow:n=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=gg(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,w=C6(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!w)return;const{point:_}=v,{timestamp:T}=ds;this.history.push({..._,timestamp:T});const{onStart:S,onMove:E}=this.handlers;b||(S&&S(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,v)},this.handlePointerMove=(v,b)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=mg(b,this.transformPagePoint),_t.update(this.updatePoint,!0)},this.handlePointerUp=(v,b)=>{this.end();const{onEnd:w,onSessionEnd:_,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=gg(v.type==="pointercancel"?this.lastMoveEventInfo:mg(b,this.transformPagePoint),this.history);this.startEvent&&w&&w(v,S),_&&_(v,S)},!b0(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=s,this.distanceThreshold=l,this.contextWindow=n||window;const d=Bc(e),h=mg(d,this.transformPagePoint),{point:f}=h,{timestamp:g}=ds;this.history=[{...f,timestamp:g}];const{onSessionStart:x}=t;x&&x(e,gg(h,this.history)),this.removeListeners=Rc(oc(this.contextWindow,"pointermove",this.handlePointerMove),oc(this.contextWindow,"pointerup",this.handlePointerUp),oc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),vi(this.updatePoint)}}function mg(r,e){return e?{point:e(r.point)}:r}function ib(r,e){return{x:r.x-e.x,y:r.y-e.y}}function gg({point:r},e){return{point:r,delta:ib(r,MS(e)),offset:ib(r,T6(e)),velocity:k6(e,.1)}}function T6(r){return r[0]}function MS(r){return r[r.length-1]}function k6(r,e){if(r.length<2)return{x:0,y:0};let t=r.length-1,s=null;const n=MS(r);for(;t>=0&&(s=r[t],!(n.timestamp-s.timestamp>Kr(e)));)t--;if(!s)return{x:0,y:0};const a=Zr(n.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const l={x:(n.x-s.x)/a,y:(n.y-s.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function A6(r,{min:e,max:t},s){return e!==void 0&&r<e?r=s?kt(e,r,s.min):Math.max(r,e):t!==void 0&&r>t&&(r=s?kt(t,r,s.max):Math.min(r,t)),r}function ab(r,e,t){return{min:e!==void 0?r.min+e:void 0,max:t!==void 0?r.max+t-(r.max-r.min):void 0}}function E6(r,{top:e,left:t,bottom:s,right:n}){return{x:ab(r.x,t,n),y:ab(r.y,e,s)}}function ob(r,e){let t=e.min-r.min,s=e.max-r.max;return e.max-e.min<r.max-r.min&&([t,s]=[s,t]),{min:t,max:s}}function N6(r,e){return{x:ob(r.x,e.x),y:ob(r.y,e.y)}}function D6(r,e){let t=.5;const s=ks(r),n=ks(e);return n>s?t=xc(e.min,e.max-s,r.min):s>n&&(t=xc(r.min,r.max-n,e.min)),On(0,1,t)}function O6(r,e){const t={};return e.min!==void 0&&(t.min=e.min-r.min),e.max!==void 0&&(t.max=e.max-r.min),t}const xp=.35;function M6(r=xp){return r===!1?r=0:r===!0&&(r=xp),{x:lb(r,"left","right"),y:lb(r,"top","bottom")}}function lb(r,e,t){return{min:cb(r,e),max:cb(r,t)}}function cb(r,e){return typeof r=="number"?r:r[e]||0}const L6=new WeakMap;class R6{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Rt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:s}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=x=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Bc(x).point)},l=(x,v)=>{const{drag:b,dragPropagation:w,onDragStart:_}=this.getProps();if(b&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=qN(b),!this.openDragLock))return;this.latestPointerEvent=x,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),mr(S=>{let E=this.getAxisMotionValue(S).get()||0;if(Qr.test(E)){const{projection:A}=this.visualElement;if(A&&A.layout){const O=A.layout.layoutBox[S];O&&(E=ks(O)*(parseFloat(E)/100))}}this.originPoint[S]=E}),_&&_t.postRender(()=>_(x,v)),fp(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},d=(x,v)=>{this.latestPointerEvent=x,this.latestPanInfo=v;const{dragPropagation:b,dragDirectionLock:w,onDirectionLock:_,onDrag:T}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:S}=v;if(w&&this.currentDirection===null){this.currentDirection=P6(S),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",v.point,S),this.updateAxis("y",v.point,S),this.visualElement.render(),T&&T(x,v)},h=(x,v)=>{this.latestPointerEvent=x,this.latestPanInfo=v,this.stop(x,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>mr(x=>this.getAnimationState(x)==="paused"&&this.getAxisMotionValue(x).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new OS(e,{onSessionStart:a,onStart:l,onMove:d,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:s,contextWindow:DS(this.visualElement)})}stop(e,t){const s=e||this.latestPointerEvent,n=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!n||!s)return;const{velocity:l}=n;this.startAnimation(l);const{onDragEnd:d}=this.getProps();d&&_t.postRender(()=>d(s,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:n}=this.getProps();if(!s||!dd(e,n,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(l=A6(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,n=this.constraints;e&&mo(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=E6(s.layoutBox,e):this.constraints=!1,this.elastic=M6(t),n!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&mr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=O6(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!mo(e))return!1;const s=e.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const a=j6(s,n.root,this.visualElement.getTransformPagePoint());let l=N6(n.layout.layoutBox,a);if(t){const d=t(g6(l));this.hasMutatedConstraints=!!d,d&&(l=CS(d))}return l}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:n,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:d}=this.getProps(),h=this.constraints||{},f=mr(g=>{if(!dd(g,t,this.currentDirection))return;let x=h&&h[g]||{};l&&(x={min:0,max:0});const v=n?200:1e6,b=n?40:1e7,w={type:"inertia",velocity:s?e[g]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...x};return this.startAxisValueAnimation(g,w)});return Promise.all(f).then(d)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return fp(this.visualElement,e),s.start(N0(e,s,0,t,this.visualElement,!1))}stopAnimation(){mr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){mr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),n=s[t];return n||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){mr(t=>{const{drag:s}=this.getProps();if(!dd(t,s,this.currentDirection))return;const{projection:n}=this.visualElement,a=this.getAxisMotionValue(t);if(n&&n.layout){const{min:l,max:d}=n.layout.layoutBox[t];a.set(e[t]-kt(l,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!mo(t)||!s||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};mr(l=>{const d=this.getAxisMotionValue(l);if(d&&this.constraints!==!1){const h=d.get();n[l]=D6({min:h,max:h},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),mr(l=>{if(!dd(l,e,null))return;const d=this.getAxisMotionValue(l),{min:h,max:f}=this.constraints[l];d.set(kt(h,f,n[l]))})}addListeners(){if(!this.visualElement.current)return;L6.set(this.visualElement,this);const e=this.visualElement.current,t=oc(e,"pointerdown",h=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(h)}),s=()=>{const{dragConstraints:h}=this.getProps();mo(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,a=n.addEventListener("measure",s);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),_t.read(s);const l=Sc(window,"resize",()=>this.scalePositionWithinConstraints()),d=n.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(mr(g=>{const x=this.getAxisMotionValue(g);x&&(this.originPoint[g]+=h[g].translate,x.set(x.get()+h[g].translate))}),this.visualElement.render())});return()=>{l(),t(),a(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:n=!1,dragConstraints:a=!1,dragElastic:l=xp,dragMomentum:d=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:n,dragConstraints:a,dragElastic:l,dragMomentum:d}}}function dd(r,e,t){return(e===!0||e===r)&&(t===null||t===r)}function P6(r,e=10){let t=null;return Math.abs(r.y)>e?t="y":Math.abs(r.x)>e&&(t="x"),t}class F6 extends ji{constructor(e){super(e),this.removeGroupControls=pr,this.removeListeners=pr,this.controls=new R6(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pr}unmount(){this.removeGroupControls(),this.removeListeners()}}const ub=r=>(e,t)=>{r&&_t.postRender(()=>r(e,t))};class B6 extends ji{constructor(){super(...arguments),this.removePointerDownListener=pr}onPointerDown(e){this.session=new OS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:DS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:n}=this.node.getProps();return{onSessionStart:ub(e),onStart:ub(t),onMove:s,onEnd:(a,l)=>{delete this.session,n&&_t.postRender(()=>n(a,l))}}}mount(){this.removePointerDownListener=oc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Gd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function db(r,e){return e.max===e.min?0:r/(e.max-e.min)*100}const Wl={correct:(r,e)=>{if(!e.target)return r;if(typeof r=="string")if(Ie.test(r))r=parseFloat(r);else return r;const t=db(r,e.target.x),s=db(r,e.target.y);return`${t}% ${s}%`}},z6={correct:(r,{treeScale:e,projectionDelta:t})=>{const s=r,n=yi.parse(r);if(n.length>5)return s;const a=yi.createTransformer(r),l=typeof n[0]!="number"?1:0,d=t.x.scale*e.x,h=t.y.scale*e.y;n[0+l]/=d,n[1+l]/=h;const f=kt(d,h,.5);return typeof n[2+l]=="number"&&(n[2+l]/=f),typeof n[3+l]=="number"&&(n[3+l]/=f),a(n)}};let hb=!1;class U6 extends C.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:n}=this.props,{projection:a}=e;jD(V6),a&&(t.group&&t.group.add(a),s&&s.register&&n&&s.register(a),hb&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Gd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:n,isPresent:a}=this.props,{projection:l}=s;return l&&(l.isPresent=a,hb=!0,n||e.layoutDependency!==t||t===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||_t.postRender(()=>{const d=l.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),y0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:n}=e;n&&(n.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(n),s&&s.deregister&&s.deregister(n))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function LS(r){const[e,t]=oS(),s=C.useContext(Kp);return c.jsx(U6,{...r,layoutGroup:s,switchLayoutGroup:C.useContext(hS),isPresent:e,safeToRemove:t})}const V6={borderRadius:{...Wl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Wl,borderTopRightRadius:Wl,borderBottomLeftRadius:Wl,borderBottomRightRadius:Wl,boxShadow:z6};function I6(r,e,t){const s=_s(r)?r:To(r);return s.start(N0("",s,e,t)),s.animation}const H6=(r,e)=>r.depth-e.depth;class $6{constructor(){this.children=[],this.isDirty=!1}add(e){Jp(this.children,e),this.isDirty=!0}remove(e){e0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(H6),this.isDirty=!1,this.children.forEach(e)}}function G6(r,e){const t=Ps.now(),s=({timestamp:n})=>{const a=n-t;a>=e&&(vi(s),r(a-e))};return _t.setup(s,!0),()=>vi(s)}const RS=["TopLeft","TopRight","BottomLeft","BottomRight"],W6=RS.length,fb=r=>typeof r=="string"?parseFloat(r):r,mb=r=>typeof r=="number"||Ie.test(r);function Y6(r,e,t,s,n,a){n?(r.opacity=kt(0,t.opacity??1,q6(s)),r.opacityExit=kt(e.opacity??1,0,X6(s))):a&&(r.opacity=kt(e.opacity??1,t.opacity??1,s));for(let l=0;l<W6;l++){const d=`border${RS[l]}Radius`;let h=gb(e,d),f=gb(t,d);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||mb(h)===mb(f)?(r[d]=Math.max(kt(fb(h),fb(f),s),0),(Qr.test(f)||Qr.test(h))&&(r[d]+="%")):r[d]=f}(e.rotate||t.rotate)&&(r.rotate=kt(e.rotate||0,t.rotate||0,s))}function gb(r,e){return r[e]!==void 0?r[e]:r.borderRadius}const q6=PS(0,.5,A_),X6=PS(.5,.95,pr);function PS(r,e,t){return s=>s<r?0:s>e?1:t(xc(r,e,s))}function pb(r,e){r.min=e.min,r.max=e.max}function hr(r,e){pb(r.x,e.x),pb(r.y,e.y)}function xb(r,e){r.translate=e.translate,r.scale=e.scale,r.originPoint=e.originPoint,r.origin=e.origin}function vb(r,e,t,s,n){return r-=e,r=ah(r,1/t,s),n!==void 0&&(r=ah(r,1/n,s)),r}function K6(r,e=0,t=1,s=.5,n,a=r,l=r){if(Qr.test(e)&&(e=parseFloat(e),e=kt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let d=kt(a.min,a.max,s);r===a&&(d-=e),r.min=vb(r.min,e,t,d,n),r.max=vb(r.max,e,t,d,n)}function yb(r,e,[t,s,n],a,l){K6(r,e[t],e[s],e[n],e.scale,a,l)}const Z6=["x","scaleX","originX"],Q6=["y","scaleY","originY"];function bb(r,e,t,s){yb(r.x,e,Z6,t?t.x:void 0,s?s.x:void 0),yb(r.y,e,Q6,t?t.y:void 0,s?s.y:void 0)}function wb(r){return r.translate===0&&r.scale===1}function FS(r){return wb(r.x)&&wb(r.y)}function _b(r,e){return r.min===e.min&&r.max===e.max}function J6(r,e){return _b(r.x,e.x)&&_b(r.y,e.y)}function Sb(r,e){return Math.round(r.min)===Math.round(e.min)&&Math.round(r.max)===Math.round(e.max)}function BS(r,e){return Sb(r.x,e.x)&&Sb(r.y,e.y)}function jb(r){return ks(r.x)/ks(r.y)}function Cb(r,e){return r.translate===e.translate&&r.scale===e.scale&&r.originPoint===e.originPoint}class eO{constructor(){this.members=[]}add(e){Jp(this.members,e),e.scheduleRender()}remove(e){if(e0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(n=>e===n);if(t===0)return!1;let s;for(let n=t;n>=0;n--){const a=this.members[n];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:n}=e.options;n===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function tO(r,e,t){let s="";const n=r.x.translate/e.x,a=r.y.translate/e.y,l=t?.z||0;if((n||a||l)&&(s=`translate3d(${n}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:g,rotateX:x,rotateY:v,skewX:b,skewY:w}=t;f&&(s=`perspective(${f}px) ${s}`),g&&(s+=`rotate(${g}deg) `),x&&(s+=`rotateX(${x}deg) `),v&&(s+=`rotateY(${v}deg) `),b&&(s+=`skewX(${b}deg) `),w&&(s+=`skewY(${w}deg) `)}const d=r.x.scale*e.x,h=r.y.scale*e.y;return(d!==1||h!==1)&&(s+=`scale(${d}, ${h})`),s||"none"}const pg=["","X","Y","Z"],sO=1e3;let rO=0;function xg(r,e,t,s){const{latestValues:n}=e;n[r]&&(t[r]=n[r],e.setStaticValue(r,0),s&&(s[r]=0))}function zS(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:e}=r.options;if(!e)return;const t=wS(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:n,layoutId:a}=r.options;window.MotionCancelOptimisedAnimation(t,"transform",_t,!(n||a))}const{parent:s}=r;s&&!s.hasCheckedOptimisedAppear&&zS(s)}function US({attachResizeListener:r,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:n}){return class{constructor(l={},d=e?.()){this.id=rO++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(aO),this.nodes.forEach(uO),this.nodes.forEach(dO),this.nodes.forEach(oO)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new $6)}addEventListener(l,d){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new r0),this.eventHandlers.get(l).add(d)}notifyListeners(l,...d){const h=this.eventHandlers.get(l);h&&h.notify(...d)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=aS(l)&&!eD(l),this.instance=l;const{layoutId:d,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||d)&&(this.isLayoutDirty=!0),r){let g,x=0;const v=()=>this.root.updateBlockedByResize=!1;_t.read(()=>{x=window.innerWidth}),r(l,()=>{const b=window.innerWidth;b!==x&&(x=b,this.root.updateBlockedByResize=!0,g&&g(),g=G6(v,250),Gd.hasAnimatedSinceResize&&(Gd.hasAnimatedSinceResize=!1,this.nodes.forEach(Ab)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&f&&(d||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:x,hasRelativeLayoutChanged:v,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||f.getDefaultTransition()||pO,{onLayoutAnimationStart:_,onLayoutAnimationComplete:T}=f.getProps(),S=!this.targetLayout||!BS(this.targetLayout,b),E=!x&&v;if(this.options.layoutRoot||this.resumeFrom||E||x&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const A={...x0(w,"layout"),onPlay:_,onComplete:T};(f.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A),this.setAnimationOrigin(g,E)}else x||Ab(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),vi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(hO),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&zS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const x=this.path[g];x.shouldResetTransform=!0,x.updateScroll("snapshot"),x.options.layoutRoot&&x.willUpdate(!1)}const{layoutId:d,layout:h}=this.options;if(d===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Tb);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(kb);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(cO),this.nodes.forEach(nO),this.nodes.forEach(iO)):this.nodes.forEach(kb),this.clearAllSnapshots();const d=Ps.now();ds.delta=On(0,1e3/60,d-ds.timestamp),ds.timestamp=d,ds.isProcessing=!0,og.update.process(ds),og.preRender.process(ds),og.render.process(ds),ds.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,y0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(lO),this.sharedNodes.forEach(fO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_t.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_t.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ks(this.snapshot.measuredBox.x)&&!ks(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Rt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(d=!1),d&&this.instance){const h=s(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!n)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!FS(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;l&&this.instance&&(d||Yi(this.latestValues)||g)&&(n(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const d=this.measurePageBox();let h=this.removeElementScroll(d);return l&&(h=this.removeTransform(h)),xO(h),{animationId:this.root.animationId,measuredBox:d,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Rt();const d=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(vO))){const{scroll:f}=this.root;f&&(po(d.x,f.offset.x),po(d.y,f.offset.y))}return d}removeElementScroll(l){const d=Rt();if(hr(d,l),this.scroll?.wasRoot)return d;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:g,options:x}=f;f!==this.root&&g&&x.layoutScroll&&(g.wasRoot&&hr(d,l),po(d.x,g.offset.x),po(d.y,g.offset.y))}return d}applyTransform(l,d=!1){const h=Rt();hr(h,l);for(let f=0;f<this.path.length;f++){const g=this.path[f];!d&&g.options.layoutScroll&&g.scroll&&g!==g.root&&xo(h,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Yi(g.latestValues)&&xo(h,g.latestValues)}return Yi(this.latestValues)&&xo(h,this.latestValues),h}removeTransform(l){const d=Rt();hr(d,l);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Yi(f.latestValues))continue;gp(f.latestValues)&&f.updateSnapshot();const g=Rt(),x=f.measurePageBox();hr(g,x),bb(d,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return Yi(this.latestValues)&&bb(d,this.latestValues),d}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ds.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:x}=this.options;if(!(!this.layout||!(g||x))){if(this.resolvedRelativeTargetAt=ds.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rt(),this.relativeTargetOrigin=Rt(),cc(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),hr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Rt(),this.targetWithTransforms=Rt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):hr(this.target,this.layout.layoutBox),ES(this.target,this.targetDelta)):hr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rt(),this.relativeTargetOrigin=Rt(),cc(this.relativeTargetOrigin,this.target,v.target),hr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||gp(this.parent.latestValues)||AS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),d=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===ds.timestamp&&(h=!1),h)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;hr(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,v=this.treeScale.y;S6(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Rt());const{target:b}=l;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(xb(this.prevProjectionDelta.x,this.projectionDelta.x),xb(this.prevProjectionDelta.y,this.projectionDelta.y)),lc(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==v||!Cb(this.projectionDelta.x,this.prevProjectionDelta.x)||!Cb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=go(),this.projectionDelta=go(),this.projectionDeltaWithTransform=go()}setAnimationOrigin(l,d=!1){const h=this.snapshot,f=h?h.latestValues:{},g={...this.latestValues},x=go();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const v=Rt(),b=h?h.source:void 0,w=this.layout?this.layout.source:void 0,_=b!==w,T=this.getStack(),S=!T||T.members.length<=1,E=!!(_&&!S&&this.options.crossfade===!0&&!this.path.some(gO));this.animationProgress=0;let A;this.mixTargetDelta=O=>{const D=O/1e3;Eb(x.x,l.x,D),Eb(x.y,l.y,D),this.setTargetDelta(x),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(cc(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mO(this.relativeTarget,this.relativeTargetOrigin,v,D),A&&J6(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=Rt()),hr(A,this.relativeTarget)),_&&(this.animationValues=g,Y6(g,f,this.latestValues,D,E,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(vi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_t.update(()=>{Gd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=To(0)),this.currentAnimation=I6(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),l.onUpdate&&l.onUpdate(d)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(sO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:d,target:h,layout:f,latestValues:g}=l;if(!(!d||!h||!f)){if(this!==l&&this.layout&&f&&VS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||Rt();const x=ks(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+x;const v=ks(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+v}hr(d,h),xo(d,g),lc(this.projectionDeltaWithTransform,this.layoutCorrected,d,g)}}registerSharedNode(l,d){this.sharedNodes.has(l)||this.sharedNodes.set(l,new eO),this.sharedNodes.get(l).add(d);const f=d.options.initialPromotionConfig;d.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(d):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:d,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let d=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(d=!0),!d)return;const f={};h.z&&xg("z",l,f,this.animationValues);for(let g=0;g<pg.length;g++)xg(`rotate${pg[g]}`,l,f,this.animationValues),xg(`skew${pg[g]}`,l,f,this.animationValues);l.render();for(const g in f)l.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);l.scheduleRender()}applyProjectionStyles(l,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=$d(d?.pointerEvents)||"",l.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=$d(d?.pointerEvents)||""),this.hasProjected&&!Yi(this.latestValues)&&(l.transform=h?h({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let x=tO(this.projectionDeltaWithTransform,this.treeScale,g);h&&(x=h(g,x)),l.transform=x;const{x:v,y:b}=this.projectionDelta;l.transformOrigin=`${v.origin*100}% ${b.origin*100}% 0`,f.animationValues?l.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const w in wc){if(g[w]===void 0)continue;const{correct:_,applyTo:T,isCSSVariable:S}=wc[w],E=x==="none"?g[w]:_(g[w],f);if(T){const A=T.length;for(let O=0;O<A;O++)l[T[O]]=E}else S?this.options.visualElement.renderState.vars[w]=E:l[w]=E}this.options.layoutId&&(l.pointerEvents=f===this?$d(d?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(Tb),this.root.sharedNodes.clear()}}}function nO(r){r.updateLayout()}function iO(r){const e=r.resumeFrom?.snapshot||r.snapshot;if(r.isLead()&&r.layout&&e&&r.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:s}=r.layout,{animationType:n}=r.options,a=e.source!==r.layout.source;n==="size"?mr(g=>{const x=a?e.measuredBox[g]:e.layoutBox[g],v=ks(x);x.min=t[g].min,x.max=x.min+v}):VS(n,e.layoutBox,t)&&mr(g=>{const x=a?e.measuredBox[g]:e.layoutBox[g],v=ks(t[g]);x.max=x.min+v,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[g].max=r.relativeTarget[g].min+v)});const l=go();lc(l,t,e.layoutBox);const d=go();a?lc(d,r.applyTransform(s,!0),e.measuredBox):lc(d,t,e.layoutBox);const h=!FS(l);let f=!1;if(!r.resumeFrom){const g=r.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:x,layout:v}=g;if(x&&v){const b=Rt();cc(b,e.layoutBox,x.layoutBox);const w=Rt();cc(w,t,v.layoutBox),BS(b,w)||(f=!0),g.options.layoutRoot&&(r.relativeTarget=w,r.relativeTargetOrigin=b,r.relativeParent=g)}}}r.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:d,layoutDelta:l,hasLayoutChanged:h,hasRelativeLayoutChanged:f})}else if(r.isLead()){const{onExitComplete:t}=r.options;t&&t()}r.options.transition=void 0}function aO(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function oO(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function lO(r){r.clearSnapshot()}function Tb(r){r.clearMeasurements()}function kb(r){r.isLayoutDirty=!1}function cO(r){const{visualElement:e}=r.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),r.resetTransform()}function Ab(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function uO(r){r.resolveTargetDelta()}function dO(r){r.calcProjection()}function hO(r){r.resetSkewAndRotation()}function fO(r){r.removeLeadSnapshot()}function Eb(r,e,t){r.translate=kt(e.translate,0,t),r.scale=kt(e.scale,1,t),r.origin=e.origin,r.originPoint=e.originPoint}function Nb(r,e,t,s){r.min=kt(e.min,t.min,s),r.max=kt(e.max,t.max,s)}function mO(r,e,t,s){Nb(r.x,e.x,t.x,s),Nb(r.y,e.y,t.y,s)}function gO(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const pO={duration:.45,ease:[.4,0,.1,1]},Db=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),Ob=Db("applewebkit/")&&!Db("chrome/")?Math.round:pr;function Mb(r){r.min=Ob(r.min),r.max=Ob(r.max)}function xO(r){Mb(r.x),Mb(r.y)}function VS(r,e,t){return r==="position"||r==="preserve-aspect"&&!w6(jb(e),jb(t),.2)}function vO(r){return r!==r.root&&r.scroll?.wasRoot}const yO=US({attachResizeListener:(r,e)=>Sc(r,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vg={current:void 0},IS=US({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!vg.current){const r=new yO({});r.mount(window),r.setOptions({layoutScroll:!0}),vg.current=r}return vg.current},resetTransform:(r,e)=>{r.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),bO={pan:{Feature:B6},drag:{Feature:F6,ProjectionNode:IS,MeasureLayout:LS}};function Lb(r,e,t){const{props:s}=r;r.animationState&&s.whileHover&&r.animationState.setActive("whileHover",t==="Start");const n="onHover"+t,a=s[n];a&&_t.postRender(()=>a(e,Bc(e)))}class wO extends ji{mount(){const{current:e}=this.node;e&&(this.unmount=XN(e,(t,s)=>(Lb(this.node,s,"Start"),n=>Lb(this.node,n,"End"))))}unmount(){}}class _O extends ji{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Rc(Sc(this.node.current,"focus",()=>this.onFocus()),Sc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Rb(r,e,t){const{props:s}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&s.whileTap&&r.animationState.setActive("whileTap",t==="Start");const n="onTap"+(t==="End"?"":t),a=s[n];a&&_t.postRender(()=>a(e,Bc(e)))}class SO extends ji{mount(){const{current:e}=this.node;e&&(this.unmount=JN(e,(t,s)=>(Rb(this.node,s,"Start"),(n,{success:a})=>Rb(this.node,n,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const vp=new WeakMap,yg=new WeakMap,jO=r=>{const e=vp.get(r.target);e&&e(r)},CO=r=>{r.forEach(jO)};function TO({root:r,...e}){const t=r||document;yg.has(t)||yg.set(t,{});const s=yg.get(t),n=JSON.stringify(e);return s[n]||(s[n]=new IntersectionObserver(CO,{root:r,...e})),s[n]}function kO(r,e,t){const s=TO(e);return vp.set(r,t),s.observe(r),()=>{vp.delete(r),s.unobserve(r)}}const AO={some:0,all:1};class EO extends ji{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:n="some",once:a}=e,l={root:t?t.current:void 0,rootMargin:s,threshold:typeof n=="number"?n:AO[n]},d=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:x}=this.node.getProps(),v=f?g:x;v&&v(h)};return kO(this.node.current,l,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(NO(e,t))&&this.startObserver()}unmount(){}}function NO({viewport:r={}},{viewport:e={}}={}){return t=>r[t]!==e[t]}const DO={inView:{Feature:EO},tap:{Feature:SO},focus:{Feature:_O},hover:{Feature:wO}},OO={layout:{ProjectionNode:IS,MeasureLayout:LS}},yp={current:null},HS={current:!1};function MO(){if(HS.current=!0,!!Qp)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),e=()=>yp.current=r.matches;r.addEventListener("change",e),e()}else yp.current=!1}const LO=new WeakMap;function RO(r,e,t){for(const s in e){const n=e[s],a=t[s];if(_s(n))r.addValue(s,n);else if(_s(a))r.addValue(s,To(n,{owner:r}));else if(a!==n)if(r.hasValue(s)){const l=r.getValue(s);l.liveStyle===!0?l.jump(n):l.hasAnimated||l.set(n)}else{const l=r.getStaticValue(s);r.addValue(s,To(l!==void 0?l:n,{owner:r}))}}for(const s in t)e[s]===void 0&&r.removeValue(s);return e}const Pb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class PO{scrapeMotionValuesFromProps(e,t,s){return{}}constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:n,blockInitialAnimation:a,visualState:l},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=g0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Ps.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,_t.render(this.render,!1,!0))};const{latestValues:h,renderState:f}=l;this.latestValues=h,this.baseTarget={...h},this.initialValues=t.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=d,this.blockInitialAnimation=!!a,this.isControllingVariants=Eh(t),this.isVariantNode=uS(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...x}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in x){const b=x[v];h[v]!==void 0&&_s(b)&&b.set(h[v],!1)}}mount(e){this.current=e,LO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,s)=>this.bindToMotionValue(s,t)),HS.current||MO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:yp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),vi(this.notifyUpdate),vi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Ro.has(e);s&&this.onBindTransform&&this.onBindTransform();const n=t.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&_t.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{n(),a(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ko){const t=ko[e];if(!t)continue;const{isEnabled:s,Feature:n}=t;if(!this.features[e]&&n&&s(this.props)&&(this.features[e]=new n(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Rt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<Pb.length;s++){const n=Pb[s];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const a="on"+n,l=e[a];l&&(this.propEventSubscriptions[n]=this.on(n,l))}this.prevMotionValues=RO(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=To(t===null?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(v_(s)||b_(s))?s=parseFloat(s):!sD(s)&&yi.test(t)&&(s=tS(e,t)),this.setBaseTarget(e,_s(s)?s.get():s)),_s(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let s;if(typeof t=="string"||typeof t=="object"){const a=A0(this.props,t,this.presenceContext?.custom);a&&(s=a[e])}if(t&&s!==void 0)return s;const n=this.getBaseTargetFromProps(this.props,e);return n!==void 0&&!_s(n)?n:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new r0),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class $S extends PO{constructor(){super(...arguments),this.KeyframeResolver=$N}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;_s(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function GS(r,{style:e,vars:t},s,n){const a=r.style;let l;for(l in e)a[l]=e[l];n?.applyProjectionStyles(a,s);for(l in t)a.setProperty(l,t[l])}function FO(r){return window.getComputedStyle(r)}class BO extends $S{constructor(){super(...arguments),this.type="html",this.renderInstance=GS}readValueFromInstance(e,t){if(Ro.has(t))return this.projection?.isProjecting?ap(t):cN(e,t);{const s=FO(e),n=(a0(t)?s.getPropertyValue(t):s[t])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(e,{transformPagePoint:t}){return NS(e,t)}build(e,t,s){C0(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return E0(e,t,s)}}const WS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function zO(r,e,t,s){GS(r,e,void 0,s);for(const n in e.attrs)r.setAttribute(WS.has(n)?n:j0(n),e.attrs[n])}class UO extends $S{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Rt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ro.has(t)){const s=eS(t);return s&&s.default||0}return t=WS.has(t)?t:j0(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return bS(e,t,s)}build(e,t,s){pS(e,t,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,t,s,n){zO(e,t,s,n)}mount(e){this.isSVGTag=vS(e.tagName),super.mount(e)}}const VO=(r,e)=>k0(r)?new UO(e):new BO(e,{allowProjection:r!==C.Fragment}),IO=VD({...f6,...DO,...bO,...OO},VO),hs=hD(IO),HO=()=>{const r=Qs(),{session:e,userRole:t}=zn(),[s,n]=C.useState(!1),[a,l]=C.useState(0),d=async()=>{if(!e?.user){l(0);return}try{const{data:h,error:f}=await xe.from("CUSTOMER").select("cus_id").eq("auth_user_id",e.user.id).single();if(f||!h){console.error("Error fetching customer:",f),l(0);return}const{count:g,error:x}=await xe.from("ORDER").select("*",{count:"exact",head:!0}).eq("cus_id",h.cus_id).eq("order_status","Pending");if(x){console.error("Error fetching pending orders count:",x),l(0);return}l(g||0)}catch(h){console.error("Error in fetchPendingOrdersCount:",h),l(0)}};return C.useEffect(()=>{d();const h=()=>{d()};return window.addEventListener("orderUpdated",h),()=>{window.removeEventListener("orderUpdated",h)}},[e?.user]),c.jsxs("header",{className:"relative w-full h-[14vh] overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[c.jsx("div",{className:"absolute top-2 right-10 w-16 h-16 bg-[#AF524D]/10 rounded-full blur-lg animate-pulse"}),c.jsx("div",{className:"absolute top-4 left-20 w-12 h-12 bg-[#DFAD56]/15 rounded-full blur-md animate-pulse delay-1000"}),c.jsx("div",{className:"absolute bottom-2 right-1/4 w-20 h-20 bg-[#8B3A3A]/8 rounded-full blur-xl animate-pulse delay-2000"})]}),c.jsxs("div",{className:`relative z-10 flex items-center justify-between px-4 md:px-8 w-full h-full ${t==="admin"?"bg-gradient-to-r from-[#DFAD56] to-[#B8941F]":"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A]"} backdrop-blur-sm`,children:[c.jsx(It,{to:"/#home",className:"group",children:c.jsxs("div",{className:"flex items-center space-x-3 group-hover:scale-105 transition-transform duration-300",children:[c.jsxs("div",{className:"w-10 h-10 bg-white/90 backdrop-blur-sm rounded-2xl relative shadow-lg group-hover:shadow-xl transition-all duration-300",children:[c.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/3 bg-gradient-to-t from-[#DFAD56] to-[#E2D2A2] rounded-b-2xl"}),c.jsx("div",{className:"absolute bottom-1/3 left-0 right-0 h-1/3 bg-gradient-to-t from-[#E2D2A2] to-[#F8E6B4]"}),c.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-0.5 h-4 bg-gradient-to-t from-yellow-400 to-orange-400 rounded-full",children:c.jsx("div",{className:"absolute -top-0.5 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 bg-orange-400 rounded-full shadow-sm"})})]}),c.jsxs("div",{className:"text-white font-abhaya font-bold text-2xl group-hover:text-[#F8E6B4] transition-colors duration-300",children:[c.jsx("span",{className:"text-[#F8E6B4] group-hover:text-white transition-colors duration-300",children:"Connie"}),c.jsx("span",{className:"text-white group-hover:text-[#F8E6B4] transition-colors duration-300",children:" de Café"})]})]})}),c.jsx("nav",{className:"hidden md:block",children:c.jsx("ul",{className:"flex space-x-6 font-medium text-base",children:[...t==="admin"?[{to:"/adminpage",label:"Dashboard"},{to:"/temp",label:"Temp"}]:[{to:"/",label:"Home"},{to:"/cakecustomization",label:"Cake Customization"},{to:"/cakecatalog",label:"Cake Catalog"},{to:"/aboutus",label:"About Us"},{to:"/contactus",label:"Contact Us"}]].map(h=>c.jsx("li",{className:"relative group",children:c.jsxs(It,{to:h.to,className:`relative px-4 py-2 rounded-xl transition-all duration-300 hover:scale-105 transform ${r.pathname===h.to?t==="admin"?"bg-white/20 text-[#613C2A] shadow-lg":"bg-white/20 text-[#F8E6B4] shadow-lg":"text-white hover:bg-white/10 hover:text-[#F8E6B4]"}`,children:[h.label,r.pathname===h.to&&c.jsx("div",{className:"absolute inset-0 bg-white/10 rounded-xl -z-10"})]})},h.to))})}),c.jsx("button",{className:"md:hidden p-3 bg-white/10 hover:bg-white/20 rounded-xl transition-all duration-300 hover:scale-105 transform",onClick:()=>n(!s),"aria-label":"Toggle mobile menu",children:c.jsxs("div",{className:"w-6 h-6 flex flex-col justify-center items-center",children:[c.jsx("span",{className:`block w-5 h-0.5 bg-white transition-all duration-300 ${s?"rotate-45 translate-y-1":"-translate-y-1"}`}),c.jsx("span",{className:`block w-5 h-0.5 bg-white transition-all duration-300 ${s?"opacity-0":"opacity-100"}`}),c.jsx("span",{className:`block w-5 h-0.5 bg-white transition-all duration-300 ${s?"-rotate-45 -translate-y-1":"translate-y-1"}`})]})}),c.jsx("div",{className:`absolute top-full left-0 w-full backdrop-blur-lg transition-all duration-300 md:hidden z-50 ${s?"opacity-100 visible translate-y-0":"opacity-0 invisible -translate-y-4"}`,children:c.jsx("div",{className:`${t==="admin"?"bg-gradient-to-br from-[#DFAD56]/95 to-[#B8941F]/95":"bg-gradient-to-br from-[#AF524D]/95 to-[#8B3A3A]/95"} backdrop-blur-lg shadow-2xl border-t border-white/20`,children:c.jsx("nav",{className:"px-6 py-6",children:c.jsx("ul",{className:"space-y-3 font-medium text-base",children:[...t==="admin"?[{to:"/adminpage",label:"Dashboard"},{to:"/temp",label:"Temp"}]:[{to:"/",label:"Home"},{to:"/cakecustomization",label:"Cake Customization"},{to:"/cakecatalog",label:"Cake Catalog"},{to:"/aboutus",label:"About Us"},{to:"/contactus",label:"Contact Us"}]].map(h=>c.jsx("li",{children:c.jsx(It,{to:h.to,className:`block px-4 py-3 rounded-xl transition-all duration-300 hover:scale-105 transform ${r.pathname===h.to?t==="admin"?"bg-white/20 text-[#613C2A] shadow-lg":"bg-white/20 text-[#F8E6B4] shadow-lg":"text-white hover:bg-white/10 hover:text-[#F8E6B4]"}`,onClick:()=>n(!1),children:h.label})},h.to))})})})}),c.jsxs("div",{className:"flex items-center space-x-3",children:[e?c.jsxs(It,{to:t==="admin"?"/admin/profile":"/profile",className:"group p-3 bg-white/10 hover:bg-white/20 rounded-xl transition-all duration-300 hover:scale-105 transform relative",title:"Profile",children:[c.jsx("div",{className:"w-6 h-6 text-white group-hover:text-[#F8E6B4] transition-colors duration-300",children:c.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),c.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white animate-pulse"})]}):c.jsxs(It,{to:"/login",className:"group px-4 py-2 bg-gradient-to-r from-[#F8E6B4] to-[#E2D2A2] hover:from-[#E2D2A2] hover:to-[#DFAD56] text-[#492220] font-semibold rounded-xl transition-all duration-300 hover:scale-105 transform shadow-lg hover:shadow-xl flex items-center space-x-2",title:"Login to your account",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),c.jsx("span",{className:"text-sm",children:"Login"})]}),e&&t!=="admin"&&c.jsxs(It,{to:"/cart",className:"group p-3 bg-white/10 hover:bg-white/20 rounded-xl transition-all duration-300 hover:scale-105 transform relative",title:`Orders to Pay (${a})`,children:[c.jsx("div",{className:"w-6 h-6 text-white group-hover:text-[#F8E6B4] transition-colors duration-300",children:c.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})})}),a>0&&c.jsx("div",{className:"absolute -top-2 -right-2 min-w-[20px] h-5 bg-gradient-to-r from-[#F8E6B4] to-[#E2D2A2] text-[#492220] text-xs font-bold rounded-full flex items-center justify-center px-1.5 shadow-lg border-2 border-white animate-pulse",children:a>99?"99+":a})]})]})]})]})},$O=()=>c.jsxs("footer",{className:"bg-gradient-to-br from-[#381914] via-[#492220] to-[#2D1B1B] relative overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[c.jsx("div",{className:"absolute top-10 left-10 w-16 h-16 bg-[#AF524D]/10 rounded-full animate-pulse"}),c.jsx("div",{className:"absolute top-20 right-20 w-12 h-12 bg-[#DFAD56]/10 rounded-full animate-bounce",style:{animationDelay:"1s"}}),c.jsx("div",{className:"absolute bottom-20 left-1/4 w-8 h-8 bg-[#E2D2A2]/10 rounded-full animate-pulse",style:{animationDelay:"2s"}}),c.jsx("div",{className:"absolute bottom-10 right-1/3 w-10 h-10 bg-[#F8E6B4]/10 rounded-full animate-bounce",style:{animationDelay:"0.5s"}})]}),c.jsx("div",{className:"relative z-10",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-12",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[c.jsx("div",{className:"lg:col-span-1",children:c.jsxs(It,{to:"/#home",className:"group",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[c.jsxs("div",{className:"w-12 h-12 bg-white/90 backdrop-blur-sm rounded-2xl relative shadow-lg group-hover:shadow-xl transition-all duration-300 group-hover:scale-110",children:[c.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/3 bg-gradient-to-t from-[#DFAD56] to-[#E2D2A2] rounded-b-2xl"}),c.jsx("div",{className:"absolute bottom-1/3 left-0 right-0 h-1/3 bg-gradient-to-t from-[#E2D2A2] to-[#F8E6B4]"}),c.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-0.5 h-4 bg-gradient-to-t from-yellow-400 to-orange-400 rounded-full",children:c.jsx("div",{className:"absolute -top-0.5 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 bg-orange-400 rounded-full shadow-sm"})})]}),c.jsxs("div",{className:"text-white",children:[c.jsxs("h2",{className:"text-2xl font-bold font-abhaya",children:[c.jsx("span",{className:"text-[#AF524D]",children:"Connie"}),c.jsx("span",{className:"text-[#F8E6B4]",children:" de Cafe"})]}),c.jsx("p",{className:"text-[#E2D2A2] text-sm",children:"Sweet Dreams Made Real"})]})]}),c.jsx("p",{className:"text-[#E2D2A2] text-sm leading-relaxed",children:"Creating delicious memories with every bite. From custom cakes to daily treats, we bring joy to your special moments."})]})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-[#F8E6B4] font-semibold text-lg mb-4 font-abhaya",children:"Contact Us"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-[#AF524D]/20 rounded-lg flex items-center justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),c.jsx("span",{className:"text-[#E2D2A2] text-sm",children:"+63 917 629 2377"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-[#DFAD56]/20 rounded-lg flex items-center justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-[#DFAD56]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),c.jsx("span",{className:"text-[#E2D2A2] text-sm",children:"conniedecafe@gmail.com"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-[#E2D2A2]/20 rounded-lg flex items-center justify-center",children:c.jsxs("svg",{className:"w-4 h-4 text-[#E2D2A2]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),c.jsx("span",{className:"text-[#E2D2A2] text-sm",children:"Dumaguete City, Philippines"})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-[#F8E6B4] font-semibold text-lg mb-4 font-abhaya",children:"Quick Links"}),c.jsxs("ul",{className:"space-y-3",children:[c.jsx("li",{children:c.jsxs(It,{to:"/cakes",className:"text-[#E2D2A2] hover:text-[#AF524D] transition-colors duration-200 flex items-center group",children:[c.jsx("svg",{className:"w-4 h-4 mr-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"Our Cakes"]})}),c.jsx("li",{children:c.jsxs(It,{to:"/aboutus",className:"text-[#E2D2A2] hover:text-[#AF524D] transition-colors duration-200 flex items-center group",children:[c.jsx("svg",{className:"w-4 h-4 mr-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"About Us"]})}),c.jsx("li",{children:c.jsxs(It,{to:"/contact",className:"text-[#E2D2A2] hover:text-[#AF524D] transition-colors duration-200 flex items-center group",children:[c.jsx("svg",{className:"w-4 h-4 mr-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"Contact Us"]})}),c.jsx("li",{children:c.jsxs(It,{to:"/customize",className:"text-[#E2D2A2] hover:text-[#AF524D] transition-colors duration-200 flex items-center group",children:[c.jsx("svg",{className:"w-4 h-4 mr-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"Customize Cake"]})})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-[#F8E6B4] font-semibold text-lg mb-4 font-abhaya",children:"Follow Us"}),c.jsxs("div",{className:"flex space-x-4 mb-6",children:[c.jsx("a",{href:"https://www.facebook.com/connies.cakemall",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-[#3b5998]/20 hover:bg-[#3b5998]/30 rounded-xl flex items-center justify-center transition-all duration-200 group",children:c.jsx("svg",{className:"w-5 h-5 text-[#3b5998] group-hover:scale-110 transition-transform",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),c.jsx("a",{href:"https://www.instagram.com/conniescakemall?igsh=MXNiNjUwdjVlNW5uaA==",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gradient-to-r from-[#E4405F]/20 to-[#F77737]/20 hover:from-[#E4405F]/30 hover:to-[#F77737]/30 rounded-xl flex items-center justify-center transition-all duration-200 group",children:c.jsxs("svg",{className:"w-6 h-6 text-[#E4405F] group-hover:scale-110 transition-transform",viewBox:"0 0 102 102",id:"instagram",children:[c.jsxs("defs",{children:[c.jsxs("radialGradient",{id:"a",cx:"6.601",cy:"99.766",r:"129.502",gradientUnits:"userSpaceOnUse",children:[c.jsx("stop",{offset:".09","stop-color":"#fa8f21"}),c.jsx("stop",{offset:".78","stop-color":"#d82d7e"})]}),c.jsxs("radialGradient",{id:"b",cx:"70.652",cy:"96.49",r:"113.963",gradientUnits:"userSpaceOnUse",children:[c.jsx("stop",{offset:".64","stop-color":"#8c3aaa","stop-opacity":"0"}),c.jsx("stop",{offset:"1","stop-color":"#8c3aaa"})]})]}),c.jsx("path",{fill:"url(#a)",d:"M25.865,101.639A34.341,34.341,0,0,1,14.312,99.5a19.329,19.329,0,0,1-7.154-4.653A19.181,19.181,0,0,1,2.5,87.694,34.341,34.341,0,0,1,.364,76.142C.061,69.584,0,67.617,0,51s.067-18.577.361-25.14A34.534,34.534,0,0,1,2.5,14.312,19.4,19.4,0,0,1,7.154,7.154,19.206,19.206,0,0,1,14.309,2.5,34.341,34.341,0,0,1,25.862.361C32.422.061,34.392,0,51,0s18.577.067,25.14.361A34.534,34.534,0,0,1,87.691,2.5a19.254,19.254,0,0,1,7.154,4.653A19.267,19.267,0,0,1,99.5,14.309a34.341,34.341,0,0,1,2.14,11.553c.3,6.563.361,8.528.361,25.14s-.061,18.577-.361,25.14A34.5,34.5,0,0,1,99.5,87.694,20.6,20.6,0,0,1,87.691,99.5a34.342,34.342,0,0,1-11.553,2.14c-6.557.3-8.528.361-25.14.361s-18.577-.058-25.134-.361"}),c.jsx("path",{fill:"url(#b)",d:"M25.865,101.639A34.341,34.341,0,0,1,14.312,99.5a19.329,19.329,0,0,1-7.154-4.653A19.181,19.181,0,0,1,2.5,87.694,34.341,34.341,0,0,1,.364,76.142C.061,69.584,0,67.617,0,51s.067-18.577.361-25.14A34.534,34.534,0,0,1,2.5,14.312,19.4,19.4,0,0,1,7.154,7.154,19.206,19.206,0,0,1,14.309,2.5,34.341,34.341,0,0,1,25.862.361C32.422.061,34.392,0,51,0s18.577.067,25.14.361A34.534,34.534,0,0,1,87.691,2.5a19.254,19.254,0,0,1,7.154,4.653A19.267,19.267,0,0,1,99.5,14.309a34.341,34.341,0,0,1,2.14,11.553c.3,6.563.361,8.528.361,25.14s-.061,18.577-.361,25.14A34.5,34.5,0,0,1,99.5,87.694,20.6,20.6,0,0,1,87.691,99.5a34.342,34.342,0,0,1-11.553,2.14c-6.557.3-8.528.361-25.14.361s-18.577-.058-25.134-.361"}),c.jsx("path",{fill:"#fff",d:"M461.114,477.413a12.631,12.631,0,1,1,12.629,12.632,12.631,12.631,0,0,1-12.629-12.632m-6.829,0a19.458,19.458,0,1,0,19.458-19.458,19.457,19.457,0,0,0-19.458,19.458m35.139-20.229a4.547,4.547,0,1,0,4.549-4.545h0a4.549,4.549,0,0,0-4.547,4.545m-30.99,51.074a20.943,20.943,0,0,1-7.037-1.3,12.547,12.547,0,0,1-7.193-7.19,20.923,20.923,0,0,1-1.3-7.037c-.184-3.994-.22-5.194-.22-15.313s.04-11.316.22-15.314a21.082,21.082,0,0,1,1.3-7.037,12.54,12.54,0,0,1,7.193-7.193,20.924,20.924,0,0,1,7.037-1.3c3.994-.184,5.194-.22,15.309-.22s11.316.039,15.314.221a21.082,21.082,0,0,1,7.037,1.3,12.541,12.541,0,0,1,7.193,7.193,20.926,20.926,0,0,1,1.3,7.037c.184,4,.22,5.194.22,15.314s-.037,11.316-.22,15.314a21.023,21.023,0,0,1-1.3,7.037,12.547,12.547,0,0,1-7.193,7.19,20.925,20.925,0,0,1-7.037,1.3c-3.994.184-5.194.22-15.314.22s-11.316-.037-15.309-.22m-.314-68.509a27.786,27.786,0,0,0-9.2,1.76,19.373,19.373,0,0,0-11.083,11.083,27.794,27.794,0,0,0-1.76,9.2c-.187,4.04-.229,5.332-.229,15.623s.043,11.582.229,15.623a27.793,27.793,0,0,0,1.76,9.2,19.374,19.374,0,0,0,11.083,11.083,27.813,27.813,0,0,0,9.2,1.76c4.042.184,5.332.229,15.623.229s11.582-.043,15.623-.229a27.8,27.8,0,0,0,9.2-1.76,19.374,19.374,0,0,0,11.083-11.083,27.716,27.716,0,0,0,1.76-9.2c.184-4.043.226-5.332.226-15.623s-.043-11.582-.226-15.623a27.786,27.786,0,0,0-1.76-9.2,19.379,19.379,0,0,0-11.08-11.083,27.748,27.748,0,0,0-9.2-1.76c-4.041-.185-5.332-.229-15.621-.229s-11.583.043-15.626.229",transform:"translate(-422.637 -426.196)"})]})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"text-[#F8E6B4] font-medium text-sm mb-2",children:"Legal"}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(It,{to:"/terms",className:"text-[#E2D2A2] hover:text-[#AF524D] transition-colors duration-200 text-sm",children:"Terms & Conditions"}),c.jsx("br",{}),c.jsx(It,{to:"/privacy",className:"text-[#E2D2A2] hover:text-[#AF524D] transition-colors duration-200 text-sm",children:"Privacy Policy"})]})]})]})]}),c.jsx("div",{className:"border-t border-[#AF524D]/20 mt-8 pt-6",children:c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[c.jsx("p",{className:"text-[#E2D2A2] text-sm",children:"© 2025 Connie de Café. All rights reserved."}),c.jsxs("p",{className:"text-[#E2D2A2] text-sm",children:["Made by ",c.jsx("span",{className:"text-[#AF524D] font-semibold",children:"CCS students"})," in Silliman University"]})]})})]})})]}),ys=({children:r})=>c.jsx(hs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5,ease:"easeInOut"},children:r}),GO=()=>{const[r,e]=C.useState(""),[t,s]=C.useState(""),[n,a]=C.useState(""),[l,d]=C.useState(""),[h,f]=C.useState(""),[g,x]=C.useState(""),[v,b]=C.useState(!1),[w,_]=C.useState(""),[T,S]=C.useState(!1),[E,A]=C.useState(!1),{signUpNewUser:O,signInOrUpWithGoogle:D}=zn(),F=Bn(),B={length:g.length>=6,uppercase:/[A-Z]/.test(g),lowercase:/[a-z]/.test(g),number:/[0-9]/.test(g),special:/[!@#$%^&*(),.?":{}|<>]/.test(g)},P=V=>{const G=V.target.value;x(G),S(G.length>0)},H=async()=>{if(!v){b(!0),_("");try{const V=await D();if(V.success)_e.success("Redirecting to Google...");else{const G=V?.error?.message||V?.error||"Google sign-in failed. Please try again.";_(G),_e.error(G)}}catch(V){_("An unexpected error occurred"),_e.error("An unexpected error occurred"),console.error(V)}finally{b(!1)}}},N=async V=>{if(console.log("handleSignUp called",l,g),V.preventDefault(),v)return;b(!0),_("");const G=/[A-Z]/.test(g),ne=/[a-z]/.test(g),Q=/[0-9]/.test(g),ie=/[!@#$%^&*(),.?":{}|<>]/.test(g);if(!(g.length>=6)){_("Password must be at least 6 characters long"),_e.error("Password too short. Please use at least 6 characters."),b(!1);return}if(!G){_("Password must contain at least one capital letter"),_e.error("Password must contain at least one capital letter."),b(!1);return}if(!ne){_("Password must contain at least one lowercase letter"),_e.error("Password must contain at least one lowercase letter."),b(!1);return}if(!Q){_("Password must contain at least one number"),_e.error("Password must contain at least one number."),b(!1);return}if(!ie){_('Password must contain at least one special character (!@#$%^&*(),.?":{}|<>)'),_e.error("Password must contain at least one special character."),b(!1);return}try{const $=await O(l,g,r,t,n,h);if($.success)_e.success("Account created successfully! Welcome to Bakery Bliss!"),$.userRole==="admin"?(F("/adminpage"),setTimeout(()=>window.scrollTo(0,0),100)):(F("/"),window.scrollTo(0,0));else{const K=$?.error?.message||"Sign-up failed. Please try again.";_(K),_e.error(K)}}catch($){_("An unexpected error occurred"),_e.error("An unexpected error occurred"),console.error($)}finally{b(!1)}};return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#F8E6B4] via-[#E2D2A2] to-[#DFDAC7] flex items-center justify-center p-4 relative overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 opacity-5",children:[c.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-[#AF524D] rounded-full blur-3xl"}),c.jsx("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-[#DFAD56] rounded-full blur-3xl"}),c.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-60 h-60 bg-[#E2D2A2] rounded-full blur-3xl"})]}),c.jsx("div",{className:"absolute top-10 left-10 animate-bounce",children:c.jsx("div",{className:"w-6 h-6 bg-[#DFAD56] rounded-full opacity-60"})}),c.jsx("div",{className:"absolute top-20 right-20 animate-pulse",children:c.jsx("div",{className:"w-4 h-4 bg-[#AF524D] rounded-full opacity-40"})}),c.jsx("div",{className:"absolute bottom-20 left-20 animate-bounce delay-1000",children:c.jsx("div",{className:"w-8 h-8 bg-[#E2D2A2] rounded-full opacity-50"})}),c.jsx("div",{className:"w-full max-w-2xl relative z-10",children:c.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 overflow-hidden",children:[c.jsxs("div",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] p-8 text-center relative",children:[c.jsx("div",{className:"absolute inset-0 bg-black/10"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:c.jsx("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center relative",children:c.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-[#AF524D] to-[#8B3A3A] rounded-lg relative",children:[c.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-2 border-r-2 border-b-2 border-transparent border-b-[#DFAD56]"}),c.jsx("div",{className:"absolute top-1 left-1 right-1 h-1 bg-[#E2D2A2] rounded-sm"})]})})}),c.jsx("h1",{className:"text-3xl font-abhaya font-bold text-white mb-2",children:"Join Our Family"}),c.jsx("p",{className:"text-white/80 text-sm",children:"Create your account and start your sweet journey"})]})]}),c.jsx("div",{className:"p-8",children:c.jsxs("form",{onSubmit:N,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-[#492220] flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-[#AF524D]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Personal Information"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{htmlFor:"firstName",className:"block text-sm font-semibold text-[#492220]",children:["First Name ",c.jsx("span",{className:"text-[#AF524D]",children:"*"})]}),c.jsx("input",{type:"text",id:"firstName",required:!0,value:r,onChange:V=>e(V.target.value),className:"w-full px-4 py-3 bg-white/70 border border-[#AF524D]/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] transition-all duration-200 text-[#492220] placeholder-[#492220]/50",placeholder:"Enter your first name"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{htmlFor:"lastName",className:"block text-sm font-semibold text-[#492220]",children:["Last Name ",c.jsx("span",{className:"text-[#AF524D]",children:"*"})]}),c.jsx("input",{type:"text",id:"lastName",required:!0,value:t,onChange:V=>s(V.target.value),className:"w-full px-4 py-3 bg-white/70 border border-[#AF524D]/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] transition-all duration-200 text-[#492220] placeholder-[#492220]/50",placeholder:"Enter your last name"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-[#492220] flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-[#AF524D]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})}),"Account Information"]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{htmlFor:"email",className:"block text-sm font-semibold text-[#492220]",children:["Email Address ",c.jsx("span",{className:"text-[#AF524D]",children:"*"})]}),c.jsx("input",{type:"email",id:"email",required:!0,value:l,onChange:V=>d(V.target.value),className:"w-full px-4 py-3 bg-white/70 border border-[#AF524D]/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] transition-all duration-200 text-[#492220] placeholder-[#492220]/50",placeholder:"Enter your email address"}),c.jsx("p",{className:"text-xs text-[#492220]/60",children:"We'll use this for order confirmations or updates"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{htmlFor:"username",className:"block text-sm font-semibold text-[#492220]",children:["Username ",c.jsx("span",{className:"text-[#AF524D]",children:"*"})]}),c.jsx("input",{type:"text",id:"username",required:!0,value:n,onChange:V=>a(V.target.value),className:"w-full px-4 py-3 bg-white/70 border border-[#AF524D]/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] transition-all duration-200 text-[#492220] placeholder-[#492220]/50",placeholder:"Choose a unique username"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-semibold text-[#492220]",children:"Phone Number"}),c.jsx("input",{type:"tel",id:"phoneNumber",placeholder:"e.g., 09987654321",value:h,onChange:V=>f(V.target.value),className:"w-full px-4 py-3 bg-white/70 border border-[#AF524D]/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] transition-all duration-200 text-[#492220] placeholder-[#492220]/50"}),c.jsx("p",{className:"text-xs text-[#492220]/60",children:"Optional - for delivery updates or order notifications"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-[#492220] flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-[#AF524D]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Security"]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{htmlFor:"password",className:"block text-sm font-semibold text-[#492220]",children:["Password ",c.jsx("span",{className:"text-[#AF524D]",children:"*"})]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:E?"text":"password",id:"password",required:!0,minLength:6,value:g,onChange:P,onFocus:()=>S(g.length>0),onBlur:()=>S(!1),className:"w-full px-4 py-3 bg-white/70 border border-[#AF524D]/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] transition-all duration-200 text-[#492220] placeholder-[#492220]/50 pr-12",placeholder:"Create a strong password"}),c.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-[#AF524D]/60 hover:text-[#AF524D] transition-colors",onClick:()=>A(!E),children:E?c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):c.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),T&&c.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white/95 backdrop-blur-sm border border-[#AF524D]/20 rounded-xl shadow-xl p-4 z-20 w-fit",children:[c.jsx("div",{className:"text-sm font-semibold text-[#492220] mb-3",children:"Password Requirements:"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:`flex items-center text-sm ${B.length?"text-green-600":"text-red-500"}`,children:[c.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${B.length?"bg-green-500":"bg-red-500"}`}),"At least 6 characters"]}),c.jsxs("div",{className:`flex items-center text-sm ${B.uppercase?"text-green-600":"text-red-500"}`,children:[c.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${B.uppercase?"bg-green-500":"bg-red-500"}`}),"One capital letter (A-Z)"]}),c.jsxs("div",{className:`flex items-center text-sm ${B.lowercase?"text-green-600":"text-red-500"}`,children:[c.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${B.lowercase?"bg-green-500":"bg-red-500"}`}),"One lowercase letter (a-z)"]}),c.jsxs("div",{className:`flex items-center text-sm ${B.number?"text-green-600":"text-red-500"}`,children:[c.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${B.number?"bg-green-500":"bg-red-500"}`}),"One number (0-9)"]}),c.jsxs("div",{className:`flex items-center text-sm ${B.special?"text-green-600":"text-red-500"}`,children:[c.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${B.special?"bg-green-500":"bg-red-500"}`}),"One special character (!@#$%^&*)"]})]})]})]}),c.jsx("p",{className:"text-xs text-[#492220]/60",children:"Password must be at least 6 characters with uppercase, lowercase, number, and special character"})]})]}),c.jsx("button",{type:"submit",disabled:v,className:"w-full bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white font-semibold py-3 px-4 rounded-xl hover:from-[#8B3A3A] hover:to-[#AF524D] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:v?c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):"Create Account"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-[#AF524D]/20"})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"px-4 bg-white text-[#492220]/60",children:"Or continue with"})})]}),c.jsxs("button",{type:"button",onClick:H,disabled:v,className:"w-full bg-white text-[#492220] font-medium py-3 px-4 rounded-xl border border-[#AF524D]/20 hover:border-[#AF524D]/40 hover:bg-gray-50 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-3",children:[c.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),c.jsx("span",{children:v?"Connecting...":"Signup with Google"})]}),c.jsx("div",{className:"text-center",children:c.jsxs("p",{className:"text-sm text-[#492220]/70",children:["Already have an account?"," ",c.jsx("a",{href:"/login",className:"font-semibold text-[#AF524D] hover:text-[#8B3A3A] transition-colors",children:"Sign in"})]})})]})})]})})]})},WO=()=>c.jsx("section",{className:"bg-[url('/Hero.png')] bg-cover bg-center w-full h-[120vh] flex items-center justify-start",id:"home",children:c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-15 max-w-2xl w-full px-8",children:[c.jsx("h1",{className:"text-[#EBD187] text-8xl font-abhaya ",children:"Connie de Café"}),c.jsx("p",{className:"font-bold text-white/76 text-3xl",children:"Where every slice begins with your imagination"}),c.jsx("div",{className:"flex items-center justify-center mt-20",children:c.jsxs("div",{className:"group relative flex items-center space-x-4",children:[c.jsx(hs.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.3,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"bg-gradient-to-r from-white/60 to-transparent text-white px-6 py-4 rounded-full hover:bg-[#FFECB5] hover:text-gray-800 transition duration-300 tracking-widest text-2xl font-bold shadow-md",children:"Customize Now"}),c.jsx("img",{src:"/g_arrow.png",alt:"arrow",className:`
                absolute 
                left-full 
                top-[120%]
                translate-y-0
                opacity-0 
                group-hover:top-1/2 
                group-hover:-translate-y-1/2
                group-hover:opacity-100 
                transition-all 
                duration-500 
                ease-in-out 
                ml-2
              `})]})})]})}),YO=()=>c.jsx("div",{className:"bg-[linear-gradient(to_bottom,_#F2EFE8_0%,_#DFDAC7_51%,_#A8A599_100%)] h-auto py-20",children:c.jsxs("section",{className:"flex flex-col items-center text-center px-4 py-16",children:[c.jsx("h2",{className:"text-2xl md:text-5xl font-bold tracking-widest py-10 pb-30",children:"How to create your cake?"}),c.jsxs("p",{className:"max-w-2xl text-gray-700 mb-12 text-base md:text-3xl text-left",children:["Connie de Cafe's got you covered! With our drag-and-drop customization tool, you can bring your cake ideas to life — and see the magic happen in ",c.jsx("span",{className:"font-bold",children:"REAL TIME!"})]}),c.jsxs("div",{className:"relative w-full max-w-4xl p-11",children:[c.jsx("img",{src:"/Section 3.png",alt:"Cake",className:"w-full mx-auto"}),c.jsxs(hs.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute top-[18%] left-[0%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-xs w-auto text-left bg-gradient-to-r from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#82171C] backdrop-filter backdrop-blur-[2px] font-semibold",children:["Add Frosting ",c.jsx("br",{}),"& Fillings"]}),c.jsxs(hs.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute top-[10%] right-[5%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-xs w-auto text-left bg-gradient-to-l from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#82171C] backdrop-filter backdrop-blur-[2px] font-semibold",children:["Add Decorations ",c.jsx("br",{}),"& Toppings"]}),c.jsxs(hs.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute top-[42%] left-[-8%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-fit w-auto text-left bg-gradient-to-r from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#DFAD56]/53 backdrop-filter backdrop-blur-[2px] font-semibold",children:["Choose Cake ",c.jsx("br",{}),"Flavor"]}),c.jsxs(hs.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute top-[42%] right-[-8%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-fit w-auto text-left bg-gradient-to-l from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#DFAD56]/53 transition-transform hover:scale-115 duration-600 delay-100 backdrop-filter backdrop-blur-[2px] font-semibold",children:["Choose Cake ",c.jsx("br",{}),"Layers"]}),c.jsxs(hs.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute bottom-[20%] left-[-7%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-fit w-auto text-left bg-gradient-to-r from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#DFAD56]/53 transition-transform hover:scale-115 duration-600 delay-100 backdrop-filter backdrop-blur-[2px] font-semibold",children:["Choose Cake ",c.jsx("br",{}),"Shape"]}),c.jsxs(hs.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute bottom-[20%] right-[-12%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-fit w-auto text-left bg-gradient-to-l from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#DFAD56]/53 transition-transform hover:scale-115 duration-600 delay-100 backdrop-filter backdrop-blur-[2px] font-semibold",children:["Choose Cake ",c.jsx("br",{}),"Size"]})]})]})}),qO=()=>c.jsx("section",{className:"bg-[url('/Section3.png')] bg-cover bg-center w-full h-[120vh] py-20 flex items-center justify-end",children:c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-15 max-w-4xl w-full px-8",children:[c.jsx("h1",{className:"text-[#381914] text-8xl font-abhaya",children:"Our Cake Collection"}),c.jsx("p",{className:"font-bold text-white/76 text-3xl",children:"Not in the Mood to Customize? Choose from our pre-designed cake collection."}),c.jsx("div",{className:"flex items-center justify-center mt-20",children:c.jsxs("div",{className:"group relative flex items-center space-x-4",children:[c.jsx(It,{to:"/cakecatalog",className:"block",children:c.jsx(hs.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.3,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"bg-gradient-to-r from-white/60 to-transparent text-white px-6 py-4 rounded-full hover:bg-[#82171C] hover:text-gray-600 transition duration-300 tracking-widest text-2xl font-bold shadow-md cursor-pointer",children:"Explore"})}),c.jsx("img",{src:"/r_arrow.png",alt:"arrow",className:`
                absolute 
                right-full 
                top-[120%]
                translate-y-0
                opacity-0 
                group-hover:top-1/2 
                group-hover:-translate-y-1/2
                group-hover:opacity-100 
                transition-all 
                duration-500 
                ease-in-out 
                ml-2
              `})]})})]})}),XO=()=>c.jsxs(c.Fragment,{children:[c.jsx(WO,{}),c.jsx(YO,{}),c.jsx(qO,{})]}),KO=()=>{const[r,e]=C.useState(""),[t,s]=C.useState(""),[n,a]=C.useState(!1),[l,d]=C.useState(""),[h,f]=C.useState(!1),[g,x]=C.useState(!1),[v,b]=C.useState(""),[w,_]=C.useState(!1),[T,S]=C.useState(""),{session:E,signInUser:A,signInOrUpWithGoogle:O,resetPassword:D}=zn(),F=Bn(),B=async()=>{if(!n){a(!0),d("");try{const N=await O();N.success?_e.success("Redirecting to Google..."):(d(N.error),_e.error(N.error))}catch(N){d("An unexpected error occurred"),_e.error("An unexpected error occurred"),console.error(N)}finally{a(!1)}}},P=async N=>{if(N.preventDefault(),!n){a(!0),d("");try{const V=await A({email:r,password:t});V.success?(_e.success("Login successful!"),V.role==="admin"?F("/adminpage"):(V.role,F("/")),setTimeout(()=>window.scrollTo(0,0),100)):(d(V.error),_e.error(V.error))}catch(V){d("An unexpected error occurred"),_e.error("An unexpected error occurred"),console.error(V)}finally{a(!1)}}},H=async N=>{N.preventDefault(),_(!0),S(""),d("");try{const V=await D(v);V.success?(S(V.message),_e.success(V.message),b(""),setTimeout(()=>{x(!1),S("")},3e3)):(d(V.error),_e.error(V.error))}catch(V){d("An unexpected error occurred"),_e.error("An unexpected error occurred"),console.error(V)}finally{_(!1)}};return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#F8E6B4] via-[#E2D2A2] to-[#DFDAC7] flex items-center justify-center p-4 relative overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 opacity-5",children:[c.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-[#AF524D] rounded-full blur-3xl"}),c.jsx("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-[#DFAD56] rounded-full blur-3xl"}),c.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-60 h-60 bg-[#E2D2A2] rounded-full blur-3xl"})]}),c.jsx("div",{className:"absolute top-10 left-10 animate-bounce",children:c.jsx("div",{className:"w-6 h-6 bg-[#DFAD56] rounded-full opacity-60"})}),c.jsx("div",{className:"absolute top-20 right-20 animate-pulse",children:c.jsx("div",{className:"w-4 h-4 bg-[#AF524D] rounded-full opacity-40"})}),c.jsx("div",{className:"absolute bottom-20 left-20 animate-bounce delay-1000",children:c.jsx("div",{className:"w-8 h-8 bg-[#E2D2A2] rounded-full opacity-50"})}),c.jsx("div",{className:"w-full max-w-md relative z-10",children:c.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 overflow-hidden",children:[c.jsxs("div",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] p-8 text-center relative",children:[c.jsx("div",{className:"absolute inset-0 bg-black/10"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:c.jsx("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center relative",children:c.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-[#AF524D] to-[#8B3A3A] rounded-lg relative",children:[c.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-2 border-r-2 border-b-2 border-transparent border-b-[#DFAD56]"}),c.jsx("div",{className:"absolute top-1 left-1 right-1 h-1 bg-[#E2D2A2] rounded-sm"})]})})}),c.jsx("h1",{className:"text-3xl font-abhaya font-bold text-white mb-2",children:"Welcome Back"}),c.jsx("p",{className:"text-white/80 text-sm",children:"Sign in to your account"})]})]}),c.jsx("div",{className:"p-8",children:c.jsxs("form",{onSubmit:P,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-[#492220]",children:"Email Address"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"email",id:"email",required:!0,value:r,onChange:N=>e(N.target.value),className:"w-full px-4 py-3 bg-white/70 border border-[#AF524D]/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] transition-all duration-200 text-[#492220] placeholder-[#492220]/50",placeholder:"Enter your email"}),c.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:c.jsx("svg",{className:"w-5 h-5 text-[#AF524D]/40",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-[#492220]",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:h?"text":"password",id:"password",required:!0,value:t,onChange:N=>s(N.target.value),className:"w-full px-4 py-3 bg-white/70 border border-[#AF524D]/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] transition-all duration-200 text-[#492220] placeholder-[#492220]/50 pr-12",placeholder:"Enter your password"}),c.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-[#AF524D]/60 hover:text-[#AF524D] transition-colors",onClick:()=>f(!h),children:h?c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):c.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"w-4 h-4 text-[#AF524D] bg-white border-[#AF524D]/30 rounded focus:ring-[#AF524D]/20"}),c.jsx("span",{className:"text-sm text-[#492220]",children:"Remember me"})]}),c.jsx("button",{type:"button",onClick:()=>x(!0),className:"text-sm text-[#AF524D] hover:text-[#8B3A3A] transition-colors",children:"Forgot password?"})]}),c.jsx("button",{type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white font-semibold py-3 px-4 rounded-xl hover:from-[#8B3A3A] hover:to-[#AF524D] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:n?c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign In"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-[#AF524D]/20"})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"px-4 bg-white text-[#492220]/60",children:"Or continue with"})})]}),c.jsxs("button",{type:"button",onClick:B,disabled:n,className:"w-full bg-white text-[#492220] font-medium py-3 px-4 rounded-xl border border-[#AF524D]/20 hover:border-[#AF524D]/40 hover:bg-gray-50 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-3",children:[c.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),c.jsx("span",{children:n?"Connecting...":"Login with Google"})]}),c.jsx("div",{className:"text-center",children:c.jsxs("p",{className:"text-sm text-[#492220]/70",children:["Don't have an account?"," ",c.jsx(It,{to:"/signup",className:"font-semibold text-[#AF524D] hover:text-[#8B3A3A] transition-colors",children:"Sign up"})]})})]})})]})}),g&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-lg rounded-2xl shadow-2xl border border-white/20 w-full max-w-md overflow-hidden",children:[c.jsxs("div",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] p-6 text-center relative",children:[c.jsx("div",{className:"absolute inset-0 bg-black/10"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("div",{className:"w-12 h-12 mx-auto mb-3 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),c.jsx("h3",{className:"text-xl font-abhaya font-bold text-white",children:"Reset Password"}),c.jsx("p",{className:"text-white/80 text-sm mt-1",children:"Enter your email to receive reset instructions"})]}),c.jsx("button",{onClick:()=>{x(!1),b(""),S(""),d("")},className:"absolute top-4 right-4 text-white/60 hover:text-white text-2xl font-bold cursor-pointer transition-colors duration-200 hover:scale-110 transform",children:"×"})]}),c.jsx("div",{className:"p-6",children:c.jsxs("form",{onSubmit:H,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"resetEmail",className:"block text-sm font-semibold text-[#492220]",children:"Email Address"}),c.jsx("input",{type:"email",id:"resetEmail",required:!0,value:v,onChange:N=>b(N.target.value),className:"w-full px-4 py-3 bg-white/70 border border-[#AF524D]/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] transition-all duration-200 text-[#492220] placeholder-[#492220]/50",placeholder:"Enter your email"})]}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsx("button",{type:"button",onClick:()=>{x(!1),b(""),S(""),d("")},className:"flex-1 px-4 py-3 text-[#492220] border border-[#AF524D]/30 rounded-xl hover:bg-[#AF524D]/10 hover:border-[#AF524D]/50 transition-all duration-200 text-sm font-medium",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:w,className:"flex-1 px-4 py-3 bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white rounded-xl hover:from-[#8B3A3A] hover:to-[#AF524D] transition-all duration-300 disabled:opacity-50 text-sm font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:w?c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):"Send Reset Link"})]})]})})]})})]})},ZO=()=>{const[r,e]=C.useState(""),[t,s]=C.useState(""),[n,a]=C.useState(!1),[l,d]=C.useState(""),[h,f]=C.useState(""),[g,x]=C.useState(!1),[v,b]=C.useState(!0),[w,_]=C.useState(!1),[T,S]=C.useState(!1),[E,A]=C.useState(!1),O=Bn(),D={length:r.length>=6,uppercase:/[A-Z]/.test(r),lowercase:/[a-z]/.test(r),number:/[0-9]/.test(r),special:/[!@#$%^&*(),.?":{}|<>]/.test(r)},F=P=>{const H=P.target.value;e(H),A(H.length>0)};C.useEffect(()=>{(async()=>{try{const N=window.location.hash,V=new URLSearchParams(window.location.search);console.log("ResetPassword: Checking session and URL params"),console.log("Hash:",N),console.log("Search params:",V.toString()),console.log("Full URL:",window.location.href);const{data:{session:G}}=await xe.auth.getSession();console.log("Session found:",!!G);const ne=G?.user?.recovery||N?.includes("type=recovery")||V.get("type")==="recovery"||N?.includes("access_token")||V.has("access_token");if(G&&ne)console.log("Valid password recovery session found, user can reset password"),x(!0),b(!1);else if(G&&!ne){console.log("Regular session found, redirecting away from reset page");const{data:Q}=await xe.from("CUSTOMER").select("cus_id").eq("auth_user_id",G.user.id).single(),{data:ie}=await xe.from("ADMIN").select("admin_id").eq("admin_uid",G.user.id).single();O(ie?"/adminpage":Q?"/":"/login");return}else if(N&&(N.includes("access_token")||N.includes("refresh_token"))){console.log("Tokens found in URL hash, attempting to get session");try{const{data:Q,error:ie}=await xe.auth.getSession();if(Q.session)console.log("Session created from URL tokens"),x(!0);else{console.error("Failed to create session from tokens:",ie),console.log("Attempting manual session recovery...");try{const L=new URLSearchParams(N.substring(1)),$=L.get("access_token"),K=L.get("refresh_token");if($){console.log("Found access token, attempting to set session");const{data:pe,error:M}=await xe.auth.setSession({access_token:$,refresh_token:K});pe.session?(console.log("Manual session recovery successful"),x(!0),b(!1)):(console.error("Manual session recovery failed:",M),f("Failed to validate reset link. Please try again."),_e.error("Invalid reset link. Please try again."))}else f("Failed to validate reset link. Please try again."),_e.error("Invalid reset link. Please try again.")}catch(L){console.error("Manual recovery error:",L),f("Failed to validate reset link. Please try again."),_e.error("Invalid reset link. Please try again.")}}}catch(Q){console.error("Error recovering session:",Q),f("Failed to validate reset link. Please try again."),_e.error("Invalid reset link. Please try again.")}}else if(V.has("access_token")||V.has("refresh_token")){console.log("Tokens found in search params, attempting to get session");const{data:Q,error:ie}=await xe.auth.getSession();if(Q.session)console.log("Session created from search params"),x(!0),b(!1);else{console.error("Failed to create session from search params:",ie),console.log("Attempting manual session recovery from search params...");try{const L=V.get("access_token"),$=V.get("refresh_token");if(L){console.log("Found access token in search params, attempting to set session");const{data:K,error:pe}=await xe.auth.setSession({access_token:L,refresh_token:$});K.session?(console.log("Manual session recovery from search params successful"),x(!0),b(!1)):(console.error("Manual session recovery from search params failed:",pe),f("Failed to validate reset link. Please try again."),_e.error("Invalid reset link. Please try again."))}else f("Failed to validate reset link. Please try again."),_e.error("Invalid reset link. Please try again.")}catch(L){console.error("Manual recovery from search params error:",L),f("Failed to validate reset link. Please try again."),_e.error("Invalid reset link. Please try again.")}}}else console.log("No valid session or tokens found"),f("This reset link is invalid or has expired. Please request a new password reset from the login page."),_e.error("Invalid reset link. Please try again."),b(!1)}catch(N){console.error("Error checking session:",N),f("An error occurred while validating the reset link. Please try again."),_e.error("Error validating reset link. Please try again."),b(!1)}})();const{data:{subscription:H}}=xe.auth.onAuthStateChange((N,V)=>{console.log("Auth state change:",N,!!V),N==="PASSWORD_RECOVERY"||N==="SIGNED_IN"&&V?.user?.recovery?V&&(console.log("Password recovery session established from auth state change"),x(!0),b(!1),f("")):N==="SIGNED_IN"&&V&&!V?.user?.recovery&&(console.log("Regular sign in detected, redirecting away from reset page"),(async()=>{const{data:ne}=await xe.from("CUSTOMER").select("cus_id").eq("auth_user_id",V.user.id).single(),{data:Q}=await xe.from("ADMIN").select("admin_id").eq("admin_uid",V.user.id).single();O(Q?"/adminpage":ne?"/":"/login")})())});return()=>H?.unsubscribe()},[]);const B=async P=>{P.preventDefault(),a(!0),f(""),d("");const H=/[A-Z]/.test(r),N=/[a-z]/.test(r),V=/[!@#$%^&*(),.?":{}|<>]/.test(r);if(!(r.length>=6)){f("Password must be at least 6 characters long"),a(!1);return}if(!H){f("Password must contain at least one capital letter"),a(!1);return}if(!N){f("Password must contain at least one lowercase letter"),a(!1);return}if(!V){f('Password must contain at least one special character (!@#$%^&*(),.?":{}|<>)'),a(!1);return}if(r!==t){_e.error("Passwords do not match. Please try again."),a(!1);return}try{const{data:ne,error:Q}=await xe.auth.updateUser({password:r});if(Q){const ie=Q.message.includes("JWT")?"This reset link has expired. Please request a new password reset.":Q.message;f(ie),await xe.auth.signOut()}else d("Password updated successfully! You will be redirected to the login page in a moment..."),_e.success("Password updated successfully! Redirecting to login..."),e(""),s(""),await xe.auth.signOut(),setTimeout(()=>{O("/login"),setTimeout(()=>window.scrollTo(0,0),100)},2e3)}catch(ne){f("An unexpected error occurred. Please try again."),console.error(ne)}finally{a(!1)}};return C.useEffect(()=>{if(!g&&h){xe.auth.signOut();const P=setTimeout(()=>{O("/login"),setTimeout(()=>window.scrollTo(0,0),100)},3e3);return()=>clearTimeout(P)}},[g,h,O]),C.useEffect(()=>()=>{l.includes("Password updated successfully")||xe.auth.signOut()},[l]),C.useEffect(()=>{if(g&&!l.includes("Password updated successfully")){const P=setTimeout(()=>{xe.auth.signOut(),f("Session expired. Please request a new password reset."),_e.error("Session expired. Please request a new password reset.")},6e5);return()=>clearTimeout(P)}},[g,l]),v?c.jsxs("div",{className:"bg-gradient-to-br from-[#F8E6B4] via-[#E2D2A2] to-[#DFDAC7] min-h-screen w-full flex items-center justify-center p-4 relative overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[c.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-[#AF524D]/10 rounded-full blur-xl animate-pulse"}),c.jsx("div",{className:"absolute top-40 right-20 w-24 h-24 bg-[#DFAD56]/15 rounded-full blur-lg animate-pulse delay-1000"}),c.jsx("div",{className:"absolute bottom-32 left-1/4 w-40 h-40 bg-[#8B3A3A]/8 rounded-full blur-2xl animate-pulse delay-2000"}),c.jsx("div",{className:"absolute bottom-20 right-1/3 w-28 h-28 bg-[#DFAD56]/12 rounded-full blur-lg animate-pulse delay-3000"})]}),c.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 max-w-md w-full relative z-10 overflow-hidden",children:[c.jsxs("div",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] p-8 text-center relative",children:[c.jsx("div",{className:"absolute inset-0 bg-black/10"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("div",{className:"mb-6",children:c.jsx("svg",{className:"w-16 h-16 text-white mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),c.jsx("h1",{className:"text-2xl font-abhaya font-bold text-white mb-2",children:"Validating Reset Link"}),c.jsx("p",{className:"text-white/90 text-sm",children:"Please wait while we verify your reset link..."})]})]}),c.jsx("div",{className:"p-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"flex items-center justify-center mb-6",children:c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-8 w-8 text-[#AF524D]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),c.jsx("p",{className:"text-[#492220]/60 text-sm",children:"This may take a few moments..."})]})})]})]}):g?c.jsxs("div",{className:"bg-gradient-to-br from-[#F8E6B4] via-[#E2D2A2] to-[#DFDAC7] min-h-screen w-full flex items-center justify-center p-4 relative overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[c.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-[#AF524D]/10 rounded-full blur-xl animate-pulse"}),c.jsx("div",{className:"absolute top-40 right-20 w-24 h-24 bg-[#DFAD56]/15 rounded-full blur-lg animate-pulse delay-1000"}),c.jsx("div",{className:"absolute bottom-32 left-1/4 w-40 h-40 bg-[#8B3A3A]/8 rounded-full blur-2xl animate-pulse delay-2000"}),c.jsx("div",{className:"absolute bottom-20 right-1/3 w-28 h-28 bg-[#DFAD56]/12 rounded-full blur-lg animate-pulse delay-3000"})]}),c.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 max-w-md w-full relative z-10 overflow-hidden",children:[c.jsxs("div",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] p-8 text-center relative",children:[c.jsx("div",{className:"absolute inset-0 bg-black/10"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("div",{className:"mb-6",children:c.jsx("svg",{className:"w-16 h-16 text-white mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),c.jsx("h1",{className:"text-2xl font-abhaya font-bold text-white mb-2",children:"Reset Your Password"}),c.jsx("p",{className:"text-white/90 text-sm",children:"Enter your new password below"})]})]}),c.jsxs("div",{className:"p-8",children:[l&&c.jsx("div",{className:"w-full p-4 bg-gradient-to-r from-green-50 to-green-100 border border-green-200 text-green-800 rounded-2xl text-sm mb-6 shadow-sm",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),l]})}),h&&c.jsx("div",{className:"w-full p-4 bg-gradient-to-r from-red-50 to-red-100 border border-red-200 text-red-800 rounded-2xl text-sm mb-6 shadow-sm",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 text-red-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h]})}),c.jsxs("form",{onSubmit:B,className:"flex flex-col space-y-6 w-full",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-[#492220] mb-2",children:["New Password ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:w?"text":"password",id:"newPassword",required:!0,minLength:6,value:r,onChange:F,onFocus:()=>A(r.length>0),onBlur:()=>A(!1),className:"w-full bg-white/90 backdrop-blur-sm text-[#492220] rounded-2xl px-4 py-3 pr-12 border border-[#AF524D]/20 focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] text-sm shadow-sm transition-all duration-300 hover:shadow-md",placeholder:"Enter new password"}),c.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-4 flex items-center text-[#AF524D]/60 hover:text-[#AF524D] transition-colors duration-200",onClick:()=>_(!w),children:w?c.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):c.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),E&&c.jsxs("div",{className:"absolute top-full left-0 mt-3 bg-white/95 backdrop-blur-sm border border-[#AF524D]/20 rounded-2xl shadow-2xl p-5 z-20 w-fit min-w-[280px]",children:[c.jsxs("div",{className:"text-sm font-medium text-[#492220] mb-4 flex items-center",children:[c.jsx("svg",{className:"w-4 h-4 text-[#AF524D] mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Password Requirements"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:`flex items-center text-sm ${D.length?"text-green-600":"text-red-500"}`,children:[c.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${D.length?"bg-green-500":"bg-red-500"}`}),"At least 6 characters"]}),c.jsxs("div",{className:`flex items-center text-sm ${D.uppercase?"text-green-600":"text-red-500"}`,children:[c.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${D.uppercase?"bg-green-500":"bg-red-500"}`}),"One capital letter (A-Z)"]}),c.jsxs("div",{className:`flex items-center text-sm ${D.lowercase?"text-green-600":"text-red-500"}`,children:[c.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${D.lowercase?"bg-green-500":"bg-red-500"}`}),"One lowercase letter (a-z)"]}),c.jsxs("div",{className:`flex items-center text-sm ${D.number?"text-green-600":"text-red-500"}`,children:[c.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${D.number?"bg-green-500":"bg-red-500"}`}),"One number (0-9)"]}),c.jsxs("div",{className:`flex items-center text-sm ${D.special?"text-green-600":"text-red-500"}`,children:[c.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${D.special?"bg-green-500":"bg-red-500"}`}),"One special character (!@#$%^&*)"]})]})]})]})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-[#492220] mb-2",children:["Confirm Password ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:T?"text":"password",id:"confirmPassword",required:!0,value:t,onChange:P=>s(P.target.value),className:"w-full bg-white/90 backdrop-blur-sm text-[#492220] rounded-2xl px-4 py-3 pr-12 border border-[#AF524D]/20 focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] text-sm shadow-sm transition-all duration-300 hover:shadow-md",placeholder:"Confirm new password"}),c.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-4 flex items-center text-[#AF524D]/60 hover:text-[#AF524D] transition-colors duration-200",onClick:()=>S(!T),children:T?c.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):c.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),c.jsx("div",{className:"pt-4",children:c.jsx("button",{type:"submit",disabled:n,className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] hover:from-[#8B3A3A] hover:to-[#6B2D2D] text-white font-bold px-8 py-4 rounded-2xl cursor-pointer transition-all duration-300 tracking-wide w-full disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center text-sm shadow-lg hover:shadow-xl hover:scale-105 transform disabled:hover:scale-100",children:n?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating Password..."]}):c.jsxs(c.Fragment,{children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Update Password"]})})})]})]})]})]}):c.jsxs("div",{className:"bg-gradient-to-br from-[#F8E6B4] via-[#E2D2A2] to-[#DFDAC7] min-h-screen w-full flex items-center justify-center p-4 relative overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[c.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-[#AF524D]/10 rounded-full blur-xl animate-pulse"}),c.jsx("div",{className:"absolute top-40 right-20 w-24 h-24 bg-[#DFAD56]/15 rounded-full blur-lg animate-pulse delay-1000"}),c.jsx("div",{className:"absolute bottom-32 left-1/4 w-40 h-40 bg-[#8B3A3A]/8 rounded-full blur-2xl animate-pulse delay-2000"}),c.jsx("div",{className:"absolute bottom-20 right-1/3 w-28 h-28 bg-[#DFAD56]/12 rounded-full blur-lg animate-pulse delay-3000"})]}),c.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 max-w-md w-full relative z-10 overflow-hidden",children:[c.jsxs("div",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] p-8 text-center relative",children:[c.jsx("div",{className:"absolute inset-0 bg-black/10"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("div",{className:"mb-6",children:c.jsx("svg",{className:"w-16 h-16 text-white mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),c.jsx("h1",{className:"text-2xl font-abhaya font-bold text-white mb-2",children:"Invalid Reset Link"}),c.jsx("p",{className:"text-white/90 text-sm",children:"This link is no longer valid"})]})]}),c.jsx("div",{className:"p-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-[#492220]/80 text-sm leading-relaxed mb-6",children:h}),c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-[#AF524D]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c.jsx("p",{className:"text-[#492220]/60 text-xs",children:"Redirecting to login page..."})]})]})})]})]})},Po=({message:r="Loading...",size:e="large"})=>{const[t,s]=C.useState(0),[n,a]=C.useState(!1);return C.useEffect(()=>{const l=setInterval(()=>{s(d=>d>=100?(a(!0),clearInterval(l),100):d+Math.random()*15)},200);return()=>clearInterval(l)},[]),e==="small"?c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx("div",{className:"w-4 h-4 border-2 border-[#AF524D] border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"text-sm text-gray-600",children:r})]}):c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#F8E6B4] via-[#E2D2A2] to-[#DFDAC7] flex items-center justify-center relative overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[c.jsx("div",{className:"absolute top-20 left-10 w-20 h-20 bg-white/20 rounded-full animate-pulse"}),c.jsx("div",{className:"absolute top-40 right-20 w-16 h-16 bg-[#AF524D]/10 rounded-full animate-bounce",style:{animationDelay:"1s"}}),c.jsx("div",{className:"absolute bottom-32 left-1/4 w-12 h-12 bg-[#DFAD56]/20 rounded-full animate-pulse",style:{animationDelay:"2s"}}),c.jsx("div",{className:"absolute bottom-20 right-1/3 w-14 h-14 bg-white/15 rounded-full animate-bounce",style:{animationDelay:"0.5s"}}),c.jsx("div",{className:"absolute top-1/4 right-1/4 w-8 h-8 bg-[#AF524D]/20 rounded-full animate-pulse",style:{animationDelay:"1.5s"}}),c.jsx("div",{className:"absolute bottom-1/3 left-1/3 w-6 h-6 bg-[#DFAD56]/30 rounded-full animate-bounce",style:{animationDelay:"0.8s"}})]}),c.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 overflow-hidden relative z-10",children:[c.jsxs("div",{className:"bg-gradient-to-r from-[#AF524D] to-[#DFAD56] px-8 py-6 text-center",children:[c.jsx("div",{className:"flex items-center justify-center mb-4",children:c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"w-16 h-16 bg-white/20 rounded-2xl relative overflow-hidden backdrop-blur-sm",children:[c.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/3 bg-white/40 rounded-b-2xl"}),c.jsx("div",{className:"absolute bottom-1/3 left-0 right-0 h-1/3 bg-white/30"}),c.jsx("div",{className:"absolute bottom-2/3 left-0 right-0 h-1/3 bg-white/50 rounded-t-2xl"}),c.jsx("div",{className:"absolute top-1 left-1/2 transform -translate-x-1/2 w-1 h-3 bg-yellow-200 rounded-full",children:c.jsx("div",{className:"absolute -top-0.5 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 bg-orange-300 rounded-full animate-pulse"})})]}),c.jsx("div",{className:"absolute inset-0 border-4 border-transparent border-t-white/60 border-r-white/40 rounded-full animate-spin"})]})}),c.jsx("h2",{className:"text-2xl font-bold text-white font-abhaya",children:"Bakery Bliss"})]}),c.jsxs("div",{className:"px-8 py-6 text-center",children:[c.jsx("p",{className:"text-[#381914] text-lg mb-6 font-medium",children:r}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[c.jsx("div",{className:"w-3 h-3 bg-[#AF524D] rounded-full animate-bounce",style:{animationDelay:"0ms"}}),c.jsx("div",{className:"w-3 h-3 bg-[#DFAD56] rounded-full animate-bounce",style:{animationDelay:"150ms"}}),c.jsx("div",{className:"w-3 h-3 bg-[#E2D2A2] rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:c.jsx("div",{className:"h-full bg-gradient-to-r from-[#AF524D] to-[#DFAD56] rounded-full transition-all duration-300 ease-out origin-left",style:{transform:`scaleX(${t/100})`,transformOrigin:"left"}})}),c.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:[Math.round(t),"%"]})]})]})]})},QO=()=>{const[r,e]=C.useState(!0);return C.useEffect(()=>{const t=setTimeout(()=>{e(!1)},5e3);return()=>clearTimeout(t)},[]),c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#AF524D] via-[#8B3A3A] to-[#492220] relative overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[c.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-[#F8E6B4]/10 rounded-full blur-xl animate-pulse"}),c.jsx("div",{className:"absolute top-40 right-20 w-24 h-24 bg-[#E2D2A2]/15 rounded-full blur-lg animate-bounce"}),c.jsx("div",{className:"absolute bottom-40 left-1/4 w-40 h-40 bg-[#DFAD56]/10 rounded-full blur-2xl animate-pulse"}),c.jsx("div",{className:"absolute bottom-20 right-1/3 w-28 h-28 bg-[#F8E6B4]/20 rounded-full blur-lg animate-bounce"}),c.jsx("div",{className:"absolute top-1/2 left-1/2 w-36 h-36 bg-[#E2D2A2]/5 rounded-full blur-3xl animate-pulse"})]}),c.jsxs("div",{className:"relative z-10 py-20 px-4 md:px-8 lg:px-16 xl:px-32",children:[c.jsxs(hs.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"bg-white/10 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 p-8 md:p-16 mb-16 relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-[#F8E6B4]/20 to-[#E2D2A2]/20 rounded-full blur-2xl"}),c.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-[#DFAD56]/20 to-[#F8E6B4]/20 rounded-full blur-xl"}),c.jsxs("div",{className:"relative z-10 text-center space-y-8",children:[c.jsxs("h1",{className:"text-5xl md:text-7xl font-bold font-abhaya text-white",children:["About ",c.jsx("span",{className:"text-[#F8E6B4]",children:"Connie de Café"})]}),c.jsx("p",{className:"text-xl md:text-2xl text-white/90 max-w-4xl mx-auto leading-relaxed",children:"Where every slice begins with your imagination and every bite tells a story of passion, creativity, and love for the art of baking."})]})]}),c.jsxs(hs.div,{initial:{opacity:0,x:-100},whileInView:{opacity:1,x:0},transition:{duration:.8},viewport:{once:!0},className:"bg-white/10 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 p-8 md:p-12 mb-16 relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-gradient-to-br from-[#F8E6B4]/10 to-[#E2D2A2]/10 rounded-full blur-2xl"}),c.jsx("div",{className:"absolute bottom-0 right-0 w-32 h-32 bg-gradient-to-tl from-[#DFAD56]/10 to-[#F8E6B4]/10 rounded-full blur-xl"}),c.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row items-center gap-8",children:[c.jsx("div",{className:"w-full lg:w-2/5",children:c.jsxs("div",{className:"relative group",children:[c.jsx("img",{src:"/client.png",alt:"Connie de Café Bakery",className:"w-full rounded-2xl shadow-xl transform group-hover:scale-105 transition-transform duration-500"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#AF524D]/20 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})}),c.jsxs("div",{className:"w-full lg:w-3/5 space-y-6",children:[c.jsxs("h2",{className:"text-4xl md:text-5xl font-bold font-abhaya text-white",children:["Our ",c.jsx("span",{className:"text-[#F8E6B4]",children:"Story"})]}),c.jsxs("div",{className:"space-y-4 text-white/90",children:[c.jsx("p",{className:"text-lg md:text-xl leading-relaxed",children:"Founded with a dream and a passion for creating extraordinary cakes, Connie de Café began as a small home-based bakery with big aspirations."}),c.jsx("p",{className:"text-lg md:text-xl leading-relaxed",children:"Our founder, Connie June B. De Jesus, started this journey with a simple belief: every celebration deserves a cake that's as unique as the moment itself."}),c.jsx("p",{className:"text-lg md:text-xl leading-relaxed",children:"From intimate birthday celebrations to grand wedding receptions, we've had the privilege of being part of countless memorable moments."})]})]})]})]}),c.jsxs(hs.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"mb-16",children:[c.jsxs("h2",{className:"text-4xl md:text-5xl font-bold font-abhaya text-center mb-16 text-white",children:["What Makes Us ",c.jsx("span",{className:"text-[#F8E6B4]",children:"Special"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs(hs.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},transition:{duration:.6,delay:.1},viewport:{once:!0},className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl border border-white/20 p-8 text-center space-y-6 hover:bg-white/15 transition-all duration-300 group",children:[c.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-[#F8E6B4] to-[#E2D2A2] rounded-full flex items-center justify-center mx-auto shadow-lg group-hover:scale-110 transition-transform duration-300",children:c.jsx("svg",{className:"w-10 h-10 text-[#492220]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),c.jsx("h3",{className:"text-2xl font-bold font-abhaya text-white",children:"Creative Design"}),c.jsx("p",{className:"text-white/80 text-lg leading-relaxed",children:"Every cake is a canvas for creativity. We bring your wildest cake dreams to life with our innovative designs and artistic flair."})]}),c.jsxs(hs.div,{initial:{opacity:0,y:-50},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},viewport:{once:!0},className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl border border-white/20 p-8 text-center space-y-6 hover:bg-white/15 transition-all duration-300 group",children:[c.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-[#F8E6B4] to-[#E2D2A2] rounded-full flex items-center justify-center mx-auto shadow-lg group-hover:scale-110 transition-transform duration-300",children:c.jsx("svg",{className:"w-10 h-10 text-[#492220]",fill:"none",viewBox:"1 1 22 22",stroke:"currentColor",children:c.jsx("path",{d:"M15.2109 8.78899L3.4653 20.5347M8.90748 15.0925L9.10982 14.9292C9.30611 14.7589 9.48392 14.5681 9.64012 14.3598C10.854 12.7413 10.526 10.4451 8.90748 9.23119L8.70514 9.39448C8.50885 9.56474 8.33104 9.75557 8.17484 9.96383C6.96092 11.5824 7.28893 13.8786 8.90748 15.0925ZM8.90748 15.0925L9.07078 15.2948C9.24104 15.4911 9.43188 15.6689 9.64016 15.8252C11.2587 17.039 13.5548 16.711 14.7687 15.0925L14.6054 14.8901C14.4352 14.6938 14.2443 14.516 14.036 14.3598C12.4175 13.1459 10.1214 13.4739 8.90748 15.0925ZM11.8381 12.1618L12.0404 11.9985C12.2367 11.8283 12.4145 11.6375 12.5707 11.4292C13.7847 9.81064 13.4566 7.51447 11.8381 6.30055L11.6358 6.46384C11.4395 6.6341 11.2617 6.82492 11.1055 7.03319C9.89154 8.65174 10.2195 10.9479 11.8381 12.1618ZM11.8381 12.1618L12.0014 12.3642C12.1717 12.5605 12.3625 12.7383 12.5708 12.8945C14.1893 14.1084 16.4854 13.7804 17.6993 12.1618L17.536 11.9595C17.3658 11.7632 17.1749 11.5854 16.9667 11.4292C15.3481 10.2153 13.052 10.5433 11.8381 12.1618ZM14.7687 9.23119L14.9711 9.0679C15.1673 8.89764 15.3452 8.70682 15.5014 8.49855C16.7153 6.88 16.3873 4.58383 14.7687 3.36991L14.5664 3.5332C14.3701 3.70346 14.1923 3.89428 14.0361 4.10255C12.8222 5.7211 13.1502 8.01727 14.7687 9.23119ZM14.7687 9.23119L14.932 9.43354C15.1023 9.62984 15.2931 9.80766 15.5014 9.96387C17.1199 11.1778 19.4161 10.8497 20.6299 9.23119L20.4667 9.02885C20.2964 8.83254 20.1056 8.65473 19.8973 8.49852C18.2787 7.28463 15.9826 7.61266 14.7687 9.23119ZM5.90748 18.0925L6.10982 17.9292C6.30611 17.7589 6.48392 17.5681 6.64012 17.3598C7.85405 15.7413 7.52603 13.4451 5.90748 12.2312L5.70514 12.3945C5.50885 12.5647 5.33104 12.7556 5.17484 12.9638C3.96092 14.5824 4.28893 16.8786 5.90748 18.0925ZM5.90748 18.0925L6.07078 18.2948C6.24104 18.4911 6.43188 18.6689 6.64016 18.8252C8.25869 20.039 10.5548 19.711 11.7687 18.0925L11.6054 17.8901C11.4352 17.6938 11.2443 17.516 11.036 17.3598C9.41751 16.1459 7.12137 16.4739 5.90748 18.0925ZM17.6292 7.40757C17.3714 7.44439 17.1108 7.45359 16.8516 7.43518L16.593 7.40753C16.3069 5.40469 17.6986 3.54913 19.7014 3.26301C20.045 3.21392 20.3939 3.21392 20.7375 3.26301C21.0237 5.26589 19.632 7.12145 17.6292 7.40757Z",stroke:"#000000"})})}),c.jsx("h3",{className:"text-2xl font-bold font-abhaya text-white",children:"Premium Ingredients"}),c.jsx("p",{className:"text-white/80 text-lg leading-relaxed",children:"We use only the finest, freshest ingredients to ensure every bite is a moment of pure indulgence and quality."})]}),c.jsxs(hs.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},transition:{duration:.6,delay:.3},viewport:{once:!0},className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl border border-white/20 p-8 text-center space-y-6 hover:bg-white/15 transition-all duration-300 group",children:[c.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-[#F8E6B4] to-[#E2D2A2] rounded-full flex items-center justify-center mx-auto shadow-lg group-hover:scale-110 transition-transform duration-300",children:c.jsx("svg",{className:"w-10 h-10 text-[#492220]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),c.jsx("h3",{className:"text-2xl font-bold font-abhaya text-white",children:"Personal Touch"}),c.jsx("p",{className:"text-white/80 text-lg leading-relaxed",children:"Every cake is made with love and attention to detail, ensuring your special moments are celebrated with perfection."})]})]})]}),c.jsxs(hs.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.8},viewport:{once:!0},className:"bg-white/10 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 p-8 md:p-16 text-center relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-gradient-to-br from-[#F8E6B4]/20 to-[#E2D2A2]/20 rounded-full blur-2xl"}),c.jsx("div",{className:"absolute bottom-0 right-0 w-40 h-40 bg-gradient-to-tl from-[#DFAD56]/20 to-[#F8E6B4]/20 rounded-full blur-3xl"}),c.jsxs("div",{className:"relative z-10",children:[c.jsxs("h2",{className:"text-4xl md:text-5xl font-bold font-abhaya mb-8 text-white",children:["Ready to Create Your ",c.jsx("span",{className:"text-[#F8E6B4]",children:"Dream Cake?"})]}),c.jsx("p",{className:"text-xl md:text-2xl mb-10 text-white/90 max-w-3xl mx-auto leading-relaxed",children:"Let's work together to bring your vision to life. Whether it's a birthday, wedding, or any special celebration, we're here to make it unforgettable."}),c.jsx(It,{to:"/cakecustomization",children:c.jsxs(hs.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] hover:from-[#8B3A3A] hover:to-[#AF524D] text-white px-12 py-6 rounded-2xl text-xl font-semibold shadow-xl transition-all duration-300 hover:shadow-2xl transform hover:-translate-y-1 flex items-center gap-3 mx-auto",children:[c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Start Customizing"]})})]})]})]})]})};class zc{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const JO=()=>{if(!(typeof localStorage>"u"))return{get:r=>Promise.resolve(localStorage.getItem(r)),set:(r,e)=>Promise.resolve(localStorage.setItem(r,e)),remove:r=>Promise.resolve(localStorage.removeItem(r))}},fs={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:JO()},D0=r=>r?typeof r=="string"?{publicKey:r}:r.toString()==="[object Object]"?r:{}:{},eM=(r,e="https://api.emailjs.com")=>{if(!r)return;const t=D0(r);fs.publicKey=t.publicKey,fs.blockHeadless=t.blockHeadless,fs.storageProvider=t.storageProvider,fs.blockList=t.blockList,fs.limitRate=t.limitRate,fs.origin=t.origin||e},YS=async(r,e,t={})=>{const s=await fetch(fs.origin+r,{method:"POST",headers:t,body:e}),n=await s.text(),a=new zc(s.status,n);if(s.ok)return a;throw a},qS=(r,e,t)=>{if(!r||typeof r!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},tM=r=>{if(r&&r.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},XS=r=>r.webdriver||!r.languages||r.languages.length===0,KS=()=>new zc(451,"Unavailable For Headless Browser"),sM=(r,e)=>{if(!Array.isArray(r))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},rM=r=>!r.list?.length||!r.watchVariable,nM=(r,e)=>r instanceof FormData?r.get(e):r[e],ZS=(r,e)=>{if(rM(r))return!1;sM(r.list,r.watchVariable);const t=nM(e,r.watchVariable);return typeof t!="string"?!1:r.list.includes(t)},QS=()=>new zc(403,"Forbidden"),iM=(r,e)=>{if(typeof r!="number"||r<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},aM=async(r,e,t)=>{const s=Number(await t.get(r)||0);return e-Date.now()+s},JS=async(r,e,t)=>{if(!e.throttle||!t)return!1;iM(e.throttle,e.id);const s=e.id||r;return await aM(s,e.throttle,t)>0?!0:(await t.set(s,Date.now().toString()),!1)},e4=()=>new zc(429,"Too Many Requests"),oM=async(r,e,t,s)=>{const n=D0(s),a=n.publicKey||fs.publicKey,l=n.blockHeadless||fs.blockHeadless,d=n.storageProvider||fs.storageProvider,h={...fs.blockList,...n.blockList},f={...fs.limitRate,...n.limitRate};return l&&XS(navigator)?Promise.reject(KS()):(qS(a,r,e),tM(t),t&&ZS(h,t)?Promise.reject(QS()):await JS(location.pathname,f,d)?Promise.reject(e4()):YS("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:a,service_id:r,template_id:e,template_params:t}),{"Content-type":"application/json"}))},lM=r=>{if(!r||r.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},cM=r=>typeof r=="string"?document.querySelector(r):r,uM=async(r,e,t,s)=>{const n=D0(s),a=n.publicKey||fs.publicKey,l=n.blockHeadless||fs.blockHeadless,d=fs.storageProvider||n.storageProvider,h={...fs.blockList,...n.blockList},f={...fs.limitRate,...n.limitRate};if(l&&XS(navigator))return Promise.reject(KS());const g=cM(t);qS(a,r,e),lM(g);const x=new FormData(g);return ZS(h,x)?Promise.reject(QS()):await JS(location.pathname,f,d)?Promise.reject(e4()):(x.append("lib_version","4.4.1"),x.append("service_id",r),x.append("template_id",e),x.append("user_id",a),YS("/api/v1.0/email/send-form",x))},dM={init:eM,send:oM,sendForm:uM,EmailJSResponseStatus:zc},hM=()=>{const[r,e]=C.useState({name:"",email:"",subject:"",message:""}),[t,s]=C.useState(!1),n=l=>{const{id:d,value:h}=l.target;e(f=>({...f,[d]:h}))},a=async l=>{if(l.preventDefault(),!r.name||!r.email||!r.subject||!r.message){_e.error("Please fill in all fields",{duration:4e3,position:"top-center"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)){_e.error("Please enter a valid email address",{duration:4e3,position:"top-center"});return}s(!0);try{if((await dM.send("YOUR_SERVICE_ID","YOUR_TEMPLATE_ID",{from_name:r.name,from_email:r.email,subject:r.subject,message:r.message,to_email:"conniedecafe@gmail.com"},"YOUR_PUBLIC_KEY")).status===200)_e.success("Message sent successfully! We will get back to you soon.",{duration:5e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}),e({name:"",email:"",subject:"",message:""});else throw new Error("Failed to send email")}catch(h){console.error("Error sending email:",h),_e.error("Failed to send message. Please try again.",{duration:4e3,position:"top-center"})}finally{s(!1)}};return c.jsxs("section",{className:"bg-[url('/AboutUs.png')] bg-cover bg-center w-full min-h-screen px-8 py-12 flex flex-col items-end justify-center space-y-6",children:[c.jsxs("form",{onSubmit:a,className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 overflow-hidden w-full max-w-lg",children:[c.jsxs("div",{className:"bg-gradient-to-r from-[#AF524D] to-[#DFAD56] px-8 py-6 text-center",children:[c.jsxs("div",{className:"flex items-center justify-center mb-2",children:[c.jsx("svg",{className:"w-8 h-8 text-white mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),c.jsx("h1",{className:"text-2xl font-bold text-white font-abhaya",children:"Contact Us Today!"})]}),c.jsx("p",{className:"text-white/90 text-sm",children:"We'd love to hear from you"})]}),c.jsxs("div",{className:"px-8 py-6 space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center text-[#381914] font-medium",htmlFor:"name",children:[c.jsx("svg",{className:"w-4 h-4 mr-2 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Name"]}),c.jsx("input",{type:"text",id:"name",value:r.name,onChange:n,placeholder:"Enter your full name",className:"w-full px-4 py-3 bg-white/90 backdrop-blur-sm border border-[#AF524D]/20 rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] transition-all duration-200 text-[#492220] placeholder-[#492220]/50"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center text-[#381914] font-medium",htmlFor:"email",children:[c.jsx("svg",{className:"w-4 h-4 mr-2 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email"]}),c.jsx("input",{type:"email",id:"email",value:r.email,onChange:n,placeholder:"Enter your email address",className:"w-full px-4 py-3 bg-white/90 backdrop-blur-sm border border-[#AF524D]/20 rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] transition-all duration-200 text-[#492220] placeholder-[#492220]/50"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center text-[#381914] font-medium",htmlFor:"subject",children:[c.jsx("svg",{className:"w-4 h-4 mr-2 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Subject"]}),c.jsx("input",{type:"text",id:"subject",value:r.subject,onChange:n,placeholder:"What's this about?",className:"w-full px-4 py-3 bg-white/90 backdrop-blur-sm border border-[#AF524D]/20 rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] transition-all duration-200 text-[#492220] placeholder-[#492220]/50"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center text-[#381914] font-medium",htmlFor:"message",children:[c.jsx("svg",{className:"w-4 h-4 mr-2 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Message"]}),c.jsx("textarea",{id:"message",value:r.message,onChange:n,placeholder:"Tell us how we can help you...",rows:4,className:"w-full px-4 py-3 bg-white/90 backdrop-blur-sm border border-[#AF524D]/20 rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] transition-all duration-200 text-[#492220] placeholder-[#492220]/50 resize-none"})]})]}),c.jsx("button",{type:"submit",disabled:t,className:`w-full px-6 py-3 bg-gradient-to-r from-[#AF524D] to-[#DFAD56] text-white font-semibold rounded-2xl transition-all duration-300 hover:from-[#DFAD56] hover:to-[#AF524D] hover:scale-[1.02] transform shadow-lg flex items-center justify-center space-x-2 ${t?"opacity-50 cursor-not-allowed":""}`,children:t?c.jsxs(c.Fragment,{children:[c.jsx("svg",{className:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),c.jsx("span",{children:"Sending..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),c.jsx("span",{children:"Send Message"})]})})]})]}),c.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 overflow-hidden w-full max-w-lg",children:[c.jsxs("div",{className:"bg-gradient-to-r from-[#AF524D] to-[#DFAD56] px-8 py-6 text-center",children:[c.jsxs("div",{className:"flex items-center justify-center mb-2",children:[c.jsxs("svg",{className:"w-8 h-8 text-white mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsx("h2",{className:"text-2xl font-bold text-white font-abhaya",children:"Get In Touch"})]}),c.jsx("p",{className:"text-white/90 text-sm",children:"Connect with us"})]}),c.jsxs("div",{className:"px-8 py-6 space-y-6",children:[c.jsxs("a",{href:"mailto:conniedecafe@gmail.com",className:"flex items-center w-full p-4 bg-white/50 backdrop-blur-sm rounded-2xl hover:bg-white/70 transition-all duration-200 group",children:[c.jsx("div",{className:"w-12 h-12 bg-[#AF524D]/10 rounded-xl flex items-center justify-center mr-4 group-hover:bg-[#AF524D]/20 transition-colors",children:c.jsx("svg",{className:"w-6 h-6 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[#381914] font-medium",children:"Email"}),c.jsx("p",{className:"text-[#492220] text-sm",children:"conniedecafe@gmail.com"})]})]}),c.jsxs("a",{href:"tel:+639176292377",className:"flex items-center w-full p-4 bg-white/50 backdrop-blur-sm rounded-2xl hover:bg-white/70 transition-all duration-200 group",children:[c.jsx("div",{className:"w-12 h-12 bg-[#DFAD56]/10 rounded-xl flex items-center justify-center mr-4 group-hover:bg-[#DFAD56]/20 transition-colors",children:c.jsx("svg",{className:"w-6 h-6 text-[#DFAD56]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[#381914] font-medium",children:"Phone"}),c.jsx("p",{className:"text-[#492220] text-sm",children:"+63 917 629 2377"})]})]}),c.jsxs("div",{className:"pt-4",children:[c.jsx("p",{className:"text-[#381914] font-medium text-center mb-4",children:"Follow Us"}),c.jsxs("div",{className:"flex items-center justify-center space-x-6",children:[c.jsx("a",{href:"https://www.facebook.com/connies.cakemall",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 bg-[#3b5998]/10 hover:bg-[#3b5998]/20 rounded-xl flex items-center justify-center transition-all duration-200 group",children:c.jsx("svg",{className:"w-6 h-6 text-[#3b5998] group-hover:scale-110 transition-transform",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),c.jsx("a",{href:"https://www.instagram.com/conniescakemall?igsh=MXNiNjUwdjVlNW5uaA==",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 bg-gradient-to-r from-[#E4405F]/10 to-[#F77737]/10 hover:from-[#E4405F]/20 hover:to-[#F77737]/20 rounded-xl flex items-center justify-center transition-all duration-200 group",children:c.jsxs("svg",{className:"w-6 h-6 text-[#E4405F] group-hover:scale-110 transition-transform",viewBox:"0 0 102 102",id:"instagram",children:[c.jsxs("defs",{children:[c.jsxs("radialGradient",{id:"a",cx:"6.601",cy:"99.766",r:"129.502",gradientUnits:"userSpaceOnUse",children:[c.jsx("stop",{offset:".09","stop-color":"#fa8f21"}),c.jsx("stop",{offset:".78","stop-color":"#d82d7e"})]}),c.jsxs("radialGradient",{id:"b",cx:"70.652",cy:"96.49",r:"113.963",gradientUnits:"userSpaceOnUse",children:[c.jsx("stop",{offset:".64","stop-color":"#8c3aaa","stop-opacity":"0"}),c.jsx("stop",{offset:"1","stop-color":"#8c3aaa"})]})]}),c.jsx("path",{fill:"url(#a)",d:"M25.865,101.639A34.341,34.341,0,0,1,14.312,99.5a19.329,19.329,0,0,1-7.154-4.653A19.181,19.181,0,0,1,2.5,87.694,34.341,34.341,0,0,1,.364,76.142C.061,69.584,0,67.617,0,51s.067-18.577.361-25.14A34.534,34.534,0,0,1,2.5,14.312,19.4,19.4,0,0,1,7.154,7.154,19.206,19.206,0,0,1,14.309,2.5,34.341,34.341,0,0,1,25.862.361C32.422.061,34.392,0,51,0s18.577.067,25.14.361A34.534,34.534,0,0,1,87.691,2.5a19.254,19.254,0,0,1,7.154,4.653A19.267,19.267,0,0,1,99.5,14.309a34.341,34.341,0,0,1,2.14,11.553c.3,6.563.361,8.528.361,25.14s-.061,18.577-.361,25.14A34.5,34.5,0,0,1,99.5,87.694,20.6,20.6,0,0,1,87.691,99.5a34.342,34.342,0,0,1-11.553,2.14c-6.557.3-8.528.361-25.14.361s-18.577-.058-25.134-.361"}),c.jsx("path",{fill:"url(#b)",d:"M25.865,101.639A34.341,34.341,0,0,1,14.312,99.5a19.329,19.329,0,0,1-7.154-4.653A19.181,19.181,0,0,1,2.5,87.694,34.341,34.341,0,0,1,.364,76.142C.061,69.584,0,67.617,0,51s.067-18.577.361-25.14A34.534,34.534,0,0,1,2.5,14.312,19.4,19.4,0,0,1,7.154,7.154,19.206,19.206,0,0,1,14.309,2.5,34.341,34.341,0,0,1,25.862.361C32.422.061,34.392,0,51,0s18.577.067,25.14.361A34.534,34.534,0,0,1,87.691,2.5a19.254,19.254,0,0,1,7.154,4.653A19.267,19.267,0,0,1,99.5,14.309a34.341,34.341,0,0,1,2.14,11.553c.3,6.563.361,8.528.361,25.14s-.061,18.577-.361,25.14A34.5,34.5,0,0,1,99.5,87.694,20.6,20.6,0,0,1,87.691,99.5a34.342,34.342,0,0,1-11.553,2.14c-6.557.3-8.528.361-25.14.361s-18.577-.058-25.134-.361"}),c.jsx("path",{fill:"#fff",d:"M461.114,477.413a12.631,12.631,0,1,1,12.629,12.632,12.631,12.631,0,0,1-12.629-12.632m-6.829,0a19.458,19.458,0,1,0,19.458-19.458,19.457,19.457,0,0,0-19.458,19.458m35.139-20.229a4.547,4.547,0,1,0,4.549-4.545h0a4.549,4.549,0,0,0-4.547,4.545m-30.99,51.074a20.943,20.943,0,0,1-7.037-1.3,12.547,12.547,0,0,1-7.193-7.19,20.923,20.923,0,0,1-1.3-7.037c-.184-3.994-.22-5.194-.22-15.313s.04-11.316.22-15.314a21.082,21.082,0,0,1,1.3-7.037,12.54,12.54,0,0,1,7.193-7.193,20.924,20.924,0,0,1,7.037-1.3c3.994-.184,5.194-.22,15.309-.22s11.316.039,15.314.221a21.082,21.082,0,0,1,7.037,1.3,12.541,12.541,0,0,1,7.193,7.193,20.926,20.926,0,0,1,1.3,7.037c.184,4,.22,5.194.22,15.314s-.037,11.316-.22,15.314a21.023,21.023,0,0,1-1.3,7.037,12.547,12.547,0,0,1-7.193,7.19,20.925,20.925,0,0,1-7.037,1.3c-3.994.184-5.194.22-15.314.22s-11.316-.037-15.309-.22m-.314-68.509a27.786,27.786,0,0,0-9.2,1.76,19.373,19.373,0,0,0-11.083,11.083,27.794,27.794,0,0,0-1.76,9.2c-.187,4.04-.229,5.332-.229,15.623s.043,11.582.229,15.623a27.793,27.793,0,0,0,1.76,9.2,19.374,19.374,0,0,0,11.083,11.083,27.813,27.813,0,0,0,9.2,1.76c4.042.184,5.332.229,15.623.229s11.582-.043,15.623-.229a27.8,27.8,0,0,0,9.2-1.76,19.374,19.374,0,0,0,11.083-11.083,27.716,27.716,0,0,0,1.76-9.2c.184-4.043.226-5.332.226-15.623s-.043-11.582-.226-15.623a27.786,27.786,0,0,0-1.76-9.2,19.379,19.379,0,0,0-11.08-11.083,27.748,27.748,0,0,0-9.2-1.76c-4.041-.185-5.332-.229-15.621-.229s-11.583.043-15.626.229",transform:"translate(-422.637 -426.196)"})]})})]})]})]})]})]})};function fM(){const r=Qs();return C.useEffect(()=>{if(r.hash){const e=document.getElementById(r.hash.substring(1));e&&e.scrollIntoView({behavior:"smooth"})}},[r]),null}function Fb(r){return r!==null&&typeof r=="object"&&"constructor"in r&&r.constructor===Object}function O0(r,e){r===void 0&&(r={}),e===void 0&&(e={});const t=["__proto__","constructor","prototype"];Object.keys(e).filter(s=>t.indexOf(s)<0).forEach(s=>{typeof r[s]>"u"?r[s]=e[s]:Fb(e[s])&&Fb(r[s])&&Object.keys(e[s]).length>0&&O0(r[s],e[s])})}const t4={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function da(){const r=typeof document<"u"?document:{};return O0(r,t4),r}const mM={document:t4,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(r){return typeof setTimeout>"u"?(r(),null):setTimeout(r,0)},cancelAnimationFrame(r){typeof setTimeout>"u"||clearTimeout(r)}};function Es(){const r=typeof window<"u"?window:{};return O0(r,mM),r}function gM(r){return r===void 0&&(r=""),r.trim().split(" ").filter(e=>!!e.trim())}function pM(r){const e=r;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function s4(r,e){return e===void 0&&(e=0),setTimeout(r,e)}function oh(){return Date.now()}function xM(r){const e=Es();let t;return e.getComputedStyle&&(t=e.getComputedStyle(r,null)),!t&&r.currentStyle&&(t=r.currentStyle),t||(t=r.style),t}function vM(r,e){e===void 0&&(e="x");const t=Es();let s,n,a;const l=xM(r);return t.WebKitCSSMatrix?(n=l.transform||l.webkitTransform,n.split(",").length>6&&(n=n.split(", ").map(d=>d.replace(",",".")).join(", ")),a=new t.WebKitCSSMatrix(n==="none"?"":n)):(a=l.MozTransform||l.OTransform||l.MsTransform||l.msTransform||l.transform||l.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),s=a.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?n=a.m41:s.length===16?n=parseFloat(s[12]):n=parseFloat(s[4])),e==="y"&&(t.WebKitCSSMatrix?n=a.m42:s.length===16?n=parseFloat(s[13]):n=parseFloat(s[5])),n||0}function hd(r){return typeof r=="object"&&r!==null&&r.constructor&&Object.prototype.toString.call(r).slice(8,-1)==="Object"}function yM(r){return typeof window<"u"&&typeof window.HTMLElement<"u"?r instanceof HTMLElement:r&&(r.nodeType===1||r.nodeType===11)}function Zs(){const r=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const s=t<0||arguments.length<=t?void 0:arguments[t];if(s!=null&&!yM(s)){const n=Object.keys(Object(s)).filter(a=>e.indexOf(a)<0);for(let a=0,l=n.length;a<l;a+=1){const d=n[a],h=Object.getOwnPropertyDescriptor(s,d);h!==void 0&&h.enumerable&&(hd(r[d])&&hd(s[d])?s[d].__swiper__?r[d]=s[d]:Zs(r[d],s[d]):!hd(r[d])&&hd(s[d])?(r[d]={},s[d].__swiper__?r[d]=s[d]:Zs(r[d],s[d])):r[d]=s[d])}}}return r}function fd(r,e,t){r.style.setProperty(e,t)}function r4(r){let{swiper:e,targetPosition:t,side:s}=r;const n=Es(),a=-e.translate;let l=null,d;const h=e.params.speed;e.wrapperEl.style.scrollSnapType="none",n.cancelAnimationFrame(e.cssModeFrameID);const f=t>a?"next":"prev",g=(v,b)=>f==="next"&&v>=b||f==="prev"&&v<=b,x=()=>{d=new Date().getTime(),l===null&&(l=d);const v=Math.max(Math.min((d-l)/h,1),0),b=.5-Math.cos(v*Math.PI)/2;let w=a+b*(t-a);if(g(w,t)&&(w=t),e.wrapperEl.scrollTo({[s]:w}),g(w,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[s]:w})}),n.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=n.requestAnimationFrame(x)};x()}function qr(r,e){e===void 0&&(e="");const t=Es(),s=[...r.children];return t.HTMLSlotElement&&r instanceof HTMLSlotElement&&s.push(...r.assignedElements()),e?s.filter(n=>n.matches(e)):s}function bM(r,e){const t=[e];for(;t.length>0;){const s=t.shift();if(r===s)return!0;t.push(...s.children,...s.shadowRoot?s.shadowRoot.children:[],...s.assignedElements?s.assignedElements():[])}}function wM(r,e){const t=Es();let s=e.contains(r);return!s&&t.HTMLSlotElement&&e instanceof HTMLSlotElement&&(s=[...e.assignedElements()].includes(r),s||(s=bM(r,e))),s}function lh(r){try{console.warn(r);return}catch{}}function ch(r,e){e===void 0&&(e=[]);const t=document.createElement(r);return t.classList.add(...Array.isArray(e)?e:gM(e)),t}function _M(r,e){const t=[];for(;r.previousElementSibling;){const s=r.previousElementSibling;e?s.matches(e)&&t.push(s):t.push(s),r=s}return t}function SM(r,e){const t=[];for(;r.nextElementSibling;){const s=r.nextElementSibling;e?s.matches(e)&&t.push(s):t.push(s),r=s}return t}function xi(r,e){return Es().getComputedStyle(r,null).getPropertyValue(e)}function Bb(r){let e=r,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function jM(r,e){const t=[];let s=r.parentElement;for(;s;)t.push(s),s=s.parentElement;return t}function zb(r,e,t){const s=Es();return r[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(s.getComputedStyle(r,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(s.getComputedStyle(r,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function vn(r){return(Array.isArray(r)?r:[r]).filter(e=>!!e)}function Ub(r,e){e===void 0&&(e=""),typeof trustedTypes<"u"?r.innerHTML=trustedTypes.createPolicy("html",{createHTML:t=>t}).createHTML(e):r.innerHTML=e}let bg;function CM(){const r=Es(),e=da();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in r||r.DocumentTouch&&e instanceof r.DocumentTouch)}}function n4(){return bg||(bg=CM()),bg}let wg;function TM(r){let{userAgent:e}=r===void 0?{}:r;const t=n4(),s=Es(),n=s.navigator.platform,a=e||s.navigator.userAgent,l={ios:!1,android:!1},d=s.screen.width,h=s.screen.height,f=a.match(/(Android);?[\s\/]+([\d.]+)?/);let g=a.match(/(iPad).*OS\s([\d_]+)/);const x=a.match(/(iPod)(.*OS\s([\d_]+))?/),v=!g&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),b=n==="Win32";let w=n==="MacIntel";const _=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!g&&w&&t.touch&&_.indexOf(`${d}x${h}`)>=0&&(g=a.match(/(Version)\/([\d.]+)/),g||(g=[0,1,"13_0_0"]),w=!1),f&&!b&&(l.os="android",l.android=!0),(g||v||x)&&(l.os="ios",l.ios=!0),l}function i4(r){return r===void 0&&(r={}),wg||(wg=TM(r)),wg}let _g;function kM(){const r=Es(),e=i4();let t=!1;function s(){const d=r.navigator.userAgent.toLowerCase();return d.indexOf("safari")>=0&&d.indexOf("chrome")<0&&d.indexOf("android")<0}if(s()){const d=String(r.navigator.userAgent);if(d.includes("Version/")){const[h,f]=d.split("Version/")[1].split(" ")[0].split(".").map(g=>Number(g));t=h<16||h===16&&f<2}}const n=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(r.navigator.userAgent),a=s(),l=a||n&&e.ios;return{isSafari:t||a,needPerspectiveFix:t,need3dFix:l,isWebView:n}}function a4(){return _g||(_g=kM()),_g}function AM(r){let{swiper:e,on:t,emit:s}=r;const n=Es();let a=null,l=null;const d=()=>{!e||e.destroyed||!e.initialized||(s("beforeResize"),s("resize"))},h=()=>{!e||e.destroyed||!e.initialized||(a=new ResizeObserver(x=>{l=n.requestAnimationFrame(()=>{const{width:v,height:b}=e;let w=v,_=b;x.forEach(T=>{let{contentBoxSize:S,contentRect:E,target:A}=T;A&&A!==e.el||(w=E?E.width:(S[0]||S).inlineSize,_=E?E.height:(S[0]||S).blockSize)}),(w!==v||_!==b)&&d()})}),a.observe(e.el))},f=()=>{l&&n.cancelAnimationFrame(l),a&&a.unobserve&&e.el&&(a.unobserve(e.el),a=null)},g=()=>{!e||e.destroyed||!e.initialized||s("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof n.ResizeObserver<"u"){h();return}n.addEventListener("resize",d),n.addEventListener("orientationchange",g)}),t("destroy",()=>{f(),n.removeEventListener("resize",d),n.removeEventListener("orientationchange",g)})}function EM(r){let{swiper:e,extendParams:t,on:s,emit:n}=r;const a=[],l=Es(),d=function(g,x){x===void 0&&(x={});const v=l.MutationObserver||l.WebkitMutationObserver,b=new v(w=>{if(e.__preventObserver__)return;if(w.length===1){n("observerUpdate",w[0]);return}const _=function(){n("observerUpdate",w[0])};l.requestAnimationFrame?l.requestAnimationFrame(_):l.setTimeout(_,0)});b.observe(g,{attributes:typeof x.attributes>"u"?!0:x.attributes,childList:e.isElement||(typeof x.childList>"u"?!0:x).childList,characterData:typeof x.characterData>"u"?!0:x.characterData}),a.push(b)},h=()=>{if(e.params.observer){if(e.params.observeParents){const g=jM(e.hostEl);for(let x=0;x<g.length;x+=1)d(g[x])}d(e.hostEl,{childList:e.params.observeSlideChildren}),d(e.wrapperEl,{attributes:!1})}},f=()=>{a.forEach(g=>{g.disconnect()}),a.splice(0,a.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),s("init",h),s("destroy",f)}var NM={on(r,e,t){const s=this;if(!s.eventsListeners||s.destroyed||typeof e!="function")return s;const n=t?"unshift":"push";return r.split(" ").forEach(a=>{s.eventsListeners[a]||(s.eventsListeners[a]=[]),s.eventsListeners[a][n](e)}),s},once(r,e,t){const s=this;if(!s.eventsListeners||s.destroyed||typeof e!="function")return s;function n(){s.off(r,n),n.__emitterProxy&&delete n.__emitterProxy;for(var a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];e.apply(s,l)}return n.__emitterProxy=e,s.on(r,n,t)},onAny(r,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof r!="function")return t;const s=e?"unshift":"push";return t.eventsAnyListeners.indexOf(r)<0&&t.eventsAnyListeners[s](r),t},offAny(r){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(r);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(r,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||r.split(" ").forEach(s=>{typeof e>"u"?t.eventsListeners[s]=[]:t.eventsListeners[s]&&t.eventsListeners[s].forEach((n,a)=>{(n===e||n.__emitterProxy&&n.__emitterProxy===e)&&t.eventsListeners[s].splice(a,1)})}),t},emit(){const r=this;if(!r.eventsListeners||r.destroyed||!r.eventsListeners)return r;let e,t,s;for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return typeof a[0]=="string"||Array.isArray(a[0])?(e=a[0],t=a.slice(1,a.length),s=r):(e=a[0].events,t=a[0].data,s=a[0].context||r),t.unshift(s),(Array.isArray(e)?e:e.split(" ")).forEach(h=>{r.eventsAnyListeners&&r.eventsAnyListeners.length&&r.eventsAnyListeners.forEach(f=>{f.apply(s,[h,...t])}),r.eventsListeners&&r.eventsListeners[h]&&r.eventsListeners[h].forEach(f=>{f.apply(s,t)})}),r}};function DM(){const r=this;let e,t;const s=r.el;typeof r.params.width<"u"&&r.params.width!==null?e=r.params.width:e=s.clientWidth,typeof r.params.height<"u"&&r.params.height!==null?t=r.params.height:t=s.clientHeight,!(e===0&&r.isHorizontal()||t===0&&r.isVertical())&&(e=e-parseInt(xi(s,"padding-left")||0,10)-parseInt(xi(s,"padding-right")||0,10),t=t-parseInt(xi(s,"padding-top")||0,10)-parseInt(xi(s,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(r,{width:e,height:t,size:r.isHorizontal()?e:t}))}function OM(){const r=this;function e(N,V){return parseFloat(N.getPropertyValue(r.getDirectionLabel(V))||0)}const t=r.params,{wrapperEl:s,slidesEl:n,size:a,rtlTranslate:l,wrongRTL:d}=r,h=r.virtual&&t.virtual.enabled,f=h?r.virtual.slides.length:r.slides.length,g=qr(n,`.${r.params.slideClass}, swiper-slide`),x=h?r.virtual.slides.length:g.length;let v=[];const b=[],w=[];let _=t.slidesOffsetBefore;typeof _=="function"&&(_=t.slidesOffsetBefore.call(r));let T=t.slidesOffsetAfter;typeof T=="function"&&(T=t.slidesOffsetAfter.call(r));const S=r.snapGrid.length,E=r.slidesGrid.length;let A=t.spaceBetween,O=-_,D=0,F=0;if(typeof a>"u")return;typeof A=="string"&&A.indexOf("%")>=0?A=parseFloat(A.replace("%",""))/100*a:typeof A=="string"&&(A=parseFloat(A)),r.virtualSize=-A,g.forEach(N=>{l?N.style.marginLeft="":N.style.marginRight="",N.style.marginBottom="",N.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(fd(s,"--swiper-centered-offset-before",""),fd(s,"--swiper-centered-offset-after",""));const B=t.grid&&t.grid.rows>1&&r.grid;B?r.grid.initSlides(g):r.grid&&r.grid.unsetSlides();let P;const H=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(N=>typeof t.breakpoints[N].slidesPerView<"u").length>0;for(let N=0;N<x;N+=1){P=0;let V;if(g[N]&&(V=g[N]),B&&r.grid.updateSlide(N,V,g),!(g[N]&&xi(V,"display")==="none")){if(t.slidesPerView==="auto"){H&&(g[N].style[r.getDirectionLabel("width")]="");const G=getComputedStyle(V),ne=V.style.transform,Q=V.style.webkitTransform;if(ne&&(V.style.transform="none"),Q&&(V.style.webkitTransform="none"),t.roundLengths)P=r.isHorizontal()?zb(V,"width"):zb(V,"height");else{const ie=e(G,"width"),L=e(G,"padding-left"),$=e(G,"padding-right"),K=e(G,"margin-left"),pe=e(G,"margin-right"),M=G.getPropertyValue("box-sizing");if(M&&M==="border-box")P=ie+K+pe;else{const{clientWidth:J,offsetWidth:ye}=V;P=ie+L+$+K+pe+(ye-J)}}ne&&(V.style.transform=ne),Q&&(V.style.webkitTransform=Q),t.roundLengths&&(P=Math.floor(P))}else P=(a-(t.slidesPerView-1)*A)/t.slidesPerView,t.roundLengths&&(P=Math.floor(P)),g[N]&&(g[N].style[r.getDirectionLabel("width")]=`${P}px`);g[N]&&(g[N].swiperSlideSize=P),w.push(P),t.centeredSlides?(O=O+P/2+D/2+A,D===0&&N!==0&&(O=O-a/2-A),N===0&&(O=O-a/2-A),Math.abs(O)<1/1e3&&(O=0),t.roundLengths&&(O=Math.floor(O)),F%t.slidesPerGroup===0&&v.push(O),b.push(O)):(t.roundLengths&&(O=Math.floor(O)),(F-Math.min(r.params.slidesPerGroupSkip,F))%r.params.slidesPerGroup===0&&v.push(O),b.push(O),O=O+P+A),r.virtualSize+=P+A,D=P,F+=1}}if(r.virtualSize=Math.max(r.virtualSize,a)+T,l&&d&&(t.effect==="slide"||t.effect==="coverflow")&&(s.style.width=`${r.virtualSize+A}px`),t.setWrapperSize&&(s.style[r.getDirectionLabel("width")]=`${r.virtualSize+A}px`),B&&r.grid.updateWrapperSize(P,v),!t.centeredSlides){const N=[];for(let V=0;V<v.length;V+=1){let G=v[V];t.roundLengths&&(G=Math.floor(G)),v[V]<=r.virtualSize-a&&N.push(G)}v=N,Math.floor(r.virtualSize-a)-Math.floor(v[v.length-1])>1&&v.push(r.virtualSize-a)}if(h&&t.loop){const N=w[0]+A;if(t.slidesPerGroup>1){const V=Math.ceil((r.virtual.slidesBefore+r.virtual.slidesAfter)/t.slidesPerGroup),G=N*t.slidesPerGroup;for(let ne=0;ne<V;ne+=1)v.push(v[v.length-1]+G)}for(let V=0;V<r.virtual.slidesBefore+r.virtual.slidesAfter;V+=1)t.slidesPerGroup===1&&v.push(v[v.length-1]+N),b.push(b[b.length-1]+N),r.virtualSize+=N}if(v.length===0&&(v=[0]),A!==0){const N=r.isHorizontal()&&l?"marginLeft":r.getDirectionLabel("marginRight");g.filter((V,G)=>!t.cssMode||t.loop?!0:G!==g.length-1).forEach(V=>{V.style[N]=`${A}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let N=0;w.forEach(G=>{N+=G+(A||0)}),N-=A;const V=N>a?N-a:0;v=v.map(G=>G<=0?-_:G>V?V+T:G)}if(t.centerInsufficientSlides){let N=0;w.forEach(G=>{N+=G+(A||0)}),N-=A;const V=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(N+V<a){const G=(a-N-V)/2;v.forEach((ne,Q)=>{v[Q]=ne-G}),b.forEach((ne,Q)=>{b[Q]=ne+G})}}if(Object.assign(r,{slides:g,snapGrid:v,slidesGrid:b,slidesSizesGrid:w}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){fd(s,"--swiper-centered-offset-before",`${-v[0]}px`),fd(s,"--swiper-centered-offset-after",`${r.size/2-w[w.length-1]/2}px`);const N=-r.snapGrid[0],V=-r.slidesGrid[0];r.snapGrid=r.snapGrid.map(G=>G+N),r.slidesGrid=r.slidesGrid.map(G=>G+V)}if(x!==f&&r.emit("slidesLengthChange"),v.length!==S&&(r.params.watchOverflow&&r.checkOverflow(),r.emit("snapGridLengthChange")),b.length!==E&&r.emit("slidesGridLengthChange"),t.watchSlidesProgress&&r.updateSlidesOffset(),r.emit("slidesUpdated"),!h&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const N=`${t.containerModifierClass}backface-hidden`,V=r.el.classList.contains(N);x<=t.maxBackfaceHiddenSlides?V||r.el.classList.add(N):V&&r.el.classList.remove(N)}}function MM(r){const e=this,t=[],s=e.virtual&&e.params.virtual.enabled;let n=0,a;typeof r=="number"?e.setTransition(r):r===!0&&e.setTransition(e.params.speed);const l=d=>s?e.slides[e.getSlideIndexByData(d)]:e.slides[d];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(d=>{t.push(d)});else for(a=0;a<Math.ceil(e.params.slidesPerView);a+=1){const d=e.activeIndex+a;if(d>e.slides.length&&!s)break;t.push(l(d))}else t.push(l(e.activeIndex));for(a=0;a<t.length;a+=1)if(typeof t[a]<"u"){const d=t[a].offsetHeight;n=d>n?d:n}(n||n===0)&&(e.wrapperEl.style.height=`${n}px`)}function LM(){const r=this,e=r.slides,t=r.isElement?r.isHorizontal()?r.wrapperEl.offsetLeft:r.wrapperEl.offsetTop:0;for(let s=0;s<e.length;s+=1)e[s].swiperSlideOffset=(r.isHorizontal()?e[s].offsetLeft:e[s].offsetTop)-t-r.cssOverflowAdjustment()}const Vb=(r,e,t)=>{e&&!r.classList.contains(t)?r.classList.add(t):!e&&r.classList.contains(t)&&r.classList.remove(t)};function RM(r){r===void 0&&(r=this&&this.translate||0);const e=this,t=e.params,{slides:s,rtlTranslate:n,snapGrid:a}=e;if(s.length===0)return;typeof s[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let l=-r;n&&(l=r),e.visibleSlidesIndexes=[],e.visibleSlides=[];let d=t.spaceBetween;typeof d=="string"&&d.indexOf("%")>=0?d=parseFloat(d.replace("%",""))/100*e.size:typeof d=="string"&&(d=parseFloat(d));for(let h=0;h<s.length;h+=1){const f=s[h];let g=f.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(g-=s[0].swiperSlideOffset);const x=(l+(t.centeredSlides?e.minTranslate():0)-g)/(f.swiperSlideSize+d),v=(l-a[0]+(t.centeredSlides?e.minTranslate():0)-g)/(f.swiperSlideSize+d),b=-(l-g),w=b+e.slidesSizesGrid[h],_=b>=0&&b<=e.size-e.slidesSizesGrid[h],T=b>=0&&b<e.size-1||w>1&&w<=e.size||b<=0&&w>=e.size;T&&(e.visibleSlides.push(f),e.visibleSlidesIndexes.push(h)),Vb(f,T,t.slideVisibleClass),Vb(f,_,t.slideFullyVisibleClass),f.progress=n?-x:x,f.originalProgress=n?-v:v}}function PM(r){const e=this;if(typeof r>"u"){const g=e.rtlTranslate?-1:1;r=e&&e.translate&&e.translate*g||0}const t=e.params,s=e.maxTranslate()-e.minTranslate();let{progress:n,isBeginning:a,isEnd:l,progressLoop:d}=e;const h=a,f=l;if(s===0)n=0,a=!0,l=!0;else{n=(r-e.minTranslate())/s;const g=Math.abs(r-e.minTranslate())<1,x=Math.abs(r-e.maxTranslate())<1;a=g||n<=0,l=x||n>=1,g&&(n=0),x&&(n=1)}if(t.loop){const g=e.getSlideIndexByData(0),x=e.getSlideIndexByData(e.slides.length-1),v=e.slidesGrid[g],b=e.slidesGrid[x],w=e.slidesGrid[e.slidesGrid.length-1],_=Math.abs(r);_>=v?d=(_-v)/w:d=(_+w-b)/w,d>1&&(d-=1)}Object.assign(e,{progress:n,progressLoop:d,isBeginning:a,isEnd:l}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(r),a&&!h&&e.emit("reachBeginning toEdge"),l&&!f&&e.emit("reachEnd toEdge"),(h&&!a||f&&!l)&&e.emit("fromEdge"),e.emit("progress",n)}const Sg=(r,e,t)=>{e&&!r.classList.contains(t)?r.classList.add(t):!e&&r.classList.contains(t)&&r.classList.remove(t)};function FM(){const r=this,{slides:e,params:t,slidesEl:s,activeIndex:n}=r,a=r.virtual&&t.virtual.enabled,l=r.grid&&t.grid&&t.grid.rows>1,d=x=>qr(s,`.${t.slideClass}${x}, swiper-slide${x}`)[0];let h,f,g;if(a)if(t.loop){let x=n-r.virtual.slidesBefore;x<0&&(x=r.virtual.slides.length+x),x>=r.virtual.slides.length&&(x-=r.virtual.slides.length),h=d(`[data-swiper-slide-index="${x}"]`)}else h=d(`[data-swiper-slide-index="${n}"]`);else l?(h=e.find(x=>x.column===n),g=e.find(x=>x.column===n+1),f=e.find(x=>x.column===n-1)):h=e[n];h&&(l||(g=SM(h,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!g&&(g=e[0]),f=_M(h,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!f===0&&(f=e[e.length-1]))),e.forEach(x=>{Sg(x,x===h,t.slideActiveClass),Sg(x,x===g,t.slideNextClass),Sg(x,x===f,t.slidePrevClass)}),r.emitSlidesClasses()}const Wd=(r,e)=>{if(!r||r.destroyed||!r.params)return;const t=()=>r.isElement?"swiper-slide":`.${r.params.slideClass}`,s=e.closest(t());if(s){let n=s.querySelector(`.${r.params.lazyPreloaderClass}`);!n&&r.isElement&&(s.shadowRoot?n=s.shadowRoot.querySelector(`.${r.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{s.shadowRoot&&(n=s.shadowRoot.querySelector(`.${r.params.lazyPreloaderClass}`),n&&n.remove())})),n&&n.remove()}},jg=(r,e)=>{if(!r.slides[e])return;const t=r.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},bp=r=>{if(!r||r.destroyed||!r.params)return;let e=r.params.lazyPreloadPrevNext;const t=r.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const s=r.params.slidesPerView==="auto"?r.slidesPerViewDynamic():Math.ceil(r.params.slidesPerView),n=r.activeIndex;if(r.params.grid&&r.params.grid.rows>1){const l=n,d=[l-e];d.push(...Array.from({length:e}).map((h,f)=>l+s+f)),r.slides.forEach((h,f)=>{d.includes(h.column)&&jg(r,f)});return}const a=n+s-1;if(r.params.rewind||r.params.loop)for(let l=n-e;l<=a+e;l+=1){const d=(l%t+t)%t;(d<n||d>a)&&jg(r,d)}else for(let l=Math.max(n-e,0);l<=Math.min(a+e,t-1);l+=1)l!==n&&(l>a||l<n)&&jg(r,l)};function BM(r){const{slidesGrid:e,params:t}=r,s=r.rtlTranslate?r.translate:-r.translate;let n;for(let a=0;a<e.length;a+=1)typeof e[a+1]<"u"?s>=e[a]&&s<e[a+1]-(e[a+1]-e[a])/2?n=a:s>=e[a]&&s<e[a+1]&&(n=a+1):s>=e[a]&&(n=a);return t.normalizeSlideIndex&&(n<0||typeof n>"u")&&(n=0),n}function zM(r){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:s,params:n,activeIndex:a,realIndex:l,snapIndex:d}=e;let h=r,f;const g=b=>{let w=b-e.virtual.slidesBefore;return w<0&&(w=e.virtual.slides.length+w),w>=e.virtual.slides.length&&(w-=e.virtual.slides.length),w};if(typeof h>"u"&&(h=BM(e)),s.indexOf(t)>=0)f=s.indexOf(t);else{const b=Math.min(n.slidesPerGroupSkip,h);f=b+Math.floor((h-b)/n.slidesPerGroup)}if(f>=s.length&&(f=s.length-1),h===a&&!e.params.loop){f!==d&&(e.snapIndex=f,e.emit("snapIndexChange"));return}if(h===a&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=g(h);return}const x=e.grid&&n.grid&&n.grid.rows>1;let v;if(e.virtual&&n.virtual.enabled&&n.loop)v=g(h);else if(x){const b=e.slides.find(_=>_.column===h);let w=parseInt(b.getAttribute("data-swiper-slide-index"),10);Number.isNaN(w)&&(w=Math.max(e.slides.indexOf(b),0)),v=Math.floor(w/n.grid.rows)}else if(e.slides[h]){const b=e.slides[h].getAttribute("data-swiper-slide-index");b?v=parseInt(b,10):v=h}else v=h;Object.assign(e,{previousSnapIndex:d,snapIndex:f,previousRealIndex:l,realIndex:v,previousIndex:a,activeIndex:h}),e.initialized&&bp(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(l!==v&&e.emit("realIndexChange"),e.emit("slideChange"))}function UM(r,e){const t=this,s=t.params;let n=r.closest(`.${s.slideClass}, swiper-slide`);!n&&t.isElement&&e&&e.length>1&&e.includes(r)&&[...e.slice(e.indexOf(r)+1,e.length)].forEach(d=>{!n&&d.matches&&d.matches(`.${s.slideClass}, swiper-slide`)&&(n=d)});let a=!1,l;if(n){for(let d=0;d<t.slides.length;d+=1)if(t.slides[d]===n){a=!0,l=d;break}}if(n&&a)t.clickedSlide=n,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(n.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=l;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}s.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var VM={updateSize:DM,updateSlides:OM,updateAutoHeight:MM,updateSlidesOffset:LM,updateSlidesProgress:RM,updateProgress:PM,updateSlidesClasses:FM,updateActiveIndex:zM,updateClickedSlide:UM};function IM(r){r===void 0&&(r=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:s,translate:n,wrapperEl:a}=e;if(t.virtualTranslate)return s?-n:n;if(t.cssMode)return n;let l=vM(a,r);return l+=e.cssOverflowAdjustment(),s&&(l=-l),l||0}function HM(r,e){const t=this,{rtlTranslate:s,params:n,wrapperEl:a,progress:l}=t;let d=0,h=0;const f=0;t.isHorizontal()?d=s?-r:r:h=r,n.roundLengths&&(d=Math.floor(d),h=Math.floor(h)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?d:h,n.cssMode?a[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-d:-h:n.virtualTranslate||(t.isHorizontal()?d-=t.cssOverflowAdjustment():h-=t.cssOverflowAdjustment(),a.style.transform=`translate3d(${d}px, ${h}px, ${f}px)`);let g;const x=t.maxTranslate()-t.minTranslate();x===0?g=0:g=(r-t.minTranslate())/x,g!==l&&t.updateProgress(r),t.emit("setTranslate",t.translate,e)}function $M(){return-this.snapGrid[0]}function GM(){return-this.snapGrid[this.snapGrid.length-1]}function WM(r,e,t,s,n){r===void 0&&(r=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),s===void 0&&(s=!0);const a=this,{params:l,wrapperEl:d}=a;if(a.animating&&l.preventInteractionOnTransition)return!1;const h=a.minTranslate(),f=a.maxTranslate();let g;if(s&&r>h?g=h:s&&r<f?g=f:g=r,a.updateProgress(g),l.cssMode){const x=a.isHorizontal();if(e===0)d[x?"scrollLeft":"scrollTop"]=-g;else{if(!a.support.smoothScroll)return r4({swiper:a,targetPosition:-g,side:x?"left":"top"}),!0;d.scrollTo({[x?"left":"top"]:-g,behavior:"smooth"})}return!0}return e===0?(a.setTransition(0),a.setTranslate(g),t&&(a.emit("beforeTransitionStart",e,n),a.emit("transitionEnd"))):(a.setTransition(e),a.setTranslate(g),t&&(a.emit("beforeTransitionStart",e,n),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(v){!a||a.destroyed||v.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,a.animating=!1,t&&a.emit("transitionEnd"))}),a.wrapperEl.addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd))),!0}var YM={getTranslate:IM,setTranslate:HM,minTranslate:$M,maxTranslate:GM,translateTo:WM};function qM(r,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${r}ms`,t.wrapperEl.style.transitionDelay=r===0?"0ms":""),t.emit("setTransition",r,e)}function o4(r){let{swiper:e,runCallbacks:t,direction:s,step:n}=r;const{activeIndex:a,previousIndex:l}=e;let d=s;d||(a>l?d="next":a<l?d="prev":d="reset"),e.emit(`transition${n}`),t&&d==="reset"?e.emit(`slideResetTransition${n}`):t&&a!==l&&(e.emit(`slideChangeTransition${n}`),d==="next"?e.emit(`slideNextTransition${n}`):e.emit(`slidePrevTransition${n}`))}function XM(r,e){r===void 0&&(r=!0);const t=this,{params:s}=t;s.cssMode||(s.autoHeight&&t.updateAutoHeight(),o4({swiper:t,runCallbacks:r,direction:e,step:"Start"}))}function KM(r,e){r===void 0&&(r=!0);const t=this,{params:s}=t;t.animating=!1,!s.cssMode&&(t.setTransition(0),o4({swiper:t,runCallbacks:r,direction:e,step:"End"}))}var ZM={setTransition:qM,transitionStart:XM,transitionEnd:KM};function QM(r,e,t,s,n){r===void 0&&(r=0),t===void 0&&(t=!0),typeof r=="string"&&(r=parseInt(r,10));const a=this;let l=r;l<0&&(l=0);const{params:d,snapGrid:h,slidesGrid:f,previousIndex:g,activeIndex:x,rtlTranslate:v,wrapperEl:b,enabled:w}=a;if(!w&&!s&&!n||a.destroyed||a.animating&&d.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=a.params.speed);const _=Math.min(a.params.slidesPerGroupSkip,l);let T=_+Math.floor((l-_)/a.params.slidesPerGroup);T>=h.length&&(T=h.length-1);const S=-h[T];if(d.normalizeSlideIndex)for(let B=0;B<f.length;B+=1){const P=-Math.floor(S*100),H=Math.floor(f[B]*100),N=Math.floor(f[B+1]*100);typeof f[B+1]<"u"?P>=H&&P<N-(N-H)/2?l=B:P>=H&&P<N&&(l=B+1):P>=H&&(l=B)}if(a.initialized&&l!==x&&(!a.allowSlideNext&&(v?S>a.translate&&S>a.minTranslate():S<a.translate&&S<a.minTranslate())||!a.allowSlidePrev&&S>a.translate&&S>a.maxTranslate()&&(x||0)!==l))return!1;l!==(g||0)&&t&&a.emit("beforeSlideChangeStart"),a.updateProgress(S);let E;l>x?E="next":l<x?E="prev":E="reset";const A=a.virtual&&a.params.virtual.enabled;if(!(A&&n)&&(v&&-S===a.translate||!v&&S===a.translate))return a.updateActiveIndex(l),d.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),d.effect!=="slide"&&a.setTranslate(S),E!=="reset"&&(a.transitionStart(t,E),a.transitionEnd(t,E)),!1;if(d.cssMode){const B=a.isHorizontal(),P=v?S:-S;if(e===0)A&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),A&&!a._cssModeVirtualInitialSet&&a.params.initialSlide>0?(a._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{b[B?"scrollLeft":"scrollTop"]=P})):b[B?"scrollLeft":"scrollTop"]=P,A&&requestAnimationFrame(()=>{a.wrapperEl.style.scrollSnapType="",a._immediateVirtual=!1});else{if(!a.support.smoothScroll)return r4({swiper:a,targetPosition:P,side:B?"left":"top"}),!0;b.scrollTo({[B?"left":"top"]:P,behavior:"smooth"})}return!0}const F=a4().isSafari;return A&&!n&&F&&a.isElement&&a.virtual.update(!1,!1,l),a.setTransition(e),a.setTranslate(S),a.updateActiveIndex(l),a.updateSlidesClasses(),a.emit("beforeTransitionStart",e,s),a.transitionStart(t,E),e===0?a.transitionEnd(t,E):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(P){!a||a.destroyed||P.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(t,E))}),a.wrapperEl.addEventListener("transitionend",a.onSlideToWrapperTransitionEnd)),!0}function JM(r,e,t,s){r===void 0&&(r=0),t===void 0&&(t=!0),typeof r=="string"&&(r=parseInt(r,10));const n=this;if(n.destroyed)return;typeof e>"u"&&(e=n.params.speed);const a=n.grid&&n.params.grid&&n.params.grid.rows>1;let l=r;if(n.params.loop)if(n.virtual&&n.params.virtual.enabled)l=l+n.virtual.slidesBefore;else{let d;if(a){const v=l*n.params.grid.rows;d=n.slides.find(b=>b.getAttribute("data-swiper-slide-index")*1===v).column}else d=n.getSlideIndexByData(l);const h=a?Math.ceil(n.slides.length/n.params.grid.rows):n.slides.length,{centeredSlides:f}=n.params;let g=n.params.slidesPerView;g==="auto"?g=n.slidesPerViewDynamic():(g=Math.ceil(parseFloat(n.params.slidesPerView,10)),f&&g%2===0&&(g=g+1));let x=h-d<g;if(f&&(x=x||d<Math.ceil(g/2)),s&&f&&n.params.slidesPerView!=="auto"&&!a&&(x=!1),x){const v=f?d<n.activeIndex?"prev":"next":d-n.activeIndex-1<n.params.slidesPerView?"next":"prev";n.loopFix({direction:v,slideTo:!0,activeSlideIndex:v==="next"?d+1:d-h+1,slideRealIndex:v==="next"?n.realIndex:void 0})}if(a){const v=l*n.params.grid.rows;l=n.slides.find(b=>b.getAttribute("data-swiper-slide-index")*1===v).column}else l=n.getSlideIndexByData(l)}return requestAnimationFrame(()=>{n.slideTo(l,e,t,s)}),n}function e8(r,e,t){e===void 0&&(e=!0);const s=this,{enabled:n,params:a,animating:l}=s;if(!n||s.destroyed)return s;typeof r>"u"&&(r=s.params.speed);let d=a.slidesPerGroup;a.slidesPerView==="auto"&&a.slidesPerGroup===1&&a.slidesPerGroupAuto&&(d=Math.max(s.slidesPerViewDynamic("current",!0),1));const h=s.activeIndex<a.slidesPerGroupSkip?1:d,f=s.virtual&&a.virtual.enabled;if(a.loop){if(l&&!f&&a.loopPreventsSliding)return!1;if(s.loopFix({direction:"next"}),s._clientLeft=s.wrapperEl.clientLeft,s.activeIndex===s.slides.length-1&&a.cssMode)return requestAnimationFrame(()=>{s.slideTo(s.activeIndex+h,r,e,t)}),!0}return a.rewind&&s.isEnd?s.slideTo(0,r,e,t):s.slideTo(s.activeIndex+h,r,e,t)}function t8(r,e,t){e===void 0&&(e=!0);const s=this,{params:n,snapGrid:a,slidesGrid:l,rtlTranslate:d,enabled:h,animating:f}=s;if(!h||s.destroyed)return s;typeof r>"u"&&(r=s.params.speed);const g=s.virtual&&n.virtual.enabled;if(n.loop){if(f&&!g&&n.loopPreventsSliding)return!1;s.loopFix({direction:"prev"}),s._clientLeft=s.wrapperEl.clientLeft}const x=d?s.translate:-s.translate;function v(E){return E<0?-Math.floor(Math.abs(E)):Math.floor(E)}const b=v(x),w=a.map(E=>v(E)),_=n.freeMode&&n.freeMode.enabled;let T=a[w.indexOf(b)-1];if(typeof T>"u"&&(n.cssMode||_)){let E;a.forEach((A,O)=>{b>=A&&(E=O)}),typeof E<"u"&&(T=_?a[E]:a[E>0?E-1:E])}let S=0;if(typeof T<"u"&&(S=l.indexOf(T),S<0&&(S=s.activeIndex-1),n.slidesPerView==="auto"&&n.slidesPerGroup===1&&n.slidesPerGroupAuto&&(S=S-s.slidesPerViewDynamic("previous",!0)+1,S=Math.max(S,0))),n.rewind&&s.isBeginning){const E=s.params.virtual&&s.params.virtual.enabled&&s.virtual?s.virtual.slides.length-1:s.slides.length-1;return s.slideTo(E,r,e,t)}else if(n.loop&&s.activeIndex===0&&n.cssMode)return requestAnimationFrame(()=>{s.slideTo(S,r,e,t)}),!0;return s.slideTo(S,r,e,t)}function s8(r,e,t){e===void 0&&(e=!0);const s=this;if(!s.destroyed)return typeof r>"u"&&(r=s.params.speed),s.slideTo(s.activeIndex,r,e,t)}function r8(r,e,t,s){e===void 0&&(e=!0),s===void 0&&(s=.5);const n=this;if(n.destroyed)return;typeof r>"u"&&(r=n.params.speed);let a=n.activeIndex;const l=Math.min(n.params.slidesPerGroupSkip,a),d=l+Math.floor((a-l)/n.params.slidesPerGroup),h=n.rtlTranslate?n.translate:-n.translate;if(h>=n.snapGrid[d]){const f=n.snapGrid[d],g=n.snapGrid[d+1];h-f>(g-f)*s&&(a+=n.params.slidesPerGroup)}else{const f=n.snapGrid[d-1],g=n.snapGrid[d];h-f<=(g-f)*s&&(a-=n.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,n.slidesGrid.length-1),n.slideTo(a,r,e,t)}function n8(){const r=this;if(r.destroyed)return;const{params:e,slidesEl:t}=r,s=e.slidesPerView==="auto"?r.slidesPerViewDynamic():e.slidesPerView;let n=r.getSlideIndexWhenGrid(r.clickedIndex),a;const l=r.isElement?"swiper-slide":`.${e.slideClass}`,d=r.grid&&r.params.grid&&r.params.grid.rows>1;if(e.loop){if(r.animating)return;a=parseInt(r.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r.slideToLoop(a):n>(d?(r.slides.length-s)/2-(r.params.grid.rows-1):r.slides.length-s)?(r.loopFix(),n=r.getSlideIndex(qr(t,`${l}[data-swiper-slide-index="${a}"]`)[0]),s4(()=>{r.slideTo(n)})):r.slideTo(n)}else r.slideTo(n)}var i8={slideTo:QM,slideToLoop:JM,slideNext:e8,slidePrev:t8,slideReset:s8,slideToClosest:r8,slideToClickedSlide:n8};function a8(r,e){const t=this,{params:s,slidesEl:n}=t;if(!s.loop||t.virtual&&t.params.virtual.enabled)return;const a=()=>{qr(n,`.${s.slideClass}, swiper-slide`).forEach((b,w)=>{b.setAttribute("data-swiper-slide-index",w)})},l=()=>{const v=qr(n,`.${s.slideBlankClass}`);v.forEach(b=>{b.remove()}),v.length>0&&(t.recalcSlides(),t.updateSlides())},d=t.grid&&s.grid&&s.grid.rows>1;s.loopAddBlankSlides&&(s.slidesPerGroup>1||d)&&l();const h=s.slidesPerGroup*(d?s.grid.rows:1),f=t.slides.length%h!==0,g=d&&t.slides.length%s.grid.rows!==0,x=v=>{for(let b=0;b<v;b+=1){const w=t.isElement?ch("swiper-slide",[s.slideBlankClass]):ch("div",[s.slideClass,s.slideBlankClass]);t.slidesEl.append(w)}};if(f){if(s.loopAddBlankSlides){const v=h-t.slides.length%h;x(v),t.recalcSlides(),t.updateSlides()}else lh("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");a()}else if(g){if(s.loopAddBlankSlides){const v=s.grid.rows-t.slides.length%s.grid.rows;x(v),t.recalcSlides(),t.updateSlides()}else lh("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");a()}else a();t.loopFix({slideRealIndex:r,direction:s.centeredSlides?void 0:"next",initial:e})}function o8(r){let{slideRealIndex:e,slideTo:t=!0,direction:s,setTranslate:n,activeSlideIndex:a,initial:l,byController:d,byMousewheel:h}=r===void 0?{}:r;const f=this;if(!f.params.loop)return;f.emit("beforeLoopFix");const{slides:g,allowSlidePrev:x,allowSlideNext:v,slidesEl:b,params:w}=f,{centeredSlides:_,initialSlide:T}=w;if(f.allowSlidePrev=!0,f.allowSlideNext=!0,f.virtual&&w.virtual.enabled){t&&(!w.centeredSlides&&f.snapIndex===0?f.slideTo(f.virtual.slides.length,0,!1,!0):w.centeredSlides&&f.snapIndex<w.slidesPerView?f.slideTo(f.virtual.slides.length+f.snapIndex,0,!1,!0):f.snapIndex===f.snapGrid.length-1&&f.slideTo(f.virtual.slidesBefore,0,!1,!0)),f.allowSlidePrev=x,f.allowSlideNext=v,f.emit("loopFix");return}let S=w.slidesPerView;S==="auto"?S=f.slidesPerViewDynamic():(S=Math.ceil(parseFloat(w.slidesPerView,10)),_&&S%2===0&&(S=S+1));const E=w.slidesPerGroupAuto?S:w.slidesPerGroup;let A=_?Math.max(E,Math.ceil(S/2)):E;A%E!==0&&(A+=E-A%E),A+=w.loopAdditionalSlides,f.loopedSlides=A;const O=f.grid&&w.grid&&w.grid.rows>1;g.length<S+A||f.params.effect==="cards"&&g.length<S+A*2?lh("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):O&&w.grid.fill==="row"&&lh("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const D=[],F=[],B=O?Math.ceil(g.length/w.grid.rows):g.length,P=l&&B-T<S&&!_;let H=P?T:f.activeIndex;typeof a>"u"?a=f.getSlideIndex(g.find(L=>L.classList.contains(w.slideActiveClass))):H=a;const N=s==="next"||!s,V=s==="prev"||!s;let G=0,ne=0;const ie=(O?g[a].column:a)+(_&&typeof n>"u"?-S/2+.5:0);if(ie<A){G=Math.max(A-ie,E);for(let L=0;L<A-ie;L+=1){const $=L-Math.floor(L/B)*B;if(O){const K=B-$-1;for(let pe=g.length-1;pe>=0;pe-=1)g[pe].column===K&&D.push(pe)}else D.push(B-$-1)}}else if(ie+S>B-A){ne=Math.max(ie-(B-A*2),E),P&&(ne=Math.max(ne,S-B+T+1));for(let L=0;L<ne;L+=1){const $=L-Math.floor(L/B)*B;O?g.forEach((K,pe)=>{K.column===$&&F.push(pe)}):F.push($)}}if(f.__preventObserver__=!0,requestAnimationFrame(()=>{f.__preventObserver__=!1}),f.params.effect==="cards"&&g.length<S+A*2&&(F.includes(a)&&F.splice(F.indexOf(a),1),D.includes(a)&&D.splice(D.indexOf(a),1)),V&&D.forEach(L=>{g[L].swiperLoopMoveDOM=!0,b.prepend(g[L]),g[L].swiperLoopMoveDOM=!1}),N&&F.forEach(L=>{g[L].swiperLoopMoveDOM=!0,b.append(g[L]),g[L].swiperLoopMoveDOM=!1}),f.recalcSlides(),w.slidesPerView==="auto"?f.updateSlides():O&&(D.length>0&&V||F.length>0&&N)&&f.slides.forEach((L,$)=>{f.grid.updateSlide($,L,f.slides)}),w.watchSlidesProgress&&f.updateSlidesOffset(),t){if(D.length>0&&V){if(typeof e>"u"){const L=f.slidesGrid[H],K=f.slidesGrid[H+G]-L;h?f.setTranslate(f.translate-K):(f.slideTo(H+Math.ceil(G),0,!1,!0),n&&(f.touchEventsData.startTranslate=f.touchEventsData.startTranslate-K,f.touchEventsData.currentTranslate=f.touchEventsData.currentTranslate-K))}else if(n){const L=O?D.length/w.grid.rows:D.length;f.slideTo(f.activeIndex+L,0,!1,!0),f.touchEventsData.currentTranslate=f.translate}}else if(F.length>0&&N)if(typeof e>"u"){const L=f.slidesGrid[H],K=f.slidesGrid[H-ne]-L;h?f.setTranslate(f.translate-K):(f.slideTo(H-ne,0,!1,!0),n&&(f.touchEventsData.startTranslate=f.touchEventsData.startTranslate-K,f.touchEventsData.currentTranslate=f.touchEventsData.currentTranslate-K))}else{const L=O?F.length/w.grid.rows:F.length;f.slideTo(f.activeIndex-L,0,!1,!0)}}if(f.allowSlidePrev=x,f.allowSlideNext=v,f.controller&&f.controller.control&&!d){const L={slideRealIndex:e,direction:s,setTranslate:n,activeSlideIndex:a,byController:!0};Array.isArray(f.controller.control)?f.controller.control.forEach($=>{!$.destroyed&&$.params.loop&&$.loopFix({...L,slideTo:$.params.slidesPerView===w.slidesPerView?t:!1})}):f.controller.control instanceof f.constructor&&f.controller.control.params.loop&&f.controller.control.loopFix({...L,slideTo:f.controller.control.params.slidesPerView===w.slidesPerView?t:!1})}f.emit("loopFix")}function l8(){const r=this,{params:e,slidesEl:t}=r;if(!e.loop||!t||r.virtual&&r.params.virtual.enabled)return;r.recalcSlides();const s=[];r.slides.forEach(n=>{const a=typeof n.swiperSlideIndex>"u"?n.getAttribute("data-swiper-slide-index")*1:n.swiperSlideIndex;s[a]=n}),r.slides.forEach(n=>{n.removeAttribute("data-swiper-slide-index")}),s.forEach(n=>{t.append(n)}),r.recalcSlides(),r.slideTo(r.realIndex,0)}var c8={loopCreate:a8,loopFix:o8,loopDestroy:l8};function u8(r){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=r?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function d8(){const r=this;r.params.watchOverflow&&r.isLocked||r.params.cssMode||(r.isElement&&(r.__preventObserver__=!0),r[r.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",r.isElement&&requestAnimationFrame(()=>{r.__preventObserver__=!1}))}var h8={setGrabCursor:u8,unsetGrabCursor:d8};function f8(r,e){e===void 0&&(e=this);function t(s){if(!s||s===da()||s===Es())return null;s.assignedSlot&&(s=s.assignedSlot);const n=s.closest(r);return!n&&!s.getRootNode?null:n||t(s.getRootNode().host)}return t(e)}function Ib(r,e,t){const s=Es(),{params:n}=r,a=n.edgeSwipeDetection,l=n.edgeSwipeThreshold;return a&&(t<=l||t>=s.innerWidth-l)?a==="prevent"?(e.preventDefault(),!0):!1:!0}function m8(r){const e=this,t=da();let s=r;s.originalEvent&&(s=s.originalEvent);const n=e.touchEventsData;if(s.type==="pointerdown"){if(n.pointerId!==null&&n.pointerId!==s.pointerId)return;n.pointerId=s.pointerId}else s.type==="touchstart"&&s.targetTouches.length===1&&(n.touchId=s.targetTouches[0].identifier);if(s.type==="touchstart"){Ib(e,s,s.targetTouches[0].pageX);return}const{params:a,touches:l,enabled:d}=e;if(!d||!a.simulateTouch&&s.pointerType==="mouse"||e.animating&&a.preventInteractionOnTransition)return;!e.animating&&a.cssMode&&a.loop&&e.loopFix();let h=s.target;if(a.touchEventsTarget==="wrapper"&&!wM(h,e.wrapperEl)||"which"in s&&s.which===3||"button"in s&&s.button>0||n.isTouched&&n.isMoved)return;const f=!!a.noSwipingClass&&a.noSwipingClass!=="",g=s.composedPath?s.composedPath():s.path;f&&s.target&&s.target.shadowRoot&&g&&(h=g[0]);const x=a.noSwipingSelector?a.noSwipingSelector:`.${a.noSwipingClass}`,v=!!(s.target&&s.target.shadowRoot);if(a.noSwiping&&(v?f8(x,h):h.closest(x))){e.allowClick=!0;return}if(a.swipeHandler&&!h.closest(a.swipeHandler))return;l.currentX=s.pageX,l.currentY=s.pageY;const b=l.currentX,w=l.currentY;if(!Ib(e,s,b))return;Object.assign(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),l.startX=b,l.startY=w,n.touchStartTime=oh(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,a.threshold>0&&(n.allowThresholdMove=!1);let _=!0;h.matches(n.focusableElements)&&(_=!1,h.nodeName==="SELECT"&&(n.isTouched=!1)),t.activeElement&&t.activeElement.matches(n.focusableElements)&&t.activeElement!==h&&(s.pointerType==="mouse"||s.pointerType!=="mouse"&&!h.matches(n.focusableElements))&&t.activeElement.blur();const T=_&&e.allowTouchMove&&a.touchStartPreventDefault;(a.touchStartForcePreventDefault||T)&&!h.isContentEditable&&s.preventDefault(),a.freeMode&&a.freeMode.enabled&&e.freeMode&&e.animating&&!a.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",s)}function g8(r){const e=da(),t=this,s=t.touchEventsData,{params:n,touches:a,rtlTranslate:l,enabled:d}=t;if(!d||!n.simulateTouch&&r.pointerType==="mouse")return;let h=r;if(h.originalEvent&&(h=h.originalEvent),h.type==="pointermove"&&(s.touchId!==null||h.pointerId!==s.pointerId))return;let f;if(h.type==="touchmove"){if(f=[...h.changedTouches].find(D=>D.identifier===s.touchId),!f||f.identifier!==s.touchId)return}else f=h;if(!s.isTouched){s.startMoving&&s.isScrolling&&t.emit("touchMoveOpposite",h);return}const g=f.pageX,x=f.pageY;if(h.preventedByNestedSwiper){a.startX=g,a.startY=x;return}if(!t.allowTouchMove){h.target.matches(s.focusableElements)||(t.allowClick=!1),s.isTouched&&(Object.assign(a,{startX:g,startY:x,currentX:g,currentY:x}),s.touchStartTime=oh());return}if(n.touchReleaseOnEdges&&!n.loop)if(t.isVertical()){if(x<a.startY&&t.translate<=t.maxTranslate()||x>a.startY&&t.translate>=t.minTranslate()){s.isTouched=!1,s.isMoved=!1;return}}else{if(l&&(g>a.startX&&-t.translate<=t.maxTranslate()||g<a.startX&&-t.translate>=t.minTranslate()))return;if(!l&&(g<a.startX&&t.translate<=t.maxTranslate()||g>a.startX&&t.translate>=t.minTranslate()))return}if(e.activeElement&&e.activeElement.matches(s.focusableElements)&&e.activeElement!==h.target&&h.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&h.target===e.activeElement&&h.target.matches(s.focusableElements)){s.isMoved=!0,t.allowClick=!1;return}s.allowTouchCallbacks&&t.emit("touchMove",h),a.previousX=a.currentX,a.previousY=a.currentY,a.currentX=g,a.currentY=x;const v=a.currentX-a.startX,b=a.currentY-a.startY;if(t.params.threshold&&Math.sqrt(v**2+b**2)<t.params.threshold)return;if(typeof s.isScrolling>"u"){let D;t.isHorizontal()&&a.currentY===a.startY||t.isVertical()&&a.currentX===a.startX?s.isScrolling=!1:v*v+b*b>=25&&(D=Math.atan2(Math.abs(b),Math.abs(v))*180/Math.PI,s.isScrolling=t.isHorizontal()?D>n.touchAngle:90-D>n.touchAngle)}if(s.isScrolling&&t.emit("touchMoveOpposite",h),typeof s.startMoving>"u"&&(a.currentX!==a.startX||a.currentY!==a.startY)&&(s.startMoving=!0),s.isScrolling||h.type==="touchmove"&&s.preventTouchMoveFromPointerMove){s.isTouched=!1;return}if(!s.startMoving)return;t.allowClick=!1,!n.cssMode&&h.cancelable&&h.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&h.stopPropagation();let w=t.isHorizontal()?v:b,_=t.isHorizontal()?a.currentX-a.previousX:a.currentY-a.previousY;n.oneWayMovement&&(w=Math.abs(w)*(l?1:-1),_=Math.abs(_)*(l?1:-1)),a.diff=w,w*=n.touchRatio,l&&(w=-w,_=-_);const T=t.touchesDirection;t.swipeDirection=w>0?"prev":"next",t.touchesDirection=_>0?"prev":"next";const S=t.params.loop&&!n.cssMode,E=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!s.isMoved){if(S&&E&&t.loopFix({direction:t.swipeDirection}),s.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const D=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(D)}s.allowMomentumBounce=!1,n.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",h)}if(new Date().getTime(),n._loopSwapReset!==!1&&s.isMoved&&s.allowThresholdMove&&T!==t.touchesDirection&&S&&E&&Math.abs(w)>=1){Object.assign(a,{startX:g,startY:x,currentX:g,currentY:x,startTranslate:s.currentTranslate}),s.loopSwapReset=!0,s.startTranslate=s.currentTranslate;return}t.emit("sliderMove",h),s.isMoved=!0,s.currentTranslate=w+s.startTranslate;let A=!0,O=n.resistanceRatio;if(n.touchReleaseOnEdges&&(O=0),w>0?(S&&E&&s.allowThresholdMove&&s.currentTranslate>(n.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(n.slidesPerView!=="auto"&&t.slides.length-n.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),s.currentTranslate>t.minTranslate()&&(A=!1,n.resistance&&(s.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+s.startTranslate+w)**O))):w<0&&(S&&E&&s.allowThresholdMove&&s.currentTranslate<(n.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(n.slidesPerView!=="auto"&&t.slides.length-n.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(n.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(n.slidesPerView,10)))}),s.currentTranslate<t.maxTranslate()&&(A=!1,n.resistance&&(s.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-s.startTranslate-w)**O))),A&&(h.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&s.currentTranslate<s.startTranslate&&(s.currentTranslate=s.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&s.currentTranslate>s.startTranslate&&(s.currentTranslate=s.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(s.currentTranslate=s.startTranslate),n.threshold>0)if(Math.abs(w)>n.threshold||s.allowThresholdMove){if(!s.allowThresholdMove){s.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,s.currentTranslate=s.startTranslate,a.diff=t.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY;return}}else{s.currentTranslate=s.startTranslate;return}!n.followFinger||n.cssMode||((n.freeMode&&n.freeMode.enabled&&t.freeMode||n.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),n.freeMode&&n.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(s.currentTranslate),t.setTranslate(s.currentTranslate))}function p8(r){const e=this,t=e.touchEventsData;let s=r;s.originalEvent&&(s=s.originalEvent);let n;if(s.type==="touchend"||s.type==="touchcancel"){if(n=[...s.changedTouches].find(D=>D.identifier===t.touchId),!n||n.identifier!==t.touchId)return}else{if(t.touchId!==null||s.pointerId!==t.pointerId)return;n=s}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(s.type)&&!(["pointercancel","contextmenu"].includes(s.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:l,touches:d,rtlTranslate:h,slidesGrid:f,enabled:g}=e;if(!g||!l.simulateTouch&&s.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",s),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&l.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}l.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const x=oh(),v=x-t.touchStartTime;if(e.allowClick){const D=s.path||s.composedPath&&s.composedPath();e.updateClickedSlide(D&&D[0]||s.target,D),e.emit("tap click",s),v<300&&x-t.lastClickTime<300&&e.emit("doubleTap doubleClick",s)}if(t.lastClickTime=oh(),s4(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||d.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let b;if(l.followFinger?b=h?e.translate:-e.translate:b=-t.currentTranslate,l.cssMode)return;if(l.freeMode&&l.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:b});return}const w=b>=-e.maxTranslate()&&!e.params.loop;let _=0,T=e.slidesSizesGrid[0];for(let D=0;D<f.length;D+=D<l.slidesPerGroupSkip?1:l.slidesPerGroup){const F=D<l.slidesPerGroupSkip-1?1:l.slidesPerGroup;typeof f[D+F]<"u"?(w||b>=f[D]&&b<f[D+F])&&(_=D,T=f[D+F]-f[D]):(w||b>=f[D])&&(_=D,T=f[f.length-1]-f[f.length-2])}let S=null,E=null;l.rewind&&(e.isBeginning?E=l.virtual&&l.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(S=0));const A=(b-f[_])/T,O=_<l.slidesPerGroupSkip-1?1:l.slidesPerGroup;if(v>l.longSwipesMs){if(!l.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(A>=l.longSwipesRatio?e.slideTo(l.rewind&&e.isEnd?S:_+O):e.slideTo(_)),e.swipeDirection==="prev"&&(A>1-l.longSwipesRatio?e.slideTo(_+O):E!==null&&A<0&&Math.abs(A)>l.longSwipesRatio?e.slideTo(E):e.slideTo(_))}else{if(!l.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(s.target===e.navigation.nextEl||s.target===e.navigation.prevEl)?s.target===e.navigation.nextEl?e.slideTo(_+O):e.slideTo(_):(e.swipeDirection==="next"&&e.slideTo(S!==null?S:_+O),e.swipeDirection==="prev"&&e.slideTo(E!==null?E:_))}}function Hb(){const r=this,{params:e,el:t}=r;if(t&&t.offsetWidth===0)return;e.breakpoints&&r.setBreakpoint();const{allowSlideNext:s,allowSlidePrev:n,snapGrid:a}=r,l=r.virtual&&r.params.virtual.enabled;r.allowSlideNext=!0,r.allowSlidePrev=!0,r.updateSize(),r.updateSlides(),r.updateSlidesClasses();const d=l&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&r.isEnd&&!r.isBeginning&&!r.params.centeredSlides&&!d?r.slideTo(r.slides.length-1,0,!1,!0):r.params.loop&&!l?r.slideToLoop(r.realIndex,0,!1,!0):r.slideTo(r.activeIndex,0,!1,!0),r.autoplay&&r.autoplay.running&&r.autoplay.paused&&(clearTimeout(r.autoplay.resizeTimeout),r.autoplay.resizeTimeout=setTimeout(()=>{r.autoplay&&r.autoplay.running&&r.autoplay.paused&&r.autoplay.resume()},500)),r.allowSlidePrev=n,r.allowSlideNext=s,r.params.watchOverflow&&a!==r.snapGrid&&r.checkOverflow()}function x8(r){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&r.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(r.stopPropagation(),r.stopImmediatePropagation())))}function v8(){const r=this,{wrapperEl:e,rtlTranslate:t,enabled:s}=r;if(!s)return;r.previousTranslate=r.translate,r.isHorizontal()?r.translate=-e.scrollLeft:r.translate=-e.scrollTop,r.translate===0&&(r.translate=0),r.updateActiveIndex(),r.updateSlidesClasses();let n;const a=r.maxTranslate()-r.minTranslate();a===0?n=0:n=(r.translate-r.minTranslate())/a,n!==r.progress&&r.updateProgress(t?-r.translate:r.translate),r.emit("setTranslate",r.translate,!1)}function y8(r){const e=this;Wd(e,r.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function b8(){const r=this;r.documentTouchHandlerProceeded||(r.documentTouchHandlerProceeded=!0,r.params.touchReleaseOnEdges&&(r.el.style.touchAction="auto"))}const l4=(r,e)=>{const t=da(),{params:s,el:n,wrapperEl:a,device:l}=r,d=!!s.nested,h=e==="on"?"addEventListener":"removeEventListener",f=e;!n||typeof n=="string"||(t[h]("touchstart",r.onDocumentTouchStart,{passive:!1,capture:d}),n[h]("touchstart",r.onTouchStart,{passive:!1}),n[h]("pointerdown",r.onTouchStart,{passive:!1}),t[h]("touchmove",r.onTouchMove,{passive:!1,capture:d}),t[h]("pointermove",r.onTouchMove,{passive:!1,capture:d}),t[h]("touchend",r.onTouchEnd,{passive:!0}),t[h]("pointerup",r.onTouchEnd,{passive:!0}),t[h]("pointercancel",r.onTouchEnd,{passive:!0}),t[h]("touchcancel",r.onTouchEnd,{passive:!0}),t[h]("pointerout",r.onTouchEnd,{passive:!0}),t[h]("pointerleave",r.onTouchEnd,{passive:!0}),t[h]("contextmenu",r.onTouchEnd,{passive:!0}),(s.preventClicks||s.preventClicksPropagation)&&n[h]("click",r.onClick,!0),s.cssMode&&a[h]("scroll",r.onScroll),s.updateOnWindowResize?r[f](l.ios||l.android?"resize orientationchange observerUpdate":"resize observerUpdate",Hb,!0):r[f]("observerUpdate",Hb,!0),n[h]("load",r.onLoad,{capture:!0}))};function w8(){const r=this,{params:e}=r;r.onTouchStart=m8.bind(r),r.onTouchMove=g8.bind(r),r.onTouchEnd=p8.bind(r),r.onDocumentTouchStart=b8.bind(r),e.cssMode&&(r.onScroll=v8.bind(r)),r.onClick=x8.bind(r),r.onLoad=y8.bind(r),l4(r,"on")}function _8(){l4(this,"off")}var S8={attachEvents:w8,detachEvents:_8};const $b=(r,e)=>r.grid&&e.grid&&e.grid.rows>1;function j8(){const r=this,{realIndex:e,initialized:t,params:s,el:n}=r,a=s.breakpoints;if(!a||a&&Object.keys(a).length===0)return;const l=da(),d=s.breakpointsBase==="window"||!s.breakpointsBase?s.breakpointsBase:"container",h=["window","container"].includes(s.breakpointsBase)||!s.breakpointsBase?r.el:l.querySelector(s.breakpointsBase),f=r.getBreakpoint(a,d,h);if(!f||r.currentBreakpoint===f)return;const x=(f in a?a[f]:void 0)||r.originalParams,v=$b(r,s),b=$b(r,x),w=r.params.grabCursor,_=x.grabCursor,T=s.enabled;v&&!b?(n.classList.remove(`${s.containerModifierClass}grid`,`${s.containerModifierClass}grid-column`),r.emitContainerClasses()):!v&&b&&(n.classList.add(`${s.containerModifierClass}grid`),(x.grid.fill&&x.grid.fill==="column"||!x.grid.fill&&s.grid.fill==="column")&&n.classList.add(`${s.containerModifierClass}grid-column`),r.emitContainerClasses()),w&&!_?r.unsetGrabCursor():!w&&_&&r.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(F=>{if(typeof x[F]>"u")return;const B=s[F]&&s[F].enabled,P=x[F]&&x[F].enabled;B&&!P&&r[F].disable(),!B&&P&&r[F].enable()});const S=x.direction&&x.direction!==s.direction,E=s.loop&&(x.slidesPerView!==s.slidesPerView||S),A=s.loop;S&&t&&r.changeDirection(),Zs(r.params,x);const O=r.params.enabled,D=r.params.loop;Object.assign(r,{allowTouchMove:r.params.allowTouchMove,allowSlideNext:r.params.allowSlideNext,allowSlidePrev:r.params.allowSlidePrev}),T&&!O?r.disable():!T&&O&&r.enable(),r.currentBreakpoint=f,r.emit("_beforeBreakpoint",x),t&&(E?(r.loopDestroy(),r.loopCreate(e),r.updateSlides()):!A&&D?(r.loopCreate(e),r.updateSlides()):A&&!D&&r.loopDestroy()),r.emit("breakpoint",x)}function C8(r,e,t){if(e===void 0&&(e="window"),!r||e==="container"&&!t)return;let s=!1;const n=Es(),a=e==="window"?n.innerHeight:t.clientHeight,l=Object.keys(r).map(d=>{if(typeof d=="string"&&d.indexOf("@")===0){const h=parseFloat(d.substr(1));return{value:a*h,point:d}}return{value:d,point:d}});l.sort((d,h)=>parseInt(d.value,10)-parseInt(h.value,10));for(let d=0;d<l.length;d+=1){const{point:h,value:f}=l[d];e==="window"?n.matchMedia(`(min-width: ${f}px)`).matches&&(s=h):f<=t.clientWidth&&(s=h)}return s||"max"}var T8={setBreakpoint:j8,getBreakpoint:C8};function k8(r,e){const t=[];return r.forEach(s=>{typeof s=="object"?Object.keys(s).forEach(n=>{s[n]&&t.push(e+n)}):typeof s=="string"&&t.push(e+s)}),t}function A8(){const r=this,{classNames:e,params:t,rtl:s,el:n,device:a}=r,l=k8(["initialized",t.direction,{"free-mode":r.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:s},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:a.android},{ios:a.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...l),n.classList.add(...e),r.emitContainerClasses()}function E8(){const r=this,{el:e,classNames:t}=r;!e||typeof e=="string"||(e.classList.remove(...t),r.emitContainerClasses())}var N8={addClasses:A8,removeClasses:E8};function D8(){const r=this,{isLocked:e,params:t}=r,{slidesOffsetBefore:s}=t;if(s){const n=r.slides.length-1,a=r.slidesGrid[n]+r.slidesSizesGrid[n]+s*2;r.isLocked=r.size>a}else r.isLocked=r.snapGrid.length===1;t.allowSlideNext===!0&&(r.allowSlideNext=!r.isLocked),t.allowSlidePrev===!0&&(r.allowSlidePrev=!r.isLocked),e&&e!==r.isLocked&&(r.isEnd=!1),e!==r.isLocked&&r.emit(r.isLocked?"lock":"unlock")}var O8={checkOverflow:D8},wp={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function M8(r,e){return function(s){s===void 0&&(s={});const n=Object.keys(s)[0],a=s[n];if(typeof a!="object"||a===null){Zs(e,s);return}if(r[n]===!0&&(r[n]={enabled:!0}),n==="navigation"&&r[n]&&r[n].enabled&&!r[n].prevEl&&!r[n].nextEl&&(r[n].auto=!0),["pagination","scrollbar"].indexOf(n)>=0&&r[n]&&r[n].enabled&&!r[n].el&&(r[n].auto=!0),!(n in r&&"enabled"in a)){Zs(e,s);return}typeof r[n]=="object"&&!("enabled"in r[n])&&(r[n].enabled=!0),r[n]||(r[n]={enabled:!1}),Zs(e,s)}}const Cg={eventsEmitter:NM,update:VM,translate:YM,transition:ZM,slide:i8,loop:c8,grabCursor:h8,events:S8,breakpoints:T8,checkOverflow:O8,classes:N8},Tg={};let M0=class bn{constructor(){let e,t;for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];n.length===1&&n[0].constructor&&Object.prototype.toString.call(n[0]).slice(8,-1)==="Object"?t=n[0]:[e,t]=n,t||(t={}),t=Zs({},t),e&&!t.el&&(t.el=e);const l=da();if(t.el&&typeof t.el=="string"&&l.querySelectorAll(t.el).length>1){const g=[];return l.querySelectorAll(t.el).forEach(x=>{const v=Zs({},t,{el:x});g.push(new bn(v))}),g}const d=this;d.__swiper__=!0,d.support=n4(),d.device=i4({userAgent:t.userAgent}),d.browser=a4(),d.eventsListeners={},d.eventsAnyListeners=[],d.modules=[...d.__modules__],t.modules&&Array.isArray(t.modules)&&d.modules.push(...t.modules);const h={};d.modules.forEach(g=>{g({params:t,swiper:d,extendParams:M8(t,h),on:d.on.bind(d),once:d.once.bind(d),off:d.off.bind(d),emit:d.emit.bind(d)})});const f=Zs({},wp,h);return d.params=Zs({},f,Tg,t),d.originalParams=Zs({},d.params),d.passedParams=Zs({},t),d.params&&d.params.on&&Object.keys(d.params.on).forEach(g=>{d.on(g,d.params.on[g])}),d.params&&d.params.onAny&&d.onAny(d.params.onAny),Object.assign(d,{enabled:d.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return d.params.direction==="horizontal"},isVertical(){return d.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:d.params.allowSlideNext,allowSlidePrev:d.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:d.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:d.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),d.emit("_swiper"),d.params.init&&d.init(),d}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:s}=this,n=qr(t,`.${s.slideClass}, swiper-slide`),a=Bb(n[0]);return Bb(e)-a}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>t.getAttribute("data-swiper-slide-index")*1===e))}getSlideIndexWhenGrid(e){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?e=Math.floor(e/this.params.grid.rows):this.params.grid.fill==="row"&&(e=e%Math.ceil(this.slides.length/this.params.grid.rows))),e}recalcSlides(){const e=this,{slidesEl:t,params:s}=e;e.slides=qr(t,`.${s.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const s=this;e=Math.min(Math.max(e,0),1);const n=s.minTranslate(),l=(s.maxTranslate()-n)*e+n;s.translateTo(l,typeof t>"u"?0:t),s.updateActiveIndex(),s.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(s=>s.indexOf("swiper")===0||s.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(s=>s.indexOf("swiper-slide")===0||s.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(s=>{const n=e.getSlideClasses(s);t.push({slideEl:s,classNames:n}),e.emit("_slideClass",s,n)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const s=this,{params:n,slides:a,slidesGrid:l,slidesSizesGrid:d,size:h,activeIndex:f}=s;let g=1;if(typeof n.slidesPerView=="number")return n.slidesPerView;if(n.centeredSlides){let x=a[f]?Math.ceil(a[f].swiperSlideSize):0,v;for(let b=f+1;b<a.length;b+=1)a[b]&&!v&&(x+=Math.ceil(a[b].swiperSlideSize),g+=1,x>h&&(v=!0));for(let b=f-1;b>=0;b-=1)a[b]&&!v&&(x+=a[b].swiperSlideSize,g+=1,x>h&&(v=!0))}else if(e==="current")for(let x=f+1;x<a.length;x+=1)(t?l[x]+d[x]-l[f]<h:l[x]-l[f]<h)&&(g+=1);else for(let x=f-1;x>=0;x-=1)l[f]-l[x]<h&&(g+=1);return g}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:s}=e;s.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(l=>{l.complete&&Wd(e,l)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function n(){const l=e.rtlTranslate?e.translate*-1:e.translate,d=Math.min(Math.max(l,e.maxTranslate()),e.minTranslate());e.setTranslate(d),e.updateActiveIndex(),e.updateSlidesClasses()}let a;if(s.freeMode&&s.freeMode.enabled&&!s.cssMode)n(),s.autoHeight&&e.updateAutoHeight();else{if((s.slidesPerView==="auto"||s.slidesPerView>1)&&e.isEnd&&!s.centeredSlides){const l=e.virtual&&s.virtual.enabled?e.virtual.slides:e.slides;a=e.slideTo(l.length-1,0,!1,!0)}else a=e.slideTo(e.activeIndex,0,!1,!0);a||n()}s.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const s=this,n=s.params.direction;return e||(e=n==="horizontal"?"vertical":"horizontal"),e===n||e!=="horizontal"&&e!=="vertical"||(s.el.classList.remove(`${s.params.containerModifierClass}${n}`),s.el.classList.add(`${s.params.containerModifierClass}${e}`),s.emitContainerClasses(),s.params.direction=e,s.slides.forEach(a=>{e==="vertical"?a.style.width="":a.style.height=""}),s.emit("changeDirection"),t&&s.update()),s}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let s=e||t.params.el;if(typeof s=="string"&&(s=document.querySelector(s)),!s)return!1;s.swiper=t,s.parentNode&&s.parentNode.host&&s.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const n=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let l=s&&s.shadowRoot&&s.shadowRoot.querySelector?s.shadowRoot.querySelector(n()):qr(s,n())[0];return!l&&t.params.createElements&&(l=ch("div",t.params.wrapperClass),s.append(l),qr(s,`.${t.params.slideClass}`).forEach(d=>{l.append(d)})),Object.assign(t,{el:s,wrapperEl:l,slidesEl:t.isElement&&!s.parentNode.host.slideSlots?s.parentNode.host:l,hostEl:t.isElement?s.parentNode.host:s,mounted:!0,rtl:s.dir.toLowerCase()==="rtl"||xi(s,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(s.dir.toLowerCase()==="rtl"||xi(s,"direction")==="rtl"),wrongRTL:xi(l,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const n=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&n.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),n.forEach(a=>{a.complete?Wd(t,a):a.addEventListener("load",l=>{Wd(t,l.target)})}),bp(t),t.initialized=!0,bp(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const s=this,{params:n,el:a,wrapperEl:l,slides:d}=s;return typeof s.params>"u"||s.destroyed||(s.emit("beforeDestroy"),s.initialized=!1,s.detachEvents(),n.loop&&s.loopDestroy(),t&&(s.removeClasses(),a&&typeof a!="string"&&a.removeAttribute("style"),l&&l.removeAttribute("style"),d&&d.length&&d.forEach(h=>{h.classList.remove(n.slideVisibleClass,n.slideFullyVisibleClass,n.slideActiveClass,n.slideNextClass,n.slidePrevClass),h.removeAttribute("style"),h.removeAttribute("data-swiper-slide-index")})),s.emit("destroy"),Object.keys(s.eventsListeners).forEach(h=>{s.off(h)}),e!==!1&&(s.el&&typeof s.el!="string"&&(s.el.swiper=null),pM(s)),s.destroyed=!0),null}static extendDefaults(e){Zs(Tg,e)}static get extendedDefaults(){return Tg}static get defaults(){return wp}static installModule(e){bn.prototype.__modules__||(bn.prototype.__modules__=[]);const t=bn.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>bn.installModule(t)),bn):(bn.installModule(e),bn)}};Object.keys(Cg).forEach(r=>{Object.keys(Cg[r]).forEach(e=>{M0.prototype[e]=Cg[r][e]})});M0.use([AM,EM]);const c4=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function oa(r){return typeof r=="object"&&r!==null&&r.constructor&&Object.prototype.toString.call(r).slice(8,-1)==="Object"&&!r.__swiper__}function wo(r,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(s=>t.indexOf(s)<0).forEach(s=>{typeof r[s]>"u"?r[s]=e[s]:oa(e[s])&&oa(r[s])&&Object.keys(e[s]).length>0?e[s].__swiper__?r[s]=e[s]:wo(r[s],e[s]):r[s]=e[s]})}function u4(r){return r===void 0&&(r={}),r.navigation&&typeof r.navigation.nextEl>"u"&&typeof r.navigation.prevEl>"u"}function d4(r){return r===void 0&&(r={}),r.pagination&&typeof r.pagination.el>"u"}function h4(r){return r===void 0&&(r={}),r.scrollbar&&typeof r.scrollbar.el>"u"}function f4(r){r===void 0&&(r="");const e=r.split(" ").map(s=>s.trim()).filter(s=>!!s),t=[];return e.forEach(s=>{t.indexOf(s)<0&&t.push(s)}),t.join(" ")}function L8(r){return r===void 0&&(r=""),r?r.includes("swiper-wrapper")?r:`swiper-wrapper ${r}`:"swiper-wrapper"}function R8(r){let{swiper:e,slides:t,passedParams:s,changedParams:n,nextEl:a,prevEl:l,scrollbarEl:d,paginationEl:h}=r;const f=n.filter(H=>H!=="children"&&H!=="direction"&&H!=="wrapperClass"),{params:g,pagination:x,navigation:v,scrollbar:b,virtual:w,thumbs:_}=e;let T,S,E,A,O,D,F,B;n.includes("thumbs")&&s.thumbs&&s.thumbs.swiper&&!s.thumbs.swiper.destroyed&&g.thumbs&&(!g.thumbs.swiper||g.thumbs.swiper.destroyed)&&(T=!0),n.includes("controller")&&s.controller&&s.controller.control&&g.controller&&!g.controller.control&&(S=!0),n.includes("pagination")&&s.pagination&&(s.pagination.el||h)&&(g.pagination||g.pagination===!1)&&x&&!x.el&&(E=!0),n.includes("scrollbar")&&s.scrollbar&&(s.scrollbar.el||d)&&(g.scrollbar||g.scrollbar===!1)&&b&&!b.el&&(A=!0),n.includes("navigation")&&s.navigation&&(s.navigation.prevEl||l)&&(s.navigation.nextEl||a)&&(g.navigation||g.navigation===!1)&&v&&!v.prevEl&&!v.nextEl&&(O=!0);const P=H=>{e[H]&&(e[H].destroy(),H==="navigation"?(e.isElement&&(e[H].prevEl.remove(),e[H].nextEl.remove()),g[H].prevEl=void 0,g[H].nextEl=void 0,e[H].prevEl=void 0,e[H].nextEl=void 0):(e.isElement&&e[H].el.remove(),g[H].el=void 0,e[H].el=void 0))};n.includes("loop")&&e.isElement&&(g.loop&&!s.loop?D=!0:!g.loop&&s.loop?F=!0:B=!0),f.forEach(H=>{if(oa(g[H])&&oa(s[H]))Object.assign(g[H],s[H]),(H==="navigation"||H==="pagination"||H==="scrollbar")&&"enabled"in s[H]&&!s[H].enabled&&P(H);else{const N=s[H];(N===!0||N===!1)&&(H==="navigation"||H==="pagination"||H==="scrollbar")?N===!1&&P(H):g[H]=s[H]}}),f.includes("controller")&&!S&&e.controller&&e.controller.control&&g.controller&&g.controller.control&&(e.controller.control=g.controller.control),n.includes("children")&&t&&w&&g.virtual.enabled?(w.slides=t,w.update(!0)):n.includes("virtual")&&w&&g.virtual.enabled&&(t&&(w.slides=t),w.update(!0)),n.includes("children")&&t&&g.loop&&(B=!0),T&&_.init()&&_.update(!0),S&&(e.controller.control=g.controller.control),E&&(e.isElement&&(!h||typeof h=="string")&&(h=document.createElement("div"),h.classList.add("swiper-pagination"),h.part.add("pagination"),e.el.appendChild(h)),h&&(g.pagination.el=h),x.init(),x.render(),x.update()),A&&(e.isElement&&(!d||typeof d=="string")&&(d=document.createElement("div"),d.classList.add("swiper-scrollbar"),d.part.add("scrollbar"),e.el.appendChild(d)),d&&(g.scrollbar.el=d),b.init(),b.updateSize(),b.setTranslate()),O&&(e.isElement&&((!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-next"),Ub(a,e.hostEl.constructor.nextButtonSvg),a.part.add("button-next"),e.el.appendChild(a)),(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-button-prev"),Ub(l,e.hostEl.constructor.prevButtonSvg),l.part.add("button-prev"),e.el.appendChild(l))),a&&(g.navigation.nextEl=a),l&&(g.navigation.prevEl=l),v.init(),v.update()),n.includes("allowSlideNext")&&(e.allowSlideNext=s.allowSlideNext),n.includes("allowSlidePrev")&&(e.allowSlidePrev=s.allowSlidePrev),n.includes("direction")&&e.changeDirection(s.direction,!1),(D||B)&&e.loopDestroy(),(F||B)&&e.loopCreate(),e.update()}function P8(r,e){r===void 0&&(r={}),e===void 0&&(e=!0);const t={on:{}},s={},n={};wo(t,wp),t._emitClasses=!0,t.init=!1;const a={},l=c4.map(h=>h.replace(/_/,"")),d=Object.assign({},r);return Object.keys(d).forEach(h=>{typeof r[h]>"u"||(l.indexOf(h)>=0?oa(r[h])?(t[h]={},n[h]={},wo(t[h],r[h]),wo(n[h],r[h])):(t[h]=r[h],n[h]=r[h]):h.search(/on[A-Z]/)===0&&typeof r[h]=="function"?e?s[`${h[2].toLowerCase()}${h.substr(3)}`]=r[h]:t.on[`${h[2].toLowerCase()}${h.substr(3)}`]=r[h]:a[h]=r[h])}),["navigation","pagination","scrollbar"].forEach(h=>{t[h]===!0&&(t[h]={}),t[h]===!1&&delete t[h]}),{params:t,passedParams:n,rest:a,events:s}}function F8(r,e){let{el:t,nextEl:s,prevEl:n,paginationEl:a,scrollbarEl:l,swiper:d}=r;u4(e)&&s&&n&&(d.params.navigation.nextEl=s,d.originalParams.navigation.nextEl=s,d.params.navigation.prevEl=n,d.originalParams.navigation.prevEl=n),d4(e)&&a&&(d.params.pagination.el=a,d.originalParams.pagination.el=a),h4(e)&&l&&(d.params.scrollbar.el=l,d.originalParams.scrollbar.el=l),d.init(t)}function B8(r,e,t,s,n){const a=[];if(!e)return a;const l=h=>{a.indexOf(h)<0&&a.push(h)};if(t&&s){const h=s.map(n),f=t.map(n);h.join("")!==f.join("")&&l("children"),s.length!==t.length&&l("children")}return c4.filter(h=>h[0]==="_").map(h=>h.replace(/_/,"")).forEach(h=>{if(h in r&&h in e)if(oa(r[h])&&oa(e[h])){const f=Object.keys(r[h]),g=Object.keys(e[h]);f.length!==g.length?l(h):(f.forEach(x=>{r[h][x]!==e[h][x]&&l(h)}),g.forEach(x=>{r[h][x]!==e[h][x]&&l(h)}))}else r[h]!==e[h]&&l(h)}),a}const z8=r=>{!r||r.destroyed||!r.params.virtual||r.params.virtual&&!r.params.virtual.enabled||(r.updateSlides(),r.updateProgress(),r.updateSlidesClasses(),r.emit("_virtualUpdated"),r.parallax&&r.params.parallax&&r.params.parallax.enabled&&r.parallax.setTranslate())};function uh(){return uh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},uh.apply(this,arguments)}function m4(r){return r.type&&r.type.displayName&&r.type.displayName.includes("SwiperSlide")}function g4(r){const e=[];return Xt.Children.toArray(r).forEach(t=>{m4(t)?e.push(t):t.props&&t.props.children&&g4(t.props.children).forEach(s=>e.push(s))}),e}function U8(r){const e=[],t={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Xt.Children.toArray(r).forEach(s=>{if(m4(s))e.push(s);else if(s.props&&s.props.slot&&t[s.props.slot])t[s.props.slot].push(s);else if(s.props&&s.props.children){const n=g4(s.props.children);n.length>0?n.forEach(a=>e.push(a)):t["container-end"].push(s)}else t["container-end"].push(s)}),{slides:e,slots:t}}function V8(r,e,t){if(!t)return null;const s=g=>{let x=g;return g<0?x=e.length+g:x>=e.length&&(x=x-e.length),x},n=r.isHorizontal()?{[r.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:a,to:l}=t,d=r.params.loop?-e.length:0,h=r.params.loop?e.length*2:e.length,f=[];for(let g=d;g<h;g+=1)g>=a&&g<=l&&f.push(e[s(g)]);return f.map((g,x)=>Xt.cloneElement(g,{swiper:r,style:n,key:g.props.virtualIndex||g.key||`slide-${x}`}))}function uc(r,e){return typeof window>"u"?C.useEffect(r,e):C.useLayoutEffect(r,e)}const Gb=C.createContext(null),I8=C.createContext(null),p4=C.forwardRef(function(r,e){let{className:t,tag:s="div",wrapperTag:n="div",children:a,onSwiper:l,...d}=r===void 0?{}:r,h=!1;const[f,g]=C.useState("swiper"),[x,v]=C.useState(null),[b,w]=C.useState(!1),_=C.useRef(!1),T=C.useRef(null),S=C.useRef(null),E=C.useRef(null),A=C.useRef(null),O=C.useRef(null),D=C.useRef(null),F=C.useRef(null),B=C.useRef(null),{params:P,passedParams:H,rest:N,events:V}=P8(d),{slides:G,slots:ne}=U8(a),Q=()=>{w(!b)};Object.assign(P.on,{_containerClasses(pe,M){g(M)}});const ie=()=>{Object.assign(P.on,V),h=!0;const pe={...P};if(delete pe.wrapperClass,S.current=new M0(pe),S.current.virtual&&S.current.params.virtual.enabled){S.current.virtual.slides=G;const M={cache:!1,slides:G,renderExternal:v,renderExternalUpdate:!1};wo(S.current.params.virtual,M),wo(S.current.originalParams.virtual,M)}};T.current||ie(),S.current&&S.current.on("_beforeBreakpoint",Q);const L=()=>{h||!V||!S.current||Object.keys(V).forEach(pe=>{S.current.on(pe,V[pe])})},$=()=>{!V||!S.current||Object.keys(V).forEach(pe=>{S.current.off(pe,V[pe])})};C.useEffect(()=>()=>{S.current&&S.current.off("_beforeBreakpoint",Q)}),C.useEffect(()=>{!_.current&&S.current&&(S.current.emitSlidesClasses(),_.current=!0)}),uc(()=>{if(e&&(e.current=T.current),!!T.current)return S.current.destroyed&&ie(),F8({el:T.current,nextEl:O.current,prevEl:D.current,paginationEl:F.current,scrollbarEl:B.current,swiper:S.current},P),l&&!S.current.destroyed&&l(S.current),()=>{S.current&&!S.current.destroyed&&S.current.destroy(!0,!1)}},[]),uc(()=>{L();const pe=B8(H,E.current,G,A.current,M=>M.key);return E.current=H,A.current=G,pe.length&&S.current&&!S.current.destroyed&&R8({swiper:S.current,slides:G,passedParams:H,changedParams:pe,nextEl:O.current,prevEl:D.current,scrollbarEl:B.current,paginationEl:F.current}),()=>{$()}}),uc(()=>{z8(S.current)},[x]);function K(){return P.virtual?V8(S.current,G,x):G.map((pe,M)=>Xt.cloneElement(pe,{swiper:S.current,swiperSlideIndex:M}))}return Xt.createElement(s,uh({ref:T,className:f4(`${f}${t?` ${t}`:""}`)},N),Xt.createElement(I8.Provider,{value:S.current},ne["container-start"],Xt.createElement(n,{className:L8(P.wrapperClass)},ne["wrapper-start"],K(),ne["wrapper-end"]),u4(P)&&Xt.createElement(Xt.Fragment,null,Xt.createElement("div",{ref:D,className:"swiper-button-prev"}),Xt.createElement("div",{ref:O,className:"swiper-button-next"})),h4(P)&&Xt.createElement("div",{ref:B,className:"swiper-scrollbar"}),d4(P)&&Xt.createElement("div",{ref:F,className:"swiper-pagination"}),ne["container-end"]))});p4.displayName="Swiper";const x4=C.forwardRef(function(r,e){let{tag:t="div",children:s,className:n="",swiper:a,zoom:l,lazy:d,virtualIndex:h,swiperSlideIndex:f,...g}=r===void 0?{}:r;const x=C.useRef(null),[v,b]=C.useState("swiper-slide"),[w,_]=C.useState(!1);function T(O,D,F){D===x.current&&b(F)}uc(()=>{if(typeof f<"u"&&(x.current.swiperSlideIndex=f),e&&(e.current=x.current),!(!x.current||!a)){if(a.destroyed){v!=="swiper-slide"&&b("swiper-slide");return}return a.on("_slideClass",T),()=>{a&&a.off("_slideClass",T)}}}),uc(()=>{a&&x.current&&!a.destroyed&&b(a.getSlideClasses(x.current))},[a]);const S={isActive:v.indexOf("swiper-slide-active")>=0,isVisible:v.indexOf("swiper-slide-visible")>=0,isPrev:v.indexOf("swiper-slide-prev")>=0,isNext:v.indexOf("swiper-slide-next")>=0},E=()=>typeof s=="function"?s(S):s,A=()=>{_(!0)};return Xt.createElement(t,uh({ref:x,className:f4(`${v}${n?` ${n}`:""}`),"data-swiper-slide-index":h,onLoad:A},g),l&&Xt.createElement(Gb.Provider,{value:S},Xt.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof l=="number"?l:void 0},E(),d&&!w&&Xt.createElement("div",{className:"swiper-lazy-preloader"}))),!l&&Xt.createElement(Gb.Provider,{value:S},E(),d&&!w&&Xt.createElement("div",{className:"swiper-lazy-preloader"})))});x4.displayName="SwiperSlide";function H8(r,e,t,s){return r.params.createElements&&Object.keys(s).forEach(n=>{if(!t[n]&&t.auto===!0){let a=qr(r.el,`.${s[n]}`)[0];a||(a=ch("div",s[n]),a.className=s[n],r.el.append(a)),t[n]=a,e[n]=a}}),t}function $8(r){let{swiper:e,extendParams:t,on:s,emit:n}=r;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function a(w){let _;return w&&typeof w=="string"&&e.isElement&&(_=e.el.querySelector(w)||e.hostEl.querySelector(w),_)?_:(w&&(typeof w=="string"&&(_=[...document.querySelectorAll(w)]),e.params.uniqueNavElements&&typeof w=="string"&&_&&_.length>1&&e.el.querySelectorAll(w).length===1?_=e.el.querySelector(w):_&&_.length===1&&(_=_[0])),w&&!_?w:_)}function l(w,_){const T=e.params.navigation;w=vn(w),w.forEach(S=>{S&&(S.classList[_?"add":"remove"](...T.disabledClass.split(" ")),S.tagName==="BUTTON"&&(S.disabled=_),e.params.watchOverflow&&e.enabled&&S.classList[e.isLocked?"add":"remove"](T.lockClass))})}function d(){const{nextEl:w,prevEl:_}=e.navigation;if(e.params.loop){l(_,!1),l(w,!1);return}l(_,e.isBeginning&&!e.params.rewind),l(w,e.isEnd&&!e.params.rewind)}function h(w){w.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),n("navigationPrev"))}function f(w){w.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),n("navigationNext"))}function g(){const w=e.params.navigation;if(e.params.navigation=H8(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(w.nextEl||w.prevEl))return;let _=a(w.nextEl),T=a(w.prevEl);Object.assign(e.navigation,{nextEl:_,prevEl:T}),_=vn(_),T=vn(T);const S=(E,A)=>{E&&E.addEventListener("click",A==="next"?f:h),!e.enabled&&E&&E.classList.add(...w.lockClass.split(" "))};_.forEach(E=>S(E,"next")),T.forEach(E=>S(E,"prev"))}function x(){let{nextEl:w,prevEl:_}=e.navigation;w=vn(w),_=vn(_);const T=(S,E)=>{S.removeEventListener("click",E==="next"?f:h),S.classList.remove(...e.params.navigation.disabledClass.split(" "))};w.forEach(S=>T(S,"next")),_.forEach(S=>T(S,"prev"))}s("init",()=>{e.params.navigation.enabled===!1?b():(g(),d())}),s("toEdge fromEdge lock unlock",()=>{d()}),s("destroy",()=>{x()}),s("enable disable",()=>{let{nextEl:w,prevEl:_}=e.navigation;if(w=vn(w),_=vn(_),e.enabled){d();return}[...w,..._].filter(T=>!!T).forEach(T=>T.classList.add(e.params.navigation.lockClass))}),s("click",(w,_)=>{let{nextEl:T,prevEl:S}=e.navigation;T=vn(T),S=vn(S);const E=_.target;let A=S.includes(E)||T.includes(E);if(e.isElement&&!A){const O=_.path||_.composedPath&&_.composedPath();O&&(A=O.find(D=>T.includes(D)||S.includes(D)))}if(e.params.navigation.hideOnClick&&!A){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===E||e.pagination.el.contains(E)))return;let O;T.length?O=T[0].classList.contains(e.params.navigation.hiddenClass):S.length&&(O=S[0].classList.contains(e.params.navigation.hiddenClass)),n(O===!0?"navigationShow":"navigationHide"),[...T,...S].filter(D=>!!D).forEach(D=>D.classList.toggle(e.params.navigation.hiddenClass))}});const v=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),g(),d()},b=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),x()};Object.assign(e.navigation,{enable:v,disable:b,update:d,init:g,destroy:x})}const G8=()=>{const[r,e]=C.useState(""),[t,s]=C.useState(""),[n,a]=C.useState(""),[l,d]=C.useState(""),[h,f]=C.useState(!1),[g,x]=C.useState(l),{session:v,signOut:b}=zn(),[w,_]=C.useState(null),[T,S]=C.useState(!0),[E,A]=C.useState([]),[O,D]=C.useState(!1),[F,B]=C.useState(null),[P,H]=C.useState({}),N=Bn(),V=15551234567,G=()=>!l||l===V?V:l,ne=()=>!l||l===V,Q=()=>{if(!w)return!1;const te=g&&g.trim()!==""?g:P.phoneNumber||V;return r!==P.username||t!==P.firstName||n!==P.lastName||te!==P.phoneNumber},ie=async()=>{try{await b(),N("/login"),setTimeout(()=>window.scrollTo(0,0),100)}catch(te){console.error("Error signing out:",te)}};C.useEffect(()=>{(async()=>{try{if(!v||!v.user){console.log("No session or user found.");return}const{data:fe,error:re}=await xe.from("CUSTOMER").select("*").eq("auth_user_id",v.user.id).single();if(re||!fe)console.log("No profile data found for this user.");else{const le={username:fe.cus_username||"",firstName:fe.cus_fname||"",lastName:fe.cus_lname||"",phoneNumber:fe.cus_celno||""};e(le.username),s(le.firstName),a(le.lastName),d(le.phoneNumber),_(fe),H(le)}}catch(fe){console.error("Error fetching profile:",fe.message)}finally{S(!1)}})()},[v]),C.useEffect(()=>{w&&(async()=>{try{if(!w?.cus_id)return;const{data:fe,error:re}=await xe.from("CUSTOM-CAKE").select("*").eq("cus_id",w.cus_id);if(re)throw re;const le=fe.map(de=>({...de,publicUrl:de.cc_img?xe.storage.from("cust.cakes").getPublicUrl(de.cc_img).data.publicUrl:null}));A(le)}catch(fe){console.error("Error fetching custom cakes:",fe.message)}})()},[w]),C.useEffect(()=>{if(E.length>3){const te=setTimeout(()=>{const fe=document.querySelector(".swiper");fe&&fe.swiper&&fe.swiper.slideTo(0,0)},200);return()=>clearTimeout(te)}},[E]);const L=()=>{const te=ne()?"":l;x(te),f(!0)},$=te=>{const fe=te.target.value;(/^[\d]*$/.test(fe)||fe==="")&&x(fe)},K=()=>{if(g&&!/^[\d]+$/.test(g)){_e.error("Phone number can only contain numbers",{duration:3e3,position:"top-center"});return}if(g&&(g.length<7||g.length>15)){_e.error("Phone number must be between 7 and 15 digits",{duration:3e3,position:"top-center"});return}d(g||""),f(!1)},pe=()=>{x(l),f(!1)},M=te=>{te.key==="Enter"?K():te.key==="Escape"&&pe()},J=()=>{setTimeout(()=>{f(!1)},100)},ye=async()=>{if(!O){D(!0);try{if(!r.trim()){_e.error("Username is required",{duration:3e3,position:"top-center"});return}if(!t.trim()){_e.error("First name is required",{duration:3e3,position:"top-center"});return}if(!n.trim()){_e.error("Last name is required",{duration:3e3,position:"top-center"});return}const te=h?g&&g.trim()!==""?g:V:l||V,fe={cus_username:r.trim(),cus_fname:t.trim(),cus_lname:n.trim(),cus_celno:te},{error:re}=await xe.from("CUSTOMER").update(fe).eq("auth_user_id",v.user.id);re?(console.error("Error updating profile:",re.message),_e.error(`Failed to update profile: ${re.message}`,{duration:4e3,position:"top-center"})):(console.log("Profile updated successfully."),_(le=>({...le,...fe})),d(te||""),f(!1),H({username:r.trim(),firstName:t.trim(),lastName:n.trim(),phoneNumber:te}),d(te),_e.success("Profile updated successfully!",{duration:3e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}))}catch(te){console.error("Unexpected error:",te),_e.error("An unexpected error occurred. Please try again.",{duration:4e3,position:"top-center"})}finally{D(!1)}}};return T?c.jsx(Po,{message:"Loading profile..."}):c.jsxs("section",{className:"bg-gradient-to-br from-[#F8E6B4] via-[#E2D2A2] to-[#DFDAC7] min-h-screen flex flex-col items-center justify-center py-20 px-10 relative overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[c.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-[#AF524D]/10 rounded-full blur-xl animate-pulse"}),c.jsx("div",{className:"absolute top-40 right-20 w-24 h-24 bg-[#DFAD56]/15 rounded-full blur-lg animate-pulse delay-1000"}),c.jsx("div",{className:"absolute bottom-32 left-1/4 w-40 h-40 bg-[#8B3A3A]/8 rounded-full blur-2xl animate-pulse delay-2000"}),c.jsx("div",{className:"absolute bottom-20 right-1/3 w-28 h-28 bg-[#DFAD56]/12 rounded-full blur-lg animate-pulse delay-3000"})]}),c.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 w-full max-w-4xl relative z-10 overflow-hidden",children:[c.jsxs("div",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] p-8 relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-black/10"}),c.jsx("div",{className:"relative z-10",children:c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"mr-4",children:c.jsx("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),c.jsxs("div",{className:"text-left",children:[c.jsx("h1",{className:"text-3xl font-abhaya font-bold text-white",children:"My Profile"}),c.jsx("p",{className:"text-white/90 text-sm",children:"Manage and protect your account"})]})]}),c.jsxs("button",{onClick:ie,className:"bg-white/20 hover:bg-white/30 text-white font-bold px-6 py-3 rounded-2xl cursor-pointer transition-all duration-300 tracking-wide text-sm shadow-lg hover:shadow-xl hover:scale-105 transform flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})]})})]}),c.jsxs("div",{className:"p-8",children:[c.jsxs("div",{className:"mb-6",children:[c.jsxs("label",{className:"block text-sm font-medium text-[#492220] mb-2 flex items-center",children:[c.jsx("svg",{className:"w-4 h-4 text-[#AF524D] mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Username"]}),c.jsx("input",{type:"text",value:r,onChange:te=>e(te.target.value),className:"w-full bg-white/90 backdrop-blur-sm text-[#492220] rounded-2xl px-4 py-3 border border-[#AF524D]/20 focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] text-sm shadow-sm transition-all duration-300 hover:shadow-md",placeholder:"Enter your username"})]}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-6",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("label",{className:"block text-sm font-medium text-[#492220] mb-2 flex items-center",children:[c.jsx("svg",{className:"w-4 h-4 text-[#AF524D] mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"First Name"]}),c.jsx("input",{type:"text",value:t,onChange:te=>s(te.target.value),className:"w-full bg-white/90 backdrop-blur-sm text-[#492220] rounded-2xl px-4 py-3 border border-[#AF524D]/20 focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] text-sm shadow-sm transition-all duration-300 hover:shadow-md",placeholder:"Enter your first name"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("label",{className:"block text-sm font-medium text-[#492220] mb-2 flex items-center",children:[c.jsx("svg",{className:"w-4 h-4 text-[#AF524D] mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Last Name"]}),c.jsx("input",{type:"text",value:n,onChange:te=>a(te.target.value),className:"w-full bg-white/90 backdrop-blur-sm text-[#492220] rounded-2xl px-4 py-3 border border-[#AF524D]/20 focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] text-sm shadow-sm transition-all duration-300 hover:shadow-md",placeholder:"Enter your last name"})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("label",{className:"block text-sm font-medium text-[#492220] mb-2 flex items-center",children:[c.jsx("svg",{className:"w-4 h-4 text-[#AF524D] mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email"]}),c.jsx("div",{className:"bg-[#F8F9FA] border border-[#AF524D]/20 rounded-2xl px-4 py-3",children:c.jsx("p",{className:"text-[#492220] text-sm font-medium",children:w?.email||""})})]}),c.jsxs("div",{className:"mb-8",children:[c.jsxs("label",{className:"block text-sm font-medium text-[#492220] mb-2 flex items-center",children:[c.jsx("svg",{className:"w-4 h-4 text-[#AF524D] mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Phone Number"]}),c.jsx("div",{className:"flex items-center gap-4",children:h?c.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.jsx("input",{type:"text",value:g||"",onChange:$,onKeyPress:M,onBlur:J,className:"flex-1 bg-white/90 backdrop-blur-sm text-[#492220] rounded-2xl px-4 py-3 border border-[#AF524D]/20 focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] text-sm shadow-sm transition-all duration-300 hover:shadow-md",placeholder:"Enter your phone number",autoFocus:!0}),c.jsx("button",{onClick:K,className:"bg-green-500 hover:bg-green-600 text-white p-2 rounded-xl transition-all duration-300 hover:scale-105 transform",title:"Save",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsx("button",{onClick:pe,className:"bg-red-500 hover:bg-red-600 text-white p-2 rounded-xl transition-all duration-300 hover:scale-105 transform",title:"Cancel",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):c.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[c.jsx("div",{className:"flex-1 bg-[#F8F9FA] border border-[#AF524D]/20 rounded-2xl px-4 py-3",children:c.jsx("p",{className:`text-sm font-medium ${ne()?"text-gray-500 italic":"text-[#492220]"}`,children:G()})}),ne()&&c.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full border border-yellow-300 font-medium",children:"Default Number"}),c.jsx("button",{className:"bg-[#AF524D] hover:bg-[#8B3A3A] text-white p-2 rounded-xl transition-all duration-300 hover:scale-105 transform",onClick:L,title:"Edit Phone Number",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]})})]}),c.jsx("div",{className:"text-center pt-4",children:c.jsx("button",{className:`font-bold px-8 py-4 rounded-2xl text-sm cursor-pointer transition-all duration-300 tracking-wide shadow-lg hover:shadow-xl hover:scale-105 transform disabled:hover:scale-100 flex items-center justify-center mx-auto ${O||!Q()?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] hover:from-[#8B3A3A] hover:to-[#6B2D2D] text-white"}`,onClick:ye,disabled:O||!Q(),children:O?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):c.jsxs(c.Fragment,{children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Save Profile"]})})})]})]}),c.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 w-full max-w-4xl relative z-10 overflow-hidden mt-10",children:[c.jsxs("div",{className:"bg-gradient-to-r from-[#DFAD56] to-[#B8941F] p-6 text-center relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-black/10"}),c.jsx("div",{className:"relative z-10",children:c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsx("div",{className:"mr-4",children:c.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-abhaya font-bold text-white",children:"Saved Custom Cakes"}),c.jsx("p",{className:"text-white/90 text-sm",children:"Your personalized cake designs"})]})]})})]}),c.jsx("div",{className:"p-8",children:c.jsx("div",{className:"relative w-full min-h-[50vh] bg-gradient-to-br from-[#F8F9FA] to-[#F0F0F0] rounded-2xl py-8 px-4",children:E.length>0?E.length>3?c.jsxs(p4,{modules:[$8],navigation:{nextEl:".custom-next",prevEl:".custom-prev"},spaceBetween:0,slidesPerView:3,slidesPerGroup:3,centeredSlides:!1,loop:!1,className:"w-full h-full",allowTouchMove:!0,breakpoints:{1536:{slidesPerView:3,slidesPerGroup:3,spaceBetween:0},1280:{slidesPerView:3,slidesPerGroup:3,spaceBetween:0},1024:{slidesPerView:3,slidesPerGroup:3,spaceBetween:0},768:{slidesPerView:2,slidesPerGroup:2,spaceBetween:0},640:{slidesPerView:2,slidesPerGroup:2,spaceBetween:0},480:{slidesPerView:1,slidesPerGroup:1,spaceBetween:0}},onSwiper:te=>{te&&E.length>0&&setTimeout(()=>{te.slideTo(0,0)},100)},children:[E.map((te,fe)=>c.jsx(x4,{className:"!w-1/3",children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-3xl shadow-lg overflow-hidden w-full max-w-64 h-80 text-center hover:shadow-2xl transition-all duration-300 cursor-pointer hover:scale-105 transform border border-white/20 mx-auto",children:[c.jsxs("div",{className:"relative h-56 overflow-hidden",onClick:()=>B(te.publicUrl),children:[c.jsx("img",{src:te.publicUrl||"/placeholder.jpg",alt:`Custom Cake ${te.cc_id}`,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110",onError:re=>{re.target.src="/placeholder.jpg"}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:c.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-full p-3 opacity-0 hover:opacity-100 transition-opacity duration-300",children:c.jsx("svg",{className:"w-6 h-6 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})})]}),c.jsx("div",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white py-4 px-4 h-24 flex items-center justify-center",children:c.jsxs("h3",{className:"font-bold text-lg",children:["Custom Cake #",te.cc_id]})})]})},fe)),c.jsx("div",{className:"custom-prev absolute top-1/2 left-2 -translate-y-1/2 bg-[#AF524D] hover:bg-[#8B3A3A] rounded-full w-12 h-12 flex items-center justify-center cursor-pointer z-10 text-white text-xl transition-all duration-300 shadow-lg hover:scale-110 transform",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),c.jsx("div",{className:"custom-next absolute top-1/2 right-2 -translate-y-1/2 bg-[#AF524D] hover:bg-[#8B3A3A] rounded-full w-12 h-12 flex items-center justify-center cursor-pointer z-10 text-white text-xl transition-all duration-300 shadow-lg hover:scale-110 transform",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}):c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 justify-items-center",children:E.map((te,fe)=>c.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-3xl shadow-lg overflow-hidden w-64 h-80 text-center hover:shadow-2xl transition-all duration-300 cursor-pointer hover:scale-105 transform border border-white/20",children:[c.jsxs("div",{className:"relative h-56 overflow-hidden",onClick:()=>B(te.publicUrl),children:[c.jsx("img",{src:te.publicUrl||"/placeholder.jpg",alt:`Custom Cake ${te.cc_id}`,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110",onError:re=>{re.target.src="/placeholder.jpg"}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:c.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-full p-3 opacity-0 hover:opacity-100 transition-opacity duration-300",children:c.jsx("svg",{className:"w-6 h-6 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})})]}),c.jsx("div",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white py-4 px-4 h-24 flex items-center justify-center",children:c.jsxs("h3",{className:"font-bold text-lg",children:["Custom Cake #",te.cc_id]})})]},fe))}):c.jsx("div",{className:"flex flex-col items-center justify-center h-full py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mb-6",children:c.jsx("div",{className:"bg-gradient-to-r from-[#AF524D]/10 to-[#DFAD56]/10 rounded-full p-6 inline-block",children:c.jsx("svg",{className:"w-16 h-16 text-[#AF524D] mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),c.jsx("h3",{className:"text-xl font-abhaya font-bold text-[#492220] mb-2",children:"No Custom Cakes Yet"}),c.jsx("p",{className:"text-[#492220]/70 mb-4",children:"You haven't created any custom cakes yet."}),c.jsx("p",{className:"text-sm text-[#492220]/50",children:"Your custom cake designs will appear here once you create them."})]})})})})]}),F&&c.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>B(null),children:c.jsxs("div",{className:"relative w-full h-full max-w-7xl max-h-full flex items-center justify-center",children:[c.jsx("img",{src:F,alt:"Custom Cake Design",className:"max-w-full max-h-full object-contain rounded-3xl shadow-2xl border border-white/20",onClick:te=>te.stopPropagation()}),c.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 bg-white/90 backdrop-blur-sm hover:bg-white text-[#AF524D] rounded-full p-3 transition-all duration-300 shadow-lg hover:scale-110 transform",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})},W8=r=>r?r.startsWith("http://")||r.startsWith("https://")?r:xe.storage.from("cake").getPublicUrl(r).data.publicUrl:null,Y8=()=>{const r=Bn(),{session:e}=zn(),[t,s]=C.useState([]),[n,a]=C.useState(16e3),[l,d]=C.useState("default"),[h,f]=C.useState("all"),[g,x]=C.useState([]),[v,b]=C.useState(null),[w,_]=C.useState(!1),[T,S]=C.useState(1),[E,A]=C.useState(!0),O=21,[D,F]=C.useState(""),[B,P]=C.useState(""),[H,N]=C.useState("Pickup"),[V,G]=C.useState(""),[ne,Q]=C.useState(1),[ie,L]=C.useState(!1),[$,K]=C.useState(1),[pe,M]=C.useState(!1),[J,ye]=C.useState(""),[te,fe]=C.useState(!1);C.useEffect(()=>{(async()=>{try{A(!0);const{data:tt,error:$t}=await xe.from("CAKE").select("*");if($t){console.error("Error fetching cakes:",$t.message),_e.error("Failed to load cakes. Please try again.");return}const gs=tt.map(js=>{const Js=W8(js.cake_img);return console.log(`Cake: ${js.name}, cake_img: ${js.cake_img}, publicUrl: ${Js}`),{...js,publicUrl:Js}});s(gs)}catch(tt){console.error("Error fetching cakes:",tt),_e.error("Failed to load cakes. Please try again.")}finally{A(!1)}})()},[]);const re=Se=>{b(Se),_(!0)},le=()=>{_(!1),b(null)},de=()=>{if(!v)return;if(!e){_e.error("Please login first to place an order",{duration:4e3,position:"top-center",style:{background:"#AF524D",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}),r("/login");return}const Se=new Date;Se.setDate(Se.getDate()+1),F(Se.toISOString().split("T")[0]),P("14:00"),Q(1),K(1),L(!0)},Ce=async()=>{if(!te){if(console.log("handlePlaceOrder called"),console.log("selectedCake:",v),console.log("orderDate:",D),console.log("orderTime:",B),console.log("orderType:",H),console.log("deliveryAddress:",V),!v||!D||!B||H==="Delivery"&&!V){console.log("Validation failed - missing required fields"),_e.error("Please fill in all required fields");return}fe(!0);try{console.log("Starting order placement...");const{data:{session:Se}}=await xe.auth.getSession();if(!Se){console.log("No user session found"),_e.error("Please log in to place an order");return}const{data:tt,error:$t}=await xe.from("CUSTOMER").select("cus_id").eq("auth_user_id",Se.user.id).single();if($t||!tt){_e.error("Customer information not found. Please try again.");return}const gs=v.price*ne,js=new Date(`${D}T${B}`),Js={order_date:new Date().toISOString().split("T")[0],delivery_method:H,order_schedule:js.toISOString().split("T")[0],delivery_address:H==="Delivery"?V:null,cus_id:tt.cus_id,order_status:"Pending"};console.log("Attempting to create order with data:",Js);const{data:Vs,error:er}=await xe.from("ORDER").insert([Js]).select().single();if(er){console.error("Error creating order:",er),console.error("Order error details:",{message:er.message,details:er.details,hint:er.hint,code:er.code}),_e.error("Failed to create order. Please try again.");return}console.log("Order created successfully:",Vs),console.log("Order ID from database:",Vs.order_id),console.log("Selected cake ID:",v.cake_id),console.log("Cake quantity:",ne);const ae={quantity:ne,order_id:Vs.order_id,cake_id:v.cake_id};console.log("Attempting to create cake order with data:",ae),console.log("Attempting to insert into CAKE-ORDERS table...");const{data:Le,error:be}=await xe.from("CAKE-ORDERS").insert([ae]).select();if(be){console.error("Error creating cake order:",be),console.error("Full error object:",JSON.stringify(be,null,2)),console.error("Error details:",{message:be.message,details:be.details,hint:be.hint,code:be.code}),_e.error("Failed to create cake order. Please try again.");return}console.log("Cake order created successfully:",Le);const{error:me}=await xe.from("PAYMENT").insert([{payment_method:"Cash",amount_paid:gs,payment_date:new Date().toISOString().split("T")[0],payment_status:"Unpaid",receipt:null,order_id:Vs.order_id}]);if(me){console.error("Error creating payment:",me),_e.error("Failed to create payment record. Please try again.");return}const ue=`ORD-${Vs.order_id}`;ye(ue),_e.success(`Order successfully placed for ${v.name}!`,{duration:4e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}),console.log("Advancing to step 3..."),K(3)}catch(Se){console.error("Error placing order:",Se),_e.error("Failed to place order. Please try again.",{duration:4e3,position:"top-center"})}finally{fe(!1)}}},Me=()=>{L(!1),F(""),P(""),N("Pickup"),G(""),Q(1),K(1),M(!1),ye(""),fe(!1)},ce=()=>{console.log("nextStep called, current step:",$),$<3&&(console.log("Advancing to step:",$+1),K($+1))},je=()=>{$>1&&K($-1)},Te=t.filter(Se=>Se.price<=n).filter(Se=>h==="all"||Se.tier===parseInt(h)).filter(Se=>g.length===0||g.includes(Se.theme)).sort((Se,tt)=>{switch(l){case"priceLowToHigh":return Se.price-tt.price;case"priceHighToLow":return tt.price-Se.price;case"alphabeticalAsc":return Se.name.localeCompare(tt.name);case"alphabeticalDesc":return tt.name.localeCompare(Se.name);default:return 0}}),we=Math.ceil(Te.length/O),Ue=T*O,Ee=Ue-O,$e=Te.slice(Ee,Ue);return C.useEffect(()=>{S(1)},[n,h,g,l]),E?c.jsx(Po,{message:"Loading cake catalog..."}):c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#F8E6B4] via-[#E2D2A2] to-[#DFDAC7] relative overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 opacity-5",children:[c.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-[#AF524D] rounded-full blur-3xl"}),c.jsx("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-[#DFAD56] rounded-full blur-3xl"}),c.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-60 h-60 bg-[#E2D2A2] rounded-full blur-3xl"})]}),c.jsx("div",{className:"absolute top-10 left-10 animate-bounce",children:c.jsx("div",{className:"w-6 h-6 bg-[#DFAD56] rounded-full opacity-60"})}),c.jsx("div",{className:"absolute top-20 right-20 animate-pulse",children:c.jsx("div",{className:"w-4 h-4 bg-[#AF524D] rounded-full opacity-40"})}),c.jsx("div",{className:"absolute bottom-20 left-20 animate-bounce delay-1000",children:c.jsx("div",{className:"w-8 h-8 bg-[#E2D2A2] rounded-full opacity-50"})}),c.jsxs("div",{className:"relative z-10 p-4",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-4xl md:text-5xl font-abhaya font-bold text-[#492220] mb-4",children:"Our Cake Collection"}),c.jsx("p",{className:"text-lg text-[#492220]/70 max-w-2xl mx-auto",children:"Discover our handcrafted cakes, each made with love and the finest ingredients"})]}),c.jsxs("div",{className:"flex flex-col xl:flex-row gap-6 max-w-7xl mx-auto",children:[c.jsx("aside",{className:"w-full xl:w-80 xl:sticky xl:top-6 xl:self-start",children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 p-6 text-[#492220] sticky top-6 hover:shadow-3xl transition-all duration-300 hover:scale-[1.02] relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#AF524D]/5 via-transparent to-[#DFAD56]/5 rounded-3xl pointer-events-none"}),c.jsxs("div",{className:"relative z-10",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[#AF524D] to-[#8B3A3A] rounded-lg flex items-center justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"})})}),c.jsx("h2",{className:"text-xl font-abhaya font-bold",children:"Filters"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-[#492220]",htmlFor:"sortBy",children:"Sort by"}),c.jsxs("select",{id:"sortBy",className:"w-full px-4 py-3 bg-white/70 border border-[#AF524D]/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] transition-all duration-200 text-[#492220]",value:l,onChange:Se=>d(Se.target.value),children:[c.jsx("option",{value:"default",children:"Default"}),c.jsx("option",{value:"priceLowToHigh",children:"Price: Low to High"}),c.jsx("option",{value:"priceHighToLow",children:"Price: High to Low"}),c.jsx("option",{value:"alphabeticalAsc",children:"Alphabetical: A → Z"}),c.jsx("option",{value:"alphabeticalDesc",children:"Alphabetical: Z → A"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("h3",{className:"text-sm font-semibold text-[#492220] flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-[#AF524D]",fill:"none",viewBox:"6 6 12 12",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Price Range"]}),c.jsx("input",{type:"range",min:"0",max:"16000",value:n,onChange:Se=>a(Se.target.value),className:"w-full cursor-pointer slider-design appearance-none bg-[#AF524D]/20 rounded-lg h-2"}),c.jsxs("div",{className:"flex justify-between text-sm text-[#492220]/70",children:[c.jsx("span",{children:"₱0"}),c.jsxs("span",{className:"font-semibold text-[#AF524D]",children:["₱",n]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("h3",{className:"text-sm font-semibold text-[#492220] flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-[#AF524D]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Theme"]}),c.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:["Plain","Birthday","Wedding","Christmas","Graduation","Anniversary","New Years"].map(Se=>c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer hover:bg-[#AF524D]/10 p-2 rounded-lg transition-colors",children:[c.jsx("input",{type:"checkbox",className:"w-4 h-4 text-[#AF524D] bg-white border-2 border-[#AF524D]/30 rounded focus:ring-[#AF524D]/20 focus:ring-2",checked:g.includes(Se),onChange:tt=>{tt.target.checked?x([...g,Se]):x(g.filter($t=>$t!==Se))}}),c.jsx("span",{className:"text-sm text-[#492220]",children:Se})]},Se))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-[#492220]",htmlFor:"tier",children:"Tiers"}),c.jsxs("select",{id:"tier",className:"w-full px-4 py-3 bg-white/70 border border-[#AF524D]/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] transition-all duration-200 text-[#492220]",value:h,onChange:Se=>f(Se.target.value),children:[c.jsx("option",{value:"all",children:"All Tiers"}),[1,2,3,4,5].map(Se=>c.jsxs("option",{value:Se,children:[Se," Tier"]},Se))]})]})]})]})]})}),c.jsxs("main",{className:"flex-1",children:[c.jsx("div",{className:"bg-white/80 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-6 mb-6",children:c.jsxs("div",{className:"text-center",children:[c.jsxs("h3",{className:"text-xl font-abhaya font-bold text-[#492220] mb-2",children:[Te.length," Cakes Found"]}),c.jsxs("p",{className:"text-[#492220]/70",children:["Showing ",Ee+1," to ",Math.min(Ue,Te.length)," of ",Te.length," results"]})]})}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:$e.map(Se=>c.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-6 text-center cursor-pointer hover:shadow-2xl transition-all duration-300 hover:scale-105 transform group",onClick:()=>re(Se),children:[c.jsxs("div",{className:"relative mb-4 overflow-hidden rounded-xl",children:[c.jsx("img",{src:Se.publicUrl||"/saved-cake.png",alt:Se.name,className:"w-full h-48 object-contain group-hover:scale-110 transition-transform duration-300",onError:tt=>{console.error(`Failed to load image for cake: ${Se.name}, URL: ${Se.publicUrl}`),tt.target.src="/saved-cake.png"}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),c.jsx("h3",{className:"text-lg font-semibold text-[#492220] mb-2 group-hover:text-[#AF524D] transition-colors",children:Se.name}),c.jsxs("p",{className:"text-xl font-bold text-[#AF524D] mb-3",children:["₱",Se.price]}),c.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-[#492220]/70",children:[c.jsxs("span",{className:"bg-[#AF524D]/10 text-[#AF524D] px-2 py-1 rounded-full",children:[Se.tier," Tier"]}),c.jsx("span",{className:"bg-[#DFAD56]/10 text-[#8B3A3A] px-2 py-1 rounded-full",children:Se.theme})]})]},Se.cake_id))}),we>1&&c.jsxs("div",{className:"flex justify-center items-center mt-8 space-x-2",children:[c.jsx("button",{onClick:()=>S(Se=>Math.max(Se-1,1)),disabled:T===1,className:"px-6 py-3 bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white rounded-xl hover:from-[#8B3A3A] hover:to-[#AF524D] disabled:bg-gray-300 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:transform-none",children:"Previous"}),c.jsx("div",{className:"flex space-x-2",children:Array.from({length:we},(Se,tt)=>tt+1).map(Se=>c.jsx("button",{onClick:()=>S(Se),className:`px-4 py-3 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 ${T===Se?"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white":"bg-white/80 text-[#492220] hover:bg-[#AF524D]/10 border border-[#AF524D]/20"}`,children:Se},Se))}),c.jsx("button",{onClick:()=>S(Se=>Math.min(Se+1,we)),disabled:T===we,className:"px-6 py-3 bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white rounded-xl hover:from-[#8B3A3A] hover:to-[#AF524D] disabled:bg-gray-300 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:transform-none",children:"Next"})]})]})]})]}),w&&v&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:le,children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:Se=>Se.stopPropagation(),children:[c.jsxs("div",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] p-6 text-center relative",children:[c.jsx("div",{className:"absolute inset-0 bg-black/10"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("h2",{className:"text-2xl font-abhaya font-bold text-white mb-2",children:v.name}),c.jsx("p",{className:"text-white/80 text-sm",children:"Cake Details"})]}),c.jsx("button",{onClick:le,className:"absolute top-4 right-4 text-white/60 hover:text-white text-2xl font-bold cursor-pointer transition-colors duration-200 hover:scale-110 transform",children:"×"})]}),c.jsxs("div",{className:"p-6",children:[c.jsx("div",{className:"mb-6",children:c.jsx("img",{src:v.publicUrl||"/saved-cake.png",alt:v.name,className:"w-full h-64 object-contain rounded-2xl shadow-lg",onError:Se=>{Se.target.src="/saved-cake.png"}})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-[#492220] flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-[#AF524D]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Cake Details"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#AF524D]/5 rounded-xl",children:[c.jsx("span",{className:"font-medium text-[#492220]",children:"Theme:"}),c.jsx("span",{className:"text-[#AF524D] font-semibold",children:v.theme})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#DFAD56]/5 rounded-xl",children:[c.jsx("span",{className:"font-medium text-[#492220]",children:"Tiers:"}),c.jsx("span",{className:"text-[#8B3A3A] font-semibold",children:v.tier})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-[#AF524D]/10 to-[#8B3A3A]/10 rounded-xl",children:[c.jsx("span",{className:"font-medium text-[#492220]",children:"Price:"}),c.jsxs("span",{className:"text-[#AF524D] font-bold text-xl",children:["₱",v.price]})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-[#492220] flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-[#AF524D]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Description"]}),c.jsx("p",{className:"text-[#492220]/80 leading-relaxed p-4 bg-[#F8E6B4]/30 rounded-xl",children:v.description||"No description available for this cake."})]})]}),c.jsx("div",{className:"mt-8 flex justify-center",children:c.jsxs("button",{onClick:de,className:"px-8 py-3 bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white font-semibold rounded-xl hover:from-[#8B3A3A] hover:to-[#AF524D] transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 flex items-center justify-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Order This Cake"]})})]})]})}),ie&&v&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:Me,children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:Se=>Se.stopPropagation(),children:[c.jsxs("div",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] p-6 text-center relative",children:[c.jsx("div",{className:"absolute inset-0 bg-black/10"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("h2",{className:"text-2xl font-abhaya font-bold text-white mb-2",children:"Complete Your Order"}),c.jsx("p",{className:"text-white/80 text-sm",children:"Follow the steps to place your order"})]}),c.jsx("button",{onClick:Me,className:"absolute top-4 right-4 text-white/60 hover:text-white text-2xl font-bold cursor-pointer transition-colors duration-200 hover:scale-110 transform",children:"×"})]}),c.jsx("div",{className:"px-6 py-6 bg-[#F8E6B4]/20",children:c.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[c.jsxs("div",{className:`flex items-center ${$>=1?"text-[#AF524D]":"text-gray-400"}`,children:[c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-semibold transition-all duration-300 ${$>=1?"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white shadow-lg":"bg-gray-200 text-gray-500"}`,children:"1"}),c.jsx("span",{className:"ml-3 text-sm font-medium",children:"Order Details"})]}),c.jsx("div",{className:`w-12 h-1 rounded-full transition-all duration-300 ${$>=2?"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A]":"bg-gray-200"}`}),c.jsxs("div",{className:`flex items-center ${$>=2?"text-[#AF524D]":"text-gray-400"}`,children:[c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-semibold transition-all duration-300 ${$>=2?"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white shadow-lg":"bg-gray-200 text-gray-500"}`,children:"2"}),c.jsx("span",{className:"ml-3 text-sm font-medium",children:"Review"})]}),c.jsx("div",{className:`w-12 h-1 rounded-full transition-all duration-300 ${$>=3?"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A]":"bg-gray-200"}`}),c.jsxs("div",{className:`flex items-center ${$>=3?"text-[#AF524D]":"text-gray-400"}`,children:[c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-semibold transition-all duration-300 ${$>=3?"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white shadow-lg":"bg-gray-200 text-gray-500"}`,children:"3"}),c.jsx("span",{className:"ml-3 text-sm font-medium",children:"Success"})]})]})}),c.jsxs("div",{className:"p-6",children:[c.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-[#F8E6B4]/30 to-[#E2D2A2]/30 rounded-2xl border border-[#AF524D]/20",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("img",{src:v.publicUrl||"/saved-cake.png",alt:v.name,className:"w-16 h-16 object-contain rounded-xl shadow-lg",onError:Se=>{Se.target.src="/saved-cake.png"}}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-[#492220] text-lg",children:v.name}),c.jsxs("p",{className:"text-[#AF524D] font-bold text-xl",children:["₱",v.price]}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsxs("span",{className:"bg-[#AF524D]/10 text-[#AF524D] px-2 py-1 rounded-full text-xs",children:[v.tier," Tier"]}),c.jsx("span",{className:"bg-[#DFAD56]/10 text-[#8B3A3A] px-2 py-1 rounded-full text-xs",children:v.theme})]})]})]})}),$===1&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"block text-sm font-semibold text-[#492220] flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-[#AF524D]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 0h10m-10 0a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V6a2 2 0 00-2-2M9 4h6"})}),"Quantity *"]}),c.jsxs("div",{className:"flex items-center justify-center gap-4 p-4 bg-[#F8E6B4]/20 rounded-2xl",children:[c.jsx("button",{type:"button",onClick:()=>Q(Math.max(1,ne-1)),className:"w-12 h-12 rounded-full bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white hover:from-[#8B3A3A] hover:to-[#AF524D] transition-all duration-300 flex items-center justify-center font-bold text-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"-"}),c.jsx("span",{className:"w-20 text-center font-bold text-[#492220] text-2xl bg-white/70 px-4 py-2 rounded-xl",children:ne}),c.jsx("button",{type:"button",onClick:()=>Q(ne+1),className:"w-12 h-12 rounded-full bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white hover:from-[#8B3A3A] hover:to-[#AF524D] transition-all duration-300 flex items-center justify-center font-bold text-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"+"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"block text-sm font-semibold text-[#492220] flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-[#AF524D]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Pickup/Delivery Date *"]}),c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white/70 border border-[#AF524D]/20 rounded-xl focus-within:ring-2 focus-within:ring-[#AF524D]/30 focus-within:border-[#AF524D] transition-all duration-200",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"w-5 h-5 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),c.jsx("div",{className:"flex-1",children:c.jsx("input",{type:"date",value:D,onChange:Se=>F(Se.target.value),min:new Date().toISOString().split("T")[0],className:"w-full bg-transparent border-none outline-none text-[#492220] font-medium cursor-pointer",required:!0})})]}),D&&c.jsx("div",{className:"mt-3 p-3 bg-gradient-to-r from-[#AF524D]/10 to-[#8B3A3A]/10 rounded-xl border border-[#AF524D]/20",children:c.jsxs("p",{className:"text-sm text-[#492220] font-medium",children:["Selected: ",new Date(D).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"block text-sm font-semibold text-[#492220] flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-[#AF524D]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Pickup/Delivery Time *"]}),c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white/70 border border-[#AF524D]/20 rounded-xl focus-within:ring-2 focus-within:ring-[#AF524D]/30 focus-within:border-[#AF524D] transition-all duration-200",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"w-5 h-5 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsx("div",{className:"flex-1",children:c.jsx("input",{type:"time",value:B,onChange:Se=>P(Se.target.value),className:"w-full bg-transparent border-none outline-none text-[#492220] font-medium cursor-pointer",required:!0})})]}),B&&c.jsx("div",{className:"mt-3 p-3 bg-gradient-to-r from-[#AF524D]/10 to-[#8B3A3A]/10 rounded-xl border border-[#AF524D]/20",children:c.jsxs("p",{className:"text-sm text-[#492220] font-medium",children:["Selected: ",new Date(`2000-01-01T${B}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]})})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"block text-sm font-semibold text-[#492220] flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-[#AF524D]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Order Type"]}),c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white/70 border border-[#AF524D]/20 rounded-xl cursor-pointer hover:bg-white/90 transition-all duration-200 focus-within:ring-2 focus-within:ring-[#AF524D]/30 focus-within:border-[#AF524D]",onClick:()=>M(!pe),children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"w-5 h-5 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),c.jsx("div",{className:"flex-1",children:c.jsx("span",{className:"text-[#492220] font-medium",children:H})}),c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:`w-5 h-5 text-[#AF524D] transition-transform duration-200 ${pe?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),pe&&c.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border-2 border-[#AF524D] rounded-lg shadow-lg z-10",children:[c.jsx("div",{className:"p-3 hover:bg-[#AF524D] hover:text-white cursor-pointer transition-colors border-b border-gray-100",onClick:()=>{N("Pickup"),M(!1)},children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),c.jsx("span",{className:"font-medium",children:"Pickup"})]})}),c.jsx("div",{className:"p-3 hover:bg-[#AF524D] hover:text-white cursor-pointer transition-colors",onClick:()=>{N("Delivery"),M(!1)},children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),c.jsx("span",{className:"font-medium",children:"Delivery"})]})})]}),H&&c.jsx("div",{className:"mt-2 p-2 bg-[#AF524D] bg-opacity-10 rounded-lg border border-[#AF524D] border-opacity-30",children:c.jsxs("p",{className:"text-sm text-[#381914] font-medium",children:["Selected: ",H]})})]})]}),H==="Delivery"&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"block text-sm font-semibold text-[#492220] flex items-center gap-2",children:[c.jsxs("svg",{className:"w-4 h-4 text-[#AF524D]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Delivery Address"]}),c.jsx("textarea",{value:V,onChange:Se=>G(Se.target.value),placeholder:"Enter your complete delivery address...",rows:"3",className:"w-full px-4 py-3 bg-white/70 border border-[#AF524D]/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#AF524D]/30 focus:border-[#AF524D] transition-all duration-200 text-[#492220] placeholder-[#492220]/50 resize-none"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-end pt-6",children:[c.jsx("button",{onClick:Me,className:"px-6 py-3 bg-white/70 text-[#492220] border border-[#AF524D]/30 rounded-xl hover:bg-[#AF524D]/10 hover:border-[#AF524D]/50 transition-all duration-200 font-semibold",children:"Cancel"}),c.jsx("button",{onClick:ce,disabled:!D||!B||H==="Delivery"&&!V,className:`px-6 py-3 rounded-xl transition-all duration-300 font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:transform-none ${!D||!B||H==="Delivery"&&!V?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white hover:from-[#8B3A3A] hover:to-[#AF524D]"}`,children:"Next"})]})]}),$===2&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("h3",{className:"text-lg font-semibold text-[#492220] mb-4 flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-[#AF524D]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Review Your Order"]}),c.jsxs("div",{className:"p-6 bg-gradient-to-r from-[#F8E6B4]/30 to-[#E2D2A2]/30 rounded-2xl border border-[#AF524D]/20",children:[c.jsx("h4",{className:"font-semibold text-[#492220] mb-6 text-lg",children:"Order Summary"}),c.jsxs("div",{className:"space-y-4 text-sm",children:[c.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/50 rounded-xl",children:[c.jsx("span",{className:"font-medium text-[#492220]",children:"Cake:"}),c.jsx("span",{className:"text-[#AF524D] font-semibold",children:v.name})]}),c.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/50 rounded-xl",children:[c.jsx("span",{className:"font-medium text-[#492220]",children:"Quantity:"}),c.jsx("span",{className:"text-[#8B3A3A] font-semibold",children:ne})]}),c.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/50 rounded-xl",children:[c.jsx("span",{className:"font-medium text-[#492220]",children:"Price per cake:"}),c.jsxs("span",{className:"text-[#AF524D] font-semibold",children:["₱",v.price]})]}),c.jsxs("div",{className:"flex justify-between items-center p-4 bg-gradient-to-r from-[#AF524D]/10 to-[#8B3A3A]/10 rounded-xl border-t-2 border-[#AF524D]/20",children:[c.jsx("span",{className:"font-bold text-[#492220] text-lg",children:"Total Price:"}),c.jsxs("span",{className:"font-bold text-[#AF524D] text-xl",children:["₱",v.price*ne]})]}),c.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/50 rounded-xl",children:[c.jsx("span",{className:"font-medium text-[#492220]",children:"Date:"}),c.jsx("span",{className:"text-[#8B3A3A] font-semibold",children:D?new Date(D).toLocaleDateString():"Not selected"})]}),c.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/50 rounded-xl",children:[c.jsx("span",{className:"font-medium text-[#492220]",children:"Time:"}),c.jsx("span",{className:"text-[#8B3A3A] font-semibold",children:B?new Date(`2000-01-01T${B}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"Not selected"})]}),c.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/50 rounded-xl",children:[c.jsx("span",{className:"font-medium text-[#492220]",children:"Type:"}),c.jsx("span",{className:"text-[#8B3A3A] font-semibold",children:H})]}),H==="Delivery"&&V&&c.jsxs("div",{className:"flex justify-between items-start p-3 bg-white/50 rounded-xl",children:[c.jsx("span",{className:"font-medium text-[#492220]",children:"Address:"}),c.jsx("span",{className:"text-right max-w-xs text-[#8B3A3A] font-semibold",children:V})]})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center pt-6 border-t border-[#AF524D]/20",children:[c.jsx("button",{onClick:je,className:"px-6 py-3 bg-white/70 text-[#492220] border border-[#AF524D]/30 rounded-xl hover:bg-[#AF524D]/10 hover:border-[#AF524D]/50 transition-all duration-200 font-semibold",children:"Back"}),c.jsx("button",{onClick:Ce,disabled:te,className:`px-6 py-3 rounded-xl transition-all duration-300 font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:transform-none ${te?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white hover:from-[#8B3A3A] hover:to-[#AF524D]"}`,children:te?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Placing Order..."]}):"Place Order"})]})]}),$===3&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("h3",{className:"text-lg font-semibold text-[#492220] mb-4 flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-[#AF524D]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Order Successfully Placed!"]}),c.jsxs("div",{className:"p-8 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-2xl text-center",children:[c.jsx("div",{className:"flex items-center justify-center gap-4 mb-6",children:c.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center shadow-lg",children:c.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),c.jsx("h4",{className:"font-bold text-green-800 text-2xl mb-3",children:"Thank you for your order!"}),c.jsx("p",{className:"text-green-700 text-lg mb-6",children:"Your order has been successfully placed and will be processed shortly."}),J&&c.jsx("div",{className:"p-4 bg-white/70 rounded-xl border border-green-200 mb-6",children:c.jsxs("p",{className:"text-sm text-green-600 font-medium",children:["Order ID: ",J]})})]}),c.jsx("div",{className:"flex gap-4 justify-center",children:c.jsx("button",{onClick:()=>{Me(),le()},className:"px-8 py-3 bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white font-semibold rounded-xl hover:from-[#8B3A3A] hover:to-[#AF524D] transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Done"})})]})]})]})})]})},q8=()=>{const{session:r}=zn(),[e,t]=C.useState("toPay"),[s,n]=C.useState([]),[a,l]=C.useState(!0),[d,h]=C.useState(!1),[f,g]=C.useState(!1),[x,v]=C.useState(null),[b,w]=C.useState(null),[_,T]=C.useState(!1),[S,E]=C.useState(!1),A=N=>N?xe.storage.from("cake").getPublicUrl(N).data.publicUrl:null,O=async()=>{if(r?.user)try{l(!0);const{data:N,error:V}=await xe.from("CUSTOMER").select("cus_id").eq("auth_user_id",r.user.id).single();if(V){console.error("Error fetching customer:",V),Ne.error("Failed to load customer information");return}const{data:G,error:ne}=await xe.from("ORDER").select(`
                     *,
                     CAKE-ORDERS (
                         co_id,
                         quantity,
                         cake_id,
                         CAKE (
                             cake_id,
                             name,
                             price,
                             cake_img
                         )
                     ),
                     CUSTOM-CAKE (
                         cc_id,
                         cc_img,
                         order_id,
                         cus_id
                     ),
                     PAYMENT (
                         payment_id,
                         payment_method,
                         amount_paid,
                         payment_status,
                         payment_date
                     )
                 `).eq("cus_id",N.cus_id).order("order_id",{ascending:!1});if(ne){console.error("Error fetching orders:",ne),Ne.error("Failed to load orders");return}const Q=[];G.forEach(ie=>{ie["CAKE-ORDERS"]&&ie["CAKE-ORDERS"].length>0&&ie["CAKE-ORDERS"].forEach(L=>{Q.push({order_id:ie.order_id,order_date:ie.order_date,delivery_method:ie.delivery_method,order_schedule:ie.order_schedule,delivery_address:ie.delivery_address,order_status:ie.order_status||"Pending",quantity:L.quantity,cake_id:L.cake_id,order_type:"regular",CAKE:L.CAKE?{...L.CAKE,publicUrl:A(L.CAKE.cake_img)}:null,payment:ie.PAYMENT?.[0]||null,total_price:L.CAKE?L.CAKE.price*L.quantity:0})}),ie["CUSTOM-CAKE"]&&ie["CUSTOM-CAKE"].length>0&&ie["CUSTOM-CAKE"].forEach(L=>{const $=xe.storage.from("cust.cakes").getPublicUrl(L.cc_img).data.publicUrl;Q.push({order_id:ie.order_id,order_date:ie.order_date,delivery_method:ie.delivery_method,order_schedule:ie.order_schedule,delivery_address:ie.delivery_address,order_status:ie.order_status||"Pending",quantity:1,cc_id:L.cc_id,order_type:"custom",CAKE:{name:"Custom Cake Design",price:5e3,publicUrl:$},payment:ie.PAYMENT?.[0]||null,total_price:5e3})})}),n(Q)}catch(N){console.error("Error fetching orders:",N),Ne.error("Failed to load orders")}finally{l(!1)}},D=N=>{v(N),g(!0),w(null)},F=N=>{const V=N.target.files[0];if(V){if(!V.type.startsWith("image/")){Ne.error("Please select an image file");return}if(V.size>5*1024*1024){Ne.error("File size must be less than 5MB");return}w(V)}},B=async N=>{if(!(S||!window.confirm(`Are you sure you want to cancel order #${N.order_id}? This action cannot be undone.`))){E(!0);try{const{error:G}=await xe.from("ORDER").update({order_status:"Cancelled"}).eq("order_id",N.order_id);if(G){console.error("Error cancelling order:",G),Ne.error("Failed to cancel order. Please try again.");return}const{error:ne}=await xe.from("PAYMENT").update({payment_status:"Cancelled"}).eq("order_id",N.order_id);ne&&console.error("Error updating payment status:",ne),Ne.success("Order cancelled successfully!"),O()}catch(G){console.error("Error cancelling order:",G),Ne.error("Failed to cancel order. Please try again.")}finally{E(!1)}}},P=async()=>{if(!b){Ne.error("Please select a receipt image");return}if(!x){Ne.error("No order selected");return}T(!0);try{const N=`receipts/${x.order_id}_${Date.now()}.${b.name.split(".").pop()}`,{data:V,error:G}=await xe.storage.from("receipts").upload(N,b);if(G){console.error("Error uploading file:",G),Ne.error("Failed to upload receipt");return}const{data:ne}=xe.storage.from("receipts").getPublicUrl(N),{error:Q}=await xe.from("PAYMENT").update({receipt:ne.publicUrl,payment_status:"Paid",payment_date:new Date().toISOString().split("T")[0]}).eq("order_id",x.order_id);if(Q){console.error("Error updating payment:",Q),Ne.error("Failed to update payment status");return}Ne.success("Receipt uploaded successfully!"),g(!1),v(null),w(null),O()}catch(N){console.error("Error processing payment:",N),Ne.error("Failed to process payment")}finally{T(!1)}},H=N=>{switch(N?.toLowerCase()){case"approved":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"cancelled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return C.useEffect(()=>{O()},[r?.user]),r?.user?a?c.jsx(Po,{message:"Loading..."}):c.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#f7f0e7] to-[#e5d6c4] py-8",children:[c.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"My Account"}),c.jsx("p",{className:"text-[#381914] opacity-80",children:"Manage your cart and view your orders"})]}),c.jsx("div",{className:"flex justify-center mb-8",children:c.jsxs("div",{className:"bg-white rounded-lg p-1 shadow-lg",children:[c.jsxs("button",{onClick:()=>t("toPay"),className:`px-6 py-3 rounded-md font-medium transition-colors ${e==="toPay"?"bg-[#AF524D] text-white":"text-[#381914] hover:bg-gray-100"}`,children:["To Pay (",s.filter(N=>N.order_status==="Pending").length,")"]}),c.jsxs("button",{onClick:()=>t("toReceive"),className:`px-6 py-3 rounded-md font-medium transition-colors ${e==="toReceive"?"bg-[#AF524D] text-white":"text-[#381914] hover:bg-gray-100"}`,children:["To Receive (",s.filter(N=>N.order_status==="Approved").length,")"]}),c.jsxs("button",{onClick:()=>t("completed"),className:`px-6 py-3 rounded-md font-medium transition-colors ${e==="completed"?"bg-[#AF524D] text-white":"text-[#381914] hover:bg-gray-100"}`,children:["Completed (",s.filter(N=>N.order_status==="Delivered").length,")"]}),c.jsxs("button",{onClick:()=>t("cancelled"),className:`px-6 py-3 rounded-md font-medium transition-colors ${e==="cancelled"?"bg-[#AF524D] text-white":"text-[#381914] hover:bg-gray-100"}`,children:["Cancelled (",s.filter(N=>N.order_status==="Cancelled").length,")"]})]})}),e==="toPay"&&c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-[#381914] mb-6",children:"Orders to Pay"}),s.filter(N=>N.order_status==="Pending").length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m6 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No pending orders"}),c.jsx("p",{className:"text-gray-500",children:"Your pending orders will appear here"})]}):c.jsx("div",{className:"space-y-4",children:s.filter(N=>N.order_status==="Pending").map(N=>c.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-4",children:[N.CAKE&&c.jsx("img",{src:N.CAKE.publicUrl||"/saved-cake.png",alt:N.CAKE.name,className:"w-16 h-16 object-cover rounded-lg",onError:V=>{V.target.src="/saved-cake.png"}}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"font-semibold text-[#381914]",children:[N.CAKE?N.CAKE.name:"Cake",N.order_type==="custom"&&c.jsx("span",{className:"ml-2 inline-block px-2 py-1 bg-[#AF524D] text-white text-xs rounded-full",children:"Custom"})]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID: ",N.order_id]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",N.quantity]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(N.order_date).toLocaleDateString()]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Method: ",N.delivery_method]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",N.order_status]}),N.payment&&c.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",N.payment.payment_status]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"font-semibold text-[#381914]",children:["₱",N.total_price]}),c.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${H(N.order_status)}`,children:N.order_status})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[c.jsx("button",{onClick:()=>B(N),disabled:S,className:`py-2 px-6 rounded-lg font-semibold text-sm transition-all duration-200 ${S?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-red-500 text-white hover:bg-red-600 shadow-md hover:shadow-lg transform hover:scale-105"}`,children:S?"Cancelling...":"Cancel Order"}),c.jsx("button",{onClick:()=>D(N),disabled:d,className:`py-2 px-6 rounded-lg font-semibold text-sm transition-all duration-200 ${d?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-[#AF524D] text-white hover:bg-[#8B3D3A] shadow-md hover:shadow-lg transform hover:scale-105"}`,children:"Pay Now"})]})]})]})},N.order_id))})]}),e==="toReceive"&&c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-[#381914] mb-6",children:"Orders to Receive"}),s.filter(N=>N.order_status==="Approved").length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No orders to receive"}),c.jsx("p",{className:"text-gray-500",children:"Your approved and paid orders will appear here"})]}):c.jsx("div",{className:"space-y-4",children:s.filter(N=>N.order_status==="Approved").map(N=>c.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-4",children:[N.CAKE&&c.jsx("img",{src:N.CAKE.publicUrl||"/saved-cake.png",alt:N.CAKE.name,className:"w-16 h-16 object-cover rounded-lg",onError:V=>{V.target.src="/saved-cake.png"}}),c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"font-semibold text-[#381914]",children:[N.CAKE?N.CAKE.name:"Cake",N.order_type==="custom"&&c.jsx("span",{className:"ml-2 inline-block px-2 py-1 bg-[#AF524D] text-white text-xs rounded-full",children:"Custom"})]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID: ",N.order_id]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",N.quantity]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(N.order_date).toLocaleDateString()]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Method: ",N.delivery_method]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",N.order_status]}),N.payment&&c.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",N.payment.payment_status]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"font-semibold text-[#381914]",children:["₱",N.total_price]}),c.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${H(N.order_status)}`,children:N.order_status})]})]})})]})},N.order_id))})]}),e==="completed"&&c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-[#381914] mb-6",children:"Delivered Orders"}),s.filter(N=>N.order_status==="Delivered").length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No delivered orders"}),c.jsx("p",{className:"text-gray-500",children:"Your delivered orders will appear here"})]}):c.jsx("div",{className:"space-y-4",children:s.filter(N=>N.order_status==="Delivered").map(N=>c.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-4",children:[N.CAKE&&c.jsx("img",{src:N.CAKE.publicUrl||"/saved-cake.png",alt:N.CAKE.name,className:"w-16 h-16 object-cover rounded-lg",onError:V=>{V.target.src="/saved-cake.png"}}),c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"font-semibold text-[#381914]",children:[N.CAKE?N.CAKE.name:"Cake",N.order_type==="custom"&&c.jsx("span",{className:"ml-2 inline-block px-2 py-1 bg-[#AF524D] text-white text-xs rounded-full",children:"Custom"})]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID: ",N.order_id]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",N.quantity]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(N.order_date).toLocaleDateString()]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Method: ",N.delivery_method]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",N.order_status]}),N.payment&&c.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",N.payment.payment_status]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"font-semibold text-[#381914]",children:["₱",N.total_price]}),c.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${H(N.order_status)}`,children:N.order_status})]})]})})]})},N.order_id))})]}),e==="cancelled"&&c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-[#381914] mb-6",children:"Cancelled Orders"}),s.filter(N=>N.order_status==="Cancelled").length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No cancelled orders"}),c.jsx("p",{className:"text-gray-500",children:"Your cancelled orders will appear here"})]}):c.jsx("div",{className:"space-y-4",children:s.filter(N=>N.order_status==="Cancelled").map(N=>c.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-4",children:[N.CAKE&&c.jsx("img",{src:N.CAKE.publicUrl||"/saved-cake.png",alt:N.CAKE.name,className:"w-16 h-16 object-cover rounded-lg",onError:V=>{V.target.src="/saved-cake.png"}}),c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"font-semibold text-[#381914]",children:[N.CAKE?N.CAKE.name:"Cake",N.order_type==="custom"&&c.jsx("span",{className:"ml-2 inline-block px-2 py-1 bg-[#AF524D] text-white text-xs rounded-full",children:"Custom"})]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID: ",N.order_id]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",N.quantity]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(N.order_date).toLocaleDateString()]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Method: ",N.delivery_method]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",N.order_status]}),N.payment&&c.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",N.payment.payment_status]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"font-semibold text-[#381914]",children:["₱",N.total_price]}),c.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${H(N.order_status)}`,children:N.order_status})]})]})})]})},N.order_id))})]})]}),f&&x&&c.jsx("div",{className:"fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-[#381914]",children:"Upload Receipt"}),c.jsx("button",{onClick:()=>{g(!1),v(null),w(null)},className:"text-gray-500 hover:text-gray-700 text-2xl font-bold cursor-pointer",children:"×"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-gray-600 mb-2",children:"Order Details:"}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[c.jsxs("p",{className:"text-sm text-gray-700",children:[c.jsx("span",{className:"font-semibold",children:"Order ID:"})," ",x.order_id]}),c.jsxs("p",{className:"text-sm text-gray-700",children:[c.jsx("span",{className:"font-semibold",children:"Item:"})," ",x.CAKE?x.CAKE.name:"Cake"]}),c.jsxs("p",{className:"text-sm text-gray-700",children:[c.jsx("span",{className:"font-semibold",children:"Total Amount:"})," ₱",x.total_price]}),c.jsxs("p",{className:"text-sm text-gray-700",children:[c.jsx("span",{className:"font-semibold",children:"Minimum Payment (50%):"})," ₱",(x.total_price*.5).toFixed(2)]})]}),c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"Payment Instructions"}),c.jsxs("p",{className:"text-xs text-blue-700",children:["Please pay at least ",c.jsxs("span",{className:"font-semibold",children:["₱",(x.total_price*.5).toFixed(2)]})," to confirm your order. The remaining balance of ",c.jsxs("span",{className:"font-semibold",children:["₱",(x.total_price*.5).toFixed(2)]})," can be paid upon pickup or delivery."]})]})]})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Receipt Image"}),c.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-[#AF524D] transition-colors",children:[c.jsx("input",{type:"file",accept:"image/*",onChange:F,className:"hidden",id:"receipt-upload"}),c.jsx("label",{htmlFor:"receipt-upload",className:"cursor-pointer",children:b?c.jsxs("div",{children:[c.jsx("svg",{className:"w-12 h-12 text-green-500 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("p",{className:"text-sm text-gray-600",children:b.name}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click to change file"})]}):c.jsxs("div",{children:[c.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),c.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload receipt"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, JPEG up to 5MB"})]})})]})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>{g(!1),v(null),w(null)},className:"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),c.jsx("button",{onClick:P,disabled:!b||_,className:`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${!b||_?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-[#AF524D] text-white hover:bg-[#8B3D3A]"}`,children:_?"Uploading...":"Upload Receipt"})]})]})})]}):c.jsx("div",{className:"min-h-screen bg-gradient-to-b from-[#f7f0e7] to-[#e5d6c4] py-8",children:c.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"My Account"}),c.jsx("p",{className:"text-[#381914] opacity-80",children:"Manage your cart and view your orders"})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[c.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Please Log In First"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"You need to be logged in to access your cart and orders."}),c.jsx(It,{to:"/login",className:"inline-block bg-[#AF524D] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#8B3D3A] transition-colors",children:"Go to Login"})]})]})})};function U(r,e,t){return(e=function(s){var n=function(a,l){if(typeof a!="object"||!a)return a;var d=a[Symbol.toPrimitive];if(d!==void 0){var h=d.call(a,l);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(a)}(s,"string");return typeof n=="symbol"?n:n+""}(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Wb(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,s)}return t}function I(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wb(Object(t),!0).forEach(function(s){U(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Wb(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function jt(r,e){if(r==null)return{};var t,s,n=function(l,d){if(l==null)return{};var h={};for(var f in l)if({}.hasOwnProperty.call(l,f)){if(d.indexOf(f)>=0)continue;h[f]=l[f]}return h}(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)t=a[s],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function en(r,e){return e||(e=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(e)}}))}class Yb{constructor(){U(this,"browserShadowBlurConstant",1),U(this,"DPI",96),U(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),U(this,"perfLimitSizeTotal",2097152),U(this,"maxCacheSideLimit",4096),U(this,"minCacheSideLimit",256),U(this,"disableStyleCopyPaste",!1),U(this,"enableGLFiltering",!0),U(this,"textureSize",4096),U(this,"forceGLPutImageData",!1),U(this,"cachesBoundsOfCurve",!1),U(this,"fontPaths",{}),U(this,"NUM_FRACTION_DIGITS",4)}}const nt=new class extends Yb{constructor(r){super(),this.configure(r)}configure(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,r)}addFonts(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=I(I({},this.fontPaths),r)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(r=>{delete this.fontPaths[r]})}clearFonts(){this.fontPaths={}}restoreDefaults(r){const e=new Yb,t=r?.reduce((s,n)=>(s[n]=e[n],s),{})||e;this.configure(t)}},bi=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];return console[r]("fabric",...t)};class Xr extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class X8 extends Xr{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class K8{}class Z8 extends K8{testPrecision(e,t){const s="precision ".concat(t,` float;
void main(){}`),n=e.createShader(e.FRAGMENT_SHADER);return!!n&&(e.shaderSource(n,s),e.compileShader(n),!!e.getShaderParameter(n,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(s=>this.testPrecision(t,s)),t.getExtension("WEBGL_lose_context").loseContext(),bi("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const Q8={};let qb;const Jr=()=>qb||(qb={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new Z8,dispose(){},copyPasteData:Q8}),Fo=()=>Jr().document,Nh=()=>Jr().window,v4=()=>{var r;return Math.max((r=nt.devicePixelRatio)!==null&&r!==void 0?r:Nh().devicePixelRatio,1)},dc=new class{constructor(){U(this,"charWidthsCache",{}),U(this,"boundsOfCurveCache",{})}getFontCache(r){let{fontFamily:e,fontStyle:t,fontWeight:s}=r;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const n=this.charWidthsCache[e],a="".concat(t.toLowerCase(),"_").concat((s+"").toLowerCase());return n[a]||(n[a]={}),n[a]}clearFontCache(r){(r=(r||"").toLowerCase())?this.charWidthsCache[r]&&delete this.charWidthsCache[r]:this.charWidthsCache={}}limitDimsByArea(r){const{perfLimitSizeTotal:e}=nt,t=Math.sqrt(e*r);return[Math.floor(t),Math.floor(e/t)]}},_p="6.7.1";function Yd(){}const Uc=Math.PI/2,dh=2*Math.PI,L0=Math.PI/180,As=Object.freeze([1,0,0,1,0,0]),R0=16,ui=.4477152502,Ke="center",lt="left",Fs="top",Sp="bottom",Pt="right",Bs="none",P0=/\r?\n/,y4="moving",Dh="scaling",b4="rotating",F0="rotate",w4="skewing",jc="resizing",J8="modifyPoly",e9="modifyPath",hh="changed",Oh="scale",Us="scaleX",xr="scaleY",Bo="skewX",zo="skewY",Kt="fill",zs="stroke",fh="modified",lo="json",kg="svg",De=new class{constructor(){this[lo]=new Map,this[kg]=new Map}has(r){return this[lo].has(r)}getClass(r){const e=this[lo].get(r);if(!e)throw new Xr("No class registered for ".concat(r));return e}setClass(r,e){e?this[lo].set(e,r):(this[lo].set(r.type,r),this[lo].set(r.type.toLowerCase(),r))}getSVGClass(r){return this[kg].get(r)}setSVGClass(r,e){this[kg].set(e??r.type.toLowerCase(),r)}},mh=new class extends Array{remove(r){const e=this.indexOf(r);e>-1&&this.splice(e,1)}cancelAll(){const r=this.splice(0);return r.forEach(e=>e.abort()),r}cancelByCanvas(r){if(!r)return[];const e=this.filter(t=>{var s;return t.target===r||typeof t.target=="object"&&((s=t.target)===null||s===void 0?void 0:s.canvas)===r});return e.forEach(t=>t.abort()),e}cancelByTarget(r){if(!r)return[];const e=this.filter(t=>t.target===r);return e.forEach(t=>t.abort()),e}};class t9{constructor(){U(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(s=>{let[n,a]=s;this.on(n,a)}),()=>this.off(e);if(t){const s=e;return this.__eventListeners[s]||(this.__eventListeners[s]=[]),this.__eventListeners[s].push(t),()=>this.off(s,t)}return()=>!1}once(e,t){if(typeof e=="object"){const s=[];return Object.entries(e).forEach(n=>{let[a,l]=n;s.push(this.once(a,l))}),()=>s.forEach(n=>n())}if(t){const s=this.on(e,function(){for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];t.call(this,...a),s()});return s}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const s=this.__eventListeners[e],n=s.indexOf(t);n>-1&&s.splice(n,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const s in this.__eventListeners)this._removeEventListener(s);else typeof e=="object"?Object.entries(e).forEach(s=>{let[n,a]=s;this._removeEventListener(n,a)}):this._removeEventListener(e,t)}fire(e,t){var s;if(!this.__eventListeners)return;const n=(s=this.__eventListeners[e])===null||s===void 0?void 0:s.concat();if(n)for(let a=0;a<n.length;a++)n[a].call(this,t||{})}}const ho=(r,e)=>{const t=r.indexOf(e);return t!==-1&&r.splice(t,1),r},Ln=r=>{if(r===0)return 1;switch(Math.abs(r)/Uc){case 1:case 3:return 0;case 2:return-1}return Math.cos(r)},Rn=r=>{if(r===0)return 0;const e=r/Uc,t=Math.sign(r);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(r)};class se{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new se(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new se(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new se(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new se(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new se(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new se(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new se(this.x/e.x,this.y/e.y)}scalarDivide(e){return new se(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new se(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,s=this.y-e.y;return Math.sqrt(t*t+s*s)}midPointFrom(e){return this.lerp(e)}min(e){return new se(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new se(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,s=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=s}clone(){return new se(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:B0;const s=Rn(e),n=Ln(e),a=this.subtract(t);return new se(a.x*n-a.y*s,a.x*s+a.y*n).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new se(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const B0=new se(0,0),qd=r=>!!r&&Array.isArray(r._objects);function _4(r){class e extends r{constructor(){super(...arguments),U(this,"_objects",[])}_onObjectAdded(s){}_onObjectRemoved(s){}_onStackOrderChanged(s){}add(){for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];const l=this._objects.push(...n);return n.forEach(d=>this._onObjectAdded(d)),l}insertAt(s){for(var n=arguments.length,a=new Array(n>1?n-1:0),l=1;l<n;l++)a[l-1]=arguments[l];return this._objects.splice(s,0,...a),a.forEach(d=>this._onObjectAdded(d)),this._objects.length}remove(){const s=this._objects,n=[];for(var a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];return l.forEach(h=>{const f=s.indexOf(h);f!==-1&&(s.splice(f,1),n.push(h),this._onObjectRemoved(h))}),n}forEachObject(s){this.getObjects().forEach((n,a,l)=>s(n,a,l))}getObjects(){for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return n.length===0?[...this._objects]:this._objects.filter(l=>l.isType(...n))}item(s){return this._objects[s]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(s,n){return!!this._objects.includes(s)||!!n&&this._objects.some(a=>a instanceof e&&a.contains(s,!0))}complexity(){return this._objects.reduce((s,n)=>s+=n.complexity?n.complexity():0,0)}sendObjectToBack(s){return!(!s||s===this._objects[0])&&(ho(this._objects,s),this._objects.unshift(s),this._onStackOrderChanged(s),!0)}bringObjectToFront(s){return!(!s||s===this._objects[this._objects.length-1])&&(ho(this._objects,s),this._objects.push(s),this._onStackOrderChanged(s),!0)}sendObjectBackwards(s,n){if(!s)return!1;const a=this._objects.indexOf(s);if(a!==0){const l=this.findNewLowerIndex(s,a,n);return ho(this._objects,s),this._objects.splice(l,0,s),this._onStackOrderChanged(s),!0}return!1}bringObjectForward(s,n){if(!s)return!1;const a=this._objects.indexOf(s);if(a!==this._objects.length-1){const l=this.findNewUpperIndex(s,a,n);return ho(this._objects,s),this._objects.splice(l,0,s),this._onStackOrderChanged(s),!0}return!1}moveObjectTo(s,n){return s!==this._objects[n]&&(ho(this._objects,s),this._objects.splice(n,0,s),this._onStackOrderChanged(s),!0)}findNewLowerIndex(s,n,a){let l;if(a){l=n;for(let d=n-1;d>=0;--d)if(s.isOverlapping(this._objects[d])){l=d;break}}else l=n-1;return l}findNewUpperIndex(s,n,a){let l;if(a){l=n;for(let d=n+1;d<this._objects.length;++d)if(s.isOverlapping(this._objects[d])){l=d;break}}else l=n+1;return l}collectObjects(s){let{left:n,top:a,width:l,height:d}=s,{includeIntersecting:h=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const f=[],g=new se(n,a),x=g.add(new se(l,d));for(let v=this._objects.length-1;v>=0;v--){const b=this._objects[v];b.selectable&&b.visible&&(h&&b.intersectsWithRect(g,x)||b.isContainedWithinRect(g,x)||h&&b.containsPoint(g)||h&&b.containsPoint(x))&&f.push(b)}return f}}return e}class S4 extends t9{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function Xd(r){return Nh().requestAnimationFrame(r)}function s9(r){return Nh().cancelAnimationFrame(r)}let r9=0;const wi=()=>r9++,Pn=()=>{const r=Fo().createElement("canvas");if(!r||r.getContext===void 0)throw new Xr("Failed to create `canvas` element");return r},n9=()=>Fo().createElement("img"),vr=r=>{const e=Pn();return e.width=r.width,e.height=r.height,e},j4=(r,e,t)=>r.toDataURL("image/".concat(e),t),C4=(r,e,t)=>new Promise((s,n)=>{r.toBlob(s,"image/".concat(e),t)}),Ft=r=>r*L0,Fn=r=>r/L0,i9=r=>r.every((e,t)=>e===As[t]),Rs=(r,e,t)=>new se(r).transform(e,t),Or=r=>{const e=1/(r[0]*r[3]-r[1]*r[2]),t=[e*r[3],-e*r[1],-e*r[2],e*r[0],0,0],{x:s,y:n}=new se(r[4],r[5]).transform(t,!0);return t[4]=-s,t[5]=-n,t},ms=(r,e,t)=>[r[0]*e[0]+r[2]*e[1],r[1]*e[0]+r[3]*e[1],r[0]*e[2]+r[2]*e[3],r[1]*e[2]+r[3]*e[3],t?0:r[0]*e[4]+r[2]*e[5]+r[4],t?0:r[1]*e[4]+r[3]*e[5]+r[5]],z0=(r,e)=>r.reduceRight((t,s)=>s&&t?ms(s,t,e):s||t,void 0)||As.concat(),T4=r=>{let[e,t]=r;return Math.atan2(t,e)},gh=r=>{const e=T4(r),t=Math.pow(r[0],2)+Math.pow(r[1],2),s=Math.sqrt(t),n=(r[0]*r[3]-r[2]*r[1])/s,a=Math.atan2(r[0]*r[2]+r[1]*r[3],t);return{angle:Fn(e),scaleX:s,scaleY:n,skewX:Fn(a),skewY:0,translateX:r[4]||0,translateY:r[5]||0}},Vc=function(r){return[1,0,0,1,r,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Uo(){let{angle:r=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=Ft(r),n=Ln(s),a=Rn(s);return[n,a,-a,n,e?e-(n*e-a*t):0,t?t-(a*e+n*t):0]}const U0=function(r){return[r,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:r,0,0]},k4=r=>Math.tan(Ft(r)),A4=r=>[1,0,k4(r),1,0,0],E4=r=>[1,k4(r),0,1,0,0],Mh=r=>{let{scaleX:e=1,scaleY:t=1,flipX:s=!1,flipY:n=!1,skewX:a=0,skewY:l=0}=r,d=U0(s?-e:e,n?-t:t);return a&&(d=ms(d,A4(a),!0)),l&&(d=ms(d,E4(l),!0)),d},a9=r=>{const{translateX:e=0,translateY:t=0,angle:s=0}=r;let n=Vc(e,t);s&&(n=ms(n,Uo({angle:s})));const a=Mh(r);return i9(a)||(n=ms(n,a)),n},Kd=function(r){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(s,n){if(e&&e.aborted)return n(new X8("loadImage"));const a=n9();let l;e&&(l=function(h){a.src="",n(h)},e.addEventListener("abort",l,{once:!0}));const d=function(){a.onload=a.onerror=null,l&&e?.removeEventListener("abort",l),s(a)};r?(a.onload=d,a.onerror=function(){l&&e?.removeEventListener("abort",l),n(new Xr("Error loading ".concat(a.src)))},t&&(a.crossOrigin=t),a.src=r):d()})},Cc=function(r){let{signal:e,reviver:t=Yd}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((s,n)=>{const a=[];e&&e.addEventListener("abort",n,{once:!0}),Promise.all(r.map(l=>De.getClass(l.type).fromObject(l,{signal:e}).then(d=>(t(l,d),a.push(d),d)))).then(s).catch(l=>{a.forEach(d=>{d.dispose&&d.dispose()}),n(l)}).finally(()=>{e&&e.removeEventListener("abort",n)})})},Lh=function(r){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,s)=>{const n=[];e&&e.addEventListener("abort",s,{once:!0});const a=Object.values(r).map(d=>d&&d.type&&De.has(d.type)?Cc([d],{signal:e}).then(h=>{let[f]=h;return n.push(f),f}):d),l=Object.keys(r);Promise.all(a).then(d=>d.reduce((h,f,g)=>(h[l[g]]=f,h),{})).then(t).catch(d=>{n.forEach(h=>{h.dispose&&h.dispose()}),s(d)}).finally(()=>{e&&e.removeEventListener("abort",s)})})},Vo=function(r){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in r&&(e[t]=r[t]),e),{})},V0=(r,e)=>Object.keys(r).reduce((t,s)=>(e(r[s],s,r)&&(t[s]=r[s]),t),{}),yt=(r,e)=>parseFloat(Number(r).toFixed(e)),Tc=r=>"matrix("+r.map(e=>yt(e,nt.NUM_FRACTION_DIGITS)).join(" ")+")",gr=r=>!!r&&r.toLive!==void 0,Xb=r=>!!r&&typeof r.toObject=="function",Kb=r=>!!r&&r.offsetX!==void 0&&"source"in r,Xi=r=>!!r&&"multiSelectionStacking"in r;function N4(r){const e=r&&Dr(r);let t=0,s=0;if(!r||!e)return{left:t,top:s};let n=r;const a=e.documentElement,l=e.body||{scrollLeft:0,scrollTop:0};for(;n&&(n.parentNode||n.host)&&(n=n.parentNode||n.host,n===e?(t=l.scrollLeft||a.scrollLeft||0,s=l.scrollTop||a.scrollTop||0):(t+=n.scrollLeft||0,s+=n.scrollTop||0),n.nodeType!==1||n.style.position!=="fixed"););return{left:t,top:s}}const Dr=r=>r.ownerDocument||null,D4=r=>{var e;return((e=r.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},O4=function(r,e,t){let{width:s,height:n}=t,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;r.width=s,r.height=n,a>1&&(r.setAttribute("width",(s*a).toString()),r.setAttribute("height",(n*a).toString()),e.scale(a,a))},jp=(r,e)=>{let{width:t,height:s}=e;t&&(r.style.width=typeof t=="number"?"".concat(t,"px"):t),s&&(r.style.height=typeof s=="number"?"".concat(s,"px"):s)};function Zb(r){return r.onselectstart!==void 0&&(r.onselectstart=()=>!1),r.style.userSelect=Bs,r}class M4{constructor(e){U(this,"_originalCanvasStyle",void 0),U(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(s=e)&&s.getContext!==void 0?e:e&&Fo().getElementById(e)||Pn();var s;if(t.hasAttribute("data-fabric"))throw new Xr("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:s}=e;const{el:n}=this.lower;n.classList.remove("lower-canvas"),n.removeAttribute("data-fabric"),n.setAttribute("width","".concat(t)),n.setAttribute("height","".concat(s)),n.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:s,ctx:n}=this.lower;O4(s,n,e,t)}setCSSDimensions(e){jp(this.lower.el,e)}calcOffset(){return function(e){var t;const s=e&&Dr(e),n={left:0,top:0};if(!s)return n;const a=((t=D4(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};n.left+=parseInt(a.borderLeftWidth,10)||0,n.top+=parseInt(a.borderTopWidth,10)||0,n.left+=parseInt(a.paddingLeft,10)||0,n.top+=parseInt(a.paddingTop,10)||0;let l={left:0,top:0};const d=s.documentElement;e.getBoundingClientRect!==void 0&&(l=e.getBoundingClientRect());const h=N4(e);return{left:l.left+h.left-(d.clientLeft||0)+n.left,top:l.top+h.top-(d.clientTop||0)+n.top}}(this.lower.el)}dispose(){Jr().dispose(this.lower.el),delete this.lower}}const o9={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...As]};class Ic extends _4(S4){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return Ic.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new M4(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];const a=super.insertAt(e,...s);return s.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),a}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(bi("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?v4():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:s=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const n=I({width:this.width,height:this.height},e);this.elements.setDimensions(n,this.getRetinaScaling()),this.hasLostContext=!0,this.width=n.width,this.height=n.height}s||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const s=e,n=[...this.viewportTransform],a=Rs(e,Or(n));n[0]=t,n[3]=t;const l=Rs(a,n);n[4]+=s.x-l.x,n[5]+=s.y-l.y,this.setViewportTransform(n)}setZoom(e){this.zoomToPoint(new se(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new se(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Xd(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,s=Or(this.viewportTransform),n=Rs({x:0,y:0},s),a=Rs({x:e,y:t},s),l=n.min(a),d=n.max(a);return this.vptCoords={tl:l,tr:new se(d.x,l.y),bl:new se(l.x,d.y),br:d}}cancelRequestedRender(){this.nextRenderHandle&&(s9(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const s=this.viewportTransform,n=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(s[0],s[1],s[2],s[3],s[4],s[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),n&&(n._set("canvas",this),n.shouldCache(),n._transformDone=!0,n.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,n)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const s=this.viewportTransform;e.save(),e.transform(...s),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let s=0,n=t.length;s<n;++s)t[s]&&t[s].render(e)}_renderBackgroundOrOverlay(e,t){const s=this["".concat(t,"Color")],n=this["".concat(t,"Image")],a=this.viewportTransform,l=this["".concat(t,"Vpt")];if(!s&&!n)return;const d=gr(s);if(s){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=d?s.toLive(e):s,l&&e.transform(...a),d){e.transform(1,0,0,1,s.offsetX||0,s.offsetY||0);const h=s.gradientTransform||s.patternTransform;h&&e.transform(...h)}e.fill(),e.restore()}if(n){e.save();const{skipOffscreen:h}=this;this.skipOffscreen=l,l&&e.transform(...a),n.render(e),this.skipOffscreen=h,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new se(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new se(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new se(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new se(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new se(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Rs(this.getCenterPoint(),Or(this.viewportTransform))}_centerObject(e,t){e.setXY(t,Ke,Ke),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const s=this.clipPath,n=s&&!s.excludeFromExport?this._toObject(s,e,t):null;return I(I(I({version:_p},Vo(this,t)),{},{objects:this._objects.filter(a=>!a.excludeFromExport).map(a=>this._toObject(a,e,t))},this.__serializeBgOverlay(e,t)),n?{clipPath:n}:null)}_toObject(e,t,s){let n;this.includeDefaultValues||(n=e.includeDefaultValues,e.includeDefaultValues=!1);const a=e[t](s);return this.includeDefaultValues||(e.includeDefaultValues=!!n),a}__serializeBgOverlay(e,t){const s={},n=this.backgroundImage,a=this.overlayImage,l=this.backgroundColor,d=this.overlayColor;return gr(l)?l.excludeFromExport||(s.background=l.toObject(t)):l&&(s.background=l),gr(d)?d.excludeFromExport||(s.overlay=d.toObject(t)):d&&(s.overlay=d),n&&!n.excludeFromExport&&(s.backgroundImage=this._toObject(n,e,t)),a&&!a.excludeFromExport&&(s.overlayImage=this._toObject(a,e,t)),s}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const s=[];return this._setSVGPreamble(s,e),this._setSVGHeader(s,e),this.clipPath&&s.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(s,"background"),this._setSVGBgOverlayImage(s,"backgroundImage",t),this._setSVGObjects(s,t),this.clipPath&&s.push(`</g>
`),this._setSVGBgOverlayColor(s,"overlay"),this._setSVGBgOverlayImage(s,"overlayImage",t),s.push("</svg>"),s.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const s=t.width||"".concat(this.width),n=t.height||"".concat(this.height),a=nt.NUM_FRACTION_DIGITS,l=t.viewBox;let d;if(l)d='viewBox="'.concat(l.x," ").concat(l.y," ").concat(l.width," ").concat(l.height,'" ');else if(this.svgViewportTransformation){const h=this.viewportTransform;d='viewBox="'.concat(yt(-h[4]/h[0],a)," ").concat(yt(-h[5]/h[3],a)," ").concat(yt(this.width/h[0],a)," ").concat(yt(this.height/h[3],a),'" ')}else d='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',s,'" ','height="',n,'" ',d,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",_p,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(wi()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(gr(t)){const s=this["".concat(e,"Vpt")],n=this.viewportTransform,a={isType:()=>!1,width:this.width/(s?n[0]:1),height:this.height/(s?n[3]:1)};return t.toSVG(a,{additionalTransform:s?Tc(n):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},s=nt.fontPaths;this._objects.forEach(function a(l){e.push(l),qd(l)&&l._objects.forEach(a)}),e.forEach(a=>{if(!(l=a)||typeof l._renderText!="function")return;var l;const{styles:d,fontFamily:h}=a;!t[h]&&s[h]&&(t[h]=!0,d&&Object.values(d).forEach(f=>{Object.values(f).forEach(g=>{let{fontFamily:x=""}=g;!t[x]&&s[x]&&(t[x]=!0)})}))});const n=Object.keys(t).map(a=>`		@font-face {
			font-family: '`.concat(a,`';
			src: url('`).concat(s[a],`');
		}
`)).join("");return n?`	<style type="text/css"><![CDATA[
`.concat(n,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(s=>{s.excludeFromExport||this._setSVGObject(e,s,t)})}_setSVGObject(e,t,s){e.push(t.toSVG(s))}_setSVGBgOverlayImage(e,t,s){const n=this[t];n&&!n.excludeFromExport&&n.toSVG&&e.push(n.toSVG(s))}_setSVGBgOverlayColor(e,t){const s=this["".concat(t,"Color")];if(s)if(gr(s)){const n=s.repeat||"",a=this.width,l=this.height,d=this["".concat(t,"Vpt")]?Tc(Or(this.viewportTransform)):"";e.push('<rect transform="'.concat(d," translate(").concat(a/2,",").concat(l/2,')" x="').concat(s.offsetX-a/2,'" y="').concat(s.offsetY-l/2,'" width="').concat(n!=="repeat-y"&&n!=="no-repeat"||!Kb(s)?a:s.source.width,'" height="').concat(n!=="repeat-x"&&n!=="no-repeat"||!Kb(s)?l:s.source.height,'" fill="url(#SVGID_').concat(s.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',s,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:s}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Xr("`json` is undefined"));const n=typeof e=="string"?JSON.parse(e):e,{objects:a=[],backgroundImage:l,background:d,overlayImage:h,overlay:f,clipPath:g}=n,x=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Cc(a,{reviver:t,signal:s}),Lh({backgroundImage:l,backgroundColor:d,overlayImage:h,overlayColor:f,clipPath:g},{signal:s})]).then(v=>{let[b,w]=v;return this.clear(),this.add(...b),this.set(n),this.set(w),this.renderOnAddRemove=x,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=vr(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:s=1,multiplier:n=1,enableRetinaScaling:a=!1}=e,l=n*(a?this.getRetinaScaling():1);return j4(this.toCanvasElement(l,e),t,s)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:s=1,multiplier:n=1,enableRetinaScaling:a=!1}=e,l=n*(a?this.getRetinaScaling():1);return C4(this.toCanvasElement(l,e),t,s)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:s,left:n,top:a,filter:l}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const d=(t||this.width)*e,h=(s||this.height)*e,f=this.getZoom(),g=this.width,x=this.height,v=this.skipControlsDrawing,b=f*e,w=this.viewportTransform,_=[b,0,0,b,(w[4]-(n||0))*e,(w[5]-(a||0))*e],T=this.enableRetinaScaling,S=vr({width:d,height:h}),E=l?this._objects.filter(A=>l(A)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=_,this.width=d,this.height=h,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(S.getContext("2d"),E),this.viewportTransform=w,this.width=g,this.height=x,this.calcViewportBoundaries(),this.enableRetinaScaling=T,this.skipControlsDrawing=v,S}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),mh.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const s=()=>{this.destroy(),e(!0)};s.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=s:s()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}U(Ic,"ownDefaults",o9);const l9=["touchstart","touchmove","touchend"],c9=r=>{const e=N4(r.target),t=function(s){const n=s.changedTouches;return n&&n[0]?n[0]:s}(r);return new se(t.clientX+e.left,t.clientY+e.top)},Cp=r=>l9.includes(r.type)||r.pointerType==="touch",Qb=r=>{r.preventDefault(),r.stopPropagation()},An=r=>{let e=0,t=0,s=0,n=0;for(let a=0,l=r.length;a<l;a++){const{x:d,y:h}=r[a];(d>s||!a)&&(s=d),(d<e||!a)&&(e=d),(h>n||!a)&&(n=h),(h<t||!a)&&(t=h)}return{left:e,top:t,width:s-e,height:n-t}},u9=["translateX","translateY","scaleX","scaleY"],d9=(r,e)=>ph(r,ms(e,r.calcOwnMatrix())),ph=(r,e)=>{const t=gh(e),{translateX:s,translateY:n,scaleX:a,scaleY:l}=t,d=jt(t,u9),h=new se(s,n);r.flipX=!1,r.flipY=!1,Object.assign(r,d),r.set({scaleX:a,scaleY:l}),r.setPositionByOrigin(h,Ke,Ke)},h9=r=>{r.scaleX=1,r.scaleY=1,r.skewX=0,r.skewY=0,r.flipX=!1,r.flipY=!1,r.rotate(0)},L4=r=>({scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,angle:r.angle,left:r.left,flipX:r.flipX,flipY:r.flipY,top:r.top}),I0=(r,e,t)=>{const s=r/2,n=e/2,a=[new se(-s,-n),new se(s,-n),new se(-s,n),new se(s,n)].map(d=>d.transform(t)),l=An(a);return new se(l.width,l.height)},Rh=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:As;return ms(Or(arguments.length>1&&arguments[1]!==void 0?arguments[1]:As),r)},_o=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:As,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:As;return r.transform(Rh(e,t))},f9=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:As,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:As;return r.transform(Rh(e,t),!0)},m9=(r,e,t)=>{const s=Rh(e,t);return ph(r,ms(s,r.calcOwnMatrix())),s},R4=(r,e)=>{var t;const{transform:{target:s}}=e;(t=s.canvas)===null||t===void 0||t.fire("object:".concat(r),I(I({},e),{},{target:s})),s.fire(r,e)},g9={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Ht=r=>typeof r=="string"?g9[r]:r-.5,xh="not-allowed";function P4(r){return Ht(r.originX)===Ht(Ke)&&Ht(r.originY)===Ht(Ke)}function Jb(r){return .5-Ht(r)}const Lr=(r,e)=>r[e],F4=(r,e,t,s)=>({e:r,transform:e,pointer:new se(t,s)});function B4(r,e){const t=r.getTotalAngle()+Fn(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function H0(r,e,t,s,n){var a;let{target:l,corner:d}=r;const h=l.controls[d],f=((a=l.canvas)===null||a===void 0?void 0:a.getZoom())||1,g=l.padding/f,x=function(v,b,w,_){const T=v.getRelativeCenterPoint(),S=w!==void 0&&_!==void 0?v.translateToGivenOrigin(T,Ke,Ke,w,_):new se(v.left,v.top);return(v.angle?b.rotate(-Ft(v.angle),T):b).subtract(S)}(l,new se(s,n),e,t);return x.x>=g&&(x.x-=g),x.x<=-g&&(x.x+=g),x.y>=g&&(x.y-=g),x.y<=g&&(x.y+=g),x.x-=h.offsetX,x.y-=h.offsetY,x}const p9=(r,e,t,s)=>{const{target:n,offsetX:a,offsetY:l}=e,d=t-a,h=s-l,f=!Lr(n,"lockMovementX")&&n.left!==d,g=!Lr(n,"lockMovementY")&&n.top!==h;return f&&n.set(lt,d),g&&n.set(Fs,h),(f||g)&&R4(y4,F4(r,e,t,s)),f||g},ew={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Ag=(r,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+6*(e-r)*t:t<.5?e:t<2/3?r+(e-r)*(2/3-t)*6:r),tw=(r,e,t,s)=>{r/=255,e/=255,t/=255;const n=Math.max(r,e,t),a=Math.min(r,e,t);let l,d;const h=(n+a)/2;if(n===a)l=d=0;else{const f=n-a;switch(d=h>.5?f/(2-n-a):f/(n+a),n){case r:l=(e-t)/f+(e<t?6:0);break;case e:l=(t-r)/f+2;break;case t:l=(r-e)/f+4}l/=6}return[Math.round(360*l),Math.round(100*d),Math.round(100*h),s]},sw=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(r)/(r.endsWith("%")?100:1)},md=r=>Math.min(Math.round(r),255).toString(16).toUpperCase().padStart(2,"0"),rw=r=>{let[e,t,s,n=1]=r;const a=Math.round(.3*e+.59*t+.11*s);return[a,a,a,n]};class ht{constructor(e){if(U(this,"isUnrecognised",!1),e)if(e instanceof ht)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,s,n,a=1]=e;this.setSource([t,s,n,a])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in ew&&(e=ew[e]),e==="transparent"?[255,255,255,0]:ht.sourceFromHex(e)||ht.sourceFromRgb(e)||ht.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,s]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(s,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,s]=tw(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(s,"%)")}toHsla(){const[e,t,s,n]=tw(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(s,"%,").concat(n,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,s,n]=this.getSource();return"".concat(md(e)).concat(md(t)).concat(md(s)).concat(md(Math.round(255*n)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(rw(this.getSource())),this}toBlackWhite(e){const[t,,,s]=rw(this.getSource()),n=t<(e||127)?0:255;return this.setSource([n,n,n,s]),this}overlayWith(e){e instanceof ht||(e=new ht(e));const t=this.getSource(),s=e.getSource(),[n,a,l]=t.map((d,h)=>Math.round(.5*d+.5*s[h]));return this.setSource([n,a,l,t[3]]),this}static fromRgb(e){return ht.fromRgba(e)}static fromRgba(e){return new ht(ht.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[s,n,a]=t.slice(1,4).map(l=>{const d=parseFloat(l);return l.endsWith("%")?Math.round(2.55*d):d});return[s,n,a,sw(t[4])]}}static fromHsl(e){return ht.fromHsla(e)}static fromHsla(e){return new ht(ht.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const s=(ht.parseAngletoDegrees(t[1])%360+360)%360/360,n=parseFloat(t[2])/100,a=parseFloat(t[3])/100;let l,d,h;if(n===0)l=d=h=a;else{const f=a<=.5?a*(n+1):a+n-a*n,g=2*a-f;l=Ag(g,f,s+1/3),d=Ag(g,f,s),h=Ag(g,f,s-1/3)}return[Math.round(255*l),Math.round(255*d),Math.round(255*h),sw(t[4])]}static fromHex(e){return new ht(ht.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let s;s=t.length<=4?t.split("").map(h=>h+h):t.match(/.{2}/g);const[n,a,l,d=255]=s.map(h=>parseInt(h,16));return[n,a,l,d/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),s=parseFloat(t);return t.includes("rad")?Fn(s):t.includes("turn")?360*s:s}}const So=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R0;const t=/\D{0,2}$/.exec(r),s=parseFloat(r),n=nt.DPI;switch(t?.[0]){case"mm":return s*n/25.4;case"cm":return s*n/2.54;case"in":return s*n;case"pt":return s*n/72;case"pc":return s*n/72*12;case"em":return s*e;default:return s}},x9=r=>{const[e,t]=r.trim().split(" "),[s,n]=(a=e)&&a!==Bs?[a.slice(1,4),a.slice(5,8)]:a===Bs?[a,a]:["Mid","Mid"];var a;return{meetOrSlice:t||"meet",alignX:s,alignY:n}},kc=function(r,e){let t,s,n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const a=new ht(e),l=a.getAlpha();t=a.toRgb(),l!==1&&(s=l.toString())}else t="none";return n?"".concat(r,": ").concat(t,"; ").concat(s?"".concat(r,"-opacity: ").concat(s,"; "):""):"".concat(r,'="').concat(t,'" ').concat(s?"".concat(r,'-opacity="').concat(s,'" '):"")};class z4{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",s=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):Bs,a=this.strokeDashOffset?this.strokeDashOffset:"0",l=this.strokeLineCap?this.strokeLineCap:"butt",d=this.strokeLineJoin?this.strokeLineJoin:"miter",h=this.strokeMiterLimit?this.strokeMiterLimit:"4",f=this.opacity!==void 0?this.opacity:"1",g=this.visible?"":" visibility: hidden;",x=e?"":this.getSvgFilter(),v=kc(Kt,this.fill);return[kc(zs,this.stroke),"stroke-width: ",s,"; ","stroke-dasharray: ",n,"; ","stroke-linecap: ",l,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",d,"; ","stroke-miterlimit: ",h,"; ",v,"fill-rule: ",t,"; ","opacity: ",f,";",x,g].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const s=e?this.calcTransformMatrix():this.calcOwnMatrix(),n='transform="'.concat(Tc(s));return"".concat(n).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:s=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[this.getSvgTransform(!0,s),this.getSvgCommons()].join(""),a=e.indexOf("COMMON_PARTS");return e[a]=n,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:s,withShadow:n,additionalTransform:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l=t?"":'style="'.concat(this.getSvgStyles(),'" '),d=n?'style="'.concat(this.getSvgFilter(),'" '):"",h=this.clipPath,f=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",g=h&&h.absolutePositioned,x=this.stroke,v=this.fill,b=this.shadow,w=[],_=e.indexOf("COMMON_PARTS");let T;h&&(h.clipPathId="CLIPPATH_".concat(wi()),T='<clipPath id="'.concat(h.clipPathId,`" >
`).concat(h.toClipPathSVG(s),`</clipPath>
`)),g&&w.push("<g ",d,this.getSvgCommons(),` >
`),w.push("<g ",this.getSvgTransform(!1),g?"":d+this.getSvgCommons(),` >
`);const S=[l,f,t?"":this.addPaintOrder()," ",a?'transform="'.concat(a,'" '):""].join("");return e[_]=S,gr(v)&&w.push(v.toSVG(this)),gr(x)&&w.push(x.toSVG(this)),b&&w.push(b.toSVG(this)),h&&w.push(T),w.push(e.join("")),w.push(`</g>
`),g&&w.push(`</g>
`),s?s(w.join("")):w.join("")}addPaintOrder(){return this.paintFirst!==Kt?' paint-order="'.concat(this.paintFirst,'" '):""}}function Ph(r){return new RegExp("^("+r.join("|")+")\\b","i")}const la="textDecorationThickness",U4=["fontSize","fontWeight","fontFamily","fontStyle"],V4=["underline","overline","linethrough"],I4=[...U4,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],H4=[...I4,...V4,"textBackgroundColor","direction",la],v9=[...U4,...V4,zs,"strokeWidth",Kt,"deltaY","textBackgroundColor",la],y9={_reNewline:P0,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:lt,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:lt,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[la]:66.667},Yr="justify",vh="justify-left",hc="justify-right",fc="justify-center";var nw,iw,aw;const Mr=String.raw(nw||(nw=en(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),Eg=String.raw(iw||(iw=en(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),b9=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Mr+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Mr+"))?\\s+(.*)"),w9={cx:lt,x:lt,r:"radius",cy:Fs,y:Fs,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":la},Ng="font-size",Dg="clip-path";Ph(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);Ph(["symbol","image","marker","pattern","view","svg"]);const ow=Ph(["symbol","g","a","svg","clipPath","defs"]);new RegExp(String.raw(aw||(aw=en(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),Mr,Eg,Mr,Eg,Mr,Eg,Mr));const _9=new se(1,0),$4=new se,G4=(r,e)=>r.rotate(e),Tp=(r,e)=>new se(e).subtract(r),kp=r=>r.distanceFrom($4),Ap=(r,e)=>Math.atan2(mc(r,e),j9(r,e)),S9=r=>Ap(_9,r),$0=r=>r.eq($4)?r:r.scalarDivide(kp(r)),W4=function(r){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return $0(new se(-r.y,r.x).scalarMultiply(e?1:-1))},mc=(r,e)=>r.x*e.y-r.y*e.x,j9=(r,e)=>r.x*e.x+r.y*e.y,lw=(r,e,t)=>{if(r.eq(e)||r.eq(t))return!0;const s=mc(e,t),n=mc(e,r),a=mc(t,r);return s>=0?n>=0&&a<=0:!(n<=0&&a>=0)},cw="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",uw=new RegExp("(?:\\s|^)"+cw+cw+"("+Mr+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class En{constructor(e){const t=typeof e=="string"?En.parseShadow(e):e;Object.assign(this,En.ownDefaults,t),this.id=wi()}static parseShadow(e){const t=e.trim(),[,s=0,n=0,a=0]=(uw.exec(t)||[]).map(l=>parseFloat(l)||0);return{color:(t.replace(uw,"")||"rgb(0,0,0)").trim(),offsetX:s,offsetY:n,blur:a}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=G4(new se(this.offsetX,this.offsetY),Ft(-e.angle)),s=new ht(this.color);let n=40,a=40;return e.width&&e.height&&(n=100*yt((Math.abs(t.x)+this.blur)/e.width,nt.NUM_FRACTION_DIGITS)+20,a=100*yt((Math.abs(t.y)+this.blur)/e.height,nt.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(a,'%" height="').concat(100+2*a,'%" x="-').concat(n,'%" width="').concat(100+2*n,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(yt(this.blur?this.blur/2:0,nt.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(yt(t.x,nt.NUM_FRACTION_DIGITS),'" dy="').concat(yt(t.y,nt.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(s.toRgb(),'" flood-opacity="').concat(s.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=En.ownDefaults;return this.includeDefaultValues?e:V0(e,(s,n)=>s!==t[n])}static async fromObject(e){return new this(e)}}U(En,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),U(En,"type","shadow"),De.setClass(En,"shadow");const Ao=(r,e,t)=>Math.max(r,Math.min(e,t)),C9=[Fs,lt,Us,xr,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Bo,zo],Un=[Kt,zs,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],T9={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:lt,originY:Fs,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Kt,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},k9=(r,e,t,s)=>-t*Math.cos(r/s*Uc)+t+e,A9=()=>!1;class G0{constructor(e){let{startValue:t,byValue:s,duration:n=500,delay:a=0,easing:l=k9,onStart:d=Yd,onChange:h=Yd,onComplete:f=Yd,abort:g=A9,target:x}=e;U(this,"_state","pending"),U(this,"durationProgress",0),U(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=n,this.delay=a,this.easing=l,this._onStart=d,this._onChange=h,this._onComplete=f,this._abort=g,this.target=x,this.startValue=t,this.byValue=s,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Xd(e),this.delay):Xd(e)}tick(e){const t=(e||+new Date)-this.startTime,s=Math.min(t,this.duration);this.durationProgress=s/this.duration;const{value:n,valueProgress:a}=this.calculate(s);this.value=Object.freeze(n),this.valueProgress=a,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Xd(this.tick)))}register(){mh.push(this)}unregister(){mh.remove(this)}abort(){this._state="aborted",this.unregister()}}const E9=["startValue","endValue"];class N9 extends G0{constructor(e){let{startValue:t=0,endValue:s=100}=e;super(I(I({},jt(e,E9)),{},{startValue:t,byValue:s-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const D9=["startValue","endValue"];class O9 extends G0{constructor(e){let{startValue:t=[0],endValue:s=[100]}=e;super(I(I({},jt(e,D9)),{},{startValue:t,byValue:s.map((n,a)=>n-t[a])}))}calculate(e){const t=this.startValue.map((s,n)=>this.easing(e,s,this.byValue[n],this.duration,n));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const M9=["startValue","endValue","easing","onChange","onComplete","abort"],L9=(r,e,t,s)=>e+t*(1-Math.cos(r/s*Uc)),Og=r=>r&&((e,t,s)=>r(new ht(e).toRgba(),t,s));class R9 extends G0{constructor(e){let{startValue:t,endValue:s,easing:n=L9,onChange:a,onComplete:l,abort:d}=e,h=jt(e,M9);const f=new ht(t).getSource(),g=new ht(s).getSource();super(I(I({},h),{},{startValue:f,byValue:g.map((x,v)=>x-f[v]),easing:n,onChange:Og(a),onComplete:Og(l),abort:Og(d)}))}calculate(e){const[t,s,n,a]=this.startValue.map((d,h)=>this.easing(e,d,this.byValue[h],this.duration,h)),l=[...[t,s,n].map(Math.round),Ao(0,a,1)];return{value:l,valueProgress:l.map((d,h)=>this.byValue[h]!==0?Math.abs((d-this.startValue[h])/this.byValue[h]):0).find(d=>d!==0)||0}}}function Y4(r){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(r)?new O9(r):new N9(r);return e.start(),e}function P9(r){const e=new R9(r);return e.start(),e}class Tt{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.points=this.points.concat(t.filter(n=>!this.includes(n))),this}static isPointContained(e,t,s){let n=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(s))return e.eq(t);if(t.x===s.x)return e.x===t.x&&(n||e.y>=Math.min(t.y,s.y)&&e.y<=Math.max(t.y,s.y));if(t.y===s.y)return e.y===t.y&&(n||e.x>=Math.min(t.x,s.x)&&e.x<=Math.max(t.x,s.x));{const a=Tp(t,s),l=Tp(t,e).divide(a);return n?Math.abs(l.x)===Math.abs(l.y):l.x===l.y&&l.x>=0&&l.x<=1}}static isPointInPolygon(e,t){const s=new se(e).setX(Math.min(e.x-1,...t.map(a=>a.x)));let n=0;for(let a=0;a<t.length;a++){const l=this.intersectSegmentSegment(t[a],t[(a+1)%t.length],e,s);if(l.includes(e))return!0;n+=+(l.status==="Intersection")}return n%2==1}static intersectLineLine(e,t,s,n){let a=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],l=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const d=t.x-e.x,h=t.y-e.y,f=n.x-s.x,g=n.y-s.y,x=e.x-s.x,v=e.y-s.y,b=f*v-g*x,w=d*v-h*x,_=g*d-f*h;if(_!==0){const T=b/_,S=w/_;return(a||0<=T&&T<=1)&&(l||0<=S&&S<=1)?new Tt("Intersection").append(new se(e.x+T*d,e.y+T*h)):new Tt}if(b===0||w===0){const T=a||l||Tt.isPointContained(e,s,n)||Tt.isPointContained(t,s,n)||Tt.isPointContained(s,e,t)||Tt.isPointContained(n,e,t);return new Tt(T?"Coincident":void 0)}return new Tt("Parallel")}static intersectSegmentLine(e,t,s,n){return Tt.intersectLineLine(e,t,s,n,!1,!0)}static intersectSegmentSegment(e,t,s,n){return Tt.intersectLineLine(e,t,s,n,!1,!1)}static intersectLinePolygon(e,t,s){let n=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const a=new Tt,l=s.length;for(let d,h,f,g=0;g<l;g++){if(d=s[g],h=s[(g+1)%l],f=Tt.intersectLineLine(e,t,d,h,n,!1),f.status==="Coincident")return f;a.append(...f.points)}return a.points.length>0&&(a.status="Intersection"),a}static intersectSegmentPolygon(e,t,s){return Tt.intersectLinePolygon(e,t,s,!1)}static intersectPolygonPolygon(e,t){const s=new Tt,n=e.length,a=[];for(let l=0;l<n;l++){const d=e[l],h=e[(l+1)%n],f=Tt.intersectSegmentPolygon(d,h,t);f.status==="Coincident"?(a.push(f),s.append(d,h)):s.append(...f.points)}return a.length>0&&a.length===e.length?new Tt("Coincident"):(s.points.length>0&&(s.status="Intersection"),s)}static intersectPolygonRectangle(e,t,s){const n=t.min(s),a=t.max(s),l=new se(a.x,n.y),d=new se(n.x,a.y);return Tt.intersectPolygonPolygon(e,[n,l,a,d])}}class F9 extends S4{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?Rs(e,this.group.calcTransformMatrix()):e}setXY(e,t,s){this.group&&(e=Rs(e,Or(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,s)}getRelativeXY(){return new se(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,s)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:s,bl:n}=this.aCoords||(this.aCoords=this.calcACoords()),a=[e,t,s,n];if(this.group){const l=this.group.calcTransformMatrix();return a.map(d=>Rs(d,l))}return a}intersectsWithRect(e,t){return Tt.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=Tt.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:s,top:n,width:a,height:l}=this.getBoundingRect();return s>=e.x&&s+a<=t.x&&n>=e.y&&n+l<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Tt.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(s=>s.x<=t.x&&s.x>=e.x&&s.y<=t.y&&s.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(s=>(s.x>=t.x||s.x<=e.x)&&(s.y>=t.y||s.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return An(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(Us,e),this._set(xr,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?Fn(T4(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||As.concat()}calcACoords(){const e=Uo({angle:this.angle}),{x:t,y:s}=this.getRelativeCenterPoint(),n=Vc(t,s),a=ms(n,e),l=this._getTransformedDimensions(),d=l.x/2,h=l.y/2;return{tl:Rs({x:-d,y:-h},a),tr:Rs({x:d,y:-h},a),bl:Rs({x:-d,y:h},a),br:Rs({x:d,y:h},a)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Ht(this.originX),Ht(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const s=this.transformMatrixKey(e),n=this.matrixCache;return n&&n.key.every((a,l)=>a===s[l])?n.value:(this.group&&(t=ms(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:s,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const s=this.getRelativeCenterPoint(),n={angle:this.angle,translateX:s.x,translateY:s.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},a=a9(n);return this.ownMatrixCache={key:e,value:a},a}_getNonTransformedDimensions(){return new se(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=I({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),s=t.strokeWidth;let n=s,a=0;this.strokeUniform&&(n=0,a=s);const l=t.width+n,d=t.height+n;let h;return h=t.skewX===0&&t.skewY===0?new se(l*t.scaleX,d*t.scaleY):I0(l,d,Mh(t)),h.scalarAdd(a)}translateToGivenOrigin(e,t,s,n,a){let l=e.x,d=e.y;const h=Ht(n)-Ht(t),f=Ht(a)-Ht(s);if(h||f){const g=this._getTransformedDimensions();l+=h*g.x,d+=f*g.y}return new se(l,d)}translateToCenterPoint(e,t,s){if(t===Ke&&s===Ke)return e;const n=this.translateToGivenOrigin(e,t,s,Ke,Ke);return this.angle?n.rotate(Ft(this.angle),e):n}translateToOriginPoint(e,t,s){const n=this.translateToGivenOrigin(e,Ke,Ke,t,s);return this.angle?n.rotate(Ft(this.angle),e):n}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?Rs(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new se(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,s){const n=this.translateToCenterPoint(e,t,s),a=this.translateToOriginPoint(n,this.originX,this.originY);this.set({left:a.x,top:a.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),lt,Fs)}}const B9=["type"],z9=["extraParam"];let wn=class Zd extends F9{static getDefaults(){return Zd.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){bi("warn","Setting type has no effect",e)}constructor(e){super(),U(this,"_cacheContext",null),Object.assign(this,Zd.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=Pn(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,s=e.height,n=nt.maxCacheSideLimit,a=nt.minCacheSideLimit;if(t<=n&&s<=n&&t*s<=nt.perfLimitSizeTotal)return t<a&&(e.width=a),s<a&&(e.height=a),e;const l=t/s,[d,h]=dc.limitDimsByArea(l),f=Ao(a,d,n),g=Ao(a,h,n);return t>f&&(e.zoomX/=t/f,e.width=f,e.capped=!0),s>g&&(e.zoomY/=s/g,e.height=g,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),s=t.x*e.x/this.scaleX,n=t.y*e.y/this.scaleY;return{width:Math.ceil(s+2),height:Math.ceil(n+2),zoomX:e.x,zoomY:e.y,x:s,y:n}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:s,height:n,zoomX:a,zoomY:l,x:d,y:h}=this._limitCacheSize(this._getCacheCanvasDimensions()),f=s!==e.width||n!==e.height,g=this.zoomX!==a||this.zoomY!==l;if(!e||!t)return!1;if(f||g){s!==e.width||n!==e.height?(e.width=s,e.height=n):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const x=d/2,v=h/2;return this.cacheTranslationX=Math.round(e.width/2-x)+x,this.cacheTranslationY=Math.round(e.height/2-v)+v,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(a,l),this.zoomX=a,this.zoomY=l,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,s=this.calcTransformMatrix(!t);e.transform(s[0],s[1],s[2],s[3],s[4],s[5])}getObjectScaling(){if(!this.group)return new se(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=gh(this.calcTransformMatrix());return new se(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),s=this.getCanvasRetinaScaling();return e.scalarMultiply(t*s)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==Us&&e!==xr||(t=this._constrainScale(t)),e===Us&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof En||(t=new En(t));const s=this[e]!==t;return this[e]=t,s&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||s&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:s,cacheTranslationX:n,cacheTranslationY:a}=this,{width:l,height:d}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:s,cacheTranslationX:n,cacheTranslationY:a,width:l,height:d,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===zs&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,s){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(s,0,0),e.restore()}drawObject(e,t,s){const n=this.fill,a=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,s),this.fill=n,this.stroke=a}createClipPathLayer(e,t){const s=vr(t),n=s.getContext("2d");if(n.translate(t.cacheTranslationX,t.cacheTranslationY),n.scale(t.zoomX,t.zoomY),e._cacheCanvas=s,t.parentClipPaths.forEach(a=>{a.transform(n)}),t.parentClipPaths.push(e),e.absolutePositioned){const a=Or(this.calcTransformMatrix());n.transform(a[0],a[1],a[2],a[3],a[4],a[5])}return e.transform(n),e.drawObject(n,!0,t),s}_drawClipPath(e,t,s){if(!t)return;t._transformDone=!0;const n=this.createClipPathLayer(t,s);this.drawClipPathOnCache(e,t,n)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,s=this._cacheContext;return!(!t||!s||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&s&&!e&&(s.save(),s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,t.width,t.height),s.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const s=t.stroke;s&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,gr(s)?s.gradientUnits==="percentage"||s.gradientTransform||s.patternTransform?this._applyPatternForTransformedGradient(e,s):(e.strokeStyle=s.toLive(e),this._applyPatternGradientTransform(e,s)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:s}=t;s&&(gr(s)?(e.fillStyle=s.toLive(e),this._applyPatternGradientTransform(e,s)):e.fillStyle=s)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,s=this.canvas,n=this.getCanvasRetinaScaling(),[a,,,l]=s?.viewportTransform||As,d=a*n,h=l*n,f=t.nonScaling?new se(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*nt.browserShadowBlurConstant*(d+h)*(f.x+f.y)/4,e.shadowOffsetX=t.offsetX*d*f.x,e.shadowOffsetY=t.offsetY*h*f.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!gr(t))return{offsetX:0,offsetY:0};const s=t.gradientTransform||t.patternTransform,n=-this.width/2+t.offsetX||0,a=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,n,a):e.transform(1,0,0,1,n,a),s&&e.transform(s[0],s[1],s[2],s[3],s[4],s[5]),{offsetX:n,offsetY:a}}_renderPaintInOrder(e){this.paintFirst===zs?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var s;const n=this._limitCacheSize(this._getCacheCanvasDimensions()),a=this.getCanvasRetinaScaling(),l=n.x/this.scaleX/a,d=n.y/this.scaleY/a,h=vr({width:Math.ceil(l),height:Math.ceil(d)}),f=h.getContext("2d");f&&(f.beginPath(),f.moveTo(0,0),f.lineTo(l,0),f.lineTo(l,d),f.lineTo(0,d),f.closePath(),f.translate(l/2,d/2),f.scale(n.zoomX/this.scaleX/a,n.zoomY/this.scaleY/a),this._applyPatternGradientTransform(f,t),f.fillStyle=t.toLive(e),f.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(a*this.scaleX/n.zoomX,a*this.scaleY/n.zoomY),e.strokeStyle=(s=f.createPattern(h,"no-repeat"))!==null&&s!==void 0?s:"")}_findCenterFromElement(){return new se(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(De.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=L4(this),s=this.group,n=this.shadow,a=Math.abs,l=e.enableRetinaScaling?v4():1,d=(e.multiplier||1)*l,h=e.canvasProvider||(E=>new Ic(E,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&h9(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&m9(this,this.getViewportTransform()),this.setCoords();const f=Pn(),g=this.getBoundingRect(),x=this.shadow,v=new se;if(x){const E=x.blur,A=x.nonScaling?new se(1,1):this.getObjectScaling();v.x=2*Math.round(a(x.offsetX)+E)*a(A.x),v.y=2*Math.round(a(x.offsetY)+E)*a(A.y)}const b=g.width+v.x,w=g.height+v.y;f.width=Math.ceil(b),f.height=Math.ceil(w);const _=h(f);e.format==="jpeg"&&(_.backgroundColor="#fff"),this.setPositionByOrigin(new se(_.width/2,_.height/2),Ke,Ke);const T=this.canvas;_._objects=[this],this.set("canvas",_),this.setCoords();const S=_.toCanvasElement(d||1,e);return this.set("canvas",T),this.shadow=n,s&&(this.group=s),this.set(t),this.setCoords(),_._objects=[],_.destroy(),S}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return j4(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return C4(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:s,originY:n}=this;if(t){const{x:a,y:l}=this.getRelativeCenterPoint();this.originX=Ke,this.originY=Ke,this.left=a,this.top=l}if(this.set("angle",e),t){const{x:a,y:l}=this.translateToOriginPoint(this.getRelativeCenterPoint(),s,n);this.left=a,this.top=l,this.originX=s,this.originY=n}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){mh.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Jr().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((s,n)=>{let[a,l]=n;return s[a]=this._animate(a,l,t),s},{})}_animate(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=e.split("."),a=this.constructor.colorProperties.includes(n[n.length-1]),{abort:l,startValue:d,onChange:h,onComplete:f}=s,g=I(I({},s),{},{target:this,startValue:d??n.reduce((x,v)=>x[v],this),endValue:t,abort:l?.bind(this),onChange:(x,v,b)=>{n.reduce((w,_,T)=>(T===n.length-1&&(w[_]=x),w[_]),this),h&&h(x,v,b)},onComplete:(x,v,b)=>{this.setCoords(),f&&f(x,v,b)}});return a?P9(g):Y4(g)}isDescendantOf(e){const{parent:t,group:s}=this;return t===e||s===e||!!t&&t.isDescendantOf(e)||!!s&&s!==t&&s.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),s=e.getAncestors();if(t.length===0&&s.length>0&&this===s[s.length-1])return{fork:[],otherFork:[e,...s.slice(0,s.length-1)],common:[this]};for(let n,a=0;a<t.length;a++){if(n=t[a],n===e)return{fork:[this,...t.slice(0,a)],otherFork:[],common:t.slice(a)};for(let l=0;l<s.length;l++){if(this===s[l])return{fork:[],otherFork:[e,...s.slice(0,l)],common:[this,...t]};if(n===s[l])return{fork:[this,...t.slice(0,a)],otherFork:[e,...s.slice(0,l)],common:t.slice(a)}}}return{fork:[this,...t],otherFork:[e,...s],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const s=t.common[0]||this.canvas;if(!s)return;const n=t.fork.pop(),a=t.otherFork.pop(),l=s._objects.indexOf(n),d=s._objects.indexOf(a);return l>-1&&l>d}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Zd.customProperties,this.constructor.customProperties||[]);let t;const s=nt.NUM_FRACTION_DIGITS,{clipPath:n,fill:a,stroke:l,shadow:d,strokeDashArray:h,left:f,top:g,originX:x,originY:v,width:b,height:w,strokeWidth:_,strokeLineCap:T,strokeDashOffset:S,strokeLineJoin:E,strokeUniform:A,strokeMiterLimit:O,scaleX:D,scaleY:F,angle:B,flipX:P,flipY:H,opacity:N,visible:V,backgroundColor:G,fillRule:ne,paintFirst:Q,globalCompositeOperation:ie,skewX:L,skewY:$}=this;n&&!n.excludeFromExport&&(t=n.toObject(e.concat("inverted","absolutePositioned")));const K=M=>yt(M,s),pe=I(I({},Vo(this,e)),{},{type:this.constructor.type,version:_p,originX:x,originY:v,left:K(f),top:K(g),width:K(b),height:K(w),fill:Xb(a)?a.toObject():a,stroke:Xb(l)?l.toObject():l,strokeWidth:K(_),strokeDashArray:h&&h.concat(),strokeLineCap:T,strokeDashOffset:S,strokeLineJoin:E,strokeUniform:A,strokeMiterLimit:K(O),scaleX:K(D),scaleY:K(F),angle:K(B),flipX:P,flipY:H,opacity:K(N),shadow:d&&d.toObject(),visible:V,backgroundColor:G,fillRule:ne,paintFirst:Q,globalCompositeOperation:ie,skewX:K(L),skewY:K($)},t?{clipPath:t}:null);return this.includeDefaultValues?pe:this._removeDefaultValues(pe)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),s=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return V0(e,(n,a)=>{if(a===lt||a===Fs||a==="type")return!0;const l=s[a];return n!==l&&!(Array.isArray(n)&&Array.isArray(l)&&n.length===0&&l.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=jt(e,B9),s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:n}=s,a=jt(s,z9);return Lh(t,a).then(l=>n?(delete l[n],new this(t[n],l)):new this(l))}static fromObject(e,t){return this._fromObject(e,t)}};U(wn,"stateProperties",C9),U(wn,"cacheProperties",Un),U(wn,"ownDefaults",T9),U(wn,"type","FabricObject"),U(wn,"colorProperties",[Kt,zs,"backgroundColor"]),U(wn,"customProperties",[]),De.setClass(wn),De.setClass(wn,"object");const Io=(r,e,t)=>(s,n,a,l)=>{const d=e(s,n,a,l);return d&&R4(r,I(I({},F4(s,n,a,l)),t)),d};function Ho(r){return(e,t,s,n)=>{const{target:a,originX:l,originY:d}=t,h=a.getRelativeCenterPoint(),f=a.translateToOriginPoint(h,l,d),g=r(e,t,s,n);return a.setPositionByOrigin(f,t.originX,t.originY),g}}const dw=Io(jc,Ho((r,e,t,s)=>{const n=H0(e,e.originX,e.originY,t,s);if(Ht(e.originX)===Ht(Ke)||Ht(e.originX)===Ht(Pt)&&n.x<0||Ht(e.originX)===Ht(lt)&&n.x>0){const{target:a}=e,l=a.strokeWidth/(a.strokeUniform?a.scaleX:1),d=P4(e)?2:1,h=a.width,f=Math.abs(n.x*d/a.scaleX)-l;return a.set("width",Math.max(f,1)),h!==a.width}return!1}));function U9(r,e,t,s,n){s=s||{};const a=this.sizeX||s.cornerSize||n.cornerSize,l=this.sizeY||s.cornerSize||n.cornerSize,d=s.transparentCorners!==void 0?s.transparentCorners:n.transparentCorners,h=d?zs:Kt,f=!d&&(s.cornerStrokeColor||n.cornerStrokeColor);let g,x=e,v=t;r.save(),r.fillStyle=s.cornerColor||n.cornerColor||"",r.strokeStyle=s.cornerStrokeColor||n.cornerStrokeColor||"",a>l?(g=a,r.scale(1,l/a),v=t*a/l):l>a?(g=l,r.scale(a/l,1),x=e*l/a):g=a,r.beginPath(),r.arc(x,v,g/2,0,dh,!1),r[h](),f&&r.stroke(),r.restore()}function V9(r,e,t,s,n){s=s||{};const a=this.sizeX||s.cornerSize||n.cornerSize,l=this.sizeY||s.cornerSize||n.cornerSize,d=s.transparentCorners!==void 0?s.transparentCorners:n.transparentCorners,h=d?zs:Kt,f=!d&&(s.cornerStrokeColor||n.cornerStrokeColor),g=a/2,x=l/2;r.save(),r.fillStyle=s.cornerColor||n.cornerColor||"",r.strokeStyle=s.cornerStrokeColor||n.cornerStrokeColor||"",r.translate(e,t);const v=n.getTotalAngle();r.rotate(Ft(v)),r["".concat(h,"Rect")](-g,-x,a,l),f&&r.strokeRect(-g,-x,a,l),r.restore()}class Ar{constructor(e){U(this,"visible",!0),U(this,"actionName",Oh),U(this,"angle",0),U(this,"x",0),U(this,"y",0),U(this,"offsetX",0),U(this,"offsetY",0),U(this,"sizeX",0),U(this,"sizeY",0),U(this,"touchSizeX",0),U(this,"touchSizeY",0),U(this,"cursorStyle","crosshair"),U(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,s,n){var a;let{tl:l,tr:d,br:h,bl:f}=n;return((a=t.canvas)===null||a===void 0?void 0:a.getActiveObject())===t&&t.isControlVisible(e)&&Tt.isPointInPolygon(s,[l,d,h,f])}getActionHandler(e,t,s){return this.actionHandler}getMouseDownHandler(e,t,s){return this.mouseDownHandler}getMouseUpHandler(e,t,s){return this.mouseUpHandler}cursorStyleHandler(e,t,s){return t.cursorStyle}getActionName(e,t,s){return t.actionName}getVisibility(e,t){var s,n;return(s=(n=e._controlsVisibility)===null||n===void 0?void 0:n[t])!==null&&s!==void 0?s:this.visible}setVisibility(e,t,s){this.visible=e}positionHandler(e,t,s,n){return new se(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,s,n,a,l){const d=z0([Vc(s,n),Uo({angle:e}),U0((a?this.touchSizeX:this.sizeX)||t,(a?this.touchSizeY:this.sizeY)||t)]);return{tl:new se(-.5,-.5).transform(d),tr:new se(.5,-.5).transform(d),br:new se(.5,.5).transform(d),bl:new se(-.5,.5).transform(d)}}render(e,t,s,n,a){((n=n||{}).cornerStyle||a.cornerStyle)==="circle"?U9.call(this,e,t,s,n,a):V9.call(this,e,t,s,n,a)}}const I9=(r,e,t)=>t.lockRotation?xh:e.cursorStyle,H9=Io(b4,Ho((r,e,t,s)=>{let{target:n,ex:a,ey:l,theta:d,originX:h,originY:f}=e;const g=n.translateToOriginPoint(n.getRelativeCenterPoint(),h,f);if(Lr(n,"lockRotation"))return!1;const x=Math.atan2(l-g.y,a-g.x),v=Math.atan2(s-g.y,t-g.x);let b=Fn(v-x+d);if(n.snapAngle&&n.snapAngle>0){const _=n.snapAngle,T=n.snapThreshold||_,S=Math.ceil(b/_)*_,E=Math.floor(b/_)*_;Math.abs(b-E)<T?b=E:Math.abs(b-S)<T&&(b=S)}b<0&&(b=360+b),b%=360;const w=n.angle!==b;return n.angle=b,w}));function q4(r,e){const t=e.canvas,s=r[t.uniScaleKey];return t.uniformScaling&&!s||!t.uniformScaling&&s}function X4(r,e,t){const s=Lr(r,"lockScalingX"),n=Lr(r,"lockScalingY");if(s&&n||!e&&(s||n)&&t||s&&e==="x"||n&&e==="y")return!0;const{width:a,height:l,strokeWidth:d}=r;return a===0&&d===0&&e!=="y"||l===0&&d===0&&e!=="x"}const $9=["e","se","s","sw","w","nw","n","ne","e"],Ql=(r,e,t)=>{const s=q4(r,t);if(X4(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",s))return xh;const n=B4(t,e);return"".concat($9[n],"-resize")};function W0(r,e,t,s){let n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const a=e.target,l=n.by,d=q4(r,a);let h,f,g,x,v,b;if(X4(a,l,d))return!1;if(e.gestureScale)f=e.scaleX*e.gestureScale,g=e.scaleY*e.gestureScale;else{if(h=H0(e,e.originX,e.originY,t,s),v=l!=="y"?Math.sign(h.x||e.signX||1):1,b=l!=="x"?Math.sign(h.y||e.signY||1):1,e.signX||(e.signX=v),e.signY||(e.signY=b),Lr(a,"lockScalingFlip")&&(e.signX!==v||e.signY!==b))return!1;if(x=a._getTransformedDimensions(),d&&!l){const T=Math.abs(h.x)+Math.abs(h.y),{original:S}=e,E=T/(Math.abs(x.x*S.scaleX/a.scaleX)+Math.abs(x.y*S.scaleY/a.scaleY));f=S.scaleX*E,g=S.scaleY*E}else f=Math.abs(h.x*a.scaleX/x.x),g=Math.abs(h.y*a.scaleY/x.y);P4(e)&&(f*=2,g*=2),e.signX!==v&&l!=="y"&&(e.originX=Jb(e.originX),f*=-1,e.signX=v),e.signY!==b&&l!=="x"&&(e.originY=Jb(e.originY),g*=-1,e.signY=b)}const w=a.scaleX,_=a.scaleY;return l?(l==="x"&&a.set(Us,f),l==="y"&&a.set(xr,g)):(!Lr(a,"lockScalingX")&&a.set(Us,f),!Lr(a,"lockScalingY")&&a.set(xr,g)),w!==a.scaleX||_!==a.scaleY}const gd=Io(Dh,Ho((r,e,t,s)=>W0(r,e,t,s))),G9=Io(Dh,Ho((r,e,t,s)=>W0(r,e,t,s,{by:"x"}))),W9=Io(Dh,Ho((r,e,t,s)=>W0(r,e,t,s,{by:"y"}))),Y9=["target","ex","ey","skewingSide"],Mg={x:{counterAxis:"y",scale:Us,skew:Bo,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:xr,skew:zo,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},q9=["ns","nesw","ew","nwse"],X9=(r,e,t)=>{if(e.x!==0&&Lr(t,"lockSkewingY")||e.y!==0&&Lr(t,"lockSkewingX"))return xh;const s=B4(t,e)%4;return"".concat(q9[s],"-resize")};function K4(r,e,t,s,n){const{target:a}=t,{counterAxis:l,origin:d,lockSkewing:h,skew:f,flip:g}=Mg[r];if(Lr(a,h))return!1;const{origin:x,flip:v}=Mg[l],b=Ht(t[x])*(a[v]?-1:1),w=-Math.sign(b)*(a[g]?-1:1),_=.5*-((a[f]===0&&H0(t,Ke,Ke,s,n)[r]>0||a[f]>0?1:-1)*w)+.5;return Io(w4,Ho((S,E,A,O)=>function(D,F,B){let{target:P,ex:H,ey:N,skewingSide:V}=F,G=jt(F,Y9);const{skew:ne}=Mg[D],Q=B.subtract(new se(H,N)).divide(new se(P.scaleX,P.scaleY))[D],ie=P[ne],L=G[ne],$=Math.tan(Ft(L)),K=D==="y"?P._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:P._getTransformedDimensions({scaleX:1,scaleY:1}).y,pe=2*Q*V/Math.max(K,1)+$,M=Fn(Math.atan(pe));P.set(ne,M);const J=ie!==P[ne];if(J&&D==="y"){const{skewX:ye,scaleX:te}=P,fe=P._getTransformedDimensions({skewY:ie}),re=P._getTransformedDimensions(),le=ye!==0?fe.x/re.x:1;le!==1&&P.set(Us,le*te)}return J}(r,E,new se(A,O))))(e,I(I({},t),{},{[d]:_,skewingSide:w}),s,n)}const K9=(r,e,t,s)=>K4("x",r,e,t,s),Z9=(r,e,t,s)=>K4("y",r,e,t,s);function Fh(r,e){return r[e.canvas.altActionKey]}const pd=(r,e,t)=>{const s=Fh(r,t);return e.x===0?s?Bo:xr:e.y===0?s?zo:Us:""},vo=(r,e,t)=>Fh(r,t)?X9(0,e,t):Ql(r,e,t),hw=(r,e,t,s)=>Fh(r,e.target)?Z9(r,e,t,s):G9(r,e,t,s),fw=(r,e,t,s)=>Fh(r,e.target)?K9(r,e,t,s):W9(r,e,t,s),Z4=()=>({ml:new Ar({x:-.5,y:0,cursorStyleHandler:vo,actionHandler:hw,getActionName:pd}),mr:new Ar({x:.5,y:0,cursorStyleHandler:vo,actionHandler:hw,getActionName:pd}),mb:new Ar({x:0,y:.5,cursorStyleHandler:vo,actionHandler:fw,getActionName:pd}),mt:new Ar({x:0,y:-.5,cursorStyleHandler:vo,actionHandler:fw,getActionName:pd}),tl:new Ar({x:-.5,y:-.5,cursorStyleHandler:Ql,actionHandler:gd}),tr:new Ar({x:.5,y:-.5,cursorStyleHandler:Ql,actionHandler:gd}),bl:new Ar({x:-.5,y:.5,cursorStyleHandler:Ql,actionHandler:gd}),br:new Ar({x:.5,y:.5,cursorStyleHandler:Ql,actionHandler:gd}),mtr:new Ar({x:0,y:-.5,actionHandler:H9,cursorStyleHandler:I9,offsetY:-40,withConnection:!0,actionName:F0})}),Q9=()=>({mr:new Ar({x:.5,y:0,actionHandler:dw,cursorStyleHandler:vo,actionName:jc}),ml:new Ar({x:-.5,y:0,actionHandler:dw,cursorStyleHandler:vo,actionName:jc})}),J9=()=>I(I({},Z4()),Q9());class Ac extends wn{static getDefaults(){return I(I({},super.getDefaults()),Ac.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Ac.ownDefaults),this.setOptions(e)}static createControls(){return{controls:Z4()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,s=t.target,n=t.action;if(this===s&&n&&n.startsWith(Oh))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const s=Object.entries(this.oCoords);for(let n=s.length-1;n>=0;n--){const[a,l]=s[n],d=this.controls[a];if(d.shouldActivate(a,this,e,t?l.touchCorner:l.corner))return this.__corner=a,{key:a,control:d,coord:this.oCoords[a]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),s=Vc(t.x,t.y),n=Uo({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),a=ms(s,n),l=ms(e,a),d=ms(l,[1/e[0],0,0,1/e[3],0,0]),h=this.group?gh(this.calcTransformMatrix()):void 0;h&&(h.scaleX=Math.abs(h.scaleX),h.scaleY=Math.abs(h.scaleY));const f=this._calculateCurrentDimensions(h),g={};return this.forEachControl((x,v)=>{const b=x.positionHandler(f,d,this,x);g[v]=Object.assign(b,this._calcCornerCoords(x,b))}),g}_calcCornerCoords(e,t){const s=this.getTotalAngle();return{corner:e.calcCornerCoords(s,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(s,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),s=this._calculateCurrentDimensions(),n=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/n[0],1/n[3]),e.rotate(Ft(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-s.x/2,-s.y/2,s.x,s.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=I({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},s);e.save(),e.strokeStyle=n.borderColor,this._setLineDash(e,n.borderDashArray),this.strokeBorders(e,t),n.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:s,hasControls:n}=this,a=I({hasBorders:s,hasControls:n},t),l=this.getViewportTransform(),d=a.hasBorders,h=a.hasControls,f=ms(l,this.calcTransformMatrix()),g=gh(f);e.save(),e.translate(g.translateX,g.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(g.angle-=180),e.rotate(Ft(this.group?g.angle:this.angle)),d&&this.drawBorders(e,g,t),h&&this.drawControls(e,t),e.restore()}drawBorders(e,t,s){let n;if(s&&s.forActiveSelection||this.group){const a=I0(this.width,this.height,Mh(t)),l=this.isStrokeAccountedForInDimensions()?B0:(this.strokeUniform?new se().scalarAdd(this.canvas?this.canvas.getZoom():1):new se(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);n=a.add(l).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else n=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,n,s)}drawControlsConnectingLines(e,t){let s=!1;e.beginPath(),this.forEachControl((n,a)=>{n.withConnection&&n.getVisibility(this,a)&&(s=!0,e.moveTo(n.x*t.x,n.y*t.y),e.lineTo(n.x*t.x+n.offsetX,n.y*t.y+n.offsetY))}),s&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const s=this.getCanvasRetinaScaling(),{cornerStrokeColor:n,cornerDashArray:a,cornerColor:l}=this,d=I({cornerStrokeColor:n,cornerDashArray:a,cornerColor:l},t);e.setTransform(s,0,0,s,0,0),e.strokeStyle=e.fillStyle=d.cornerColor,this.transparentCorners||(e.strokeStyle=d.cornerStrokeColor),this._setLineDash(e,d.cornerDashArray),this.forEachControl((h,f)=>{if(h.getVisibility(this,f)){const g=this.oCoords[f];h.render(e,g.x,g.y,d,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[s,n]=t;return this.setControlVisible(s,n)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const s=this.canvas.viewportTransform;t.save(),t.transform(s[0],s[1],s[2],s[3],s[4],s[5]),this.transform(t);const n=this.width+4,a=this.height+4;return t.clearRect(-n/2,-a/2,n,a),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function Q4(r,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(s=>{s!=="constructor"&&Object.defineProperty(r.prototype,s,Object.getOwnPropertyDescriptor(t.prototype,s)||Object.create(null))})}),r}U(Ac,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Ss extends Ac{}Q4(Ss,[z4]),De.setClass(Ss),De.setClass(Ss,"object");const e7=(r,e,t,s)=>{const n=2*(s=Math.round(s))+1,{data:a}=r.getImageData(e-s,t-s,n,n);for(let l=3;l<a.length;l+=4)if(a[l]>0)return!1;return!0};class J4{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new se(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new se(1/this.options.scaleX,1/this.options.scaleY):new se(1,1)}createSideVector(e,t){const s=Tp(e,t);return this.options.strokeUniform?s.multiply(this.scale):s}projectOrthogonally(e,t,s){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,s)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new se(e);return t.y+=t.x*Math.tan(Ft(this.options.skewY)),t.x+=t.y*Math.tan(Ft(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const t7=new se;class jo extends J4{static getOrthogonalRotationFactor(e,t){const s=t?Ap(e,t):S9(e);return Math.abs(s)<Uc?-1:1}constructor(e,t,s,n){super(n),U(this,"AB",void 0),U(this,"AC",void 0),U(this,"alpha",void 0),U(this,"bisector",void 0),this.A=new se(e),this.B=new se(t),this.C=new se(s),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Ap(this.AB,this.AC),this.bisector=$0(G4(this.AB.eq(t7)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const n=this.createSideVector(e,t),a=W4(n),l=jo.getOrthogonalRotationFactor(a,this.bisector);return this.scaleUnitVector(a,s*l)}projectBevel(){const e=[];return(this.alpha%dh==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),s=1/Math.sin(t/2),n=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*s),a=this.options.strokeUniform?kp(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return kp(n)/this.strokeProjectionMagnitude<=a&&e.push(this.applySkew(this.A.add(n))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const s=[],n=new se(jo.getOrthogonalRotationFactor(this.bisector),jo.getOrthogonalRotationFactor(new se(this.bisector.y,this.bisector.x)));return[new se(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(n),new se(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(n)].forEach(a=>{lw(a,e,t)&&s.push(this.A.add(a))}),s}projectRoundWithSkew(e,t){const s=[],{skewX:n,skewY:a,scaleX:l,scaleY:d,strokeUniform:h}=this.options,f=new se(Math.tan(Ft(n)),Math.tan(Ft(a))),g=this.strokeProjectionMagnitude,x=h?g/d/Math.sqrt(1/d**2+1/l**2*f.y**2):g/Math.sqrt(1+f.y**2),v=new se(Math.sqrt(Math.max(g**2-x**2,0)),x),b=h?g/Math.sqrt(1+f.x**2*(1/d)**2/(1/l+1/l*f.x*f.y)**2):g/Math.sqrt(1+f.x**2/(1+f.x*f.y)**2),w=new se(b,Math.sqrt(Math.max(g**2-b**2,0)));return[w,w.scalarMultiply(-1),v,v.scalarMultiply(-1)].map(_=>this.applySkew(h?_.multiply(this.strokeUniformScalar):_)).forEach(_=>{lw(_,e,t)&&s.push(this.applySkew(this.A).add(_))}),s}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%dh==0,s=this.applySkew(this.A),n=e[t?0:2].subtract(s),a=e[t?1:0].subtract(s),l=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),d=mc(n,l)>0,h=d?n:a,f=d?a:n;return this.isSkewed()?e.push(...this.projectRoundWithSkew(h,f)):e.push(...this.projectRoundNoSkew(h,f)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class mw extends J4{constructor(e,t,s){super(s),this.A=new se(e),this.T=new se(t)}calcOrthogonalProjection(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const n=this.createSideVector(e,t);return this.scaleUnitVector(W4(n),s)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new se(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new jo(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new se(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),s=this.scaleUnitVector($0(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),n=this.A.add(s);e.push(n.add(t),n.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const s7=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const s=[];if(r.length===0)return s;const n=r.reduce((a,l)=>(a[a.length-1].eq(l)||a.push(new se(l)),a),[new se(r[0])]);if(n.length===1)t=!0;else if(!t){const a=n[0],l=((d,h)=>{for(let f=d.length-1;f>=0;f--)if(h(d[f],f,d))return f;return-1})(n,d=>!d.eq(a));n.splice(l+1)}return n.forEach((a,l,d)=>{let h,f;l===0?(f=d[1],h=t?a:d[d.length-1]):l===d.length-1?(h=d[l-1],f=t?a:d[0]):(h=d[l-1],f=d[l+1]),t&&d.length===1?s.push(...new mw(a,a,e).project()):!t||l!==0&&l!==d.length-1?s.push(...new jo(a,h,f,e).project()):s.push(...new mw(a,l===0?f:h,e).project())}),s},Y0=r=>{const e={};return Object.keys(r).forEach(t=>{e[t]={},Object.keys(r[t]).forEach(s=>{e[t][s]=I({},r[t][s])})}),e},r7=r=>r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let Yl;const q0=r=>{if(Yl||Yl||(Yl="Intl"in Nh()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),Yl){const e=Yl.segment(r);return Array.from(e).map(t=>{let{segment:s}=t;return s})}return n7(r)},n7=r=>{const e=[];for(let t,s=0;s<r.length;s++)(t=i7(r,s))!==!1&&e.push(t);return e},i7=(r,e)=>{const t=r.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return r.charAt(e);if(55296<=t&&t<=56319){if(r.length<=e+1)throw"High surrogate without following low surrogate";const n=r.charCodeAt(e+1);if(56320>n||n>57343)throw"High surrogate without following low surrogate";return r.charAt(e)+r.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const s=r.charCodeAt(e-1);if(55296>s||s>56319)throw"Low surrogate without preceding high surrogate";return!1},X0=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return r.fill!==e.fill||r.stroke!==e.stroke||r.strokeWidth!==e.strokeWidth||r.fontSize!==e.fontSize||r.fontFamily!==e.fontFamily||r.fontWeight!==e.fontWeight||r.fontStyle!==e.fontStyle||r.textDecorationThickness!==e.textDecorationThickness||r.textBackgroundColor!==e.textBackgroundColor||r.deltaY!==e.deltaY||t&&(r.overline!==e.overline||r.underline!==e.underline||r.linethrough!==e.linethrough)},a7=(r,e)=>{const t=e.split(`
`),s=[];let n=-1,a={};r=Y0(r);for(let l=0;l<t.length;l++){const d=q0(t[l]);if(r[l])for(let h=0;h<d.length;h++){n++;const f=r[l][h];f&&Object.keys(f).length>0&&(X0(a,f,!0)?s.push({start:n,end:n+1,style:f}):s[s.length-1].end++),a=f||{}}else n+=d.length,a={}}return s},o7=(r,e)=>{if(!Array.isArray(r))return Y0(r);const t=e.split(P0),s={};let n=-1,a=0;for(let l=0;l<t.length;l++){const d=q0(t[l]);for(let h=0;h<d.length;h++)n++,r[a]&&r[a].start<=n&&n<r[a].end&&(s[l]=s[l]||{},s[l][h]=I({},r[a].style),n===r[a].end-1&&a++)}return s},Ci=["display","transform",Kt,"fill-opacity","fill-rule","opacity",zs,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function gw(r,e){const t=r.nodeName,s=r.getAttribute("class"),n=r.getAttribute("id"),a="(?![a-zA-Z\\-]+)";let l;if(l=new RegExp("^"+t,"i"),e=e.replace(l,""),n&&e.length&&(l=new RegExp("#"+n+a,"i"),e=e.replace(l,"")),s&&e.length){const d=s.split(" ");for(let h=d.length;h--;)l=new RegExp("\\."+d[h]+a,"i"),e=e.replace(l,"")}return e.length===0}function l7(r,e){let t=!0;const s=gw(r,e.pop());return s&&e.length&&(t=function(n,a){let l,d=!0;for(;n.parentElement&&n.parentElement.nodeType===1&&a.length;)d&&(l=a.pop()),d=gw(n=n.parentElement,l);return a.length===0}(r,e)),s&&t&&e.length===0}const c7=r=>{var e;return(e=w9[r])!==null&&e!==void 0?e:r},u7=new RegExp("(".concat(Mr,")"),"gi"),d7=r=>r.replace(u7," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var pw,xw,vw,yw,bw,ww,_w;const Ts="(".concat(Mr,")"),h7=String.raw(pw||(pw=en(["(skewX)(",")"],["(skewX)\\(","\\)"])),Ts),f7=String.raw(xw||(xw=en(["(skewY)(",")"],["(skewY)\\(","\\)"])),Ts),m7=String.raw(vw||(vw=en(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Ts,Ts,Ts),g7=String.raw(yw||(yw=en(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Ts,Ts),p7=String.raw(bw||(bw=en(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Ts,Ts),x7=String.raw(ww||(ww=en(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Ts,Ts,Ts,Ts,Ts,Ts),K0="(?:".concat(x7,"|").concat(p7,"|").concat(m7,"|").concat(g7,"|").concat(h7,"|").concat(f7,")"),v7="(?:".concat(K0,"*)"),y7=String.raw(_w||(_w=en(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),v7),b7=new RegExp(y7),w7=new RegExp(K0),_7=new RegExp(K0,"g");function Ep(r){const e=[];if(!(r=d7(r).replace(/\s*([()])\s*/gi,"$1"))||r&&!b7.test(r))return[...As];for(const t of r.matchAll(_7)){const s=w7.exec(t[0]);if(!s)continue;let n=As;const a=s.filter(w=>!!w),[,l,...d]=a,[h,f,g,x,v,b]=d.map(w=>parseFloat(w));switch(l){case"translate":n=Vc(h,f);break;case F0:n=Uo({angle:h},{x:f,y:g});break;case Oh:n=U0(h,f);break;case Bo:n=A4(h);break;case zo:n=E4(h);break;case"matrix":n=[h,f,g,x,v,b]}e.push(n)}return z0(e)}function S7(r,e,t,s){const n=Array.isArray(e);let a,l=e;if(r!==Kt&&r!==zs||e!==Bs){if(r==="strokeUniform")return e==="non-scaling-stroke";if(r==="strokeDashArray")l=e===Bs?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(r==="transformMatrix")l=t&&t.transformMatrix?ms(t.transformMatrix,Ep(e)):Ep(e);else if(r==="visible")l=e!==Bs&&e!=="hidden",t&&t.visible===!1&&(l=!1);else if(r==="opacity")l=parseFloat(e),t&&t.opacity!==void 0&&(l*=t.opacity);else if(r==="textAnchor")l=e==="start"?lt:e==="end"?Pt:Ke;else if(r==="charSpacing"||r===la)a=So(e,s)/s*1e3;else if(r==="paintFirst"){const d=e.indexOf(Kt),h=e.indexOf(zs);l=Kt,(d>-1&&h>-1&&h<d||d===-1&&h>-1)&&(l=zs)}else{if(r==="href"||r==="xlink:href"||r==="font"||r==="id")return e;if(r==="imageSmoothing")return e==="optimizeQuality";a=n?e.map(So):So(e,s)}}else l="";return!n&&isNaN(a)?l:a}function j7(r,e){const t=r.match(b9);if(!t)return;const s=t[1],n=t[3],a=t[4],l=t[5],d=t[6];s&&(e.fontStyle=s),n&&(e.fontWeight=isNaN(parseFloat(n))?n:parseFloat(n)),a&&(e.fontSize=So(a)),d&&(e.fontFamily=d),l&&(e.lineHeight=l==="normal"?1:l)}function C7(r,e){r.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[s,n]=t.split(":");e[s.trim().toLowerCase()]=n.trim()})}function T7(r){const e={},t=r.getAttribute("style");return t&&(typeof t=="string"?C7(t,e):function(s,n){Object.entries(s).forEach(a=>{let[l,d]=a;d!==void 0&&(n[l.toLowerCase()]=d)})}(t,e)),e}const k7={stroke:"strokeOpacity",fill:"fillOpacity"};function Vn(r,e,t){if(!r)return{};let s,n={},a=R0;r.parentNode&&ow.test(r.parentNode.nodeName)&&(n=Vn(r.parentElement,e,t),n.fontSize&&(s=a=So(n.fontSize)));const l=I(I(I({},e.reduce((f,g)=>{const x=r.getAttribute(g);return x&&(f[g]=x),f},{})),function(f){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x={};for(const v in g)l7(f,v.split(" "))&&(x=I(I({},x),g[v]));return x}(r,t)),T7(r));l[Dg]&&r.setAttribute(Dg,l[Dg]),l[Ng]&&(s=So(l[Ng],a),l[Ng]="".concat(s));const d={};for(const f in l){const g=c7(f),x=S7(g,l[f],n,s);d[g]=x}d&&d.font&&j7(d.font,d);const h=I(I({},n),d);return ow.test(r.nodeName)?h:function(f){const g=Ss.getDefaults();return Object.entries(k7).forEach(x=>{let[v,b]=x;if(f[b]===void 0||f[v]==="")return;if(f[v]===void 0){if(!g[v])return;f[v]=g[v]}if(f[v].indexOf("url(")===0)return;const w=new ht(f[v]);f[v]=w.setAlpha(yt(w.getAlpha()*f[b],2)).toRgba()}),f}(h)}const A7=["left","top","width","height","visible"],ej=["rx","ry"];class Wr extends Ss{static getDefaults(){return I(I({},super.getDefaults()),Wr.ownDefaults)}constructor(e){super(),Object.assign(this,Wr.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:s}=this,n=-t/2,a=-s/2,l=this.rx?Math.min(this.rx,t/2):0,d=this.ry?Math.min(this.ry,s/2):0,h=l!==0||d!==0;e.beginPath(),e.moveTo(n+l,a),e.lineTo(n+t-l,a),h&&e.bezierCurveTo(n+t-ui*l,a,n+t,a+ui*d,n+t,a+d),e.lineTo(n+t,a+s-d),h&&e.bezierCurveTo(n+t,a+s-ui*d,n+t-ui*l,a+s,n+t-l,a+s),e.lineTo(n+l,a+s),h&&e.bezierCurveTo(n+ui*l,a+s,n,a+s-ui*d,n,a+s-d),e.lineTo(n,a+d),h&&e.bezierCurveTo(n,a+ui*d,n+ui*l,a,n+l,a),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...ej,...e])}_toSVG(){const{width:e,height:t,rx:s,ry:n}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(s,'" ry="').concat(n,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,s){const n=Vn(e,this.ATTRIBUTE_NAMES,s),{left:a=0,top:l=0,width:d=0,height:h=0,visible:f=!0}=n,g=jt(n,A7);return new this(I(I(I({},t),g),{},{left:a,top:l,width:d,height:h,visible:!!(f&&d&&h)}))}}U(Wr,"type","Rect"),U(Wr,"cacheProperties",[...Un,...ej]),U(Wr,"ownDefaults",{rx:0,ry:0}),U(Wr,"ATTRIBUTE_NAMES",[...Ci,"x","y","rx","ry","width","height"]),De.setClass(Wr),De.setSVGClass(Wr);const Cn="initialization",yh="added",Z0="removed",bh="imperative",tj=(r,e)=>{const{strokeUniform:t,strokeWidth:s,width:n,height:a,group:l}=e,d=l&&l!==r?Rh(l.calcTransformMatrix(),r.calcTransformMatrix()):null,h=d?e.getRelativeCenterPoint().transform(d):e.getRelativeCenterPoint(),f=!e.isStrokeAccountedForInDimensions(),g=t&&f?f9(new se(s,s),void 0,r.calcTransformMatrix()):B0,x=!t&&f?s:0,v=I0(n+x,a+x,z0([d,e.calcOwnMatrix()],!0)).add(g).scalarDivide(2);return[h.subtract(v),h.add(v)]};class Bh{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:s,strategy:n}=e;return t===Cn||t===bh||!!s&&n!==s}shouldLayoutClipPath(e){let{type:t,target:{clipPath:s}}=e;return t!==Cn&&s&&!s.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:s,target:n}=t;if(s===bh&&t.overrides)return t.overrides;if(e.length===0)return;const{left:a,top:l,width:d,height:h}=An(e.map(x=>tj(n,x)).reduce((x,v)=>x.concat(v),[])),f=new se(d,h),g=new se(a,l).add(f.scalarDivide(2));if(s===Cn){const x=this.getInitialSize(t,{size:f,center:g});return{center:g,relativeCorrection:new se(0,0),size:x}}return{center:g.transform(n.calcOwnMatrix()),size:f}}}U(Bh,"type","strategy");class Np extends Bh{shouldPerformLayout(e){return!0}}U(Np,"type","fit-content"),De.setClass(Np);const E7=["strategy"],N7=["target","strategy","bubbles","prevStrategy"],sj="layoutManager";class Ec{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Np;U(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=I(I({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const s=this.getLayoutResult(t);s&&this.commitLayout(t,s),this.onAfterLayout(t,s),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:s}=t;return[fh,y4,jc,b4,Dh,w4,hh,J8,e9].map(n=>e.on(n,a=>this.performLayout(n===fh?{type:"object_modified",trigger:n,e:a,target:s}:{type:"object_modifying",trigger:n,e:a,target:s})))}subscribe(e,t){this.unsubscribe(e,t);const s=this.attachHandlers(e,t);this._subscriptions.set(e,s)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(s=>s()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:s}=e,{canvas:n}=t;if(s===Cn||s===yh?this.subscribeTargets(e):s===Z0&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),n&&n.fire("object:layout:before",{target:t,context:e}),s===bh&&e.deep){const a=jt(e,E7);t.forEachObject(l=>l.layoutManager&&l.layoutManager.performLayout(I(I({},a),{},{bubbles:!1,target:l})))}}getLayoutResult(e){const{target:t,strategy:s,type:n}=e,a=s.calcLayoutResult(e,t.getObjects());if(!a)return;const l=n===Cn?new se:t.getRelativeCenterPoint(),{center:d,correction:h=new se,relativeCorrection:f=new se}=a,g=l.subtract(d).add(h).transform(n===Cn?As:Or(t.calcOwnMatrix()),!0).add(f);return{result:a,prevCenter:l,nextCenter:d,offset:g}}commitLayout(e,t){const{target:s}=e,{result:{size:n},nextCenter:a}=t;var l,d;s.set({width:n.x,height:n.y}),this.layoutObjects(e,t),e.type===Cn?s.set({left:(l=e.x)!==null&&l!==void 0?l:a.x+n.x*Ht(s.originX),top:(d=e.y)!==null&&d!==void 0?d:a.y+n.y*Ht(s.originY)}):(s.setPositionByOrigin(a,Ke,Ke),s.setCoords(),s.set("dirty",!0))}layoutObjects(e,t){const{target:s}=e;s.forEachObject(n=>{n.group===s&&this.layoutObject(e,t,n)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,s.clipPath)}layoutObject(e,t,s){let{offset:n}=t;s.set({left:s.left+n.x,top:s.top+n.y})}onAfterLayout(e,t){const{target:s,strategy:n,bubbles:a,prevStrategy:l}=e,d=jt(e,N7),{canvas:h}=s;s.fire("layout:after",{context:e,result:t}),h&&h.fire("object:layout:after",{context:e,result:t,target:s});const f=s.parent;a&&f!=null&&f.layoutManager&&((d.path||(d.path=[])).push(s),f.layoutManager.performLayout(I(I({},d),{},{target:f}))),s.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(s=>s())),e.clear()}toObject(){return{type:sj,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}De.setClass(Ec,sj);const D7=["type","objects","layoutManager"];class O7 extends Ec{performLayout(){}}class aa extends _4(Ss){static getDefaults(){return I(I({},super.getDefaults()),aa.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),U(this,"_activeObjects",[]),U(this,"__objectSelectionTracker",void 0),U(this,"__objectSelectionDisposer",void 0),Object.assign(this,aa.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var s;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(n=>{this.enterGroup(n,!1)}),this.layoutManager=(s=t.layoutManager)!==null&&s!==void 0?s:new Ec,this.layoutManager.performLayout({type:Cn,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(bi("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(bi("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,s,n)=>this.canEnterGroup(t)&&n.indexOf(t)===s)}add(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const n=this._filterObjectsBeforeEnteringGroup(t),a=super.add(...n);return this._onAfterObjectsChange(yh,n),a}insertAt(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];const a=this._filterObjectsBeforeEnteringGroup(s),l=super.insertAt(e,...a);return this._onAfterObjectsChange(yh,a),l}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(Z0,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const s=this[e];return super._set(e,t),e==="canvas"&&s!==t&&(this._objects||[]).forEach(n=>{n._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:s}=t;const n=this._activeObjects;if(e)n.push(s),this._set("dirty",!0);else if(n.length>0){const a=n.indexOf(s);a>-1&&(n.splice(a,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&ph(e,ms(Or(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const s=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();s&&(s===e||e.isDescendantOf(s))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(ph(e,ms(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const s=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;s>-1&&this._activeObjects.splice(s,1)}shouldCache(){const e=Ss.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,s){this._renderBackground(e);for(let a=0;a<this._objects.length;a++){var n;const l=this._objects[a];(n=this.canvas)!==null&&n!==void 0&&n.preserveObjectStacking&&l.group!==this?(e.save(),e.transform(...Or(this.calcTransformMatrix())),l.render(e),e.restore()):l.group===this&&l.render(e)}this._drawClipPath(e,this.clipPath,s)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(I({target:this,type:bh},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const s=this.includeDefaultValues;return this._objects.filter(function(n){return!n.excludeFromExport}).map(function(n){const a=n.includeDefaultValues;n.includeDefaultValues=s;const l=n[e||"toObject"](t);return n.includeDefaultValues=a,l})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return I(I(I({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=Wr.prototype._toSVG.call(this),s=t.indexOf("COMMON_PARTS");t[s]='for="group" ';const n=t.join("");return e?e(n):n}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],s=this._createSVGBgRect(e);s&&t.push("		",s);for(let n=0;n<this._objects.length;n++)t.push("		",this._objects[n].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],s=this._createSVGBgRect(e);s&&t.push("	",s);for(let n=0;n<this._objects.length;n++)t.push("	",this._objects[n].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:s,objects:n=[],layoutManager:a}=e,l=jt(e,D7);return Promise.all([Cc(n,t),Lh(l,t)]).then(d=>{let[h,f]=d;const g=new this(h,I(I(I({},l),f),{},{layoutManager:new O7}));if(a){const x=De.getClass(a.type),v=De.getClass(a.strategy);g.layoutManager=new x(new v)}else g.layoutManager=new Ec;return g.layoutManager.subscribeTargets({type:Cn,target:g,targets:g.getObjects()}),g.setCoords(),g})}}U(aa,"type","Group"),U(aa,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),De.setClass(aa);const M7=(r,e)=>Math.min(e.width/r.width,e.height/r.height),L7=(r,e)=>Math.max(e.width/r.width,e.height/r.height),Dp="\\s*,?\\s*",ql="".concat(Dp,"(").concat(Mr,")"),R7="".concat(ql).concat(ql).concat(ql).concat(Dp,"([01])").concat(Dp,"([01])").concat(ql).concat(ql),P7={m:"l",M:"L"},F7=(r,e,t,s,n,a,l,d,h,f,g)=>{const x=Ln(r),v=Rn(r),b=Ln(e),w=Rn(e),_=t*n*b-s*a*w+l,T=s*n*b+t*a*w+d;return["C",f+h*(-t*n*v-s*a*x),g+h*(-s*n*v+t*a*x),_+h*(t*n*w+s*a*b),T+h*(s*n*w-t*a*b),_,T]},Sw=(r,e,t,s)=>{const n=Math.atan2(e,r),a=Math.atan2(s,t);return a>=n?a-n:2*Math.PI-(n-a)};function jw(r,e,t,s,n,a,l,d){let h;if(nt.cachesBoundsOfCurve&&(h=[...arguments].join(),dc.boundsOfCurveCache[h]))return dc.boundsOfCurveCache[h];const f=Math.sqrt,g=Math.abs,x=[],v=[[0,0],[0,0]];let b=6*r-12*t+6*n,w=-3*r+9*t-9*n+3*l,_=3*t-3*r;for(let O=0;O<2;++O){if(O>0&&(b=6*e-12*s+6*a,w=-3*e+9*s-9*a+3*d,_=3*s-3*e),g(w)<1e-12){if(g(b)<1e-12)continue;const H=-_/b;0<H&&H<1&&x.push(H);continue}const D=b*b-4*_*w;if(D<0)continue;const F=f(D),B=(-b+F)/(2*w);0<B&&B<1&&x.push(B);const P=(-b-F)/(2*w);0<P&&P<1&&x.push(P)}let T=x.length;const S=T,E=rj(r,e,t,s,n,a,l,d);for(;T--;){const{x:O,y:D}=E(x[T]);v[0][T]=O,v[1][T]=D}v[0][S]=r,v[1][S]=e,v[0][S+1]=l,v[1][S+1]=d;const A=[new se(Math.min(...v[0]),Math.min(...v[1])),new se(Math.max(...v[0]),Math.max(...v[1]))];return nt.cachesBoundsOfCurve&&(dc.boundsOfCurveCache[h]=A),A}const B7=(r,e,t)=>{let[s,n,a,l,d,h,f,g]=t;const x=((v,b,w,_,T,S,E)=>{if(w===0||_===0)return[];let A=0,O=0,D=0;const F=Math.PI,B=E*L0,P=Rn(B),H=Ln(B),N=.5*(-H*v-P*b),V=.5*(-H*b+P*v),G=w**2,ne=_**2,Q=V**2,ie=N**2,L=G*ne-G*Q-ne*ie;let $=Math.abs(w),K=Math.abs(_);if(L<0){const ce=Math.sqrt(1-L/(G*ne));$*=ce,K*=ce}else D=(T===S?-1:1)*Math.sqrt(L/(G*Q+ne*ie));const pe=D*$*V/K,M=-D*K*N/$,J=H*pe-P*M+.5*v,ye=P*pe+H*M+.5*b;let te=Sw(1,0,(N-pe)/$,(V-M)/K),fe=Sw((N-pe)/$,(V-M)/K,(-N-pe)/$,(-V-M)/K);S===0&&fe>0?fe-=2*F:S===1&&fe<0&&(fe+=2*F);const re=Math.ceil(Math.abs(fe/F*2)),le=[],de=fe/re,Ce=8/3*Math.sin(de/4)*Math.sin(de/4)/Math.sin(de/2);let Me=te+de;for(let ce=0;ce<re;ce++)le[ce]=F7(te,Me,H,P,$,K,J,ye,Ce,A,O),A=le[ce][5],O=le[ce][6],te=Me,Me+=de;return le})(f-r,g-e,n,a,d,h,l);for(let v=0,b=x.length;v<b;v++)x[v][1]+=r,x[v][2]+=e,x[v][3]+=r,x[v][4]+=e,x[v][5]+=r,x[v][6]+=e;return x},z7=r=>{let e=0,t=0,s=0,n=0;const a=[];let l,d=0,h=0;for(const f of r){const g=[...f];let x;switch(g[0]){case"l":g[1]+=e,g[2]+=t;case"L":e=g[1],t=g[2],x=["L",e,t];break;case"h":g[1]+=e;case"H":e=g[1],x=["L",e,t];break;case"v":g[1]+=t;case"V":t=g[1],x=["L",e,t];break;case"m":g[1]+=e,g[2]+=t;case"M":e=g[1],t=g[2],s=g[1],n=g[2],x=["M",e,t];break;case"c":g[1]+=e,g[2]+=t,g[3]+=e,g[4]+=t,g[5]+=e,g[6]+=t;case"C":d=g[3],h=g[4],e=g[5],t=g[6],x=["C",g[1],g[2],d,h,e,t];break;case"s":g[1]+=e,g[2]+=t,g[3]+=e,g[4]+=t;case"S":l==="C"?(d=2*e-d,h=2*t-h):(d=e,h=t),e=g[3],t=g[4],x=["C",d,h,g[1],g[2],e,t],d=x[3],h=x[4];break;case"q":g[1]+=e,g[2]+=t,g[3]+=e,g[4]+=t;case"Q":d=g[1],h=g[2],e=g[3],t=g[4],x=["Q",d,h,e,t];break;case"t":g[1]+=e,g[2]+=t;case"T":l==="Q"?(d=2*e-d,h=2*t-h):(d=e,h=t),e=g[1],t=g[2],x=["Q",d,h,e,t];break;case"a":g[6]+=e,g[7]+=t;case"A":B7(e,t,g).forEach(v=>a.push(v)),e=g[6],t=g[7];break;case"z":case"Z":e=s,t=n,x=["Z"]}x?(a.push(x),l=x[0]):l=""}return a},wh=(r,e,t,s)=>Math.sqrt((t-r)**2+(s-e)**2),rj=(r,e,t,s,n,a,l,d)=>h=>{const f=h**3,g=(b=>3*b**2*(1-b))(h),x=(b=>3*b*(1-b)**2)(h),v=(b=>(1-b)**3)(h);return new se(l*f+n*g+t*x+r*v,d*f+a*g+s*x+e*v)},nj=r=>r**2,ij=r=>2*r*(1-r),aj=r=>(1-r)**2,U7=(r,e,t,s,n,a,l,d)=>h=>{const f=nj(h),g=ij(h),x=aj(h),v=3*(x*(t-r)+g*(n-t)+f*(l-n)),b=3*(x*(s-e)+g*(a-s)+f*(d-a));return Math.atan2(b,v)},V7=(r,e,t,s,n,a)=>l=>{const d=nj(l),h=ij(l),f=aj(l);return new se(n*d+t*h+r*f,a*d+s*h+e*f)},I7=(r,e,t,s,n,a)=>l=>{const d=1-l,h=2*(d*(t-r)+l*(n-t)),f=2*(d*(s-e)+l*(a-s));return Math.atan2(f,h)},Cw=(r,e,t)=>{let s=new se(e,t),n=0;for(let a=1;a<=100;a+=1){const l=r(a/100);n+=wh(s.x,s.y,l.x,l.y),s=l}return n},H7=(r,e)=>{let t,s=0,n=0,a={x:r.x,y:r.y},l=I({},a),d=.01,h=0;const f=r.iterator,g=r.angleFinder;for(;n<e&&d>1e-4;)l=f(s),h=s,t=wh(a.x,a.y,l.x,l.y),t+n>e?(s-=d,d/=2):(a=l,s+=d,n+=t);return I(I({},l),{},{angle:g(h)})},oj=r=>{let e,t,s=0,n=0,a=0,l=0,d=0;const h=[];for(const f of r){const g={x:n,y:a,command:f[0],length:0};switch(f[0]){case"M":t=g,t.x=l=n=f[1],t.y=d=a=f[2];break;case"L":t=g,t.length=wh(n,a,f[1],f[2]),n=f[1],a=f[2];break;case"C":e=rj(n,a,f[1],f[2],f[3],f[4],f[5],f[6]),t=g,t.iterator=e,t.angleFinder=U7(n,a,f[1],f[2],f[3],f[4],f[5],f[6]),t.length=Cw(e,n,a),n=f[5],a=f[6];break;case"Q":e=V7(n,a,f[1],f[2],f[3],f[4]),t=g,t.iterator=e,t.angleFinder=I7(n,a,f[1],f[2],f[3],f[4]),t.length=Cw(e,n,a),n=f[3],a=f[4];break;case"Z":t=g,t.destX=l,t.destY=d,t.length=wh(n,a,l,d),n=l,a=d}s+=t.length,h.push(t)}return h.push({length:s,x:n,y:a}),h},$7=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oj(r),s=0;for(;e-t[s].length>0&&s<t.length-2;)e-=t[s].length,s++;const n=t[s],a=e/n.length,l=r[s];switch(n.command){case"M":return{x:n.x,y:n.y,angle:0};case"Z":return I(I({},new se(n.x,n.y).lerp(new se(n.destX,n.destY),a)),{},{angle:Math.atan2(n.destY-n.y,n.destX-n.x)});case"L":return I(I({},new se(n.x,n.y).lerp(new se(l[1],l[2]),a)),{},{angle:Math.atan2(l[2]-n.y,l[1]-n.x)});case"C":case"Q":return H7(n,e)}},G7=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),Tw=new RegExp(R7,"g"),W7=new RegExp(Mr,"gi"),Y7={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},q7=r=>{var e;const t=[],s=(e=r.match(G7))!==null&&e!==void 0?e:[];for(const n of s){const a=n[0];if(a==="z"||a==="Z"){t.push([a]);continue}const l=Y7[a.toLowerCase()];let d=[];if(a==="a"||a==="A"){Tw.lastIndex=0;for(let h=null;h=Tw.exec(n);)d.push(...h.slice(1))}else d=n.match(W7)||[];for(let h=0;h<d.length;h+=l){const f=new Array(l),g=P7[a];f[0]=h>0&&g?g:a;for(let x=0;x<l;x++)f[x+1]=parseFloat(d[h+x]);t.push(f)}}return t},X7=(r,e)=>r.map(t=>t.map((s,n)=>n===0||e===void 0?s:yt(s,e)).join(" ")).join(" ");function Op(r,e){const t=r.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(s=>{let[n,a]=s;return t.setProperty(n,a)}))}class K7 extends M4{constructor(e){let{allowTouchScrolling:t=!1,containerClass:s=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),U(this,"upper",void 0),U(this,"container",void 0);const{el:n}=this.lower,a=this.createUpperCanvas();this.upper={el:a,ctx:a.getContext("2d")},this.applyCanvasStyle(n,{allowTouchScrolling:t}),this.applyCanvasStyle(a,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const l=this.createContainerElement();l.classList.add(s),n.parentNode&&n.parentNode.replaceChild(l,n),l.append(n,a),this.container=l}createUpperCanvas(){const{el:e}=this.lower,t=Pn();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Fo().createElement("div");return e.setAttribute("data-fabric","wrapper"),Op(e,{position:"relative"}),Zb(e),e}applyCanvasStyle(e,t){const{styles:s,allowTouchScrolling:n}=t;Op(e,I(I({},s),{},{"touch-action":n?"manipulation":Bs})),Zb(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:s,ctx:n}=this.upper;O4(s,n,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),jp(this.upper.el,e),jp(this.container,e)}cleanupDOM(e){const t=this.container,{el:s}=this.lower,{el:n}=this.upper;super.cleanupDOM(e),t.removeChild(n),t.removeChild(s),t.parentNode&&t.parentNode.replaceChild(s,t)}dispose(){super.dispose(),Jr().dispose(this.upper.el),delete this.upper,delete this.container}}class zh extends Ic{constructor(){super(...arguments),U(this,"targets",[]),U(this,"_hoveredTargets",[]),U(this,"_objectsToRender",void 0),U(this,"_currentTransform",null),U(this,"_groupSelector",null),U(this,"contextTopDirty",!1)}static getDefaults(){return I(I({},super.getDefaults()),zh.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new K7(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),s=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=s,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,s){const n=this.targetFindTolerance,a=this.pixelFindContext;this.clearContext(a),a.save(),a.translate(-t+n,-s+n),a.transform(...this.viewportTransform);const l=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(a),e.selectionBackgroundColor=l,a.restore();const d=Math.round(n*this.getRetinaScaling());return e7(a,d,d,d)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(s=>!!s&&e[s]===!0):e[t])}_shouldClearSelection(e,t){const s=this.getActiveObjects(),n=this._activeObject;return!!(!t||t&&n&&s.length>1&&s.indexOf(t)===-1&&n!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&n&&n!==t)}_shouldCenterTransform(e,t,s){if(!e)return;let n;return t===Oh||t===Us||t===xr||t===jc?n=this.centeredScaling||e.centeredScaling:t===F0&&(n=this.centeredRotation||e.centeredRotation),n?!s:s}_getOriginFromCorner(e,t){const s={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?s.x=Pt:["mr","tr","br"].includes(t)&&(s.x=lt),["tl","mt","tr"].includes(t)?s.y=Sp:["bl","mb","br"].includes(t)&&(s.y=Fs)),s}_setupCurrentTransform(e,t,s){var n;const a=t.group?_o(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:l="",control:d}=t.getActiveControl()||{},h=s&&d?(n=d.getActionHandler(e,t,d))===null||n===void 0?void 0:n.bind(d):p9,f=((b,w,_,T)=>{if(!w||!b)return"drag";const S=T.controls[w];return S.getActionName(_,S,T)})(s,l,e,t),g=e[this.centeredKey],x=this._shouldCenterTransform(t,f,g)?{x:Ke,y:Ke}:this._getOriginFromCorner(t,l),v={target:t,action:f,actionHandler:h,actionPerformed:!1,corner:l,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:a.x-t.left,offsetY:a.y-t.top,originX:x.x,originY:x.y,ex:a.x,ey:a.y,lastX:a.x,lastY:a.y,theta:Ft(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:g,original:I(I({},L4(t)),{},{originX:x.x,originY:x.y})};this._currentTransform=v,this.fire("before:transform",{e,transform:v})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:s,deltaX:n,deltaY:a}=this._groupSelector,l=new se(t,s).transform(this.viewportTransform),d=new se(t+n,s+a).transform(this.viewportTransform),h=this.selectionLineWidth/2;let f=Math.min(l.x,d.x),g=Math.min(l.y,d.y),x=Math.max(l.x,d.x),v=Math.max(l.y,d.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(f,g,x-f,v-g)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,f+=h,g+=h,x-=h,v-=h,Ss.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(f,g,x-f,v-g))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),s=this._activeObject,n=this.getActiveObjects();if(this.targets=[],s&&n.length>=1){if(s.findControl(t,Cp(e))||n.length>1&&this.searchPossibleTargets([s],t))return s;if(s===this.searchPossibleTargets([s],t)){if(this.preserveObjectStacking){const a=this.targets;this.targets=[];const l=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&l&&l!==s?(this.targets=a,s):l}return s}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let s=e.getCoords();const n=this.getZoom(),a=e.padding/n;if(a){const[l,d,h,f]=s,g=Math.atan2(d.y-l.y,d.x-l.x),x=Ln(g)*a,v=Rn(g)*a,b=x+v,w=x-v;s=[new se(l.x-w,l.y-b),new se(d.x+b,d.y-w),new se(h.x+w,h.y+b),new se(f.x-b,f.y+w)]}return Tt.isPointInPolygon(t,s)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,_o(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let s=e.length;for(;s--;){const n=e[s];if(this._checkTarget(n,t)){if(qd(n)&&n.subTargetCheck){const a=this._searchPossibleTargets(n._objects,t);a&&this.targets.push(a)}return n}}}searchPossibleTargets(e,t){const s=this._searchPossibleTargets(e,t);if(s&&qd(s)&&s.interactive&&this.targets[0]){const n=this.targets;for(let a=n.length-1;a>0;a--){const l=n[a];if(!qd(l)||!l.interactive)return l}return n[0]}return s}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const s=this.upperCanvasEl,n=s.getBoundingClientRect();let a=c9(e),l=n.width||0,d=n.height||0;l&&d||(Fs in n&&Sp in n&&(d=Math.abs(n.top-n.bottom)),Pt in n&&lt in n&&(l=Math.abs(n.right-n.left))),this.calcOffset(),a.x=a.x-this._offset.left,a.y=a.y-this._offset.top,t||(a=_o(a,void 0,this.viewportTransform));const h=this.getRetinaScaling();h!==1&&(a.x/=h,a.y/=h);const f=l===0||d===0?new se(1,1):new se(s.width/l,s.height/d);return a.multiply(f)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Pn(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return Xi(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let s=!1,n=!1;const a=this.getActiveObjects(),l=[],d=[];e.forEach(h=>{a.includes(h)||(s=!0,h.fire("deselected",{e:t,target:h}),d.push(h))}),a.forEach(h=>{e.includes(h)||(s=!0,h.fire("selected",{e:t,target:h}),l.push(h))}),e.length>0&&a.length>0?(n=!0,s&&this.fire("selection:updated",{e:t,selected:l,deselected:d})):a.length>0?(n=!0,this.fire("selection:created",{e:t,selected:l})):e.length>0&&(n=!0,this.fire("selection:cleared",{e:t,deselected:d})),n&&(this._objectsToRender=void 0)}setActiveObject(e,t){const s=this.getActiveObjects(),n=this._setActiveObject(e,t);return this._fireSelectionEvents(s,t),n}_setActiveObject(e,t){const s=this._activeObject;return s!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Xi(e)&&s!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const s=this._activeObject;return!!s&&!s.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===s&&this.endCurrentTransform(e),Xi(s)&&s===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),s=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[s]});const n=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),n}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,s=t.target,n={e,target:s,transform:t,action:t.action};s._scaling&&(s._scaling=!1),s.setCoords(),t.actionPerformed&&(this.fire("object:modified",n),s.fire(fh,n))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;Xi(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,s){const n=this._realizeGroupTransformOnObject(e),a=super._toObject(e,t,s);return e.set(n),a}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&Xi(t)&&this._activeObject===t){const s=Vo(e,["angle","flipX","flipY",lt,Us,xr,Bo,zo,Fs]);return d9(e,t.calcOwnMatrix()),s}return{}}_setSVGObject(e,t,s){const n=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,s),t.set(n)}}U(zh,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class Z7{constructor(e){U(this,"targets",[]),U(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:n}=e.getActiveObject()||{};n&&n.focus()},s=e.upperCanvasEl;s.addEventListener("click",t),this.__disposer=()=>s.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),ho(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const Q7=["target","oldTarget","fireCanvas","e"],Ks={passive:!1},co=(r,e)=>{const t=r.getViewportPoint(e),s=r.getScenePoint(e);return{viewportPoint:t,scenePoint:s,pointer:t,absolutePointer:s}},di=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];return r.addEventListener(...t)},fr=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];return r.removeEventListener(...t)},J7={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class Mp extends zh{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),U(this,"_isClick",void 0),U(this,"textEditingManager",new Z7(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(di,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const s=this.upperCanvasEl,n=this._getEventPrefix();e(D4(s),"resize",this._onResize),e(s,n+"down",this._onMouseDown),e(s,"".concat(n,"move"),this._onMouseMove,Ks),e(s,"".concat(n,"out"),this._onMouseOut),e(s,"".concat(n,"enter"),this._onMouseEnter),e(s,"wheel",this._onMouseWheel),e(s,"contextmenu",this._onContextMenu),e(s,"click",this._onClick),e(s,"dblclick",this._onClick),e(s,"dragstart",this._onDragStart),e(s,"dragend",this._onDragEnd),e(s,"dragover",this._onDragOver),e(s,"dragenter",this._onDragEnter),e(s,"dragleave",this._onDragLeave),e(s,"drop",this._onDrop),this.enablePointerEvents||e(s,"touchstart",this._onTouchStart,Ks)}removeListeners(){this.addOrRemove(fr,"remove");const e=this._getEventPrefix(),t=Dr(this.upperCanvasEl);fr(t,"".concat(e,"up"),this._onMouseUp),fr(t,"touchend",this._onTouchEnd,Ks),fr(t,"".concat(e,"move"),this._onMouseMove,Ks),fr(t,"touchmove",this._onMouseMove,Ks),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,s=I({e},co(this,e));this.fire("mouse:out",I(I({},s),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",I({},s)),this._hoveredTargets.forEach(n=>{this.fire("mouse:out",I(I({},s),{},{target:n})),n&&n.fire("mouseout",I({},s))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",I({e},co(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const s={e,target:t};return this.fire("dragstart",s),t.fire("dragstart",s),void di(this.upperCanvasEl,"drag",this._onDragProgress)}Qb(e)}_renderDragEffects(e,t,s){let n=!1;const a=this._dropTarget;a&&a!==t&&a!==s&&(a.clearContextTop(),n=!0),t?.clearContextTop(),s!==t&&s?.clearContextTop();const l=this.contextTop;l.save(),l.transform(...this.viewportTransform),t&&(l.save(),t.transform(l),t.renderDragSourceEffect(e),l.restore(),n=!0),s&&(l.save(),s.transform(l),s.renderDropTargetEffect(e),l.restore(),n=!0),l.restore(),n&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==Bs,s=t?this._activeObject:void 0,n={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:s};fr(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",n),this._dragSource&&this._dragSource.fire("dragend",n),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:s,targets:n}=this.findDragTargets(e),a=this._dragSource,l={e,target:s,subTargets:n,dragSource:a,canDrop:!1,dropTarget:void 0};let d;this.fire(t,l),this._fireEnterLeaveEvents(s,l),s&&(s.canDrop(e)&&(d=s),s.fire(t,l));for(let h=0;h<n.length;h++){const f=n[h];f.canDrop(e)&&(d=f),f.fire(t,l)}this._renderDragEffects(e,a,d),this._dropTarget=d}_onDragEnter(e){const{target:t,targets:s}=this.findDragTargets(e),n={e,target:t,subTargets:s,dragSource:this._dragSource};this.fire("dragenter",n),this._fireEnterLeaveEvents(t,n)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:s}=this.findDragTargets(e),n=this._basicEventHandler("drop:before",I({e,target:t,subTargets:s,dragSource:this._dragSource},co(this,e)));n.didDrop=!1,n.dropTarget=void 0,this._basicEventHandler("drop",n),this.fire("drop:after",n)}_onContextMenu(e){const t=this.findTarget(e),s=this.targets||[],n=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:s});return this.stopContextMenu&&Qb(e),this._basicEventHandler("contextmenu",n),!1}_onClick(e){const t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),t==2&&e.type==="dblclick"&&this._handleEvent(e,"dblclick"),t==3&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const s=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||s&&this._target===s)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const n=this.upperCanvasEl,a=this._getEventPrefix(),l=Dr(n);di(l,"touchend",this._onTouchEnd,Ks),t&&di(l,"touchmove",this._onMouseMove,Ks),fr(n,"".concat(a,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,s=this._getEventPrefix();fr(t,"".concat(s,"move"),this._onMouseMove,Ks);const n=Dr(t);di(n,"".concat(s,"up"),this._onMouseUp),di(n,"".concat(s,"move"),this._onMouseMove,Ks)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),s=Dr(this.upperCanvasEl);fr(s,"touchend",this._onTouchEnd,Ks),fr(s,"touchmove",this._onMouseMove,Ks),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{di(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,s=this._getEventPrefix();if(this._isMainEvent(e)){const n=Dr(this.upperCanvasEl);fr(n,"".concat(s,"up"),this._onMouseUp),fr(n,"".concat(s,"move"),this._onMouseMove,Ks),di(t,"".concat(s,"move"),this._onMouseMove,Ks)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const s=this._currentTransform,n=this._isClick,a=this._target,{button:l}=e;if(l)return(this.fireMiddleClick&&l===1||this.fireRightClick&&l===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let d,h,f=!1;if(s&&(this._finalizeCurrentTransform(e),f=s.actionPerformed),!n){const g=a===this._activeObject;this.handleSelection(e),f||(f=this._shouldRender(a)||!g&&a===this._activeObject)}if(a){const g=a.findControl(this.getViewportPoint(e),Cp(e)),{key:x,control:v}=g||{};if(h=x,a.selectable&&a!==this._activeObject&&a.activeOn==="up")this.setActiveObject(a,e),f=!0;else if(v){const b=v.getMouseUpHandler(e,a,v);b&&(d=this.getScenePoint(e),b.call(v,e,s,d.x,d.y))}a.isMoving=!1}if(s&&(s.target!==a||s.corner!==h)){const g=s.target&&s.target.controls[s.corner],x=g&&g.getMouseUpHandler(e,s.target,g);d=d||this.getScenePoint(e),x&&x.call(g,e,s,d.x,d.y)}this._setCursorFromEvent(e,a),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,a&&(a.__corner=void 0),f?this.requestRenderAll():n||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:s,subTargets:n=[]}=t;this.fire(e,t),s&&s.fire(e,t);for(let a=0;a<n.length;a++)n[a]!==s&&n[a].fire(e,t);return t}_handleEvent(e,t,s){const n=this._target,a=this.targets||[],l=I(I(I({e,target:n,subTargets:a},co(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),t==="down:before"||t==="down"?s:{});this.fire("mouse:".concat(t),l),n&&n.fire("mouse".concat(t),l);for(let d=0;d<a.length;d++)a[d]!==n&&a[d].fire("mouse".concat(t),l)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target,s=!!t&&t===this._activeObject;const{button:n}=e;if(n)return(this.fireMiddleClick&&n===1||this.fireRightClick&&n===2)&&this._handleEvent(e,"down",{alreadySelected:s}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let a=this._shouldRender(t),l=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,l=!0,a=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const d=this.getScenePoint(e);this._groupSelector={x:d.x,y:d.y,deltaY:0,deltaX:0}}if(s=!!t&&t===this._activeObject,t){t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const d=t.findControl(this.getViewportPoint(e),Cp(e));if(t===this._activeObject&&(d||!l)){this._setupCurrentTransform(e,t,s);const h=d?d.control:void 0,f=this.getScenePoint(e),g=h&&h.getMouseDownHandler(e,t,h);g&&g.call(h,e,this._currentTransform,f.x,f.y)}}a&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:s}),a&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=_o(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const s=this.getScenePoint(e);t.deltaX=s.x-t.x,t.deltaY=s.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const s=this.findTarget(e);this._setCursorFromEvent(e,s),this._fireOverOutEvents(e,s)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const s=this._hoveredTarget,n=this._hoveredTargets,a=this.targets,l=Math.max(n.length,a.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:s,fireCanvas:!0});for(let d=0;d<l;d++)this.fireSyntheticInOutEvents("mouse",{e,target:a[d],oldTarget:n[d]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const s=this._draggedoverTarget,n=this._hoveredTargets,a=this.targets,l=Math.max(n.length,a.length);this.fireSyntheticInOutEvents("drag",I(I({},t),{},{target:e,oldTarget:s,fireCanvas:!0}));for(let d=0;d<l;d++)this.fireSyntheticInOutEvents("drag",I(I({},t),{},{target:a[d],oldTarget:n[d]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:s,oldTarget:n,fireCanvas:a,e:l}=t,d=jt(t,Q7);const{targetIn:h,targetOut:f,canvasIn:g,canvasOut:x}=J7[e],v=n!==s;if(n&&v){const b=I(I({},d),{},{e:l,target:n,nextTarget:s},co(this,l));a&&this.fire(x,b),n.fire(f,b)}if(s&&v){const b=I(I({},d),{},{e:l,target:s,previousTarget:n},co(this,l));a&&this.fire(g,b),s.fire(h,b)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),s=this._currentTransform,n=s.target,a=n.group?_o(t,void 0,n.group.calcTransformMatrix()):t;s.shiftKey=e.shiftKey,s.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,s,a),s.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,s){const{action:n,actionHandler:a,target:l}=t,d=!!a&&a(e,t,s.x,s.y);d&&l.setCoords(),n==="drag"&&d&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||d}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let s=t.hoverCursor||this.hoverCursor;const n=Xi(this._activeObject)?this._activeObject:null,a=(!n||t.group!==n)&&t.findControl(this.getViewportPoint(e));if(a){const l=a.control;this.setCursor(l.cursorStyleHandler(e,l,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(l=>{s=l.hoverCursor||s}),this.setCursor(s)}handleMultiSelection(e,t){const s=this._activeObject,n=Xi(s);if(s&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(s!==t||n)&&(n||!t.isDescendantOf(s)&&!s.isDescendantOf(t))&&!t.onSelect({e})&&!s.getActiveControl()){if(n){const a=s.getObjects();if(t===s){const l=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(a,l)||this.searchPossibleTargets(this._objects,l))||!t.selectable)return!1}t.group===s?(s.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],s.size()===1&&this._setActiveObject(s.item(0),e)):(s.multiSelectAdd(t),this._hoveredTarget=s,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(a,e)}else{s.isEditing&&s.exitEditing();const a=new(De.getClass("ActiveSelection"))([],{canvas:this});a.multiSelectAdd(s,t),this._hoveredTarget=a,this._setActiveObject(a,e),this._fireSelectionEvents([s],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:s,deltaX:n,deltaY:a}=this._groupSelector,l=new se(t,s),d=l.add(new se(n,a)),h=l.min(d),f=l.max(d).subtract(h),g=this.collectObjects({left:h.x,top:h.y,width:f.x,height:f.y},{includeIntersecting:!this.selectionFullyContained}),x=l.eq(d)?g[0]?[g[0]]:[]:g.length>1?g.filter(v=>!v.onSelect({e})).reverse():g;if(x.length===1)this.setActiveObject(x[0],e);else if(x.length>1){const v=De.getClass("ActiveSelection");this.setActiveObject(new v(x,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const lj={x1:0,y1:0,x2:0,y2:0},eL=I(I({},lj),{},{r1:0,r2:0}),yo=(r,e)=>isNaN(r)&&typeof e=="number"?e:r,tL=/^(\d+\.\d+)%|(\d+)%$/;function cj(r){return r&&tL.test(r)}function uj(r,e){const t=typeof r=="number"?r:typeof r=="string"?parseFloat(r)/(cj(r)?100:1):NaN;return Ao(0,yo(t,e),1)}const sL=/\s*;\s*/,rL=/\s*:\s*/;function nL(r,e){let t,s;const n=r.getAttribute("style");if(n){const l=n.split(sL);l[l.length-1]===""&&l.pop();for(let d=l.length;d--;){const[h,f]=l[d].split(rL).map(g=>g.trim());h==="stop-color"?t=f:h==="stop-opacity"&&(s=f)}}const a=new ht(t||r.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:uj(r.getAttribute("offset"),0),color:a.toRgb(),opacity:yo(parseFloat(s||r.getAttribute("stop-opacity")||""),1)*a.getAlpha()*e}}function iL(r,e){const t=[],s=r.getElementsByTagName("stop"),n=uj(e,1);for(let a=s.length;a--;)t.push(nL(s[a],n));return t}function dj(r){return r.nodeName==="linearGradient"||r.nodeName==="LINEARGRADIENT"?"linear":"radial"}function hj(r){return r.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Cr(r,e){return r.getAttribute(e)}function aL(r,e){return function(t,s){let n,{width:a,height:l,gradientUnits:d}=s;return Object.keys(t).reduce((h,f)=>{const g=t[f];return g==="Infinity"?n=1:g==="-Infinity"?n=0:(n=typeof g=="string"?parseFloat(g):g,typeof g=="string"&&cj(g)&&(n*=.01,d==="pixels"&&(f!=="x1"&&f!=="x2"&&f!=="r2"||(n*=a),f!=="y1"&&f!=="y2"||(n*=l)))),h[f]=n,h},{})}(dj(r)==="linear"?function(t){return{x1:Cr(t,"x1")||0,y1:Cr(t,"y1")||0,x2:Cr(t,"x2")||"100%",y2:Cr(t,"y2")||0}}(r):function(t){return{x1:Cr(t,"fx")||Cr(t,"cx")||"50%",y1:Cr(t,"fy")||Cr(t,"cy")||"50%",r1:0,x2:Cr(t,"cx")||"50%",y2:Cr(t,"cy")||"50%",r2:Cr(t,"r")||"50%"}}(r),I(I({},e),{},{gradientUnits:hj(r)}))}class xd{constructor(e){const{type:t="linear",gradientUnits:s="pixels",coords:n={},colorStops:a=[],offsetX:l=0,offsetY:d=0,gradientTransform:h,id:f}=e||{};Object.assign(this,{type:t,gradientUnits:s,coords:I(I({},t==="radial"?eL:lj),n),colorStops:a,offsetX:l,offsetY:d,gradientTransform:h,id:f?"".concat(f,"_").concat(wi()):wi()})}addColorStop(e){for(const t in e){const s=new ht(e[t]);this.colorStops.push({offset:parseFloat(t),color:s.toRgb(),opacity:s.getAlpha()})}return this}toObject(e){return I(I({},Vo(this,e)),{},{type:this.type,coords:I({},this.coords),colorStops:this.colorStops.map(t=>I({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[],n=this.gradientTransform?this.gradientTransform.concat():As.concat(),a=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",l=this.colorStops.map(x=>I({},x)).sort((x,v)=>x.offset-v.offset);let d=-this.offsetX,h=-this.offsetY;var f;a==="objectBoundingBox"?(d/=e.width,h/=e.height):(d+=e.width/2,h+=e.height/2),(f=e)&&typeof f._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(d-=e.pathOffset.x,h-=e.pathOffset.y),n[4]-=d,n[5]-=h;const g=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(a,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(Tc(n),'"'),""].join(" ");if(this.type==="linear"){const{x1:x,y1:v,x2:b,y2:w}=this.coords;s.push("<linearGradient ",g,' x1="',x,'" y1="',v,'" x2="',b,'" y2="',w,`">
`)}else if(this.type==="radial"){const{x1:x,y1:v,x2:b,y2:w,r1:_,r2:T}=this.coords,S=_>T;s.push("<radialGradient ",g,' cx="',S?x:b,'" cy="',S?v:w,'" r="',S?_:T,'" fx="',S?b:x,'" fy="',S?w:v,`">
`),S&&(l.reverse(),l.forEach(A=>{A.offset=1-A.offset}));const E=Math.min(_,T);if(E>0){const A=E/Math.max(_,T);l.forEach(O=>{O.offset+=A*(1-O.offset)})}}return l.forEach(x=>{let{color:v,offset:b,opacity:w}=x;s.push("<stop ",'offset="',100*b+"%",'" style="stop-color:',v,w!==void 0?";stop-opacity: "+w:";",`"/>
`)}),s.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),s.join("")}toLive(e){const{x1:t,y1:s,x2:n,y2:a,r1:l,r2:d}=this.coords,h=this.type==="linear"?e.createLinearGradient(t,s,n,a):e.createRadialGradient(t,s,l,n,a,d);return this.colorStops.forEach(f=>{let{color:g,opacity:x,offset:v}=f;h.addColorStop(v,x!==void 0?new ht(g).setAlpha(x).toRgba():g)}),h}static async fromObject(e){const{colorStops:t,gradientTransform:s}=e;return new this(I(I({},e),{},{colorStops:t?t.map(n=>I({},n)):void 0,gradientTransform:s?[...s]:void 0}))}static fromElement(e,t,s){const n=hj(e),a=t._findCenterFromElement();return new this(I({id:e.getAttribute("id")||void 0,type:dj(e),coords:aL(e,{width:s.viewBoxWidth||s.width,height:s.viewBoxHeight||s.height}),colorStops:iL(e,s.opacity),gradientUnits:n,gradientTransform:Ep(e.getAttribute("gradientTransform")||"")},n==="pixels"?{offsetX:t.width/2-a.x,offsetY:t.height/2-a.y}:{offsetX:0,offsetY:0}))}}U(xd,"type","Gradient"),De.setClass(xd,"gradient"),De.setClass(xd,"linear"),De.setClass(xd,"radial");const oL=["type","source","patternTransform"];class Lg{get type(){return"pattern"}set type(e){bi("warn","Setting type has no effect",e)}constructor(e){U(this,"repeat","repeat"),U(this,"offsetX",0),U(this,"offsetY",0),U(this,"crossOrigin",""),this.id=wi(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:s}=this;return I(I({},Vo(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:s,offsetX:yt(this.offsetX,nt.NUM_FRACTION_DIGITS),offsetY:yt(this.offsetY,nt.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:s}=e;const{source:n,repeat:a,id:l}=this,d=yo(this.offsetX/t,0),h=yo(this.offsetY/s,0),f=a==="repeat-y"||a==="no-repeat"?1+Math.abs(d||0):yo(n.width/t,0),g=a==="repeat-x"||a==="no-repeat"?1+Math.abs(h||0):yo(n.height/s,0);return['<pattern id="SVGID_'.concat(l,'" x="').concat(d,'" y="').concat(h,'" width="').concat(f,'" height="').concat(g,'">'),'<image x="0" y="0" width="'.concat(n.width,'" height="').concat(n.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:s,source:n,patternTransform:a}=e,l=jt(e,oL);const d=await Kd(n,I(I({},t),{},{crossOrigin:l.crossOrigin}));return new this(I(I({},l),{},{patternTransform:a&&a.slice(0),source:d}))}}U(Lg,"type","Pattern"),De.setClass(Lg),De.setClass(Lg,"pattern");const lL=["path","left","top"],cL=["d"];class Ki extends Ss{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:s,left:n,top:a}=t,l=jt(t,lL);super(),Object.assign(this,Ki.ownDefaults),this.setOptions(l),this._setPath(e||[],!0),typeof n=="number"&&this.set(lt,n),typeof a=="number"&&this.set(Fs,a)}_setPath(e,t){this.path=z7(Array.isArray(e)?e:q7(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new se(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,s=-this.pathOffset.y;e.beginPath();for(const n of this.path)switch(n[0]){case"L":e.lineTo(n[1]+t,n[2]+s);break;case"M":e.moveTo(n[1]+t,n[2]+s);break;case"C":e.bezierCurveTo(n[1]+t,n[2]+s,n[3]+t,n[4]+s,n[5]+t,n[6]+s);break;case"Q":e.quadraticCurveTo(n[1]+t,n[2]+s,n[3]+t,n[4]+s);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I(I({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=X7(this.path,nt.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=nt.NUM_FRACTION_DIGITS;return" translate(".concat(yt(-this.pathOffset.x,e),", ").concat(yt(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:s,pathOffset:n}=this._calcDimensions();this.set({width:t,height:s,pathOffset:n}),e&&this.setPositionByOrigin(n,Ke,Ke)}_calcBoundsFromPath(){const e=[];let t=0,s=0,n=0,a=0;for(const l of this.path)switch(l[0]){case"L":n=l[1],a=l[2],e.push({x:t,y:s},{x:n,y:a});break;case"M":n=l[1],a=l[2],t=n,s=a;break;case"C":e.push(...jw(n,a,l[1],l[2],l[3],l[4],l[5],l[6])),n=l[5],a=l[6];break;case"Q":e.push(...jw(n,a,l[1],l[2],l[1],l[2],l[3],l[4])),n=l[3],a=l[4];break;case"Z":n=t,a=s}return An(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return I(I({},e),{},{pathOffset:new se(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,s){const n=Vn(e,this.ATTRIBUTE_NAMES,s),{d:a}=n;return new this(a,I(I(I({},jt(n,cL)),t),{},{left:void 0,top:void 0}))}}U(Ki,"type","Path"),U(Ki,"cacheProperties",[...Un,"path","fillRule"]),U(Ki,"ATTRIBUTE_NAMES",[...Ci,"d"]),De.setClass(Ki),De.setSVGClass(Ki);const uL=["left","top","radius"],fj=["radius","startAngle","endAngle","counterClockwise"];class Sn extends Ss{static getDefaults(){return I(I({},super.getDefaults()),Sn.ownDefaults)}constructor(e){super(),Object.assign(this,Sn.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Ft(this.startAngle),Ft(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(Us)}getRadiusY(){return this.get("radius")*this.get(xr)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...fj,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,s=Ft(this.startAngle),n=Ft(this.endAngle),a=Ln(s)*t,l=Rn(s)*t,d=Ln(n)*t,h=Rn(n)*t,f=e>180?1:0,g=this.counterClockwise?0:1;return['<path d="M '.concat(a," ").concat(l," A ").concat(t," ").concat(t," 0 ").concat(f," ").concat(g," ").concat(d," ").concat(h,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,s){const n=Vn(e,this.ATTRIBUTE_NAMES,s),{left:a=0,top:l=0,radius:d=0}=n;return new this(I(I({},jt(n,uL)),{},{radius:d,left:a-d,top:l-d}))}static fromObject(e){return super._fromObject(e)}}U(Sn,"type","Circle"),U(Sn,"cacheProperties",[...Un,...fj]),U(Sn,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),U(Sn,"ATTRIBUTE_NAMES",["cx","cy","r",...Ci]),De.setClass(Sn),De.setSVGClass(Sn);const dL=["x1","y1","x2","y2"],hL=["x1","y1","x2","y2"],Lp=["x1","x2","y1","y2"];class Zi extends Ss{constructor(){let[e,t,s,n]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Zi.ownDefaults),this.setOptions(a),this.x1=e,this.x2=s,this.y1=t,this.y2=n,this._setWidthHeight();const{left:l,top:d}=a;typeof l=="number"&&this.set(lt,l),typeof d=="number"&&this.set(Fs,d)}_setWidthHeight(){const{x1:e,y1:t,x2:s,y2:n}=this;this.width=Math.abs(s-e),this.height=Math.abs(n-t);const{left:a,top:l,width:d,height:h}=An([{x:e,y:t},{x:s,y:n}]),f=new se(a+d/2,l+h/2);this.setPositionByOrigin(f,Ke,Ke)}_set(e,t){return super._set(e,t),Lp.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const s=e.strokeStyle;var n;gr(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(n=this.stroke)!==null&&n!==void 0?n:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=s}_findCenterFromElement(){return new se((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I(I({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:s,y2:n,width:a,height:l}=this,d=e<=t?-1:1,h=s<=n?-1:1;return{x1:d*a/2,x2:d*-a/2,y1:h*l/2,y2:h*-l/2}}_toSVG(){const{x1:e,x2:t,y1:s,y2:n}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(s,'" x2="').concat(t,'" y2="').concat(n,`" />
`)]}static async fromElement(e,t,s){const n=Vn(e,this.ATTRIBUTE_NAMES,s),{x1:a=0,y1:l=0,x2:d=0,y2:h=0}=n;return new this([a,l,d,h],jt(n,dL))}static fromObject(e){let{x1:t,y1:s,x2:n,y2:a}=e,l=jt(e,hL);return this._fromObject(I(I({},l),{},{points:[t,s,n,a]}),{extraParam:"points"})}}U(Zi,"type","Line"),U(Zi,"cacheProperties",[...Un,...Lp]),U(Zi,"ATTRIBUTE_NAMES",Ci.concat(Lp)),De.setClass(Zi),De.setSVGClass(Zi);class ta extends Ss{static getDefaults(){return I(I({},super.getDefaults()),ta.ownDefaults)}constructor(e){super(),Object.assign(this,ta.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,s=this.height/2;e.beginPath(),e.moveTo(-t,s),e.lineTo(0,-s),e.lineTo(t,s),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}U(ta,"type","Triangle"),U(ta,"ownDefaults",{width:100,height:100}),De.setClass(ta),De.setSVGClass(ta);const mj=["rx","ry"];class jn extends Ss{static getDefaults(){return I(I({},super.getDefaults()),jn.ownDefaults)}constructor(e){super(),Object.assign(this,jn.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(Us)}getRy(){return this.get("ry")*this.get(xr)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...mj,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,dh,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,s){const n=Vn(e,this.ATTRIBUTE_NAMES,s);return n.left=(n.left||0)-n.rx,n.top=(n.top||0)-n.ry,new this(n)}}function fL(r){if(!r)return[];const e=r.replace(/,/g," ").trim().split(/\s+/),t=[];for(let s=0;s<e.length;s+=2)t.push({x:parseFloat(e[s]),y:parseFloat(e[s+1])});return t}U(jn,"type","Ellipse"),U(jn,"cacheProperties",[...Un,...mj]),U(jn,"ownDefaults",{rx:0,ry:0}),U(jn,"ATTRIBUTE_NAMES",[...Ci,"cx","cy","rx","ry"]),De.setClass(jn),De.setSVGClass(jn);const mL=["left","top"],gj={exactBoundingBox:!1};class Nr extends Ss{static getDefaults(){return I(I({},super.getDefaults()),Nr.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),U(this,"strokeDiff",void 0),Object.assign(this,Nr.ownDefaults),this.setOptions(t),this.points=e;const{left:s,top:n}=t;this.initialized=!0,this.setBoundingBox(!0),typeof s=="number"&&this.set(lt,s),typeof n=="number"&&this.set(Fs,n)}isOpen(){return!0}_projectStrokeOnPoints(e){return s7(this.points,e,this.isOpen())}_calcDimensions(e){e=I({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(f=>f.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new se,strokeOffset:new se,strokeDiff:new se};const s=An(t),n=Mh(I(I({},e),{},{scaleX:1,scaleY:1})),a=An(this.points.map(f=>Rs(f,n,!0))),l=new se(this.scaleX,this.scaleY);let d=s.left+s.width/2,h=s.top+s.height/2;return this.exactBoundingBox&&(d-=h*Math.tan(Ft(this.skewX)),h-=d*Math.tan(Ft(this.skewY))),I(I({},s),{},{pathOffset:new se(d,h),strokeOffset:new se(a.left,a.top).subtract(new se(s.left,s.top)).multiply(l),strokeDiff:new se(s.width,s.height).subtract(new se(a.width,a.height)).multiply(l)})}_findCenterFromElement(){const e=An(this.points);return new se(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:s,width:n,height:a,pathOffset:l,strokeOffset:d,strokeDiff:h}=this._calcDimensions();this.set({width:n,height:a,pathOffset:l,strokeOffset:d,strokeDiff:h}),e&&this.setPositionByOrigin(new se(t+n/2,s+a/2),Ke,Ke)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new se(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let l;if(Object.keys(e).some(d=>this.strokeUniform||this.constructor.layoutProperties.includes(d))){var t,s;const{width:d,height:h}=this._calcDimensions(e);l=new se((t=e.width)!==null&&t!==void 0?t:d,(s=e.height)!==null&&s!==void 0?s:h)}else{var n,a;l=new se((n=e.width)!==null&&n!==void 0?n:this.width,(a=e.height)!==null&&a!==void 0?a:this.height)}return l.multiply(new se(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const s=this.initialized&&this[e]!==t,n=super._set(e,t);return this.exactBoundingBox&&s&&((e===Us||e===xr)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),n}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I(I({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:s,y:n}=t;return{x:s,y:n}})})}_toSVG(){const e=[],t=this.pathOffset.x,s=this.pathOffset.y,n=nt.NUM_FRACTION_DIGITS;for(let a=0,l=this.points.length;a<l;a++)e.push(yt(this.points[a].x-t,n),",",yt(this.points[a].y-s,n)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,s=this.pathOffset.x,n=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-s,this.points[0].y-n);for(let a=0;a<t;a++){const l=this.points[a];e.lineTo(l.x-s,l.y-n)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,s){return new this(fL(e.getAttribute("points")),I(I({},jt(Vn(e,this.ATTRIBUTE_NAMES,s),mL)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}U(Nr,"ownDefaults",gj),U(Nr,"type","Polyline"),U(Nr,"layoutProperties",[Bo,zo,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),U(Nr,"cacheProperties",[...Un,"points"]),U(Nr,"ATTRIBUTE_NAMES",[...Ci]),De.setClass(Nr),De.setSVGClass(Nr);class vd extends Nr{isOpen(){return!1}}U(vd,"ownDefaults",gj),U(vd,"type","Polygon"),De.setClass(vd),De.setSVGClass(vd);class pj extends Ss{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const s in t)for(const n in t[s])for(const a in t[s][n])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const s=t===void 0?this.styles:{0:this.styles[t]};for(const n in s)for(const a in s[n])if(s[n][a][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let s,n,a=0,l=!0,d=0;for(const h in t){s=0;for(const f in t[h]){const g=t[h][f]||{};a++,g[e]!==void 0?(n?g[e]!==n&&(l=!1):n=g[e],g[e]===this[e]&&delete g[e]):l=!1,Object.keys(g).length!==0?s++:delete t[h][f]}s===0&&delete t[h]}for(let h=0;h<this._textLines.length;h++)d+=this._textLines[h].length;l&&a===d&&(this[e]=n,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let s,n,a;for(n in t){for(a in s=t[n],s)delete s[a][e],Object.keys(s[a]).length===0&&delete s[a];Object.keys(s).length===0&&delete t[n]}}_extendStyles(e,t){const{lineIndex:s,charIndex:n}=this.get2DCursorLocation(e);this._getLineStyle(s)||this._setLineStyle(s);const a=V0(I(I({},this._getStyleDeclaration(s,n)),t),l=>l!==void 0);this._setStyleDeclaration(s,n,a)}getSelectionStyles(e,t,s){const n=[];for(let a=e;a<(t||e);a++)n.push(this.getStyleAtPosition(a,s));return n}getStyleAtPosition(e,t){const{lineIndex:s,charIndex:n}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(s,n):this._getStyleDeclaration(s,n)}setSelectionStyles(e,t,s){for(let n=t;n<(s||t);n++)this._extendStyles(n,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var s;const n=this.styles&&this.styles[e];return n&&(s=n[t])!==null&&s!==void 0?s:{}}getCompleteStyleDeclaration(e,t){return I(I({},Vo(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,s){this.styles[e][t]=s}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}U(pj,"_styleProperties",v9);const gL=/  +/g,pL=/"/g;function Rg(r,e,t,s,n){return"		".concat(function(a,l){let{left:d,top:h,width:f,height:g}=l,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:nt.NUM_FRACTION_DIGITS;const v=kc(Kt,a,!1),[b,w,_,T]=[d,h,f,g].map(S=>yt(S,x));return"<rect ".concat(v,' x="').concat(b,'" y="').concat(w,'" width="').concat(_,'" height="').concat(T,'"></rect>')}(r,{left:e,top:t,width:s,height:n}),`
`)}const xL=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Pg;class ws extends pj{static getDefaults(){return I(I({},super.getDefaults()),ws.ownDefaults)}constructor(e,t){super(),U(this,"__charBounds",[]),Object.assign(this,ws.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=oj(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Yr)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,s,n,a,l,d;for(let h=0,f=this._textLines.length;h<f;h++)if((this.textAlign===Yr||h!==f-1&&!this.isEndOfWrapping(h))&&(n=0,a=this._textLines[h],t=this.getLineWidth(h),t<this.width&&(d=this.textLines[h].match(this._reSpacesAndTabs)))){s=d.length,e=(this.width-t)/s;for(let g=0;g<=a.length;g++)l=this.__charBounds[h][g],this._reSpaceAndTab.test(a[g])?(l.width+=e,l.kernedWidth+=e,l.left+=n,n+=e):l.left+=n}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const s=t?this._unwrappedTextLines:this._textLines;let n;for(n=0;n<s.length;n++){if(e<=s[n].length)return{lineIndex:n,charIndex:e};e-=s[n].length+this.missingNewlineOffset(n,t)}return{lineIndex:n-1,charIndex:s[n-1].length<e?s[n-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===zs?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,s){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Ke:e.textBaseline="middle";break;case"ascender":e.textBaseline=Fs;break;case"descender":e.textBaseline=Sp}e.font=this._getFontDeclaration(t,s)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,s=this._textLines.length;t<s;t++){const n=this.getLineWidth(t);n>e&&(e=n)}return e}_renderTextLine(e,t,s,n,a,l){this._renderChars(e,t,s,n,a,l)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,s=this._getLeftOffset();let n=this._getTopOffset();for(let a=0,l=this._textLines.length;a<l;a++){const d=this.getHeightOfLine(a);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",a)){n+=d;continue}const h=this._textLines[a].length,f=this._getLineLeftOffset(a);let g,x,v=0,b=0,w=this.getValueOfPropertyAt(a,0,"textBackgroundColor");for(let _=0;_<h;_++){const T=this.__charBounds[a][_];x=this.getValueOfPropertyAt(a,_,"textBackgroundColor"),this.path?(e.save(),e.translate(T.renderLeft,T.renderTop),e.rotate(T.angle),e.fillStyle=x,x&&e.fillRect(-T.width/2,-d/this.lineHeight*(1-this._fontSizeFraction),T.width,d/this.lineHeight),e.restore()):x!==w?(g=s+f+b,this.direction==="rtl"&&(g=this.width-g-v),e.fillStyle=w,w&&e.fillRect(g,n,v,d/this.lineHeight),b=T.left,v=T.width,w=x):v+=T.kernedWidth}x&&!this.path&&(g=s+f+b,this.direction==="rtl"&&(g=this.width-g-v),e.fillStyle=x,e.fillRect(g,n,v,d/this.lineHeight)),n+=d}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,s,n){const a=dc.getFontCache(t),l=this._getFontDeclaration(t),d=s+e,h=s&&l===this._getFontDeclaration(n),f=t.fontSize/this.CACHE_FONT_SIZE;let g,x,v,b;if(s&&a[s]!==void 0&&(v=a[s]),a[e]!==void 0&&(b=g=a[e]),h&&a[d]!==void 0&&(x=a[d],b=x-v),g===void 0||v===void 0||x===void 0){const w=function(){return Pg||(Pg=vr({width:0,height:0}).getContext("2d")),Pg}();this._setTextStyles(w,t,!0),g===void 0&&(b=g=w.measureText(e).width,a[e]=g),v===void 0&&h&&s&&(v=w.measureText(s).width,a[s]=v),h&&x===void 0&&(x=w.measureText(d).width,a[d]=x,b=x-v)}return{width:g*f,kernedWidth:b*f}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,s,n=0;const a=this.pathSide===Pt,l=this.path,d=this._textLines[e],h=d.length,f=new Array(h);this.__charBounds[e]=f;for(let g=0;g<h;g++){const x=d[g];s=this._getGraphemeBox(x,e,g,t),f[g]=s,n+=s.kernedWidth,t=x}if(f[h]={left:s?s.left+s.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},l&&l.segmentsInfo){let g=0;const x=l.segmentsInfo[l.segmentsInfo.length-1].length;switch(this.textAlign){case lt:g=a?x-n:0;break;case Ke:g=(x-n)/2;break;case Pt:g=a?0:x-n}g+=this.pathStartOffset*(a?-1:1);for(let v=a?h-1:0;a?v>=0:v<h;a?v--:v++)s=f[v],g>x?g%=x:g<0&&(g+=x),this._setGraphemeOnPath(g,s),g+=s.kernedWidth}return{width:n,numOfSpaces:0}}_setGraphemeOnPath(e,t){const s=e+t.kernedWidth/2,n=this.path,a=$7(n.path,s,n.segmentsInfo);t.renderLeft=a.x-n.pathOffset.x,t.renderTop=a.y-n.pathOffset.y,t.angle=a.angle+(this.pathSide===Pt?Math.PI:0)}_getGraphemeBox(e,t,s,n,a){const l=this.getCompleteStyleDeclaration(t,s),d=n?this.getCompleteStyleDeclaration(t,s-1):{},h=this._measureChar(e,l,n,d);let f,g=h.kernedWidth,x=h.width;this.charSpacing!==0&&(f=this._getWidthOfCharSpacing(),x+=f,g+=f);const v={width:x,left:0,height:l.fontSize,kernedWidth:g,deltaY:l.deltaY};if(s>0&&!a){const b=this.__charBounds[t][s-1];v.left=b.left+b.width+h.kernedWidth-h.width}return v}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let s=1,n=this._textLines[e].length;s<n;s++)t=Math.max(this.getHeightOfChar(e,s),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let s=0,n=this._textLines.length;s<n;s++)e=this.getHeightOfLine(s),t+=s===n-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let s=0;const n=this._getLeftOffset(),a=this._getTopOffset();for(let l=0,d=this._textLines.length;l<d;l++){const h=this.getHeightOfLine(l),f=h/this.lineHeight,g=this._getLineLeftOffset(l);this._renderTextLine(t,e,this._textLines[l],n+g,a+s+f,l),s+=h}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(Kt))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,s,n,a,l){const d=this.getHeightOfLine(l),h=this.textAlign.includes(Yr),f=this.path,g=!h&&this.charSpacing===0&&this.isEmptyStyles(l)&&!f,x=this.direction==="ltr",v=this.direction==="ltr"?1:-1,b=t.direction;let w,_,T,S,E,A="",O=0;if(t.save(),b!==this.direction&&(t.canvas.setAttribute("dir",x?"ltr":"rtl"),t.direction=x?"ltr":"rtl",t.textAlign=x?lt:Pt),a-=d*this._fontSizeFraction/this.lineHeight,g)return this._renderChar(e,t,l,0,s.join(""),n,a),void t.restore();for(let D=0,F=s.length-1;D<=F;D++)S=D===F||this.charSpacing||f,A+=s[D],T=this.__charBounds[l][D],O===0?(n+=v*(T.kernedWidth-T.width),O+=T.width):O+=T.kernedWidth,h&&!S&&this._reSpaceAndTab.test(s[D])&&(S=!0),S||(w=w||this.getCompleteStyleDeclaration(l,D),_=this.getCompleteStyleDeclaration(l,D+1),S=X0(w,_,!1)),S&&(f?(t.save(),t.translate(T.renderLeft,T.renderTop),t.rotate(T.angle),this._renderChar(e,t,l,D,A,-O/2,0),t.restore()):(E=n,this._renderChar(e,t,l,D,A,E,a)),A="",w=_,n+=v*O,O=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,s=this.height+this.strokeWidth,n=vr({width:t,height:s}),a=n.getContext("2d");return n.width=t,n.height=s,a.beginPath(),a.moveTo(0,0),a.lineTo(t,0),a.lineTo(t,s),a.lineTo(0,s),a.closePath(),a.translate(t/2,s/2),a.fillStyle=e.toLive(a),this._applyPatternGradientTransform(a,e),a.fill(),a.createPattern(n,"no-repeat")}handleFiller(e,t,s){let n,a;return gr(s)?s.gradientUnits==="percentage"||s.gradientTransform||s.patternTransform?(n=-this.width/2,a=-this.height/2,e.translate(n,a),e[t]=this._applyPatternGradientTransformText(s),{offsetX:n,offsetY:a}):(e[t]=s.toLive(e),this._applyPatternGradientTransform(e,s)):(e[t]=s,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:s,strokeWidth:n}=t;return e.lineWidth=n,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",s)}_setFillStyles(e,t){let{fill:s}=t;return this.handleFiller(e,"fillStyle",s)}_renderChar(e,t,s,n,a,l,d){const h=this._getStyleDeclaration(s,n),f=this.getCompleteStyleDeclaration(s,n),g=e==="fillText"&&f.fill,x=e==="strokeText"&&f.stroke&&f.strokeWidth;if(x||g){if(t.save(),t.font=this._getFontDeclaration(f),h.textBackgroundColor&&this._removeShadow(t),h.deltaY&&(d+=h.deltaY),g){const v=this._setFillStyles(t,f);t.fillText(a,l-v.offsetX,d-v.offsetY)}if(x){const v=this._setStrokeStyles(t,f);t.strokeText(a,l-v.offsetX,d-v.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,s){const n=this.get2DCursorLocation(e,!0),a=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"fontSize"),l=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"deltaY"),d={fontSize:a*s.size,deltaY:l+a*s.baseline};this.setSelectionStyles(d,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),s=this.width-t,n=this.textAlign,a=this.direction,l=this.isEndOfWrapping(e);let d=0;return n===Yr||n===fc&&!l||n===hc&&!l||n===vh&&!l?0:(n===Ke&&(d=s/2),n===Pt&&(d=s),n===fc&&(d=s/2),n===hc&&(d=s),a==="rtl"&&(n===Pt||n===Yr||n===hc?d=0:n===lt||n===vh?d=-s:n!==Ke&&n!==fc||(d=-s/2)),d)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,s){var n;return(n=this._getStyleDeclaration(e,t)[s])!==null&&n!==void 0?n:this[s]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let s=this._getTopOffset();const n=this._getLeftOffset(),a=this.path,l=this._getWidthOfCharSpacing(),d=t==="linethrough"?.5:t==="overline"?1:0,h=this.offsets[t];for(let f=0,g=this._textLines.length;f<g;f++){const x=this.getHeightOfLine(f);if(!this[t]&&!this.styleHas(t,f)){s+=x;continue}const v=this._textLines[f],b=x/this.lineHeight,w=this._getLineLeftOffset(f);let _=0,T=0,S=this.getValueOfPropertyAt(f,0,t),E=this.getValueOfPropertyAt(f,0,Kt),A=this.getValueOfPropertyAt(f,0,la),O=S,D=E,F=A;const B=s+b*(1-this._fontSizeFraction);let P=this.getHeightOfChar(f,0),H=this.getValueOfPropertyAt(f,0,"deltaY");for(let G=0,ne=v.length;G<ne;G++){const Q=this.__charBounds[f][G];O=this.getValueOfPropertyAt(f,G,t),D=this.getValueOfPropertyAt(f,G,Kt),F=this.getValueOfPropertyAt(f,G,la);const ie=this.getHeightOfChar(f,G),L=this.getValueOfPropertyAt(f,G,"deltaY");if(a&&O&&D){const $=this.fontSize*F/1e3;e.save(),e.fillStyle=E,e.translate(Q.renderLeft,Q.renderTop),e.rotate(Q.angle),e.fillRect(-Q.kernedWidth/2,h*ie+L-d*$,Q.kernedWidth,$),e.restore()}else if((O!==S||D!==E||ie!==P||F!==A||L!==H)&&T>0){const $=this.fontSize*A/1e3;let K=n+w+_;this.direction==="rtl"&&(K=this.width-K-T),S&&E&&A&&(e.fillStyle=E,e.fillRect(K,B+h*P+H-d*$,T,$)),_=Q.left,T=Q.width,S=O,A=F,E=D,P=ie,H=L}else T+=Q.kernedWidth}let N=n+w+_;this.direction==="rtl"&&(N=this.width-N-T),e.fillStyle=D;const V=this.fontSize*F/1e3;O&&D&&F&&e.fillRect(N,B+h*P+H-d*V,T-l,V),s+=x}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:s=this.fontWeight,fontSize:n=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const l=e.includes("'")||e.includes('"')||e.includes(",")||ws.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,s,"".concat(a?this.CACHE_FONT_SIZE:n,"px"),l].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return q0(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),s=new Array(t.length),n=[`
`];let a=[];for(let l=0;l<t.length;l++)s[l]=this.graphemeSplit(t[l]),a=a.concat(s[l],n);return a.pop(),{_unwrappedLines:s,lines:t,graphemeText:a,graphemeLines:s}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I(I({},super.toObject([...H4,...e])),{},{styles:a7(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:s}=this.constructor;super.set(e,t);let n=!1,a=!1;if(typeof e=="object")for(const l in e)l==="path"&&this.setPathInfo(),n=n||s.includes(l),a=a||l==="path";else n=s.includes(e),a=e==="path";return a&&this.setPathInfo(),n&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,s){const n=Vn(e,ws.ATTRIBUTE_NAMES,s),a=I(I({},t),n),{textAnchor:l=lt,textDecoration:d="",dx:h=0,dy:f=0,top:g=0,left:x=0,fontSize:v=R0,strokeWidth:b=1}=a,w=jt(a,xL),_=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),I({left:x+h,top:g+f,underline:d.includes("underline"),overline:d.includes("overline"),linethrough:d.includes("line-through"),strokeWidth:0,fontSize:v},w)),T=_.getScaledHeight()/_.height,S=((_.height+_.strokeWidth)*_.lineHeight-_.height)*T,E=_.getScaledHeight()+S;let A=0;return l===Ke&&(A=_.getScaledWidth()/2),l===Pt&&(A=_.getScaledWidth()),_.set({left:_.left-A,top:_.top-(E-_.fontSize*(.07+_._fontSizeFraction))/_.lineHeight,strokeWidth:b}),_}static fromObject(e){return this._fromObject(I(I({},e),{},{styles:o7(e.styles||{},e.text)}),{extraParam:"text"})}}U(ws,"textLayoutProperties",I4),U(ws,"cacheProperties",[...Un,...H4]),U(ws,"ownDefaults",y9),U(ws,"type","Text"),U(ws,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),U(ws,"ATTRIBUTE_NAMES",Ci.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),Q4(ws,[class extends z4{_toSVG(){const r=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(r.textTop,r.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(r){const e=this._createBaseSVGMarkup(this._toSVG(),{reviver:r,noStyle:!0,withShadow:!0}),t=this.path;return t?e+t._createBaseSVGMarkup(t._toSVG(),{reviver:r,withShadow:!0,additionalTransform:Tc(this.calcOwnMatrix())}):e}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(r){let{textBgRects:e,textSpans:t}=r;const s=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(pL,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",s?'text-decoration="'.concat(s,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(r,e){const t=[],s=[];let n,a=r;this.backgroundColor&&s.push(...Rg(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let l=0,d=this._textLines.length;l<d;l++)n=this._getLineLeftOffset(l),this.direction==="rtl"&&(n+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",l))&&this._setSVGTextLineBg(s,l,e+n,a),this._setSVGTextLineText(t,l,e+n,a),a+=this.getHeightOfLine(l);return{textSpans:t,textBgRects:s}}_createTextCharSpan(r,e,t,s,n){const a=nt.NUM_FRACTION_DIGITS,l=this.getSvgSpanStyles(e,r!==r.trim()||!!r.match(gL)),d=l?'style="'.concat(l,'"'):"",h=e.deltaY,f=h?' dy="'.concat(yt(h,a),'" '):"",{angle:g,renderLeft:x,renderTop:v,width:b}=n;let w="";if(x!==void 0){const _=b/2;g&&(w=' rotate="'.concat(yt(Fn(g),a),'"'));const T=Uo({angle:Fn(g)});T[4]=x,T[5]=v;const S=new se(-_,0).transform(T);t=S.x,s=S.y}return'<tspan x="'.concat(yt(t,a),'" y="').concat(yt(s,a),'" ').concat(f).concat(w).concat(d,">").concat(r7(r),"</tspan>")}_setSVGTextLineText(r,e,t,s){const n=this.getHeightOfLine(e),a=this.textAlign.includes(Yr),l=this._textLines[e];let d,h,f,g,x,v="",b=0;s+=n*(1-this._fontSizeFraction)/this.lineHeight;for(let w=0,_=l.length-1;w<=_;w++)x=w===_||this.charSpacing||this.path,v+=l[w],f=this.__charBounds[e][w],b===0?(t+=f.kernedWidth-f.width,b+=f.width):b+=f.kernedWidth,a&&!x&&this._reSpaceAndTab.test(l[w])&&(x=!0),x||(d=d||this.getCompleteStyleDeclaration(e,w),h=this.getCompleteStyleDeclaration(e,w+1),x=X0(d,h,!0)),x&&(g=this._getStyleDeclaration(e,w),r.push(this._createTextCharSpan(v,g,t,s,f)),v="",d=h,this.direction==="rtl"?t-=b:t+=b,b=0)}_setSVGTextLineBg(r,e,t,s){const n=this._textLines[e],a=this.getHeightOfLine(e)/this.lineHeight;let l,d=0,h=0,f=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let g=0;g<n.length;g++){const{left:x,width:v,kernedWidth:b}=this.__charBounds[e][g];l=this.getValueOfPropertyAt(e,g,"textBackgroundColor"),l!==f?(f&&r.push(...Rg(f,t+h,s,d,a)),h=x,d=v,f=l):d+=b}l&&r.push(...Rg(f,t+h,s,d,a))}_getSVGLineTopOffset(r){let e,t=0;for(e=0;e<r;e++)t+=this.getHeightOfLine(e);const s=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*s/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(r){return"".concat(super.getSvgStyles(r)," text-decoration-thickness: ").concat(yt(this.textDecorationThickness*this.getObjectScaling().y/10,nt.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(r,e){const{fontFamily:t,strokeWidth:s,stroke:n,fill:a,fontSize:l,fontStyle:d,fontWeight:h,deltaY:f,textDecorationThickness:g,linethrough:x,overline:v,underline:b}=r,w=this.getSvgTextDecoration({underline:b??this.underline,overline:v??this.overline,linethrough:x??this.linethrough}),_=g||this.textDecorationThickness;return[n?kc(zs,n):"",s?"stroke-width: ".concat(s,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",l?"font-size: ".concat(l,"px; "):"",d?"font-style: ".concat(d,"; "):"",h?"font-weight: ".concat(h,"; "):"",w?"text-decoration: ".concat(w,"; text-decoration-thickness: ").concat(yt(_*this.getObjectScaling().y/10,nt.NUM_FRACTION_DIGITS),"%; "):"",a?kc(Kt,a):"",f?"baseline-shift: ".concat(-f,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(r){return["overline","underline","line-through"].filter(e=>r[e.replace("-","")]).join(" ")}}]),De.setClass(ws),De.setSVGClass(ws);class vL{constructor(e){U(this,"target",void 0),U(this,"__mouseDownInPlace",!1),U(this,"__dragStartFired",!1),U(this,"__isDraggingOver",!1),U(this,"__dragStartSelection",void 0),U(this,"__dragImageDisposer",void 0),U(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(s=>s()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,s=t.getSelectionStartFromPointer(e);return t.isEditing&&s>=t.selectionStart&&s<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var s;let{selectionStart:n,selectionEnd:a}=t;const l=this.target,d=l.canvas,h=new se(l.flipX?-1:1,l.flipY?-1:1),f=l._getCursorBoundaries(n),g=new se(f.left+f.leftOffset,f.top+f.topOffset).multiply(h).transform(l.calcTransformMatrix()),x=d.getScenePoint(e).subtract(g),v=l.getCanvasRetinaScaling(),b=l.getBoundingRect(),w=g.subtract(new se(b.left,b.top)),_=d.viewportTransform,T=w.add(x).transform(_,!0),S=l.backgroundColor,E=Y0(l.styles);l.backgroundColor="";const A={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};l.setSelectionStyles(A,0,n),l.setSelectionStyles(A,a,l.text.length),l.dirty=!0;const O=l.toCanvasElement({enableRetinaScaling:d.enableRetinaScaling,viewportTransform:!0});l.backgroundColor=S,l.styles=E,l.dirty=!0,Op(O,{position:"fixed",left:"".concat(-O.width,"px"),border:Bs,width:"".concat(O.width/v,"px"),height:"".concat(O.height/v,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{O.remove()},Dr(e.target||this.target.hiddenTextarea).body.appendChild(O),(s=e.dataTransfer)===null||s===void 0||s.setDragImage(O,T.x,T.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,s=this.isActive();if(s&&e.dataTransfer){const n=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},a=t._text.slice(n.selectionStart,n.selectionEnd).join(""),l=I({text:t.text,value:a},n);e.dataTransfer.setData("text/plain",a),e.dataTransfer.setData("application/fabric",JSON.stringify({value:a,styles:t.getSelectionStyles(n.selectionStart,n.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,l)}return t.abortCursorAnimation(),s}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),s=this.__dragStartSelection;return t<s.selectionStart||t>s.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const s=this.targetCanDrop(t);!this.__isDraggingOver&&s&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,s=this.targetCanDrop(t);!this.__isDraggingOver&&s?this.__isDraggingOver=!0:this.__isDraggingOver&&!s&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:s}=e,n=s.defaultPrevented;this.__isDraggingOver=!1,s.preventDefault();let a=(t=s.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(a&&!n){const l=this.target,d=l.canvas;let h=l.getSelectionStartFromPointer(s);const{styles:f}=s.dataTransfer.types.includes("application/fabric")?JSON.parse(s.dataTransfer.getData("application/fabric")):{},g=a[Math.max(0,a.length-1)],x=0;if(this.__dragStartSelection){const v=this.__dragStartSelection.selectionStart,b=this.__dragStartSelection.selectionEnd;h>v&&h<=b?h=v:h>b&&(h-=b-v),l.removeChars(v,b),delete this.__dragStartSelection}l._reNewline.test(g)&&(l._reNewline.test(l._text[h])||h===l._text.length)&&(a=a.trimEnd()),e.didDrop=!0,e.dropTarget=l,l.insertChars(a,f,h),d.setActiveObject(l),l.enterEditing(s),l.selectionStart=Math.min(h+x,l._text.length),l.selectionEnd=Math.min(l.selectionStart+a.length,l._text.length),l.hiddenTextarea.value=l.text,l._updateTextarea(),l.hiddenTextarea.focus(),l.fire(hh,{index:h+x,action:"drop"}),d.fire("text:changed",{target:l}),d.contextTopDirty=!0,d.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var s;const n=this.target,a=this.target.canvas,{selectionStart:l,selectionEnd:d}=this.__dragStartSelection,h=((s=t.dataTransfer)===null||s===void 0?void 0:s.dropEffect)||Bs;h===Bs?(n.selectionStart=l,n.selectionEnd=d,n._updateTextarea(),n.hiddenTextarea.focus()):(n.clearContextTop(),h==="move"&&(n.removeChars(l,d),n.selectionStart=n.selectionEnd=l,n.hiddenTextarea&&(n.hiddenTextarea.value=n.text),n._updateTextarea(),n.fire(hh,{index:l,action:"dragend"}),a.fire("text:changed",{target:n}),a.requestRenderAll()),n.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const kw=/[ \n\.,;!\?\-]/;class yL extends ws{constructor(){super(...arguments),U(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:s,delay:n,onComplete:a}=e;return Y4({startValue:this._currentCursorOpacity,endValue:t,duration:s,delay:n,onComplete:a,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:l=>{this._currentCursorOpacity=l,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,s=e-1;if(this._reSpace.test(this._text[s]))for(;this._reSpace.test(this._text[s]);)t++,s--;for(;/\S/.test(this._text[s])&&s>-1;)t++,s--;return e-t}findWordBoundaryRight(e){let t=0,s=e;if(this._reSpace.test(this._text[s]))for(;this._reSpace.test(this._text[s]);)t++,s++;for(;/\S/.test(this._text[s])&&s<this._text.length;)t++,s++;return e+t}findLineBoundaryLeft(e){let t=0,s=e-1;for(;!/\n/.test(this._text[s])&&s>-1;)t++,s--;return e-t}findLineBoundaryRight(e){let t=0,s=e;for(;!/\n/.test(this._text[s])&&s<this._text.length;)t++,s++;return e+t}searchWordBoundary(e,t){const s=this._text;let n=e>0&&this._reSpace.test(s[e])&&(t===-1||!P0.test(s[e-1]))?e-1:e,a=s[n];for(;n>0&&n<s.length&&!kw.test(a);)n+=t,a=s[n];return t===-1&&kw.test(a)&&n++,n}selectWord(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const s=this.searchWordBoundary(e,-1),n=Math.max(s,this.searchWordBoundary(e,1));this.selectionStart=s,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const s=this.findLineBoundaryLeft(e),n=this.findLineBoundaryRight(e);this.selectionStart=s,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;Dr(t).activeElement!==t&&t.focus();const s=this.getSelectionStartFromPointer(e),n=this.selectionStart,a=this.selectionEnd;(s===this.__selectionStartOnMouseDown&&n!==a||n!==s&&a!==s)&&(s>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=s):(this.selectionStart=s,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===a||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,s){const n=s.slice(0,e),a=this.graphemeSplit(n).length;if(e===t)return{selectionStart:a,selectionEnd:a};const l=s.slice(e,t);return{selectionStart:a,selectionEnd:a+this.graphemeSplit(l).length}}fromGraphemeToStringSelection(e,t,s){const n=s.slice(0,e).join("").length;return e===t?{selectionStart:n,selectionEnd:n}:{selectionStart:n,selectionEnd:n+s.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),s=this.get2DCursorLocation(e),n=s.lineIndex,a=s.charIndex,l=this.getValueOfPropertyAt(n,a,"fontSize")*this.lineHeight,d=t.leftOffset,h=this.getCanvasRetinaScaling(),f=this.canvas.upperCanvasEl,g=f.width/h,x=f.height/h,v=g-l,b=x-l,w=new se(t.left+d,t.top+t.topOffset+l).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new se(f.clientWidth/g,f.clientHeight/x));return w.x<0&&(w.x=0),w.x>v&&(w.x=v),w.y<0&&(w.y=0),w.y>b&&(w.y=b),w.x+=this.canvas._offset.left,w.y+=this.canvas._offset.top,{left:"".concat(w.x,"px"),top:"".concat(w.y,"px"),fontSize:"".concat(l,"px"),charHeight:l}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(fh),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:s,charIndex:n}=this.get2DCursorLocation(e,!0),{lineIndex:a,charIndex:l}=this.get2DCursorLocation(t,!0);if(s!==a){if(this.styles[s])for(let d=n;d<this._unwrappedTextLines[s].length;d++)delete this.styles[s][d];if(this.styles[a])for(let d=l;d<this._unwrappedTextLines[a].length;d++){const h=this.styles[a][d];h&&(this.styles[s]||(this.styles[s]={}),this.styles[s][n+d-l]=h)}for(let d=s+1;d<=a;d++)delete this.styles[d];this.shiftLineStyles(a,s-a)}else if(this.styles[s]){const d=this.styles[s],h=l-n;for(let f=n;f<l;f++)delete d[f];for(const f in this.styles[s]){const g=parseInt(f,10);g>=l&&(d[g-h]=d[f],delete d[f])}}}shiftLineStyles(e,t){const s=Object.assign({},this.styles);for(const n in this.styles){const a=parseInt(n,10);a>e&&(this.styles[a+t]=s[a],s[a-t]||delete this.styles[a])}}insertNewlineStyleObject(e,t,s,n){const a={},l=this._unwrappedTextLines[e].length,d=l===t;let h=!1;s||(s=1),this.shiftLineStyles(e,s);const f=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const x in this.styles[e]){const v=parseInt(x,10);v>=t&&(h=!0,a[v-t]=this.styles[e][x],d&&t===0||delete this.styles[e][x])}let g=!1;for(h&&!d&&(this.styles[e+s]=a,g=!0),(g||l>t)&&s--;s>0;)n&&n[s-1]?this.styles[e+s]={0:I({},n[s-1])}:f?this.styles[e+s]={0:I({},f)}:delete this.styles[e+s],s--;this._forceClearCache=!0}insertCharStyleObject(e,t,s,n){this.styles||(this.styles={});const a=this.styles[e],l=a?I({},a):{};s||(s=1);for(const h in l){const f=parseInt(h,10);f>=t&&(a[f+s]=l[f],l[f-s]||delete a[f])}if(this._forceClearCache=!0,n){for(;s--;)Object.keys(n[s]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+s]=I({},n[s]));return}if(!a)return;const d=a[t?t-1:1];for(;d&&s--;)this.styles[e][t+s]=I({},d)}insertNewStyleBlock(e,t,s){const n=this.get2DCursorLocation(t,!0),a=[0];let l,d=0;for(let h=0;h<e.length;h++)e[h]===`
`?(d++,a[d]=0):a[d]++;for(a[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,a[0],s),s=s&&s.slice(a[0]+1)),d&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+a[0],d),l=1;l<d;l++)a[l]>0?this.insertCharStyleObject(n.lineIndex+l,0,a[l],s):s&&this.styles[n.lineIndex+l]&&s[0]&&(this.styles[n.lineIndex+l][0]=s[0]),s=s&&s.slice(a[l]+1);a[l]>0&&this.insertCharStyleObject(n.lineIndex+l,0,a[l],s)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:s;n>s&&this.removeStyleFromTo(s,n);const a=this.graphemeSplit(e);this.insertNewStyleBlock(a,s,t),this._text=[...this._text.slice(0,s),...a,...this._text.slice(n)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,s){s<=e?(t===e?this._selectionDirection=lt:this._selectionDirection===Pt&&(this._selectionDirection=lt,this.selectionEnd=e),this.selectionStart=s):s>e&&s<t?this._selectionDirection===Pt?this.selectionEnd=s:this.selectionStart=s:(t===e?this._selectionDirection=Pt:this._selectionDirection===lt&&(this._selectionDirection=Pt,this.selectionStart=t),this.selectionEnd=s)}}class bL extends yL{initHiddenTextarea(){const e=this.canvas&&Dr(this.canvas.getElement())||Fo(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(l=>{let[d,h]=l;return t.setAttribute(d,h)});const{top:s,left:n,fontSize:a}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(s,"; left: ").concat(n,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(a,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(l=>{let[d,h]=l;return t.addEventListener(d,this[h].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste,{value:s,selectionStart:n,selectionEnd:a}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const l=()=>{this.updateFromTextArea(),this.fire(hh),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void l();const d=this._splitTextIntoLines(s).graphemeText,h=this._text.length,f=d.length,g=this.selectionStart,x=this.selectionEnd,v=g!==x;let b,w,_,T,S=f-h;const E=this.fromStringToGraphemeSelection(n,a,s),A=g>E.selectionStart;v?(w=this._text.slice(g,x),S+=x-g):f<h&&(w=A?this._text.slice(x+S,x):this._text.slice(g,g-S));const O=d.slice(E.selectionEnd-S,E.selectionEnd);if(w&&w.length&&(O.length&&(b=this.getSelectionStyles(g,g+1,!1),b=O.map(()=>b[0])),v?(_=g,T=x):A?(_=x-w.length,T=x):(_=x,T=x+w.length),this.removeStyleFromTo(_,T)),O.length){const{copyPasteData:D}=Jr();t&&O.join("")===D.copiedText&&!nt.disableStyleCopyPaste&&(b=D.copiedTextStyle),this.insertNewStyleBlock(O,g,b)}l()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:s,selectionEnd:n}=t;this.compositionStart=s,this.compositionEnd=n,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Jr();e.copiedText=this.getSelectedText(),nt.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let s,n=this._getLineLeftOffset(e);return t>0&&(s=this.__charBounds[e][t-1],n+=s.left+s.width),n}getDownCursorOffset(e,t){const s=this._getSelectionForOffset(e,t),n=this.get2DCursorLocation(s),a=n.lineIndex;if(a===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-s;const l=n.charIndex,d=this._getWidthBeforeCursor(a,l),h=this._getIndexOnLine(a+1,d);return this._textLines[a].slice(l).length+h+1+this.missingNewlineOffset(a)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const s=this._getSelectionForOffset(e,t),n=this.get2DCursorLocation(s),a=n.lineIndex;if(a===0||e.metaKey||e.keyCode===33)return-s;const l=n.charIndex,d=this._getWidthBeforeCursor(a,l),h=this._getIndexOnLine(a-1,d),f=this._textLines[a].slice(0,l),g=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+h-f.length+(1-g)}_getIndexOnLine(e,t){const s=this._textLines[e];let n,a,l=this._getLineLeftOffset(e),d=0;for(let h=0,f=s.length;h<f;h++)if(n=this.__charBounds[e][h].width,l+=n,l>t){a=!0;const g=l-n,x=l,v=Math.abs(g-t);d=Math.abs(x-t)<v?h:h-1;break}return a||(d=s.length-1),d}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const s=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===Pt);if(t.shiftKey?this.moveCursorWithShift(s):this.moveCursorWithoutShift(s),s!==0){const n=this.text.length;this.selectionStart=Ao(0,this.selectionStart,n),this.selectionEnd=Ao(0,this.selectionEnd,n),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===lt?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,s){let n;if(e.altKey)n=this["findWordBoundary".concat(s)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=s==="Left"?-1:1,!0;n=this["findLineBoundary".concat(s)](this[t])}return n!==void 0&&this[t]!==n&&(this[t]=n,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=lt,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Pt&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=lt,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const s="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[s](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===lt&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Pt,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Pt,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const Aw=r=>!!r.button;class wL extends bL{constructor(){super(...arguments),U(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new vL(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:s}=e;this.canvas&&this.editable&&!Aw(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),s&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=s||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:s}=e;const n=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const a=this.canvas._activeObject;if(a&&a!==this)return}!this.editable||this.group&&!this.group.interactive||s&&s.actionPerformed||Aw(t)||n||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),s=this.selectionStart,n=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(s,n,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(Or(this.calcTransformMatrix())).add(new se(-this._getLeftOffset(),-this._getTopOffset()));let s=0,n=0,a=0;for(let f=0;f<this._textLines.length&&s<=t.y;f++)s+=this.getHeightOfLine(f),a=f,f>0&&(n+=this._textLines[f-1].length+this.missingNewlineOffset(f-1));let l=Math.abs(this._getLineLeftOffset(a));const d=this._textLines[a].length,h=this.__charBounds[a];for(let f=0;f<d;f++){const g=l+h[f].kernedWidth;if(t.x<=g){Math.abs(t.x-g)<=Math.abs(t.x-l)&&n++;break}l=g,n++}return Math.min(this.flipX?d-n:n,this._text.length)}}const yd="moveCursorUp",bd="moveCursorDown",wd="moveCursorLeft",_d="moveCursorRight",Sd="exitEditing",Ew=(r,e)=>{const t=e.getRetinaScaling();r.setTransform(t,0,0,t,0,0);const s=e.viewportTransform;r.transform(s[0],s[1],s[2],s[3],s[4],s[5])},_L=I({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Sd,27:Sd,33:yd,34:bd,35:_d,36:wd,37:wd,38:yd,39:_d,40:bd},keysMapRtl:{9:Sd,27:Sd,33:yd,34:bd,35:wd,36:_d,37:_d,38:yd,39:wd,40:bd},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Tn extends wL{static getDefaults(){return I(I({},super.getDefaults()),Tn.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,I(I({},Tn.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof Mp&&this.canvas.textEditingManager.remove(this),t instanceof Mp&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,s=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,s)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,s)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const s=super.toCanvasElement(e);return this.isEditing=t,s}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries(),s=this.findAncestorsWithClipPath(),n=s.length>0;let a,l=e;if(n){a=vr(e.canvas),l=a.getContext("2d"),Ew(l,this.canvas);const d=this.calcTransformMatrix();l.transform(d[0],d[1],d[2],d[3],d[4],d[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(l,t):this.renderCursor(l,t),n)for(const d of s){const h=d.clipPath,f=vr(e.canvas),g=f.getContext("2d");if(Ew(g,this.canvas),!h.absolutePositioned){const x=d.calcTransformMatrix();g.transform(x[0],x[1],x[2],x[3],x[4],x[5])}h.transform(g),h.drawObject(g,!0,{}),this.drawClipPathOnCache(l,h,f)}n&&(e.setTransform(1,0,0,1,0,0),e.drawImage(a,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const s=this._getLeftOffset(),n=this._getTopOffset(),a=this._getCursorBoundariesOffsets(e,t);return{left:s,top:n,leftOffset:a.left,topOffset:a.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,s=0;const{charIndex:n,lineIndex:a}=this.get2DCursorLocation(e);for(let f=0;f<a;f++)t+=this.getHeightOfLine(f);const l=this._getLineLeftOffset(a),d=this.__charBounds[a][n];d&&(s=d.left),this.charSpacing!==0&&n===this._textLines[a].length&&(s-=this._getWidthOfCharSpacing());const h={top:t,left:l+(s>0?s:0)};return this.direction==="rtl"&&(this.textAlign===Pt||this.textAlign===Yr||this.textAlign===hc?h.left*=-1:this.textAlign===lt||this.textAlign===vh?h.left=l-(s>0?s:0):this.textAlign!==Ke&&this.textAlign!==fc||(h.left=l-(s>0?s:0))),h}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const s=this.get2DCursorLocation(e),n=s.lineIndex,a=s.charIndex>0?s.charIndex-1:0,l=this.getValueOfPropertyAt(n,a,"fontSize"),d=this.getObjectScaling().x*this.canvas.getZoom(),h=this.cursorWidth/d,f=this.getValueOfPropertyAt(n,a,"deltaY"),g=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-l*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(n,a,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-h/2,top:g+t.top+f,width:h,height:l}}_renderCursor(e,t,s){const{color:n,opacity:a,left:l,top:d,width:h,height:f}=this.getCursorRenderingData(s,t);e.fillStyle=n,e.globalAlpha=a,e.fillRect(l,d,h,f)}renderSelection(e,t){const s={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,s,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,s){const n=t.selectionStart,a=t.selectionEnd,l=this.textAlign.includes(Yr),d=this.get2DCursorLocation(n),h=this.get2DCursorLocation(a),f=d.lineIndex,g=h.lineIndex,x=d.charIndex<0?0:d.charIndex,v=h.charIndex<0?0:h.charIndex;for(let b=f;b<=g;b++){const w=this._getLineLeftOffset(b)||0;let _=this.getHeightOfLine(b),T=0,S=0,E=0;if(b===f&&(S=this.__charBounds[f][x].left),b>=f&&b<g)E=l&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===g)if(v===0)E=this.__charBounds[g][v].left;else{const B=this._getWidthOfCharSpacing();E=this.__charBounds[g][v-1].left+this.__charBounds[g][v-1].width-B}T=_,(this.lineHeight<1||b===g&&this.lineHeight>1)&&(_/=this.lineHeight);let A=s.left+w+S,O=_,D=0;const F=E-S;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",O=1,D=_):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Pt||this.textAlign===Yr||this.textAlign===hc?A=this.width-A-F:this.textAlign===lt||this.textAlign===vh?A=s.left+w-E:this.textAlign!==Ke&&this.textAlign!==fc||(A=s.left+w-E)),e.fillRect(A,s.top+s.topOffset+D,F,O),s.topOffset+=T}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,Kt)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}U(Tn,"ownDefaults",_L),U(Tn,"type","IText"),De.setClass(Tn),De.setClass(Tn,"i-text");class sa extends Tn{static getDefaults(){return I(I({},super.getDefaults()),sa.ownDefaults)}constructor(e,t){super(e,I(I({},sa.ownDefaults),t))}static createControls(){return{controls:J9()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Yr)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,s=0,n=0;const a={};for(let l=0;l<e.graphemeLines.length;l++)e.graphemeText[n]===`
`&&l>0?(s=0,n++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[n])&&l>0&&(s++,n++),a[l]={line:t,offset:s},n+=e.graphemeLines[l].length,s+=e.graphemeLines[l].length;return a}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const s=this._styleMap[t];s&&(t=s.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,s=0,n=e+1,a=!1;const l=this._styleMap[e],d=this._styleMap[e+1];l&&(e=l.line,s=l.offset),d&&(n=d.line,a=n===e,t=d.offset);const h=e===void 0?this.styles:{line:this.styles[e]};for(const f in h)for(const g in h[f]){const x=parseInt(g,10);if(x>=s&&(!a||x<t))for(const v in h[f][g])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const s=this._styleMap[e];if(!s)return{};e=s.line,t=s.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,s){const n=this._styleMap[e];super._setStyleDeclaration(n.line,n.offset+t,s)}_deleteStyleDeclaration(e,t){const s=this._styleMap[e];super._deleteStyleDeclaration(s.line,s.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const s=this.getGraphemeDataForRender(e),n=[];for(let a=0;a<s.wordsData.length;a++)n.push(...this._wrapLine(a,t,s));return this.isWrapping=!1,n}getGraphemeDataForRender(e){const t=this.splitByGrapheme,s=t?"":" ";let n=0;return{wordsData:e.map((a,l)=>{let d=0;const h=t?this.graphemeSplit(a):this.wordSplit(a);return h.length===0?[{word:[],width:0}]:h.map(f=>{const g=t?[f]:this.graphemeSplit(f),x=this._measureWord(g,l,d);return n=Math.max(x,n),d+=g.length+s.length,{word:g,width:x}})}),largestWordWidth:n}}_measureWord(e,t){let s,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=0;for(let l=0,d=e.length;l<d;l++)a+=this._getGraphemeBox(e[l],t,l+n,s,!0).kernedWidth,s=e[l];return a}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,s){let{largestWordWidth:n,wordsData:a}=s,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const d=this._getWidthOfCharSpacing(),h=this.splitByGrapheme,f=[],g=h?"":" ";let x=0,v=[],b=0,w=0,_=!0;t-=l;const T=Math.max(t,n,this.dynamicMinWidth),S=a[e];let E;for(b=0,E=0;E<S.length;E++){const{word:A,width:O}=S[E];b+=A.length,x+=w+O-d,x>T&&!_?(f.push(v),v=[],x=O,_=!0):x+=d,_||h||v.push(g),v=v.concat(A),w=h?0:this._measureWord([g],e,b),b++,_=!1}return E&&f.push(v),n+l>this.dynamicMinWidth&&(this.dynamicMinWidth=n-d+l),f}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),s=this._wrapText(t.lines,this.width),n=new Array(s.length);for(let a=0;a<s.length;a++)n[a]=s[a].join("");return t.lines=n,t.graphemeLines=s,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const s=parseInt(t,10);if(this._textLines[s]){const n=this._styleMap[t].line;e.set("".concat(n),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}U(sa,"type","Textbox"),U(sa,"textLayoutProperties",[...Tn.textLayoutProperties,"width"]),U(sa,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),De.setClass(sa);class Nw extends Bh{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:s}=e,{clipPath:n,group:a}=s;if(!n||!this.shouldPerformLayout(e))return;const{width:l,height:d}=An(tj(s,n)),h=new se(l,d);if(n.absolutePositioned)return{center:_o(n.getRelativeCenterPoint(),void 0,a?a.calcTransformMatrix():void 0),size:h};{const f=n.getRelativeCenterPoint().transform(s.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:g=new se,correction:x=new se}=this.calcBoundingBox(t,e)||{};return{center:g.add(f),correction:x.subtract(f),size:h}}return{center:s.getRelativeCenterPoint().add(f),size:h}}}}U(Nw,"type","clip-path"),De.setClass(Nw);class Dw extends Bh{getInitialSize(e,t){let{target:s}=e,{size:n}=t;return new se(s.width||n.x,s.height||n.y)}}U(Dw,"type","fixed"),De.setClass(Dw);class SL extends Ec{subscribeTargets(e){const t=e.target;e.targets.reduce((s,n)=>(n.parent&&s.add(n.parent),s),new Set).forEach(s=>{s.layoutManager.subscribeTargets({target:s,targets:[t]})})}unsubscribeTargets(e){const t=e.target,s=t.getObjects();e.targets.reduce((n,a)=>(a.parent&&n.add(a.parent),n),new Set).forEach(n=>{!s.some(a=>a.parent===n)&&n.layoutManager.unsubscribeTargets({target:n,targets:[t]})})}}class ra extends aa{static getDefaults(){return I(I({},super.getDefaults()),ra.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,ra.ownDefaults),this.setOptions(t);const{left:s,top:n,layoutManager:a}=t;this.groupInit(e,{left:s,top:n,layoutManager:a??new SL})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(n=>{const a=this._objects.findIndex(d=>d.isInFrontOf(n)),l=a===-1?this.size():a;this.insertAt(l,n)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(bi("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const s=new Set;t.forEach(n=>{const{parent:a}=n;a&&s.add(a)}),e===Z0?s.forEach(n=>{n._onAfterObjectsChange(yh,t)}):s.forEach(n=>{n._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,s){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const n=I(I({hasControls:!1},s),{},{forActiveSelection:!0});for(let a=0;a<this._objects.length;a++)this._objects[a]._renderControls(e,n);super._renderControls(e,t),e.restore()}}U(ra,"type","ActiveSelection"),U(ra,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),De.setClass(ra),De.setClass(ra,"activeSelection");class jL{constructor(){U(this,"resources",{})}applyFilters(e,t,s,n,a){const l=a.getContext("2d");if(!l)return;l.drawImage(t,0,0,s,n);const d={sourceWidth:s,sourceHeight:n,imageData:l.getImageData(0,0,s,n),originalEl:t,originalImageData:l.getImageData(0,0,s,n),canvasEl:a,ctx:l,filterBackend:this};e.forEach(f=>{f.applyTo(d)});const{imageData:h}=d;return h.width===s&&h.height===n||(a.width=h.width,a.height=h.height),l.putImageData(h,0,0),d}}class xj{constructor(){let{tileSize:e=nt.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};U(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),U(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const s=vr({width:e,height:t}),n=s.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});n&&(n.clearColor(0,0,0,0),this.canvas=s,this.gl=n)}applyFilters(e,t,s,n,a,l){const d=this.gl,h=a.getContext("2d");if(!d||!h)return;let f;l&&(f=this.getCachedTexture(l,t));const g={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:s,sourceHeight:n,destinationWidth:s,destinationHeight:n,context:d,sourceTexture:this.createTexture(d,s,n,f?void 0:t),targetTexture:this.createTexture(d,s,n),originalTexture:f||this.createTexture(d,s,n,f?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:a},x=d.createFramebuffer();return d.bindFramebuffer(d.FRAMEBUFFER,x),e.forEach(v=>{v&&v.applyTo(g)}),function(v){const b=v.targetCanvas,w=b.width,_=b.height,T=v.destinationWidth,S=v.destinationHeight;w===T&&_===S||(b.width=T,b.height=S)}(g),this.copyGLTo2D(d,g),d.bindTexture(d.TEXTURE_2D,null),d.deleteTexture(g.sourceTexture),d.deleteTexture(g.targetTexture),d.deleteFramebuffer(x),h.setTransform(1,0,0,1,0,0),g}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,s,n,a){const{NEAREST:l,TEXTURE_2D:d,RGBA:h,UNSIGNED_BYTE:f,CLAMP_TO_EDGE:g,TEXTURE_MAG_FILTER:x,TEXTURE_MIN_FILTER:v,TEXTURE_WRAP_S:b,TEXTURE_WRAP_T:w}=e,_=e.createTexture();return e.bindTexture(d,_),e.texParameteri(d,x,a||l),e.texParameteri(d,v,a||l),e.texParameteri(d,b,g),e.texParameteri(d,w,g),n?e.texImage2D(d,0,h,h,f,n):e.texImage2D(d,0,h,t,s,0,h,f,null),_}getCachedTexture(e,t,s){const{textureCache:n}=this;if(n[e])return n[e];{const a=this.createTexture(this.gl,t.width,t.height,t,s);return a&&(n[e]=a),a}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const s=e.canvas,n=t.targetCanvas,a=n.getContext("2d");if(!a)return;a.translate(0,n.height),a.scale(1,-1);const l=s.height-n.height;a.drawImage(s,0,l,n.width,n.height,0,0,n.width,n.height)}copyGLTo2DPutImageData(e,t){const s=t.targetCanvas.getContext("2d"),n=t.destinationWidth,a=t.destinationHeight,l=n*a*4;if(!s)return;const d=new Uint8Array(this.imageBuffer,0,l),h=new Uint8ClampedArray(this.imageBuffer,0,l);e.readPixels(0,0,n,a,e.RGBA,e.UNSIGNED_BYTE,d);const f=new ImageData(h,n,a);s.putImageData(f,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const s=e.getExtension("WEBGL_debug_renderer_info");if(s){const n=e.getParameter(s.UNMASKED_RENDERER_WEBGL),a=e.getParameter(s.UNMASKED_VENDOR_WEBGL);n&&(t.renderer=n.toLowerCase()),a&&(t.vendor=a.toLowerCase())}return this.gpuInfo=t,t}}let Fg;function CL(){const{WebGLProbe:r}=Jr();return r.queryWebGL(Pn()),nt.enableGLFiltering&&r.isSupported(nt.textureSize)?new xj({tileSize:nt.textureSize}):new jL}function Bg(){return!Fg&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Fg=CL()),Fg}const TL=["filters","resizeFilter","src","crossOrigin","type"],vj=["cropX","cropY"];class os extends Ss{static getDefaults(){return I(I({},super.getDefaults()),os.ownDefaults)}constructor(e,t){super(),U(this,"_lastScaleX",1),U(this,"_lastScaleY",1),U(this,"_filterScalingX",1),U(this,"_filterScalingY",1),this.filters=[],Object.assign(this,os.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(wi()),this.setElement(typeof e=="string"?(this.canvas&&Dr(this.canvas.getElement())||Fo()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(s),(t=e.classList)===null||t===void 0||t.add(os.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Bg(!1);t instanceof xj&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Jr().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,s=this.height/2;e.beginPath(),e.moveTo(-t,-s),e.lineTo(t,-s),e.lineTo(t,s),e.lineTo(-t,s),e.lineTo(-t,-s),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(s=>{s&&t.push(s.toObject())}),I(I({},super.toObject([...vj,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,s=-this.width/2,n=-this.height/2;let a=[],l=[],d="",h="";if(!t)return[];if(this.hasCrop()){const f=wi();a.push('<clipPath id="imageCrop_'+f+`">
`,'	<rect x="'+s+'" y="'+n+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),d=' clip-path="url(#imageCrop_'+f+')" '}if(this.imageSmoothing||(h=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(s-this.cropX,'" y="').concat(n-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(h).concat(d,`></image>
`)),this.stroke||this.strokeDashArray){const f=this.fill;this.fill=null,l=['	<rect x="'.concat(s,'" y="').concat(n,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=f}return a=this.paintFirst!==Kt?a.concat(l,e):a.concat(e,l),a}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Kd(e,{crossOrigin:t,signal:s}).then(n=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(n)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,s=this.getTotalObjectScaling(),n=s.x,a=s.y,l=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||n>t&&a>t)return this._element=l,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=n,void(this._lastScaleY=a);const d=vr(l),{width:h,height:f}=l;this._element=d,this._lastScaleX=e.scaleX=n,this._lastScaleY=e.scaleY=a,Bg().applyFilters([e],l,h,f,this._element),this._filterScalingX=d.width/this._originalElement.width,this._filterScalingY=d.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(a=>a&&!a.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,s=t.naturalWidth||t.width,n=t.naturalHeight||t.height;if(this._element===this._originalElement){const a=vr({width:s,height:n});this._element=a,this._filteredEl=a}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,s,n),this._lastScaleX=1,this._lastScaleY=1);Bg().applyFilters(e,this._originalElement,s,n,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const s=this._filterScalingX,n=this._filterScalingY,a=this.width,l=this.height,d=Math.max(this.cropX,0),h=Math.max(this.cropY,0),f=t.naturalWidth||t.width,g=t.naturalHeight||t.height,x=d*s,v=h*n,b=Math.min(a*s,f-x),w=Math.min(l*n,g-v),_=-a/2,T=-l/2,S=Math.min(a,f/s-d),E=Math.min(l,g/n-h);t&&e.drawImage(t,x,v,b,w,_,T,S,E)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s=this.getOriginalSize();this.width=e||s.width,this.height=t||s.height}parsePreserveAspectRatioAttribute(){const e=x9(this.preserveAspectRatio||""),t=this.width,s=this.height,n={width:t,height:s};let a,l=this._element.width,d=this._element.height,h=1,f=1,g=0,x=0,v=0,b=0;return!e||e.alignX===Bs&&e.alignY===Bs?(h=t/l,f=s/d):(e.meetOrSlice==="meet"&&(h=f=M7(this._element,n),a=(t-l*h)/2,e.alignX==="Min"&&(g=-a),e.alignX==="Max"&&(g=a),a=(s-d*f)/2,e.alignY==="Min"&&(x=-a),e.alignY==="Max"&&(x=a)),e.meetOrSlice==="slice"&&(h=f=L7(this._element,n),a=l-t/h,e.alignX==="Mid"&&(v=a/2),e.alignX==="Max"&&(v=a),a=d-s/f,e.alignY==="Mid"&&(b=a/2),e.alignY==="Max"&&(b=a),l=t/h,d=s/f)),{width:l,height:d,scaleX:h,scaleY:f,offsetLeft:g,offsetTop:x,cropX:v,cropY:b}}static fromObject(e,t){let{filters:s,resizeFilter:n,src:a,crossOrigin:l,type:d}=e,h=jt(e,TL);return Promise.all([Kd(a,I(I({},t),{},{crossOrigin:l})),s&&Cc(s,t),n&&Cc([n],t),Lh(h,t)]).then(f=>{let[g,x=[],[v]=[],b={}]=f;return new this(g,I(I({},h),{},{src:a,filters:x,resizeFilter:v},b))})}static fromURL(e){let{crossOrigin:t=null,signal:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Kd(e,{crossOrigin:t,signal:s}).then(a=>new this(a,n))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;const n=Vn(e,this.ATTRIBUTE_NAMES,s);return this.fromURL(n["xlink:href"]||n.href,t,n).catch(a=>(bi("log","Unable to parse Image",a),null))}}U(os,"type","Image"),U(os,"cacheProperties",[...Un,...vj]),U(os,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),U(os,"CSS_CANVAS","canvas-img"),U(os,"ATTRIBUTE_NAMES",[...Ci,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),De.setClass(os),De.setSVGClass(os);Ph(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Uh=r=>r.webgl!==void 0,Q0="precision highp float",kL=`
    `.concat(Q0,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),AL=["type"],EL=["type"],NL=new RegExp(Q0,"g");class Zt{get type(){return this.constructor.type}constructor(){let e=jt(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},AL);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return kL}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:n="highp"}}=Jr();n!=="highp"&&(t=t.replace(NL,Q0.replace("highp",n)));const a=e.createShader(e.VERTEX_SHADER),l=e.createShader(e.FRAGMENT_SHADER),d=e.createProgram();if(!a||!l||!d)throw new Xr("Vertex, fragment shader or program creation error");if(e.shaderSource(a,s),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new Xr("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(a)));if(e.shaderSource(l,t),e.compileShader(l),!e.getShaderParameter(l,e.COMPILE_STATUS))throw new Xr("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(l)));if(e.attachShader(d,a),e.attachShader(d,l),e.linkProgram(d),!e.getProgramParameter(d,e.LINK_STATUS))throw new Xr('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(d)));const h=this.getUniformLocations(e,d)||{};return h.uStepW=e.getUniformLocation(d,"uStepW"),h.uStepH=e.getUniformLocation(d,"uStepH"),{program:d,attributeLocations:this.getAttributeLocations(e,d),uniformLocations:h}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const s=this.constructor.uniformLocations,n={};for(let a=0;a<s.length;a++)n[s[a]]=e.getUniformLocation(t,s[a]);return n}sendAttributeData(e,t,s){const n=t.aPosition,a=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const s=e.destinationWidth,n=e.destinationHeight;e.sourceWidth===s&&e.sourceHeight===n||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,s,n)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){Uh(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,s=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(s.program),this.sendAttributeData(t,s.attributeLocations,e.aPosition),t.uniform1f(s.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(s.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,s.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,s){e.activeTexture(s),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:s}=e,n=vr({width:t,height:s});e.helpLayer=n}}toObject(){const e=Object.keys(this.constructor.defaults||{});return I({type:this.type},e.reduce((t,s)=>(t[s]=this[s],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(jt(e,EL))}}U(Zt,"type","BaseFilter"),U(Zt,"uniformLocations",[]);const DL={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class jd extends Zt{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(DL[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const s=new ht(this.color).getSource(),n=this.alpha,a=s[0]*n,l=s[1]*n,d=s[2]*n,h=1-n;for(let f=0;f<t.length;f+=4){const g=t[f],x=t[f+1],v=t[f+2];let b,w,_;switch(this.mode){case"multiply":b=g*a/255,w=x*l/255,_=v*d/255;break;case"screen":b=255-(255-g)*(255-a)/255,w=255-(255-x)*(255-l)/255,_=255-(255-v)*(255-d)/255;break;case"add":b=g+a,w=x+l,_=v+d;break;case"difference":b=Math.abs(g-a),w=Math.abs(x-l),_=Math.abs(v-d);break;case"subtract":b=g-a,w=x-l,_=v-d;break;case"darken":b=Math.min(g,a),w=Math.min(x,l),_=Math.min(v,d);break;case"lighten":b=Math.max(g,a),w=Math.max(x,l),_=Math.max(v,d);break;case"overlay":b=a<128?2*g*a/255:255-2*(255-g)*(255-a)/255,w=l<128?2*x*l/255:255-2*(255-x)*(255-l)/255,_=d<128?2*v*d/255:255-2*(255-v)*(255-d)/255;break;case"exclusion":b=a+g-2*a*g/255,w=l+x-2*l*x/255,_=d+v-2*d*v/255;break;case"tint":b=a+g*h,w=l+x*h,_=d+v*h}t[f]=b,t[f+1]=w,t[f+2]=_}}sendUniformData(e,t){const s=new ht(this.color).getSource();s[0]=this.alpha*s[0]/255,s[1]=this.alpha*s[1]/255,s[2]=this.alpha*s[2]/255,s[3]=this.alpha,e.uniform4fv(t.uColor,s)}}U(jd,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),U(jd,"type","BlendColor"),U(jd,"uniformLocations",["uColor"]),De.setClass(jd);const OL={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},ML=["type","image"];class Cd extends Zt{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return OL[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,s=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,s,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:s}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/s,1]}applyTo2d(e){let{imageData:{data:t,width:s,height:n},filterBackend:{resources:a}}=e;const l=this.image;a.blendImage||(a.blendImage=Pn());const d=a.blendImage,h=d.getContext("2d");d.width!==s||d.height!==n?(d.width=s,d.height=n):h.clearRect(0,0,s,n),h.setTransform(l.scaleX,0,0,l.scaleY,l.left,l.top),h.drawImage(l.getElement(),0,0,s,n);const f=h.getImageData(0,0,s,n).data;for(let g=0;g<t.length;g+=4){const x=t[g],v=t[g+1],b=t[g+2],w=t[g+3],_=f[g],T=f[g+1],S=f[g+2],E=f[g+3];switch(this.mode){case"multiply":t[g]=x*_/255,t[g+1]=v*T/255,t[g+2]=b*S/255,t[g+3]=w*E/255;break;case"mask":t[g+3]=E}}}sendUniformData(e,t){const s=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,s)}toObject(){return I(I({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:s,image:n}=e,a=jt(e,ML);return os.fromObject(n,t).then(l=>new this(I(I({},a),{},{image:l})))}}U(Cd,"type","BlendImage"),U(Cd,"defaults",{mode:"multiply",alpha:1}),U(Cd,"uniformLocations",["uTransformMatrix","uImage"]),De.setClass(Cd);class Td extends Zt{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(e){Uh(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){let{imageData:{data:t,width:s,height:n}}=e;this.aspectRatio=s/n,this.horizontal=!0;let a=this.getBlurValue()*s;const l=new Uint8ClampedArray(t),d=15,h=4*s;for(let f=0;f<t.length;f+=4){let g=0,x=0,v=0,b=0,w=0;const _=f-f%h,T=_+h;for(let S=-14;S<d;S++){const E=S/d,A=4*Math.floor(a*E),O=1-Math.abs(E);let D=f+A;D<_?D=_:D>T&&(D=T);const F=t[D+3]*O;g+=t[D]*F,x+=t[D+1]*F,v+=t[D+2]*F,b+=F,w+=O}l[f]=g/b,l[f+1]=x/b,l[f+2]=v/b,l[f+3]=b/w}this.horizontal=!1,a=this.getBlurValue()*n;for(let f=0;f<l.length;f+=4){let g=0,x=0,v=0,b=0,w=0;const _=f%h,T=l.length-h+_;for(let S=-14;S<d;S++){const E=S/d,A=Math.floor(a*E)*h,O=1-Math.abs(E);let D=f+A;D<_?D=_:D>T&&(D=T);const F=l[D+3]*O;g+=l[D]*F,x+=l[D+1]*F,v+=l[D+2]*F,b+=F,w+=O}t[f]=g/b,t[f+1]=x/b,t[f+2]=v/b,t[f+3]=b/w}}sendUniformData(e,t){const s=this.chooseRightDelta();e.uniform2fv(t.uDelta,s)}isNeutralState(){return this.blur===0}getBlurValue(){let e=1;const{horizontal:t,aspectRatio:s}=this;return t?s>1&&(e=1/s):s<1&&(e=s),e*this.blur*.12}chooseRightDelta(){const e=this.getBlurValue();return this.horizontal?[e,0]:[0,e]}}U(Td,"type","Blur"),U(Td,"defaults",{blur:0}),U(Td,"uniformLocations",["uDelta"]),De.setClass(Td);class kd extends Zt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=Math.round(255*this.brightness);for(let n=0;n<t.length;n+=4)t[n]+=s,t[n+1]+=s,t[n+2]+=s}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}U(kd,"type","Brightness"),U(kd,"defaults",{brightness:0}),U(kd,"uniformLocations",["uBrightness"]),De.setClass(kd);const yj={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class bo extends Zt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,s=this.matrix,n=this.colorsOnly;for(let a=0;a<t.length;a+=4){const l=t[a],d=t[a+1],h=t[a+2];if(t[a]=l*s[0]+d*s[1]+h*s[2]+255*s[4],t[a+1]=l*s[5]+d*s[6]+h*s[7]+255*s[9],t[a+2]=l*s[10]+d*s[11]+h*s[12]+255*s[14],!n){const f=t[a+3];t[a]+=f*s[3],t[a+1]+=f*s[8],t[a+2]+=f*s[13],t[a+3]=l*s[15]+d*s[16]+h*s[17]+f*s[18]+255*s[19]}}}sendUniformData(e,t){const s=this.matrix,n=[s[0],s[1],s[2],s[3],s[5],s[6],s[7],s[8],s[10],s[11],s[12],s[13],s[15],s[16],s[17],s[18]],a=[s[4],s[9],s[14],s[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,n),e.uniform4fv(t.uConstants,a)}toObject(){return I(I({},super.toObject()),{},{matrix:[...this.matrix]})}}function ha(r,e){var t;const s=(U(t=class extends bo{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",r),U(t,"defaults",{colorsOnly:!1,matrix:e}),t);return De.setClass(s,r),s}U(bo,"type","ColorMatrix"),U(bo,"defaults",yj),U(bo,"uniformLocations",["uColorMatrix","uConstants"]),De.setClass(bo);ha("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);ha("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);ha("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);ha("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);ha("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);ha("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);ha("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class Ow extends Zt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){Uh(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(s=>De.getClass(s.type).fromObject(s,t))).then(s=>new this({subFilters:s}))}}U(Ow,"type","Composed"),De.setClass(Ow);class Ad extends Zt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const s=Math.floor(255*this.contrast),n=259*(s+255)/(255*(259-s));for(let a=0;a<t.length;a+=4)t[a]=n*(t[a]-128)+128,t[a+1]=n*(t[a+1]-128)+128,t[a+2]=n*(t[a+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}U(Ad,"type","Contrast"),U(Ad,"defaults",{contrast:0}),U(Ad,"uniformLocations",["uContrast"]),De.setClass(Ad);const LL={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Ed extends Zt{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return LL[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,s=t.data,n=this.matrix,a=Math.round(Math.sqrt(n.length)),l=Math.floor(a/2),d=t.width,h=t.height,f=e.ctx.createImageData(d,h),g=f.data,x=this.opaque?1:0;let v,b,w,_,T,S,E,A,O,D,F,B,P;for(F=0;F<h;F++)for(D=0;D<d;D++){for(T=4*(F*d+D),v=0,b=0,w=0,_=0,P=0;P<a;P++)for(B=0;B<a;B++)E=F+P-l,S=D+B-l,E<0||E>=h||S<0||S>=d||(A=4*(E*d+S),O=n[P*a+B],v+=s[A]*O,b+=s[A+1]*O,w+=s[A+2]*O,x||(_+=s[A+3]*O));g[T]=v,g[T+1]=b,g[T+2]=w,g[T+3]=x?s[T+3]:_}e.imageData=f}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return I(I({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}U(Ed,"type","Convolute"),U(Ed,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),U(Ed,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),De.setClass(Ed);const bj="Gamma";class Nd extends Zt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const s=this.gamma,n=1/s[0],a=1/s[1],l=1/s[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const d=this.rgbValues;for(let h=0;h<256;h++)d.r[h]=255*Math.pow(h/255,n),d.g[h]=255*Math.pow(h/255,a),d.b[h]=255*Math.pow(h/255,l);for(let h=0;h<t.length;h+=4)t[h]=d.r[t[h]],t[h+1]=d.g[t[h+1]],t[h+2]=d.b[t[h+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:bj,gamma:this.gamma.concat()}}}U(Nd,"type",bj),U(Nd,"defaults",{gamma:[1,1,1]}),U(Nd,"uniformLocations",["uGamma"]),De.setClass(Nd);const RL={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Dd extends Zt{applyTo2d(e){let{imageData:{data:t}}=e;for(let s,n=0;n<t.length;n+=4){const a=t[n],l=t[n+1],d=t[n+2];switch(this.mode){case"average":s=(a+l+d)/3;break;case"lightness":s=(Math.min(a,l,d)+Math.max(a,l,d))/2;break;case"luminosity":s=.21*a+.72*l+.07*d}t[n+2]=t[n+1]=t[n]=s}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return RL[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}U(Dd,"type","Grayscale"),U(Dd,"defaults",{mode:"average"}),U(Dd,"uniformLocations",["uMode"]),De.setClass(Dd);const PL=I(I({},yj),{},{rotation:0});class zg extends bo{calculateMatrix(){const e=this.rotation*Math.PI,t=Ln(e),s=Rn(e),n=1/3,a=Math.sqrt(n)*s,l=1-t;this.matrix=[t+l/3,n*l-a,n*l+a,0,0,n*l+a,t+n*l,n*l-a,0,0,n*l-a,n*l+a,t+n*l,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}U(zg,"type","HueRotation"),U(zg,"defaults",PL),De.setClass(zg);class Od extends Zt{applyTo2d(e){let{imageData:{data:t}}=e;for(let s=0;s<t.length;s+=4)t[s]=255-t[s],t[s+1]=255-t[s+1],t[s+2]=255-t[s+2],this.alpha&&(t[s+3]=255-t[s+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}U(Od,"type","Invert"),U(Od,"defaults",{alpha:!1,invert:!0}),U(Od,"uniformLocations",["uInvert","uAlpha"]),De.setClass(Od);class Md extends Zt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=this.noise;for(let n=0;n<t.length;n+=4){const a=(.5-Math.random())*s;t[n]+=a,t[n+1]+=a,t[n+2]+=a}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}U(Md,"type","Noise"),U(Md,"defaults",{noise:0}),U(Md,"uniformLocations",["uNoise","uSeed"]),De.setClass(Md);class Ld extends Zt{applyTo2d(e){let{imageData:{data:t,width:s,height:n}}=e;for(let a=0;a<n;a+=this.blocksize)for(let l=0;l<s;l+=this.blocksize){const d=4*a*s+4*l,h=t[d],f=t[d+1],g=t[d+2],x=t[d+3];for(let v=a;v<Math.min(a+this.blocksize,n);v++)for(let b=l;b<Math.min(l+this.blocksize,s);b++){const w=4*v*s+4*b;t[w]=h,t[w+1]=f,t[w+2]=g,t[w+3]=x}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}U(Ld,"type","Pixelate"),U(Ld,"defaults",{blocksize:4}),U(Ld,"uniformLocations",["uBlocksize"]),De.setClass(Ld);class Rd extends Zt{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=255*this.distance,n=new ht(this.color).getSource(),a=[n[0]-s,n[1]-s,n[2]-s],l=[n[0]+s,n[1]+s,n[2]+s];for(let d=0;d<t.length;d+=4){const h=t[d],f=t[d+1],g=t[d+2];h>a[0]&&f>a[1]&&g>a[2]&&h<l[0]&&f<l[1]&&g<l[2]&&(t[d+3]=0)}}sendUniformData(e,t){const s=new ht(this.color).getSource(),n=this.distance,a=[0+s[0]/255-n,0+s[1]/255-n,0+s[2]/255-n,1],l=[s[0]/255+n,s[1]/255+n,s[2]/255+n,1];e.uniform4fv(t.uLow,a),e.uniform4fv(t.uHigh,l)}}U(Rd,"type","RemoveColor"),U(Rd,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),U(Rd,"uniformLocations",["uLow","uHigh"]),De.setClass(Rd);class Pd extends Zt{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,s=this.getFilterWindow(),n=new Array(s);for(let a=1;a<=s;a++)n[a-1]=e(a*t);return n}generateShader(e){const t=new Array(e);for(let s=1;s<=e;s++)t[s-1]="".concat(s,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((s,n)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(s,") * uTaps[").concat(n,"] + texture2D(uTexture, vTexCoord - ").concat(s,") * uTaps[").concat(n,`];
              sum += 2.0 * uTaps[`).concat(n,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){Uh(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const s=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(s)/s}}applyTo2d(e){const t=e.imageData,s=this.scaleX,n=this.scaleY;this.rcpScaleX=1/s,this.rcpScaleY=1/n;const a=t.width,l=t.height,d=Math.round(a*s),h=Math.round(l*n);let f;f=this.resizeType==="sliceHack"?this.sliceByTwo(e,a,l,d,h):this.resizeType==="hermite"?this.hermiteFastResize(e,a,l,d,h):this.resizeType==="bilinear"?this.bilinearFiltering(e,a,l,d,h):this.resizeType==="lanczos"?this.lanczosResize(e,a,l,d,h):new ImageData(d,h),e.imageData=f}sliceByTwo(e,t,s,n,a){const l=e.imageData,d=.5;let h=!1,f=!1,g=t*d,x=s*d;const v=e.filterBackend.resources;let b=0,w=0;const _=t;let T=0;v.sliceByTwo||(v.sliceByTwo=Pn());const S=v.sliceByTwo;(S.width<1.5*t||S.height<s)&&(S.width=1.5*t,S.height=s);const E=S.getContext("2d");for(E.clearRect(0,0,1.5*t,s),E.putImageData(l,0,0),n=Math.floor(n),a=Math.floor(a);!h||!f;)t=g,s=x,n<Math.floor(g*d)?g=Math.floor(g*d):(g=n,h=!0),a<Math.floor(x*d)?x=Math.floor(x*d):(x=a,f=!0),E.drawImage(S,b,w,t,s,_,T,g,x),b=_,w=T,T+=x;return E.getImageData(b,w,n,a)}lanczosResize(e,t,s,n,a){const l=e.imageData.data,d=e.ctx.createImageData(n,a),h=d.data,f=this.lanczosCreate(this.lanczosLobes),g=this.rcpScaleX,x=this.rcpScaleY,v=2/this.rcpScaleX,b=2/this.rcpScaleY,w=Math.ceil(g*this.lanczosLobes/2),_=Math.ceil(x*this.lanczosLobes/2),T={},S={x:0,y:0},E={x:0,y:0};return function A(O){let D,F,B,P,H,N,V,G,ne,Q,ie;for(S.x=(O+.5)*g,E.x=Math.floor(S.x),D=0;D<a;D++){for(S.y=(D+.5)*x,E.y=Math.floor(S.y),H=0,N=0,V=0,G=0,ne=0,F=E.x-w;F<=E.x+w;F++)if(!(F<0||F>=t)){Q=Math.floor(1e3*Math.abs(F-S.x)),T[Q]||(T[Q]={});for(let L=E.y-_;L<=E.y+_;L++)L<0||L>=s||(ie=Math.floor(1e3*Math.abs(L-S.y)),T[Q][ie]||(T[Q][ie]=f(Math.sqrt(Math.pow(Q*v,2)+Math.pow(ie*b,2))/1e3)),B=T[Q][ie],B>0&&(P=4*(L*t+F),H+=B,N+=B*l[P],V+=B*l[P+1],G+=B*l[P+2],ne+=B*l[P+3]))}P=4*(D*n+O),h[P]=N/H,h[P+1]=V/H,h[P+2]=G/H,h[P+3]=ne/H}return++O<n?A(O):d}(0)}bilinearFiltering(e,t,s,n,a){let l,d,h,f,g,x,v,b,w,_,T,S,E,A=0;const O=this.rcpScaleX,D=this.rcpScaleY,F=4*(t-1),B=e.imageData.data,P=e.ctx.createImageData(n,a),H=P.data;for(v=0;v<a;v++)for(b=0;b<n;b++)for(g=Math.floor(O*b),x=Math.floor(D*v),w=O*b-g,_=D*v-x,E=4*(x*t+g),T=0;T<4;T++)l=B[E+T],d=B[E+4+T],h=B[E+F+T],f=B[E+F+4+T],S=l*(1-w)*(1-_)+d*w*(1-_)+h*_*(1-w)+f*w*_,H[A++]=S;return P}hermiteFastResize(e,t,s,n,a){const l=this.rcpScaleX,d=this.rcpScaleY,h=Math.ceil(l/2),f=Math.ceil(d/2),g=e.imageData.data,x=e.ctx.createImageData(n,a),v=x.data;for(let b=0;b<a;b++)for(let w=0;w<n;w++){const _=4*(w+b*n);let T=0,S=0,E=0,A=0,O=0,D=0,F=0;const B=(b+.5)*d;for(let P=Math.floor(b*d);P<(b+1)*d;P++){const H=Math.abs(B-(P+.5))/f,N=(w+.5)*l,V=H*H;for(let G=Math.floor(w*l);G<(w+1)*l;G++){let ne=Math.abs(N-(G+.5))/h;const Q=Math.sqrt(V+ne*ne);Q>1&&Q<-1||(T=2*Q*Q*Q-3*Q*Q+1,T>0&&(ne=4*(G+P*t),F+=T*g[ne+3],E+=T,g[ne+3]<255&&(T=T*g[ne+3]/250),A+=T*g[ne],O+=T*g[ne+1],D+=T*g[ne+2],S+=T))}}v[_]=A/S,v[_+1]=O/S,v[_+2]=D/S,v[_+3]=F/E}return x}}U(Pd,"type","Resize"),U(Pd,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),U(Pd,"uniformLocations",["uDelta","uTaps"]),De.setClass(Pd);class Fd extends Zt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=-this.saturation;for(let n=0;n<t.length;n+=4){const a=t[n],l=t[n+1],d=t[n+2],h=Math.max(a,l,d);t[n]+=h!==a?(h-a)*s:0,t[n+1]+=h!==l?(h-l)*s:0,t[n+2]+=h!==d?(h-d)*s:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}U(Fd,"type","Saturation"),U(Fd,"defaults",{saturation:0}),U(Fd,"uniformLocations",["uSaturation"]),De.setClass(Fd);class Bd extends Zt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=-this.vibrance;for(let n=0;n<t.length;n+=4){const a=t[n],l=t[n+1],d=t[n+2],h=Math.max(a,l,d),f=(a+l+d)/3,g=2*Math.abs(h-f)/255*s;t[n]+=h!==a?(h-a)*g:0,t[n+1]+=h!==l?(h-l)*g:0,t[n+2]+=h!==d?(h-d)*g:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}U(Bd,"type","Vibrance"),U(Bd,"defaults",{vibrance:0}),U(Bd,"uniformLocations",["uVibrance"]),De.setClass(Bd);const FL=()=>{console.log("=== CakeCustomization Component Initialized ===");const r=Bn(),{session:e,userRole:t}=zn(),s=C.useRef(null),n=C.useRef(null),a=C.useRef(null),[l,d]=C.useState(!0),[h,f]=C.useState([]),[g,x]=C.useState([]),[v,b]=C.useState([]),[w,_]=C.useState("select"),[T,S]=C.useState("#FF0000"),[E,A]=C.useState(""),[O,D]=C.useState(24),[F,B]=C.useState("Arial"),[P,H]=C.useState(!1),[N,V]=C.useState(null),[G,ne]=C.useState(0),[Q,ie]=C.useState("cake base"),[L,$]=C.useState(!1),[K,pe]=C.useState(1),[M,J]=C.useState(""),[ye,te]=C.useState(""),[fe,re]=C.useState("Pickup"),[le,de]=C.useState(""),[Ce,Me]=C.useState(1),[ce,je]=C.useState(!1),[Te,we]=C.useState(!1),[Ue,Ee]=C.useState(null),[$e,Se]=C.useState(!1);console.log("Initial state:",{loading:l,canvasReady:P,selectedColor:T}),C.useEffect(()=>($e?(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"):(document.body.style.overflow="unset",document.documentElement.style.overflow="unset"),()=>{document.body.style.overflow="unset",document.documentElement.style.overflow="unset"}),[$e]),C.useEffect(()=>{if(!e||!e.user){console.log("User not authenticated, waiting 5 seconds to check again...");const q=setTimeout(()=>{!e||!e.user?(console.log("User still not authenticated after 5 seconds, redirecting to login"),Ne.error("Please log in to access the cake customization tool"),r("/login")):console.log("User authenticated after 5 seconds:",e.user)},5e3);return()=>clearTimeout(q)}else console.log("User authenticated:",e.user)},[e,r]),C.useEffect(()=>{console.log("=== CanvasReady state changed ==="),console.log("New canvasReady value:",P)},[P]);const tt=q=>{if(!q)return console.log("getPublicImageUrl: No path provided"),null;if(q.startsWith("http"))return console.log("getPublicImageUrl: Path is already a URL:",q),q;console.log("getPublicImageUrl: Processing path:",q);try{const ve="asset";console.log(`getPublicImageUrl: Using bucket "${ve}"`);let He=q;q.includes("/")||console.log(`getPublicImageUrl: Path doesn't include folder, using filename: ${q}`);const{data:ke,error:Ae}=xe.storage.from(ve).getPublicUrl(He);return Ae?(console.log(`getPublicImageUrl: Error with bucket "${ve}":`,Ae),null):ke&&ke.publicUrl?(console.log(`getPublicImageUrl: Success with bucket "${ve}":`,ke.publicUrl),ke.publicUrl):(console.error(`getPublicImageUrl: No public URL generated for bucket "${ve}"`),null)}catch(ve){return console.error("getPublicImageUrl: Unexpected error:",ve),null}},$t=q=>new Promise((ve,He)=>{const ke=new Image;ke.crossOrigin="anonymous",ke.onload=()=>{const Ae=document.createElement("canvas"),Re=Ae.getContext("2d");Ae.width=ke.width,Ae.height=ke.height,Re.drawImage(ke,0,0),ve(Ae.toDataURL())},ke.onerror=()=>{const Ae=new Image;Ae.onload=()=>{const Re=document.createElement("canvas"),Ge=Re.getContext("2d");Re.width=Ae.width,Re.height=Ae.height,Ge.drawImage(Ae,0,0),ve(Re.toDataURL())},Ae.onerror=He,Ae.src=q},ke.src=q}),gs=async q=>{if(!q)return!1;try{return(await fetch(q,{method:"HEAD"})).ok}catch(ve){return console.log("testImageUrl: Error testing URL:",q,ve),!1}},js=async()=>{try{console.log("=== TESTING STORAGE BUCKET STRUCTURE ===");const q="asset",{data:ve,error:He}=await xe.storage.from(q).list("",{limit:100});if(He){console.error("Error listing bucket contents:",He);return}console.log("Bucket contents:",ve);const ke=["cake base","icing","topping"];for(const Ae of ke)try{const{data:Re,error:Ge}=await xe.storage.from(q).list(Ae,{limit:100});Ge?console.log(`Error listing folder "${Ae}":`,Ge):console.log(`Folder "${Ae}" contents:`,Re)}catch(Re){console.log(`Exception listing folder "${Ae}":`,Re)}}catch(q){console.error("Error testing storage bucket:",q)}},Js=()=>{const q=a.current;if(!q){console.log("Color wheel canvas not ready");return}const ve=q.getContext("2d");if(!ve){console.log("Color wheel context not ready");return}const He=q.width/2,ke=q.height/2,Ae=Math.min(He,ke)-10;ve.clearRect(0,0,q.width,q.height);const Re=ve.createImageData(q.width,q.height),Ge=Re.data;for(let Ot=0;Ot<q.height;Ot++)for(let Qt=0;Qt<q.width;Qt++){const Fe=Qt-He,ct=Ot-ke,Jt=Math.sqrt(Fe*Fe+ct*ct),tn=Math.atan2(ct,Fe);if(Jt<=Ae){const es=(tn*180/Math.PI+360)%360,br=Math.min(Jt/Ae*100,100),Ur=50,Is=(Ye,wr,tr)=>{wr/=100,tr/=100;const At=(1-Math.abs(2*tr-1))*wr,Gt=At*(1-Math.abs(Ye/60%2-1)),sr=tr-At/2;let Bt=0,bt=0,Wt=0;return 0<=Ye&&Ye<60?(Bt=At,bt=Gt,Wt=0):60<=Ye&&Ye<120?(Bt=Gt,bt=At,Wt=0):120<=Ye&&Ye<180?(Bt=0,bt=At,Wt=Gt):180<=Ye&&Ye<240?(Bt=0,bt=Gt,Wt=At):240<=Ye&&Ye<300?(Bt=Gt,bt=0,Wt=At):300<=Ye&&Ye<360&&(Bt=At,bt=0,Wt=Gt),[Math.round((Bt+sr)*255),Math.round((bt+sr)*255),Math.round((Wt+sr)*255)]},[ot,xa,va]=Is(es,br,Ur),ps=(Ot*q.width+Qt)*4;Ge[ps]=ot,Ge[ps+1]=xa,Ge[ps+2]=va,Ge[ps+3]=255}}ve.putImageData(Re,0,0),ve.beginPath(),ve.arc(He,ke,20,0,2*Math.PI),ve.fillStyle=T,ve.fill(),ve.strokeStyle="#333",ve.lineWidth=2,ve.stroke(),console.log("Color wheel drawn successfully")},Vs=q=>{console.log("=== Get Color From Wheel called ==="),console.log("Event:",q);const ve=a.current;if(console.log("Color wheel canvas:",ve),!ve){console.log("Color wheel canvas not available");return}const He=ve.getBoundingClientRect(),ke=q.clientX-He.left,Ae=q.clientY-He.top,Re=ve.width/2,Ge=ve.height/2;console.log("Click coordinates:",{x:ke,y:Ae,centerX:Re,centerY:Ge});const Ot=ke-Re,Qt=Ae-Ge,Fe=Math.sqrt(Ot*Ot+Qt*Qt),ct=Math.min(Re,Ge)-10;if(console.log("Distance calculation:",{deltaX:Ot,deltaY:Qt,distance:Fe,radius:ct}),Fe<=ct){const tn=(Math.atan2(Qt,Ot)*180/Math.PI+360)%360,es=Math.min(Fe/ct*100,100),br=50,Ur=(Ye,wr,tr)=>{wr/=100,tr/=100;const At=(1-Math.abs(2*tr-1))*wr,Gt=At*(1-Math.abs(Ye/60%2-1)),sr=tr-At/2;let Bt=0,bt=0,Wt=0;return 0<=Ye&&Ye<60?(Bt=At,bt=Gt,Wt=0):60<=Ye&&Ye<120?(Bt=Gt,bt=At,Wt=0):120<=Ye&&Ye<180?(Bt=0,bt=At,Wt=Gt):180<=Ye&&Ye<240?(Bt=0,bt=Gt,Wt=At):240<=Ye&&Ye<300?(Bt=Gt,bt=0,Wt=At):300<=Ye&&Ye<360&&(Bt=At,bt=0,Wt=Gt),[Math.round((Bt+sr)*255),Math.round((bt+sr)*255),Math.round((Wt+sr)*255)]},Is=(Ye,wr,tr)=>"#"+[Ye,wr,tr].map(At=>{const Gt=At.toString(16);return Gt.length===1?"0"+Gt:Gt}).join(""),[ot,xa,va]=Ur(tn,es,br),ps=Is(ot,xa,va);if(console.log("Calculated color:",ps),S(ps),console.log("Checking canvas readiness for color change"),console.log("canvasReady:",P),console.log("canvas.current:",n.current),console.log("getActiveObject method:",n.current?.getActiveObject),P&&n.current&&n.current.getActiveObject){console.log("Canvas is ready, getting active object");const Ye=n.current.getActiveObject();console.log("Active object for color change:",Ye),Ye?(console.log("Setting fill color on active object"),Ye.set("fill",ps),n.current.renderAll(),console.log("Color changed successfully"),N&&N===Ye&&ne(wr=>wr+1)):console.log("No active object for color change")}else console.log("Canvas not ready for color change")}else console.log("Click outside color wheel radius")},er=q=>{console.log("=== Mouse Down on Color Wheel ==="),a.current&&(document.addEventListener("mousemove",ae),document.addEventListener("mouseup",Le),Vs(q))},ae=q=>{console.log("=== Mouse Move on Color Wheel ===");const ve={clientX:q.clientX,clientY:q.clientY};Vs(ve)},Le=()=>{console.log("=== Mouse Up on Color Wheel ==="),document.removeEventListener("mousemove",ae),document.removeEventListener("mouseup",Le)};C.useEffect(()=>{console.log("=== Fetch Images useEffect triggered ==="),(async()=>{try{console.log("Setting loading to true"),d(!0);const{data:ve,error:He}=await xe.from("ASSET").select("*");if(He){console.error("Error fetching assets:",He),Ne.error("Failed to load assets");return}console.log("=== ASSET DATA DEBUG ==="),console.log("Raw asset data:",ve),console.log("Asset count:",ve?.length||0),ve&&ve.length>0&&(console.log("Sample asset:",ve[0]),console.log("Asset structure:",Object.keys(ve[0]))),await js();const ke=ve.filter(Fe=>Fe.type==="cake base"),Ae=ve.filter(Fe=>Fe.type==="icing"),Re=ve.filter(Fe=>Fe.type==="topping");console.log("Filtered cake bases:",ke),console.log("Filtered icing assets:",Ae),console.log("Filtered topping assets:",Re);const Ge=ke.map(Fe=>{const ct=tt(Fe.src);return console.log(`Processing cake base ${Fe.src}:`,{asset:Fe,publicUrl:ct}),{cake_id:Fe.asset_id,name:Fe.src.replace(".png","").replace(/_/g," ").replace(/\b\w/g,Jt=>Jt.toUpperCase()),publicUrl:ct,admin_id:Fe.admin_id}}),Ot=Ae.map(Fe=>{const ct=tt(Fe.src);return console.log(`Processing icing ${Fe.src}:`,{asset:Fe,publicUrl:ct}),{id:Fe.asset_id,name:Fe.src.replace(".png","").replace(/_/g," ").replace(/\b\w/g,Jt=>Jt.toUpperCase()),image_path:Fe.src,category:Fe.type,admin_id:Fe.admin_id}}),Qt=Re.map(Fe=>{const ct=tt(Fe.src);return console.log(`Processing topping ${Fe.src}:`,{asset:Fe,publicUrl:ct}),{id:Fe.asset_id,name:Fe.src.replace(".png","").replace(/_/g," ").replace(/\b\w/g,Jt=>Jt.toUpperCase()),src:Fe.src,category:Fe.type,admin_id:Fe.admin_id}});if(console.log("=== PROCESSED DATA DEBUG ==="),console.log("Final cake images:",Ge),console.log("Final icing assets:",Ot),console.log("Final topping assets:",Qt),Ge.length>0){console.log("Testing first cake image URL...");const Fe=Ge[0].publicUrl;if(console.log("First cake URL:",Fe),Fe){const ct=await gs(Fe);console.log("First cake URL accessible:",ct)}}if(Ot.length>0){console.log("Testing first icing URL...");const Fe=tt(Ot[0].image_path);if(console.log("First icing URL:",Fe),Fe){const ct=await gs(Fe);console.log("First icing URL accessible:",ct)}}Ge.length===0&&console.warn("No cake bases found in ASSET table"),Ot.length===0&&console.warn("No icing assets found in ASSET table"),Qt.length===0&&console.warn("No topping assets found in ASSET table"),f(Ge),x(Ot),b(Qt)}catch(ve){console.error("Error fetching images:",ve),Ne.error("Failed to load images")}finally{console.log("Setting loading to false"),d(!1)}})()},[]),C.useEffect(()=>{if(console.log("=== Canvas Initialization useEffect triggered ==="),console.log("Loading state:",l),console.log("Canvas ref:",s.current),!l&&s.current&&!n.current){console.log("Loading is false, initializing canvas..."),console.log("Canvas ref element:",s.current);try{const q=s.current.parentElement,ve=q.getBoundingClientRect();console.log("=== Canvas Sizing Debug ==="),console.log("Container element:",q),console.log("Container rect:",ve),console.log("Container width:",ve.width),console.log("Container height:",ve.height);const He=ve.width,ke=ve.height;console.log("Calculated maxWidth:",He),console.log("Calculated maxHeight:",ke),console.log("Canvas element before creation:",s.current),n.current=new Mp(s.current,{width:He,height:ke,backgroundColor:"#f8f9fa"}),console.log("Canvas created successfully:",n.current),console.log("Canvas dimensions after creation:",{width:n.current.width,height:n.current.height}),console.log("Container computed styles:",{width:window.getComputedStyle(q).width,height:window.getComputedStyle(q).height,maxWidth:window.getComputedStyle(q).maxWidth,maxHeight:window.getComputedStyle(q).maxHeight,overflow:window.getComputedStyle(q).overflow}),console.log("Canvas element computed styles:",{width:window.getComputedStyle(s.current).width,height:window.getComputedStyle(s.current).height,maxWidth:window.getComputedStyle(s.current).maxWidth,maxHeight:window.getComputedStyle(s.current).maxHeight}),n.current.on("selection:created",me),n.current.on("selection:cleared",ue),n.current.on("object:modified",rt),n.current.on("object:moving",rt),n.current.on("object:scaling",rt),n.current.on("object:rotating",rt),console.log("Event listeners added"),console.log("Setting canvasReady to true"),setTimeout(()=>{console.log("Delayed canvas ready set to true"),H(!0)},100)}catch(q){console.error("Error creating Canvas:",q)}}else console.log("Loading is still true, canvas ref not ready, or canvas already exists")},[l]);const be=()=>{if(console.log("=== Canvas Resize Debug ==="),console.log("Canvas current:",n.current),console.log("Canvas ref:",s.current),n.current&&s.current){const ve=s.current.parentElement.getBoundingClientRect();console.log("Resize - Container rect:",ve),console.log("Resize - Container width:",ve.width),console.log("Resize - Container height:",ve.height);const He=ve.width,ke=ve.height;console.log("Resize - Calculated maxWidth:",He),console.log("Resize - Calculated maxHeight:",ke),console.log("Resize - Current canvas dimensions:",{width:n.current.width,height:n.current.height}),n.current.setDimensions({width:He,height:ke}),n.current.renderAll(),console.log("Resize - New canvas dimensions:",{width:n.current.width,height:n.current.height})}else console.log("Resize - Canvas not ready for resize")};C.useEffect(()=>{if(P&&n.current)return window.addEventListener("resize",be),()=>{window.removeEventListener("resize",be)}},[P]),C.useEffect(()=>()=>{console.log("Canvas cleanup - disposing canvas"),n.current&&(n.current.dispose(),n.current=null),console.log("Setting canvasReady to false"),H(!1)},[]),C.useEffect(()=>{console.log("=== Color Wheel useEffect triggered ==="),console.log("Selected color:",T),console.log("Color wheel ref:",a.current),a.current?(console.log("Drawing color wheel..."),Js()):console.log("Color wheel ref not ready")},[T,G]),C.useEffect(()=>{console.log("=== Color Wheel Mount useEffect triggered ===");const q=setTimeout(()=>{console.log("Attempting to draw color wheel on mount"),console.log("Color wheel ref on mount:",a.current),a.current?(console.log("Drawing color wheel on mount..."),Js()):console.log("Color wheel ref not ready on mount")},100);return()=>{console.log("Clearing color wheel mount timer"),clearTimeout(q)}},[]);const me=()=>{if(console.log("=== Handle Selection called ==="),console.log("Canvas ready:",P),console.log("Canvas current:",n.current),!n.current){console.log("Canvas not available in handleSelection");return}const q=n.current.getActiveObject();console.log("Active object:",q),q&&(console.log("Active object type:",q.type),V(q),ne(ve=>ve+1),q.type==="text"?(console.log("Setting text properties from active object"),A(q.text),D(q.fontSize),B(q.fontFamily),S(q.fill)):S(q.fill||"#FF0000"))},ue=()=>{console.log("=== Handle Deselection called ==="),console.log("Resetting text properties"),A(""),D(24),B("Arial"),S("#FF0000"),V(null),ne(0)},rt=()=>{console.log("=== Handle Object Modified called ==="),ne(q=>q+1)},Br=q=>{if(console.log("=== Add Cake Base called ==="),console.log("Cake:",q),console.log("Canvas ready:",P),console.log("Canvas current:",n.current),!P||!n.current){console.log("Canvas not ready for addCakeBase"),Ne.error("Canvas not ready");return}console.log("Creating image for cake base"),(async()=>{try{const He=new Image;He.crossOrigin="anonymous",await new Promise((Ae,Re)=>{He.onload=Ae,He.onerror=Re,He.src=q.publicUrl}),console.log("Image loaded successfully with CORS, creating FabricImage");const ke=new os(He);ke.scaleToWidth(300),ke.set({left:250,top:200,name:"cake-base"}),console.log("Adding fabric image to canvas"),n.current.add(ke),n.current.setActiveObject(ke),n.current.renderAll(),console.log("Cake base added successfully")}catch{console.log("CORS failed, trying data URL conversion...");try{const ke=await $t(q.publicUrl),Ae=new Image;Ae.onload=()=>{console.log("Image loaded successfully via data URL, creating FabricImage");const Re=new os(Ae);Re.scaleToWidth(300),Re.set({left:250,top:200,name:"cake-base"}),console.log("Adding fabric image to canvas"),n.current.add(Re),n.current.setActiveObject(Re),n.current.renderAll(),console.log("Cake base added successfully")},Ae.src=ke}catch(ke){console.error("Both CORS and data URL conversion failed:",ke),Ne.error("Failed to load cake image")}}})(),console.log("Image src set to:",q.publicUrl)},fa=q=>{if(!P||!n.current){Ne.error("Canvas not ready");return}const ve=tt(q.image_path);console.log("Adding decoration:",{decoration:q,imageUrl:ve}),(async()=>{try{const ke=new Image;ke.crossOrigin="anonymous",await new Promise((Re,Ge)=>{ke.onload=Re,ke.onerror=Ge,ke.src=ve});const Ae=new os(ke);Ae.scaleToWidth(80),Ae.set({left:300,top:250,name:"decoration"}),n.current.add(Ae),n.current.setActiveObject(Ae),n.current.renderAll()}catch{console.log("CORS failed for decoration, trying data URL conversion...");try{const Ae=await $t(ve),Re=new Image;Re.onload=()=>{const Ge=new os(Re);Ge.scaleToWidth(80),Ge.set({left:300,top:250,name:"decoration"}),n.current.add(Ge),n.current.setActiveObject(Ge),n.current.renderAll()},Re.src=Ae}catch(Ae){console.error("Both CORS and data URL conversion failed for decoration:",Ae),Ne.error("Failed to load decoration image")}}})()},yr=q=>{if(!P||!n.current){Ne.error("Canvas not ready");return}const ve=tt(q.src);console.log("Adding topping:",{topping:q,imageUrl:ve}),(async()=>{try{const ke=new Image;ke.crossOrigin="anonymous",await new Promise((Re,Ge)=>{ke.onload=Re,ke.onerror=Ge,ke.src=ve});const Ae=new os(ke);Ae.scaleToWidth(60),Ae.set({left:320,top:270,name:"topping"}),n.current.add(Ae),n.current.setActiveObject(Ae),n.current.renderAll()}catch{console.log("CORS failed for topping, trying data URL conversion...");try{const Ae=await $t(ve),Re=new Image;Re.onload=()=>{const Ge=new os(Re);Ge.scaleToWidth(60),Ge.set({left:320,top:270,name:"topping"}),n.current.add(Ge),n.current.setActiveObject(Ge),n.current.renderAll()},Re.src=Ae}catch(Ae){console.error("Both CORS and data URL conversion failed for topping:",Ae),Ne.error("Failed to load topping image")}}})()},ma=()=>{if(!E.trim()){Ne.error("Please enter some text");return}if(!P||!n.current){Ne.error("Canvas not ready");return}const q=new ws(E,{left:350,top:100,fontSize:O,fontFamily:F,fill:T,name:"text"});n.current.add(q),n.current.setActiveObject(q),n.current.renderAll(),A("")},zr=q=>{if(console.log("=== Change Size called ==="),console.log("Scale:",q),console.log("Canvas ready:",P),console.log("Canvas current:",n.current),console.log("Canvas getActiveObject method:",n.current?.getActiveObject),!P){console.log("Canvas not ready - canvasReady is false"),Ne.error("Canvas not ready");return}if(!n.current){console.log("Canvas not ready - canvas.current is null"),Ne.error("Canvas not ready");return}if(typeof n.current.getActiveObject!="function"){console.log("Canvas not ready - getActiveObject is not a function"),console.log("getActiveObject type:",typeof n.current.getActiveObject),Ne.error("Canvas not ready");return}console.log("Getting active object");const ve=n.current.getActiveObject();console.log("Active object:",ve),ve?(console.log("Scaling active object by:",q),ve.scale(q),n.current.renderAll(),ne(He=>He+1),console.log("Size changed successfully")):(console.log("No active object found"),Ne.error("Please select an object first"))},ga=()=>{if(!P||!n.current||!n.current.getActiveObject){Ne.error("Canvas not ready");return}const q=n.current.getActiveObject();q?(n.current.remove(q),n.current.renderAll()):Ne.error("Please select an object first")},Ti=()=>{if(!P||!n.current){Ne.error("Canvas not ready");return}n.current.clear(),n.current.backgroundColor="#f8f9fa",n.current.renderAll(),Ne.success("Canvas cleared")},Hc=()=>{if(!P||!n.current||!n.current.getActiveObject){Ne.error("Canvas not ready");return}const q=n.current.getActiveObject();q?(n.current.bringToFront(q),n.current.renderAll(),ne(ve=>ve+1)):Ne.error("Please select an object first")},$o=()=>{if(!P||!n.current||!n.current.getActiveObject){Ne.error("Canvas not ready");return}const q=n.current.getActiveObject();q?(n.current.sendToBack(q),n.current.renderAll(),ne(ve=>ve+1)):Ne.error("Please select an object first")},Go=()=>{if(!P||!n.current||!n.current.getActiveObject){Ne.error("Canvas not ready");return}const q=n.current.getActiveObject();q?(n.current.bringForward(q),n.current.renderAll(),ne(ve=>ve+1)):Ne.error("Please select an object first")},pa=()=>{if(!P||!n.current||!n.current.getActiveObject){Ne.error("Canvas not ready");return}const q=n.current.getActiveObject();q?(n.current.sendBackwards(q),n.current.renderAll(),ne(ve=>ve+1)):Ne.error("Please select an object first")},ki=async()=>{if(!P||!n.current){Ne.error("Canvas not ready");return}try{Ne.loading("Preparing your custom cake design...");const q=n.current.toDataURL({format:"png",quality:1}),He=await(await fetch(q)).blob();Ee({dataURL:q,blob:He,filename:`custom_cake_${Date.now()}.png`});const ke=new Date;ke.setDate(ke.getDate()+1),J(ke.toISOString().split("T")[0]),te("14:00"),Me(1),pe(1),Ne.dismiss(),$(!0)}catch(q){console.error("Error preparing design:",q),Ne.error("Failed to prepare design")}},Wo=()=>{$(!1),J(""),te(""),re("Pickup"),de(""),Me(1),pe(1),je(!1),we(!1),Ee(null)},$c=()=>{K<3&&pe(K+1)},Gc=()=>{K>1&&pe(K-1)},Yo=async()=>{if(!Te){if(!Ue||!M||!ye||fe==="Delivery"&&!le){Ne.error("Please fill in all required fields");return}we(!0);try{console.log("Starting custom cake order placement...");const{data:q,error:ve}=await xe.from("CUSTOMER").select("cus_id").eq("auth_user_id",e.user.id).single();if(ve||!q){console.error("Error fetching customer ID:",ve),Ne.error("Customer information not found. Please try again.");return}const He=q.cus_id,{data:ke,error:Ae}=await xe.storage.from("cust.cakes").upload(Ue.filename,Ue.blob,{contentType:"image/png",upsert:!1});if(Ae){console.error("Upload error:",Ae),Ne.error("Failed to save design to storage");return}console.log("Image uploaded successfully:",ke);const{data:Re}=await xe.from("CUSTOM-CAKE").select("cc_id").order("cc_id",{ascending:!1}).limit(1),Ge=Re&&Re.length>0?Re[0].cc_id+1:6001,Ot=new Date(`${M}T${ye}`),Qt={order_date:new Date().toISOString().split("T")[0],delivery_method:fe,order_schedule:Ot.toISOString(),delivery_address:fe==="Delivery"?le:null,cus_id:He,order_status:"Pending"};console.log("Attempting to create order with data:",Qt);const{data:Fe,error:ct}=await xe.from("ORDER").insert([Qt]).select().single();if(ct){console.error("Error creating order:",ct),console.error("Order error details:",{message:ct.message,details:ct.details,hint:ct.hint,code:ct.code}),Ne.error(`Failed to create order: ${ct.message}`);return}console.log("Order created successfully:",Fe),console.log("Order ID from database:",Fe.order_id);const Jt={cc_id:Ge,cc_img:Ue.filename,order_id:Fe.order_id,cus_id:He,auth_user_id:e.user.id};console.log("Attempting to create custom cake record with data:",Jt);const{data:tn,error:es}=await xe.from("CUSTOM-CAKE").insert(Jt);if(es){console.error("Database insert error:",es),console.error("Custom cake error details:",{message:es.message,details:es.details,hint:es.hint,code:es.code}),Ne.error(`Failed to save cake design to database: ${es.message}`);return}console.log("Custom cake record created:",tn);const Is={payment_method:"Cash",amount_paid:5e3*Ce,payment_date:new Date().toISOString().split("T")[0],payment_status:"Unpaid",receipt:null,order_id:Fe.order_id};console.log("Attempting to create payment record with data:",Is);const{error:ot}=await xe.from("PAYMENT").insert([Is]);if(ot){console.error("Error creating payment:",ot),console.error("Payment error details:",{message:ot.message,details:ot.details,hint:ot.hint,code:ot.code}),Ne.error(`Failed to create payment record: ${ot.message}`);return}console.log("Payment record created successfully"),Ne.success("Custom cake order placed successfully!",{duration:4e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}),pe(3)}catch(q){console.error("Error placing order:",q),Ne.error("Failed to place order. Please try again.",{duration:4e3,position:"top-center"})}finally{we(!1)}}};return console.log("=== Render called ==="),console.log("Current state:",{loading:l,canvasReady:P,selectedColor:T,cakeImages:h.length,session:!!e}),!e||!e.user||l?(console.log("Showing loading spinner - session:",!!e,"loading:",l),c.jsx(Po,{message:e?"Loading cake designer...":"Checking authentication, please wait..."})):c.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[c.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-2 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Cake Designer"}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("button",{onClick:()=>Se(!$e),className:`p-2 rounded hover:bg-gray-100 transition-colors ${$e?"bg-red-100 text-red-600":"text-gray-600"}`,title:$e?"Unlock Scrolling":"Lock Scrolling",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:$e?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"})})}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>_("select"),className:`p-2 rounded hover:bg-gray-100 transition-colors ${w==="select"?"bg-blue-100 text-blue-600":"text-gray-600"}`,title:"Select Tool (V)",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.122 2.122"})})}),c.jsx("button",{onClick:()=>_("text"),className:`p-2 rounded hover:bg-gray-100 transition-colors ${w==="text"?"bg-blue-100 text-blue-600":"text-gray-600"}`,title:"Text Tool (T)",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})})})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>zr(.8),className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Decrease Size",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12H3"})})}),c.jsx("button",{onClick:()=>zr(1.2),className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Increase Size",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("button",{onClick:Hc,className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Bring to Front",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})})}),c.jsx("button",{onClick:$o,className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Send to Back",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8V20m0 0l-4-4m4 4l4-4M7 4v12m0 0l-4-4m4 4l4-4"})})}),c.jsx("button",{onClick:Go,className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Bring Forward",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11l5-5m0 0l5 5m-5-5v12"})})}),c.jsx("button",{onClick:pa,className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Send Backward",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 13l-5 5m0 0l-5-5m5 5V6"})})}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("button",{onClick:ga,className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete Selected",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),c.jsx("button",{onClick:Ti,className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Clear Canvas",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),c.jsx("button",{onClick:ki,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",title:"Save Design",children:"Save"})]})]}),c.jsxs("div",{className:"flex-1 flex min-h-0 overflow-hidden",children:[c.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col overflow-hidden",children:[w==="text"&&c.jsxs("div",{className:"p-4 border-b border-gray-200",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Text"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("input",{type:"text",value:E,onChange:q=>A(q.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter text..."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Size"}),c.jsx("input",{type:"range",min:"12",max:"72",value:O,onChange:q=>D(parseInt(q.target.value)),className:"w-full"}),c.jsxs("span",{className:"text-xs text-gray-500",children:[O,"px"]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Font"}),c.jsxs("select",{value:F,onChange:q=>B(q.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",children:[c.jsx("option",{value:"Arial",children:"Arial"}),c.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),c.jsx("option",{value:"Courier New",children:"Courier New"}),c.jsx("option",{value:"Georgia",children:"Georgia"}),c.jsx("option",{value:"Verdana",children:"Verdana"})]})]}),c.jsx("button",{onClick:ma,className:"w-full px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Add Text"})]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0",children:[c.jsxs("div",{className:"flex space-x-1 p-4 pb-2 bg-gray-50 border-b border-gray-200",children:[c.jsx("button",{onClick:()=>ie("cake base"),className:`flex-1 py-2 px-3 text-xs font-medium rounded-md transition-colors ${Q==="cake base"?"bg-white text-gray-900 shadow-sm border border-gray-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Cake Bases"}),c.jsx("button",{onClick:()=>ie("icing"),className:`flex-1 py-2 px-3 text-xs font-medium rounded-md transition-colors ${Q==="icing"?"bg-white text-gray-900 shadow-sm border border-gray-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Icing"}),c.jsx("button",{onClick:()=>ie("topping"),className:`flex-1 py-2 px-3 text-xs font-medium rounded-md transition-colors ${Q==="topping"?"bg-white text-gray-900 shadow-sm border border-gray-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Toppings"})]}),c.jsxs("div",{className:"p-4",children:[Q==="cake base"&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Cake Bases"}),h.length>0?c.jsx("div",{className:"space-y-2",children:h.map(q=>c.jsxs("div",{className:"group cursor-pointer",children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:q.publicUrl,alt:q.name,className:"w-full object-contain rounded border border-gray-200 group-hover:border-blue-300 transition-colors",style:{height:"auto",maxHeight:"80px"},onError:ve=>{ve.target.src="/saved-cake.png"}}),c.jsx("button",{onClick:()=>Br(q),className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-colors duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100",children:c.jsx("span",{className:"text-white text-xs font-medium",children:"Add"})})]}),c.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:q.name})]},q.cake_id))}):c.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No cake bases found"})]}),Q==="icing"&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Icing & Decorations"}),g.length>0?c.jsx("div",{className:"space-y-2",children:g.map(q=>c.jsxs("div",{className:"group cursor-pointer",children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:tt(q.image_path),alt:q.name,className:"w-full object-contain rounded border border-gray-200 group-hover:border-blue-300 transition-colors",style:{height:"auto",maxHeight:"80px"},onError:ve=>{console.error("Decoration image failed to load in UI:",q.image_path),ve.target.src="/saved-cake.png"}}),c.jsx("button",{onClick:()=>fa(q),className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-colors duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100",children:c.jsx("span",{className:"text-white text-xs font-medium",children:"Add"})})]}),c.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:q.name})]},q.id))}):c.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No icing decorations found"})]}),Q==="topping"&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Toppings"}),v.length>0?c.jsx("div",{className:"space-y-2",children:v.map(q=>c.jsxs("div",{className:"group cursor-pointer",children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:tt(q.src),alt:q.name,className:"w-full object-contain rounded border border-gray-200 group-hover:border-blue-300 transition-colors",style:{height:"auto",maxHeight:"80px"},onError:ve=>{console.error("Topping image failed to load in UI:",q.src),ve.target.src="/saved-cake.png"}}),c.jsx("button",{onClick:()=>yr(q),className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-colors duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100",children:c.jsx("span",{className:"text-white text-xs font-medium",children:"Add"})})]}),c.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:q.name})]},q.id))}):c.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No toppings found"})]})]})]})]}),c.jsx("div",{className:"flex-1 bg-gray-100 flex items-center justify-center p-4 min-h-0 overflow-hidden",children:c.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden w-full h-full min-w-[800px] min-h-[600px]",children:c.jsx("canvas",{ref:s,className:"w-full h-full"})})}),c.jsxs("div",{className:"w-64 bg-white border-l border-gray-200 p-4",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Properties"}),N?c.jsxs("div",{className:"space-y-4",children:[N.type==="text"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Color"}),c.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[c.jsx("canvas",{ref:a,width:"120",height:"120",className:"border border-gray-300 rounded cursor-pointer",onMouseDown:er,title:"Click and drag to select color"}),c.jsx("div",{className:"flex items-center space-x-2",children:c.jsx("span",{className:"text-sm text-gray-600 font-mono",children:T})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Type"}),c.jsx("div",{className:"text-sm font-medium text-gray-900 capitalize",children:N.type})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Layer Order"}),c.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[n.current.getObjects().indexOf(N)+1," of ",n.current.getObjects().length]}),c.jsxs("div",{className:"flex gap-1 mt-2",children:[c.jsx("button",{onClick:pa,className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",title:"Send Backward",children:"↓"}),c.jsx("button",{onClick:Go,className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",title:"Bring Forward",children:"↑"}),c.jsx("button",{onClick:$o,className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",title:"Send to Back",children:"⬇"}),c.jsx("button",{onClick:Hc,className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",title:"Bring to Front",children:"⬆"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Position"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx("input",{type:"number",value:Math.round(N.left||0),onChange:q=>{N.set("left",parseFloat(q.target.value)),n.current.renderAll(),ne(ve=>ve+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),c.jsx("input",{type:"number",value:Math.round(N.top||0),onChange:q=>{N.set("top",parseFloat(q.target.value)),n.current.renderAll(),ne(ve=>ve+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Size"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx("input",{type:"number",value:Math.round(N.width*(N.scaleX||1)),onChange:q=>{const He=parseFloat(q.target.value)/N.width;N.set("scaleX",He),n.current.renderAll(),ne(ke=>ke+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),c.jsx("input",{type:"number",value:Math.round(N.height*(N.scaleY||1)),onChange:q=>{const He=parseFloat(q.target.value)/N.height;N.set("scaleY",He),n.current.renderAll(),ne(ke=>ke+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Rotation"}),c.jsx("input",{type:"number",value:Math.round(N.angle||0),onChange:q=>{N.set("angle",parseFloat(q.target.value)),n.current.renderAll(),ne(ve=>ve+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Opacity"}),c.jsx("input",{type:"range",min:"0",max:"100",value:Math.round((N.opacity||1)*100),onChange:q=>{N.set("opacity",parseFloat(q.target.value)/100),n.current.renderAll(),ne(ve=>ve+1)},className:"w-full"}),c.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round((N.opacity||1)*100),"%"]})]}),N.type==="text"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Text"}),c.jsx("input",{type:"text",value:N.text||"",onChange:q=>{N.set("text",q.target.value),n.current.renderAll(),ne(ve=>ve+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]},G):c.jsx("div",{className:"text-sm text-gray-500 text-center py-8",children:"Select an object to view its properties"})]})]}),L&&Ue&&c.jsx("div",{className:"fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[c.jsx("h2",{className:"text-2xl font-bold text-[#381914]",children:"Complete Your Custom Cake Order"}),c.jsx("button",{onClick:Wo,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold cursor-pointer",children:"×"})]}),c.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:c.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[c.jsxs("div",{className:`flex items-center ${K>=1?"text-[#AF524D]":"text-gray-400"}`,children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${K>=1?"bg-[#AF524D] text-white":"bg-gray-200 text-gray-500"}`,children:"1"}),c.jsx("span",{className:"ml-2 text-sm font-medium",children:"Order Details"})]}),c.jsx("div",{className:`w-8 h-1 ${K>=2?"bg-[#AF524D]":"bg-gray-200"}`}),c.jsxs("div",{className:`flex items-center ${K>=2?"text-[#AF524D]":"text-gray-400"}`,children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${K>=2?"bg-[#AF524D] text-white":"bg-gray-200 text-gray-500"}`,children:"2"}),c.jsx("span",{className:"ml-2 text-sm font-medium",children:"Review"})]}),c.jsx("div",{className:`w-8 h-1 ${K>=3?"bg-[#AF524D]":"bg-gray-200"}`}),c.jsxs("div",{className:`flex items-center ${K>=3?"text-[#AF524D]":"text-gray-400"}`,children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${K>=3?"bg-[#AF524D] text-white":"bg-gray-200 text-gray-500"}`,children:"3"}),c.jsx("span",{className:"ml-2 text-sm font-medium",children:"Success"})]})]})}),c.jsxs("div",{className:"p-6",children:[c.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("img",{src:Ue.dataURL,alt:"Custom Cake Design",className:"w-16 h-16 object-contain rounded-lg"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-[#381914]",children:"Custom Cake Design"}),c.jsx("p",{className:"text-sm text-gray-600",children:"₱5,000 (base price)"})]})]})}),K===1&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Quantity *"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{type:"button",onClick:()=>Me(Math.max(1,Ce-1)),className:"w-10 h-10 rounded-full border-2 border-[#AF524D] text-[#AF524D] hover:bg-[#AF524D] hover:text-white transition-colors flex items-center justify-center font-bold text-lg",children:"-"}),c.jsx("span",{className:"w-16 text-center font-semibold text-[#381914] text-lg",children:Ce}),c.jsx("button",{type:"button",onClick:()=>Me(Ce+1),className:"w-10 h-10 rounded-full border-2 border-[#AF524D] text-[#AF524D] hover:bg-[#AF524D] hover:text-white transition-colors flex items-center justify-center font-bold text-lg",children:"+"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Pickup/Delivery Date *"}),c.jsx("div",{className:"relative",children:c.jsxs("div",{className:"flex items-center gap-3 p-3 border-2 border-[#AF524D] rounded-lg bg-white",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"w-6 h-6 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),c.jsx("div",{className:"flex-1",children:c.jsx("input",{type:"date",value:M,onChange:q=>J(q.target.value),min:new Date().toISOString().split("T")[0],className:"w-full bg-transparent border-none outline-none text-[#381914] font-medium cursor-pointer",required:!0})})]})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Pickup/Delivery Time *"}),c.jsx("div",{className:"relative",children:c.jsxs("div",{className:"flex items-center gap-3 p-3 border-2 border-[#AF524D] rounded-lg bg-white",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"w-6 h-6 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsx("div",{className:"flex-1",children:c.jsx("input",{type:"time",value:ye,onChange:q=>te(q.target.value),className:"w-full bg-transparent border-none outline-none text-[#381914] font-medium cursor-pointer",required:!0})})]})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Order Type"}),c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"flex items-center gap-3 p-3 border-2 border-[#AF524D] rounded-lg bg-white cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>je(!ce),children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"w-6 h-6 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),c.jsx("div",{className:"flex-1",children:c.jsx("span",{className:"text-[#381914] font-medium",children:fe})}),c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:`w-5 h-5 text-[#AF524D] transition-transform ${ce?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),ce&&c.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border-2 border-[#AF524D] rounded-lg shadow-lg z-10",children:[c.jsx("div",{className:"p-3 hover:bg-[#AF524D] hover:text-white cursor-pointer transition-colors border-b border-gray-100",onClick:()=>{re("Pickup"),je(!1)},children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),c.jsx("span",{className:"font-medium",children:"Pickup"})]})}),c.jsx("div",{className:"p-3 hover:bg-[#AF524D] hover:text-white cursor-pointer transition-colors",onClick:()=>{re("Delivery"),je(!1)},children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),c.jsx("span",{className:"font-medium",children:"Delivery"})]})})]})]})]}),fe==="Delivery"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Delivery Address"}),c.jsx("textarea",{value:le,onChange:q=>de(q.target.value),placeholder:"Enter your complete delivery address...",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent resize-none"})]}),c.jsxs("div",{className:"flex gap-4 justify-end",children:[c.jsx("button",{onClick:Wo,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-full hover:bg-gray-400 transition-colors",children:"Cancel"}),c.jsx("button",{onClick:$c,disabled:!M||!ye||fe==="Delivery"&&!le,className:`px-6 py-2 rounded-full transition-colors ${!M||!ye||fe==="Delivery"&&!le?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-[#AF524D] text-white hover:bg-[#8B3D3A]"}`,children:"Next"})]})]}),K===2&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-[#381914] mb-4",children:"Review Your Order"}),c.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[c.jsx("h4",{className:"font-semibold text-[#381914] mb-4",children:"Order Summary"}),c.jsxs("div",{className:"space-y-3 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-medium",children:"Cake:"}),c.jsx("span",{children:"Custom Cake Design"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-medium",children:"Quantity:"}),c.jsx("span",{children:Ce})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-medium",children:"Price per cake:"}),c.jsx("span",{children:"₱5,000"})]}),c.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-2",children:[c.jsx("span",{className:"font-semibold",children:"Total Price:"}),c.jsxs("span",{className:"font-semibold",children:["₱",5e3*Ce]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-medium",children:"Date:"}),c.jsx("span",{children:M?new Date(M).toLocaleDateString():"Not selected"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-medium",children:"Time:"}),c.jsx("span",{children:ye?new Date(`2000-01-01T${ye}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"Not selected"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-medium",children:"Type:"}),c.jsx("span",{children:fe})]}),fe==="Delivery"&&le&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-medium",children:"Address:"}),c.jsx("span",{className:"text-right max-w-xs truncate",children:le})]})]})]}),c.jsxs("div",{className:"flex gap-4 justify-between items-center pt-4 border-t border-gray-200",children:[c.jsx("button",{onClick:Gc,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-full hover:bg-gray-400 transition-colors",children:"Back"}),c.jsx("button",{onClick:Yo,disabled:Te,className:`px-6 py-2 rounded-full transition-colors ${Te?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-[#AF524D] text-white hover:bg-[#8B3D3A]"}`,children:Te?"Placing Order...":"Place Order"})]})]}),K===3&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-[#381914] mb-4",children:"Order Successfully Placed!"}),c.jsxs("div",{className:"p-6 bg-green-50 border border-green-200 rounded-lg text-center",children:[c.jsx("div",{className:"flex items-center justify-center gap-3 mb-4",children:c.jsx("svg",{className:"w-12 h-12 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsx("h4",{className:"font-semibold text-green-800 text-xl mb-2",children:"Thank you for your order!"}),c.jsx("p",{className:"text-green-700 text-sm mb-4",children:"Your custom cake order has been successfully placed."})]}),c.jsx("div",{className:"flex gap-4 justify-center",children:c.jsx("button",{onClick:Wo,className:"px-6 py-2 bg-[#AF524D] text-white rounded-full hover:bg-[#8B3D3A] transition-colors",children:"Done"})})]})]})]})})]})},Mw=()=>{const[r,e]=C.useState([]),[t,s]=C.useState([]),[n,a]=C.useState(null),[l,d]=C.useState({id:null,field:null}),[h,f]=C.useState({}),[g,x]=C.useState(""),[v,b]=C.useState(""),[w,_]=C.useState(""),[T,S]=C.useState([]),[E,A]=C.useState(""),[O,D]=C.useState(!1);C.useEffect(()=>{(async()=>{const{data:ne,error:Q}=await xe.from("INVENTORY").select(`
          inven_id,
          stock_quantity,
          last_updated,
          ingred_id,
          INGREDIENT (
            ingred_name,
            unit
          )
        `);if(Q)console.error(Q);else{const ie=ne.map(L=>({inven_id:L.inven_id,quantity:L.stock_quantity,updated:L.last_updated,name:L.INGREDIENT?.ingred_name,unit:L.INGREDIENT?.unit,ingred_id:L.ingred_id}));e(ie)}})()},[]),C.useEffect(()=>{(async()=>{const{data:ne,error:Q}=await xe.from("INGREDIENT").select("ingred_id, ingred_name, unit").order("ingred_name");Q?console.error("Error fetching ingredients:",Q):(S(ne||[]),console.log("Available ingredients:",ne))})()},[]);const F=()=>{const G=`new-${Date.now()}`;s([...t,{inven_id:G,quantity:"0",updated:new Date().toISOString().split("T")[0],name:"Item Name",ingred_id:null,isNew:!0}])},B=async()=>{if(!n)return;if(n.toString().startsWith("new-"))s(t.filter(ne=>ne.inven_id!==n));else try{const{data:ne,error:Q}=await xe.from("INVENTORY").select("ingred_id").eq("inven_id",n).single();if(Q){console.error("Error fetching inventory record:",Q),_e.error(`Failed to fetch inventory record: ${Q.message}`,{duration:4e3,position:"top-center"});return}const ie=ne.ingred_id,{error:L}=await xe.from("INVENTORY").delete().eq("inven_id",n);if(L){console.error("Delete inventory error:",L),_e.error(`Failed to delete inventory item: ${L.message}`,{duration:4e3,position:"top-center"});return}const{data:$,error:K}=await xe.from("INVENTORY").select("inven_id").eq("ingred_id",ie);if(K)console.error("Error checking other inventory records:",K);else if(!$||$.length===0){console.log(`Deleting ingredient with ID ${ie} as it's no longer used`);const{error:pe}=await xe.from("INGREDIENT").delete().eq("ingred_id",ie);pe?console.error("Delete ingredient error:",pe):console.log(`Successfully deleted ingredient with ID ${ie}`)}else console.log(`Ingredient with ID ${ie} is still used in other inventory records, keeping it`);e(r.filter(pe=>pe.inven_id!==n))}catch(ne){console.error("Error in delete operation:",ne)}a(null)},P=async()=>{if(O)return;D(!0),console.log("=== SAVE CHANGES START ==="),console.log("New rows to save:",t),console.log("Edited rows to save:",h),console.log("Available ingredients:",T);for(const Q of t){if(console.log("Processing new row:",Q),!Q.name||!Q.quantity){console.warn("Skipping incomplete new row:",Q);continue}try{console.log(`Looking for ingredient: "${Q.name.trim()}"`);const{data:ie,error:L}=await xe.from("INGREDIENT").select("ingred_id, unit").ilike("ingred_name",Q.name.trim());if(L){console.error("Ingredient fetch error (insert):",L);continue}console.log("Found ingredients:",ie);let $,K=Q.unit||"pcs";if(!ie||ie.length===0){console.log(`Creating new ingredient: "${Q.name.trim()}" with unit: "${K}"`);const{data:M,error:J}=await xe.from("INGREDIENT").insert([{ingred_name:Q.name.trim(),unit:K}]).select("ingred_id").single();if(J){console.error("Error creating ingredient:",J);continue}$=M.ingred_id,console.log(`Created new ingredient with ID ${$} for "${Q.name}"`)}else{$=ie[0].ingred_id;const M=ie[0].unit;if(K!==M){console.log(`Updating unit for ingredient "${Q.name}" from "${M}" to "${K}"`);const{error:J}=await xe.from("INGREDIENT").update({unit:K}).eq("ingred_id",$);J&&console.error("Error updating ingredient unit:",J)}console.log(`Found existing ingredient ID ${$} for "${Q.name}"`)}const{error:pe}=await xe.from("INVENTORY").insert([{stock_quantity:parseFloat(Q.quantity),last_updated:new Date().toISOString().split("T")[0],ingred_id:$}]);pe?(console.error("Insert error:",pe),_e.error(`Failed to save inventory item "${Q.name}": ${pe.message}`,{duration:4e3,position:"top-center"})):console.log(`Successfully inserted new row for "${Q.name}"`)}catch(ie){console.error("Error processing new row:",ie)}}for(const[Q,ie]of Object.entries(h)){console.log(`Processing edited row ${Q}:`,ie),console.log("Values object keys:",Object.keys(ie)),console.log("Values object:",ie);const L=r.find(J=>J.inven_id===parseInt(Q));if(!L){console.warn(`Original row not found for ID ${Q}`);continue}const $={name:ie.name||L.name,quantity:ie.quantity!==void 0?ie.quantity:L.quantity,unit:ie.unit||L.unit||"pcs"};console.log(`Merged data for row ${Q}:`,$);const{quantity:K,name:pe,unit:M}=$;if(!pe||K===void 0){console.warn("Skipping incomplete edited row:",{id:Q,mergedData:$});continue}try{console.log(`Looking for ingredient: "${pe.trim()}"`);const{data:J,error:ye}=await xe.from("INGREDIENT").select("ingred_id, unit").ilike("ingred_name",pe.trim());if(ye){console.error("Ingredient fetch error (update):",ye);continue}console.log("Found ingredients:",J);let te,fe=M||"pcs";if(!J||J.length===0){console.log(`Creating new ingredient: "${pe.trim()}" with unit: "${fe}"`);const{data:le,error:de}=await xe.from("INGREDIENT").insert([{ingred_name:pe.trim(),unit:fe}]).select("ingred_id").single();if(de){console.error("Error creating ingredient:",de);continue}te=le.ingred_id,console.log(`Created new ingredient with ID ${te} for "${pe}"`)}else{te=J[0].ingred_id;const le=J[0].unit;if(fe!==le){console.log(`Updating unit for ingredient "${pe}" from "${le}" to "${fe}"`);const{error:de}=await xe.from("INGREDIENT").update({unit:fe}).eq("ingred_id",te);de&&console.error("Error updating ingredient unit:",de)}console.log(`Found existing ingredient ID ${te} for "${pe}"`)}const{error:re}=await xe.from("INVENTORY").update({stock_quantity:parseFloat(K),last_updated:new Date().toISOString().split("T")[0],ingred_id:te}).eq("inven_id",Q);re?(console.error(`Update error for inven_id ${Q}:`,re),_e.error(`Failed to update inventory item: ${re.message}`,{duration:4e3,position:"top-center"})):console.log(`Successfully updated row with inven_id ${Q}`)}catch(J){console.error("Error processing updated row:",J)}}f({}),s([]),d({id:null,field:null}),a(null),console.log("Refreshing inventory...");const{data:G,error:ne}=await xe.from("INVENTORY").select(`
        inven_id,
        stock_quantity,
        last_updated,
        ingred_id,
        INGREDIENT (
          ingred_name,
          unit
        )
      `);if(ne)console.error("Refresh fetch error:",ne);else if(G){const Q=G.map(ie=>({inven_id:ie.inven_id,quantity:ie.stock_quantity,updated:ie.last_updated,name:ie.INGREDIENT?.ingred_name,unit:ie.INGREDIENT?.unit,ingred_id:ie.ingred_id}));console.log("Inventory refreshed:",Q),e(Q)}console.log("=== SAVE CHANGES END ==="),_e.success("Inventory saved successfully!",{duration:3e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}),D(!1)},H=G=>{a(ne=>ne===G?null:G)},N=(G,ne,Q)=>{G.toString().startsWith("new-")?s(ie=>ie.map(L=>L.inven_id===G?{...L,[ne]:Q}:L)):f(ie=>({...ie,[G]:{...ie[G],[ne]:Q}}))},V=[...t,...r].filter(G=>(G.name||"").toLowerCase().includes(E.toLowerCase()));return c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 w-full border-2 border-[#AF524D] min-h-[80vh] max-h-[80vh] flex flex-col",children:[c.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center mb-8",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"Inventory Management"}),c.jsx("p",{className:"text-gray-600",children:"Manage your bakery ingredients and stock levels"})]}),c.jsx("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:c.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[c.jsx("input",{type:"text",placeholder:"Search by ingredient name...",value:E,onChange:G=>A(G.target.value),className:"w-full sm:w-80 border-2 border-gray-200 rounded-xl px-5 py-3 pl-12 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base"}),c.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})})]}),c.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50 rounded-xl border border-gray-200",children:c.jsx("div",{className:"overflow-auto h-full max-h-[45vh] pb-4",children:c.jsxs("table",{className:"w-full border-collapse table-fixed",children:[c.jsx("thead",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white sticky top-0 z-20",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/4",children:"Item Name"}),c.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/4",children:"Quantity"}),c.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/4",children:"Unit"}),c.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/4",children:"Last Updated"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:V.map(G=>{const ne=n===G.inven_id,Q=h[G.inven_id]||{},ie=l.id===G.inven_id&&l.field==="name";return c.jsxs("tr",{className:`transition-all duration-200 cursor-pointer ${ne?"bg-blue-50 border-l-4 border-l-blue-500 shadow-md":"hover:bg-gray-100 border-l-4 border-l-transparent"}`,onClick:()=>H(G.inven_id),children:[c.jsx("td",{className:"py-6 px-6 align-top",children:c.jsx("div",{className:"space-y-2",children:ie?c.jsx("input",{type:"text",className:"border-2 border-gray-200 rounded-lg px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D]",value:g,onChange:L=>x(L.target.value),onBlur:()=>{N(G.inven_id,"name",g),d({id:null,field:null})},autoFocus:!0}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"font-semibold text-gray-900 text-base",children:Q.name??G.name}),c.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:L=>{L.stopPropagation(),d({id:G.inven_id,field:"name"}),x(Q.name??G.name)},children:"Edit"})]})})}),c.jsx("td",{className:"py-6 px-6 align-top",children:c.jsx("div",{className:"space-y-2",children:l.id===G.inven_id&&l.field==="quantity"?c.jsx("input",{type:"number",className:"border-2 border-gray-200 rounded-lg px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D]",value:v,onChange:L=>b(L.target.value),onBlur:()=>{N(G.inven_id,"quantity",v),d({id:null,field:null})},autoFocus:!0}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Q.quantity??G.quantity}),c.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:L=>{L.stopPropagation(),d({id:G.inven_id,field:"quantity"}),b(Q.quantity??G.quantity)},children:"Edit"})]})})}),c.jsx("td",{className:"py-6 px-6 align-top",children:c.jsx("div",{className:"space-y-2",children:l.id===G.inven_id&&l.field==="unit"?c.jsx("input",{type:"text",className:"border-2 border-gray-200 rounded-lg px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D]",value:w,onChange:L=>_(L.target.value),onBlur:()=>{N(G.inven_id,"unit",w),d({id:null,field:null})},autoFocus:!0}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800",children:Q.unit??G.unit??"pcs"}),c.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:L=>{L.stopPropagation(),d({id:G.inven_id,field:"unit"}),_(Q.unit??G.unit??"pcs")},children:"Edit"})]})})}),c.jsx("td",{className:"py-6 px-6 align-top",children:c.jsx("div",{className:"space-y-2",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-gray-600",children:new Date(G.updated).toLocaleDateString()}),c.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})]})})})]},G.inven_id)})})]})})}),c.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-between gap-4",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{className:"bg-[#AF524D] hover:bg-[#8B3A3A] text-white px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:F,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Item"]})}),c.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${n?"bg-red-600 hover:bg-red-700 text-white hover:shadow-xl transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:B,disabled:!n,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Item"]})})]}),c.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${O?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white hover:shadow-xl transform hover:-translate-y-0.5"}`,onClick:P,disabled:O,children:c.jsx("div",{className:"flex items-center gap-2",children:O?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving Changes..."]}):c.jsxs(c.Fragment,{children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save All Changes"]})})})]})]})},BL=r=>r?r.startsWith("http://")||r.startsWith("https://")?r:xe.storage.from("cake").getPublicUrl(r).data.publicUrl:null,zL=()=>{const[r,e]=C.useState([]),[t,s]=C.useState([]),[n,a]=C.useState(null),[l,d]=C.useState({id:null,field:null}),[h,f]=C.useState({}),[g,x]=C.useState(""),[v,b]=C.useState(""),[w,_]=C.useState(""),[T,S]=C.useState(""),[E,A]=C.useState(null),[O,D]=C.useState(""),[F,B]=C.useState(!1),[P,H]=C.useState(null),[N,V]=C.useState(""),[G,ne]=C.useState(!1),[Q,ie]=C.useState(""),[L,$]=C.useState("");C.useEffect(()=>{(async()=>{const{data:je,error:Te}=await xe.from("CAKE").select("*").order("name");Te?console.error("Error fetching cakes:",Te):(console.log("Fetched cakes from database:",je),e(je||[]))})()},[]);const K=ce=>{a(je=>je===ce?null:ce)},pe=()=>{const ce=`new-${Date.now()}`;s([...t,{id:ce,name:"New Cake",theme:"Theme",description:"Description",tier:1,price:0,cake_img:"",isNew:!0}])},M=async()=>{if(!n)return;if(n.toString().startsWith("new-"))console.log("🗑️ Deleting new cake from local state:",n),s(t.filter(je=>je.id!==n)),a(null),_e.success("Cake deleted successfully");else try{console.log("🗑️ Deleting existing cake from database:",n);const je=r.find(we=>we.cake_id===n),{error:Te}=await xe.from("CAKE").delete().eq("cake_id",n);if(Te){console.error("❌ Database deletion error:",Te),_e.error(`Failed to delete cake: ${Te.message}`);return}if(console.log("✅ Cake deleted from database successfully"),je?.cake_img)try{console.log("🗑️ Attempting to delete cake image from storage:",je.cake_img);let we=je.cake_img;if(je.cake_img.includes("/storage/v1/object/public/cake/"))we=je.cake_img.split("/storage/v1/object/public/cake/")[1],console.log("📁 Extracted file path from URL:",we);else if(je.cake_img.startsWith("http")){const Ue=je.cake_img.split("/cake/");Ue.length>1&&(we=Ue[1],console.log("📁 Extracted file path from alternative URL:",we))}if(we&&we!==je.cake_img){console.log("🗑️ Deleting cake image from storage bucket:",we);const{error:Ue}=await xe.storage.from("cake").remove([we]);Ue?console.warn("⚠️ Storage deletion warning:",Ue):console.log("✅ Cake image deleted from storage successfully")}else console.log("⚠️ Could not extract valid file path for storage deletion")}catch(we){console.warn("⚠️ Storage deletion error:",we)}e(r.filter(we=>we.cake_id!==n)),a(null),_e.success("Cake deleted successfully")}catch(je){console.error("❌ Unexpected error during deletion:",je),_e.error("Failed to delete cake")}},J=(ce,je,Te)=>{console.log(`handleFieldChange called: id=${ce}, field=${je}, value=${Te}`);let we=Te;je==="tier"?we=parseInt(Te)||1:je==="price"&&(we=parseFloat(Te)||0),ce&&ce.toString().startsWith("new-")?s(Ee=>Ee.map($e=>$e.id===ce?{...$e,[je]:we}:$e)):f(Ee=>{const $e={...Ee,[ce]:{...Ee[ce],[je]:we}};return console.log(`Updated editedValues for ID ${ce}:`,$e[ce]),$e})},ye=(ce,je)=>{H(ce),V(je),B(!0)},te=()=>{P&&(J(P,"description",N),B(!1),H(null),V(""))},fe=()=>{B(!1),H(null),V("")},re=async(ce,je)=>{const Te=ce.target.files[0];if(Te)try{A(je);const Ue=[...r,...t].find(gs=>gs.cake_id===je||gs.id===je)?.name||"cake",Ee=Te.name.split(".").pop(),Se=`${Ue.replace(/[^a-zA-Z0-9]/g,"_").toLowerCase()}_${Date.now()}.${Ee}`,{error:tt}=await xe.storage.from("cake").upload(Se,Te);if(tt){console.error("Error uploading image:",tt),A(null);return}const{data:{publicUrl:$t}}=xe.storage.from("cake").getPublicUrl(Se);J(je,"cake_img",$t),A(null),console.log("Image uploaded successfully:",$t),console.log("Stored URL in database:",$t),_e.success("Image uploaded successfully!",{duration:2e3,position:"top-center"})}catch(we){console.error("Error in image upload:",we),A(null),_e.error("Failed to upload image. Please try again.",{duration:4e3,position:"top-center"})}},le=async()=>{if(G)return;ne(!0),console.log("=== SAVE CAKES CHANGES START ==="),console.log("New rows to save:",t),console.log("Edited rows to save:",h);for(const Te of t){if(console.log("Processing new cake:",Te),!Te.name){console.warn("Skipping incomplete new cake:",Te);continue}try{const{error:we}=await xe.from("CAKE").insert([{name:Te.name,theme:Te.theme,description:Te.description,tier:parseInt(Te.tier)||1,price:parseFloat(Te.price)||0,cake_img:Te.cake_img||""}]);we?(console.error("Insert error:",we),_e.error(`Failed to save cake "${Te.name}": ${we.message}`,{duration:4e3,position:"top-center"})):console.log(`Successfully inserted new cake: "${Te.name}"`)}catch(we){console.error("Error processing new cake:",we)}}console.log("All editedValues before processing:",h);for(const[Te,we]of Object.entries(h)){if(console.log(`Processing edited cake ${Te}:`,we),!Te||Te==="undefined"){console.warn("Skipping row with invalid ID:",Te);continue}const Ue=r.find(Ee=>Ee.cake_id===parseInt(Te)||Ee.cake_id===Te);console.log(`Original row for ID ${Te}:`,Ue);try{const Ee={name:we.name!==void 0?we.name:Ue?.name,theme:we.theme!==void 0?we.theme:Ue?.theme,description:we.description!==void 0?we.description:Ue?.description,tier:we.tier!==void 0?parseInt(we.tier)||1:Ue?.tier,price:we.price!==void 0?parseFloat(we.price)||0:Ue?.price,cake_img:we.cake_img!==void 0?we.cake_img:Ue?.cake_img||""};console.log(`Update data for cake ID ${Te}:`,Ee);const{error:$e}=await xe.from("CAKE").update(Ee).eq("cake_id",Te);$e?(console.error(`Update error for cake ID ${Te}:`,$e),_e.error(`Failed to update cake: ${$e.message}`,{duration:4e3,position:"top-center"})):console.log(`Successfully updated cake with ID ${Te}`)}catch(Ee){console.error("Error processing updated cake:",Ee)}}f({}),s([]),d({id:null,field:null}),a(null),console.log("Refreshing cakes...");const{data:ce,error:je}=await xe.from("CAKE").select("*").order("name");je?console.error("Refresh fetch error:",je):ce&&(console.log("Cakes refreshed:",ce),e(ce)),console.log("=== SAVE CAKES CHANGES END ==="),_e.success("Cakes saved successfully!",{duration:3e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}),ne(!1)},de=[...t,...r].filter(ce=>{const je=ce.name||"",Te=ce.theme||"",we=ce.tier||1,Ue=je.toLowerCase().includes(O.toLowerCase()),Ee=Q===""||Te.toLowerCase().includes(Q.toLowerCase()),$e=L===""||we.toString()===L;return Ue&&Ee&&$e}),Ce=[...new Set([...r,...t].map(ce=>ce.theme).filter(Boolean))],Me=[...new Set([...r,...t].map(ce=>ce.tier).filter(Boolean))].sort((ce,je)=>ce-je);return c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 w-full border-2 border-[#AF524D] min-h-[80vh] max-h-[80vh] flex flex-col",children:[c.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center mb-8",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"Cakes Management"}),c.jsx("p",{className:"text-gray-600",children:"Manage your cake catalog and designs"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:[c.jsxs("div",{className:"relative",children:[c.jsxs("select",{value:Q,onChange:ce=>ie(ce.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-3 pl-10 pr-8 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base appearance-none bg-white",children:[c.jsx("option",{value:"",children:"All Themes"}),Ce.map(ce=>c.jsx("option",{value:ce,children:ce},ce))]}),c.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),c.jsx("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("select",{value:L,onChange:ce=>$(ce.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-3 pl-10 pr-8 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base appearance-none bg-white",children:[c.jsx("option",{value:"",children:"All Tiers"}),Me.map(ce=>c.jsxs("option",{value:ce,children:[ce," Tier",ce>1?"s":""]},ce))]}),c.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),c.jsx("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Search by cake name...",value:O,onChange:ce=>D(ce.target.value),className:"border-2 border-gray-200 rounded-xl px-5 py-3 pl-12 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base"}),c.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})]}),c.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50 rounded-xl border border-gray-200",children:c.jsx("div",{className:"overflow-auto h-full max-h-[45vh] pb-4",children:c.jsxs("table",{className:"w-full border-collapse table-fixed",children:[c.jsx("thead",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white sticky top-0 z-20",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Cake Name"}),c.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Theme"}),c.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Description"}),c.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Tiers"}),c.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Price"}),c.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Cake Image"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:de.map(ce=>{const je=ce.cake_id||ce.id,Te=n===je,we=h[je]||{},Ue=l.id===je&&l.field==="name";return c.jsxs("tr",{className:`transition-all duration-200 cursor-pointer ${Te?"bg-blue-50 border-l-4 border-l-blue-500 shadow-md":"hover:bg-gray-100 border-l-4 border-l-transparent"}`,onClick:()=>K(je),children:[c.jsx("td",{className:"py-2 px-4",children:c.jsx("div",{className:"flex items-center gap-2",children:Ue?c.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-40",value:g,onChange:Ee=>x(Ee.target.value),onBlur:()=>{J(je,"name",g),d({id:null,field:null})},autoFocus:!0}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex-grow truncate",children:we.name??ce.name}),c.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:Ee=>{Ee.stopPropagation(),d({id:je,field:"name"}),x(we.name??ce.name)},children:c.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-name-${je}`)})]})})}),c.jsx("td",{className:"py-2 px-4",children:c.jsx("div",{className:"flex items-center gap-2",children:l.id===je&&l.field==="theme"?c.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-20",value:v,onChange:Ee=>b(Ee.target.value),onBlur:()=>{J(je,"theme",v),d({id:null,field:null})},autoFocus:!0}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex-grow truncate",children:we.theme??ce.theme}),c.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:Ee=>{Ee.stopPropagation(),d({id:je,field:"theme"}),b(we.theme??ce.theme)},children:c.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-theme-${je}`)})]})})}),c.jsx("td",{className:"py-2 px-4",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex-grow truncate",children:we.description??ce.description}),c.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:Ee=>{Ee.stopPropagation(),ye(je,we.description??ce.description)},children:c.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-description-${je}`)})]})}),c.jsx("td",{className:"py-2 px-4",children:c.jsx("div",{className:"flex items-center gap-2",children:l.id===je&&l.field==="tier"?c.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-16",value:T,onChange:Ee=>S(Ee.target.value),onBlur:()=>{J(je,"tier",parseInt(T)||1),d({id:null,field:null})},autoFocus:!0}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"truncate",children:we.tier??ce.tier}),c.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:Ee=>{Ee.stopPropagation(),d({id:je,field:"tier"}),S(we.tier??ce.tier)},children:c.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-tier-${je}`)})]})})}),c.jsx("td",{className:"py-2 px-4",children:c.jsx("div",{className:"flex items-center gap-2",children:l.id===je&&l.field==="price"?c.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-16",value:w,onChange:Ee=>_(Ee.target.value),onBlur:()=>{J(je,"price",parseFloat(w)||0),d({id:null,field:null})},autoFocus:!0}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"truncate",children:["₱",we.price??ce.price]}),c.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:Ee=>{Ee.stopPropagation(),d({id:je,field:"price"}),_(we.price??ce.price)},children:c.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-price-${je}`)})]})})}),c.jsx("td",{className:"py-2 px-4",children:c.jsx("div",{className:"relative",children:E===je?c.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded border-2 border-dashed border-gray-300 flex items-center justify-center",children:c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#AF524D]"}),c.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Uploading..."})]})}):we.cake_img||ce.cake_img?c.jsxs("div",{className:"relative w-16 h-16 rounded overflow-hidden border border-gray-300 group",children:[c.jsx("img",{src:BL(we.cake_img||ce.cake_img),alt:"Cake",className:"w-full h-full object-cover",onError:Ee=>{Ee.target.style.display="none",Ee.target.nextSibling.style.display="flex"}}),c.jsx("div",{className:"absolute inset-0 bg-gray-200 flex items-center justify-center hidden",children:c.jsx("span",{className:"text-xs text-gray-500",children:"No Image"})}),c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 flex items-center justify-center",children:c.jsxs("label",{className:"cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Ee=>re(Ee,je),onClick:Ee=>Ee.stopPropagation()})]})})]}):c.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded border-2 border-dashed border-gray-300 flex items-center justify-center hover:border-[#AF524D] transition-colors duration-200",children:c.jsxs("label",{className:"cursor-pointer flex flex-col items-center",children:[c.jsx("svg",{className:"w-6 h-6 text-gray-400 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),c.jsx("span",{className:"text-xs text-gray-500",children:"Upload"}),c.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Ee=>re(Ee,je),onClick:Ee=>Ee.stopPropagation()})]})})})})]},je)})})]})})}),c.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-between gap-4",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{className:"bg-[#AF524D] hover:bg-[#8B3A3A] text-white px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:pe,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Cake"]})}),c.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${n?"bg-red-600 hover:bg-red-700 text-white hover:shadow-xl transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:M,disabled:!n,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Cake"]})})]}),c.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${G?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white hover:shadow-xl transform hover:-translate-y-0.5"}`,onClick:le,disabled:G,children:c.jsx("div",{className:"flex items-center gap-2",children:G?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving Changes..."]}):c.jsxs(c.Fragment,{children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save All Changes"]})})})]}),F&&c.jsx("div",{className:"fixed inset-0 bg-gray/50 backdrop-blur-sm flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-w-md border-4 border-[#AF524D] shadow-2xl",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4 text-[#381914]",children:"Edit Description"}),c.jsx("textarea",{value:N,onChange:ce=>V(ce.target.value),className:"w-full h-32 p-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent",placeholder:"Enter cake description...",autoFocus:!0}),c.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[c.jsx("button",{onClick:fe,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",children:"Cancel"}),c.jsx("button",{onClick:te,className:"px-4 py-2 bg-[#AF524D] text-white rounded-lg hover:bg-[#8B3D3A] transition-colors cursor-pointer",children:"Save"})]})]})})]})},Xl=r=>r?r.startsWith("http://")||r.startsWith("https://")?r:xe.storage.from("cake").getPublicUrl(r).data.publicUrl:null,UL=()=>{const[r,e]=C.useState([]),[t,s]=C.useState([]),[n,a]=C.useState(null),[l,d]=C.useState({id:null,field:null}),[h,f]=C.useState({}),[g,x]=C.useState(""),[v,b]=C.useState(""),[w,_]=C.useState(""),[T,S]=C.useState(""),[E,A]=C.useState(""),[O,D]=C.useState(""),[F,B]=C.useState(""),[P,H]=C.useState(""),[N,V]=C.useState(""),[G,ne]=C.useState([]),[Q,ie]=C.useState([]),[L,$]=C.useState(""),[K,pe]=C.useState(!1),[M,J]=C.useState(!1),[ye,te]=C.useState(null),[fe,re]=C.useState(!1),[le,de]=C.useState(null),[Ce,Me]=C.useState(!1),[ce,je]=C.useState(null),[Te,we]=C.useState(null),[Ue,Ee]=C.useState(!1);C.useEffect(()=>{(async()=>{const{data:Le,error:be}=await xe.from("ORDER").select(`
          order_id,
          order_date,
          delivery_method,
          order_schedule,
          delivery_address,
          order_status,
          cus_id,
          CUSTOMER (
            cus_id,
            cus_fname,
            cus_lname,
            cus_celno,
            email
          ),
          PAYMENT (
            payment_id,
            payment_method,
            amount_paid,
            payment_date,
            payment_status,
            receipt
          ),
          "CAKE-ORDERS" (
            co_id,
            quantity,
            cake_id,
            CAKE (
              cake_id,
              name,
              cake_img,
              price,
              theme,
              tier,
              description
            )
          )
        `);if(console.log("Query result:",{data:Le,error:be}),Le&&Le.length>0&&(console.log("Raw database response - first order:",Le[0]),console.log("Customer data from first order:",Le[0].customer),console.log("Cake orders from first order:",Le[0]["CAKE-ORDERS"]),console.log("Testing different customer relationship names:"),console.log("data[0].CUSTOMER:",Le[0].CUSTOMER),console.log("data[0].customer:",Le[0].customer),console.log("data[0].Customer:",Le[0].Customer),console.log("data[0].customers:",Le[0].customers)),be)console.error("Database error:",be);else{const me=Le.flatMap(ue=>!ue["CAKE-ORDERS"]||ue["CAKE-ORDERS"].length===0?[{order_id:ue.order_id,co_id:null,customer_id:ue.cus_id,customer:ue.CUSTOMER?`${ue.CUSTOMER.cus_fname} ${ue.CUSTOMER.cus_lname}`:"Unknown Customer",customer_email:ue.CUSTOMER?.email||"N/A",customer_phone:ue.CUSTOMER?.cus_celno||"N/A",cake:"No Cake Assigned",cake_img:null,cake_img_url:null,cake_price:0,cake_theme:"N/A",cake_tier:"N/A",cake_description:"N/A",scheduled_date:ue.order_schedule,order_type:ue.delivery_method,delivery_address:ue.delivery_address||"N/A",cake_id:null,quantity:0,amount_paid:ue.PAYMENT?.[0]?.amount_paid||0,payment_date:ue.PAYMENT?.[0]?.payment_date,payment_status:ue.PAYMENT?.[0]?.payment_status||"Pending",payment_method:ue.PAYMENT?.[0]?.payment_method||"Cash",receipt_path:ue.PAYMENT?.[0]?.receipt,order_status:ue.order_status,order_date:ue.order_date}]:ue["CAKE-ORDERS"].map(rt=>({order_id:ue.order_id,co_id:rt.co_id,customer_id:ue.cus_id,customer:ue.CUSTOMER?`${ue.CUSTOMER.cus_fname} ${ue.CUSTOMER.cus_lname}`:"Unknown Customer",customer_email:ue.CUSTOMER?.email||"N/A",customer_phone:ue.CUSTOMER?.cus_celno||"N/A",cake:rt.CAKE?.name||"Unknown Cake",cake_img:rt.CAKE?.cake_img,cake_img_url:Xl(rt.CAKE?.cake_img),cake_price:rt.CAKE?.price||0,cake_theme:rt.CAKE?.theme||"N/A",cake_tier:rt.CAKE?.tier||"N/A",cake_description:rt.CAKE?.description||"N/A",scheduled_date:ue.order_schedule,order_type:ue.delivery_method,delivery_address:ue.delivery_address||"N/A",cake_id:rt.cake_id,quantity:rt.quantity||0,amount_paid:ue.PAYMENT?.[0]?.amount_paid||0,payment_date:ue.PAYMENT?.[0]?.payment_date,payment_status:ue.PAYMENT?.[0]?.payment_status||"Pending",payment_method:ue.PAYMENT?.[0]?.payment_method||"Cash",receipt_path:ue.PAYMENT?.[0]?.receipt,order_status:ue.order_status,order_date:ue.order_date})));me.length>0&&console.log("Customer info from first row:",{customer:me[0].customer,customer_id:me[0].customer_id,customer_email:me[0].customer_email,customer_phone:me[0].customer_phone}),e(me)}})()},[]),C.useEffect(()=>{(async()=>{const{data:Le,error:be}=await xe.from("CAKE").select("cake_id, name, cake_img, price, theme, tier, description").order("name");be?console.error("Error fetching cakes:",be):(ne(Le||[]),console.log("Available cakes:",Le))})()},[]),C.useEffect(()=>{(async()=>{const{data:Le,error:be}=await xe.from("CUSTOMER").select("cus_id, cus_fname, cus_lname, email, cus_celno").order("cus_fname");be?console.error("Error fetching customers:",be):(ie(Le||[]),console.log("Available customers:",Le))})()},[]);const $e=()=>{const ae=`new-${Date.now()}`;s([...t,{order_id:ae,co_id:ae,customer_id:null,customer:"Select Customer",customer_email:"",customer_phone:"",cake:"Select Cake",cake_img:null,cake_img_url:null,cake_price:0,cake_theme:"",cake_tier:"",cake_description:"",scheduled_date:new Date().toISOString().split("T")[0],order_type:"pickup",delivery_address:"Delivery Address",cake_id:null,quantity:1,amount_paid:0,payment_date:new Date().toISOString().split("T")[0],payment_status:"Pending",payment_method:"Cash",receipt_path:null,order_status:"Pending",order_date:new Date().toISOString().split("T")[0],isNew:!0}])},Se=async()=>{if(!n)return;if(n.toString().startsWith("new-"))console.log("🗑️ Deleting new order from local state:",n),s(t.filter(Le=>Le.order_id!==n)),a(null),_e.success("Order deleted successfully");else try{console.log("🗑️ Deleting existing order from database:",n);const Le=r.find(me=>me.order_id===n),{error:be}=await xe.from("CAKE-ORDERS").delete().eq("order_id",n);if(be){console.error("❌ Database deletion error:",be),_e.error(`Failed to delete order: ${be.message}`);return}if(console.log("✅ Order deleted from database successfully"),Le?.receipt_path)try{console.log("🗑️ Attempting to delete receipt from storage:",Le.receipt_path);let me=Le.receipt_path;if(Le.receipt_path.includes("/storage/v1/object/public/receipts/"))me=Le.receipt_path.split("/storage/v1/object/public/receipts/")[1],console.log("📁 Extracted file path from URL:",me);else if(Le.receipt_path.startsWith("http")){const ue=Le.receipt_path.split("/receipts/");ue.length>1&&(me=ue[1],console.log("📁 Extracted file path from alternative URL:",me))}if(me&&me!==Le.receipt_path){console.log("🗑️ Deleting receipt from storage bucket:",me);const{error:ue}=await xe.storage.from("receipts").remove([me]);ue?console.warn("⚠️ Storage deletion warning:",ue):console.log("✅ Receipt deleted from storage successfully")}else console.log("⚠️ Could not extract valid file path for storage deletion")}catch(me){console.warn("⚠️ Storage deletion error:",me)}e(r.filter(me=>me.order_id!==n)),a(null),_e.success("Order deleted successfully")}catch(Le){console.error("❌ Unexpected error during deletion:",Le),_e.error("Failed to delete order")}},tt=async()=>{pe(!0);try{for(const be of t){const me=G.find(yr=>yr.name===be.cake),ue=me?me.cake_id:null,rt=Q.find(yr=>`${yr.cus_fname} ${yr.cus_lname}`===be.customer),Br=rt?rt.cus_id:null,{error:fa}=await xe.from("CAKE-ORDERS").insert({customer_id:Br,cake_id:ue,scheduled_date:be.scheduled_date,order_type:be.order_type,delivery_address:be.delivery_address,amount_paid:parseFloat(be.amount_paid)||0,payment_date:be.payment_date,payment_status:be.payment_status,payment_method:be.payment_method,receipt_path:be.receipt_path});if(fa){console.error("Error inserting new order:",fa),_e.error("Failed to save new order"),pe(!1);return}}for(const[be,me]of Object.entries(h)){if(be.toString().startsWith("new-"))continue;const ue={};if(me.scheduled_date!==void 0&&(ue.scheduled_date=me.scheduled_date),me.order_type!==void 0&&(ue.order_type=me.order_type),me.delivery_address!==void 0&&(ue.delivery_address=me.delivery_address),me.amount_paid!==void 0&&(ue.amount_paid=parseFloat(me.amount_paid)||0),me.payment_date!==void 0&&(ue.payment_date=me.payment_date),me.payment_status!==void 0&&(ue.payment_status=me.payment_status),me.payment_method!==void 0&&(ue.payment_method=me.payment_method),me.receipt_path!==void 0&&(ue.receipt_path=me.receipt_path),me.cake!==void 0){const rt=G.find(Br=>Br.name===me.cake);ue.cake_id=rt?rt.cake_id:null}if(me.customer!==void 0){const rt=Q.find(Br=>`${Br.cus_fname} ${Br.cus_lname}`===me.customer);ue.customer_id=rt?rt.cus_id:null}if(Object.keys(ue).length>0){const{error:rt}=await xe.from("CAKE-ORDERS").update(ue).eq("order_id",be);if(rt){console.error("Error updating order:",rt),_e.error("Failed to update order"),pe(!1);return}}}const{data:ae,error:Le}=await xe.from("ORDER").select(`
          order_id,
          order_date,
          delivery_method,
          order_schedule,
          delivery_address,
          order_status,
          cus_id,
          CUSTOMER (
            cus_id,
            cus_fname,
            cus_lname,
            cus_celno,
            email
          ),
          PAYMENT (
            payment_id,
            payment_method,
            amount_paid,
            payment_date,
            payment_status,
            receipt
          ),
          "CAKE-ORDERS" (
            co_id,
            quantity,
            cake_id,
            CAKE (
              cake_id,
              name,
              cake_img,
              price,
              theme,
              tier,
              description
            )
          )
        `);if(Le)console.error("Error refreshing data:",Le);else{const be=ae.flatMap(me=>!me["CAKE-ORDERS"]||me["CAKE-ORDERS"].length===0?[{order_id:me.order_id,co_id:null,customer_id:me.cus_id,customer:me.CUSTOMER?`${me.CUSTOMER.cus_fname} ${me.CUSTOMER.cus_lname}`:"Unknown Customer",customer_email:me.CUSTOMER?.email||"N/A",customer_phone:me.CUSTOMER?.cus_celno||"N/A",cake:"No Cake Assigned",cake_img:null,cake_img_url:null,cake_price:0,cake_theme:"N/A",cake_tier:"N/A",cake_description:"N/A",scheduled_date:me.order_schedule,order_type:me.delivery_method,delivery_address:me.delivery_address||"N/A",cake_id:null,quantity:0,amount_paid:me.PAYMENT?.[0]?.amount_paid||0,payment_date:me.PAYMENT?.[0]?.payment_date,payment_status:me.PAYMENT?.[0]?.payment_status||"Pending",payment_method:me.PAYMENT?.[0]?.payment_method||"Cash",receipt_path:me.PAYMENT?.[0]?.receipt,order_status:me.order_status,order_date:me.order_date}]:me.CAKE-ORDERS.map(ue=>({order_id:me.order_id,co_id:ue.co_id,customer_id:me.cus_id,customer:me.CUSTOMER?`${me.CUSTOMER.cus_fname} ${me.CUSTOMER.cus_lname}`:"Unknown Customer",customer_email:me.CUSTOMER?.email||"N/A",customer_phone:me.CUSTOMER?.cus_celno||"N/A",cake:ue.CAKE?.name||"Unknown Cake",cake_img:ue.CAKE?.cake_img,cake_img_url:Xl(ue.CAKE?.cake_img),cake_price:ue.CAKE?.price||0,cake_theme:ue.CAKE?.theme||"N/A",cake_tier:ue.CAKE?.tier||"N/A",cake_description:ue.CAKE?.description||"N/A",scheduled_date:me.order_schedule,order_type:me.delivery_method,delivery_address:me.delivery_address||"N/A",cake_id:ue.cake_id,quantity:ue.quantity||0,amount_paid:me.PAYMENT?.[0]?.amount_paid||0,payment_date:me.PAYMENT?.[0]?.payment_date,payment_status:me.PAYMENT?.[0]?.payment_status||"Pending",payment_method:me.PAYMENT?.[0]?.payment_method||"Cash",receipt_path:me.PAYMENT?.[0]?.receipt,order_status:me.order_status,order_date:me.order_date})));e(be)}s([]),f({}),a(null),_e.success("Changes saved successfully")}catch(ae){console.error("Error saving changes:",ae),_e.error("Failed to save changes")}finally{pe(!1)}},$t=ae=>{a(ae)},gs=(ae,Le,be)=>{if(f(me=>({...me,[ae]:{...me[ae],[Le]:be}})),Le==="cake"){const me=G.find(ue=>ue.name===be);me&&f(ue=>({...ue,[ae]:{...ue[ae],cake_img_url:Xl(me.cake_img),cake_price:me.price,cake_theme:me.theme,cake_tier:me.tier,cake_description:me.description}}))}},js=ae=>{ye&&(gs(ye,"cake",ae.name),f(Le=>({...Le,[ye]:{...Le[ye],cake_img_url:Xl(ae.cake_img),cake_price:ae.price,cake_theme:ae.theme,cake_tier:ae.tier,cake_description:ae.description}}))),J(!1),te(null)},Js=ae=>{if(le){const Le=`${ae.cus_fname} ${ae.cus_lname}`;gs(le,"customer",Le),f(be=>({...be,[le]:{...be[le],customer_email:ae.email,customer_phone:ae.cus_celno}}))}re(!1),de(null)},Vs=async()=>{if(!(!Te||!ce)){Ee(!0);try{const ae=Te.name.split(".").pop(),Le=`receipt_${ce}_${Date.now()}.${ae}`,{error:be}=await xe.storage.from("receipts").upload(Le,Te);if(be)throw be;const{data:{publicUrl:me}}=xe.storage.from("receipts").getPublicUrl(Le),{error:ue}=await xe.from("CAKE-ORDERS").update({receipt_path:me}).eq("order_id",ce);if(ue)throw ue;e(r.map(rt=>rt.order_id===ce?{...rt,receipt_path:me}:rt)),_e.success("Receipt uploaded successfully"),Me(!1),je(null),we(null)}catch(ae){console.error("Error uploading receipt:",ae),_e.error("Failed to upload receipt")}finally{Ee(!1)}}},er=[...t,...r].filter(ae=>{const Le=ae.customer||"",be=ae.cake||"",me=ae.cake_theme||"",ue=ae.cake_tier||"";return Le.toLowerCase().includes(L.toLowerCase())||be.toLowerCase().includes(L.toLowerCase())||me.toLowerCase().includes(L.toLowerCase())||ue.toLowerCase().includes(L.toLowerCase())});return c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 w-full border-2 border-[#AF524D] min-h-[80vh] max-h-[80vh] flex flex-col",children:[c.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center mb-8",children:[c.jsx("div",{className:"flex-1",children:c.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"Cake Orders Management"})}),c.jsx("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:c.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[c.jsx("input",{type:"text",placeholder:"Search by customer, cake, theme, or tier...",value:L,onChange:ae=>$(ae.target.value),className:"w-full sm:w-80 border-2 border-gray-200 rounded-xl px-5 py-3 pl-12 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base"}),c.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})})]}),c.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50 rounded-xl border border-gray-200",children:c.jsx("div",{className:"overflow-auto h-full max-h-[45vh] pb-4",children:c.jsxs("table",{className:"w-full border-collapse table-fixed",children:[c.jsx("thead",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white sticky top-0 z-20",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Customer Details"}),c.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Cake Information"}),c.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Order Details"}),c.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Schedule & Delivery"}),c.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Payment Details"}),c.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Receipt"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:er.map(ae=>{const Le=n===ae.order_id,be=h[ae.order_id]||{},me=l.id===ae.order_id&&l.field==="scheduled_date";return l.id===ae.order_id&&l.field,l.id===ae.order_id&&l.field,l.id===ae.order_id&&l.field,l.id===ae.order_id&&l.field,l.id===ae.order_id&&l.field,l.id===ae.order_id&&l.field,c.jsxs("tr",{className:`transition-all duration-200 cursor-pointer ${Le?"bg-blue-50 border-l-4 border-l-blue-500 shadow-md":"hover:bg-gray-100 border-l-4 border-l-transparent"}`,onClick:()=>$t(ae.order_id),children:[c.jsx("td",{className:"py-6 px-6 align-top",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"font-semibold text-gray-900 text-base",children:be.customer??ae.customer}),c.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium px-3 py-1 rounded-lg hover:bg-blue-50 transition-colors",onClick:ue=>{ue.stopPropagation(),de(ae.order_id),re(!0)},children:"Edit"})]}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),be.customer_email??ae.customer_email]}),c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),be.customer_phone??ae.customer_phone]})]})]})}),c.jsx("td",{className:"py-6 px-6 align-top",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"w-16 h-16 flex-shrink-0",children:[be.cake_img_url||ae.cake_img_url?c.jsx("img",{src:be.cake_img_url||ae.cake_img_url,alt:be.cake||ae.cake||"Cake",className:"w-full h-full object-cover rounded-lg border-2 border-gray-200 shadow-sm",onError:ue=>{ue.target.style.display="none",ue.target.nextSibling.style.display="flex"}}):null,(!(be.cake_img_url||ae.cake_img_url)||(be.cake_img_url||ae.cake_img_url)==="")&&c.jsx("div",{className:"w-full h-full bg-gray-200 rounded-lg border-2 border-gray-300 flex items-center justify-center text-gray-500 text-xs font-medium",children:"No Image"})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"font-semibold text-gray-900 text-base truncate",children:be.cake??ae.cake}),c.jsxs("p",{className:"text-lg font-bold text-[#AF524D]",children:["₱",(be.cake_price??ae.cake_price).toLocaleString()]}),c.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:be.cake_description??ae.cake_description})]})]}),c.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium px-3 py-1 rounded-lg hover:bg-blue-50 transition-colors",onClick:ue=>{ue.stopPropagation(),te(ae.order_id),J(!0)},children:"Change Cake"})]})}),c.jsx("td",{className:"py-6 px-6 align-top",children:c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9zm9-3h-2v3H8V6h8z"})}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Quantity:"})]}),c.jsx("p",{className:"text-base font-medium text-gray-900",children:be.quantity??ae.quantity}),c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l3-7m3 7V4M12 10V2m0 14a2 2 0 100-4 2 2 0 000 4zm-8-6a3 3 0 11-6 0 3 3 0 016 0z"})}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Theme:"})]}),c.jsx("p",{className:"text-base font-medium text-gray-900",children:be.cake_theme??ae.cake_theme}),c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H7a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2"})}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tier:"})]}),c.jsx("p",{className:"text-base font-medium text-gray-900",children:be.cake_tier??ae.cake_tier}),c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Order Status:"})]}),c.jsx("p",{className:"text-base font-medium text-gray-900",children:be.order_status??ae.order_status})]})}),c.jsx("td",{className:"py-6 px-6 align-top",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Scheduled Date:"})]}),me?c.jsx("input",{type:"date",className:"border-2 border-gray-200 rounded-lg px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D]",value:w,onChange:ue=>_(ue.target.value),onBlur:()=>{gs(ae.order_id,"scheduled_date",w),d({id:null,field:null})},autoFocus:!0}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"text-base font-medium text-gray-900",children:be.scheduled_date?new Date(be.scheduled_date).toLocaleDateString():new Date(ae.scheduled_date).toLocaleDateString()}),c.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:ue=>{ue.stopPropagation(),d({id:ae.order_id,field:"scheduled_date"}),_(be.scheduled_date??ae.scheduled_date)},children:"Edit"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Order Type:"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${(be.order_type??ae.order_type)==="Pickup"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:be.order_type??ae.order_type}),c.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:ue=>{ue.stopPropagation(),d({id:ae.order_id,field:"order_type"}),S(be.order_type??ae.order_type)},children:"Edit"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Delivery Address:"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"text-sm text-gray-600 max-w-32 truncate",children:be.delivery_address??ae.delivery_address}),c.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:ue=>{ue.stopPropagation(),d({id:ae.order_id,field:"delivery_address"}),A(be.delivery_address??ae.delivery_address)},children:"Edit"})]})]})]})}),c.jsx("td",{className:"py-6 px-6 align-top",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Amount:"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("p",{className:"text-xl font-bold text-[#AF524D]",children:["₱",(be.amount_paid??ae.amount_paid).toLocaleString()]}),c.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:ue=>{ue.stopPropagation(),d({id:ae.order_id,field:"amount_paid"}),D(be.amount_paid??ae.amount_paid)},children:"Edit"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m2 0h1m-1 0h1m1 0h1m-1 0h1m1 0h1m-1 0h1m1 0h1M7 15h1m2 0h1m-1 0h1m1 0h1m-1 0h1m1 0h1m-1 0h1m1 0h1"})}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Payment Method:"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm font-medium",children:be.payment_method??ae.payment_method}),c.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:ue=>{ue.stopPropagation(),d({id:ae.order_id,field:"payment_method"}),B(be.payment_method??ae.payment_method)},children:"Edit"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Payment Status:"})]}),c.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${(be.payment_status??ae.payment_status)==="Paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:be.payment_status??ae.payment_status})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Payment Date:"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:be.payment_date?new Date(be.payment_date).toLocaleDateString():ae.payment_date?new Date(ae.payment_date).toLocaleDateString():"Not specified"})]})]})}),c.jsx("td",{className:"py-6 px-6 align-top",children:c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"text-center",children:be.receipt_path??ae.receipt_path?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsx("span",{className:"text-sm font-medium text-green-700",children:"Receipt Uploaded"})]}):c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"No Receipt"})]})}),c.jsx("button",{className:"w-full text-blue-600 hover:text-blue-800 text-sm font-medium px-4 py-2 rounded-lg hover:bg-blue-50 transition-colors border border-blue-200",onClick:ue=>{ue.stopPropagation(),je(ae.order_id),Me(!0)},children:be.receipt_path??ae.receipt_path?"Change Receipt":"Upload Receipt"})]})})]},ae.order_id)})})]})})}),c.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-between gap-4",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{className:"bg-[#AF524D] hover:bg-[#8B3A3A] text-white px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:$e,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Order"]})}),c.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${n?"bg-red-600 hover:bg-red-700 text-white hover:shadow-xl transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:Se,disabled:!n,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Order"]})})]}),c.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${K?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white hover:shadow-xl transform hover:-translate-y-0.5"}`,onClick:tt,disabled:K,children:c.jsx("div",{className:"flex items-center gap-2",children:K?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving Changes..."]}):c.jsxs(c.Fragment,{children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save All Changes"]})})})]}),M&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl p-8 w-full max-w-6xl max-h-[90vh] overflow-y-auto border-2 border-[#AF524D] shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center mb-8",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-[#381914]",children:"Select a Cake"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Choose from available cakes in the catalog"})]}),c.jsx("button",{onClick:()=>{J(!1),te(null)},className:"text-gray-500 hover:text-gray-700 text-3xl font-bold cursor-pointer hover:bg-gray-100 rounded-full w-10 h-10 flex items-center justify-center transition-colors",children:"×"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:G.map(ae=>c.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-4 cursor-pointer hover:border-[#AF524D] hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1",onClick:()=>js(ae),children:[c.jsxs("div",{className:"aspect-square mb-4",children:[ae.cake_img?c.jsx("img",{src:Xl(ae.cake_img),alt:ae.name,className:"w-full h-full object-cover rounded-lg border-2 border-gray-200",onError:Le=>{Le.target.style.display="none",Le.target.nextSibling.style.display="flex"}}):null,(!ae.cake_img||ae.cake_img==="")&&c.jsx("div",{className:"w-full h-full bg-gray-200 rounded-lg border-2 border-gray-300 flex items-center justify-center text-gray-500 text-sm font-medium",children:"No Image"})]}),c.jsx("h4",{className:"font-semibold text-gray-800 text-center text-sm mb-2 truncate",children:ae.name}),c.jsxs("div",{className:"space-y-1 text-center",children:[c.jsxs("p",{className:"text-lg font-bold text-[#AF524D]",children:["₱",ae.price?.toLocaleString()||"0"]}),c.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-600",children:[c.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:ae.theme}),c.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full",children:[ae.tier," Tier"]})]}),c.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:ae.description})]})]},ae.cake_id))}),c.jsx("div",{className:"mt-8 flex justify-end",children:c.jsx("button",{onClick:()=>{J(!1),te(null)},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-xl hover:bg-gray-400 transition-colors font-medium",children:"Cancel Selection"})})]})}),fe&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl p-8 w-full max-w-3xl max-h-[90vh] overflow-y-auto border-2 border-[#AF524D] shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center mb-8",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-[#381914]",children:"Select a Customer"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Choose from registered customers"})]}),c.jsx("button",{onClick:()=>{re(!1),de(null)},className:"text-gray-500 hover:text-gray-700 text-3xl font-bold cursor-pointer hover:bg-gray-100 rounded-full w-10 h-10 flex items-center justify-center transition-colors",children:"×"})]}),c.jsx("div",{className:"space-y-4",children:Q.map(ae=>c.jsx("div",{className:"border-2 border-gray-200 rounded-xl p-6 cursor-pointer hover:border-[#AF524D] hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1",onClick:()=>Js(ae),children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("h4",{className:"font-semibold text-gray-800 text-lg mb-2",children:[ae.cus_fname," ",ae.cus_lname]}),c.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),ae.email]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),ae.cus_celno]})]})]}),c.jsx("div",{className:"text-blue-600",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},ae.cus_id))}),c.jsx("div",{className:"mt-8 flex justify-end",children:c.jsx("button",{onClick:()=>{re(!1),de(null)},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-xl hover:bg-gray-400 transition-colors font-medium",children:"Cancel Selection"})})]})}),Ce&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl p-8 w-full max-w-md border-2 border-[#AF524D] shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-[#381914]",children:"Upload Receipt"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Upload payment receipt for this order"})]}),c.jsx("button",{onClick:()=>{Me(!1),je(null),we(null)},className:"text-gray-500 hover:text-gray-700 text-3xl font-bold cursor-pointer hover:bg-gray-100 rounded-full w-10 h-10 flex items-center justify-center transition-colors",children:"×"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Select Receipt File"}),c.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-[#AF524D] transition-colors",children:[c.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:ae=>we(ae.target.files[0]),className:"w-full opacity-0 absolute inset-0 cursor-pointer"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:c.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsxs("div",{className:"text-sm text-gray-600",children:[c.jsx("span",{className:"font-medium text-[#AF524D]",children:"Click to upload"})," or drag and drop"]}),c.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, PDF up to 10MB"})]})]}),Te&&c.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-green-800 font-medium",children:["Selected: ",Te.name]})})]}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx("button",{onClick:()=>{Me(!1),je(null),we(null)},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-xl hover:bg-gray-400 transition-colors font-medium",children:"Cancel"}),c.jsx("button",{onClick:Vs,disabled:!Te||Ue,className:`px-6 py-3 rounded-xl font-medium transition-all duration-200 ${!Te||Ue?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}`,children:Ue?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):"Upload Receipt"})]})]})]})})]})},Jl=r=>({"cake base":"cake base",icing:"icing",topping:"topping"})[r]||"misc",Ug=(r,e=null)=>{if(console.log("🔗 getPublicImageUrl called with path:",r,"and type:",e),!r)return console.log("❌ No path provided, returning null"),null;if(r.startsWith("http://")||r.startsWith("https://"))return console.log("✅ Path is already a full URL:",r),r;let t=r;if(!r.includes("/")&&e){const n=Jl(e);n!=="misc"&&(t=`${n}/${r}`,console.log("📁 Added folder to path:",t))}const s=xe.storage.from("asset").getPublicUrl(t).data.publicUrl;return console.log("🔄 Generated public URL:",s),s},VL=()=>{const{session:r}=zn(),[e,t]=C.useState([]),[s,n]=C.useState([]),[a,l]=C.useState(null),[d,h]=C.useState({id:null,field:null}),[f,g]=C.useState({}),[x,v]=C.useState(""),[b,w]=C.useState(""),[_,T]=C.useState(""),[S,E]=C.useState(""),[A,O]=C.useState(!1),[D,F]=C.useState(!1),[B,P]=C.useState(null),[H,N]=C.useState(null),[V,G]=C.useState(!1),[ne,Q]=C.useState(null),ie=["cake base","icing","topping"];C.useEffect(()=>{(async()=>{if(!r?.user?.id)return;const{data:le,error:de}=await xe.from("ADMIN").select("admin_id").eq("admin_uid",r.user.id).single();de?console.error("❌ Error fetching admin ID:",de):(console.log("✅ Current admin ID:",le.admin_id),Q(le.admin_id))})()},[r]),C.useEffect(()=>{(async()=>{console.log("🔍 Fetching assets from database...");const{data:le,error:de}=await xe.from("ASSET").select("*").order("asset_id");if(de)console.error("❌ Database error:",de),_e.error("Failed to fetch assets");else{console.log("✅ Raw data from database:",le);const Ce=le.map(Me=>{const ce=Ug(Me.src,Me.type);return console.log(`🖼️ Asset ${Me.asset_id}:`,{originalSrc:Me.src,publicUrl:ce,type:Me.type}),{asset_id:Me.asset_id,src:Me.src,src_url:ce,type:Me.type,admin_id:Me.admin_id}});console.log("📋 Mapped rows:",Ce),t(Ce)}})()},[]),C.useEffect(()=>()=>{te()},[s,e]);const L=()=>{const re=`new-${Date.now()}`;n([...s,{asset_id:re,src:"",src_url:null,type:"cake base",admin_id:ne,isNew:!0}])},$=async()=>{if(!a)return;if(a.toString().startsWith("new-"))console.log("🗑️ Deleting new asset from local state:",a),n(s.filter(le=>le.asset_id!==a)),l(null),_e.success("Asset deleted successfully");else try{console.log("🗑️ Deleting existing asset from database:",a);const le=e.find(Ce=>Ce.asset_id===a),{error:de}=await xe.from("ASSET").delete().eq("asset_id",a);if(de){console.error("❌ Database deletion error:",de),_e.error(`Failed to delete asset: ${de.message}`);return}if(console.log("✅ Asset deleted from database successfully"),le?.src)try{console.log("🗑️ Attempting to delete file from storage:",le.src);let Ce=le.src;if(le.src.includes("/storage/v1/object/public/asset/"))Ce=le.src.split("/storage/v1/object/public/asset/")[1],console.log("📁 Extracted file path from URL:",Ce);else if(le.src.startsWith("http")){const Me=le.src.split("/asset/");Me.length>1&&(Ce=Me[1],console.log("📁 Extracted file path from alternative URL:",Ce))}if(Ce&&Ce!==le.src){console.log("🗑️ Deleting file from storage bucket:",Ce);const{error:Me}=await xe.storage.from("asset").remove([Ce]);Me?console.warn("⚠️ Storage deletion warning:",Me):console.log("✅ File deleted from storage successfully")}else console.log("⚠️ Could not extract valid file path for storage deletion")}catch(Ce){console.warn("⚠️ Storage deletion error:",Ce)}t(e.filter(Ce=>Ce.asset_id!==a)),l(null),_e.success("Asset deleted successfully")}catch(le){console.error("❌ Unexpected error during deletion:",le),_e.error("Failed to delete asset")}},K=async()=>{O(!0);try{console.log("💾 Starting save process..."),console.log("⬆️ Uploading local files to storage...");for(const de of s)if(de.localFile){console.log(`📤 Uploading file for asset ${de.asset_id}...`);const Ce=f[de.asset_id]||{},Me=Ce.type||de.type;console.log(`📂 Asset type: ${Me} (edited: ${!!Ce.type})`);const ce=Jl(Me);console.log(`📁 Using folder: ${ce}`);const je=de.localFile.name.split(".").pop(),Te=`asset_${Date.now()}_${Math.random().toString(36).substr(2,9)}.${je}`,we=`${ce}/${Te}`;console.log(`📄 Full file path: ${we}`);const{data:Ue,error:Ee}=await xe.storage.from("asset").upload(we,de.localFile);if(Ee){console.error("Error uploading file:",Ee),_e.error(`Failed to upload file: ${Ee.message}`),O(!1);return}const{data:{publicUrl:$e}}=xe.storage.from("asset").getPublicUrl(we);de.src_url&&de.src_url.startsWith("blob:")&&URL.revokeObjectURL(de.src_url),de.src=$e,de.src_url=$e,de.type=Me,delete de.localFile,console.log(`✅ File uploaded successfully: ${$e}`)}for(const de of e)if(de.localFile){console.log(`📤 Uploading file for existing asset ${de.asset_id}...`);const Ce=f[de.asset_id]||{},Me=Ce.type||de.type;console.log(`📂 Asset type: ${Me} (edited: ${!!Ce.type})`);const ce=Jl(Me);console.log(`📁 Using folder: ${ce}`);const je=de.localFile.name.split(".").pop(),Te=`asset_${Date.now()}_${Math.random().toString(36).substr(2,9)}.${je}`,we=`${ce}/${Te}`;console.log(`📄 Full file path: ${we}`);const{data:Ue,error:Ee}=await xe.storage.from("asset").upload(we,de.localFile);if(Ee){console.error("Error uploading file:",Ee),_e.error(`Failed to upload file: ${Ee.message}`),O(!1);return}const{data:{publicUrl:$e}}=xe.storage.from("asset").getPublicUrl(we);de.src_url&&de.src_url.startsWith("blob:")&&URL.revokeObjectURL(de.src_url),de.src=$e,de.src_url=$e,de.type=Me,delete de.localFile,console.log(`✅ File uploaded successfully: ${$e}`)}console.log("💾 Saving new assets to database...");for(const de of s){const{error:Ce}=await xe.from("ASSET").insert({src:de.src,type:de.type,admin_id:de.admin_id});if(Ce){console.error("Error inserting new asset:",Ce),_e.error("Failed to save new asset"),O(!1);return}}console.log("🔄 Updating existing assets...");for(const[de,Ce]of Object.entries(f)){if(de.toString().startsWith("new-"))continue;const Me={};let ce=!1,je=null,Te=null;if(Ce.type!==void 0){const we=e.find(Ue=>Ue.asset_id===parseInt(de));if(we&&we.src){const Ue=we.type,Ee=Ce.type;if(Ue!==Ee){console.log(`📁 Type changed from "${Ue}" to "${Ee}" - moving file...`);let $e=we.src;$e.includes("/storage/v1/object/public/asset/")?$e=$e.split("/storage/v1/object/public/asset/")[1]:$e.includes("/asset/")&&($e=$e.split("/asset/")[1]);const Se=$e.split("/").pop();Te=`${Jl(Ee)}/${Se}`,je=$e,ce=!0,console.log(`📂 Moving file from: ${je} to: ${Te}`)}}}if(Ce.src!==void 0&&(Me.src=Ce.src),Ce.type!==void 0&&(Me.type=Ce.type),ce&&je&&Te)try{const{data:we,error:Ue}=await xe.storage.from("asset").copy(je,Te);if(Ue){console.error("❌ Error copying file:",Ue),_e.error("Failed to move file to new folder"),O(!1);return}console.log("✅ File copied successfully"),Me.src=Te;const{error:Ee}=await xe.storage.from("asset").remove([je]);Ee?console.error("❌ Error deleting old file:",Ee):console.log("✅ Old file deleted successfully")}catch(we){console.error("❌ Error during file move operation:",we),_e.error("Failed to move file to new folder"),O(!1);return}if(Object.keys(Me).length>0){const{error:we}=await xe.from("ASSET").update(Me).eq("asset_id",de);if(we){console.error("Error updating asset:",we),_e.error("Failed to update asset"),O(!1);return}}}console.log("🔄 Refreshing data...");const{data:re,error:le}=await xe.from("ASSET").select("*").order("asset_id");if(le)console.error("Error refreshing data:",le);else{const de=re.map(Ce=>({asset_id:Ce.asset_id,src:Ce.src,src_url:Ug(Ce.src,Ce.type),type:Ce.type,admin_id:Ce.admin_id}));t(de)}n([]),g({}),l(null),_e.success("Changes saved successfully")}catch(re){console.error("Error saving changes:",re),_e.error("Failed to save changes")}finally{O(!1)}},pe=re=>{l(re)},M=(re,le,de)=>{g(Ce=>({...Ce,[re]:{...Ce[re],[le]:de}}))},J=async()=>{if(!(!H||!B)){G(!0);try{console.log("🚀 Starting local file processing..."),console.log("📁 Upload file:",H),console.log("🎯 Selected asset ID:",B);const re=URL.createObjectURL(H);console.log("🖼️ Created local preview URL:",re),B.toString().startsWith("new-")?(console.log("📝 This is a new asset, storing file locally..."),n(s.map(de=>de.asset_id===B?{...de,src:H.name,src_url:re,localFile:H}:de))):(console.log("📝 This is an existing asset, storing file locally..."),t(e.map(de=>de.asset_id===B?{...de,src:H.name,src_url:re,localFile:H}:de))),_e.success('File selected successfully! Click "Save All Changes" to upload to storage.'),ye()}catch(re){console.error("❌ Error processing file:",re);const le=re.message||"Unknown error occurred";_e.error(`Failed to process file: ${le}`)}finally{G(!1)}}},ye=()=>{F(!1),P(null),N(null),G(!1);const re=document.getElementById("asset-upload-input");re&&(re.value="")},te=()=>{s.forEach(re=>{re.src_url&&re.src_url.startsWith("blob:")&&URL.revokeObjectURL(re.src_url)}),e.forEach(re=>{re.src_url&&re.src_url.startsWith("blob:")&&URL.revokeObjectURL(re.src_url)})},fe=[...s,...e].filter(re=>{const le=re.src||"",de=re.type||"",Ce=le.toLowerCase().includes(_.toLowerCase())||de.toLowerCase().includes(_.toLowerCase()),Me=S===""||de.toLowerCase().includes(S.toLowerCase());return Ce&&Me});return c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 w-full border-2 border-[#AF524D] min-h-[80vh] max-h-[80vh] flex flex-col",children:[c.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center mb-8",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"Assets Management"}),c.jsx("p",{className:"text-gray-600",children:"Manage your custom cake assets and decorations"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:[c.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[c.jsx("input",{type:"text",placeholder:"Search by source or type...",value:_,onChange:re=>T(re.target.value),className:"w-full sm:w-80 border-2 border-gray-200 rounded-xl px-5 py-3 pl-12 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base"}),c.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),c.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[c.jsxs("select",{value:S,onChange:re=>E(re.target.value),className:"w-full sm:w-48 border-2 border-gray-200 rounded-xl px-4 py-3 pr-10 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base appearance-none bg-white",children:[c.jsx("option",{value:"",children:"All Types"}),ie.map(re=>c.jsx("option",{value:re,children:re.charAt(0).toUpperCase()+re.slice(1).replace("_"," ")},re))]}),c.jsx("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})]}),c.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50 rounded-xl border border-gray-200",children:c.jsx("div",{className:"overflow-auto h-full max-h-[45vh] pb-4",children:c.jsxs("table",{className:"w-full border-collapse table-fixed",children:[c.jsx("thead",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white sticky top-0 z-20",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/3",children:"Preview"}),c.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/3",children:"Source"}),c.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/3",children:"Type"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:fe.map(re=>{const le=a===re.asset_id,de=f[re.asset_id]||{},Ce=d.id===re.asset_id&&d.field==="src",Me=d.id===re.asset_id&&d.field==="type";return c.jsxs("tr",{className:`transition-all duration-200 cursor-pointer ${le?"bg-blue-50 border-l-4 border-l-blue-500 shadow-md":"hover:bg-gray-100 border-l-4 border-l-transparent"}`,onClick:()=>pe(re.asset_id),children:[c.jsx("td",{className:"py-6 px-6 align-top",children:c.jsxs("div",{className:"relative w-20 h-20 rounded overflow-hidden border border-gray-300 group",children:[c.jsx("img",{src:de.src_url||re.src_url||Ug(de.src||re.src,de.type||re.type),alt:"Asset preview",className:"w-full h-full object-cover",onError:ce=>{ce.target.style.display="none",ce.target.nextSibling.style.display="flex"}}),c.jsx("div",{className:"absolute inset-0 bg-gray-200 flex items-center justify-center hidden",children:c.jsx("span",{className:"text-xs text-gray-500",children:"No Image"})}),(re.localFile||de.src_url&&de.src_url.startsWith("blob:"))&&c.jsx("div",{className:"absolute top-1 right-1 bg-blue-500 text-white text-xs px-1 py-0.5 rounded",children:"Local"}),c.jsx("div",{className:"absolute bottom-1 left-1 bg-gray-800 text-white text-xs px-1 py-0.5 rounded opacity-75",children:Jl(de.type||re.type)})]})}),c.jsx("td",{className:"py-6 px-6 align-top",children:c.jsxs("div",{className:"space-y-2",children:[Ce?c.jsx("input",{type:"text",className:"border-2 border-gray-200 rounded-lg px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D]",value:x,onChange:ce=>v(ce.target.value),onBlur:()=>{M(re.asset_id,"src",x),h({id:null,field:null})},autoFocus:!0}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"text-sm text-gray-600 max-w-48 truncate",children:(de.src??re.src)||"No source"}),c.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:ce=>{ce.stopPropagation(),h({id:re.asset_id,field:"src"}),v(de.src??re.src)},children:"Edit"})]}),c.jsx("button",{className:"w-full text-blue-600 hover:text-blue-800 text-sm font-medium px-3 py-2 rounded-lg hover:bg-blue-50 transition-colors border border-blue-200",onClick:ce=>{ce.stopPropagation(),P(re.asset_id),F(!0)},children:"Upload File"})]})}),c.jsx("td",{className:"py-6 px-6 align-top",children:c.jsx("div",{className:"space-y-2",children:Me?c.jsx("select",{className:"border-2 border-gray-200 rounded-lg px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D]",value:b,onChange:ce=>w(ce.target.value),onBlur:()=>{M(re.asset_id,"type",b),h({id:null,field:null})},autoFocus:!0,children:ie.map(ce=>c.jsx("option",{value:ce,children:ce.charAt(0).toUpperCase()+ce.slice(1).replace("_"," ")},ce))}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${(de.type??re.type)==="cake base"?"bg-amber-100 text-amber-800":(de.type??re.type)==="icing"?"bg-pink-100 text-pink-800":(de.type??re.type)==="topping"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:(de.type??re.type)?.charAt(0).toUpperCase()+(de.type??re.type)?.slice(1).replace("_"," ")||"Unknown"}),c.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:ce=>{ce.stopPropagation(),h({id:re.asset_id,field:"type"}),w(de.type??re.type)},children:"Edit"})]})})})]},re.asset_id)})})]})})}),c.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-between gap-4",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{className:"bg-[#AF524D] hover:bg-[#8B3A3A] text-white px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:L,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Asset"]})}),c.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${a?"bg-red-600 hover:bg-red-700 text-white hover:shadow-xl transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:$,disabled:!a,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Asset"]})})]}),c.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${A?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white hover:shadow-xl transform hover:-translate-y-0.5"}`,onClick:K,disabled:A,children:c.jsx("div",{className:"flex items-center gap-2",children:A?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving Changes..."]}):c.jsxs(c.Fragment,{children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save All Changes"]})})})]}),D&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl p-8 w-full max-w-md border-2 border-[#AF524D] shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-[#381914]",children:"Upload Asset"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Upload a new asset file"})]}),c.jsx("button",{onClick:ye,className:"text-gray-500 hover:text-gray-700 text-3xl font-bold cursor-pointer hover:bg-gray-100 rounded-full w-10 h-10 flex items-center justify-center transition-colors",children:"×"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Select Asset File"}),c.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-[#AF524D] transition-colors relative cursor-pointer",onClick:()=>{const re=document.getElementById("asset-upload-input");re&&re.click()},children:[c.jsx("input",{type:"file",id:"asset-upload-input",accept:"image/*,.svg,.png,.jpg,.jpeg,.gif",onChange:re=>{const le=re.target.files[0];N(le)},className:"hidden"}),c.jsxs("div",{className:"space-y-2 pointer-events-none",children:[c.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:c.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsxs("div",{className:"text-sm text-gray-600",children:[c.jsx("span",{className:"font-medium text-[#AF524D]",children:"Click to upload"})," or drag and drop"]}),c.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, SVG, GIF up to 10MB"})]})]}),H&&c.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-green-800 font-medium",children:["Selected: ",H.name]})})]}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx("button",{onClick:ye,className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-xl hover:bg-gray-400 transition-colors font-medium",children:"Cancel"}),c.jsx("button",{onClick:J,disabled:!H||V,className:`px-6 py-3 rounded-xl font-medium transition-all duration-200 ${!H||V?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}`,children:V?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):"Upload Asset"})]})]})]},B)})]})},Vg=({children:r,allowedRoles:e})=>{const{session:t,userRole:s,loading:n}=C.useContext(Xp);return n?c.jsx(Po,{message:"Checking authentication..."}):!t||!t.user?c.jsx(Y1,{to:"/login"}):e.includes(s)?r:c.jsx(Y1,{to:"/"})},IL=()=>{const r=Qs(),e=r.pathname.split("/"),t=e.indexOf("adminpage"),s=t!==-1&&e[t+1]?e[t+1]:"inventory";return console.log("🔍 AdminSidebar Debug:",{fullPath:r.pathname,pathSegments:e,adminIndex:t,currentPath:s,decodedPath:decodeURIComponent(s)}),c.jsx("aside",{className:"w-52 bg-white border-4 border-[#AF524D] py-4 px-2 rounded-2xl max-h-fit",children:c.jsx("ul",{className:"space-y-2",children:[{name:"Inventory",path:"inventory"},{name:"Cake Orders",path:"cake orders"},{name:"Cakes",path:"cakes"},{name:"Custom Cake Assets",path:"custom cake assets"}].map((n,a)=>{const l=decodeURIComponent(s),d=l===n.path;return console.log(`🔍 Checking ${n.name}:`,{optPath:n.path,currentPath:s,decodedCurrentPath:l,isActive:d}),c.jsx(It,{to:`/adminpage/${n.path}`,className:`block text-sm px-3 py-2 rounded border transition-all duration-200 ${d?"bg-[#AF524D] text-white border-[#AF524D] shadow-md transform scale-105":"text-gray-700 hover:bg-[#DFBFA6] border-gray-300 hover:border-[#AF524D] hover:text-[#AF524D]"}`,children:n.name},a)})})})},HL=()=>c.jsxs("section",{className:"flex flex-col md:flex-row gap-4 p-4 bg-[#F8E6B4] min-h-screen",children:[c.jsx(IL,{}),c.jsx("div",{className:"flex-1",children:c.jsx(NT,{})})]}),$L=()=>{const[r,e]=C.useState(null),[t,s]=C.useState(!0),{session:n,signOut:a}=zn(),l=Bn();C.useEffect(()=>{(async()=>{if(!n?.user?.id)return;const{data:f,error:g}=await xe.from("ADMIN").select("*").eq("admin_uid",n.user.id).single();g?(console.error("Admin not found:",g.message),e(null)):e(f),s(!1)})()},[n]);const d=async()=>{try{await a(),l("/login"),setTimeout(()=>window.scrollTo(0,0),100)}catch(h){console.error("Error signing out:",h)}};return t?c.jsx(Po,{message:"Loading profile..."}):r?c.jsx("section",{className:"bg-gradient-to-t from-[#424220] to-[#F8E6B4] min-h-screen flex flex-col items-center justify-center py-20 px-10",children:c.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] w-full p-10 rounded-2xl shadow-2xl max-w-xl",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-black",children:"Admin Profile"}),c.jsx("button",{onClick:d,className:"bg-red-500 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded cursor-pointer",children:"Sign Out"})]}),c.jsx("p",{className:"text-lg text-gray-500",children:"View your admin account information"}),c.jsx("hr",{className:"my-6 border-gray-400"}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-gray-500 font-semibold mb-2",children:"Username"}),c.jsx("p",{className:"text-black text-lg",children:r.username})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-gray-500 font-semibold mb-2",children:"Email"}),c.jsx("p",{className:"text-black text-lg",children:r.admin_email})]})]})}):c.jsx("p",{className:"text-center text-red-500 text-lg",children:"No admin data found."})},GL=()=>{const{pathname:r}=Qs();C.useEffect(()=>{const e=()=>{window.scrollTo?window.scrollTo(0,0):window.scroll?window.scroll(0,0):document.documentElement.scrollTop!==void 0?document.documentElement.scrollTop=0:document.body.scrollTop!==void 0&&(document.body.scrollTop=0)};e();const t=setTimeout(e,100);return()=>clearTimeout(t)},[r])};function WL(){const r=Qs();return c.jsx(oD,{mode:"wait",children:c.jsxs(OT,{location:r,children:[c.jsx(is,{path:"/signup",element:c.jsx(ys,{children:c.jsx(GO,{})})}),c.jsx(is,{path:"/login",element:c.jsx(ys,{children:c.jsx(KO,{})})}),c.jsx(is,{path:"/reset-password",element:c.jsx(ys,{children:c.jsx(ZO,{})})}),c.jsx(is,{path:"/",element:c.jsx(ys,{children:c.jsx(XO,{})})}),c.jsx(is,{path:"/aboutus",element:c.jsx(ys,{children:c.jsx(QO,{})})}),c.jsx(is,{path:"/contactus",element:c.jsx(ys,{children:c.jsx(hM,{})})}),c.jsx(is,{path:"/cakecatalog",element:c.jsx(ys,{children:c.jsx(Y8,{})})}),c.jsx(is,{path:"/cart",element:c.jsx(ys,{children:c.jsx(q8,{})})}),c.jsx(is,{path:"/cakecustomization",element:c.jsx(ys,{children:c.jsx(FL,{})})}),c.jsx(is,{path:"/profile",element:c.jsx(Vg,{allowedRoles:["customer"],children:c.jsx(ys,{children:c.jsx(G8,{})})})}),c.jsxs(is,{path:"/adminpage",element:c.jsx(Vg,{allowedRoles:["admin"],children:c.jsx(HL,{})}),children:[c.jsx(is,{index:!0,element:c.jsx(ys,{children:c.jsx(Mw,{})})}),c.jsx(is,{path:"inventory",element:c.jsx(ys,{children:c.jsx(Mw,{})})}),c.jsx(is,{path:"cakes",element:c.jsx(ys,{children:c.jsx(zL,{})})}),c.jsx(is,{path:"cake orders",element:c.jsx(ys,{children:c.jsx(UL,{})})}),c.jsx(is,{path:"custom cake assets",element:c.jsx(ys,{children:c.jsx(VL,{})})})]}),c.jsx(is,{path:"/admin/profile",element:c.jsx(Vg,{allowedRoles:["admin"],children:c.jsx(ys,{children:c.jsx($L,{})})})})]},r.pathname)})}function YL(){return GL(),c.jsxs(c.Fragment,{children:[c.jsx(aE,{position:"top-center",reverseOrder:!1}),c.jsx(HO,{}),c.jsx(WL,{}),c.jsx(fM,{}),c.jsx($O,{})]})}B3.createRoot(document.getElementById("root")).render(c.jsx(pA,{children:c.jsx(s5,{children:c.jsx(YL,{})})}));
