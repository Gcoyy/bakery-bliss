(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function cv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function qM(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function s(){var i=!1;try{i=this instanceof s}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var i=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:function(){return n[s]}})}),t}var gp={exports:{}},Hl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gw;function WM(){if(gw)return Hl;gw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,i,a){var l=null;if(a!==void 0&&(l=""+a),i.key!==void 0&&(l=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:n,type:s,key:l,ref:i!==void 0?i:null,props:a}}return Hl.Fragment=e,Hl.jsx=t,Hl.jsxs=t,Hl}var pw;function XM(){return pw||(pw=1,gp.exports=WM()),gp.exports}var p=XM(),pp={exports:{}},Gl={},mp={exports:{}},vp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mw;function KM(){return mw||(mw=1,function(n){function e(R,V){var K=R.length;R.push(V);e:for(;0<K;){var te=K-1>>>1,N=R[te];if(0<i(N,V))R[te]=V,R[K]=N,K=te;else break e}}function t(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var V=R[0],K=R.pop();if(K!==V){R[0]=K;e:for(var te=0,N=R.length,q=N>>>1;te<q;){var de=2*(te+1)-1,ne=R[de],ve=de+1,Q=R[ve];if(0>i(ne,K))ve<N&&0>i(Q,ne)?(R[te]=Q,R[ve]=K,te=ve):(R[te]=ne,R[de]=K,te=de);else if(ve<N&&0>i(Q,K))R[te]=Q,R[ve]=K,te=ve;else break e}}return V}function i(R,V){var K=R.sortIndex-V.sortIndex;return K!==0?K:R.id-V.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var d=[],h=[],g=1,m=null,y=3,b=!1,S=!1,_=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function L(R){for(var V=t(h);V!==null;){if(V.callback===null)s(h);else if(V.startTime<=R)s(h),V.sortIndex=V.expirationTime,e(d,V);else break;V=t(h)}}function j(R){if(_=!1,L(R),!S)if(t(d)!==null)S=!0,D||(D=!0,F());else{var V=t(h);V!==null&&ae(j,V.startTime-R)}}var D=!1,k=-1,B=5,P=-1;function z(){return T?!0:!(n.unstable_now()-P<B)}function I(){if(T=!1,D){var R=n.unstable_now();P=R;var V=!0;try{e:{S=!1,_&&(_=!1,M(k),k=-1),b=!0;var K=y;try{t:{for(L(R),m=t(d);m!==null&&!(m.expirationTime>R&&z());){var te=m.callback;if(typeof te=="function"){m.callback=null,y=m.priorityLevel;var N=te(m.expirationTime<=R);if(R=n.unstable_now(),typeof N=="function"){m.callback=N,L(R),V=!0;break t}m===t(d)&&s(d),L(R)}else s(d);m=t(d)}if(m!==null)V=!0;else{var q=t(h);q!==null&&ae(j,q.startTime-R),V=!1}}break e}finally{m=null,y=K,b=!1}V=void 0}}finally{V?F():D=!1}}}var F;if(typeof O=="function")F=function(){O(I)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,X=ee.port2;ee.port1.onmessage=I,F=function(){X.postMessage(null)}}else F=function(){C(I,0)};function ae(R,V){k=C(function(){R(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(R){R.callback=null},n.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<R?Math.floor(1e3/R):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(R){switch(y){case 1:case 2:case 3:var V=3;break;default:V=y}var K=y;y=V;try{return R()}finally{y=K}},n.unstable_requestPaint=function(){T=!0},n.unstable_runWithPriority=function(R,V){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var K=y;y=R;try{return V()}finally{y=K}},n.unstable_scheduleCallback=function(R,V,K){var te=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?te+K:te):K=te,R){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=K+N,R={id:g++,callback:V,priorityLevel:R,startTime:K,expirationTime:N,sortIndex:-1},K>te?(R.sortIndex=K,e(h,R),t(d)===null&&R===t(h)&&(_?(M(k),k=-1):_=!0,ae(j,K-te))):(R.sortIndex=N,e(d,R),S||b||(S=!0,D||(D=!0,F()))),R},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(R){var V=y;return function(){var K=y;y=V;try{return R.apply(this,arguments)}finally{y=K}}}}(vp)),vp}var vw;function ZM(){return vw||(vw=1,mp.exports=KM()),mp.exports}var yp={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yw;function QM(){if(yw)return Ge;yw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.iterator;function y(N){return N===null||typeof N!="object"?null:(N=m&&N[m]||N["@@iterator"],typeof N=="function"?N:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function T(N,q,de){this.props=N,this.context=q,this.refs=_,this.updater=de||b}T.prototype.isReactComponent={},T.prototype.setState=function(N,q){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,q,"setState")},T.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function C(){}C.prototype=T.prototype;function M(N,q,de){this.props=N,this.context=q,this.refs=_,this.updater=de||b}var O=M.prototype=new C;O.constructor=M,S(O,T.prototype),O.isPureReactComponent=!0;var L=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function k(N,q,de,ne,ve,Q){return de=Q.ref,{$$typeof:n,type:N,key:q,ref:de!==void 0?de:null,props:Q}}function B(N,q){return k(N.type,q,void 0,void 0,void 0,N.props)}function P(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function z(N){var q={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(de){return q[de]})}var I=/\/+/g;function F(N,q){return typeof N=="object"&&N!==null&&N.key!=null?z(""+N.key):q.toString(36)}function ee(){}function X(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(ee,ee):(N.status="pending",N.then(function(q){N.status==="pending"&&(N.status="fulfilled",N.value=q)},function(q){N.status==="pending"&&(N.status="rejected",N.reason=q)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function ae(N,q,de,ne,ve){var Q=typeof N;(Q==="undefined"||Q==="boolean")&&(N=null);var Se=!1;if(N===null)Se=!0;else switch(Q){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(N.$$typeof){case n:case e:Se=!0;break;case g:return Se=N._init,ae(Se(N._payload),q,de,ne,ve)}}if(Se)return ve=ve(N),Se=ne===""?"."+F(N,0):ne,L(ve)?(de="",Se!=null&&(de=Se.replace(I,"$&/")+"/"),ae(ve,q,de,"",function(Ie){return Ie})):ve!=null&&(P(ve)&&(ve=B(ve,de+(ve.key==null||N&&N.key===ve.key?"":(""+ve.key).replace(I,"$&/")+"/")+Se)),q.push(ve)),1;Se=0;var Oe=ne===""?".":ne+":";if(L(N))for(var Te=0;Te<N.length;Te++)ne=N[Te],Q=Oe+F(ne,Te),Se+=ae(ne,q,de,Q,ve);else if(Te=y(N),typeof Te=="function")for(N=Te.call(N),Te=0;!(ne=N.next()).done;)ne=ne.value,Q=Oe+F(ne,Te++),Se+=ae(ne,q,de,Q,ve);else if(Q==="object"){if(typeof N.then=="function")return ae(X(N),q,de,ne,ve);throw q=String(N),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return Se}function R(N,q,de){if(N==null)return N;var ne=[],ve=0;return ae(N,ne,"","",function(Q){return q.call(de,Q,ve++)}),ne}function V(N){if(N._status===-1){var q=N._result;q=q(),q.then(function(de){(N._status===0||N._status===-1)&&(N._status=1,N._result=de)},function(de){(N._status===0||N._status===-1)&&(N._status=2,N._result=de)}),N._status===-1&&(N._status=0,N._result=q)}if(N._status===1)return N._result.default;throw N._result}var K=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function te(){}return Ge.Children={map:R,forEach:function(N,q,de){R(N,function(){q.apply(this,arguments)},de)},count:function(N){var q=0;return R(N,function(){q++}),q},toArray:function(N){return R(N,function(q){return q})||[]},only:function(N){if(!P(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ge.Component=T,Ge.Fragment=t,Ge.Profiler=i,Ge.PureComponent=M,Ge.StrictMode=s,Ge.Suspense=d,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(N){return j.H.useMemoCache(N)}},Ge.cache=function(N){return function(){return N.apply(null,arguments)}},Ge.cloneElement=function(N,q,de){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ne=S({},N.props),ve=N.key,Q=void 0;if(q!=null)for(Se in q.ref!==void 0&&(Q=void 0),q.key!==void 0&&(ve=""+q.key),q)!D.call(q,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&q.ref===void 0||(ne[Se]=q[Se]);var Se=arguments.length-2;if(Se===1)ne.children=de;else if(1<Se){for(var Oe=Array(Se),Te=0;Te<Se;Te++)Oe[Te]=arguments[Te+2];ne.children=Oe}return k(N.type,ve,void 0,void 0,Q,ne)},Ge.createContext=function(N){return N={$$typeof:l,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:a,_context:N},N},Ge.createElement=function(N,q,de){var ne,ve={},Q=null;if(q!=null)for(ne in q.key!==void 0&&(Q=""+q.key),q)D.call(q,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(ve[ne]=q[ne]);var Se=arguments.length-2;if(Se===1)ve.children=de;else if(1<Se){for(var Oe=Array(Se),Te=0;Te<Se;Te++)Oe[Te]=arguments[Te+2];ve.children=Oe}if(N&&N.defaultProps)for(ne in Se=N.defaultProps,Se)ve[ne]===void 0&&(ve[ne]=Se[ne]);return k(N,Q,void 0,void 0,null,ve)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(N){return{$$typeof:c,render:N}},Ge.isValidElement=P,Ge.lazy=function(N){return{$$typeof:g,_payload:{_status:-1,_result:N},_init:V}},Ge.memo=function(N,q){return{$$typeof:h,type:N,compare:q===void 0?null:q}},Ge.startTransition=function(N){var q=j.T,de={};j.T=de;try{var ne=N(),ve=j.S;ve!==null&&ve(de,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(te,K)}catch(Q){K(Q)}finally{j.T=q}},Ge.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Ge.use=function(N){return j.H.use(N)},Ge.useActionState=function(N,q,de){return j.H.useActionState(N,q,de)},Ge.useCallback=function(N,q){return j.H.useCallback(N,q)},Ge.useContext=function(N){return j.H.useContext(N)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(N,q){return j.H.useDeferredValue(N,q)},Ge.useEffect=function(N,q,de){var ne=j.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(N,q)},Ge.useId=function(){return j.H.useId()},Ge.useImperativeHandle=function(N,q,de){return j.H.useImperativeHandle(N,q,de)},Ge.useInsertionEffect=function(N,q){return j.H.useInsertionEffect(N,q)},Ge.useLayoutEffect=function(N,q){return j.H.useLayoutEffect(N,q)},Ge.useMemo=function(N,q){return j.H.useMemo(N,q)},Ge.useOptimistic=function(N,q){return j.H.useOptimistic(N,q)},Ge.useReducer=function(N,q,de){return j.H.useReducer(N,q,de)},Ge.useRef=function(N){return j.H.useRef(N)},Ge.useState=function(N){return j.H.useState(N)},Ge.useSyncExternalStore=function(N,q,de){return j.H.useSyncExternalStore(N,q,de)},Ge.useTransition=function(){return j.H.useTransition()},Ge.version="19.1.0",Ge}var xw;function uv(){return xw||(xw=1,yp.exports=QM()),yp.exports}var xp={exports:{}},vs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bw;function JM(){if(bw)return vs;bw=1;var n=uv();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(d,h,g){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:d,containerInfo:h,implementation:g}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return vs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,vs.createPortal=function(d,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(d,h,null,g)},vs.flushSync=function(d){var h=l.T,g=s.p;try{if(l.T=null,s.p=2,d)return d()}finally{l.T=h,s.p=g,s.d.f()}},vs.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(d,h))},vs.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},vs.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var g=h.as,m=c(g,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;g==="style"?s.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:b}):g==="script"&&s.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},vs.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var g=c(h.as,h.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(d)},vs.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var g=h.as,m=c(g,h.crossOrigin);s.d.L(d,g,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},vs.preloadModule=function(d,h){if(typeof d=="string")if(h){var g=c(h.as,h.crossOrigin);s.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(d)},vs.requestFormReset=function(d){s.d.r(d)},vs.unstable_batchedUpdates=function(d,h){return d(h)},vs.useFormState=function(d,h,g){return l.H.useFormState(d,h,g)},vs.useFormStatus=function(){return l.H.useHostTransitionStatus()},vs.version="19.1.0",vs}var ww;function AC(){if(ww)return xp.exports;ww=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),xp.exports=JM(),xp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw;function eO(){if(Sw)return Gl;Sw=1;var n=ZM(),e=uv(),t=AC();function s(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function c(r){if(a(r)!==r)throw Error(s(188))}function d(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(s(188));return o!==r?null:r}for(var u=r,f=o;;){var v=u.return;if(v===null)break;var w=v.alternate;if(w===null){if(f=v.return,f!==null){u=f;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===u)return c(v),r;if(w===f)return c(v),o;w=w.sibling}throw Error(s(188))}if(u.return!==f.return)u=v,f=w;else{for(var E=!1,A=v.child;A;){if(A===u){E=!0,u=v,f=w;break}if(A===f){E=!0,f=v,u=w;break}A=A.sibling}if(!E){for(A=w.child;A;){if(A===u){E=!0,u=w,f=v;break}if(A===f){E=!0,f=w,u=v;break}A=A.sibling}if(!E)throw Error(s(189))}}if(u.alternate!==f)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?r:o}function h(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=h(r),o!==null)return o;r=r.sibling}return null}var g=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),O=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function F(r){return r===null||typeof r!="object"?null:(r=I&&r[I]||r["@@iterator"],typeof r=="function"?r:null)}var ee=Symbol.for("react.client.reference");function X(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ee?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case T:return"Profiler";case _:return"StrictMode";case j:return"Suspense";case D:return"SuspenseList";case P:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case b:return"Portal";case O:return(r.displayName||"Context")+".Provider";case M:return(r._context.displayName||"Context")+".Consumer";case L:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case k:return o=r.displayName||null,o!==null?o:X(r.type)||"Memo";case B:o=r._payload,r=r._init;try{return X(r(o))}catch{}}return null}var ae=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},te=[],N=-1;function q(r){return{current:r}}function de(r){0>N||(r.current=te[N],te[N]=null,N--)}function ne(r,o){N++,te[N]=r.current,r.current=o}var ve=q(null),Q=q(null),Se=q(null),Oe=q(null);function Te(r,o){switch(ne(Se,o),ne(Q,r),ne(ve,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?Vb(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=Vb(o),r=Hb(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}de(ve),ne(ve,r)}function Ie(){de(ve),de(Q),de(Se)}function oe(r){r.memoizedState!==null&&ne(Oe,r);var o=ve.current,u=Hb(o,r.type);o!==u&&(ne(Q,r),ne(ve,u))}function xe(r){Q.current===r&&(de(ve),de(Q)),Oe.current===r&&(de(Oe),Ul._currentValue=K)}var Ee=Object.prototype.hasOwnProperty,$=n.unstable_scheduleCallback,ce=n.unstable_cancelCallback,he=n.unstable_shouldYield,Me=n.unstable_requestPaint,ye=n.unstable_now,Fe=n.unstable_getCurrentPriorityLevel,Ye=n.unstable_ImmediatePriority,nt=n.unstable_UserBlockingPriority,it=n.unstable_NormalPriority,De=n.unstable_LowPriority,Ze=n.unstable_IdlePriority,St=n.log,le=n.unstable_setDisableYieldValue,Le=null,we=null;function be(r){if(typeof St=="function"&&le(r),we&&typeof we.setStrictMode=="function")try{we.setStrictMode(Le,r)}catch{}}var ge=Math.clz32?Math.clz32:yn,st=Math.log,ls=Math.LN2;function yn(r){return r>>>=0,r===0?32:31-(st(r)/ls|0)|0}var kt=256,Ve=4194304;function At(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function cs(r,o,u){var f=r.pendingLanes;if(f===0)return 0;var v=0,w=r.suspendedLanes,E=r.pingedLanes;r=r.warmLanes;var A=f&134217727;return A!==0?(f=A&~w,f!==0?v=At(f):(E&=A,E!==0?v=At(E):u||(u=A&~r,u!==0&&(v=At(u))))):(A=f&~w,A!==0?v=At(A):E!==0?v=At(E):u||(u=f&~r,u!==0&&(v=At(u)))),v===0?0:o!==0&&o!==v&&(o&w)===0&&(w=v&-v,u=o&-o,w>=u||w===32&&(u&4194048)!==0)?o:v}function ut(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function Dt(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ss(){var r=kt;return kt<<=1,(kt&4194048)===0&&(kt=256),r}function Ut(){var r=Ve;return Ve<<=1,(Ve&62914560)===0&&(Ve=4194304),r}function Nt(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function _t(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function fa(r,o,u,f,v,w){var E=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var A=r.entanglements,U=r.expirationTimes,J=r.hiddenUpdates;for(u=E&~u;0<u;){var fe=31-ge(u),me=1<<fe;A[fe]=0,U[fe]=-1;var se=J[fe];if(se!==null)for(J[fe]=null,fe=0;fe<se.length;fe++){var ie=se[fe];ie!==null&&(ie.lane&=-536870913)}u&=~me}f!==0&&qo(r,f,0),w!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=w&~(E&~o))}function qo(r,o,u){r.pendingLanes|=o,r.suspendedLanes&=~o;var f=31-ge(o);r.entangledLanes|=o,r.entanglements[f]=r.entanglements[f]|1073741824|u&4194090}function Sr(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var f=31-ge(u),v=1<<f;v&o|r[f]&o&&(r[f]|=o),u&=~v}}function ga(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ni(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Wo(){var r=V.p;return r!==0?r:(r=window.event,r===void 0?32:lw(r.type))}function rf(r,o){var u=V.p;try{return V.p=r,o()}finally{V.p=u}}var Ms=Math.random().toString(36).slice(2),Ae="__reactFiber$"+Ms,Os="__reactProps$"+Ms,pa="__reactContainer$"+Ms,af="__reactEvents$"+Ms,Bj="__reactListeners$"+Ms,Uj="__reactHandles$"+Ms,O0="__reactResources$"+Ms,Xo="__reactMarker$"+Ms;function of(r){delete r[Ae],delete r[Os],delete r[af],delete r[Bj],delete r[Uj]}function ma(r){var o=r[Ae];if(o)return o;for(var u=r.parentNode;u;){if(o=u[pa]||u[Ae]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(r=qb(r);r!==null;){if(u=r[Ae])return u;r=qb(r)}return o}r=u,u=r.parentNode}return null}function va(r){if(r=r[Ae]||r[pa]){var o=r.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return r}return null}function Ko(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(s(33))}function ya(r){var o=r[O0];return o||(o=r[O0]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function ts(r){r[Xo]=!0}var L0=new Set,A0={};function _r(r,o){xa(r,o),xa(r+"Capture",o)}function xa(r,o){for(A0[r]=o,r=0;r<o.length;r++)L0.add(o[r])}var zj=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),D0={},N0={};function Ij(r){return Ee.call(N0,r)?!0:Ee.call(D0,r)?!1:zj.test(r)?N0[r]=!0:(D0[r]=!0,!1)}function Kc(r,o,u){if(Ij(o))if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+u)}}function Zc(r,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+u)}}function Xn(r,o,u,f){if(f===null)r.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(o,u,""+f)}}var lf,P0;function ba(r){if(lf===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);lf=o&&o[1]||"",P0=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lf+r+P0}var cf=!1;function uf(r,o){if(!r||cf)return"";cf=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ie){var se=ie}Reflect.construct(r,[],me)}else{try{me.call()}catch(ie){se=ie}r.call(me.prototype)}}else{try{throw Error()}catch(ie){se=ie}(me=r())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ie){if(ie&&se&&typeof ie.stack=="string")return[ie.stack,se.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=f.DetermineComponentFrameRoot(),E=w[0],A=w[1];if(E&&A){var U=E.split(`
`),J=A.split(`
`);for(v=f=0;f<U.length&&!U[f].includes("DetermineComponentFrameRoot");)f++;for(;v<J.length&&!J[v].includes("DetermineComponentFrameRoot");)v++;if(f===U.length||v===J.length)for(f=U.length-1,v=J.length-1;1<=f&&0<=v&&U[f]!==J[v];)v--;for(;1<=f&&0<=v;f--,v--)if(U[f]!==J[v]){if(f!==1||v!==1)do if(f--,v--,0>v||U[f]!==J[v]){var fe=`
`+U[f].replace(" at new "," at ");return r.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",r.displayName)),fe}while(1<=f&&0<=v);break}}}finally{cf=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?ba(u):""}function Fj(r){switch(r.tag){case 26:case 27:case 5:return ba(r.type);case 16:return ba("Lazy");case 13:return ba("Suspense");case 19:return ba("SuspenseList");case 0:case 15:return uf(r.type,!1);case 11:return uf(r.type.render,!1);case 1:return uf(r.type,!0);case 31:return ba("Activity");default:return""}}function R0(r){try{var o="";do o+=Fj(r),r=r.return;while(r);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function en(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function B0(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Vj(r){var o=B0(r)?"checked":"value",u=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),f=""+r[o];if(!r.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,w=u.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return v.call(this)},set:function(E){f=""+E,w.call(this,E)}}),Object.defineProperty(r,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(E){f=""+E},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Qc(r){r._valueTracker||(r._valueTracker=Vj(r))}function U0(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return r&&(f=B0(r)?r.checked?"true":"false":r.value),r=f,r!==u?(o.setValue(r),!0):!1}function Jc(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Hj=/[\n"\\]/g;function tn(r){return r.replace(Hj,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function df(r,o,u,f,v,w,E,A){r.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.type=E:r.removeAttribute("type"),o!=null?E==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+en(o)):r.value!==""+en(o)&&(r.value=""+en(o)):E!=="submit"&&E!=="reset"||r.removeAttribute("value"),o!=null?hf(r,E,en(o)):u!=null?hf(r,E,en(u)):f!=null&&r.removeAttribute("value"),v==null&&w!=null&&(r.defaultChecked=!!w),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.name=""+en(A):r.removeAttribute("name")}function z0(r,o,u,f,v,w,E,A){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.type=w),o!=null||u!=null){if(!(w!=="submit"&&w!=="reset"||o!=null))return;u=u!=null?""+en(u):"",o=o!=null?""+en(o):u,A||o===r.value||(r.value=o),r.defaultValue=o}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,r.checked=A?r.checked:!!f,r.defaultChecked=!!f,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.name=E)}function hf(r,o,u){o==="number"&&Jc(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function wa(r,o,u,f){if(r=r.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<r.length;u++)v=o.hasOwnProperty("$"+r[u].value),r[u].selected!==v&&(r[u].selected=v),v&&f&&(r[u].defaultSelected=!0)}else{for(u=""+en(u),o=null,v=0;v<r.length;v++){if(r[v].value===u){r[v].selected=!0,f&&(r[v].defaultSelected=!0);return}o!==null||r[v].disabled||(o=r[v])}o!==null&&(o.selected=!0)}}function I0(r,o,u){if(o!=null&&(o=""+en(o),o!==r.value&&(r.value=o),u==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=u!=null?""+en(u):""}function F0(r,o,u,f){if(o==null){if(f!=null){if(u!=null)throw Error(s(92));if(ae(f)){if(1<f.length)throw Error(s(93));f=f[0]}u=f}u==null&&(u=""),o=u}u=en(o),r.defaultValue=u,f=r.textContent,f===u&&f!==""&&f!==null&&(r.value=f)}function Sa(r,o){if(o){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=o;return}}r.textContent=o}var Gj=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function V0(r,o,u){var f=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":f?r.setProperty(o,u):typeof u!="number"||u===0||Gj.has(o)?o==="float"?r.cssFloat=u:r[o]=(""+u).trim():r[o]=u+"px"}function H0(r,o,u){if(o!=null&&typeof o!="object")throw Error(s(62));if(r=r.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?r.setProperty(f,""):f==="float"?r.cssFloat="":r[f]="");for(var v in o)f=o[v],o.hasOwnProperty(v)&&u[v]!==f&&V0(r,v,f)}else for(var w in o)o.hasOwnProperty(w)&&V0(r,w,o[w])}function ff(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $j=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yj=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function eu(r){return Yj.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var gf=null;function pf(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var _a=null,Ca=null;function G0(r){var o=va(r);if(o&&(r=o.stateNode)){var u=r[Os]||null;e:switch(r=o.stateNode,o.type){case"input":if(df(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+tn(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==r&&f.form===r.form){var v=f[Os]||null;if(!v)throw Error(s(90));df(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<u.length;o++)f=u[o],f.form===r.form&&U0(f)}break e;case"textarea":I0(r,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&wa(r,!!u.multiple,o,!1)}}}var mf=!1;function $0(r,o,u){if(mf)return r(o,u);mf=!0;try{var f=r(o);return f}finally{if(mf=!1,(_a!==null||Ca!==null)&&(zu(),_a&&(o=_a,r=Ca,Ca=_a=null,G0(o),r)))for(o=0;o<r.length;o++)G0(r[o])}}function Zo(r,o){var u=r.stateNode;if(u===null)return null;var f=u[Os]||null;if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(s(231,o,typeof u));return u}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vf=!1;if(Kn)try{var Qo={};Object.defineProperty(Qo,"passive",{get:function(){vf=!0}}),window.addEventListener("test",Qo,Qo),window.removeEventListener("test",Qo,Qo)}catch{vf=!1}var Pi=null,yf=null,tu=null;function Y0(){if(tu)return tu;var r,o=yf,u=o.length,f,v="value"in Pi?Pi.value:Pi.textContent,w=v.length;for(r=0;r<u&&o[r]===v[r];r++);var E=u-r;for(f=1;f<=E&&o[u-f]===v[w-f];f++);return tu=v.slice(r,1<f?1-f:void 0)}function su(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function nu(){return!0}function q0(){return!1}function Ls(r){function o(u,f,v,w,E){this._reactName=u,this._targetInst=v,this.type=f,this.nativeEvent=w,this.target=E,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(u=r[A],this[A]=u?u(w):w[A]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?nu:q0,this.isPropagationStopped=q0,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=nu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=nu)},persist:function(){},isPersistent:nu}),o}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iu=Ls(Cr),Jo=g({},Cr,{view:0,detail:0}),qj=Ls(Jo),xf,bf,el,ru=g({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sf,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==el&&(el&&r.type==="mousemove"?(xf=r.screenX-el.screenX,bf=r.screenY-el.screenY):bf=xf=0,el=r),xf)},movementY:function(r){return"movementY"in r?r.movementY:bf}}),W0=Ls(ru),Wj=g({},ru,{dataTransfer:0}),Xj=Ls(Wj),Kj=g({},Jo,{relatedTarget:0}),wf=Ls(Kj),Zj=g({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),Qj=Ls(Zj),Jj=g({},Cr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),ek=Ls(Jj),tk=g({},Cr,{data:0}),X0=Ls(tk),sk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ik={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rk(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=ik[r])?!!o[r]:!1}function Sf(){return rk}var ak=g({},Jo,{key:function(r){if(r.key){var o=sk[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=su(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?nk[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sf,charCode:function(r){return r.type==="keypress"?su(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?su(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),ok=Ls(ak),lk=g({},ru,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K0=Ls(lk),ck=g({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sf}),uk=Ls(ck),dk=g({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),hk=Ls(dk),fk=g({},ru,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),gk=Ls(fk),pk=g({},Cr,{newState:0,oldState:0}),mk=Ls(pk),vk=[9,13,27,32],_f=Kn&&"CompositionEvent"in window,tl=null;Kn&&"documentMode"in document&&(tl=document.documentMode);var yk=Kn&&"TextEvent"in window&&!tl,Z0=Kn&&(!_f||tl&&8<tl&&11>=tl),Q0=" ",J0=!1;function ey(r,o){switch(r){case"keyup":return vk.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ty(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ta=!1;function xk(r,o){switch(r){case"compositionend":return ty(o);case"keypress":return o.which!==32?null:(J0=!0,Q0);case"textInput":return r=o.data,r===Q0&&J0?null:r;default:return null}}function bk(r,o){if(Ta)return r==="compositionend"||!_f&&ey(r,o)?(r=Y0(),tu=yf=Pi=null,Ta=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Z0&&o.locale!=="ko"?null:o.data;default:return null}}var wk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sy(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!wk[r.type]:o==="textarea"}function ny(r,o,u,f){_a?Ca?Ca.push(f):Ca=[f]:_a=f,o=$u(o,"onChange"),0<o.length&&(u=new iu("onChange","change",null,u,f),r.push({event:u,listeners:o}))}var sl=null,nl=null;function Sk(r){Bb(r,0)}function au(r){var o=Ko(r);if(U0(o))return r}function iy(r,o){if(r==="change")return o}var ry=!1;if(Kn){var Cf;if(Kn){var Tf="oninput"in document;if(!Tf){var ay=document.createElement("div");ay.setAttribute("oninput","return;"),Tf=typeof ay.oninput=="function"}Cf=Tf}else Cf=!1;ry=Cf&&(!document.documentMode||9<document.documentMode)}function oy(){sl&&(sl.detachEvent("onpropertychange",ly),nl=sl=null)}function ly(r){if(r.propertyName==="value"&&au(nl)){var o=[];ny(o,nl,r,pf(r)),$0(Sk,o)}}function _k(r,o,u){r==="focusin"?(oy(),sl=o,nl=u,sl.attachEvent("onpropertychange",ly)):r==="focusout"&&oy()}function Ck(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return au(nl)}function Tk(r,o){if(r==="click")return au(o)}function Ek(r,o){if(r==="input"||r==="change")return au(o)}function jk(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Vs=typeof Object.is=="function"?Object.is:jk;function il(r,o){if(Vs(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var v=u[f];if(!Ee.call(o,v)||!Vs(r[v],o[v]))return!1}return!0}function cy(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function uy(r,o){var u=cy(r);r=0;for(var f;u;){if(u.nodeType===3){if(f=r+u.textContent.length,r<=o&&f>=o)return{node:u,offset:o-r};r=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=cy(u)}}function dy(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?dy(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function hy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=Jc(r.document);o instanceof r.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)r=o.contentWindow;else break;o=Jc(r.document)}return o}function Ef(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var kk=Kn&&"documentMode"in document&&11>=document.documentMode,Ea=null,jf=null,rl=null,kf=!1;function fy(r,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;kf||Ea==null||Ea!==Jc(f)||(f=Ea,"selectionStart"in f&&Ef(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),rl&&il(rl,f)||(rl=f,f=$u(jf,"onSelect"),0<f.length&&(o=new iu("onSelect","select",null,o,u),r.push({event:o,listeners:f}),o.target=Ea)))}function Tr(r,o){var u={};return u[r.toLowerCase()]=o.toLowerCase(),u["Webkit"+r]="webkit"+o,u["Moz"+r]="moz"+o,u}var ja={animationend:Tr("Animation","AnimationEnd"),animationiteration:Tr("Animation","AnimationIteration"),animationstart:Tr("Animation","AnimationStart"),transitionrun:Tr("Transition","TransitionRun"),transitionstart:Tr("Transition","TransitionStart"),transitioncancel:Tr("Transition","TransitionCancel"),transitionend:Tr("Transition","TransitionEnd")},Mf={},gy={};Kn&&(gy=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);function Er(r){if(Mf[r])return Mf[r];if(!ja[r])return r;var o=ja[r],u;for(u in o)if(o.hasOwnProperty(u)&&u in gy)return Mf[r]=o[u];return r}var py=Er("animationend"),my=Er("animationiteration"),vy=Er("animationstart"),Mk=Er("transitionrun"),Ok=Er("transitionstart"),Lk=Er("transitioncancel"),yy=Er("transitionend"),xy=new Map,Of="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Of.push("scrollEnd");function xn(r,o){xy.set(r,o),_r(o,[r])}var by=new WeakMap;function sn(r,o){if(typeof r=="object"&&r!==null){var u=by.get(r);return u!==void 0?u:(o={value:r,source:o,stack:R0(o)},by.set(r,o),o)}return{value:r,source:o,stack:R0(o)}}var nn=[],ka=0,Lf=0;function ou(){for(var r=ka,o=Lf=ka=0;o<r;){var u=nn[o];nn[o++]=null;var f=nn[o];nn[o++]=null;var v=nn[o];nn[o++]=null;var w=nn[o];if(nn[o++]=null,f!==null&&v!==null){var E=f.pending;E===null?v.next=v:(v.next=E.next,E.next=v),f.pending=v}w!==0&&wy(u,v,w)}}function lu(r,o,u,f){nn[ka++]=r,nn[ka++]=o,nn[ka++]=u,nn[ka++]=f,Lf|=f,r.lanes|=f,r=r.alternate,r!==null&&(r.lanes|=f)}function Af(r,o,u,f){return lu(r,o,u,f),cu(r)}function Ma(r,o){return lu(r,null,null,o),cu(r)}function wy(r,o,u){r.lanes|=u;var f=r.alternate;f!==null&&(f.lanes|=u);for(var v=!1,w=r.return;w!==null;)w.childLanes|=u,f=w.alternate,f!==null&&(f.childLanes|=u),w.tag===22&&(r=w.stateNode,r===null||r._visibility&1||(v=!0)),r=w,w=w.return;return r.tag===3?(w=r.stateNode,v&&o!==null&&(v=31-ge(u),r=w.hiddenUpdates,f=r[v],f===null?r[v]=[o]:f.push(o),o.lane=u|536870912),w):null}function cu(r){if(50<Ol)throw Ol=0,Ug=null,Error(s(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Oa={};function Ak(r,o,u,f){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hs(r,o,u,f){return new Ak(r,o,u,f)}function Df(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Zn(r,o){var u=r.alternate;return u===null?(u=Hs(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function Sy(r,o){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,o=u.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function uu(r,o,u,f,v,w){var E=0;if(f=r,typeof r=="function")Df(r)&&(E=1);else if(typeof r=="string")E=NM(r,u,ve.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case P:return r=Hs(31,u,o,v),r.elementType=P,r.lanes=w,r;case S:return jr(u.children,v,w,o);case _:E=8,v|=24;break;case T:return r=Hs(12,u,o,v|2),r.elementType=T,r.lanes=w,r;case j:return r=Hs(13,u,o,v),r.elementType=j,r.lanes=w,r;case D:return r=Hs(19,u,o,v),r.elementType=D,r.lanes=w,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case C:case O:E=10;break e;case M:E=9;break e;case L:E=11;break e;case k:E=14;break e;case B:E=16,f=null;break e}E=29,u=Error(s(130,r===null?"null":typeof r,"")),f=null}return o=Hs(E,u,o,v),o.elementType=r,o.type=f,o.lanes=w,o}function jr(r,o,u,f){return r=Hs(7,r,f,o),r.lanes=u,r}function Nf(r,o,u){return r=Hs(6,r,null,o),r.lanes=u,r}function Pf(r,o,u){return o=Hs(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var La=[],Aa=0,du=null,hu=0,rn=[],an=0,kr=null,Qn=1,Jn="";function Mr(r,o){La[Aa++]=hu,La[Aa++]=du,du=r,hu=o}function _y(r,o,u){rn[an++]=Qn,rn[an++]=Jn,rn[an++]=kr,kr=r;var f=Qn;r=Jn;var v=32-ge(f)-1;f&=~(1<<v),u+=1;var w=32-ge(o)+v;if(30<w){var E=v-v%5;w=(f&(1<<E)-1).toString(32),f>>=E,v-=E,Qn=1<<32-ge(o)+v|u<<v|f,Jn=w+r}else Qn=1<<w|u<<v|f,Jn=r}function Rf(r){r.return!==null&&(Mr(r,1),_y(r,1,0))}function Bf(r){for(;r===du;)du=La[--Aa],La[Aa]=null,hu=La[--Aa],La[Aa]=null;for(;r===kr;)kr=rn[--an],rn[an]=null,Jn=rn[--an],rn[an]=null,Qn=rn[--an],rn[an]=null}var _s=null,Pt=null,ct=!1,Or=null,Pn=!1,Uf=Error(s(519));function Lr(r){var o=Error(s(418,""));throw ll(sn(o,r)),Uf}function Cy(r){var o=r.stateNode,u=r.type,f=r.memoizedProps;switch(o[Ae]=r,o[Os]=f,u){case"dialog":Je("cancel",o),Je("close",o);break;case"iframe":case"object":case"embed":Je("load",o);break;case"video":case"audio":for(u=0;u<Al.length;u++)Je(Al[u],o);break;case"source":Je("error",o);break;case"img":case"image":case"link":Je("error",o),Je("load",o);break;case"details":Je("toggle",o);break;case"input":Je("invalid",o),z0(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Qc(o);break;case"select":Je("invalid",o);break;case"textarea":Je("invalid",o),F0(o,f.value,f.defaultValue,f.children),Qc(o)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||f.suppressHydrationWarning===!0||Fb(o.textContent,u)?(f.popover!=null&&(Je("beforetoggle",o),Je("toggle",o)),f.onScroll!=null&&Je("scroll",o),f.onScrollEnd!=null&&Je("scrollend",o),f.onClick!=null&&(o.onclick=Yu),o=!0):o=!1,o||Lr(r)}function Ty(r){for(_s=r.return;_s;)switch(_s.tag){case 5:case 13:Pn=!1;return;case 27:case 3:Pn=!0;return;default:_s=_s.return}}function al(r){if(r!==_s)return!1;if(!ct)return Ty(r),ct=!0,!1;var o=r.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||ep(r.type,r.memoizedProps)),u=!u),u&&Pt&&Lr(r),Ty(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8)if(u=r.data,u==="/$"){if(o===0){Pt=wn(r.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++;r=r.nextSibling}Pt=null}}else o===27?(o=Pt,Zi(r.type)?(r=ip,ip=null,Pt=r):Pt=o):Pt=_s?wn(r.stateNode.nextSibling):null;return!0}function ol(){Pt=_s=null,ct=!1}function Ey(){var r=Or;return r!==null&&(Ns===null?Ns=r:Ns.push.apply(Ns,r),Or=null),r}function ll(r){Or===null?Or=[r]:Or.push(r)}var zf=q(null),Ar=null,ei=null;function Ri(r,o,u){ne(zf,o._currentValue),o._currentValue=u}function ti(r){r._currentValue=zf.current,de(zf)}function If(r,o,u){for(;r!==null;){var f=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),r===u)break;r=r.return}}function Ff(r,o,u,f){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var w=v.dependencies;if(w!==null){var E=v.child;w=w.firstContext;e:for(;w!==null;){var A=w;w=v;for(var U=0;U<o.length;U++)if(A.context===o[U]){w.lanes|=u,A=w.alternate,A!==null&&(A.lanes|=u),If(w.return,u,r),f||(E=null);break e}w=A.next}}else if(v.tag===18){if(E=v.return,E===null)throw Error(s(341));E.lanes|=u,w=E.alternate,w!==null&&(w.lanes|=u),If(E,u,r),E=null}else E=v.child;if(E!==null)E.return=v;else for(E=v;E!==null;){if(E===r){E=null;break}if(v=E.sibling,v!==null){v.return=E.return,E=v;break}E=E.return}v=E}}function cl(r,o,u,f){r=null;for(var v=o,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var E=v.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var A=v.type;Vs(v.pendingProps.value,E.value)||(r!==null?r.push(A):r=[A])}}else if(v===Oe.current){if(E=v.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(Ul):r=[Ul])}v=v.return}r!==null&&Ff(o,r,u,f),o.flags|=262144}function fu(r){for(r=r.firstContext;r!==null;){if(!Vs(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Dr(r){Ar=r,ei=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function ms(r){return jy(Ar,r)}function gu(r,o){return Ar===null&&Dr(r),jy(r,o)}function jy(r,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},ei===null){if(r===null)throw Error(s(308));ei=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else ei=ei.next=o;return u}var Dk=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(u,f){r.push(f)}};this.abort=function(){o.aborted=!0,r.forEach(function(u){return u()})}},Nk=n.unstable_scheduleCallback,Pk=n.unstable_NormalPriority,Wt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vf(){return{controller:new Dk,data:new Map,refCount:0}}function ul(r){r.refCount--,r.refCount===0&&Nk(Pk,function(){r.controller.abort()})}var dl=null,Hf=0,Da=0,Na=null;function Rk(r,o){if(dl===null){var u=dl=[];Hf=0,Da=$g(),Na={status:"pending",value:void 0,then:function(f){u.push(f)}}}return Hf++,o.then(ky,ky),o}function ky(){if(--Hf===0&&dl!==null){Na!==null&&(Na.status="fulfilled");var r=dl;dl=null,Da=0,Na=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function Bk(r,o){var u=[],f={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return r.then(function(){f.status="fulfilled",f.value=o;for(var v=0;v<u.length;v++)(0,u[v])(o)},function(v){for(f.status="rejected",f.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),f}var My=R.S;R.S=function(r,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&Rk(r,o),My!==null&&My(r,o)};var Nr=q(null);function Gf(){var r=Nr.current;return r!==null?r:xt.pooledCache}function pu(r,o){o===null?ne(Nr,Nr.current):ne(Nr,o.pool)}function Oy(){var r=Gf();return r===null?null:{parent:Wt._currentValue,pool:r}}var hl=Error(s(460)),Ly=Error(s(474)),mu=Error(s(542)),$f={then:function(){}};function Ay(r){return r=r.status,r==="fulfilled"||r==="rejected"}function vu(){}function Dy(r,o,u){switch(u=r[u],u===void 0?r.push(o):u!==o&&(o.then(vu,vu),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Py(r),r;default:if(typeof o.status=="string")o.then(vu,vu);else{if(r=xt,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=o,r.status="pending",r.then(function(f){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=f}},function(f){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Py(r),r}throw fl=o,hl}}var fl=null;function Ny(){if(fl===null)throw Error(s(459));var r=fl;return fl=null,r}function Py(r){if(r===hl||r===mu)throw Error(s(483))}var Bi=!1;function Yf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qf(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ui(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function zi(r,o,u){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(ht&2)!==0){var v=f.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),f.pending=o,o=cu(r),wy(r,null,u),o}return lu(r,f,o,u),cu(r)}function gl(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var f=o.lanes;f&=r.pendingLanes,u|=f,o.lanes=u,Sr(r,u)}}function Wf(r,o){var u=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var v=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var E={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};w===null?v=w=E:w=w.next=E,u=u.next}while(u!==null);w===null?v=w=o:w=w.next=o}else v=w=o;u={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:f.shared,callbacks:f.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}var Xf=!1;function pl(){if(Xf){var r=Na;if(r!==null)throw r}}function ml(r,o,u,f){Xf=!1;var v=r.updateQueue;Bi=!1;var w=v.firstBaseUpdate,E=v.lastBaseUpdate,A=v.shared.pending;if(A!==null){v.shared.pending=null;var U=A,J=U.next;U.next=null,E===null?w=J:E.next=J,E=U;var fe=r.alternate;fe!==null&&(fe=fe.updateQueue,A=fe.lastBaseUpdate,A!==E&&(A===null?fe.firstBaseUpdate=J:A.next=J,fe.lastBaseUpdate=U))}if(w!==null){var me=v.baseState;E=0,fe=J=U=null,A=w;do{var se=A.lane&-536870913,ie=se!==A.lane;if(ie?(rt&se)===se:(f&se)===se){se!==0&&se===Da&&(Xf=!0),fe!==null&&(fe=fe.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Ue=r,Pe=A;se=o;var vt=u;switch(Pe.tag){case 1:if(Ue=Pe.payload,typeof Ue=="function"){me=Ue.call(vt,me,se);break e}me=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=Pe.payload,se=typeof Ue=="function"?Ue.call(vt,me,se):Ue,se==null)break e;me=g({},me,se);break e;case 2:Bi=!0}}se=A.callback,se!==null&&(r.flags|=64,ie&&(r.flags|=8192),ie=v.callbacks,ie===null?v.callbacks=[se]:ie.push(se))}else ie={lane:se,tag:A.tag,payload:A.payload,callback:A.callback,next:null},fe===null?(J=fe=ie,U=me):fe=fe.next=ie,E|=se;if(A=A.next,A===null){if(A=v.shared.pending,A===null)break;ie=A,A=ie.next,ie.next=null,v.lastBaseUpdate=ie,v.shared.pending=null}}while(!0);fe===null&&(U=me),v.baseState=U,v.firstBaseUpdate=J,v.lastBaseUpdate=fe,w===null&&(v.shared.lanes=0),qi|=E,r.lanes=E,r.memoizedState=me}}function Ry(r,o){if(typeof r!="function")throw Error(s(191,r));r.call(o)}function By(r,o){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)Ry(u[r],o)}var Pa=q(null),yu=q(0);function Uy(r,o){r=li,ne(yu,r),ne(Pa,o),li=r|o.baseLanes}function Kf(){ne(yu,li),ne(Pa,Pa.current)}function Zf(){li=yu.current,de(Pa),de(yu)}var Ii=0,qe=null,pt=null,Gt=null,xu=!1,Ra=!1,Pr=!1,bu=0,vl=0,Ba=null,Uk=0;function zt(){throw Error(s(321))}function Qf(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!Vs(r[u],o[u]))return!1;return!0}function Jf(r,o,u,f,v,w){return Ii=w,qe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,R.H=r===null||r.memoizedState===null?wx:Sx,Pr=!1,w=u(f,v),Pr=!1,Ra&&(w=Iy(o,u,f,v)),zy(r),w}function zy(r){R.H=Eu;var o=pt!==null&&pt.next!==null;if(Ii=0,Gt=pt=qe=null,xu=!1,vl=0,Ba=null,o)throw Error(s(300));r===null||ss||(r=r.dependencies,r!==null&&fu(r)&&(ss=!0))}function Iy(r,o,u,f){qe=r;var v=0;do{if(Ra&&(Ba=null),vl=0,Ra=!1,25<=v)throw Error(s(301));if(v+=1,Gt=pt=null,r.updateQueue!=null){var w=r.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}R.H=$k,w=o(u,f)}while(Ra);return w}function zk(){var r=R.H,o=r.useState()[0];return o=typeof o.then=="function"?yl(o):o,r=r.useState()[0],(pt!==null?pt.memoizedState:null)!==r&&(qe.flags|=1024),o}function eg(){var r=bu!==0;return bu=0,r}function tg(r,o,u){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~u}function sg(r){if(xu){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}xu=!1}Ii=0,Gt=pt=qe=null,Ra=!1,vl=bu=0,Ba=null}function As(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?qe.memoizedState=Gt=r:Gt=Gt.next=r,Gt}function $t(){if(pt===null){var r=qe.alternate;r=r!==null?r.memoizedState:null}else r=pt.next;var o=Gt===null?qe.memoizedState:Gt.next;if(o!==null)Gt=o,pt=r;else{if(r===null)throw qe.alternate===null?Error(s(467)):Error(s(310));pt=r,r={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Gt===null?qe.memoizedState=Gt=r:Gt=Gt.next=r}return Gt}function ng(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yl(r){var o=vl;return vl+=1,Ba===null&&(Ba=[]),r=Dy(Ba,r,o),o=qe,(Gt===null?o.memoizedState:Gt.next)===null&&(o=o.alternate,R.H=o===null||o.memoizedState===null?wx:Sx),r}function wu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return yl(r);if(r.$$typeof===O)return ms(r)}throw Error(s(438,String(r)))}function ig(r){var o=null,u=qe.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var f=qe.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=ng(),qe.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(r),f=0;f<r;f++)u[f]=z;return o.index++,u}function si(r,o){return typeof o=="function"?o(r):o}function Su(r){var o=$t();return rg(o,pt,r)}function rg(r,o,u){var f=r.queue;if(f===null)throw Error(s(311));f.lastRenderedReducer=u;var v=r.baseQueue,w=f.pending;if(w!==null){if(v!==null){var E=v.next;v.next=w.next,w.next=E}o.baseQueue=v=w,f.pending=null}if(w=r.baseState,v===null)r.memoizedState=w;else{o=v.next;var A=E=null,U=null,J=o,fe=!1;do{var me=J.lane&-536870913;if(me!==J.lane?(rt&me)===me:(Ii&me)===me){var se=J.revertLane;if(se===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),me===Da&&(fe=!0);else if((Ii&se)===se){J=J.next,se===Da&&(fe=!0);continue}else me={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(A=U=me,E=w):U=U.next=me,qe.lanes|=se,qi|=se;me=J.action,Pr&&u(w,me),w=J.hasEagerState?J.eagerState:u(w,me)}else se={lane:me,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(A=U=se,E=w):U=U.next=se,qe.lanes|=me,qi|=me;J=J.next}while(J!==null&&J!==o);if(U===null?E=w:U.next=A,!Vs(w,r.memoizedState)&&(ss=!0,fe&&(u=Na,u!==null)))throw u;r.memoizedState=w,r.baseState=E,r.baseQueue=U,f.lastRenderedState=w}return v===null&&(f.lanes=0),[r.memoizedState,f.dispatch]}function ag(r){var o=$t(),u=o.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=r;var f=u.dispatch,v=u.pending,w=o.memoizedState;if(v!==null){u.pending=null;var E=v=v.next;do w=r(w,E.action),E=E.next;while(E!==v);Vs(w,o.memoizedState)||(ss=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),u.lastRenderedState=w}return[w,f]}function Fy(r,o,u){var f=qe,v=$t(),w=ct;if(w){if(u===void 0)throw Error(s(407));u=u()}else u=o();var E=!Vs((pt||v).memoizedState,u);E&&(v.memoizedState=u,ss=!0),v=v.queue;var A=Gy.bind(null,f,v,r);if(xl(2048,8,A,[r]),v.getSnapshot!==o||E||Gt!==null&&Gt.memoizedState.tag&1){if(f.flags|=2048,Ua(9,_u(),Hy.bind(null,f,v,u,o),null),xt===null)throw Error(s(349));w||(Ii&124)!==0||Vy(f,o,u)}return u}function Vy(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=qe.updateQueue,o===null?(o=ng(),qe.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function Hy(r,o,u,f){o.value=u,o.getSnapshot=f,$y(o)&&Yy(r)}function Gy(r,o,u){return u(function(){$y(o)&&Yy(r)})}function $y(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!Vs(r,u)}catch{return!0}}function Yy(r){var o=Ma(r,2);o!==null&&Ws(o,r,2)}function og(r){var o=As();if(typeof r=="function"){var u=r;if(r=u(),Pr){be(!0);try{u()}finally{be(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:r},o}function qy(r,o,u,f){return r.baseState=u,rg(r,pt,typeof f=="function"?f:si)}function Ik(r,o,u,f,v){if(Tu(r))throw Error(s(485));if(r=o.action,r!==null){var w={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){w.listeners.push(E)}};R.T!==null?u(!0):w.isTransition=!1,f(w),u=o.pending,u===null?(w.next=o.pending=w,Wy(o,w)):(w.next=u.next,o.pending=u.next=w)}}function Wy(r,o){var u=o.action,f=o.payload,v=r.state;if(o.isTransition){var w=R.T,E={};R.T=E;try{var A=u(v,f),U=R.S;U!==null&&U(E,A),Xy(r,o,A)}catch(J){lg(r,o,J)}finally{R.T=w}}else try{w=u(v,f),Xy(r,o,w)}catch(J){lg(r,o,J)}}function Xy(r,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){Ky(r,o,f)},function(f){return lg(r,o,f)}):Ky(r,o,u)}function Ky(r,o,u){o.status="fulfilled",o.value=u,Zy(o),r.state=u,o=r.pending,o!==null&&(u=o.next,u===o?r.pending=null:(u=u.next,o.next=u,Wy(r,u)))}function lg(r,o,u){var f=r.pending;if(r.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=u,Zy(o),o=o.next;while(o!==f)}r.action=null}function Zy(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function Qy(r,o){return o}function Jy(r,o){if(ct){var u=xt.formState;if(u!==null){e:{var f=qe;if(ct){if(Pt){t:{for(var v=Pt,w=Pn;v.nodeType!==8;){if(!w){v=null;break t}if(v=wn(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){Pt=wn(v.nextSibling),f=v.data==="F!";break e}}Lr(f)}f=!1}f&&(o=u[0])}}return u=As(),u.memoizedState=u.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qy,lastRenderedState:o},u.queue=f,u=yx.bind(null,qe,f),f.dispatch=u,f=og(!1),w=fg.bind(null,qe,!1,f.queue),f=As(),v={state:o,dispatch:null,action:r,pending:null},f.queue=v,u=Ik.bind(null,qe,v,w,u),v.dispatch=u,f.memoizedState=r,[o,u,!1]}function ex(r){var o=$t();return tx(o,pt,r)}function tx(r,o,u){if(o=rg(r,o,Qy)[0],r=Su(si)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=yl(o)}catch(E){throw E===hl?mu:E}else f=o;o=$t();var v=o.queue,w=v.dispatch;return u!==o.memoizedState&&(qe.flags|=2048,Ua(9,_u(),Fk.bind(null,v,u),null)),[f,w,r]}function Fk(r,o){r.action=o}function sx(r){var o=$t(),u=pt;if(u!==null)return tx(o,u,r);$t(),o=o.memoizedState,u=$t();var f=u.queue.dispatch;return u.memoizedState=r,[o,f,!1]}function Ua(r,o,u,f){return r={tag:r,create:u,deps:f,inst:o,next:null},o=qe.updateQueue,o===null&&(o=ng(),qe.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=r.next=r:(f=u.next,u.next=r,r.next=f,o.lastEffect=r),r}function _u(){return{destroy:void 0,resource:void 0}}function nx(){return $t().memoizedState}function Cu(r,o,u,f){var v=As();f=f===void 0?null:f,qe.flags|=r,v.memoizedState=Ua(1|o,_u(),u,f)}function xl(r,o,u,f){var v=$t();f=f===void 0?null:f;var w=v.memoizedState.inst;pt!==null&&f!==null&&Qf(f,pt.memoizedState.deps)?v.memoizedState=Ua(o,w,u,f):(qe.flags|=r,v.memoizedState=Ua(1|o,w,u,f))}function ix(r,o){Cu(8390656,8,r,o)}function rx(r,o){xl(2048,8,r,o)}function ax(r,o){return xl(4,2,r,o)}function ox(r,o){return xl(4,4,r,o)}function lx(r,o){if(typeof o=="function"){r=r();var u=o(r);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function cx(r,o,u){u=u!=null?u.concat([r]):null,xl(4,4,lx.bind(null,o,r),u)}function cg(){}function ux(r,o){var u=$t();o=o===void 0?null:o;var f=u.memoizedState;return o!==null&&Qf(o,f[1])?f[0]:(u.memoizedState=[r,o],r)}function dx(r,o){var u=$t();o=o===void 0?null:o;var f=u.memoizedState;if(o!==null&&Qf(o,f[1]))return f[0];if(f=r(),Pr){be(!0);try{r()}finally{be(!1)}}return u.memoizedState=[f,o],f}function ug(r,o,u){return u===void 0||(Ii&1073741824)!==0?r.memoizedState=o:(r.memoizedState=u,r=gb(),qe.lanes|=r,qi|=r,u)}function hx(r,o,u,f){return Vs(u,o)?u:Pa.current!==null?(r=ug(r,u,f),Vs(r,o)||(ss=!0),r):(Ii&42)===0?(ss=!0,r.memoizedState=u):(r=gb(),qe.lanes|=r,qi|=r,o)}function fx(r,o,u,f,v){var w=V.p;V.p=w!==0&&8>w?w:8;var E=R.T,A={};R.T=A,fg(r,!1,o,u);try{var U=v(),J=R.S;if(J!==null&&J(A,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var fe=Bk(U,f);bl(r,o,fe,qs(r))}else bl(r,o,f,qs(r))}catch(me){bl(r,o,{then:function(){},status:"rejected",reason:me},qs())}finally{V.p=w,R.T=E}}function Vk(){}function dg(r,o,u,f){if(r.tag!==5)throw Error(s(476));var v=gx(r).queue;fx(r,v,o,K,u===null?Vk:function(){return px(r),u(f)})}function gx(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:K},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:u},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function px(r){var o=gx(r).next.queue;bl(r,o,{},qs())}function hg(){return ms(Ul)}function mx(){return $t().memoizedState}function vx(){return $t().memoizedState}function Hk(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var u=qs();r=Ui(u);var f=zi(o,r,u);f!==null&&(Ws(f,o,u),gl(f,o,u)),o={cache:Vf()},r.payload=o;return}o=o.return}}function Gk(r,o,u){var f=qs();u={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Tu(r)?xx(o,u):(u=Af(r,o,u,f),u!==null&&(Ws(u,r,f),bx(u,o,f)))}function yx(r,o,u){var f=qs();bl(r,o,u,f)}function bl(r,o,u,f){var v={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Tu(r))xx(o,v);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var E=o.lastRenderedState,A=w(E,u);if(v.hasEagerState=!0,v.eagerState=A,Vs(A,E))return lu(r,o,v,0),xt===null&&ou(),!1}catch{}finally{}if(u=Af(r,o,v,f),u!==null)return Ws(u,r,f),bx(u,o,f),!0}return!1}function fg(r,o,u,f){if(f={lane:2,revertLane:$g(),action:f,hasEagerState:!1,eagerState:null,next:null},Tu(r)){if(o)throw Error(s(479))}else o=Af(r,u,f,2),o!==null&&Ws(o,r,2)}function Tu(r){var o=r.alternate;return r===qe||o!==null&&o===qe}function xx(r,o){Ra=xu=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function bx(r,o,u){if((u&4194048)!==0){var f=o.lanes;f&=r.pendingLanes,u|=f,o.lanes=u,Sr(r,u)}}var Eu={readContext:ms,use:wu,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt},wx={readContext:ms,use:wu,useCallback:function(r,o){return As().memoizedState=[r,o===void 0?null:o],r},useContext:ms,useEffect:ix,useImperativeHandle:function(r,o,u){u=u!=null?u.concat([r]):null,Cu(4194308,4,lx.bind(null,o,r),u)},useLayoutEffect:function(r,o){return Cu(4194308,4,r,o)},useInsertionEffect:function(r,o){Cu(4,2,r,o)},useMemo:function(r,o){var u=As();o=o===void 0?null:o;var f=r();if(Pr){be(!0);try{r()}finally{be(!1)}}return u.memoizedState=[f,o],f},useReducer:function(r,o,u){var f=As();if(u!==void 0){var v=u(o);if(Pr){be(!0);try{u(o)}finally{be(!1)}}}else v=o;return f.memoizedState=f.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},f.queue=r,r=r.dispatch=Gk.bind(null,qe,r),[f.memoizedState,r]},useRef:function(r){var o=As();return r={current:r},o.memoizedState=r},useState:function(r){r=og(r);var o=r.queue,u=yx.bind(null,qe,o);return o.dispatch=u,[r.memoizedState,u]},useDebugValue:cg,useDeferredValue:function(r,o){var u=As();return ug(u,r,o)},useTransition:function(){var r=og(!1);return r=fx.bind(null,qe,r.queue,!0,!1),As().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,u){var f=qe,v=As();if(ct){if(u===void 0)throw Error(s(407));u=u()}else{if(u=o(),xt===null)throw Error(s(349));(rt&124)!==0||Vy(f,o,u)}v.memoizedState=u;var w={value:u,getSnapshot:o};return v.queue=w,ix(Gy.bind(null,f,w,r),[r]),f.flags|=2048,Ua(9,_u(),Hy.bind(null,f,w,u,o),null),u},useId:function(){var r=As(),o=xt.identifierPrefix;if(ct){var u=Jn,f=Qn;u=(f&~(1<<32-ge(f)-1)).toString(32)+u,o="«"+o+"R"+u,u=bu++,0<u&&(o+="H"+u.toString(32)),o+="»"}else u=Uk++,o="«"+o+"r"+u.toString(32)+"»";return r.memoizedState=o},useHostTransitionStatus:hg,useFormState:Jy,useActionState:Jy,useOptimistic:function(r){var o=As();o.memoizedState=o.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=fg.bind(null,qe,!0,u),u.dispatch=o,[r,o]},useMemoCache:ig,useCacheRefresh:function(){return As().memoizedState=Hk.bind(null,qe)}},Sx={readContext:ms,use:wu,useCallback:ux,useContext:ms,useEffect:rx,useImperativeHandle:cx,useInsertionEffect:ax,useLayoutEffect:ox,useMemo:dx,useReducer:Su,useRef:nx,useState:function(){return Su(si)},useDebugValue:cg,useDeferredValue:function(r,o){var u=$t();return hx(u,pt.memoizedState,r,o)},useTransition:function(){var r=Su(si)[0],o=$t().memoizedState;return[typeof r=="boolean"?r:yl(r),o]},useSyncExternalStore:Fy,useId:mx,useHostTransitionStatus:hg,useFormState:ex,useActionState:ex,useOptimistic:function(r,o){var u=$t();return qy(u,pt,r,o)},useMemoCache:ig,useCacheRefresh:vx},$k={readContext:ms,use:wu,useCallback:ux,useContext:ms,useEffect:rx,useImperativeHandle:cx,useInsertionEffect:ax,useLayoutEffect:ox,useMemo:dx,useReducer:ag,useRef:nx,useState:function(){return ag(si)},useDebugValue:cg,useDeferredValue:function(r,o){var u=$t();return pt===null?ug(u,r,o):hx(u,pt.memoizedState,r,o)},useTransition:function(){var r=ag(si)[0],o=$t().memoizedState;return[typeof r=="boolean"?r:yl(r),o]},useSyncExternalStore:Fy,useId:mx,useHostTransitionStatus:hg,useFormState:sx,useActionState:sx,useOptimistic:function(r,o){var u=$t();return pt!==null?qy(u,pt,r,o):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:ig,useCacheRefresh:vx},za=null,wl=0;function ju(r){var o=wl;return wl+=1,za===null&&(za=[]),Dy(za,r,o)}function Sl(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function ku(r,o){throw o.$$typeof===m?Error(s(525)):(r=Object.prototype.toString.call(o),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function _x(r){var o=r._init;return o(r._payload)}function Cx(r){function o(W,H){if(r){var Z=W.deletions;Z===null?(W.deletions=[H],W.flags|=16):Z.push(H)}}function u(W,H){if(!r)return null;for(;H!==null;)o(W,H),H=H.sibling;return null}function f(W){for(var H=new Map;W!==null;)W.key!==null?H.set(W.key,W):H.set(W.index,W),W=W.sibling;return H}function v(W,H){return W=Zn(W,H),W.index=0,W.sibling=null,W}function w(W,H,Z){return W.index=Z,r?(Z=W.alternate,Z!==null?(Z=Z.index,Z<H?(W.flags|=67108866,H):Z):(W.flags|=67108866,H)):(W.flags|=1048576,H)}function E(W){return r&&W.alternate===null&&(W.flags|=67108866),W}function A(W,H,Z,pe){return H===null||H.tag!==6?(H=Nf(Z,W.mode,pe),H.return=W,H):(H=v(H,Z),H.return=W,H)}function U(W,H,Z,pe){var ke=Z.type;return ke===S?fe(W,H,Z.props.children,pe,Z.key):H!==null&&(H.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===B&&_x(ke)===H.type)?(H=v(H,Z.props),Sl(H,Z),H.return=W,H):(H=uu(Z.type,Z.key,Z.props,null,W.mode,pe),Sl(H,Z),H.return=W,H)}function J(W,H,Z,pe){return H===null||H.tag!==4||H.stateNode.containerInfo!==Z.containerInfo||H.stateNode.implementation!==Z.implementation?(H=Pf(Z,W.mode,pe),H.return=W,H):(H=v(H,Z.children||[]),H.return=W,H)}function fe(W,H,Z,pe,ke){return H===null||H.tag!==7?(H=jr(Z,W.mode,pe,ke),H.return=W,H):(H=v(H,Z),H.return=W,H)}function me(W,H,Z){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Nf(""+H,W.mode,Z),H.return=W,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case y:return Z=uu(H.type,H.key,H.props,null,W.mode,Z),Sl(Z,H),Z.return=W,Z;case b:return H=Pf(H,W.mode,Z),H.return=W,H;case B:var pe=H._init;return H=pe(H._payload),me(W,H,Z)}if(ae(H)||F(H))return H=jr(H,W.mode,Z,null),H.return=W,H;if(typeof H.then=="function")return me(W,ju(H),Z);if(H.$$typeof===O)return me(W,gu(W,H),Z);ku(W,H)}return null}function se(W,H,Z,pe){var ke=H!==null?H.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return ke!==null?null:A(W,H,""+Z,pe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:return Z.key===ke?U(W,H,Z,pe):null;case b:return Z.key===ke?J(W,H,Z,pe):null;case B:return ke=Z._init,Z=ke(Z._payload),se(W,H,Z,pe)}if(ae(Z)||F(Z))return ke!==null?null:fe(W,H,Z,pe,null);if(typeof Z.then=="function")return se(W,H,ju(Z),pe);if(Z.$$typeof===O)return se(W,H,gu(W,Z),pe);ku(W,Z)}return null}function ie(W,H,Z,pe,ke){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return W=W.get(Z)||null,A(H,W,""+pe,ke);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case y:return W=W.get(pe.key===null?Z:pe.key)||null,U(H,W,pe,ke);case b:return W=W.get(pe.key===null?Z:pe.key)||null,J(H,W,pe,ke);case B:var Xe=pe._init;return pe=Xe(pe._payload),ie(W,H,Z,pe,ke)}if(ae(pe)||F(pe))return W=W.get(Z)||null,fe(H,W,pe,ke,null);if(typeof pe.then=="function")return ie(W,H,Z,ju(pe),ke);if(pe.$$typeof===O)return ie(W,H,Z,gu(H,pe),ke);ku(H,pe)}return null}function Ue(W,H,Z,pe){for(var ke=null,Xe=null,Ne=H,Be=H=0,is=null;Ne!==null&&Be<Z.length;Be++){Ne.index>Be?(is=Ne,Ne=null):is=Ne.sibling;var ot=se(W,Ne,Z[Be],pe);if(ot===null){Ne===null&&(Ne=is);break}r&&Ne&&ot.alternate===null&&o(W,Ne),H=w(ot,H,Be),Xe===null?ke=ot:Xe.sibling=ot,Xe=ot,Ne=is}if(Be===Z.length)return u(W,Ne),ct&&Mr(W,Be),ke;if(Ne===null){for(;Be<Z.length;Be++)Ne=me(W,Z[Be],pe),Ne!==null&&(H=w(Ne,H,Be),Xe===null?ke=Ne:Xe.sibling=Ne,Xe=Ne);return ct&&Mr(W,Be),ke}for(Ne=f(Ne);Be<Z.length;Be++)is=ie(Ne,W,Be,Z[Be],pe),is!==null&&(r&&is.alternate!==null&&Ne.delete(is.key===null?Be:is.key),H=w(is,H,Be),Xe===null?ke=is:Xe.sibling=is,Xe=is);return r&&Ne.forEach(function(sr){return o(W,sr)}),ct&&Mr(W,Be),ke}function Pe(W,H,Z,pe){if(Z==null)throw Error(s(151));for(var ke=null,Xe=null,Ne=H,Be=H=0,is=null,ot=Z.next();Ne!==null&&!ot.done;Be++,ot=Z.next()){Ne.index>Be?(is=Ne,Ne=null):is=Ne.sibling;var sr=se(W,Ne,ot.value,pe);if(sr===null){Ne===null&&(Ne=is);break}r&&Ne&&sr.alternate===null&&o(W,Ne),H=w(sr,H,Be),Xe===null?ke=sr:Xe.sibling=sr,Xe=sr,Ne=is}if(ot.done)return u(W,Ne),ct&&Mr(W,Be),ke;if(Ne===null){for(;!ot.done;Be++,ot=Z.next())ot=me(W,ot.value,pe),ot!==null&&(H=w(ot,H,Be),Xe===null?ke=ot:Xe.sibling=ot,Xe=ot);return ct&&Mr(W,Be),ke}for(Ne=f(Ne);!ot.done;Be++,ot=Z.next())ot=ie(Ne,W,Be,ot.value,pe),ot!==null&&(r&&ot.alternate!==null&&Ne.delete(ot.key===null?Be:ot.key),H=w(ot,H,Be),Xe===null?ke=ot:Xe.sibling=ot,Xe=ot);return r&&Ne.forEach(function(YM){return o(W,YM)}),ct&&Mr(W,Be),ke}function vt(W,H,Z,pe){if(typeof Z=="object"&&Z!==null&&Z.type===S&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:e:{for(var ke=Z.key;H!==null;){if(H.key===ke){if(ke=Z.type,ke===S){if(H.tag===7){u(W,H.sibling),pe=v(H,Z.props.children),pe.return=W,W=pe;break e}}else if(H.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===B&&_x(ke)===H.type){u(W,H.sibling),pe=v(H,Z.props),Sl(pe,Z),pe.return=W,W=pe;break e}u(W,H);break}else o(W,H);H=H.sibling}Z.type===S?(pe=jr(Z.props.children,W.mode,pe,Z.key),pe.return=W,W=pe):(pe=uu(Z.type,Z.key,Z.props,null,W.mode,pe),Sl(pe,Z),pe.return=W,W=pe)}return E(W);case b:e:{for(ke=Z.key;H!==null;){if(H.key===ke)if(H.tag===4&&H.stateNode.containerInfo===Z.containerInfo&&H.stateNode.implementation===Z.implementation){u(W,H.sibling),pe=v(H,Z.children||[]),pe.return=W,W=pe;break e}else{u(W,H);break}else o(W,H);H=H.sibling}pe=Pf(Z,W.mode,pe),pe.return=W,W=pe}return E(W);case B:return ke=Z._init,Z=ke(Z._payload),vt(W,H,Z,pe)}if(ae(Z))return Ue(W,H,Z,pe);if(F(Z)){if(ke=F(Z),typeof ke!="function")throw Error(s(150));return Z=ke.call(Z),Pe(W,H,Z,pe)}if(typeof Z.then=="function")return vt(W,H,ju(Z),pe);if(Z.$$typeof===O)return vt(W,H,gu(W,Z),pe);ku(W,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,H!==null&&H.tag===6?(u(W,H.sibling),pe=v(H,Z),pe.return=W,W=pe):(u(W,H),pe=Nf(Z,W.mode,pe),pe.return=W,W=pe),E(W)):u(W,H)}return function(W,H,Z,pe){try{wl=0;var ke=vt(W,H,Z,pe);return za=null,ke}catch(Ne){if(Ne===hl||Ne===mu)throw Ne;var Xe=Hs(29,Ne,null,W.mode);return Xe.lanes=pe,Xe.return=W,Xe}finally{}}}var Ia=Cx(!0),Tx=Cx(!1),on=q(null),Rn=null;function Fi(r){var o=r.alternate;ne(Xt,Xt.current&1),ne(on,r),Rn===null&&(o===null||Pa.current!==null||o.memoizedState!==null)&&(Rn=r)}function Ex(r){if(r.tag===22){if(ne(Xt,Xt.current),ne(on,r),Rn===null){var o=r.alternate;o!==null&&o.memoizedState!==null&&(Rn=r)}}else Vi()}function Vi(){ne(Xt,Xt.current),ne(on,on.current)}function ni(r){de(on),Rn===r&&(Rn=null),de(Xt)}var Xt=q(0);function Mu(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||np(u)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function gg(r,o,u,f){o=r.memoizedState,u=u(f,o),u=u==null?o:g({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var pg={enqueueSetState:function(r,o,u){r=r._reactInternals;var f=qs(),v=Ui(f);v.payload=o,u!=null&&(v.callback=u),o=zi(r,v,f),o!==null&&(Ws(o,r,f),gl(o,r,f))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var f=qs(),v=Ui(f);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=zi(r,v,f),o!==null&&(Ws(o,r,f),gl(o,r,f))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=qs(),f=Ui(u);f.tag=2,o!=null&&(f.callback=o),o=zi(r,f,u),o!==null&&(Ws(o,r,u),gl(o,r,u))}};function jx(r,o,u,f,v,w,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,w,E):o.prototype&&o.prototype.isPureReactComponent?!il(u,f)||!il(v,w):!0}function kx(r,o,u,f){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==r&&pg.enqueueReplaceState(o,o.state,null)}function Rr(r,o){var u=o;if("ref"in o){u={};for(var f in o)f!=="ref"&&(u[f]=o[f])}if(r=r.defaultProps){u===o&&(u=g({},u));for(var v in r)u[v]===void 0&&(u[v]=r[v])}return u}var Ou=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function Mx(r){Ou(r)}function Ox(r){console.error(r)}function Lx(r){Ou(r)}function Lu(r,o){try{var u=r.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function Ax(r,o,u){try{var f=r.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function mg(r,o,u){return u=Ui(u),u.tag=3,u.payload={element:null},u.callback=function(){Lu(r,o)},u}function Dx(r){return r=Ui(r),r.tag=3,r}function Nx(r,o,u,f){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var w=f.value;r.payload=function(){return v(w)},r.callback=function(){Ax(o,u,f)}}var E=u.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(r.callback=function(){Ax(o,u,f),typeof v!="function"&&(Wi===null?Wi=new Set([this]):Wi.add(this));var A=f.stack;this.componentDidCatch(f.value,{componentStack:A!==null?A:""})})}function Yk(r,o,u,f,v){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=u.alternate,o!==null&&cl(o,u,v,!0),u=on.current,u!==null){switch(u.tag){case 13:return Rn===null?Ig():u.alternate===null&&Rt===0&&(Rt=3),u.flags&=-257,u.flags|=65536,u.lanes=v,f===$f?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([f]):o.add(f),Vg(r,f,v)),!1;case 22:return u.flags|=65536,f===$f?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([f]):u.add(f)),Vg(r,f,v)),!1}throw Error(s(435,u.tag))}return Vg(r,f,v),Ig(),!1}if(ct)return o=on.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,f!==Uf&&(r=Error(s(422),{cause:f}),ll(sn(r,u)))):(f!==Uf&&(o=Error(s(423),{cause:f}),ll(sn(o,u))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,f=sn(f,u),v=mg(r.stateNode,f,v),Wf(r,v),Rt!==4&&(Rt=2)),!1;var w=Error(s(520),{cause:f});if(w=sn(w,u),Ml===null?Ml=[w]:Ml.push(w),Rt!==4&&(Rt=2),o===null)return!0;f=sn(f,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,r=v&-v,u.lanes|=r,r=mg(u.stateNode,f,r),Wf(u,r),!1;case 1:if(o=u.type,w=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Wi===null||!Wi.has(w))))return u.flags|=65536,v&=-v,u.lanes|=v,v=Dx(v),Nx(v,r,u,f),Wf(u,v),!1}u=u.return}while(u!==null);return!1}var Px=Error(s(461)),ss=!1;function us(r,o,u,f){o.child=r===null?Tx(o,null,u,f):Ia(o,r.child,u,f)}function Rx(r,o,u,f,v){u=u.render;var w=o.ref;if("ref"in f){var E={};for(var A in f)A!=="ref"&&(E[A]=f[A])}else E=f;return Dr(o),f=Jf(r,o,u,E,w,v),A=eg(),r!==null&&!ss?(tg(r,o,v),ii(r,o,v)):(ct&&A&&Rf(o),o.flags|=1,us(r,o,f,v),o.child)}function Bx(r,o,u,f,v){if(r===null){var w=u.type;return typeof w=="function"&&!Df(w)&&w.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=w,Ux(r,o,w,f,v)):(r=uu(u.type,null,f,o,o.mode,v),r.ref=o.ref,r.return=o,o.child=r)}if(w=r.child,!Cg(r,v)){var E=w.memoizedProps;if(u=u.compare,u=u!==null?u:il,u(E,f)&&r.ref===o.ref)return ii(r,o,v)}return o.flags|=1,r=Zn(w,f),r.ref=o.ref,r.return=o,o.child=r}function Ux(r,o,u,f,v){if(r!==null){var w=r.memoizedProps;if(il(w,f)&&r.ref===o.ref)if(ss=!1,o.pendingProps=f=w,Cg(r,v))(r.flags&131072)!==0&&(ss=!0);else return o.lanes=r.lanes,ii(r,o,v)}return vg(r,o,u,f,v)}function zx(r,o,u){var f=o.pendingProps,v=f.children,w=r!==null?r.memoizedState:null;if(f.mode==="hidden"){if((o.flags&128)!==0){if(f=w!==null?w.baseLanes|u:u,r!==null){for(v=o.child=r.child,w=0;v!==null;)w=w|v.lanes|v.childLanes,v=v.sibling;o.childLanes=w&~f}else o.childLanes=0,o.child=null;return Ix(r,o,f,u)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&pu(o,w!==null?w.cachePool:null),w!==null?Uy(o,w):Kf(),Ex(o);else return o.lanes=o.childLanes=536870912,Ix(r,o,w!==null?w.baseLanes|u:u,u)}else w!==null?(pu(o,w.cachePool),Uy(o,w),Vi(),o.memoizedState=null):(r!==null&&pu(o,null),Kf(),Vi());return us(r,o,v,u),o.child}function Ix(r,o,u,f){var v=Gf();return v=v===null?null:{parent:Wt._currentValue,pool:v},o.memoizedState={baseLanes:u,cachePool:v},r!==null&&pu(o,null),Kf(),Ex(o),r!==null&&cl(r,o,f,!0),null}function Au(r,o){var u=o.ref;if(u===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(s(284));(r===null||r.ref!==u)&&(o.flags|=4194816)}}function vg(r,o,u,f,v){return Dr(o),u=Jf(r,o,u,f,void 0,v),f=eg(),r!==null&&!ss?(tg(r,o,v),ii(r,o,v)):(ct&&f&&Rf(o),o.flags|=1,us(r,o,u,v),o.child)}function Fx(r,o,u,f,v,w){return Dr(o),o.updateQueue=null,u=Iy(o,f,u,v),zy(r),f=eg(),r!==null&&!ss?(tg(r,o,w),ii(r,o,w)):(ct&&f&&Rf(o),o.flags|=1,us(r,o,u,w),o.child)}function Vx(r,o,u,f,v){if(Dr(o),o.stateNode===null){var w=Oa,E=u.contextType;typeof E=="object"&&E!==null&&(w=ms(E)),w=new u(f,w),o.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=pg,o.stateNode=w,w._reactInternals=o,w=o.stateNode,w.props=f,w.state=o.memoizedState,w.refs={},Yf(o),E=u.contextType,w.context=typeof E=="object"&&E!==null?ms(E):Oa,w.state=o.memoizedState,E=u.getDerivedStateFromProps,typeof E=="function"&&(gg(o,u,E,f),w.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(E=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),E!==w.state&&pg.enqueueReplaceState(w,w.state,null),ml(o,f,w,v),pl(),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(r===null){w=o.stateNode;var A=o.memoizedProps,U=Rr(u,A);w.props=U;var J=w.context,fe=u.contextType;E=Oa,typeof fe=="object"&&fe!==null&&(E=ms(fe));var me=u.getDerivedStateFromProps;fe=typeof me=="function"||typeof w.getSnapshotBeforeUpdate=="function",A=o.pendingProps!==A,fe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A||J!==E)&&kx(o,w,f,E),Bi=!1;var se=o.memoizedState;w.state=se,ml(o,f,w,v),pl(),J=o.memoizedState,A||se!==J||Bi?(typeof me=="function"&&(gg(o,u,me,f),J=o.memoizedState),(U=Bi||jx(o,u,U,f,se,J,E))?(fe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=J),w.props=f,w.state=J,w.context=E,f=U):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{w=o.stateNode,qf(r,o),E=o.memoizedProps,fe=Rr(u,E),w.props=fe,me=o.pendingProps,se=w.context,J=u.contextType,U=Oa,typeof J=="object"&&J!==null&&(U=ms(J)),A=u.getDerivedStateFromProps,(J=typeof A=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(E!==me||se!==U)&&kx(o,w,f,U),Bi=!1,se=o.memoizedState,w.state=se,ml(o,f,w,v),pl();var ie=o.memoizedState;E!==me||se!==ie||Bi||r!==null&&r.dependencies!==null&&fu(r.dependencies)?(typeof A=="function"&&(gg(o,u,A,f),ie=o.memoizedState),(fe=Bi||jx(o,u,fe,f,se,ie,U)||r!==null&&r.dependencies!==null&&fu(r.dependencies))?(J||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(f,ie,U),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(f,ie,U)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||E===r.memoizedProps&&se===r.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&se===r.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ie),w.props=f,w.state=ie,w.context=U,f=fe):(typeof w.componentDidUpdate!="function"||E===r.memoizedProps&&se===r.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&se===r.memoizedState||(o.flags|=1024),f=!1)}return w=f,Au(r,o),f=(o.flags&128)!==0,w||f?(w=o.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:w.render(),o.flags|=1,r!==null&&f?(o.child=Ia(o,r.child,null,v),o.child=Ia(o,null,u,v)):us(r,o,u,v),o.memoizedState=w.state,r=o.child):r=ii(r,o,v),r}function Hx(r,o,u,f){return ol(),o.flags|=256,us(r,o,u,f),o.child}var yg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xg(r){return{baseLanes:r,cachePool:Oy()}}function bg(r,o,u){return r=r!==null?r.childLanes&~u:0,o&&(r|=ln),r}function Gx(r,o,u){var f=o.pendingProps,v=!1,w=(o.flags&128)!==0,E;if((E=w)||(E=r!==null&&r.memoizedState===null?!1:(Xt.current&2)!==0),E&&(v=!0,o.flags&=-129),E=(o.flags&32)!==0,o.flags&=-33,r===null){if(ct){if(v?Fi(o):Vi(),ct){var A=Pt,U;if(U=A){e:{for(U=A,A=Pn;U.nodeType!==8;){if(!A){A=null;break e}if(U=wn(U.nextSibling),U===null){A=null;break e}}A=U}A!==null?(o.memoizedState={dehydrated:A,treeContext:kr!==null?{id:Qn,overflow:Jn}:null,retryLane:536870912,hydrationErrors:null},U=Hs(18,null,null,0),U.stateNode=A,U.return=o,o.child=U,_s=o,Pt=null,U=!0):U=!1}U||Lr(o)}if(A=o.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return np(A)?o.lanes=32:o.lanes=536870912,null;ni(o)}return A=f.children,f=f.fallback,v?(Vi(),v=o.mode,A=Du({mode:"hidden",children:A},v),f=jr(f,v,u,null),A.return=o,f.return=o,A.sibling=f,o.child=A,v=o.child,v.memoizedState=xg(u),v.childLanes=bg(r,E,u),o.memoizedState=yg,f):(Fi(o),wg(o,A))}if(U=r.memoizedState,U!==null&&(A=U.dehydrated,A!==null)){if(w)o.flags&256?(Fi(o),o.flags&=-257,o=Sg(r,o,u)):o.memoizedState!==null?(Vi(),o.child=r.child,o.flags|=128,o=null):(Vi(),v=f.fallback,A=o.mode,f=Du({mode:"visible",children:f.children},A),v=jr(v,A,u,null),v.flags|=2,f.return=o,v.return=o,f.sibling=v,o.child=f,Ia(o,r.child,null,u),f=o.child,f.memoizedState=xg(u),f.childLanes=bg(r,E,u),o.memoizedState=yg,o=v);else if(Fi(o),np(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var J=E.dgst;E=J,f=Error(s(419)),f.stack="",f.digest=E,ll({value:f,source:null,stack:null}),o=Sg(r,o,u)}else if(ss||cl(r,o,u,!1),E=(u&r.childLanes)!==0,ss||E){if(E=xt,E!==null&&(f=u&-u,f=(f&42)!==0?1:ga(f),f=(f&(E.suspendedLanes|u))!==0?0:f,f!==0&&f!==U.retryLane))throw U.retryLane=f,Ma(r,f),Ws(E,r,f),Px;A.data==="$?"||Ig(),o=Sg(r,o,u)}else A.data==="$?"?(o.flags|=192,o.child=r.child,o=null):(r=U.treeContext,Pt=wn(A.nextSibling),_s=o,ct=!0,Or=null,Pn=!1,r!==null&&(rn[an++]=Qn,rn[an++]=Jn,rn[an++]=kr,Qn=r.id,Jn=r.overflow,kr=o),o=wg(o,f.children),o.flags|=4096);return o}return v?(Vi(),v=f.fallback,A=o.mode,U=r.child,J=U.sibling,f=Zn(U,{mode:"hidden",children:f.children}),f.subtreeFlags=U.subtreeFlags&65011712,J!==null?v=Zn(J,v):(v=jr(v,A,u,null),v.flags|=2),v.return=o,f.return=o,f.sibling=v,o.child=f,f=v,v=o.child,A=r.child.memoizedState,A===null?A=xg(u):(U=A.cachePool,U!==null?(J=Wt._currentValue,U=U.parent!==J?{parent:J,pool:J}:U):U=Oy(),A={baseLanes:A.baseLanes|u,cachePool:U}),v.memoizedState=A,v.childLanes=bg(r,E,u),o.memoizedState=yg,f):(Fi(o),u=r.child,r=u.sibling,u=Zn(u,{mode:"visible",children:f.children}),u.return=o,u.sibling=null,r!==null&&(E=o.deletions,E===null?(o.deletions=[r],o.flags|=16):E.push(r)),o.child=u,o.memoizedState=null,u)}function wg(r,o){return o=Du({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Du(r,o){return r=Hs(22,r,null,o),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Sg(r,o,u){return Ia(o,r.child,null,u),r=wg(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function $x(r,o,u){r.lanes|=o;var f=r.alternate;f!==null&&(f.lanes|=o),If(r.return,o,u)}function _g(r,o,u,f,v){var w=r.memoizedState;w===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:v}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=u,w.tailMode=v)}function Yx(r,o,u){var f=o.pendingProps,v=f.revealOrder,w=f.tail;if(us(r,o,f.children,u),f=Xt.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&$x(r,u,o);else if(r.tag===19)$x(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}f&=1}switch(ne(Xt,f),v){case"forwards":for(u=o.child,v=null;u!==null;)r=u.alternate,r!==null&&Mu(r)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),_g(o,!1,v,u,w);break;case"backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(r=v.alternate,r!==null&&Mu(r)===null){o.child=v;break}r=v.sibling,v.sibling=u,u=v,v=r}_g(o,!0,u,null,w);break;case"together":_g(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ii(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),qi|=o.lanes,(u&o.childLanes)===0)if(r!==null){if(cl(r,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(s(153));if(o.child!==null){for(r=o.child,u=Zn(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=Zn(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function Cg(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&fu(r)))}function qk(r,o,u){switch(o.tag){case 3:Te(o,o.stateNode.containerInfo),Ri(o,Wt,r.memoizedState.cache),ol();break;case 27:case 5:oe(o);break;case 4:Te(o,o.stateNode.containerInfo);break;case 10:Ri(o,o.type,o.memoizedProps.value);break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(Fi(o),o.flags|=128,null):(u&o.child.childLanes)!==0?Gx(r,o,u):(Fi(o),r=ii(r,o,u),r!==null?r.sibling:null);Fi(o);break;case 19:var v=(r.flags&128)!==0;if(f=(u&o.childLanes)!==0,f||(cl(r,o,u,!1),f=(u&o.childLanes)!==0),v){if(f)return Yx(r,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ne(Xt,Xt.current),f)break;return null;case 22:case 23:return o.lanes=0,zx(r,o,u);case 24:Ri(o,Wt,r.memoizedState.cache)}return ii(r,o,u)}function qx(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps)ss=!0;else{if(!Cg(r,u)&&(o.flags&128)===0)return ss=!1,qk(r,o,u);ss=(r.flags&131072)!==0}else ss=!1,ct&&(o.flags&1048576)!==0&&_y(o,hu,o.index);switch(o.lanes=0,o.tag){case 16:e:{r=o.pendingProps;var f=o.elementType,v=f._init;if(f=v(f._payload),o.type=f,typeof f=="function")Df(f)?(r=Rr(f,r),o.tag=1,o=Vx(null,o,f,r,u)):(o.tag=0,o=vg(null,o,f,r,u));else{if(f!=null){if(v=f.$$typeof,v===L){o.tag=11,o=Rx(null,o,f,r,u);break e}else if(v===k){o.tag=14,o=Bx(null,o,f,r,u);break e}}throw o=X(f)||f,Error(s(306,o,""))}}return o;case 0:return vg(r,o,o.type,o.pendingProps,u);case 1:return f=o.type,v=Rr(f,o.pendingProps),Vx(r,o,f,v,u);case 3:e:{if(Te(o,o.stateNode.containerInfo),r===null)throw Error(s(387));f=o.pendingProps;var w=o.memoizedState;v=w.element,qf(r,o),ml(o,f,null,u);var E=o.memoizedState;if(f=E.cache,Ri(o,Wt,f),f!==w.cache&&Ff(o,[Wt],u,!0),pl(),f=E.element,w.isDehydrated)if(w={element:f,isDehydrated:!1,cache:E.cache},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){o=Hx(r,o,f,u);break e}else if(f!==v){v=sn(Error(s(424)),o),ll(v),o=Hx(r,o,f,u);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Pt=wn(r.firstChild),_s=o,ct=!0,Or=null,Pn=!0,u=Tx(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(ol(),f===v){o=ii(r,o,u);break e}us(r,o,f,u)}o=o.child}return o;case 26:return Au(r,o),r===null?(u=Zb(o.type,null,o.pendingProps,null))?o.memoizedState=u:ct||(u=o.type,r=o.pendingProps,f=qu(Se.current).createElement(u),f[Ae]=o,f[Os]=r,hs(f,u,r),ts(f),o.stateNode=f):o.memoizedState=Zb(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return oe(o),r===null&&ct&&(f=o.stateNode=Wb(o.type,o.pendingProps,Se.current),_s=o,Pn=!0,v=Pt,Zi(o.type)?(ip=v,Pt=wn(f.firstChild)):Pt=v),us(r,o,o.pendingProps.children,u),Au(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&ct&&((v=f=Pt)&&(f=wM(f,o.type,o.pendingProps,Pn),f!==null?(o.stateNode=f,_s=o,Pt=wn(f.firstChild),Pn=!1,v=!0):v=!1),v||Lr(o)),oe(o),v=o.type,w=o.pendingProps,E=r!==null?r.memoizedProps:null,f=w.children,ep(v,w)?f=null:E!==null&&ep(v,E)&&(o.flags|=32),o.memoizedState!==null&&(v=Jf(r,o,zk,null,null,u),Ul._currentValue=v),Au(r,o),us(r,o,f,u),o.child;case 6:return r===null&&ct&&((r=u=Pt)&&(u=SM(u,o.pendingProps,Pn),u!==null?(o.stateNode=u,_s=o,Pt=null,r=!0):r=!1),r||Lr(o)),null;case 13:return Gx(r,o,u);case 4:return Te(o,o.stateNode.containerInfo),f=o.pendingProps,r===null?o.child=Ia(o,null,f,u):us(r,o,f,u),o.child;case 11:return Rx(r,o,o.type,o.pendingProps,u);case 7:return us(r,o,o.pendingProps,u),o.child;case 8:return us(r,o,o.pendingProps.children,u),o.child;case 12:return us(r,o,o.pendingProps.children,u),o.child;case 10:return f=o.pendingProps,Ri(o,o.type,f.value),us(r,o,f.children,u),o.child;case 9:return v=o.type._context,f=o.pendingProps.children,Dr(o),v=ms(v),f=f(v),o.flags|=1,us(r,o,f,u),o.child;case 14:return Bx(r,o,o.type,o.pendingProps,u);case 15:return Ux(r,o,o.type,o.pendingProps,u);case 19:return Yx(r,o,u);case 31:return f=o.pendingProps,u=o.mode,f={mode:f.mode,children:f.children},r===null?(u=Du(f,u),u.ref=o.ref,o.child=u,u.return=o,o=u):(u=Zn(r.child,f),u.ref=o.ref,o.child=u,u.return=o,o=u),o;case 22:return zx(r,o,u);case 24:return Dr(o),f=ms(Wt),r===null?(v=Gf(),v===null&&(v=xt,w=Vf(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=u),v=w),o.memoizedState={parent:f,cache:v},Yf(o),Ri(o,Wt,v)):((r.lanes&u)!==0&&(qf(r,o),ml(o,null,null,u),pl()),v=r.memoizedState,w=o.memoizedState,v.parent!==f?(v={parent:f,cache:f},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),Ri(o,Wt,f)):(f=w.cache,Ri(o,Wt,f),f!==v.cache&&Ff(o,[Wt],u,!0))),us(r,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function ri(r){r.flags|=4}function Wx(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!sw(o)){if(o=on.current,o!==null&&((rt&4194048)===rt?Rn!==null:(rt&62914560)!==rt&&(rt&536870912)===0||o!==Rn))throw fl=$f,Ly;r.flags|=8192}}function Nu(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Ut():536870912,r.lanes|=o,Ga|=o)}function _l(r,o){if(!ct)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function Mt(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,f=0;if(o)for(var v=r.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=f,r.childLanes=u,o}function Wk(r,o,u){var f=o.pendingProps;switch(Bf(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(o),null;case 1:return Mt(o),null;case 3:return u=o.stateNode,f=null,r!==null&&(f=r.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),ti(Wt),Ie(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(al(o)?ri(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Ey())),Mt(o),null;case 26:return u=o.memoizedState,r===null?(ri(o),u!==null?(Mt(o),Wx(o,u)):(Mt(o),o.flags&=-16777217)):u?u!==r.memoizedState?(ri(o),Mt(o),Wx(o,u)):(Mt(o),o.flags&=-16777217):(r.memoizedProps!==f&&ri(o),Mt(o),o.flags&=-16777217),null;case 27:xe(o),u=Se.current;var v=o.type;if(r!==null&&o.stateNode!=null)r.memoizedProps!==f&&ri(o);else{if(!f){if(o.stateNode===null)throw Error(s(166));return Mt(o),null}r=ve.current,al(o)?Cy(o):(r=Wb(v,f,u),o.stateNode=r,ri(o))}return Mt(o),null;case 5:if(xe(o),u=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==f&&ri(o);else{if(!f){if(o.stateNode===null)throw Error(s(166));return Mt(o),null}if(r=ve.current,al(o))Cy(o);else{switch(v=qu(Se.current),r){case 1:r=v.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:r=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":r=v.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":r=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":r=v.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof f.is=="string"?v.createElement("select",{is:f.is}):v.createElement("select"),f.multiple?r.multiple=!0:f.size&&(r.size=f.size);break;default:r=typeof f.is=="string"?v.createElement(u,{is:f.is}):v.createElement(u)}}r[Ae]=o,r[Os]=f;e:for(v=o.child;v!==null;){if(v.tag===5||v.tag===6)r.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===o)break e;for(;v.sibling===null;){if(v.return===null||v.return===o)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}o.stateNode=r;e:switch(hs(r,u,f),u){case"button":case"input":case"select":case"textarea":r=!!f.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ri(o)}}return Mt(o),o.flags&=-16777217,null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==f&&ri(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(s(166));if(r=Se.current,al(o)){if(r=o.stateNode,u=o.memoizedProps,f=null,v=_s,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}r[Ae]=o,r=!!(r.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||Fb(r.nodeValue,u)),r||Lr(o)}else r=qu(r).createTextNode(f),r[Ae]=o,o.stateNode=r}return Mt(o),null;case 13:if(f=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=al(o),f!==null&&f.dehydrated!==null){if(r===null){if(!v)throw Error(s(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[Ae]=o}else ol(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Mt(o),v=!1}else v=Ey(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(ni(o),o):(ni(o),null)}if(ni(o),(o.flags&128)!==0)return o.lanes=u,o;if(u=f!==null,r=r!==null&&r.memoizedState!==null,u){f=o.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool);var w=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(w=f.memoizedState.cachePool.pool),w!==v&&(f.flags|=2048)}return u!==r&&u&&(o.child.flags|=8192),Nu(o,o.updateQueue),Mt(o),null;case 4:return Ie(),r===null&&Xg(o.stateNode.containerInfo),Mt(o),null;case 10:return ti(o.type),Mt(o),null;case 19:if(de(Xt),v=o.memoizedState,v===null)return Mt(o),null;if(f=(o.flags&128)!==0,w=v.rendering,w===null)if(f)_l(v,!1);else{if(Rt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(w=Mu(r),w!==null){for(o.flags|=128,_l(v,!1),r=w.updateQueue,o.updateQueue=r,Nu(o,r),o.subtreeFlags=0,r=u,u=o.child;u!==null;)Sy(u,r),u=u.sibling;return ne(Xt,Xt.current&1|2),o.child}r=r.sibling}v.tail!==null&&ye()>Bu&&(o.flags|=128,f=!0,_l(v,!1),o.lanes=4194304)}else{if(!f)if(r=Mu(w),r!==null){if(o.flags|=128,f=!0,r=r.updateQueue,o.updateQueue=r,Nu(o,r),_l(v,!0),v.tail===null&&v.tailMode==="hidden"&&!w.alternate&&!ct)return Mt(o),null}else 2*ye()-v.renderingStartTime>Bu&&u!==536870912&&(o.flags|=128,f=!0,_l(v,!1),o.lanes=4194304);v.isBackwards?(w.sibling=o.child,o.child=w):(r=v.last,r!==null?r.sibling=w:o.child=w,v.last=w)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=ye(),o.sibling=null,r=Xt.current,ne(Xt,f?r&1|2:r&1),o):(Mt(o),null);case 22:case 23:return ni(o),Zf(),f=o.memoizedState!==null,r!==null?r.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(u&536870912)!==0&&(o.flags&128)===0&&(Mt(o),o.subtreeFlags&6&&(o.flags|=8192)):Mt(o),u=o.updateQueue,u!==null&&Nu(o,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==u&&(o.flags|=2048),r!==null&&de(Nr),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),ti(Wt),Mt(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function Xk(r,o){switch(Bf(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return ti(Wt),Ie(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return xe(o),null;case 13:if(ni(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(s(340));ol()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return de(Xt),null;case 4:return Ie(),null;case 10:return ti(o.type),null;case 22:case 23:return ni(o),Zf(),r!==null&&de(Nr),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return ti(Wt),null;case 25:return null;default:return null}}function Xx(r,o){switch(Bf(o),o.tag){case 3:ti(Wt),Ie();break;case 26:case 27:case 5:xe(o);break;case 4:Ie();break;case 13:ni(o);break;case 19:de(Xt);break;case 10:ti(o.type);break;case 22:case 23:ni(o),Zf(),r!==null&&de(Nr);break;case 24:ti(Wt)}}function Cl(r,o){try{var u=o.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var v=f.next;u=v;do{if((u.tag&r)===r){f=void 0;var w=u.create,E=u.inst;f=w(),E.destroy=f}u=u.next}while(u!==v)}}catch(A){yt(o,o.return,A)}}function Hi(r,o,u){try{var f=o.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var w=v.next;f=w;do{if((f.tag&r)===r){var E=f.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,v=o;var U=u,J=A;try{J()}catch(fe){yt(v,U,fe)}}}f=f.next}while(f!==w)}}catch(fe){yt(o,o.return,fe)}}function Kx(r){var o=r.updateQueue;if(o!==null){var u=r.stateNode;try{By(o,u)}catch(f){yt(r,r.return,f)}}}function Zx(r,o,u){u.props=Rr(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(f){yt(r,o,f)}}function Tl(r,o){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var f=r.stateNode;break;case 30:f=r.stateNode;break;default:f=r.stateNode}typeof u=="function"?r.refCleanup=u(f):u.current=f}}catch(v){yt(r,o,v)}}function Bn(r,o){var u=r.ref,f=r.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(v){yt(r,o,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){yt(r,o,v)}else u.current=null}function Qx(r){var o=r.type,u=r.memoizedProps,f=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(v){yt(r,r.return,v)}}function Tg(r,o,u){try{var f=r.stateNode;mM(f,r.type,u,o),f[Os]=o}catch(v){yt(r,r.return,v)}}function Jx(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Zi(r.type)||r.tag===4}function Eg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Jx(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Zi(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function jg(r,o,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(r),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Yu));else if(f!==4&&(f===27&&Zi(r.type)&&(u=r.stateNode,o=null),r=r.child,r!==null))for(jg(r,o,u),r=r.sibling;r!==null;)jg(r,o,u),r=r.sibling}function Pu(r,o,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?u.insertBefore(r,o):u.appendChild(r);else if(f!==4&&(f===27&&Zi(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(Pu(r,o,u),r=r.sibling;r!==null;)Pu(r,o,u),r=r.sibling}function eb(r){var o=r.stateNode,u=r.memoizedProps;try{for(var f=r.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);hs(o,f,u),o[Ae]=r,o[Os]=u}catch(w){yt(r,r.return,w)}}var ai=!1,It=!1,kg=!1,tb=typeof WeakSet=="function"?WeakSet:Set,ns=null;function Kk(r,o){if(r=r.containerInfo,Qg=Ju,r=hy(r),Ef(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var v=f.anchorOffset,w=f.focusNode;f=f.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var E=0,A=-1,U=-1,J=0,fe=0,me=r,se=null;t:for(;;){for(var ie;me!==u||v!==0&&me.nodeType!==3||(A=E+v),me!==w||f!==0&&me.nodeType!==3||(U=E+f),me.nodeType===3&&(E+=me.nodeValue.length),(ie=me.firstChild)!==null;)se=me,me=ie;for(;;){if(me===r)break t;if(se===u&&++J===v&&(A=E),se===w&&++fe===f&&(U=E),(ie=me.nextSibling)!==null)break;me=se,se=me.parentNode}me=ie}u=A===-1||U===-1?null:{start:A,end:U}}else u=null}u=u||{start:0,end:0}}else u=null;for(Jg={focusedElem:r,selectionRange:u},Ju=!1,ns=o;ns!==null;)if(o=ns,r=o.child,(o.subtreeFlags&1024)!==0&&r!==null)r.return=o,ns=r;else for(;ns!==null;){switch(o=ns,w=o.alternate,r=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&w!==null){r=void 0,u=o,v=w.memoizedProps,w=w.memoizedState,f=u.stateNode;try{var Ue=Rr(u.type,v,u.elementType===u.type);r=f.getSnapshotBeforeUpdate(Ue,w),f.__reactInternalSnapshotBeforeUpdate=r}catch(Pe){yt(u,u.return,Pe)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,u=r.nodeType,u===9)sp(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":sp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=o.sibling,r!==null){r.return=o.return,ns=r;break}ns=o.return}}function sb(r,o,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:Gi(r,u),f&4&&Cl(5,u);break;case 1:if(Gi(r,u),f&4)if(r=u.stateNode,o===null)try{r.componentDidMount()}catch(E){yt(u,u.return,E)}else{var v=Rr(u.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(v,o,r.__reactInternalSnapshotBeforeUpdate)}catch(E){yt(u,u.return,E)}}f&64&&Kx(u),f&512&&Tl(u,u.return);break;case 3:if(Gi(r,u),f&64&&(r=u.updateQueue,r!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{By(r,o)}catch(E){yt(u,u.return,E)}}break;case 27:o===null&&f&4&&eb(u);case 26:case 5:Gi(r,u),o===null&&f&4&&Qx(u),f&512&&Tl(u,u.return);break;case 12:Gi(r,u);break;case 13:Gi(r,u),f&4&&rb(r,u),f&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=rM.bind(null,u),_M(r,u))));break;case 22:if(f=u.memoizedState!==null||ai,!f){o=o!==null&&o.memoizedState!==null||It,v=ai;var w=It;ai=f,(It=o)&&!w?$i(r,u,(u.subtreeFlags&8772)!==0):Gi(r,u),ai=v,It=w}break;case 30:break;default:Gi(r,u)}}function nb(r){var o=r.alternate;o!==null&&(r.alternate=null,nb(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&of(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Ct=null,Ds=!1;function oi(r,o,u){for(u=u.child;u!==null;)ib(r,o,u),u=u.sibling}function ib(r,o,u){if(we&&typeof we.onCommitFiberUnmount=="function")try{we.onCommitFiberUnmount(Le,u)}catch{}switch(u.tag){case 26:It||Bn(u,o),oi(r,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:It||Bn(u,o);var f=Ct,v=Ds;Zi(u.type)&&(Ct=u.stateNode,Ds=!1),oi(r,o,u),Nl(u.stateNode),Ct=f,Ds=v;break;case 5:It||Bn(u,o);case 6:if(f=Ct,v=Ds,Ct=null,oi(r,o,u),Ct=f,Ds=v,Ct!==null)if(Ds)try{(Ct.nodeType===9?Ct.body:Ct.nodeName==="HTML"?Ct.ownerDocument.body:Ct).removeChild(u.stateNode)}catch(w){yt(u,o,w)}else try{Ct.removeChild(u.stateNode)}catch(w){yt(u,o,w)}break;case 18:Ct!==null&&(Ds?(r=Ct,Yb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),Vl(r)):Yb(Ct,u.stateNode));break;case 4:f=Ct,v=Ds,Ct=u.stateNode.containerInfo,Ds=!0,oi(r,o,u),Ct=f,Ds=v;break;case 0:case 11:case 14:case 15:It||Hi(2,u,o),It||Hi(4,u,o),oi(r,o,u);break;case 1:It||(Bn(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"&&Zx(u,o,f)),oi(r,o,u);break;case 21:oi(r,o,u);break;case 22:It=(f=It)||u.memoizedState!==null,oi(r,o,u),It=f;break;default:oi(r,o,u)}}function rb(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Vl(r)}catch(u){yt(o,o.return,u)}}function Zk(r){switch(r.tag){case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new tb),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new tb),o;default:throw Error(s(435,r.tag))}}function Mg(r,o){var u=Zk(r);o.forEach(function(f){var v=aM.bind(null,r,f);u.has(f)||(u.add(f),f.then(v,v))})}function Gs(r,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var v=u[f],w=r,E=o,A=E;e:for(;A!==null;){switch(A.tag){case 27:if(Zi(A.type)){Ct=A.stateNode,Ds=!1;break e}break;case 5:Ct=A.stateNode,Ds=!1;break e;case 3:case 4:Ct=A.stateNode.containerInfo,Ds=!0;break e}A=A.return}if(Ct===null)throw Error(s(160));ib(w,E,v),Ct=null,Ds=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)ab(o,r),o=o.sibling}var bn=null;function ab(r,o){var u=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Gs(o,r),$s(r),f&4&&(Hi(3,r,r.return),Cl(3,r),Hi(5,r,r.return));break;case 1:Gs(o,r),$s(r),f&512&&(It||u===null||Bn(u,u.return)),f&64&&ai&&(r=r.updateQueue,r!==null&&(f=r.callbacks,f!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var v=bn;if(Gs(o,r),$s(r),f&512&&(It||u===null||Bn(u,u.return)),f&4){var w=u!==null?u.memoizedState:null;if(f=r.memoizedState,u===null)if(f===null)if(r.stateNode===null){e:{f=r.type,u=r.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":w=v.getElementsByTagName("title")[0],(!w||w[Xo]||w[Ae]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(f),v.head.insertBefore(w,v.querySelector("head > title"))),hs(w,f,u),w[Ae]=r,ts(w),f=w;break e;case"link":var E=ew("link","href",v).get(f+(u.href||""));if(E){for(var A=0;A<E.length;A++)if(w=E[A],w.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&w.getAttribute("rel")===(u.rel==null?null:u.rel)&&w.getAttribute("title")===(u.title==null?null:u.title)&&w.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){E.splice(A,1);break t}}w=v.createElement(f),hs(w,f,u),v.head.appendChild(w);break;case"meta":if(E=ew("meta","content",v).get(f+(u.content||""))){for(A=0;A<E.length;A++)if(w=E[A],w.getAttribute("content")===(u.content==null?null:""+u.content)&&w.getAttribute("name")===(u.name==null?null:u.name)&&w.getAttribute("property")===(u.property==null?null:u.property)&&w.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&w.getAttribute("charset")===(u.charSet==null?null:u.charSet)){E.splice(A,1);break t}}w=v.createElement(f),hs(w,f,u),v.head.appendChild(w);break;default:throw Error(s(468,f))}w[Ae]=r,ts(w),f=w}r.stateNode=f}else tw(v,r.type,r.stateNode);else r.stateNode=Jb(v,f,r.memoizedProps);else w!==f?(w===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):w.count--,f===null?tw(v,r.type,r.stateNode):Jb(v,f,r.memoizedProps)):f===null&&r.stateNode!==null&&Tg(r,r.memoizedProps,u.memoizedProps)}break;case 27:Gs(o,r),$s(r),f&512&&(It||u===null||Bn(u,u.return)),u!==null&&f&4&&Tg(r,r.memoizedProps,u.memoizedProps);break;case 5:if(Gs(o,r),$s(r),f&512&&(It||u===null||Bn(u,u.return)),r.flags&32){v=r.stateNode;try{Sa(v,"")}catch(ie){yt(r,r.return,ie)}}f&4&&r.stateNode!=null&&(v=r.memoizedProps,Tg(r,v,u!==null?u.memoizedProps:v)),f&1024&&(kg=!0);break;case 6:if(Gs(o,r),$s(r),f&4){if(r.stateNode===null)throw Error(s(162));f=r.memoizedProps,u=r.stateNode;try{u.nodeValue=f}catch(ie){yt(r,r.return,ie)}}break;case 3:if(Ku=null,v=bn,bn=Wu(o.containerInfo),Gs(o,r),bn=v,$s(r),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Vl(o.containerInfo)}catch(ie){yt(r,r.return,ie)}kg&&(kg=!1,ob(r));break;case 4:f=bn,bn=Wu(r.stateNode.containerInfo),Gs(o,r),$s(r),bn=f;break;case 12:Gs(o,r),$s(r);break;case 13:Gs(o,r),$s(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Pg=ye()),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,Mg(r,f)));break;case 22:v=r.memoizedState!==null;var U=u!==null&&u.memoizedState!==null,J=ai,fe=It;if(ai=J||v,It=fe||U,Gs(o,r),It=fe,ai=J,$s(r),f&8192)e:for(o=r.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(u===null||U||ai||It||Br(r)),u=null,o=r;;){if(o.tag===5||o.tag===26){if(u===null){U=u=o;try{if(w=U.stateNode,v)E=w.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=U.stateNode;var me=U.memoizedProps.style,se=me!=null&&me.hasOwnProperty("display")?me.display:null;A.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(ie){yt(U,U.return,ie)}}}else if(o.tag===6){if(u===null){U=o;try{U.stateNode.nodeValue=v?"":U.memoizedProps}catch(ie){yt(U,U.return,ie)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=r.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,Mg(r,u))));break;case 19:Gs(o,r),$s(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,Mg(r,f)));break;case 30:break;case 21:break;default:Gs(o,r),$s(r)}}function $s(r){var o=r.flags;if(o&2){try{for(var u,f=r.return;f!==null;){if(Jx(f)){u=f;break}f=f.return}if(u==null)throw Error(s(160));switch(u.tag){case 27:var v=u.stateNode,w=Eg(r);Pu(r,w,v);break;case 5:var E=u.stateNode;u.flags&32&&(Sa(E,""),u.flags&=-33);var A=Eg(r);Pu(r,A,E);break;case 3:case 4:var U=u.stateNode.containerInfo,J=Eg(r);jg(r,J,U);break;default:throw Error(s(161))}}catch(fe){yt(r,r.return,fe)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function ob(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;ob(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function Gi(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)sb(r,o.alternate,o),o=o.sibling}function Br(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Hi(4,o,o.return),Br(o);break;case 1:Bn(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&Zx(o,o.return,u),Br(o);break;case 27:Nl(o.stateNode);case 26:case 5:Bn(o,o.return),Br(o);break;case 22:o.memoizedState===null&&Br(o);break;case 30:Br(o);break;default:Br(o)}r=r.sibling}}function $i(r,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,v=r,w=o,E=w.flags;switch(w.tag){case 0:case 11:case 15:$i(v,w,u),Cl(4,w);break;case 1:if($i(v,w,u),f=w,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(J){yt(f,f.return,J)}if(f=w,v=f.updateQueue,v!==null){var A=f.stateNode;try{var U=v.shared.hiddenCallbacks;if(U!==null)for(v.shared.hiddenCallbacks=null,v=0;v<U.length;v++)Ry(U[v],A)}catch(J){yt(f,f.return,J)}}u&&E&64&&Kx(w),Tl(w,w.return);break;case 27:eb(w);case 26:case 5:$i(v,w,u),u&&f===null&&E&4&&Qx(w),Tl(w,w.return);break;case 12:$i(v,w,u);break;case 13:$i(v,w,u),u&&E&4&&rb(v,w);break;case 22:w.memoizedState===null&&$i(v,w,u),Tl(w,w.return);break;case 30:break;default:$i(v,w,u)}o=o.sibling}}function Og(r,o){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&ul(u))}function Lg(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&ul(r))}function Un(r,o,u,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)lb(r,o,u,f),o=o.sibling}function lb(r,o,u,f){var v=o.flags;switch(o.tag){case 0:case 11:case 15:Un(r,o,u,f),v&2048&&Cl(9,o);break;case 1:Un(r,o,u,f);break;case 3:Un(r,o,u,f),v&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&ul(r)));break;case 12:if(v&2048){Un(r,o,u,f),r=o.stateNode;try{var w=o.memoizedProps,E=w.id,A=w.onPostCommit;typeof A=="function"&&A(E,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(U){yt(o,o.return,U)}}else Un(r,o,u,f);break;case 13:Un(r,o,u,f);break;case 23:break;case 22:w=o.stateNode,E=o.alternate,o.memoizedState!==null?w._visibility&2?Un(r,o,u,f):El(r,o):w._visibility&2?Un(r,o,u,f):(w._visibility|=2,Fa(r,o,u,f,(o.subtreeFlags&10256)!==0)),v&2048&&Og(E,o);break;case 24:Un(r,o,u,f),v&2048&&Lg(o.alternate,o);break;default:Un(r,o,u,f)}}function Fa(r,o,u,f,v){for(v=v&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var w=r,E=o,A=u,U=f,J=E.flags;switch(E.tag){case 0:case 11:case 15:Fa(w,E,A,U,v),Cl(8,E);break;case 23:break;case 22:var fe=E.stateNode;E.memoizedState!==null?fe._visibility&2?Fa(w,E,A,U,v):El(w,E):(fe._visibility|=2,Fa(w,E,A,U,v)),v&&J&2048&&Og(E.alternate,E);break;case 24:Fa(w,E,A,U,v),v&&J&2048&&Lg(E.alternate,E);break;default:Fa(w,E,A,U,v)}o=o.sibling}}function El(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=r,f=o,v=f.flags;switch(f.tag){case 22:El(u,f),v&2048&&Og(f.alternate,f);break;case 24:El(u,f),v&2048&&Lg(f.alternate,f);break;default:El(u,f)}o=o.sibling}}var jl=8192;function Va(r){if(r.subtreeFlags&jl)for(r=r.child;r!==null;)cb(r),r=r.sibling}function cb(r){switch(r.tag){case 26:Va(r),r.flags&jl&&r.memoizedState!==null&&RM(bn,r.memoizedState,r.memoizedProps);break;case 5:Va(r);break;case 3:case 4:var o=bn;bn=Wu(r.stateNode.containerInfo),Va(r),bn=o;break;case 22:r.memoizedState===null&&(o=r.alternate,o!==null&&o.memoizedState!==null?(o=jl,jl=16777216,Va(r),jl=o):Va(r));break;default:Va(r)}}function ub(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function kl(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];ns=f,hb(f,r)}ub(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)db(r),r=r.sibling}function db(r){switch(r.tag){case 0:case 11:case 15:kl(r),r.flags&2048&&Hi(9,r,r.return);break;case 3:kl(r);break;case 12:kl(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,Ru(r)):kl(r);break;default:kl(r)}}function Ru(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];ns=f,hb(f,r)}ub(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Hi(8,o,o.return),Ru(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Ru(o));break;default:Ru(o)}r=r.sibling}}function hb(r,o){for(;ns!==null;){var u=ns;switch(u.tag){case 0:case 11:case 15:Hi(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:ul(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,ns=f;else e:for(u=r;ns!==null;){f=ns;var v=f.sibling,w=f.return;if(nb(f),f===u){ns=null;break e}if(v!==null){v.return=w,ns=v;break e}ns=w}}}var Qk={getCacheForType:function(r){var o=ms(Wt),u=o.data.get(r);return u===void 0&&(u=r(),o.data.set(r,u)),u}},Jk=typeof WeakMap=="function"?WeakMap:Map,ht=0,xt=null,Qe=null,rt=0,ft=0,Ys=null,Yi=!1,Ha=!1,Ag=!1,li=0,Rt=0,qi=0,Ur=0,Dg=0,ln=0,Ga=0,Ml=null,Ns=null,Ng=!1,Pg=0,Bu=1/0,Uu=null,Wi=null,ds=0,Xi=null,$a=null,Ya=0,Rg=0,Bg=null,fb=null,Ol=0,Ug=null;function qs(){if((ht&2)!==0&&rt!==0)return rt&-rt;if(R.T!==null){var r=Da;return r!==0?r:$g()}return Wo()}function gb(){ln===0&&(ln=(rt&536870912)===0||ct?Ss():536870912);var r=on.current;return r!==null&&(r.flags|=32),ln}function Ws(r,o,u){(r===xt&&(ft===2||ft===9)||r.cancelPendingCommit!==null)&&(qa(r,0),Ki(r,rt,ln,!1)),_t(r,u),((ht&2)===0||r!==xt)&&(r===xt&&((ht&2)===0&&(Ur|=u),Rt===4&&Ki(r,rt,ln,!1)),zn(r))}function pb(r,o,u){if((ht&6)!==0)throw Error(s(327));var f=!u&&(o&124)===0&&(o&r.expiredLanes)===0||ut(r,o),v=f?sM(r,o):Fg(r,o,!0),w=f;do{if(v===0){Ha&&!f&&Ki(r,o,0,!1);break}else{if(u=r.current.alternate,w&&!eM(u)){v=Fg(r,o,!1),w=!1;continue}if(v===2){if(w=o,r.errorRecoveryDisabledLanes&w)var E=0;else E=r.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){o=E;e:{var A=r;v=Ml;var U=A.current.memoizedState.isDehydrated;if(U&&(qa(A,E).flags|=256),E=Fg(A,E,!1),E!==2){if(Ag&&!U){A.errorRecoveryDisabledLanes|=w,Ur|=w,v=4;break e}w=Ns,Ns=v,w!==null&&(Ns===null?Ns=w:Ns.push.apply(Ns,w))}v=E}if(w=!1,v!==2)continue}}if(v===1){qa(r,0),Ki(r,o,0,!0);break}e:{switch(f=r,w=v,w){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Ki(f,o,ln,!Yi);break e;case 2:Ns=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(v=Pg+300-ye(),10<v)){if(Ki(f,o,ln,!Yi),cs(f,0,!0)!==0)break e;f.timeoutHandle=Gb(mb.bind(null,f,u,Ns,Uu,Ng,o,ln,Ur,Ga,Yi,w,2,-0,0),v);break e}mb(f,u,Ns,Uu,Ng,o,ln,Ur,Ga,Yi,w,0,-0,0)}}break}while(!0);zn(r)}function mb(r,o,u,f,v,w,E,A,U,J,fe,me,se,ie){if(r.timeoutHandle=-1,me=o.subtreeFlags,(me&8192||(me&16785408)===16785408)&&(Bl={stylesheets:null,count:0,unsuspend:PM},cb(o),me=BM(),me!==null)){r.cancelPendingCommit=me(_b.bind(null,r,o,w,u,f,v,E,A,U,fe,1,se,ie)),Ki(r,w,E,!J);return}_b(r,o,w,u,f,v,E,A,U)}function eM(r){for(var o=r;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var v=u[f],w=v.getSnapshot;v=v.value;try{if(!Vs(w(),v))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ki(r,o,u,f){o&=~Dg,o&=~Ur,r.suspendedLanes|=o,r.pingedLanes&=~o,f&&(r.warmLanes|=o),f=r.expirationTimes;for(var v=o;0<v;){var w=31-ge(v),E=1<<w;f[w]=-1,v&=~E}u!==0&&qo(r,u,o)}function zu(){return(ht&6)===0?(Ll(0),!1):!0}function zg(){if(Qe!==null){if(ft===0)var r=Qe.return;else r=Qe,ei=Ar=null,sg(r),za=null,wl=0,r=Qe;for(;r!==null;)Xx(r.alternate,r),r=r.return;Qe=null}}function qa(r,o){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,yM(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),zg(),xt=r,Qe=u=Zn(r.current,null),rt=o,ft=0,Ys=null,Yi=!1,Ha=ut(r,o),Ag=!1,Ga=ln=Dg=Ur=qi=Rt=0,Ns=Ml=null,Ng=!1,(o&8)!==0&&(o|=o&32);var f=r.entangledLanes;if(f!==0)for(r=r.entanglements,f&=o;0<f;){var v=31-ge(f),w=1<<v;o|=r[v],f&=~w}return li=o,ou(),u}function vb(r,o){qe=null,R.H=Eu,o===hl||o===mu?(o=Ny(),ft=3):o===Ly?(o=Ny(),ft=4):ft=o===Px?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ys=o,Qe===null&&(Rt=1,Lu(r,sn(o,r.current)))}function yb(){var r=R.H;return R.H=Eu,r===null?Eu:r}function xb(){var r=R.A;return R.A=Qk,r}function Ig(){Rt=4,Yi||(rt&4194048)!==rt&&on.current!==null||(Ha=!0),(qi&134217727)===0&&(Ur&134217727)===0||xt===null||Ki(xt,rt,ln,!1)}function Fg(r,o,u){var f=ht;ht|=2;var v=yb(),w=xb();(xt!==r||rt!==o)&&(Uu=null,qa(r,o)),o=!1;var E=Rt;e:do try{if(ft!==0&&Qe!==null){var A=Qe,U=Ys;switch(ft){case 8:zg(),E=6;break e;case 3:case 2:case 9:case 6:on.current===null&&(o=!0);var J=ft;if(ft=0,Ys=null,Wa(r,A,U,J),u&&Ha){E=0;break e}break;default:J=ft,ft=0,Ys=null,Wa(r,A,U,J)}}tM(),E=Rt;break}catch(fe){vb(r,fe)}while(!0);return o&&r.shellSuspendCounter++,ei=Ar=null,ht=f,R.H=v,R.A=w,Qe===null&&(xt=null,rt=0,ou()),E}function tM(){for(;Qe!==null;)bb(Qe)}function sM(r,o){var u=ht;ht|=2;var f=yb(),v=xb();xt!==r||rt!==o?(Uu=null,Bu=ye()+500,qa(r,o)):Ha=ut(r,o);e:do try{if(ft!==0&&Qe!==null){o=Qe;var w=Ys;t:switch(ft){case 1:ft=0,Ys=null,Wa(r,o,w,1);break;case 2:case 9:if(Ay(w)){ft=0,Ys=null,wb(o);break}o=function(){ft!==2&&ft!==9||xt!==r||(ft=7),zn(r)},w.then(o,o);break e;case 3:ft=7;break e;case 4:ft=5;break e;case 7:Ay(w)?(ft=0,Ys=null,wb(o)):(ft=0,Ys=null,Wa(r,o,w,7));break;case 5:var E=null;switch(Qe.tag){case 26:E=Qe.memoizedState;case 5:case 27:var A=Qe;if(!E||sw(E)){ft=0,Ys=null;var U=A.sibling;if(U!==null)Qe=U;else{var J=A.return;J!==null?(Qe=J,Iu(J)):Qe=null}break t}}ft=0,Ys=null,Wa(r,o,w,5);break;case 6:ft=0,Ys=null,Wa(r,o,w,6);break;case 8:zg(),Rt=6;break e;default:throw Error(s(462))}}nM();break}catch(fe){vb(r,fe)}while(!0);return ei=Ar=null,R.H=f,R.A=v,ht=u,Qe!==null?0:(xt=null,rt=0,ou(),Rt)}function nM(){for(;Qe!==null&&!he();)bb(Qe)}function bb(r){var o=qx(r.alternate,r,li);r.memoizedProps=r.pendingProps,o===null?Iu(r):Qe=o}function wb(r){var o=r,u=o.alternate;switch(o.tag){case 15:case 0:o=Fx(u,o,o.pendingProps,o.type,void 0,rt);break;case 11:o=Fx(u,o,o.pendingProps,o.type.render,o.ref,rt);break;case 5:sg(o);default:Xx(u,o),o=Qe=Sy(o,li),o=qx(u,o,li)}r.memoizedProps=r.pendingProps,o===null?Iu(r):Qe=o}function Wa(r,o,u,f){ei=Ar=null,sg(o),za=null,wl=0;var v=o.return;try{if(Yk(r,v,o,u,rt)){Rt=1,Lu(r,sn(u,r.current)),Qe=null;return}}catch(w){if(v!==null)throw Qe=v,w;Rt=1,Lu(r,sn(u,r.current)),Qe=null;return}o.flags&32768?(ct||f===1?r=!0:Ha||(rt&536870912)!==0?r=!1:(Yi=r=!0,(f===2||f===9||f===3||f===6)&&(f=on.current,f!==null&&f.tag===13&&(f.flags|=16384))),Sb(o,r)):Iu(o)}function Iu(r){var o=r;do{if((o.flags&32768)!==0){Sb(o,Yi);return}r=o.return;var u=Wk(o.alternate,o,li);if(u!==null){Qe=u;return}if(o=o.sibling,o!==null){Qe=o;return}Qe=o=r}while(o!==null);Rt===0&&(Rt=5)}function Sb(r,o){do{var u=Xk(r.alternate,r);if(u!==null){u.flags&=32767,Qe=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(r=r.sibling,r!==null)){Qe=r;return}Qe=r=u}while(r!==null);Rt=6,Qe=null}function _b(r,o,u,f,v,w,E,A,U){r.cancelPendingCommit=null;do Fu();while(ds!==0);if((ht&6)!==0)throw Error(s(327));if(o!==null){if(o===r.current)throw Error(s(177));if(w=o.lanes|o.childLanes,w|=Lf,fa(r,u,w,E,A,U),r===xt&&(Qe=xt=null,rt=0),$a=o,Xi=r,Ya=u,Rg=w,Bg=v,fb=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,oM(it,function(){return kb(),null})):(r.callbackNode=null,r.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=R.T,R.T=null,v=V.p,V.p=2,E=ht,ht|=4;try{Kk(r,o,u)}finally{ht=E,V.p=v,R.T=f}}ds=1,Cb(),Tb(),Eb()}}function Cb(){if(ds===1){ds=0;var r=Xi,o=$a,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=R.T,R.T=null;var f=V.p;V.p=2;var v=ht;ht|=4;try{ab(o,r);var w=Jg,E=hy(r.containerInfo),A=w.focusedElem,U=w.selectionRange;if(E!==A&&A&&A.ownerDocument&&dy(A.ownerDocument.documentElement,A)){if(U!==null&&Ef(A)){var J=U.start,fe=U.end;if(fe===void 0&&(fe=J),"selectionStart"in A)A.selectionStart=J,A.selectionEnd=Math.min(fe,A.value.length);else{var me=A.ownerDocument||document,se=me&&me.defaultView||window;if(se.getSelection){var ie=se.getSelection(),Ue=A.textContent.length,Pe=Math.min(U.start,Ue),vt=U.end===void 0?Pe:Math.min(U.end,Ue);!ie.extend&&Pe>vt&&(E=vt,vt=Pe,Pe=E);var W=uy(A,Pe),H=uy(A,vt);if(W&&H&&(ie.rangeCount!==1||ie.anchorNode!==W.node||ie.anchorOffset!==W.offset||ie.focusNode!==H.node||ie.focusOffset!==H.offset)){var Z=me.createRange();Z.setStart(W.node,W.offset),ie.removeAllRanges(),Pe>vt?(ie.addRange(Z),ie.extend(H.node,H.offset)):(Z.setEnd(H.node,H.offset),ie.addRange(Z))}}}}for(me=[],ie=A;ie=ie.parentNode;)ie.nodeType===1&&me.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<me.length;A++){var pe=me[A];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}Ju=!!Qg,Jg=Qg=null}finally{ht=v,V.p=f,R.T=u}}r.current=o,ds=2}}function Tb(){if(ds===2){ds=0;var r=Xi,o=$a,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=R.T,R.T=null;var f=V.p;V.p=2;var v=ht;ht|=4;try{sb(r,o.alternate,o)}finally{ht=v,V.p=f,R.T=u}}ds=3}}function Eb(){if(ds===4||ds===3){ds=0,Me();var r=Xi,o=$a,u=Ya,f=fb;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?ds=5:(ds=0,$a=Xi=null,jb(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(Wi=null),Ni(u),o=o.stateNode,we&&typeof we.onCommitFiberRoot=="function")try{we.onCommitFiberRoot(Le,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=R.T,v=V.p,V.p=2,R.T=null;try{for(var w=r.onRecoverableError,E=0;E<f.length;E++){var A=f[E];w(A.value,{componentStack:A.stack})}}finally{R.T=o,V.p=v}}(Ya&3)!==0&&Fu(),zn(r),v=r.pendingLanes,(u&4194090)!==0&&(v&42)!==0?r===Ug?Ol++:(Ol=0,Ug=r):Ol=0,Ll(0)}}function jb(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,ul(o)))}function Fu(r){return Cb(),Tb(),Eb(),kb()}function kb(){if(ds!==5)return!1;var r=Xi,o=Rg;Rg=0;var u=Ni(Ya),f=R.T,v=V.p;try{V.p=32>u?32:u,R.T=null,u=Bg,Bg=null;var w=Xi,E=Ya;if(ds=0,$a=Xi=null,Ya=0,(ht&6)!==0)throw Error(s(331));var A=ht;if(ht|=4,db(w.current),lb(w,w.current,E,u),ht=A,Ll(0,!1),we&&typeof we.onPostCommitFiberRoot=="function")try{we.onPostCommitFiberRoot(Le,w)}catch{}return!0}finally{V.p=v,R.T=f,jb(r,o)}}function Mb(r,o,u){o=sn(u,o),o=mg(r.stateNode,o,2),r=zi(r,o,2),r!==null&&(_t(r,2),zn(r))}function yt(r,o,u){if(r.tag===3)Mb(r,r,u);else for(;o!==null;){if(o.tag===3){Mb(o,r,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Wi===null||!Wi.has(f))){r=sn(u,r),u=Dx(2),f=zi(o,u,2),f!==null&&(Nx(u,f,o,r),_t(f,2),zn(f));break}}o=o.return}}function Vg(r,o,u){var f=r.pingCache;if(f===null){f=r.pingCache=new Jk;var v=new Set;f.set(o,v)}else v=f.get(o),v===void 0&&(v=new Set,f.set(o,v));v.has(u)||(Ag=!0,v.add(u),r=iM.bind(null,r,o,u),o.then(r,r))}function iM(r,o,u){var f=r.pingCache;f!==null&&f.delete(o),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,xt===r&&(rt&u)===u&&(Rt===4||Rt===3&&(rt&62914560)===rt&&300>ye()-Pg?(ht&2)===0&&qa(r,0):Dg|=u,Ga===rt&&(Ga=0)),zn(r)}function Ob(r,o){o===0&&(o=Ut()),r=Ma(r,o),r!==null&&(_t(r,o),zn(r))}function rM(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),Ob(r,u)}function aM(r,o){var u=0;switch(r.tag){case 13:var f=r.stateNode,v=r.memoizedState;v!==null&&(u=v.retryLane);break;case 19:f=r.stateNode;break;case 22:f=r.stateNode._retryCache;break;default:throw Error(s(314))}f!==null&&f.delete(o),Ob(r,u)}function oM(r,o){return $(r,o)}var Vu=null,Xa=null,Hg=!1,Hu=!1,Gg=!1,zr=0;function zn(r){r!==Xa&&r.next===null&&(Xa===null?Vu=Xa=r:Xa=Xa.next=r),Hu=!0,Hg||(Hg=!0,cM())}function Ll(r,o){if(!Gg&&Hu){Gg=!0;do for(var u=!1,f=Vu;f!==null;){if(r!==0){var v=f.pendingLanes;if(v===0)var w=0;else{var E=f.suspendedLanes,A=f.pingedLanes;w=(1<<31-ge(42|r)+1)-1,w&=v&~(E&~A),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(u=!0,Nb(f,w))}else w=rt,w=cs(f,f===xt?w:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(w&3)===0||ut(f,w)||(u=!0,Nb(f,w));f=f.next}while(u);Gg=!1}}function lM(){Lb()}function Lb(){Hu=Hg=!1;var r=0;zr!==0&&(vM()&&(r=zr),zr=0);for(var o=ye(),u=null,f=Vu;f!==null;){var v=f.next,w=Ab(f,o);w===0?(f.next=null,u===null?Vu=v:u.next=v,v===null&&(Xa=u)):(u=f,(r!==0||(w&3)!==0)&&(Hu=!0)),f=v}Ll(r)}function Ab(r,o){for(var u=r.suspendedLanes,f=r.pingedLanes,v=r.expirationTimes,w=r.pendingLanes&-62914561;0<w;){var E=31-ge(w),A=1<<E,U=v[E];U===-1?((A&u)===0||(A&f)!==0)&&(v[E]=Dt(A,o)):U<=o&&(r.expiredLanes|=A),w&=~A}if(o=xt,u=rt,u=cs(r,r===o?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f=r.callbackNode,u===0||r===o&&(ft===2||ft===9)||r.cancelPendingCommit!==null)return f!==null&&f!==null&&ce(f),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||ut(r,u)){if(o=u&-u,o===r.callbackPriority)return o;switch(f!==null&&ce(f),Ni(u)){case 2:case 8:u=nt;break;case 32:u=it;break;case 268435456:u=Ze;break;default:u=it}return f=Db.bind(null,r),u=$(u,f),r.callbackPriority=o,r.callbackNode=u,o}return f!==null&&f!==null&&ce(f),r.callbackPriority=2,r.callbackNode=null,2}function Db(r,o){if(ds!==0&&ds!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(Fu()&&r.callbackNode!==u)return null;var f=rt;return f=cs(r,r===xt?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f===0?null:(pb(r,f,o),Ab(r,ye()),r.callbackNode!=null&&r.callbackNode===u?Db.bind(null,r):null)}function Nb(r,o){if(Fu())return null;pb(r,o,!0)}function cM(){xM(function(){(ht&6)!==0?$(Ye,lM):Lb()})}function $g(){return zr===0&&(zr=Ss()),zr}function Pb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:eu(""+r)}function Rb(r,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,r.id&&u.setAttribute("form",r.id),o.parentNode.insertBefore(u,o),r=new FormData(r),u.parentNode.removeChild(u),r}function uM(r,o,u,f,v){if(o==="submit"&&u&&u.stateNode===v){var w=Pb((v[Os]||null).action),E=f.submitter;E&&(o=(o=E[Os]||null)?Pb(o.formAction):E.getAttribute("formAction"),o!==null&&(w=o,E=null));var A=new iu("action","action",null,f,v);r.push({event:A,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(zr!==0){var U=E?Rb(v,E):new FormData(v);dg(u,{pending:!0,data:U,method:v.method,action:w},null,U)}}else typeof w=="function"&&(A.preventDefault(),U=E?Rb(v,E):new FormData(v),dg(u,{pending:!0,data:U,method:v.method,action:w},w,U))},currentTarget:v}]})}}for(var Yg=0;Yg<Of.length;Yg++){var qg=Of[Yg],dM=qg.toLowerCase(),hM=qg[0].toUpperCase()+qg.slice(1);xn(dM,"on"+hM)}xn(py,"onAnimationEnd"),xn(my,"onAnimationIteration"),xn(vy,"onAnimationStart"),xn("dblclick","onDoubleClick"),xn("focusin","onFocus"),xn("focusout","onBlur"),xn(Mk,"onTransitionRun"),xn(Ok,"onTransitionStart"),xn(Lk,"onTransitionCancel"),xn(yy,"onTransitionEnd"),xa("onMouseEnter",["mouseout","mouseover"]),xa("onMouseLeave",["mouseout","mouseover"]),xa("onPointerEnter",["pointerout","pointerover"]),xa("onPointerLeave",["pointerout","pointerover"]),_r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_r("onBeforeInput",["compositionend","keypress","textInput","paste"]),_r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Al));function Bb(r,o){o=(o&4)!==0;for(var u=0;u<r.length;u++){var f=r[u],v=f.event;f=f.listeners;e:{var w=void 0;if(o)for(var E=f.length-1;0<=E;E--){var A=f[E],U=A.instance,J=A.currentTarget;if(A=A.listener,U!==w&&v.isPropagationStopped())break e;w=A,v.currentTarget=J;try{w(v)}catch(fe){Ou(fe)}v.currentTarget=null,w=U}else for(E=0;E<f.length;E++){if(A=f[E],U=A.instance,J=A.currentTarget,A=A.listener,U!==w&&v.isPropagationStopped())break e;w=A,v.currentTarget=J;try{w(v)}catch(fe){Ou(fe)}v.currentTarget=null,w=U}}}}function Je(r,o){var u=o[af];u===void 0&&(u=o[af]=new Set);var f=r+"__bubble";u.has(f)||(Ub(o,r,2,!1),u.add(f))}function Wg(r,o,u){var f=0;o&&(f|=4),Ub(u,r,f,o)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function Xg(r){if(!r[Gu]){r[Gu]=!0,L0.forEach(function(u){u!=="selectionchange"&&(fM.has(u)||Wg(u,!1,r),Wg(u,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[Gu]||(o[Gu]=!0,Wg("selectionchange",!1,o))}}function Ub(r,o,u,f){switch(lw(o)){case 2:var v=IM;break;case 8:v=FM;break;default:v=cp}u=v.bind(null,o,u,r),v=void 0,!vf||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),f?v!==void 0?r.addEventListener(o,u,{capture:!0,passive:v}):r.addEventListener(o,u,!0):v!==void 0?r.addEventListener(o,u,{passive:v}):r.addEventListener(o,u,!1)}function Kg(r,o,u,f,v){var w=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var E=f.tag;if(E===3||E===4){var A=f.stateNode.containerInfo;if(A===v)break;if(E===4)for(E=f.return;E!==null;){var U=E.tag;if((U===3||U===4)&&E.stateNode.containerInfo===v)return;E=E.return}for(;A!==null;){if(E=ma(A),E===null)return;if(U=E.tag,U===5||U===6||U===26||U===27){f=w=E;continue e}A=A.parentNode}}f=f.return}$0(function(){var J=w,fe=pf(u),me=[];e:{var se=xy.get(r);if(se!==void 0){var ie=iu,Ue=r;switch(r){case"keypress":if(su(u)===0)break e;case"keydown":case"keyup":ie=ok;break;case"focusin":Ue="focus",ie=wf;break;case"focusout":Ue="blur",ie=wf;break;case"beforeblur":case"afterblur":ie=wf;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=W0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Xj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=uk;break;case py:case my:case vy:ie=Qj;break;case yy:ie=hk;break;case"scroll":case"scrollend":ie=qj;break;case"wheel":ie=gk;break;case"copy":case"cut":case"paste":ie=ek;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=K0;break;case"toggle":case"beforetoggle":ie=mk}var Pe=(o&4)!==0,vt=!Pe&&(r==="scroll"||r==="scrollend"),W=Pe?se!==null?se+"Capture":null:se;Pe=[];for(var H=J,Z;H!==null;){var pe=H;if(Z=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||Z===null||W===null||(pe=Zo(H,W),pe!=null&&Pe.push(Dl(H,pe,Z))),vt)break;H=H.return}0<Pe.length&&(se=new ie(se,Ue,null,u,fe),me.push({event:se,listeners:Pe}))}}if((o&7)===0){e:{if(se=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",se&&u!==gf&&(Ue=u.relatedTarget||u.fromElement)&&(ma(Ue)||Ue[pa]))break e;if((ie||se)&&(se=fe.window===fe?fe:(se=fe.ownerDocument)?se.defaultView||se.parentWindow:window,ie?(Ue=u.relatedTarget||u.toElement,ie=J,Ue=Ue?ma(Ue):null,Ue!==null&&(vt=a(Ue),Pe=Ue.tag,Ue!==vt||Pe!==5&&Pe!==27&&Pe!==6)&&(Ue=null)):(ie=null,Ue=J),ie!==Ue)){if(Pe=W0,pe="onMouseLeave",W="onMouseEnter",H="mouse",(r==="pointerout"||r==="pointerover")&&(Pe=K0,pe="onPointerLeave",W="onPointerEnter",H="pointer"),vt=ie==null?se:Ko(ie),Z=Ue==null?se:Ko(Ue),se=new Pe(pe,H+"leave",ie,u,fe),se.target=vt,se.relatedTarget=Z,pe=null,ma(fe)===J&&(Pe=new Pe(W,H+"enter",Ue,u,fe),Pe.target=Z,Pe.relatedTarget=vt,pe=Pe),vt=pe,ie&&Ue)t:{for(Pe=ie,W=Ue,H=0,Z=Pe;Z;Z=Ka(Z))H++;for(Z=0,pe=W;pe;pe=Ka(pe))Z++;for(;0<H-Z;)Pe=Ka(Pe),H--;for(;0<Z-H;)W=Ka(W),Z--;for(;H--;){if(Pe===W||W!==null&&Pe===W.alternate)break t;Pe=Ka(Pe),W=Ka(W)}Pe=null}else Pe=null;ie!==null&&zb(me,se,ie,Pe,!1),Ue!==null&&vt!==null&&zb(me,vt,Ue,Pe,!0)}}e:{if(se=J?Ko(J):window,ie=se.nodeName&&se.nodeName.toLowerCase(),ie==="select"||ie==="input"&&se.type==="file")var ke=iy;else if(sy(se))if(ry)ke=Ek;else{ke=Ck;var Xe=_k}else ie=se.nodeName,!ie||ie.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?J&&ff(J.elementType)&&(ke=iy):ke=Tk;if(ke&&(ke=ke(r,J))){ny(me,ke,u,fe);break e}Xe&&Xe(r,se,J),r==="focusout"&&J&&se.type==="number"&&J.memoizedProps.value!=null&&hf(se,"number",se.value)}switch(Xe=J?Ko(J):window,r){case"focusin":(sy(Xe)||Xe.contentEditable==="true")&&(Ea=Xe,jf=J,rl=null);break;case"focusout":rl=jf=Ea=null;break;case"mousedown":kf=!0;break;case"contextmenu":case"mouseup":case"dragend":kf=!1,fy(me,u,fe);break;case"selectionchange":if(kk)break;case"keydown":case"keyup":fy(me,u,fe)}var Ne;if(_f)e:{switch(r){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Ta?ey(r,u)&&(Be="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(Be="onCompositionStart");Be&&(Z0&&u.locale!=="ko"&&(Ta||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Ta&&(Ne=Y0()):(Pi=fe,yf="value"in Pi?Pi.value:Pi.textContent,Ta=!0)),Xe=$u(J,Be),0<Xe.length&&(Be=new X0(Be,r,null,u,fe),me.push({event:Be,listeners:Xe}),Ne?Be.data=Ne:(Ne=ty(u),Ne!==null&&(Be.data=Ne)))),(Ne=yk?xk(r,u):bk(r,u))&&(Be=$u(J,"onBeforeInput"),0<Be.length&&(Xe=new X0("onBeforeInput","beforeinput",null,u,fe),me.push({event:Xe,listeners:Be}),Xe.data=Ne)),uM(me,r,J,u,fe)}Bb(me,o)})}function Dl(r,o,u){return{instance:r,listener:o,currentTarget:u}}function $u(r,o){for(var u=o+"Capture",f=[];r!==null;){var v=r,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=Zo(r,u),v!=null&&f.unshift(Dl(r,v,w)),v=Zo(r,o),v!=null&&f.push(Dl(r,v,w))),r.tag===3)return f;r=r.return}return[]}function Ka(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function zb(r,o,u,f,v){for(var w=o._reactName,E=[];u!==null&&u!==f;){var A=u,U=A.alternate,J=A.stateNode;if(A=A.tag,U!==null&&U===f)break;A!==5&&A!==26&&A!==27||J===null||(U=J,v?(J=Zo(u,w),J!=null&&E.unshift(Dl(u,J,U))):v||(J=Zo(u,w),J!=null&&E.push(Dl(u,J,U)))),u=u.return}E.length!==0&&r.push({event:o,listeners:E})}var gM=/\r\n?/g,pM=/\u0000|\uFFFD/g;function Ib(r){return(typeof r=="string"?r:""+r).replace(gM,`
`).replace(pM,"")}function Fb(r,o){return o=Ib(o),Ib(r)===o}function Yu(){}function mt(r,o,u,f,v,w){switch(u){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||Sa(r,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&Sa(r,""+f);break;case"className":Zc(r,"class",f);break;case"tabIndex":Zc(r,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Zc(r,u,f);break;case"style":H0(r,f,w);break;case"data":if(o!=="object"){Zc(r,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||u!=="href")){r.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=eu(""+f),r.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(u==="formAction"?(o!=="input"&&mt(r,o,"name",v.name,v,null),mt(r,o,"formEncType",v.formEncType,v,null),mt(r,o,"formMethod",v.formMethod,v,null),mt(r,o,"formTarget",v.formTarget,v,null)):(mt(r,o,"encType",v.encType,v,null),mt(r,o,"method",v.method,v,null),mt(r,o,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=eu(""+f),r.setAttribute(u,f);break;case"onClick":f!=null&&(r.onclick=Yu);break;case"onScroll":f!=null&&Je("scroll",r);break;case"onScrollEnd":f!=null&&Je("scrollend",r);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(s(60));r.innerHTML=u}}break;case"multiple":r.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":r.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){r.removeAttribute("xlink:href");break}u=eu(""+f),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""+f):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":f===!0?r.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,f):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?r.setAttribute(u,f):r.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?r.removeAttribute(u):r.setAttribute(u,f);break;case"popover":Je("beforetoggle",r),Je("toggle",r),Kc(r,"popover",f);break;case"xlinkActuate":Xn(r,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Xn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Xn(r,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Xn(r,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Xn(r,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Xn(r,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Xn(r,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Xn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Xn(r,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Kc(r,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=$j.get(u)||u,Kc(r,u,f))}}function Zg(r,o,u,f,v,w){switch(u){case"style":H0(r,f,w);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(s(60));r.innerHTML=u}}break;case"children":typeof f=="string"?Sa(r,f):(typeof f=="number"||typeof f=="bigint")&&Sa(r,""+f);break;case"onScroll":f!=null&&Je("scroll",r);break;case"onScrollEnd":f!=null&&Je("scrollend",r);break;case"onClick":f!=null&&(r.onclick=Yu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!A0.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),o=u.slice(2,v?u.length-7:void 0),w=r[Os]||null,w=w!=null?w[u]:null,typeof w=="function"&&r.removeEventListener(o,w,v),typeof f=="function")){typeof w!="function"&&w!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(o,f,v);break e}u in r?r[u]=f:f===!0?r.setAttribute(u,""):Kc(r,u,f)}}}function hs(r,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",r),Je("load",r);var f=!1,v=!1,w;for(w in u)if(u.hasOwnProperty(w)){var E=u[w];if(E!=null)switch(w){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:mt(r,o,w,E,u,null)}}v&&mt(r,o,"srcSet",u.srcSet,u,null),f&&mt(r,o,"src",u.src,u,null);return;case"input":Je("invalid",r);var A=w=E=v=null,U=null,J=null;for(f in u)if(u.hasOwnProperty(f)){var fe=u[f];if(fe!=null)switch(f){case"name":v=fe;break;case"type":E=fe;break;case"checked":U=fe;break;case"defaultChecked":J=fe;break;case"value":w=fe;break;case"defaultValue":A=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(s(137,o));break;default:mt(r,o,f,fe,u,null)}}z0(r,w,A,U,J,E,v,!1),Qc(r);return;case"select":Je("invalid",r),f=E=w=null;for(v in u)if(u.hasOwnProperty(v)&&(A=u[v],A!=null))switch(v){case"value":w=A;break;case"defaultValue":E=A;break;case"multiple":f=A;default:mt(r,o,v,A,u,null)}o=w,u=E,r.multiple=!!f,o!=null?wa(r,!!f,o,!1):u!=null&&wa(r,!!f,u,!0);return;case"textarea":Je("invalid",r),w=v=f=null;for(E in u)if(u.hasOwnProperty(E)&&(A=u[E],A!=null))switch(E){case"value":f=A;break;case"defaultValue":v=A;break;case"children":w=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:mt(r,o,E,A,u,null)}F0(r,f,v,w),Qc(r);return;case"option":for(U in u)if(u.hasOwnProperty(U)&&(f=u[U],f!=null))switch(U){case"selected":r.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:mt(r,o,U,f,u,null)}return;case"dialog":Je("beforetoggle",r),Je("toggle",r),Je("cancel",r),Je("close",r);break;case"iframe":case"object":Je("load",r);break;case"video":case"audio":for(f=0;f<Al.length;f++)Je(Al[f],r);break;case"image":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"embed":case"source":case"link":Je("error",r),Je("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in u)if(u.hasOwnProperty(J)&&(f=u[J],f!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:mt(r,o,J,f,u,null)}return;default:if(ff(o)){for(fe in u)u.hasOwnProperty(fe)&&(f=u[fe],f!==void 0&&Zg(r,o,fe,f,u,void 0));return}}for(A in u)u.hasOwnProperty(A)&&(f=u[A],f!=null&&mt(r,o,A,f,u,null))}function mM(r,o,u,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,E=null,A=null,U=null,J=null,fe=null;for(ie in u){var me=u[ie];if(u.hasOwnProperty(ie)&&me!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":U=me;default:f.hasOwnProperty(ie)||mt(r,o,ie,null,f,me)}}for(var se in f){var ie=f[se];if(me=u[se],f.hasOwnProperty(se)&&(ie!=null||me!=null))switch(se){case"type":w=ie;break;case"name":v=ie;break;case"checked":J=ie;break;case"defaultChecked":fe=ie;break;case"value":E=ie;break;case"defaultValue":A=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,o));break;default:ie!==me&&mt(r,o,se,ie,f,me)}}df(r,E,A,U,J,fe,w,v);return;case"select":ie=E=A=se=null;for(w in u)if(U=u[w],u.hasOwnProperty(w)&&U!=null)switch(w){case"value":break;case"multiple":ie=U;default:f.hasOwnProperty(w)||mt(r,o,w,null,f,U)}for(v in f)if(w=f[v],U=u[v],f.hasOwnProperty(v)&&(w!=null||U!=null))switch(v){case"value":se=w;break;case"defaultValue":A=w;break;case"multiple":E=w;default:w!==U&&mt(r,o,v,w,f,U)}o=A,u=E,f=ie,se!=null?wa(r,!!u,se,!1):!!f!=!!u&&(o!=null?wa(r,!!u,o,!0):wa(r,!!u,u?[]:"",!1));return;case"textarea":ie=se=null;for(A in u)if(v=u[A],u.hasOwnProperty(A)&&v!=null&&!f.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:mt(r,o,A,null,f,v)}for(E in f)if(v=f[E],w=u[E],f.hasOwnProperty(E)&&(v!=null||w!=null))switch(E){case"value":se=v;break;case"defaultValue":ie=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:v!==w&&mt(r,o,E,v,f,w)}I0(r,se,ie);return;case"option":for(var Ue in u)if(se=u[Ue],u.hasOwnProperty(Ue)&&se!=null&&!f.hasOwnProperty(Ue))switch(Ue){case"selected":r.selected=!1;break;default:mt(r,o,Ue,null,f,se)}for(U in f)if(se=f[U],ie=u[U],f.hasOwnProperty(U)&&se!==ie&&(se!=null||ie!=null))switch(U){case"selected":r.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:mt(r,o,U,se,f,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in u)se=u[Pe],u.hasOwnProperty(Pe)&&se!=null&&!f.hasOwnProperty(Pe)&&mt(r,o,Pe,null,f,se);for(J in f)if(se=f[J],ie=u[J],f.hasOwnProperty(J)&&se!==ie&&(se!=null||ie!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(137,o));break;default:mt(r,o,J,se,f,ie)}return;default:if(ff(o)){for(var vt in u)se=u[vt],u.hasOwnProperty(vt)&&se!==void 0&&!f.hasOwnProperty(vt)&&Zg(r,o,vt,void 0,f,se);for(fe in f)se=f[fe],ie=u[fe],!f.hasOwnProperty(fe)||se===ie||se===void 0&&ie===void 0||Zg(r,o,fe,se,f,ie);return}}for(var W in u)se=u[W],u.hasOwnProperty(W)&&se!=null&&!f.hasOwnProperty(W)&&mt(r,o,W,null,f,se);for(me in f)se=f[me],ie=u[me],!f.hasOwnProperty(me)||se===ie||se==null&&ie==null||mt(r,o,me,se,f,ie)}var Qg=null,Jg=null;function qu(r){return r.nodeType===9?r:r.ownerDocument}function Vb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hb(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function ep(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var tp=null;function vM(){var r=window.event;return r&&r.type==="popstate"?r===tp?!1:(tp=r,!0):(tp=null,!1)}var Gb=typeof setTimeout=="function"?setTimeout:void 0,yM=typeof clearTimeout=="function"?clearTimeout:void 0,$b=typeof Promise=="function"?Promise:void 0,xM=typeof queueMicrotask=="function"?queueMicrotask:typeof $b<"u"?function(r){return $b.resolve(null).then(r).catch(bM)}:Gb;function bM(r){setTimeout(function(){throw r})}function Zi(r){return r==="head"}function Yb(r,o){var u=o,f=0,v=0;do{var w=u.nextSibling;if(r.removeChild(u),w&&w.nodeType===8)if(u=w.data,u==="/$"){if(0<f&&8>f){u=f;var E=r.ownerDocument;if(u&1&&Nl(E.documentElement),u&2&&Nl(E.body),u&4)for(u=E.head,Nl(u),E=u.firstChild;E;){var A=E.nextSibling,U=E.nodeName;E[Xo]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&E.rel.toLowerCase()==="stylesheet"||u.removeChild(E),E=A}}if(v===0){r.removeChild(w),Vl(o);return}v--}else u==="$"||u==="$?"||u==="$!"?v++:f=u.charCodeAt(0)-48;else f=0;u=w}while(u);Vl(o)}function sp(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":sp(u),of(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function wM(r,o,u,f){for(;r.nodeType===1;){var v=u;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(f){if(!r[Xo])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(w=r.getAttribute("rel"),w==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(w!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(w=r.getAttribute("src"),(w!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===w)return r}else return r;if(r=wn(r.nextSibling),r===null)break}return null}function SM(r,o,u){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=wn(r.nextSibling),r===null))return null;return r}function np(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function _M(r,o){var u=r.ownerDocument;if(r.data!=="$?"||u.readyState==="complete")o();else{var f=function(){o(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),r._reactRetry=f}}function wn(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return r}var ip=null;function qb(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return r;o--}else u==="/$"&&o++}r=r.previousSibling}return null}function Wb(r,o,u){switch(o=qu(u),r){case"html":if(r=o.documentElement,!r)throw Error(s(452));return r;case"head":if(r=o.head,!r)throw Error(s(453));return r;case"body":if(r=o.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Nl(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);of(r)}var cn=new Map,Xb=new Set;function Wu(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ci=V.d;V.d={f:CM,r:TM,D:EM,C:jM,L:kM,m:MM,X:LM,S:OM,M:AM};function CM(){var r=ci.f(),o=zu();return r||o}function TM(r){var o=va(r);o!==null&&o.tag===5&&o.type==="form"?px(o):ci.r(r)}var Za=typeof document>"u"?null:document;function Kb(r,o,u){var f=Za;if(f&&typeof o=="string"&&o){var v=tn(o);v='link[rel="'+r+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),Xb.has(v)||(Xb.add(v),r={rel:r,crossOrigin:u,href:o},f.querySelector(v)===null&&(o=f.createElement("link"),hs(o,"link",r),ts(o),f.head.appendChild(o)))}}function EM(r){ci.D(r),Kb("dns-prefetch",r,null)}function jM(r,o){ci.C(r,o),Kb("preconnect",r,o)}function kM(r,o,u){ci.L(r,o,u);var f=Za;if(f&&r&&o){var v='link[rel="preload"][as="'+tn(o)+'"]';o==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+tn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+tn(u.imageSizes)+'"]')):v+='[href="'+tn(r)+'"]';var w=v;switch(o){case"style":w=Qa(r);break;case"script":w=Ja(r)}cn.has(w)||(r=g({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:r,as:o},u),cn.set(w,r),f.querySelector(v)!==null||o==="style"&&f.querySelector(Pl(w))||o==="script"&&f.querySelector(Rl(w))||(o=f.createElement("link"),hs(o,"link",r),ts(o),f.head.appendChild(o)))}}function MM(r,o){ci.m(r,o);var u=Za;if(u&&r){var f=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+tn(f)+'"][href="'+tn(r)+'"]',w=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Ja(r)}if(!cn.has(w)&&(r=g({rel:"modulepreload",href:r},o),cn.set(w,r),u.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Rl(w)))return}f=u.createElement("link"),hs(f,"link",r),ts(f),u.head.appendChild(f)}}}function OM(r,o,u){ci.S(r,o,u);var f=Za;if(f&&r){var v=ya(f).hoistableStyles,w=Qa(r);o=o||"default";var E=v.get(w);if(!E){var A={loading:0,preload:null};if(E=f.querySelector(Pl(w)))A.loading=5;else{r=g({rel:"stylesheet",href:r,"data-precedence":o},u),(u=cn.get(w))&&rp(r,u);var U=E=f.createElement("link");ts(U),hs(U,"link",r),U._p=new Promise(function(J,fe){U.onload=J,U.onerror=fe}),U.addEventListener("load",function(){A.loading|=1}),U.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Xu(E,o,f)}E={type:"stylesheet",instance:E,count:1,state:A},v.set(w,E)}}}function LM(r,o){ci.X(r,o);var u=Za;if(u&&r){var f=ya(u).hoistableScripts,v=Ja(r),w=f.get(v);w||(w=u.querySelector(Rl(v)),w||(r=g({src:r,async:!0},o),(o=cn.get(v))&&ap(r,o),w=u.createElement("script"),ts(w),hs(w,"link",r),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},f.set(v,w))}}function AM(r,o){ci.M(r,o);var u=Za;if(u&&r){var f=ya(u).hoistableScripts,v=Ja(r),w=f.get(v);w||(w=u.querySelector(Rl(v)),w||(r=g({src:r,async:!0,type:"module"},o),(o=cn.get(v))&&ap(r,o),w=u.createElement("script"),ts(w),hs(w,"link",r),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},f.set(v,w))}}function Zb(r,o,u,f){var v=(v=Se.current)?Wu(v):null;if(!v)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=Qa(u.href),u=ya(v).hoistableStyles,f=u.get(o),f||(f={type:"style",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=Qa(u.href);var w=ya(v).hoistableStyles,E=w.get(r);if(E||(v=v.ownerDocument||v,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(r,E),(w=v.querySelector(Pl(r)))&&!w._p&&(E.instance=w,E.state.loading=5),cn.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},cn.set(r,u),w||DM(v,r,u,E.state))),o&&f===null)throw Error(s(528,""));return E}if(o&&f!==null)throw Error(s(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ja(u),u=ya(v).hoistableScripts,f=u.get(o),f||(f={type:"script",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Qa(r){return'href="'+tn(r)+'"'}function Pl(r){return'link[rel="stylesheet"]['+r+"]"}function Qb(r){return g({},r,{"data-precedence":r.precedence,precedence:null})}function DM(r,o,u,f){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=r.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),hs(o,"link",u),ts(o),r.head.appendChild(o))}function Ja(r){return'[src="'+tn(r)+'"]'}function Rl(r){return"script[async]"+r}function Jb(r,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var f=r.querySelector('style[data-href~="'+tn(u.href)+'"]');if(f)return o.instance=f,ts(f),f;var v=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(r.ownerDocument||r).createElement("style"),ts(f),hs(f,"style",v),Xu(f,u.precedence,r),o.instance=f;case"stylesheet":v=Qa(u.href);var w=r.querySelector(Pl(v));if(w)return o.state.loading|=4,o.instance=w,ts(w),w;f=Qb(u),(v=cn.get(v))&&rp(f,v),w=(r.ownerDocument||r).createElement("link"),ts(w);var E=w;return E._p=new Promise(function(A,U){E.onload=A,E.onerror=U}),hs(w,"link",f),o.state.loading|=4,Xu(w,u.precedence,r),o.instance=w;case"script":return w=Ja(u.src),(v=r.querySelector(Rl(w)))?(o.instance=v,ts(v),v):(f=u,(v=cn.get(w))&&(f=g({},u),ap(f,v)),r=r.ownerDocument||r,v=r.createElement("script"),ts(v),hs(v,"link",f),r.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,Xu(f,u.precedence,r));return o.instance}function Xu(r,o,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,w=v,E=0;E<f.length;E++){var A=f[E];if(A.dataset.precedence===o)w=A;else if(w!==v)break}w?w.parentNode.insertBefore(r,w.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(r,o.firstChild))}function rp(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function ap(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var Ku=null;function ew(r,o,u){if(Ku===null){var f=new Map,v=Ku=new Map;v.set(u,f)}else v=Ku,f=v.get(u),f||(f=new Map,v.set(u,f));if(f.has(r))return f;for(f.set(r,null),u=u.getElementsByTagName(r),v=0;v<u.length;v++){var w=u[v];if(!(w[Xo]||w[Ae]||r==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var E=w.getAttribute(o)||"";E=r+E;var A=f.get(E);A?A.push(w):f.set(E,[w])}}return f}function tw(r,o,u){r=r.ownerDocument||r,r.head.insertBefore(u,o==="title"?r.querySelector("head > title"):null)}function NM(r,o,u){if(u===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function sw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Bl=null;function PM(){}function RM(r,o,u){if(Bl===null)throw Error(s(475));var f=Bl;if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var v=Qa(u.href),w=r.querySelector(Pl(v));if(w){r=w._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(f.count++,f=Zu.bind(f),r.then(f,f)),o.state.loading|=4,o.instance=w,ts(w);return}w=r.ownerDocument||r,u=Qb(u),(v=cn.get(v))&&rp(u,v),w=w.createElement("link"),ts(w);var E=w;E._p=new Promise(function(A,U){E.onload=A,E.onerror=U}),hs(w,"link",u),o.instance=w}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(f.count++,o=Zu.bind(f),r.addEventListener("load",o),r.addEventListener("error",o))}}function BM(){if(Bl===null)throw Error(s(475));var r=Bl;return r.stylesheets&&r.count===0&&op(r,r.stylesheets),0<r.count?function(o){var u=setTimeout(function(){if(r.stylesheets&&op(r,r.stylesheets),r.unsuspend){var f=r.unsuspend;r.unsuspend=null,f()}},6e4);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u)}}:null}function Zu(){if(this.count--,this.count===0){if(this.stylesheets)op(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Qu=null;function op(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Qu=new Map,o.forEach(UM,r),Qu=null,Zu.call(r))}function UM(r,o){if(!(o.state.loading&4)){var u=Qu.get(r);if(u)var f=u.get(null);else{u=new Map,Qu.set(r,u);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var E=v[w];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(u.set(E.dataset.precedence,E),f=E)}f&&u.set(null,f)}v=o.instance,E=v.getAttribute("data-precedence"),w=u.get(E)||f,w===f&&u.set(null,v),u.set(E,v),this.count++,f=Zu.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),w?w.parentNode.insertBefore(v,w.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),o.state.loading|=4}}var Ul={$$typeof:O,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function zM(r,o,u,f,v,w,E,A){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nt(0),this.hiddenUpdates=Nt(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function nw(r,o,u,f,v,w,E,A,U,J,fe,me){return r=new zM(r,o,u,E,A,U,J,me),o=1,w===!0&&(o|=24),w=Hs(3,null,null,o),r.current=w,w.stateNode=r,o=Vf(),o.refCount++,r.pooledCache=o,o.refCount++,w.memoizedState={element:f,isDehydrated:u,cache:o},Yf(w),r}function iw(r){return r?(r=Oa,r):Oa}function rw(r,o,u,f,v,w){v=iw(v),f.context===null?f.context=v:f.pendingContext=v,f=Ui(o),f.payload={element:u},w=w===void 0?null:w,w!==null&&(f.callback=w),u=zi(r,f,o),u!==null&&(Ws(u,r,o),gl(u,r,o))}function aw(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function lp(r,o){aw(r,o),(r=r.alternate)&&aw(r,o)}function ow(r){if(r.tag===13){var o=Ma(r,67108864);o!==null&&Ws(o,r,67108864),lp(r,67108864)}}var Ju=!0;function IM(r,o,u,f){var v=R.T;R.T=null;var w=V.p;try{V.p=2,cp(r,o,u,f)}finally{V.p=w,R.T=v}}function FM(r,o,u,f){var v=R.T;R.T=null;var w=V.p;try{V.p=8,cp(r,o,u,f)}finally{V.p=w,R.T=v}}function cp(r,o,u,f){if(Ju){var v=up(f);if(v===null)Kg(r,o,f,ed,u),cw(r,f);else if(HM(v,r,o,u,f))f.stopPropagation();else if(cw(r,f),o&4&&-1<VM.indexOf(r)){for(;v!==null;){var w=va(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var E=At(w.pendingLanes);if(E!==0){var A=w;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var U=1<<31-ge(E);A.entanglements[1]|=U,E&=~U}zn(w),(ht&6)===0&&(Bu=ye()+500,Ll(0))}}break;case 13:A=Ma(w,2),A!==null&&Ws(A,w,2),zu(),lp(w,2)}if(w=up(f),w===null&&Kg(r,o,f,ed,u),w===v)break;v=w}v!==null&&f.stopPropagation()}else Kg(r,o,f,null,u)}}function up(r){return r=pf(r),dp(r)}var ed=null;function dp(r){if(ed=null,r=ma(r),r!==null){var o=a(r);if(o===null)r=null;else{var u=o.tag;if(u===13){if(r=l(o),r!==null)return r;r=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return ed=r,null}function lw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fe()){case Ye:return 2;case nt:return 8;case it:case De:return 32;case Ze:return 268435456;default:return 32}default:return 32}}var hp=!1,Qi=null,Ji=null,er=null,zl=new Map,Il=new Map,tr=[],VM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cw(r,o){switch(r){case"focusin":case"focusout":Qi=null;break;case"dragenter":case"dragleave":Ji=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":zl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Il.delete(o.pointerId)}}function Fl(r,o,u,f,v,w){return r===null||r.nativeEvent!==w?(r={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:w,targetContainers:[v]},o!==null&&(o=va(o),o!==null&&ow(o)),r):(r.eventSystemFlags|=f,o=r.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),r)}function HM(r,o,u,f,v){switch(o){case"focusin":return Qi=Fl(Qi,r,o,u,f,v),!0;case"dragenter":return Ji=Fl(Ji,r,o,u,f,v),!0;case"mouseover":return er=Fl(er,r,o,u,f,v),!0;case"pointerover":var w=v.pointerId;return zl.set(w,Fl(zl.get(w)||null,r,o,u,f,v)),!0;case"gotpointercapture":return w=v.pointerId,Il.set(w,Fl(Il.get(w)||null,r,o,u,f,v)),!0}return!1}function uw(r){var o=ma(r.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){r.blockedOn=o,rf(r.priority,function(){if(u.tag===13){var f=qs();f=ga(f);var v=Ma(u,f);v!==null&&Ws(v,u,f),lp(u,f)}});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function td(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var u=up(r.nativeEvent);if(u===null){u=r.nativeEvent;var f=new u.constructor(u.type,u);gf=f,u.target.dispatchEvent(f),gf=null}else return o=va(u),o!==null&&ow(o),r.blockedOn=u,!1;o.shift()}return!0}function dw(r,o,u){td(r)&&u.delete(o)}function GM(){hp=!1,Qi!==null&&td(Qi)&&(Qi=null),Ji!==null&&td(Ji)&&(Ji=null),er!==null&&td(er)&&(er=null),zl.forEach(dw),Il.forEach(dw)}function sd(r,o){r.blockedOn===o&&(r.blockedOn=null,hp||(hp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,GM)))}var nd=null;function hw(r){nd!==r&&(nd=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){nd===r&&(nd=null);for(var o=0;o<r.length;o+=3){var u=r[o],f=r[o+1],v=r[o+2];if(typeof f!="function"){if(dp(f||u)===null)continue;break}var w=va(u);w!==null&&(r.splice(o,3),o-=3,dg(w,{pending:!0,data:v,method:u.method,action:f},f,v))}}))}function Vl(r){function o(U){return sd(U,r)}Qi!==null&&sd(Qi,r),Ji!==null&&sd(Ji,r),er!==null&&sd(er,r),zl.forEach(o),Il.forEach(o);for(var u=0;u<tr.length;u++){var f=tr[u];f.blockedOn===r&&(f.blockedOn=null)}for(;0<tr.length&&(u=tr[0],u.blockedOn===null);)uw(u),u.blockedOn===null&&tr.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var v=u[f],w=u[f+1],E=v[Os]||null;if(typeof w=="function")E||hw(u);else if(E){var A=null;if(w&&w.hasAttribute("formAction")){if(v=w,E=w[Os]||null)A=E.formAction;else if(dp(v)!==null)continue}else A=E.action;typeof A=="function"?u[f+1]=A:(u.splice(f,3),f-=3),hw(u)}}}function fp(r){this._internalRoot=r}id.prototype.render=fp.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(s(409));var u=o.current,f=qs();rw(u,f,r,o,null,null)},id.prototype.unmount=fp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;rw(r.current,2,null,r,null,null),zu(),o[pa]=null}};function id(r){this._internalRoot=r}id.prototype.unstable_scheduleHydration=function(r){if(r){var o=Wo();r={blockedOn:null,target:r,priority:o};for(var u=0;u<tr.length&&o!==0&&o<tr[u].priority;u++);tr.splice(u,0,r),u===0&&uw(r)}};var fw=e.version;if(fw!=="19.1.0")throw Error(s(527,fw,"19.1.0"));V.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=d(o),r=r!==null?h(r):null,r=r===null?null:r.stateNode,r};var $M={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{Le=rd.inject($M),we=rd}catch{}}return Gl.createRoot=function(r,o){if(!i(r))throw Error(s(299));var u=!1,f="",v=Mx,w=Ox,E=Lx,A=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(A=o.unstable_transitionCallbacks)),o=nw(r,1,!1,null,null,u,f,v,w,E,A,null),r[pa]=o.current,Xg(r),new fp(o)},Gl.hydrateRoot=function(r,o,u){if(!i(r))throw Error(s(299));var f=!1,v="",w=Mx,E=Ox,A=Lx,U=null,J=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(w=u.onUncaughtError),u.onCaughtError!==void 0&&(E=u.onCaughtError),u.onRecoverableError!==void 0&&(A=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(U=u.unstable_transitionCallbacks),u.formState!==void 0&&(J=u.formState)),o=nw(r,1,!0,o,u??null,f,v,w,E,A,U,J),o.context=iw(null),u=o.current,f=qs(),f=ga(f),v=Ui(f),v.callback=null,zi(u,v,f),u=f,o.current.lanes=u,_t(o,u),zn(o),r[pa]=o.current,Xg(r),new id(o)},Gl.version="19.1.0",Gl}var _w;function tO(){if(_w)return pp.exports;_w=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),pp.exports=eO(),pp.exports}var sO=tO();const nO=cv(sO);var x=uv();const Zt=cv(x);var $l={},Cw;function iO(){if(Cw)return $l;Cw=1,Object.defineProperty($l,"__esModule",{value:!0}),$l.parse=l,$l.serialize=h;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function l(y,b){const S=new a,_=y.length;if(_<2)return S;const T=b?.decode||g;let C=0;do{const M=y.indexOf("=",C);if(M===-1)break;const O=y.indexOf(";",C),L=O===-1?_:O;if(M>L){C=y.lastIndexOf(";",M-1)+1;continue}const j=c(y,C,M),D=d(y,M,j),k=y.slice(j,D);if(S[k]===void 0){let B=c(y,M+1,L),P=d(y,L,B);const z=T(y.slice(B,P));S[k]=z}C=L+1}while(C<_);return S}function c(y,b,S){do{const _=y.charCodeAt(b);if(_!==32&&_!==9)return b}while(++b<S);return S}function d(y,b,S){for(;b>S;){const _=y.charCodeAt(--b);if(_!==32&&_!==9)return b+1}return S}function h(y,b,S){const _=S?.encode||encodeURIComponent;if(!n.test(y))throw new TypeError(`argument name is invalid: ${y}`);const T=_(b);if(!e.test(T))throw new TypeError(`argument val is invalid: ${b}`);let C=y+"="+T;if(!S)return C;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);C+="; Max-Age="+S.maxAge}if(S.domain){if(!t.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);C+="; Domain="+S.domain}if(S.path){if(!s.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);C+="; Path="+S.path}if(S.expires){if(!m(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);C+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(C+="; HttpOnly"),S.secure&&(C+="; Secure"),S.partitioned&&(C+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return C}function g(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function m(y){return i.call(y)==="[object Date]"}return $l}iO();var Tw="popstate";function rO(n={}){function e(s,i){let{pathname:a,search:l,hash:c}=s.location;return fm("",{pathname:a,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(s,i){return typeof i=="string"?i:wc(i)}return oO(e,t,null,n)}function Et(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function An(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aO(){return Math.random().toString(36).substring(2,10)}function Ew(n,e){return{usr:n.state,key:n.key,idx:e}}function fm(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Lo(e):e,state:t,key:e&&e.key||s||aO()}}function wc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Lo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function oO(n,e,t,s={}){let{window:i=document.defaultView,v5Compat:a=!1}=s,l=i.history,c="POP",d=null,h=g();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function g(){return(l.state||{idx:null}).idx}function m(){c="POP";let T=g(),C=T==null?null:T-h;h=T,d&&d({action:c,location:_.location,delta:C})}function y(T,C){c="PUSH";let M=fm(_.location,T,C);h=g()+1;let O=Ew(M,h),L=_.createHref(M);try{l.pushState(O,"",L)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(L)}a&&d&&d({action:c,location:_.location,delta:1})}function b(T,C){c="REPLACE";let M=fm(_.location,T,C);h=g();let O=Ew(M,h),L=_.createHref(M);l.replaceState(O,"",L),a&&d&&d({action:c,location:_.location,delta:0})}function S(T){return lO(T)}let _={get action(){return c},get location(){return n(i,l)},listen(T){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Tw,m),d=T,()=>{i.removeEventListener(Tw,m),d=null}},createHref(T){return e(i,T)},createURL:S,encodeLocation(T){let C=S(T);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:y,replace:b,go(T){return l.go(T)}};return _}function lO(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Et(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:wc(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function DC(n,e,t="/"){return cO(n,e,t,!1)}function cO(n,e,t,s){let i=typeof e=="string"?Lo(e):e,a=Ci(i.pathname||"/",t);if(a==null)return null;let l=NC(n);uO(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let h=wO(a);c=xO(l[d],h,s)}return c}function NC(n,e=[],t=[],s=""){let i=(a,l,c)=>{let d={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};d.relativePath.startsWith("/")&&(Et(d.relativePath.startsWith(s),`Absolute route path "${d.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(s.length));let h=wi([s,d.relativePath]),g=t.concat(d);a.children&&a.children.length>0&&(Et(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),NC(a.children,e,g,h)),!(a.path==null&&!a.index)&&e.push({path:h,score:vO(h,a.index),routesMeta:g})};return n.forEach((a,l)=>{if(a.path===""||!a.path?.includes("?"))i(a,l);else for(let c of PC(a.path))i(a,l,c)}),e}function PC(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let l=PC(s.join("/")),c=[];return c.push(...l.map(d=>d===""?a:[a,d].join("/"))),i&&c.push(...l),c.map(d=>n.startsWith("/")&&d===""?"/":d)}function uO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:yO(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var dO=/^:[\w-]+$/,hO=3,fO=2,gO=1,pO=10,mO=-2,jw=n=>n==="*";function vO(n,e){let t=n.split("/"),s=t.length;return t.some(jw)&&(s+=mO),e&&(s+=fO),t.filter(i=>!jw(i)).reduce((i,a)=>i+(dO.test(a)?hO:a===""?gO:pO),s)}function yO(n,e){return n.length===e.length&&n.slice(0,-1).every((s,i)=>s===e[i])?n[n.length-1]-e[e.length-1]:0}function xO(n,e,t=!1){let{routesMeta:s}=n,i={},a="/",l=[];for(let c=0;c<s.length;++c){let d=s[c],h=c===s.length-1,g=a==="/"?e:e.slice(a.length)||"/",m=ah({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},g),y=d.route;if(!m&&h&&t&&!s[s.length-1].route.index&&(m=ah({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!m)return null;Object.assign(i,m.params),l.push({params:i,pathname:wi([a,m.pathname]),pathnameBase:TO(wi([a,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(a=wi([a,m.pathnameBase]))}return l}function ah(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=bO(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:s.reduce((h,{paramName:g,isOptional:m},y)=>{if(g==="*"){let S=c[y]||"";l=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const b=c[y];return m&&!b?h[g]=void 0:h[g]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:l,pattern:n}}function bO(n,e=!1,t=!0){An(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(s.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function wO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return An(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ci(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function SO(n,e="/"){let{pathname:t,search:s="",hash:i=""}=typeof n=="string"?Lo(n):n;return{pathname:t?t.startsWith("/")?t:_O(t,e):e,search:EO(s),hash:jO(i)}}function _O(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function bp(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function CO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function dv(n){let e=CO(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function hv(n,e,t,s=!1){let i;typeof n=="string"?i=Lo(n):(i={...n},Et(!i.pathname||!i.pathname.includes("?"),bp("?","pathname","search",i)),Et(!i.pathname||!i.pathname.includes("#"),bp("#","pathname","hash",i)),Et(!i.search||!i.search.includes("#"),bp("#","search","hash",i)));let a=n===""||i.pathname==="",l=a?"/":i.pathname,c;if(l==null)c=t;else{let m=e.length-1;if(!s&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),m-=1;i.pathname=y.join("/")}c=m>=0?e[m]:"/"}let d=SO(i,c),h=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||g)&&(d.pathname+="/"),d}var wi=n=>n.join("/").replace(/\/\/+/g,"/"),TO=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),EO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,jO=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function kO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var RC=["POST","PUT","PATCH","DELETE"];new Set(RC);var MO=["GET",...RC];new Set(MO);var Ao=x.createContext(null);Ao.displayName="DataRouter";var zh=x.createContext(null);zh.displayName="DataRouterState";var BC=x.createContext({isTransitioning:!1});BC.displayName="ViewTransition";var OO=x.createContext(new Map);OO.displayName="Fetchers";var LO=x.createContext(null);LO.displayName="Await";var Dn=x.createContext(null);Dn.displayName="Navigation";var Bc=x.createContext(null);Bc.displayName="Location";var Nn=x.createContext({outlet:null,matches:[],isDataRoute:!1});Nn.displayName="Route";var fv=x.createContext(null);fv.displayName="RouteError";function AO(n,{relative:e}={}){Et(Do(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=x.useContext(Dn),{hash:i,pathname:a,search:l}=Uc(n,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:wi([t,a])),s.createHref({pathname:c,search:l,hash:i})}function Do(){return x.useContext(Bc)!=null}function Js(){return Et(Do(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(Bc).location}var UC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zC(n){x.useContext(Dn).static||x.useLayoutEffect(n)}function vr(){let{isDataRoute:n}=x.useContext(Nn);return n?qO():DO()}function DO(){Et(Do(),"useNavigate() may be used only in the context of a <Router> component.");let n=x.useContext(Ao),{basename:e,navigator:t}=x.useContext(Dn),{matches:s}=x.useContext(Nn),{pathname:i}=Js(),a=JSON.stringify(dv(s)),l=x.useRef(!1);return zC(()=>{l.current=!0}),x.useCallback((d,h={})=>{if(An(l.current,UC),!l.current)return;if(typeof d=="number"){t.go(d);return}let g=hv(d,JSON.parse(a),i,h.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:wi([e,g.pathname])),(h.replace?t.replace:t.push)(g,h.state,h)},[e,t,a,i,n])}var NO=x.createContext(null);function PO(n){let e=x.useContext(Nn).outlet;return e&&x.createElement(NO.Provider,{value:n},e)}function Uc(n,{relative:e}={}){let{matches:t}=x.useContext(Nn),{pathname:s}=Js(),i=JSON.stringify(dv(t));return x.useMemo(()=>hv(n,JSON.parse(i),s,e==="path"),[n,i,s,e])}function RO(n,e){return IC(n,e)}function IC(n,e,t,s){Et(Do(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=x.useContext(Dn),{matches:a}=x.useContext(Nn),l=a[a.length-1],c=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",g=l&&l.route;{let C=g&&g.path||"";FC(d,!g||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let m=Js(),y;if(e){let C=typeof e=="string"?Lo(e):e;Et(h==="/"||C.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${C.pathname}" was given in the \`location\` prop.`),y=C}else y=m;let b=y.pathname||"/",S=b;if(h!=="/"){let C=h.replace(/^\//,"").split("/");S="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let _=DC(n,{pathname:S});An(g||_!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),An(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=FO(_&&_.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:wi([h,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?h:wi([h,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),a,t,s);return e&&T?x.createElement(Bc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},T):T}function BO(){let n=YO(),e=kO(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=x.createElement(x.Fragment,null,x.createElement("p",null,"💿 Hey developer 👋"),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:a},"ErrorBoundary")," or"," ",x.createElement("code",{style:a},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),t?x.createElement("pre",{style:i},t):null,l)}var UO=x.createElement(BO,null),zO=class extends x.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?x.createElement(Nn.Provider,{value:this.props.routeContext},x.createElement(fv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function IO({routeContext:n,match:e,children:t}){let s=x.useContext(Ao);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(Nn.Provider,{value:n},t)}function FO(n,e=[],t=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t?.errors;if(a!=null){let d=i.findIndex(h=>h.route.id&&a?.[h.route.id]!==void 0);Et(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,c=-1;if(t)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:g,errors:m}=t,y=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,g)=>{let m,y=!1,b=null,S=null;t&&(m=a&&h.route.id?a[h.route.id]:void 0,b=h.route.errorElement||UO,l&&(c<0&&g===0?(FC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,S=null):c===g&&(y=!0,S=h.route.hydrateFallbackElement||null)));let _=e.concat(i.slice(0,g+1)),T=()=>{let C;return m?C=b:y?C=S:h.route.Component?C=x.createElement(h.route.Component,null):h.route.element?C=h.route.element:C=d,x.createElement(IO,{match:h,routeContext:{outlet:d,matches:_,isDataRoute:t!=null},children:C})};return t&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?x.createElement(zO,{location:t.location,revalidation:t.revalidation,component:b,error:m,children:T(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):T()},null)}function gv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VO(n){let e=x.useContext(Ao);return Et(e,gv(n)),e}function HO(n){let e=x.useContext(zh);return Et(e,gv(n)),e}function GO(n){let e=x.useContext(Nn);return Et(e,gv(n)),e}function pv(n){let e=GO(n),t=e.matches[e.matches.length-1];return Et(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function $O(){return pv("useRouteId")}function YO(){let n=x.useContext(fv),e=HO("useRouteError"),t=pv("useRouteError");return n!==void 0?n:e.errors?.[t]}function qO(){let{router:n}=VO("useNavigate"),e=pv("useNavigate"),t=x.useRef(!1);return zC(()=>{t.current=!0}),x.useCallback(async(i,a={})=>{An(t.current,UC),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var kw={};function FC(n,e,t){!e&&!kw[n]&&(kw[n]=!0,An(!1,t))}x.memo(WO);function WO({routes:n,future:e,state:t}){return IC(n,void 0,t,e)}function Mw({to:n,replace:e,state:t,relative:s}){Et(Do(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=x.useContext(Dn);An(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=x.useContext(Nn),{pathname:l}=Js(),c=vr(),d=hv(n,dv(a),l,s==="path"),h=JSON.stringify(d);return x.useEffect(()=>{c(JSON.parse(h),{replace:e,state:t,relative:s})},[c,h,s,e,t]),null}function XO(n){return PO(n.context)}function Kt(n){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function KO({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:i,static:a=!1}){Et(!Do(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=x.useMemo(()=>({basename:l,navigator:i,static:a,future:{}}),[l,i,a]);typeof t=="string"&&(t=Lo(t));let{pathname:d="/",search:h="",hash:g="",state:m=null,key:y="default"}=t,b=x.useMemo(()=>{let S=Ci(d,l);return S==null?null:{location:{pathname:S,search:h,hash:g,state:m,key:y},navigationType:s}},[l,d,h,g,m,y,s]);return An(b!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:x.createElement(Dn.Provider,{value:c},x.createElement(Bc.Provider,{children:e,value:b}))}function ZO({children:n,location:e}){return RO(gm(n),e)}function gm(n,e=[]){let t=[];return x.Children.forEach(n,(s,i)=>{if(!x.isValidElement(s))return;let a=[...e,i];if(s.type===x.Fragment){t.push.apply(t,gm(s.props.children,a));return}Et(s.type===Kt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=gm(s.props.children,a)),t.push(l)}),t}var qd="get",Wd="application/x-www-form-urlencoded";function Ih(n){return n!=null&&typeof n.tagName=="string"}function QO(n){return Ih(n)&&n.tagName.toLowerCase()==="button"}function JO(n){return Ih(n)&&n.tagName.toLowerCase()==="form"}function eL(n){return Ih(n)&&n.tagName.toLowerCase()==="input"}function tL(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function sL(n,e){return n.button===0&&(!e||e==="_self")&&!tL(n)}var ad=null;function nL(){if(ad===null)try{new FormData(document.createElement("form"),0),ad=!1}catch{ad=!0}return ad}var iL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wp(n){return n!=null&&!iL.has(n)?(An(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wd}"`),null):n}function rL(n,e){let t,s,i,a,l;if(JO(n)){let c=n.getAttribute("action");s=c?Ci(c,e):null,t=n.getAttribute("method")||qd,i=wp(n.getAttribute("enctype"))||Wd,a=new FormData(n)}else if(QO(n)||eL(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||c.getAttribute("action");if(s=d?Ci(d,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||qd,i=wp(n.getAttribute("formenctype"))||wp(c.getAttribute("enctype"))||Wd,a=new FormData(c,n),!nL()){let{name:h,type:g,value:m}=n;if(g==="image"){let y=h?`${h}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else h&&a.append(h,m)}}else{if(Ih(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=qd,s=null,i=Wd,l=n}return a&&i==="text/plain"&&(l=a,a=void 0),{action:s,method:t.toLowerCase(),encType:i,formData:a,body:l}}function mv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function aL(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oL(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function lL(n,e,t){let s=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let l=await aL(a,t);return l.links?l.links():[]}return[]}));return hL(s.flat(1).filter(oL).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Ow(n,e,t,s,i,a){let l=(d,h)=>t[h]?d.route.id!==t[h].route.id:!0,c=(d,h)=>t[h].pathname!==d.pathname||t[h].route.path?.endsWith("*")&&t[h].params["*"]!==d.params["*"];return a==="assets"?e.filter((d,h)=>l(d,h)||c(d,h)):a==="data"?e.filter((d,h)=>{let g=s.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,h)||c(d,h))return!0;if(d.route.shouldRevalidate){let m=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function cL(n,e,{includeHydrateFallback:t}={}){return uL(n.map(s=>{let i=e.routes[s.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function uL(n){return[...new Set(n)]}function dL(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function hL(n,e){let t=new Set;return new Set(e),n.reduce((s,i)=>{let a=JSON.stringify(dL(i));return t.has(a)||(t.add(a),s.push({key:a,link:i})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var fL=new Set([100,101,204,205]);function gL(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Ci(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function VC(){let n=x.useContext(Ao);return mv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function pL(){let n=x.useContext(zh);return mv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var vv=x.createContext(void 0);vv.displayName="FrameworkContext";function HC(){let n=x.useContext(vv);return mv(n,"You must render this element inside a <HydratedRouter> element"),n}function mL(n,e){let t=x.useContext(vv),[s,i]=x.useState(!1),[a,l]=x.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:h,onMouseLeave:g,onTouchStart:m}=e,y=x.useRef(null);x.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let _=C=>{C.forEach(M=>{l(M.isIntersecting)})},T=new IntersectionObserver(_,{threshold:.5});return y.current&&T.observe(y.current),()=>{T.disconnect()}}},[n]),x.useEffect(()=>{if(s){let _=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(_)}}},[s]);let b=()=>{i(!0)},S=()=>{i(!1),l(!1)};return t?n!=="intent"?[a,y,{}]:[a,y,{onFocus:Yl(c,b),onBlur:Yl(d,S),onMouseEnter:Yl(h,b),onMouseLeave:Yl(g,S),onTouchStart:Yl(m,b)}]:[!1,y,{}]}function Yl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function vL({page:n,...e}){let{router:t}=VC(),s=x.useMemo(()=>DC(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?x.createElement(xL,{page:n,matches:s,...e}):null}function yL(n){let{manifest:e,routeModules:t}=HC(),[s,i]=x.useState([]);return x.useEffect(()=>{let a=!1;return lL(n,e,t).then(l=>{a||i(l)}),()=>{a=!0}},[n,e,t]),s}function xL({page:n,matches:e,...t}){let s=Js(),{manifest:i,routeModules:a}=HC(),{basename:l}=VC(),{loaderData:c,matches:d}=pL(),h=x.useMemo(()=>Ow(n,e,d,i,s,"data"),[n,e,d,i,s]),g=x.useMemo(()=>Ow(n,e,d,i,s,"assets"),[n,e,d,i,s]),m=x.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let S=new Set,_=!1;if(e.forEach(C=>{let M=i.routes[C.route.id];!M||!M.hasLoader||(!h.some(O=>O.route.id===C.route.id)&&C.route.id in c&&a[C.route.id]?.shouldRevalidate||M.hasClientLoader?_=!0:S.add(C.route.id))}),S.size===0)return[];let T=gL(n,l);return _&&S.size>0&&T.searchParams.set("_routes",e.filter(C=>S.has(C.route.id)).map(C=>C.route.id).join(",")),[T.pathname+T.search]},[l,c,s,i,h,e,n,a]),y=x.useMemo(()=>cL(g,i),[g,i]),b=yL(g);return x.createElement(x.Fragment,null,m.map(S=>x.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),y.map(S=>x.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),b.map(({key:S,link:_})=>x.createElement("link",{key:S,..._})))}function bL(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var GC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{GC&&(window.__reactRouterVersion="7.6.3")}catch{}function wL({basename:n,children:e,window:t}){let s=x.useRef();s.current==null&&(s.current=rO({window:t,v5Compat:!0}));let i=s.current,[a,l]=x.useState({action:i.action,location:i.location}),c=x.useCallback(d=>{x.startTransition(()=>l(d))},[l]);return x.useLayoutEffect(()=>i.listen(c),[i,c]),x.createElement(KO,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var $C=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,os=x.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:i,reloadDocument:a,replace:l,state:c,target:d,to:h,preventScrollReset:g,viewTransition:m,...y},b){let{basename:S}=x.useContext(Dn),_=typeof h=="string"&&$C.test(h),T,C=!1;if(typeof h=="string"&&_&&(T=h,GC))try{let P=new URL(window.location.href),z=h.startsWith("//")?new URL(P.protocol+h):new URL(h),I=Ci(z.pathname,S);z.origin===P.origin&&I!=null?h=I+z.search+z.hash:C=!0}catch{An(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=AO(h,{relative:i}),[O,L,j]=mL(s,y),D=TL(h,{replace:l,state:c,target:d,preventScrollReset:g,relative:i,viewTransition:m});function k(P){e&&e(P),P.defaultPrevented||D(P)}let B=x.createElement("a",{...y,...j,href:T||M,onClick:C||a?e:k,ref:bL(b,L),target:d,"data-discover":!_&&t==="render"?"true":void 0});return O&&!_?x.createElement(x.Fragment,null,B,x.createElement(vL,{page:M})):B});os.displayName="Link";var SL=x.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:i=!1,style:a,to:l,viewTransition:c,children:d,...h},g){let m=Uc(l,{relative:h.relative}),y=Js(),b=x.useContext(zh),{navigator:S,basename:_}=x.useContext(Dn),T=b!=null&&OL(m)&&c===!0,C=S.encodeLocation?S.encodeLocation(m).pathname:m.pathname,M=y.pathname,O=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(M=M.toLowerCase(),O=O?O.toLowerCase():null,C=C.toLowerCase()),O&&_&&(O=Ci(O,_)||O);const L=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let j=M===C||!i&&M.startsWith(C)&&M.charAt(L)==="/",D=O!=null&&(O===C||!i&&O.startsWith(C)&&O.charAt(C.length)==="/"),k={isActive:j,isPending:D,isTransitioning:T},B=j?e:void 0,P;typeof s=="function"?P=s(k):P=[s,j?"active":null,D?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let z=typeof a=="function"?a(k):a;return x.createElement(os,{...h,"aria-current":B,className:P,ref:g,style:z,to:l,viewTransition:c},typeof d=="function"?d(k):d)});SL.displayName="NavLink";var _L=x.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:i,state:a,method:l=qd,action:c,onSubmit:d,relative:h,preventScrollReset:g,viewTransition:m,...y},b)=>{let S=kL(),_=ML(c,{relative:h}),T=l.toLowerCase()==="get"?"get":"post",C=typeof c=="string"&&$C.test(c),M=O=>{if(d&&d(O),O.defaultPrevented)return;O.preventDefault();let L=O.nativeEvent.submitter,j=L?.getAttribute("formmethod")||l;S(L||O.currentTarget,{fetcherKey:e,method:j,navigate:t,replace:i,state:a,relative:h,preventScrollReset:g,viewTransition:m})};return x.createElement("form",{ref:b,method:T,action:_,onSubmit:s?d:M,...y,"data-discover":!C&&n==="render"?"true":void 0})});_L.displayName="Form";function CL(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YC(n){let e=x.useContext(Ao);return Et(e,CL(n)),e}function TL(n,{target:e,replace:t,state:s,preventScrollReset:i,relative:a,viewTransition:l}={}){let c=vr(),d=Js(),h=Uc(n,{relative:a});return x.useCallback(g=>{if(sL(g,e)){g.preventDefault();let m=t!==void 0?t:wc(d)===wc(h);c(n,{replace:m,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[d,c,h,t,s,e,n,i,a,l])}var EL=0,jL=()=>`__${String(++EL)}__`;function kL(){let{router:n}=YC("useSubmit"),{basename:e}=x.useContext(Dn),t=$O();return x.useCallback(async(s,i={})=>{let{action:a,method:l,encType:c,formData:d,body:h}=rL(s,e);if(i.navigate===!1){let g=i.fetcherKey||jL();await n.fetch(g,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:d,body:h,formMethod:i.method||l,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:d,body:h,formMethod:i.method||l,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function ML(n,{relative:e}={}){let{basename:t}=x.useContext(Dn),s=x.useContext(Nn);Et(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),a={...Uc(n||".",{relative:e})},l=Js();if(n==null){a.search=l.search;let c=new URLSearchParams(a.search),d=c.getAll("index");if(d.some(g=>g==="")){c.delete("index"),d.filter(m=>m).forEach(m=>c.append("index",m));let g=c.toString();a.search=g?`?${g}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:wi([t,a.pathname])),wc(a)}function OL(n,e={}){let t=x.useContext(BC);Et(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=YC("useViewTransitionState"),i=Uc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Ci(t.currentLocation.pathname,s)||t.currentLocation.pathname,l=Ci(t.nextLocation.pathname,s)||t.nextLocation.pathname;return ah(i.pathname,l)!=null||ah(i.pathname,a)!=null}[...fL];var No=AC();const LL="modulepreload",AL=function(n){return"/"+n},Lw={},zc=function(e,t,s){let i=Promise.resolve();if(t&&t.length>0){let h=function(g){return Promise.all(g.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};var l=h;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");i=h(t.map(g=>{if(g=AL(g),g in Lw)return;Lw[g]=!0;const m=g.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${y}`))return;const b=document.createElement("link");if(b.rel=m?"stylesheet":LL,m||(b.as="script"),b.crossOrigin="",b.href=g,d&&b.setAttribute("nonce",d),document.head.appendChild(b),m)return new Promise((S,_)=>{b.addEventListener("load",S),b.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${g}`)))})}))}function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})},DL=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>zc(async()=>{const{default:s}=await Promise.resolve().then(()=>Po);return{default:s}},[]).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class yv extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class NL extends yv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Aw extends yv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Dw extends yv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var pm;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(pm||(pm={}));var PL=function(n,e,t,s){function i(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{h(s.next(g))}catch(m){l(m)}}function d(g){try{h(s.throw(g))}catch(m){l(m)}}function h(g){g.done?a(g.value):i(g.value).then(c,d)}h((s=s.apply(n,e||[])).next())})};class RL{constructor(e,{headers:t={},customFetch:s,region:i=pm.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=DL(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return PL(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:l}=t;let c={},{region:d}=t;d||(d=this.region);const h=new URL(`${this.url}/${e}`);d&&d!=="any"&&(c["x-region"]=d,h.searchParams.set("forceFunctionRegion",d));let g;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",g=l):typeof l=="string"?(c["Content-Type"]="text/plain",g=l):typeof FormData<"u"&&l instanceof FormData?g=l:(c["Content-Type"]="application/json",g=JSON.stringify(l)));const m=yield this.fetch(h.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:g}).catch(_=>{throw new NL(_)}),y=m.headers.get("x-relay-error");if(y&&y==="true")throw new Aw(m);if(!m.ok)throw new Dw(m);let b=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return b==="application/json"?S=yield m.json():b==="application/octet-stream"?S=yield m.blob():b==="text/event-stream"?S=m:b==="multipart/form-data"?S=yield m.formData():S=yield m.text(),{data:S,error:null,response:m}}catch(i){return{data:null,error:i,response:i instanceof Dw||i instanceof Aw?i.context:void 0}}})}}var rs={},eo={},to={},so={},no={},io={},BL=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},jo=BL();const UL=jo.fetch,qC=jo.fetch.bind(jo),WC=jo.Headers,zL=jo.Request,IL=jo.Response,Po=Object.freeze(Object.defineProperty({__proto__:null,Headers:WC,Request:zL,Response:IL,default:qC,fetch:UL},Symbol.toStringTag,{value:"Module"})),FL=qM(Po);var od={},Nw;function XC(){if(Nw)return od;Nw=1,Object.defineProperty(od,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return od.default=n,od}var Pw;function KC(){if(Pw)return io;Pw=1;var n=io&&io.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(io,"__esModule",{value:!0});const e=n(FL),t=n(XC());class s{constructor(a){this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=a.headers,this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=a.shouldThrowOnError,this.signal=a.signal,this.isMaybeSingle=a.isMaybeSingle,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=Object.assign({},this.headers),this.headers[a]=l,this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var g,m,y;let b=null,S=null,_=null,T=h.status,C=h.statusText;if(h.ok){if(this.method!=="HEAD"){const j=await h.text();j===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?S=j:S=JSON.parse(j))}const O=(g=this.headers.Prefer)===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),L=(m=h.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");O&&L&&L.length>1&&(_=parseInt(L[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(b={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,_=null,T=406,C="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const O=await h.text();try{b=JSON.parse(O),Array.isArray(b)&&h.status===404&&(S=[],b=null,T=200,C="OK")}catch{h.status===404&&O===""?(T=204,C="No Content"):b={message:O}}if(b&&this.isMaybeSingle&&(!((y=b?.details)===null||y===void 0)&&y.includes("0 rows"))&&(b=null,T=200,C="OK"),b&&this.shouldThrowOnError)throw new t.default(b)}return{error:b,data:S,count:_,status:T,statusText:C}});return this.shouldThrowOnError||(d=d.catch(h=>{var g,m,y;return{error:{message:`${(g=h?.name)!==null&&g!==void 0?g:"FetchError"}: ${h?.message}`,details:`${(m=h?.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(y=h?.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),d.then(a,l)}returns(){return this}overrideTypes(){return this}}return io.default=s,io}var Rw;function ZC(){if(Rw)return no;Rw=1;var n=no&&no.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(no,"__esModule",{value:!0});const e=n(KC());class t extends e.default{select(i){let a=!1;const l=(i??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:a=!0,nullsFirst:l,foreignTable:c,referencedTable:d=c}={}){const h=d?`${d}.order`:"order",g=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${g?`${g},`:""}${i}.${a?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:l=a}={}){const c=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${i}`),this}range(i,a,{foreignTable:l,referencedTable:c=l}={}){const d=typeof c>"u"?"offset":`${c}.offset`,h=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${i}`),this.url.searchParams.set(h,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:a=!1,settings:l=!1,buffers:c=!1,wal:d=!1,format:h="text"}={}){var g;const m=[i?"analyze":null,a?"verbose":null,l?"settings":null,c?"buffers":null,d?"wal":null].filter(Boolean).join("|"),y=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${y}"; options=${m};`,h==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return no.default=t,no}var Bw;function xv(){if(Bw)return so;Bw=1;var n=so&&so.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(so,"__esModule",{value:!0});const e=n(ZC());class t extends e.default{eq(i,a){return this.url.searchParams.append(i,`eq.${a}`),this}neq(i,a){return this.url.searchParams.append(i,`neq.${a}`),this}gt(i,a){return this.url.searchParams.append(i,`gt.${a}`),this}gte(i,a){return this.url.searchParams.append(i,`gte.${a}`),this}lt(i,a){return this.url.searchParams.append(i,`lt.${a}`),this}lte(i,a){return this.url.searchParams.append(i,`lte.${a}`),this}like(i,a){return this.url.searchParams.append(i,`like.${a}`),this}likeAllOf(i,a){return this.url.searchParams.append(i,`like(all).{${a.join(",")}}`),this}likeAnyOf(i,a){return this.url.searchParams.append(i,`like(any).{${a.join(",")}}`),this}ilike(i,a){return this.url.searchParams.append(i,`ilike.${a}`),this}ilikeAllOf(i,a){return this.url.searchParams.append(i,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(i,a){return this.url.searchParams.append(i,`ilike(any).{${a.join(",")}}`),this}is(i,a){return this.url.searchParams.append(i,`is.${a}`),this}in(i,a){const l=Array.from(new Set(a)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cs.{${a.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(a)}`),this}containedBy(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cd.{${a.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(a)}`),this}rangeGt(i,a){return this.url.searchParams.append(i,`sr.${a}`),this}rangeGte(i,a){return this.url.searchParams.append(i,`nxl.${a}`),this}rangeLt(i,a){return this.url.searchParams.append(i,`sl.${a}`),this}rangeLte(i,a){return this.url.searchParams.append(i,`nxr.${a}`),this}rangeAdjacent(i,a){return this.url.searchParams.append(i,`adj.${a}`),this}overlaps(i,a){return typeof a=="string"?this.url.searchParams.append(i,`ov.${a}`):this.url.searchParams.append(i,`ov.{${a.join(",")}}`),this}textSearch(i,a,{config:l,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${d}fts${h}.${a}`),this}match(i){return Object.entries(i).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(i,a,l){return this.url.searchParams.append(i,`not.${a}.${l}`),this}or(i,{foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,a,l){return this.url.searchParams.append(i,`${a}.${l}`),this}}return so.default=t,so}var Uw;function QC(){if(Uw)return to;Uw=1;var n=to&&to.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(to,"__esModule",{value:!0});const e=n(xv());class t{constructor(i,{headers:a={},schema:l,fetch:c}){this.url=i,this.headers=a,this.schema=l,this.fetch=c}select(i,{head:a=!1,count:l}={}){const c=a?"HEAD":"GET";let d=!1;const h=(i??"*").split("").map(g=>/\s/.test(g)&&!d?"":(g==='"'&&(d=!d),g)).join("");return this.url.searchParams.set("select",h),l&&(this.headers.Prefer=`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:a,defaultToNull:l=!0}={}){const c="POST",d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),a&&d.push(`count=${a}`),l||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(i)){const h=i.reduce((g,m)=>g.concat(Object.keys(m)),[]);if(h.length>0){const g=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:a,ignoreDuplicates:l=!1,count:c,defaultToNull:d=!0}={}){const h="POST",g=[`resolution=${l?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&g.push(this.headers.Prefer),c&&g.push(`count=${c}`),d||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(i)){const m=i.reduce((y,b)=>y.concat(Object.keys(b)),[]);if(m.length>0){const y=[...new Set(m)].map(b=>`"${b}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:a}={}){const l="PATCH",c=[];return this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),this.headers.Prefer=c.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const a="DELETE",l=[];return i&&l.push(`count=${i}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return to.default=t,to}var ql={},Wl={},zw;function VL(){return zw||(zw=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.version=void 0,Wl.version="0.0.0-automated"),Wl}var Iw;function HL(){if(Iw)return ql;Iw=1,Object.defineProperty(ql,"__esModule",{value:!0}),ql.DEFAULT_HEADERS=void 0;const n=VL();return ql.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},ql}var Fw;function GL(){if(Fw)return eo;Fw=1;var n=eo&&eo.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(eo,"__esModule",{value:!0});const e=n(QC()),t=n(xv()),s=HL();class i{constructor(l,{headers:c={},schema:d,fetch:h}={}){this.url=l,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),c),this.schemaName=d,this.fetch=h}from(l){const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new i(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:d=!1,get:h=!1,count:g}={}){let m;const y=new URL(`${this.url}/rpc/${l}`);let b;d||h?(m=d?"HEAD":"GET",Object.entries(c).filter(([_,T])=>T!==void 0).map(([_,T])=>[_,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([_,T])=>{y.searchParams.append(_,T)})):(m="POST",b=c);const S=Object.assign({},this.headers);return g&&(S.Prefer=`count=${g}`),new t.default({method:m,url:y,headers:S,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return eo.default=i,eo}var Vw;function $L(){if(Vw)return rs;Vw=1;var n=rs&&rs.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(rs,"__esModule",{value:!0}),rs.PostgrestError=rs.PostgrestBuilder=rs.PostgrestTransformBuilder=rs.PostgrestFilterBuilder=rs.PostgrestQueryBuilder=rs.PostgrestClient=void 0;const e=n(GL());rs.PostgrestClient=e.default;const t=n(QC());rs.PostgrestQueryBuilder=t.default;const s=n(xv());rs.PostgrestFilterBuilder=s.default;const i=n(ZC());rs.PostgrestTransformBuilder=i.default;const a=n(KC());rs.PostgrestBuilder=a.default;const l=n(XC());return rs.PostgrestError=l.default,rs.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:l.default},rs}var YL=$L();const qL=cv(YL),{PostgrestClient:WL,PostgrestQueryBuilder:tF,PostgrestFilterBuilder:sF,PostgrestTransformBuilder:nF,PostgrestBuilder:iF,PostgrestError:rF}=qL;function XL(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const KL=XL(),ZL="2.11.15",QL=`realtime-js/${ZL}`,JL="1.0.0",JC=1e4,eA=1e3;var rc;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(rc||(rc={}));var ys;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(ys||(ys={}));var En;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(En||(En={}));var mm;(function(n){n.websocket="websocket"})(mm||(mm={}));var $r;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})($r||($r={}));class tA{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const i=t.getUint8(1),a=t.getUint8(2);let l=this.HEADER_LENGTH+2;const c=s.decode(e.slice(l,l+i));l=l+i;const d=s.decode(e.slice(l,l+a));l=l+a;const h=JSON.parse(s.decode(e.slice(l,e.byteLength)));return{ref:null,topic:c,event:d,payload:h}}}class e2{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var bt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(bt||(bt={}));const Hw=(n,e,t={})=>{var s;const i=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((a,l)=>(a[l]=sA(l,n,e,i),a),{})},sA=(n,e,t,s)=>{const i=e.find(c=>c.name===n),a=i?.type,l=t[n];return a&&!s.includes(a)?t2(a,l):vm(l)},t2=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return aA(e,t)}switch(n){case bt.bool:return nA(e);case bt.float4:case bt.float8:case bt.int2:case bt.int4:case bt.int8:case bt.numeric:case bt.oid:return iA(e);case bt.json:case bt.jsonb:return rA(e);case bt.timestamp:return oA(e);case bt.abstime:case bt.date:case bt.daterange:case bt.int4range:case bt.int8range:case bt.money:case bt.reltime:case bt.text:case bt.time:case bt.timestamptz:case bt.timetz:case bt.tsrange:case bt.tstzrange:return vm(e);default:return vm(e)}},vm=n=>n,nA=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},iA=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},rA=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},aA=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let a;const l=n.slice(1,t);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(c=>t2(e,c))}return n},oA=n=>typeof n=="string"?n.replace(" ","T"):n,s2=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Sp{constructor(e,t,s={},i=JC){this.channel=e,this.event=t,this.payload=s,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Gw;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Gw||(Gw={}));class ac{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},i=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ac.syncState(this.state,i,a,l),this.pendingDiffs.forEach(d=>{this.state=ac.syncDiff(this.state,d,a,l)}),this.pendingDiffs=[],c()}),this.channel._on(s.diff,{},i=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ac.syncDiff(this.state,i,a,l),c())}),this.onJoin((i,a,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:l})}),this.onLeave((i,a,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,i){const a=this.cloneDeep(e),l=this.transformState(t),c={},d={};return this.map(a,(h,g)=>{l[h]||(d[h]=g)}),this.map(l,(h,g)=>{const m=a[h];if(m){const y=g.map(T=>T.presence_ref),b=m.map(T=>T.presence_ref),S=g.filter(T=>b.indexOf(T.presence_ref)<0),_=m.filter(T=>y.indexOf(T.presence_ref)<0);S.length>0&&(c[h]=S),_.length>0&&(d[h]=_)}else c[h]=g}),this.syncDiff(a,{joins:c,leaves:d},s,i)}static syncDiff(e,t,s,i){const{joins:a,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),i||(i=()=>{}),this.map(a,(c,d)=>{var h;const g=(h=e[c])!==null&&h!==void 0?h:[];if(e[c]=this.cloneDeep(d),g.length>0){const m=e[c].map(b=>b.presence_ref),y=g.filter(b=>m.indexOf(b.presence_ref)<0);e[c].unshift(...y)}s(c,g,d)}),this.map(l,(c,d)=>{let h=e[c];if(!h)return;const g=d.map(m=>m.presence_ref);h=h.filter(m=>g.indexOf(m.presence_ref)<0),e[c]=h,i(c,h,d),h.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const i=e[s];return"metas"in i?t[s]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[s]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $w;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})($w||($w={}));var Yw;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Yw||(Yw={}));var pi;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(pi||(pi={}));class bv{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=ys.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Sp(this,En.join,this.params,this.timeout),this.rejoinTimer=new e2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ys.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ys.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ys.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ys.errored,this.rejoinTimer.scheduleTimeout())}),this._on(En.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new ac(this),this.broadcastEndpointURL=s2(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ys.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params;this._onError(g=>e?.(pi.CHANNEL_ERROR,g)),this._onClose(()=>e?.(pi.CLOSED));const d={},h={broadcast:a,presence:l,postgres_changes:(i=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(g=>g.filter))!==null&&i!==void 0?i:[],private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:g})=>{var m;if(this.socket.setAuth(),g===void 0){e?.(pi.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,b=(m=y?.length)!==null&&m!==void 0?m:0,S=[];for(let _=0;_<b;_++){const T=y[_],{filter:{event:C,schema:M,table:O,filter:L}}=T,j=g&&g[_];if(j&&j.event===C&&j.schema===M&&j.table===O&&j.filter===L)S.push(Object.assign(Object.assign({},T),{id:j.id}));else{this.unsubscribe(),this.state=ys.errored,e?.(pi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(pi.SUBSCRIBED);return}}).receive("error",g=>{this.state=ys.errored,e?.(pi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e?.(pi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:l}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,c,d;const h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),h.receive("ok",()=>a("ok")),h.receive("error",()=>a("error")),h.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ys.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(En.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(i=>{s=new Sp(this,En.leave,{},e),s.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const i=new AbortController,a=setTimeout(()=>i.abort(),s),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(a),l}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Sp(this,e,t,s);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var i,a;const l=e.toLocaleLowerCase(),{close:c,error:d,leave:h,join:g}=En;if(s&&[c,d,h,g].indexOf(l)>=0&&s!==this._joinRef())return;let y=this._onMessage(l,t,s);if(t&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(b=>{var S,_,T;return((S=b.filter)===null||S===void 0?void 0:S.event)==="*"||((T=(_=b.filter)===null||_===void 0?void 0:_.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===l}).map(b=>b.callback(y,s)):(a=this.bindings[l])===null||a===void 0||a.filter(b=>{var S,_,T,C,M,O;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const L=b.id,j=(S=b.filter)===null||S===void 0?void 0:S.event;return L&&((_=t.ids)===null||_===void 0?void 0:_.includes(L))&&(j==="*"||j?.toLocaleLowerCase()===((T=t.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const L=(M=(C=b?.filter)===null||C===void 0?void 0:C.event)===null||M===void 0?void 0:M.toLocaleLowerCase();return L==="*"||L===((O=t?.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof y=="object"&&"ids"in y){const S=y.data,{schema:_,table:T,commit_timestamp:C,type:M,errors:O}=S;y=Object.assign(Object.assign({},{schema:_,table:T,commit_timestamp:C,eventType:M,new:{},old:{},errors:O}),this._getPayloadRecords(S))}b.callback(y,s)})}_isClosed(){return this.state===ys.closed}_isJoined(){return this.state===ys.joined}_isJoining(){return this.state===ys.joining}_isLeaving(){return this.state===ys.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const i=e.toLocaleLowerCase(),a={type:i,filter:t,callback:s};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&bv.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(En.close,{},e)}_onError(e){this._on(En.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ys.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Hw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Hw(e.columns,e.old_record)),t}}const qw=()=>{},lA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class cA{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=JC,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=qw,this.ref=0,this.logger=qw,this.conn=null,this.sendBuffer=[],this.serializer=new tA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...c)=>zc(async()=>{const{default:d}=await Promise.resolve().then(()=>Po);return{default:d}},void 0).then(({default:d})=>d(...c)):l=fetch,(...c)=>l(...c)},this.endPoint=`${e}/${mm.websocket}`,this.httpEndpoint=s2(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(s=t?.params)===null||s===void 0?void 0:s.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=t?.encode?t.encode:(a,l)=>l(JSON.stringify(a)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new e2(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=KL),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:JL}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case rc.connecting:return $r.Connecting;case rc.open:return $r.Open;case rc.closing:return $r.Closing;default:return $r.Closed}}isConnected(){return this.connectionState()===$r.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===s);if(i)return i;{const a=new bv(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:s,payload:i,ref:a}=e,l=()=>{this.encode(e,c=>{var d;(d=this.conn)===null||d===void 0||d.send(c)})};this.log("push",`${t} ${s} (${a})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const i={access_token:t,version:QL};t&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(En.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(eA,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:i,payload:a,ref:l}=t;s==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${s} ${i} ${l&&"("+l+")"||""}`,a),Array.from(this.channels).filter(c=>c._isMember(s)).forEach(c=>c._trigger(i,a,l)),this.stateChangeCallbacks.message.forEach(c=>c(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(En.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${s}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([lA],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class wv extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function as(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class uA extends wv{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ym extends wv{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var dA=function(n,e,t,s){function i(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{h(s.next(g))}catch(m){l(m)}}function d(g){try{h(s.throw(g))}catch(m){l(m)}}function h(g){g.done?a(g.value):i(g.value).then(c,d)}h((s=s.apply(n,e||[])).next())})};const n2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>zc(async()=>{const{default:s}=await Promise.resolve().then(()=>Po);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},hA=()=>dA(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield zc(()=>Promise.resolve().then(()=>Po),void 0)).Response:Response}),xm=n=>{if(Array.isArray(n))return n.map(t=>xm(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const i=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=xm(s)}),e};var oa=function(n,e,t,s){function i(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{h(s.next(g))}catch(m){l(m)}}function d(g){try{h(s.throw(g))}catch(m){l(m)}}function h(g){g.done?a(g.value):i(g.value).then(c,d)}h((s=s.apply(n,e||[])).next())})};const _p=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),fA=(n,e,t)=>oa(void 0,void 0,void 0,function*(){const s=yield hA();n instanceof s&&!t?.noResolveJson?n.json().then(i=>{e(new uA(_p(i),n.status||500))}).catch(i=>{e(new ym(_p(i),i))}):e(new ym(_p(n),n))}),gA=(n,e,t,s)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s&&(i.body=JSON.stringify(s)),Object.assign(Object.assign({},i),t))};function Ic(n,e,t,s,i,a){return oa(this,void 0,void 0,function*(){return new Promise((l,c)=>{n(t,gA(e,s,i,a)).then(d=>{if(!d.ok)throw d;return s?.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>fA(d,c,s))})})}function oh(n,e,t,s){return oa(this,void 0,void 0,function*(){return Ic(n,"GET",e,t,s)})}function lr(n,e,t,s,i){return oa(this,void 0,void 0,function*(){return Ic(n,"POST",e,s,i,t)})}function pA(n,e,t,s,i){return oa(this,void 0,void 0,function*(){return Ic(n,"PUT",e,s,i,t)})}function mA(n,e,t,s){return oa(this,void 0,void 0,function*(){return Ic(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function i2(n,e,t,s,i){return oa(this,void 0,void 0,function*(){return Ic(n,"DELETE",e,s,i,t)})}var Ps=function(n,e,t,s){function i(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{h(s.next(g))}catch(m){l(m)}}function d(g){try{h(s.throw(g))}catch(m){l(m)}}function h(g){g.done?a(g.value):i(g.value).then(c,d)}h((s=s.apply(n,e||[])).next())})};const vA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ww={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class yA{constructor(e,t={},s,i){this.url=e,this.headers=t,this.bucketId=s,this.fetch=n2(i)}uploadOrUpdate(e,t,s,i){return Ps(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},Ww),i);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",this.encodeMetadata(d))):(a=s,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,d&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),i?.headers&&(c=Object.assign(Object.assign({},c),i.headers));const h=this._removeEmptyFolders(t),g=this._getFinalPath(h),m=yield this.fetch(`${this.url}/object/${g}`,Object.assign({method:e,body:a,headers:c},l?.duplex?{duplex:l.duplex}:{})),y=yield m.json();return m.ok?{data:{path:h,id:y.Id,fullPath:y.Key},error:null}:{data:null,error:y}}catch(a){if(as(a))return{data:null,error:a};throw a}})}upload(e,t,s){return Ps(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,i){return Ps(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${l}`);c.searchParams.set("token",t);try{let d;const h=Object.assign({upsert:Ww.upsert},i),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&s instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),d.append("",s)):typeof FormData<"u"&&s instanceof FormData?(d=s,d.append("cacheControl",h.cacheControl)):(d=s,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType);const m=yield this.fetch(c.toString(),{method:"PUT",body:d,headers:g}),y=yield m.json();return m.ok?{data:{path:a,fullPath:y.Key},error:null}:{data:null,error:y}}catch(d){if(as(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,t){return Ps(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const a=yield lr(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:i}),l=new URL(this.url+a.url),c=l.searchParams.get("token");if(!c)throw new wv("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:c},error:null}}catch(s){if(as(s))return{data:null,error:s};throw s}})}update(e,t,s){return Ps(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Ps(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(as(i))return{data:null,error:i};throw i}})}copy(e,t,s){return Ps(this,void 0,void 0,function*(){try{return{data:{path:(yield lr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(as(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,s){return Ps(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield lr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const l=s?.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(i){if(as(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,s){return Ps(this,void 0,void 0,function*(){try{const i=yield lr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(i){if(as(i))return{data:null,error:i};throw i}})}download(e,t){return Ps(this,void 0,void 0,function*(){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(t?.transform||{}),l=a?`?${a}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield oh(this.fetch,`${this.url}/${i}/${c}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(as(c))return{data:null,error:c};throw c}})}info(e){return Ps(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield oh(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:xm(s),error:null}}catch(s){if(as(s))return{data:null,error:s};throw s}})}exists(e){return Ps(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield mA(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(as(s)&&s instanceof ym){const i=s.originalError;if([400,404].includes(i?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),i=[],a=t?.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&i.push(a);const c=typeof t?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(t?.transform||{});d!==""&&i.push(d);let h=i.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${s}${h}`)}}}remove(e){return Ps(this,void 0,void 0,function*(){try{return{data:yield i2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(as(t))return{data:null,error:t};throw t}})}list(e,t,s){return Ps(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},vA),t),{prefix:e||""});return{data:yield lr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},s),error:null}}catch(i){if(as(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const xA="2.7.1",bA={"X-Client-Info":`storage-js/${xA}`};var ro=function(n,e,t,s){function i(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{h(s.next(g))}catch(m){l(m)}}function d(g){try{h(s.throw(g))}catch(m){l(m)}}function h(g){g.done?a(g.value):i(g.value).then(c,d)}h((s=s.apply(n,e||[])).next())})};class wA{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},bA),t),this.fetch=n2(s)}listBuckets(){return ro(this,void 0,void 0,function*(){try{return{data:yield oh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(as(e))return{data:null,error:e};throw e}})}getBucket(e){return ro(this,void 0,void 0,function*(){try{return{data:yield oh(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(as(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return ro(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(as(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return ro(this,void 0,void 0,function*(){try{return{data:yield pA(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(as(s))return{data:null,error:s};throw s}})}emptyBucket(e){return ro(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(as(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ro(this,void 0,void 0,function*(){try{return{data:yield i2(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(as(t))return{data:null,error:t};throw t}})}}class SA extends wA{constructor(e,t={},s){super(e,t,s)}from(e){return new yA(this.url,this.headers,e,this.fetch)}}const _A="2.50.5";let sc="";typeof Deno<"u"?sc="deno":typeof document<"u"?sc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?sc="react-native":sc="node";const CA={"X-Client-Info":`supabase-js-${sc}/${_A}`},TA={headers:CA},EA={schema:"public"},jA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kA={};var MA=function(n,e,t,s){function i(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{h(s.next(g))}catch(m){l(m)}}function d(g){try{h(s.throw(g))}catch(m){l(m)}}function h(g){g.done?a(g.value):i(g.value).then(c,d)}h((s=s.apply(n,e||[])).next())})};const OA=n=>{let e;return n?e=n:typeof fetch>"u"?e=qC:e=fetch,(...t)=>e(...t)},LA=()=>typeof Headers>"u"?WC:Headers,AA=(n,e,t)=>{const s=OA(t),i=LA();return(a,l)=>MA(void 0,void 0,void 0,function*(){var c;const d=(c=yield e())!==null&&c!==void 0?c:n;let h=new i(l?.headers);return h.has("apikey")||h.set("apikey",n),h.has("Authorization")||h.set("Authorization",`Bearer ${d}`),s(a,Object.assign(Object.assign({},l),{headers:h}))})};var DA=function(n,e,t,s){function i(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{h(s.next(g))}catch(m){l(m)}}function d(g){try{h(s.throw(g))}catch(m){l(m)}}function h(g){g.done?a(g.value):i(g.value).then(c,d)}h((s=s.apply(n,e||[])).next())})};function NA(n){return n.endsWith("/")?n:n+"/"}function PA(n,e){var t,s;const{db:i,auth:a,realtime:l,global:c}=n,{db:d,auth:h,realtime:g,global:m}=e,y={db:Object.assign(Object.assign({},d),i),auth:Object.assign(Object.assign({},h),a),realtime:Object.assign(Object.assign({},g),l),global:Object.assign(Object.assign(Object.assign({},m),c),{headers:Object.assign(Object.assign({},(t=m?.headers)!==null&&t!==void 0?t:{}),(s=c?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>DA(this,void 0,void 0,function*(){return""})};return n.accessToken?y.accessToken=n.accessToken:delete y.accessToken,y}const r2="2.70.0",ho=30*1e3,bm=3,Cp=bm*ho,RA="http://localhost:9999",BA="supabase.auth.token",UA={"X-Client-Info":`gotrue-js/${r2}`},wm="X-Supabase-Api-Version",a2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},zA=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,IA=6e5;class Sv extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function He(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class FA extends Sv{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function VA(n){return He(n)&&n.name==="AuthApiError"}class o2 extends Sv{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class yr extends Sv{constructor(e,t,s,i){super(e,s,i),this.name=t,this.status=s}}class rr extends yr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function HA(n){return He(n)&&n.name==="AuthSessionMissingError"}class ld extends yr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cd extends yr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ud extends yr{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function GA(n){return He(n)&&n.name==="AuthImplicitGrantRedirectError"}class Xw extends yr{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Sm extends yr{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Tp(n){return He(n)&&n.name==="AuthRetryableFetchError"}class Kw extends yr{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class oc extends yr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const lh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Zw=` 	
\r=`.split(""),$A=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Zw.length;e+=1)n[Zw[e].charCodeAt(0)]=-2;for(let e=0;e<lh.length;e+=1)n[lh[e].charCodeAt(0)]=e;return n})();function Qw(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(lh[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(lh[s]),e.queuedBits-=6}}function l2(n,e,t){const s=$A[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Jw(n){const e=[],t=l=>{e.push(String.fromCodePoint(l))},s={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=l=>{WA(l,s,t)};for(let l=0;l<n.length;l+=1)l2(n.charCodeAt(l),i,a);return e.join("")}function YA(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function qA(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const i=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}YA(s,e)}}function WA(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if((n>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function XA(n){const e=[],t={queue:0,queuedBits:0},s=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)l2(n.charCodeAt(i),t,s);return new Uint8Array(e)}function KA(n){const e=[];return qA(n,t=>e.push(t)),new Uint8Array(e)}function ZA(n){const e=[],t={queue:0,queuedBits:0},s=i=>{e.push(i)};return n.forEach(i=>Qw(i,t,s)),Qw(null,t,s),e.join("")}function QA(n){return Math.round(Date.now()/1e3)+n}function JA(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const _n=()=>typeof window<"u"&&typeof document<"u",Ir={tested:!1,writable:!1},lc=()=>{if(!_n())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ir.tested)return Ir.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ir.tested=!0,Ir.writable=!0}catch{Ir.tested=!0,Ir.writable=!1}return Ir.writable};function eD(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return t.searchParams.forEach((s,i)=>{e[i]=s}),e}const c2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>zc(async()=>{const{default:s}=await Promise.resolve().then(()=>Po);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},tD=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",u2=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},dd=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},hd=async(n,e)=>{await n.removeItem(e)};class Fh{constructor(){this.promise=new Fh.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Fh.promiseConstructor=Promise;function Ep(n){const e=n.split(".");if(e.length!==3)throw new oc("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!zA.test(e[s]))throw new oc("JWT not in base64url format");return{header:JSON.parse(Jw(e[0])),payload:JSON.parse(Jw(e[1])),signature:XA(e[2]),raw:{header:e[0],payload:e[1]}}}async function sD(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function nD(n,e){return new Promise((s,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await n(a);if(!e(a,null,l)){s(l);return}}catch(l){if(!e(a,l)){i(l);return}}})()})}function iD(n){return("0"+n.toString(16)).substr(-2)}function rD(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let i="";for(let a=0;a<56;a++)i+=t.charAt(Math.floor(Math.random()*s));return i}return crypto.getRandomValues(e),Array.from(e,iD).join("")}async function aD(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(s);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function oD(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await aD(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ao(n,e,t=!1){const s=rD();let i=s;t&&(i+="/PASSWORD_RECOVERY"),await u2(n,`${e}-code-verifier`,i);const a=await oD(s);return[a,s===a?"plain":"s256"]}const lD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function cD(n){const e=n.headers.get(wm);if(!e||!e.match(lD))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function uD(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function dD(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const hD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function oo(n){if(!hD.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var fD=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t};const Hr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),gD=[502,503,504];async function e1(n){var e;if(!tD(n))throw new Sm(Hr(n),0);if(gD.includes(n.status))throw new Sm(Hr(n),n.status);let t;try{t=await n.json()}catch(a){throw new o2(Hr(a),a)}let s;const i=cD(n);if(i&&i.getTime()>=a2["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Kw(Hr(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new rr}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new Kw(Hr(t),n.status,t.weak_password.reasons);throw new FA(Hr(t),n.status||500,s)}const pD=(n,e,t,s)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),t))};async function et(n,e,t,s){var i;const a=Object.assign({},s?.headers);a[wm]||(a[wm]=a2["2024-01-01"].name),s?.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const l=(i=s?.query)!==null&&i!==void 0?i:{};s?.redirectTo&&(l.redirect_to=s.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await mD(n,e,t+c,{headers:a,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(d):{data:Object.assign({},d),error:null}}async function mD(n,e,t,s,i,a){const l=pD(e,s,i,a);let c;try{c=await n(t,Object.assign({},l))}catch(d){throw console.error(d),new Sm(Hr(d),0)}if(c.ok||await e1(c),s?.noResolveJson)return c;try{return await c.json()}catch(d){await e1(d)}}function hi(n){var e;let t=null;bD(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=QA(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function t1(n){const e=hi(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function ur(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function vD(n){return{data:n,error:null}}function yD(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:i,verification_type:a}=n,l=fD(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:s,redirect_to:i,verification_type:a},d=Object.assign({},l);return{data:{properties:c,user:d},error:null}}function xD(n){return n}function bD(n){return n.access_token&&n.refresh_token&&n.expires_in}const jp=["global","local","others"];var wD=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t};class SD{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=c2(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=jp[0]){if(jp.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${jp.join(", ")}`);try{return await et(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(He(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await et(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ur})}catch(s){if(He(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=wD(e,["options"]),i=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(i.new_email=s?.newEmail,delete i.newEmail),await et(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:yD,redirectTo:t?.redirectTo})}catch(t){if(He(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await et(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ur})}catch(t){if(He(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,i,a,l,c,d;try{const h={nextPage:null,lastPage:0,total:0},g=await et(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:xD});if(g.error)throw g.error;const m=await g.json(),y=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(d=(c=g.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(S=>{const _=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(S.split(";")[1].split("=")[1]);h[`${T}Page`]=_}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(He(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){oo(e);try{return await et(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ur})}catch(t){if(He(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){oo(e);try{return await et(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ur})}catch(s){if(He(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){oo(e);try{return await et(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ur})}catch(s){if(He(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){oo(e.userId);try{const{data:t,error:s}=await et(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:s}}catch(t){if(He(t))return{data:null,error:t};throw t}}async _deleteFactor(e){oo(e.userId),oo(e.id);try{return{data:await et(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(He(t))return{data:null,error:t};throw t}}}const _D={getItem:n=>lc()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{lc()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{lc()&&globalThis.localStorage.removeItem(n)}};function s1(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function CD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const lo={debug:!!(globalThis&&lc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class d2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class TD extends d2{}async function ED(n,e,t){lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),lo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async i=>{if(i){lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new TD(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(lo.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}CD();const jD={url:RA,storageKey:BA,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:UA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function n1(n,e,t){return await t()}class Sc{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Sc.nextInstanceID,Sc.nextInstanceID+=1,this.instanceID>0&&_n()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},jD),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new SD({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=c2(i.fetch),this.lock=i.lock||n1,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:_n()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=ED:this.lock=n1,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:lc()?this.storage=_D:(this.memoryStorage={},this.storage=s1(this.memoryStorage)):(this.memoryStorage={},this.storage=s1(this.memoryStorage)),_n()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${r2}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=eD(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),_n()&&this.detectSessionInUrl&&s!=="none"){const{data:i,error:a}=await this._getSessionFromURL(t,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),GA(a)){const d=(e=a.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return He(t)?{error:t}:{error:new o2("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,i;try{const a=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:hi}),{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const d=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(a){if(He(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,s,i;try{let a;if("email"in e){const{email:g,password:m,options:y}=e;let b=null,S=null;this.flowType==="pkce"&&([b,S]=await ao(this.storage,this.storageKey)),a=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:g,password:m,data:(t=y?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:b,code_challenge_method:S},xform:hi})}else if("phone"in e){const{phone:g,password:m,options:y}=e;a=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:m,data:(s=y?.data)!==null&&s!==void 0?s:{},channel:(i=y?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:hi})}else throw new cd("You must provide either an email or phone number and a password");const{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const d=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(a){if(He(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:l,options:c}=e;t=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:t1})}else if("phone"in e){const{phone:a,password:l,options:c}=e;t=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:t1})}else throw new cd("You must provide either an email or phone number and a password");const{data:s,error:i}=t;return i?{data:{user:null,session:null},error:i}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new ld}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(t){if(He(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,i,a,l,c,d,h,g,m,y,b;let S,_;if("message"in e)S=e.message,_=e.signature;else{const{chain:T,wallet:C,statement:M,options:O}=e;let L;if(_n())if(typeof C=="object")L=C;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))L=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=C}const j=new URL((t=O?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in L&&L.signIn){const D=await L.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O?.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),M?{statement:M}:null));let k;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")k=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)k=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)S=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),_=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in L)||typeof L.signMessage!="function"||!("publicKey"in L)||typeof L!="object"||!L.publicKey||!("toBase58"in L.publicKey)||typeof L.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${j.host} wants you to sign in with your Solana account:`,L.publicKey.toBase58(),...M?["",M,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(i=(s=O?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=O?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((l=O?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((c=O?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((d=O?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((h=O?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((m=(g=O?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||m===void 0)&&m.length?["Resources",...O.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const D=await L.signMessage(new TextEncoder().encode(S),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=D}}try{const{data:T,error:C}=await et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:ZA(_)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:hi});if(C)throw C;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new ld}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:C})}catch(T){if(He(T))return{data:{user:null,session:null},error:T};throw T}}async _exchangeCodeForSession(e){const t=await dd(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(t??"").split("/");try{const{data:a,error:l}=await et(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:hi});if(await hd(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new ld}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:l})}catch(a){if(He(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:s,token:i,access_token:a,nonce:l}=e,c=await et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:hi}),{data:d,error:h}=c;return h?{data:{user:null,session:null},error:h}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new ld}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:h})}catch(t){if(He(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,i,a,l;try{if("email"in e){const{email:c,options:d}=e;let h=null,g=null;this.flowType==="pkce"&&([h,g]=await ao(this.storage,this.storageKey));const{error:m}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=d?.data)!==null&&t!==void 0?t:{},create_user:(s=d?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:h,code_challenge_method:g},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:c,options:d}=e,{data:h,error:g}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=d?.data)!==null&&i!==void 0?i:{},create_user:(a=d?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(l=d?.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:g}}throw new cd("You must provide either an email or phone number.")}catch(c){if(He(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var t,s;try{let i,a;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:l,error:c}=await et(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:hi});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,h=l.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(i){if(He(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,s,i;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await ao(this.storage,this.storageKey)),await et(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:vD})}catch(a){if(He(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new rr;const{error:i}=await et(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(He(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:i,options:a}=e,{error:l}=await et(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:s,type:i,options:a}=e,{data:l,error:c}=await et(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:c}}throw new cd("You must provide either an email or phone number and a type")}catch(t){if(He(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await dd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Cp:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,h,g)=>(!l&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,h,g))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ur}):await this._useSession(async t=>{var s,i,a;const{data:l,error:c}=t;if(c)throw c;return!(!((s=l.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rr}:await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:ur})})}catch(t){if(He(t))return HA(t)&&(await this._removeSession(),await hd(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:i,error:a}=s;if(a)throw a;if(!i.session)throw new rr;const l=i.session;let c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=await ao(this.storage,this.storageKey));const{data:h,error:g}=await et(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:l.access_token,xform:ur});if(g)throw g;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(s){if(He(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new rr;const t=Date.now()/1e3;let s=t,i=!0,a=null;const{payload:l}=Ep(e.access_token);if(l.exp&&(s=l.exp,i=s<=t),i){const{session:c,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:d}=await this._getUser(e.access_token);if(d)throw d;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(He(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:l,error:c}=t;if(c)throw c;e=(s=l.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new rr;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(He(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!_n())throw new ud("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ud(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Xw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ud("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Xw("No code detected.");const{data:M,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const L=new URL(window.location.href);return L.searchParams.delete("code"),window.history.replaceState(window.history.state,"",L.toString()),{data:{session:M.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:i,access_token:a,refresh_token:l,expires_in:c,expires_at:d,token_type:h}=e;if(!a||!c||!l||!h)throw new ud("No session defined in URL");const g=Math.round(Date.now()/1e3),m=parseInt(c);let y=g+m;d&&(y=parseInt(d));const b=y-g;b*1e3<=ho&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${m}s`);const S=y-m;g-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,y,g):g-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,y,g);const{data:_,error:T}=await this._getUser(a);if(T)throw T;const C={provider_token:s,provider_refresh_token:i,access_token:a,expires_in:m,expires_at:y,refresh_token:l,token_type:h,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:e.type},error:null}}catch(s){if(He(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await dd(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:i,error:a}=t;if(a)return{error:a};const l=(s=i.session)===null||s===void 0?void 0:s.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(VA(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await hd(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=JA(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,i;try{const{data:{session:a},error:l}=t;if(l)throw l;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let s=null,i=null;this.flowType==="pkce"&&([s,i]=await ao(this.storage,this.storageKey,!0));try{return await et(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(He(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(He(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:i}=await this._useSession(async a=>{var l,c,d,h,g;const{data:m,error:y}=a;if(y)throw y;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await et(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(h=m.session)===null||h===void 0?void 0:h.access_token)!==null&&g!==void 0?g:void 0})});if(i)throw i;return _n()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(He(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,i;const{data:a,error:l}=t;if(l)throw l;return await et(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(He(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await nD(async i=>(i>0&&await sD(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await et(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:hi})),(i,a)=>{const l=200*Math.pow(2,i);return a&&Tp(a)&&Date.now()+l-s<ho})}catch(s){if(this._debug(t,"error",s),He(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),_n()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await dd(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Cp;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${Cp}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Tp(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new rr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Fh;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new rr;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={session:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(i,"error",a),He(a)){const l={session:null,error:a};return Tp(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,s=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(d){a.push(d)}});if(await Promise.all(l),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await u2(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await hd(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&_n()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ho);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((s.expires_at*1e3-e)/ho);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ho}ms, refresh threshold is ${bm} ticks`),i<=bm&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof d2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_n()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const i=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,l]=await ao(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(c.toString())}if(s?.queryParams){const a=new URLSearchParams(s.queryParams);i.push(a.toString())}return s?.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:i,error:a}=t;return a?{data:null,error:a}:await et(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(He(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,i;const{data:a,error:l}=t;if(l)return{data:null,error:l};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:h}=await et(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((i=d?.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(t){if(He(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:i,error:a}=t;if(a)return{data:null,error:a};const{data:l,error:c}=await et(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(t){if(He(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:i,error:a}=t;return a?{data:null,error:a}:await et(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(He(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=e?.factors||[],i=s.filter(l=>l.factor_type==="totp"&&l.status==="verified"),a=s.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:s,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Ep(i.access_token);let c=null;l.aal&&(c=l.aal);let d=c;((s=(t=i.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(d="aal2");const g=l.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(l=>l.kid===e);if(s||(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+IA>Date.now()))return s;const{data:i,error:a}=await et(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!i.keys||i.keys.length===0)throw new oc("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),s=i.keys.find(l=>l.kid===e),!s)throw new oc("No matching signing key found in JWKS");return s}async getClaims(e,t={keys:[]}){try{let s=e;if(!s){const{data:b,error:S}=await this.getSession();if(S||!b.session)return{data:null,error:S};s=b.session.access_token}const{header:i,payload:a,signature:l,raw:{header:c,payload:d}}=Ep(s);if(uD(a.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:b}=await this.getUser(s);if(b)throw b;return{data:{claims:a,header:i,signature:l},error:null}}const h=dD(i.alg),g=await this.fetchJwk(i.kid,t),m=await crypto.subtle.importKey("jwk",g,h,!0,["verify"]);if(!await crypto.subtle.verify(h,m,l,KA(`${c}.${d}`)))throw new oc("Invalid JWT signature");return{data:{claims:a,header:i,signature:l},error:null}}catch(s){if(He(s))return{data:null,error:s};throw s}}}Sc.nextInstanceID=0;const kD=Sc;class MD extends kD{constructor(e){super(e)}}var OD=function(n,e,t,s){function i(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{h(s.next(g))}catch(m){l(m)}}function d(g){try{h(s.throw(g))}catch(m){l(m)}}function h(g){g.done?a(g.value):i(g.value).then(c,d)}h((s=s.apply(n,e||[])).next())})};class LD{constructor(e,t,s){var i,a,l;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const c=NA(e),d=new URL(c);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,g={db:EA,realtime:kA,auth:Object.assign(Object.assign({},jA),{storageKey:h}),global:TA},m=PA(s??{},g);this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=m.global.headers)!==null&&a!==void 0?a:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(y,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=m.auth)!==null&&l!==void 0?l:{},this.headers,m.global.fetch),this.fetch=AA(t,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new WL(new URL("rest/v1",d).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),m.accessToken||this._listenForAuthEvents()}get functions(){return new RL(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new SA(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return OD(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:i,storageKey:a,flowType:l,lock:c,debug:d},h,g){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new MD({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),h),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:i,flowType:l,lock:c,debug:d,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new cA(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s?.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const AD=(n,e,t)=>new LD(n,e,t),DD="https://qeknkhmmydekrjqnxooe.supabase.co",ND="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFla25raG1teWRla3JqcW54b29lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIyOTIwOTYsImV4cCI6MjA2Nzg2ODA5Nn0.pGCpiP_wdpC2j1Js4v2TUZM0l8WcT6pP8dH7_DmChqI",Ce=AD(DD,ND),_v=x.createContext(),PD=({children:n})=>{const[e,t]=x.useState(null),[s,i]=x.useState(null),[a,l]=x.useState(!0),c=async(b,S,_,T,C,M)=>{const{data:O,error:L}=await Ce.auth.signUp({email:b,password:S});if(L)return console.error("Sign-up error:",L),{success:!1,error:L};const j=O.user,{error:D}=await Ce.from("CUSTOMER").insert([{cus_fname:_,cus_lname:T,cus_username:C,email:b,cus_celno:M?parseInt(M.replace(/\D/g,"")):0,auth_user_id:j.id}]);return D?(console.error("Error inserting into CUSTOMER:",D),{success:!1,error:D}):{success:!0,data:O}},d=async({email:b,password:S})=>{try{const{data:_,error:T}=await Ce.auth.signInWithPassword({email:b,password:S});return T?(console.error("Sign-in error:",T),{success:!1,error:T.message}):{success:!0,data:_}}catch(_){return console.error("Unexpected sign-in error:",_),{success:!1,error:"Unexpected error"}}},h=async()=>{const{error:b}=await Ce.auth.signOut();b?console.error("Sign-out error:",b):(i(null),t(null))},g=async()=>{try{const{data:b,error:S}=await Ce.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/redirect`}});return S?(console.error("Google auth error:",S),{success:!1,error:S.message}):{success:!0,data:b}}catch(b){return console.error("Unexpected Google auth error:",b),{success:!1,error:"An unexpected error occurred"}}},m=async b=>{try{const{error:S}=await Ce.auth.resetPasswordForEmail(b,{redirectTo:`${window.location.origin}/reset-password`});return S?(console.error("Password reset error:",S),{success:!1,error:S.message}):{success:!0,message:"Password reset email sent successfully!"}}catch(S){return console.error("Unexpected password reset error:",S),{success:!1,error:"An unexpected error occurred"}}},y=b=>{if(!b){i(null);return}const S=b.user_metadata?.role||null;i(S)};return x.useEffect(()=>{(async()=>{l(!0);const{data:{session:_}}=await Ce.auth.getSession();t(_),_?.user?y(_.user):i(null),l(!1)})();const{data:S}=Ce.auth.onAuthStateChange(async(_,T)=>{l(!0),t(T);const C=T?.user;if(C){const{data:M}=await Ce.from("CUSTOMER").select("cus_id").eq("auth_user_id",C.id).maybeSingle();!M&&C.user_metadata?.role==="customer"&&await Ce.from("CUSTOMER").insert([{cus_fname:C.user_metadata.given_name||"",cus_lname:C.user_metadata.family_name||"",cus_username:C.user_metadata.full_name||C.email,cus_celno:0,email:C.email,auth_user_id:C.id}]),y(C)}else i(null);l(!1)});return()=>S?.subscription?.unsubscribe()},[]),p.jsx(_v.Provider,{value:{session:e,signInUser:d,signUpNewUser:c,signInOrUpWithGoogle:g,signOut:h,resetPassword:m,userRole:s,loading:a},children:n})},la=()=>x.useContext(_v);let RD={data:""},BD=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||RD,UD=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,zD=/\/\*[^]*?\*\/|  +/g,i1=/\n+/g,dr=(n,e)=>{let t="",s="",i="";for(let a in n){let l=n[a];a[0]=="@"?a[1]=="i"?t=a+" "+l+";":s+=a[1]=="f"?dr(l,a):a+"{"+dr(l,a[1]=="k"?"":e)+"}":typeof l=="object"?s+=dr(l,e?e.replace(/([^,])+/g,c=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,c):c?c+" "+d:d)):a):l!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=dr.p?dr.p(a,l):a+":"+l+";")}return t+(e&&i?e+"{"+i+"}":i)+s},ui={},h2=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+h2(n[t]);return e}return n},ID=(n,e,t,s,i)=>{let a=h2(n),l=ui[a]||(ui[a]=(d=>{let h=0,g=11;for(;h<d.length;)g=101*g+d.charCodeAt(h++)>>>0;return"go"+g})(a));if(!ui[l]){let d=a!==n?n:(h=>{let g,m,y=[{}];for(;g=UD.exec(h.replace(zD,""));)g[4]?y.shift():g[3]?(m=g[3].replace(i1," ").trim(),y.unshift(y[0][m]=y[0][m]||{})):y[0][g[1]]=g[2].replace(i1," ").trim();return y[0]})(n);ui[l]=dr(i?{["@keyframes "+l]:d}:d,t?"":"."+l)}let c=t&&ui.g?ui.g:null;return t&&(ui.g=ui[l]),((d,h,g,m)=>{m?h.data=h.data.replace(m,d):h.data.indexOf(d)===-1&&(h.data=g?d+h.data:h.data+d)})(ui[l],e,s,c),l},FD=(n,e,t)=>n.reduce((s,i,a)=>{let l=e[a];if(l&&l.call){let c=l(t),d=c&&c.props&&c.props.className||/^go/.test(c)&&c;l=d?"."+d:c&&typeof c=="object"?c.props?"":dr(c,""):c===!1?"":c}return s+i+(l??"")},"");function Vh(n){let e=this||{},t=n.call?n(e.p):n;return ID(t.unshift?t.raw?FD(t,[].slice.call(arguments,1),e.p):t.reduce((s,i)=>Object.assign(s,i&&i.call?i(e.p):i),{}):t,BD(e.target),e.g,e.o,e.k)}let f2,_m,Cm;Vh.bind({g:1});let Ti=Vh.bind({k:1});function VD(n,e,t,s){dr.p=e,f2=n,_m=t,Cm=s}function xr(n,e){let t=this||{};return function(){let s=arguments;function i(a,l){let c=Object.assign({},a),d=c.className||i.className;t.p=Object.assign({theme:_m&&_m()},c),t.o=/ *go\d+/.test(d),c.className=Vh.apply(t,s)+(d?" "+d:"");let h=n;return n[0]&&(h=c.as||n,delete c.as),Cm&&h[0]&&Cm(c),f2(h,c)}return i}}var HD=n=>typeof n=="function",ch=(n,e)=>HD(n)?n(e):n,GD=(()=>{let n=0;return()=>(++n).toString()})(),g2=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),$D=20,p2=(n,e)=>{switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,$D)};case 1:return{...n,toasts:n.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:t}=e;return p2(n,{type:n.toasts.find(a=>a.id===t.id)?1:0,toast:t});case 3:let{toastId:s}=e;return{...n,toasts:n.toasts.map(a=>a.id===s||s===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let i=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},Xd=[],Xr={toasts:[],pausedAt:void 0},ca=n=>{Xr=p2(Xr,n),Xd.forEach(e=>{e(Xr)})},YD={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},qD=(n={})=>{let[e,t]=x.useState(Xr),s=x.useRef(Xr);x.useEffect(()=>(s.current!==Xr&&t(Xr),Xd.push(t),()=>{let a=Xd.indexOf(t);a>-1&&Xd.splice(a,1)}),[]);let i=e.toasts.map(a=>{var l,c,d;return{...n,...n[a.type],...a,removeDelay:a.removeDelay||((l=n[a.type])==null?void 0:l.removeDelay)||n?.removeDelay,duration:a.duration||((c=n[a.type])==null?void 0:c.duration)||n?.duration||YD[a.type],style:{...n.style,...(d=n[a.type])==null?void 0:d.style,...a.style}}});return{...e,toasts:i}},WD=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:t?.id||GD()}),Fc=n=>(e,t)=>{let s=WD(e,n,t);return ca({type:2,toast:s}),s.id},Re=(n,e)=>Fc("blank")(n,e);Re.error=Fc("error");Re.success=Fc("success");Re.loading=Fc("loading");Re.custom=Fc("custom");Re.dismiss=n=>{ca({type:3,toastId:n})};Re.remove=n=>ca({type:4,toastId:n});Re.promise=(n,e,t)=>{let s=Re.loading(e.loading,{...t,...t?.loading});return typeof n=="function"&&(n=n()),n.then(i=>{let a=e.success?ch(e.success,i):void 0;return a?Re.success(a,{id:s,...t,...t?.success}):Re.dismiss(s),i}).catch(i=>{let a=e.error?ch(e.error,i):void 0;a?Re.error(a,{id:s,...t,...t?.error}):Re.dismiss(s)}),n};var XD=(n,e)=>{ca({type:1,toast:{id:n,height:e}})},KD=()=>{ca({type:5,time:Date.now()})},cc=new Map,ZD=1e3,QD=(n,e=ZD)=>{if(cc.has(n))return;let t=setTimeout(()=>{cc.delete(n),ca({type:4,toastId:n})},e);cc.set(n,t)},JD=n=>{let{toasts:e,pausedAt:t}=qD(n);x.useEffect(()=>{if(t)return;let a=Date.now(),l=e.map(c=>{if(c.duration===1/0)return;let d=(c.duration||0)+c.pauseDuration-(a-c.createdAt);if(d<0){c.visible&&Re.dismiss(c.id);return}return setTimeout(()=>Re.dismiss(c.id),d)});return()=>{l.forEach(c=>c&&clearTimeout(c))}},[e,t]);let s=x.useCallback(()=>{t&&ca({type:6,time:Date.now()})},[t]),i=x.useCallback((a,l)=>{let{reverseOrder:c=!1,gutter:d=8,defaultPosition:h}=l||{},g=e.filter(b=>(b.position||h)===(a.position||h)&&b.height),m=g.findIndex(b=>b.id===a.id),y=g.filter((b,S)=>S<m&&b.visible).length;return g.filter(b=>b.visible).slice(...c?[y+1]:[0,y]).reduce((b,S)=>b+(S.height||0)+d,0)},[e]);return x.useEffect(()=>{e.forEach(a=>{if(a.dismissed)QD(a.id,a.removeDelay);else{let l=cc.get(a.id);l&&(clearTimeout(l),cc.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:XD,startPause:KD,endPause:s,calculateOffset:i}}},eN=Ti`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,tN=Ti`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,sN=Ti`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,nN=xr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${eN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${tN} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${sN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,iN=Ti`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,rN=xr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${iN} 1s linear infinite;
`,aN=Ti`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,oN=Ti`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,lN=xr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${aN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${oN} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,cN=xr("div")`
  position: absolute;
`,uN=xr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,dN=Ti`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,hN=xr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${dN} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,fN=({toast:n})=>{let{icon:e,type:t,iconTheme:s}=n;return e!==void 0?typeof e=="string"?x.createElement(hN,null,e):e:t==="blank"?null:x.createElement(uN,null,x.createElement(rN,{...s}),t!=="loading"&&x.createElement(cN,null,t==="error"?x.createElement(nN,{...s}):x.createElement(lN,{...s})))},gN=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,pN=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,mN="0%{opacity:0;} 100%{opacity:1;}",vN="0%{opacity:1;} 100%{opacity:0;}",yN=xr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,xN=xr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,bN=(n,e)=>{let t=n.includes("top")?1:-1,[s,i]=g2()?[mN,vN]:[gN(t),pN(t)];return{animation:e?`${Ti(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ti(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},wN=x.memo(({toast:n,position:e,style:t,children:s})=>{let i=n.height?bN(n.position||e||"top-center",n.visible):{opacity:0},a=x.createElement(fN,{toast:n}),l=x.createElement(xN,{...n.ariaProps},ch(n.message,n));return x.createElement(yN,{className:n.className,style:{...i,...t,...n.style}},typeof s=="function"?s({icon:a,message:l}):x.createElement(x.Fragment,null,a,l))});VD(x.createElement);var SN=({id:n,className:e,style:t,onHeightUpdate:s,children:i})=>{let a=x.useCallback(l=>{if(l){let c=()=>{let d=l.getBoundingClientRect().height;s(n,d)};c(),new MutationObserver(c).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[n,s]);return x.createElement("div",{ref:a,className:e,style:t},i)},_N=(n,e)=>{let t=n.includes("top"),s=t?{top:0}:{bottom:0},i=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:g2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...s,...i}},CN=Vh`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,fd=16,TN=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:s,children:i,containerStyle:a,containerClassName:l})=>{let{toasts:c,handlers:d}=JD(t);return x.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:fd,left:fd,right:fd,bottom:fd,pointerEvents:"none",...a},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(h=>{let g=h.position||e,m=d.calculateOffset(h,{reverseOrder:n,gutter:s,defaultPosition:e}),y=_N(g,m);return x.createElement(SN,{id:h.id,key:h.id,onHeightUpdate:d.updateHeight,className:h.visible?CN:"",style:y},h.type==="custom"?ch(h.message,h):i?i(h):x.createElement(wN,{toast:h,position:g}))}))},_e=Re;const Cv=x.createContext({});function Tv(n){const e=x.useRef(null);return e.current===null&&(e.current=n()),e.current}const Ev=typeof window<"u",m2=Ev?x.useLayoutEffect:x.useEffect,Hh=x.createContext(null);function jv(n,e){n.indexOf(e)===-1&&n.push(e)}function kv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Ei=(n,e,t)=>t>e?e:t<n?n:t;let Mv=()=>{};const ji={},v2=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function y2(n){return typeof n=="object"&&n!==null}const x2=n=>/^0[^.\s]+$/u.test(n);function Ov(n){let e;return()=>(e===void 0&&(e=n()),e)}const pn=n=>n,EN=(n,e)=>t=>e(n(t)),Vc=(...n)=>n.reduce(EN),_c=(n,e,t)=>{const s=e-n;return s===0?1:(t-n)/s};class Lv{constructor(){this.subscriptions=[]}add(e){return jv(this.subscriptions,e),()=>kv(this.subscriptions,e)}notify(e,t,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,s);else for(let a=0;a<i;a++){const l=this.subscriptions[a];l&&l(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Gn=n=>n*1e3,$n=n=>n/1e3;function b2(n,e){return e?n*(1e3/e):0}const w2=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,jN=1e-7,kN=12;function MN(n,e,t,s,i){let a,l,c=0;do l=e+(t-e)/2,a=w2(l,s,i)-n,a>0?t=l:e=l;while(Math.abs(a)>jN&&++c<kN);return l}function Hc(n,e,t,s){if(n===e&&t===s)return pn;const i=a=>MN(a,0,1,n,t);return a=>a===0||a===1?a:w2(i(a),e,s)}const S2=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,_2=n=>e=>1-n(1-e),C2=Hc(.33,1.53,.69,.99),Av=_2(C2),T2=S2(Av),E2=n=>(n*=2)<1?.5*Av(n):.5*(2-Math.pow(2,-10*(n-1))),Dv=n=>1-Math.sin(Math.acos(n)),j2=_2(Dv),k2=S2(Dv),ON=Hc(.42,0,1,1),LN=Hc(0,0,.58,1),M2=Hc(.42,0,.58,1),AN=n=>Array.isArray(n)&&typeof n[0]!="number",O2=n=>Array.isArray(n)&&typeof n[0]=="number",DN={linear:pn,easeIn:ON,easeInOut:M2,easeOut:LN,circIn:Dv,circInOut:k2,circOut:j2,backIn:Av,backInOut:T2,backOut:C2,anticipate:E2},NN=n=>typeof n=="string",r1=n=>{if(O2(n)){Mv(n.length===4);const[e,t,s,i]=n;return Hc(e,t,s,i)}else if(NN(n))return DN[n];return n},gd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],a1={value:null};function PN(n,e){let t=new Set,s=new Set,i=!1,a=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},d=0;function h(m){l.has(m)&&(g.schedule(m),n()),d++,m(c)}const g={schedule:(m,y=!1,b=!1)=>{const _=b&&i?t:s;return y&&l.add(m),_.has(m)||_.add(m),m},cancel:m=>{s.delete(m),l.delete(m)},process:m=>{if(c=m,i){a=!0;return}i=!0,[t,s]=[s,t],t.forEach(h),e&&a1.value&&a1.value.frameloop[e].push(d),d=0,t.clear(),i=!1,a&&(a=!1,g.process(m))}};return g}const RN=40;function L2(n,e){let t=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,l=gd.reduce((O,L)=>(O[L]=PN(a,e?L:void 0),O),{}),{setup:c,read:d,resolveKeyframes:h,preUpdate:g,update:m,preRender:y,render:b,postRender:S}=l,_=()=>{const O=ji.useManualTiming?i.timestamp:performance.now();t=!1,ji.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(O-i.timestamp,RN),1)),i.timestamp=O,i.isProcessing=!0,c.process(i),d.process(i),h.process(i),g.process(i),m.process(i),y.process(i),b.process(i),S.process(i),i.isProcessing=!1,t&&e&&(s=!1,n(_))},T=()=>{t=!0,s=!0,i.isProcessing||n(_)};return{schedule:gd.reduce((O,L)=>{const j=l[L];return O[L]=(D,k=!1,B=!1)=>(t||T(),j.schedule(D,k,B)),O},{}),cancel:O=>{for(let L=0;L<gd.length;L++)l[gd[L]].cancel(O)},state:i,steps:l}}const{schedule:Tt,cancel:fr,state:fs,steps:kp}=L2(typeof requestAnimationFrame<"u"?requestAnimationFrame:pn,!0);let Kd;function BN(){Kd=void 0}const Bs={now:()=>(Kd===void 0&&Bs.set(fs.isProcessing||ji.useManualTiming?fs.timestamp:performance.now()),Kd),set:n=>{Kd=n,queueMicrotask(BN)}},A2=n=>e=>typeof e=="string"&&e.startsWith(n),Nv=A2("--"),UN=A2("var(--"),Pv=n=>UN(n)?zN.test(n.split("/*")[0].trim()):!1,zN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ro={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Cc={...Ro,transform:n=>Ei(0,1,n)},pd={...Ro,default:1},uc=n=>Math.round(n*1e5)/1e5,Rv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function IN(n){return n==null}const FN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Bv=(n,e)=>t=>!!(typeof t=="string"&&FN.test(t)&&t.startsWith(n)||e&&!IN(t)&&Object.prototype.hasOwnProperty.call(t,e)),D2=(n,e,t)=>s=>{if(typeof s!="string")return s;const[i,a,l,c]=s.match(Rv);return{[n]:parseFloat(i),[e]:parseFloat(a),[t]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},VN=n=>Ei(0,255,n),Mp={...Ro,transform:n=>Math.round(VN(n))},Kr={test:Bv("rgb","red"),parse:D2("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:s=1})=>"rgba("+Mp.transform(n)+", "+Mp.transform(e)+", "+Mp.transform(t)+", "+uc(Cc.transform(s))+")"};function HN(n){let e="",t="",s="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),s=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),s=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const Tm={test:Bv("#"),parse:HN,transform:Kr.transform},Gc=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ar=Gc("deg"),Yn=Gc("%"),ze=Gc("px"),GN=Gc("vh"),$N=Gc("vw"),o1={...Yn,parse:n=>Yn.parse(n)/100,transform:n=>Yn.transform(n*100)},go={test:Bv("hsl","hue"),parse:D2("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(n)+", "+Yn.transform(uc(e))+", "+Yn.transform(uc(t))+", "+uc(Cc.transform(s))+")"},Yt={test:n=>Kr.test(n)||Tm.test(n)||go.test(n),parse:n=>Kr.test(n)?Kr.parse(n):go.test(n)?go.parse(n):Tm.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Kr.transform(n):go.transform(n),getAnimatableNone:n=>{const e=Yt.parse(n);return e.alpha=0,Yt.transform(e)}},YN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function qN(n){return isNaN(n)&&typeof n=="string"&&(n.match(Rv)?.length||0)+(n.match(YN)?.length||0)>0}const N2="number",P2="color",WN="var",XN="var(",l1="${}",KN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Tc(n){const e=n.toString(),t=[],s={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(KN,d=>(Yt.test(d)?(s.color.push(a),i.push(P2),t.push(Yt.parse(d))):d.startsWith(XN)?(s.var.push(a),i.push(WN),t.push(d)):(s.number.push(a),i.push(N2),t.push(parseFloat(d))),++a,l1)).split(l1);return{values:t,split:c,indexes:s,types:i}}function R2(n){return Tc(n).values}function B2(n){const{split:e,types:t}=Tc(n),s=e.length;return i=>{let a="";for(let l=0;l<s;l++)if(a+=e[l],i[l]!==void 0){const c=t[l];c===N2?a+=uc(i[l]):c===P2?a+=Yt.transform(i[l]):a+=i[l]}return a}}const ZN=n=>typeof n=="number"?0:Yt.test(n)?Yt.getAnimatableNone(n):n;function QN(n){const e=R2(n);return B2(n)(e.map(ZN))}const gr={test:qN,parse:R2,createTransformer:B2,getAnimatableNone:QN};function Op(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function JN({hue:n,saturation:e,lightness:t,alpha:s}){n/=360,e/=100,t/=100;let i=0,a=0,l=0;if(!e)i=a=l=t;else{const c=t<.5?t*(1+e):t+e-t*e,d=2*t-c;i=Op(d,c,n+1/3),a=Op(d,c,n),l=Op(d,c,n-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:s}}function uh(n,e){return t=>t>0?e:n}const Lt=(n,e,t)=>n+(e-n)*t,Lp=(n,e,t)=>{const s=n*n,i=t*(e*e-s)+s;return i<0?0:Math.sqrt(i)},e4=[Tm,Kr,go],t4=n=>e4.find(e=>e.test(n));function c1(n){const e=t4(n);if(!e)return!1;let t=e.parse(n);return e===go&&(t=JN(t)),t}const u1=(n,e)=>{const t=c1(n),s=c1(e);if(!t||!s)return uh(n,e);const i={...t};return a=>(i.red=Lp(t.red,s.red,a),i.green=Lp(t.green,s.green,a),i.blue=Lp(t.blue,s.blue,a),i.alpha=Lt(t.alpha,s.alpha,a),Kr.transform(i))},Em=new Set(["none","hidden"]);function s4(n,e){return Em.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function n4(n,e){return t=>Lt(n,e,t)}function Uv(n){return typeof n=="number"?n4:typeof n=="string"?Pv(n)?uh:Yt.test(n)?u1:a4:Array.isArray(n)?U2:typeof n=="object"?Yt.test(n)?u1:i4:uh}function U2(n,e){const t=[...n],s=t.length,i=n.map((a,l)=>Uv(a)(a,e[l]));return a=>{for(let l=0;l<s;l++)t[l]=i[l](a);return t}}function i4(n,e){const t={...n,...e},s={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(s[i]=Uv(n[i])(n[i],e[i]));return i=>{for(const a in s)t[a]=s[a](i);return t}}function r4(n,e){const t=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],l=n.indexes[a][s[a]],c=n.values[l]??0;t[i]=c,s[a]++}return t}const a4=(n,e)=>{const t=gr.createTransformer(e),s=Tc(n),i=Tc(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?Em.has(n)&&!i.values.length||Em.has(e)&&!s.values.length?s4(n,e):Vc(U2(r4(s,i),i.values),t):uh(n,e)};function z2(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Lt(n,e,t):Uv(n)(n,e)}const o4=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Tt.update(e,t),stop:()=>fr(e),now:()=>fs.isProcessing?fs.timestamp:Bs.now()}},I2=(n,e,t=10)=>{let s="";const i=Math.max(Math.round(e/t),2);for(let a=0;a<i;a++)s+=Math.round(n(a/(i-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},dh=2e4;function zv(n){let e=0;const t=50;let s=n.next(e);for(;!s.done&&e<dh;)e+=t,s=n.next(e);return e>=dh?1/0:e}function l4(n,e=100,t){const s=t({...n,keyframes:[0,e]}),i=Math.min(zv(s),dh);return{type:"keyframes",ease:a=>s.next(i*a).value/e,duration:$n(i)}}const c4=5;function F2(n,e,t){const s=Math.max(e-c4,0);return b2(t-n(s),e-s)}const Bt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ap=.001;function u4({duration:n=Bt.duration,bounce:e=Bt.bounce,velocity:t=Bt.velocity,mass:s=Bt.mass}){let i,a,l=1-e;l=Ei(Bt.minDamping,Bt.maxDamping,l),n=Ei(Bt.minDuration,Bt.maxDuration,$n(n)),l<1?(i=h=>{const g=h*l,m=g*n,y=g-t,b=jm(h,l),S=Math.exp(-m);return Ap-y/b*S},a=h=>{const m=h*l*n,y=m*t+t,b=Math.pow(l,2)*Math.pow(h,2)*n,S=Math.exp(-m),_=jm(Math.pow(h,2),l);return(-i(h)+Ap>0?-1:1)*((y-b)*S)/_}):(i=h=>{const g=Math.exp(-h*n),m=(h-t)*n+1;return-Ap+g*m},a=h=>{const g=Math.exp(-h*n),m=(t-h)*(n*n);return g*m});const c=5/n,d=h4(i,a,c);if(n=Gn(n),isNaN(d))return{stiffness:Bt.stiffness,damping:Bt.damping,duration:n};{const h=Math.pow(d,2)*s;return{stiffness:h,damping:l*2*Math.sqrt(s*h),duration:n}}}const d4=12;function h4(n,e,t){let s=t;for(let i=1;i<d4;i++)s=s-n(s)/e(s);return s}function jm(n,e){return n*Math.sqrt(1-e*e)}const f4=["duration","bounce"],g4=["stiffness","damping","mass"];function d1(n,e){return e.some(t=>n[t]!==void 0)}function p4(n){let e={velocity:Bt.velocity,stiffness:Bt.stiffness,damping:Bt.damping,mass:Bt.mass,isResolvedFromDuration:!1,...n};if(!d1(n,g4)&&d1(n,f4))if(n.visualDuration){const t=n.visualDuration,s=2*Math.PI/(t*1.2),i=s*s,a=2*Ei(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Bt.mass,stiffness:i,damping:a}}else{const t=u4(n);e={...e,...t,mass:Bt.mass},e.isResolvedFromDuration=!0}return e}function hh(n=Bt.visualDuration,e=Bt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:s,restDelta:i}=t;const a=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],c={done:!1,value:a},{stiffness:d,damping:h,mass:g,duration:m,velocity:y,isResolvedFromDuration:b}=p4({...t,velocity:-$n(t.velocity||0)}),S=y||0,_=h/(2*Math.sqrt(d*g)),T=l-a,C=$n(Math.sqrt(d/g)),M=Math.abs(T)<5;s||(s=M?Bt.restSpeed.granular:Bt.restSpeed.default),i||(i=M?Bt.restDelta.granular:Bt.restDelta.default);let O;if(_<1){const j=jm(C,_);O=D=>{const k=Math.exp(-_*C*D);return l-k*((S+_*C*T)/j*Math.sin(j*D)+T*Math.cos(j*D))}}else if(_===1)O=j=>l-Math.exp(-C*j)*(T+(S+C*T)*j);else{const j=C*Math.sqrt(_*_-1);O=D=>{const k=Math.exp(-_*C*D),B=Math.min(j*D,300);return l-k*((S+_*C*T)*Math.sinh(B)+j*T*Math.cosh(B))/j}}const L={calculatedDuration:b&&m||null,next:j=>{const D=O(j);if(b)c.done=j>=m;else{let k=j===0?S:0;_<1&&(k=j===0?Gn(S):F2(O,j,D));const B=Math.abs(k)<=s,P=Math.abs(l-D)<=i;c.done=B&&P}return c.value=c.done?l:D,c},toString:()=>{const j=Math.min(zv(L),dh),D=I2(k=>L.next(j*k).value,j,30);return j+"ms "+D},toTransition:()=>{}};return L}hh.applyToOptions=n=>{const e=l4(n,100,hh);return n.ease=e.ease,n.duration=Gn(e.duration),n.type="keyframes",n};function km({keyframes:n,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:l,min:c,max:d,restDelta:h=.5,restSpeed:g}){const m=n[0],y={done:!1,value:m},b=B=>c!==void 0&&B<c||d!==void 0&&B>d,S=B=>c===void 0?d:d===void 0||Math.abs(c-B)<Math.abs(d-B)?c:d;let _=t*e;const T=m+_,C=l===void 0?T:l(T);C!==T&&(_=C-m);const M=B=>-_*Math.exp(-B/s),O=B=>C+M(B),L=B=>{const P=M(B),z=O(B);y.done=Math.abs(P)<=h,y.value=y.done?C:z};let j,D;const k=B=>{b(y.value)&&(j=B,D=hh({keyframes:[y.value,S(y.value)],velocity:F2(O,B,y.value),damping:i,stiffness:a,restDelta:h,restSpeed:g}))};return k(0),{calculatedDuration:null,next:B=>{let P=!1;return!D&&j===void 0&&(P=!0,L(B),k(B)),j!==void 0&&B>=j?D.next(B-j):(!P&&L(B),y)}}}function m4(n,e,t){const s=[],i=t||ji.mix||z2,a=n.length-1;for(let l=0;l<a;l++){let c=i(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||pn:e;c=Vc(d,c)}s.push(c)}return s}function v4(n,e,{clamp:t=!0,ease:s,mixer:i}={}){const a=n.length;if(Mv(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=m4(e,s,i),d=c.length,h=g=>{if(l&&g<n[0])return e[0];let m=0;if(d>1)for(;m<n.length-2&&!(g<n[m+1]);m++);const y=_c(n[m],n[m+1],g);return c[m](y)};return t?g=>h(Ei(n[0],n[a-1],g)):h}function y4(n,e){const t=n[n.length-1];for(let s=1;s<=e;s++){const i=_c(0,e,s);n.push(Lt(t,1,i))}}function x4(n){const e=[0];return y4(e,n.length-1),e}function b4(n,e){return n.map(t=>t*e)}function w4(n,e){return n.map(()=>e||M2).splice(0,n.length-1)}function dc({duration:n=300,keyframes:e,times:t,ease:s="easeInOut"}){const i=AN(s)?s.map(r1):r1(s),a={done:!1,value:e[0]},l=b4(t&&t.length===e.length?t:x4(e),n),c=v4(l,e,{ease:Array.isArray(i)?i:w4(e,i)});return{calculatedDuration:n,next:d=>(a.value=c(d),a.done=d>=n,a)}}const S4=n=>n!==null;function Iv(n,{repeat:e,repeatType:t="loop"},s,i=1){const a=n.filter(S4),c=i<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!c||s===void 0?a[c]:s}const _4={decay:km,inertia:km,tween:dc,keyframes:dc,spring:hh};function V2(n){typeof n.type=="string"&&(n.type=_4[n.type])}class Fv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const C4=n=>n/100;class Vv extends Fv{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Bs.now()&&this.tick(Bs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;V2(e);const{type:t=dc,repeat:s=0,repeatDelay:i=0,repeatType:a,velocity:l=0}=e;let{keyframes:c}=e;const d=t||dc;d!==dc&&typeof c[0]!="number"&&(this.mixKeyframes=Vc(C4,z2(c[0],c[1])),c=[0,100]);const h=d({...e,keyframes:c});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...c].reverse(),velocity:-l})),h.calculatedDuration===null&&(h.calculatedDuration=zv(h));const{calculatedDuration:g}=h;this.calculatedDuration=g,this.resolvedDuration=g+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=h}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:s,totalDuration:i,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return s.next(0);const{delay:h=0,keyframes:g,repeat:m,repeatType:y,repeatDelay:b,type:S,onUpdate:_,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const C=this.currentTime-h*(this.playbackSpeed>=0?1:-1),M=this.playbackSpeed>=0?C<0:C>i;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let O=this.currentTime,L=s;if(m){const B=Math.min(this.currentTime,i)/c;let P=Math.floor(B),z=B%1;!z&&B>=1&&(z=1),z===1&&P--,P=Math.min(P,m+1),!!(P%2)&&(y==="reverse"?(z=1-z,b&&(z-=b/c)):y==="mirror"&&(L=l)),O=Ei(0,1,z)*c}const j=M?{done:!1,value:g[0]}:L.next(O);a&&(j.value=a(j.value));let{done:D}=j;!M&&d!==null&&(D=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return k&&S!==km&&(j.value=Iv(g,this.options,T,this.speed)),_&&_(j.value),k&&this.finish(),j}then(e,t){return this.finished.then(e,t)}get duration(){return $n(this.calculatedDuration)}get time(){return $n(this.currentTime)}set time(e){e=Gn(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Bs.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=$n(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=o4,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=t??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Bs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function T4(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Zr=n=>n*180/Math.PI,Mm=n=>{const e=Zr(Math.atan2(n[1],n[0]));return Om(e)},E4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Mm,rotateZ:Mm,skewX:n=>Zr(Math.atan(n[1])),skewY:n=>Zr(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Om=n=>(n=n%360,n<0&&(n+=360),n),h1=Mm,f1=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),g1=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),j4={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:f1,scaleY:g1,scale:n=>(f1(n)+g1(n))/2,rotateX:n=>Om(Zr(Math.atan2(n[6],n[5]))),rotateY:n=>Om(Zr(Math.atan2(-n[2],n[0]))),rotateZ:h1,rotate:h1,skewX:n=>Zr(Math.atan(n[4])),skewY:n=>Zr(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Lm(n){return n.includes("scale")?1:0}function Am(n,e){if(!n||n==="none")return Lm(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(t)s=j4,i=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=E4,i=c}if(!i)return Lm(e);const a=s[e],l=i[1].split(",").map(M4);return typeof a=="function"?a(l):l[a]}const k4=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Am(t,e)};function M4(n){return parseFloat(n.trim())}const Bo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Uo=new Set(Bo),p1=n=>n===Ro||n===ze,O4=new Set(["x","y","z"]),L4=Bo.filter(n=>!O4.has(n));function A4(n){const e=[];return L4.forEach(t=>{const s=n.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e}const sa={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Am(e,"x"),y:(n,{transform:e})=>Am(e,"y")};sa.translateX=sa.x;sa.translateY=sa.y;const na=new Set;let Dm=!1,Nm=!1,Pm=!1;function H2(){if(Nm){const n=Array.from(na).filter(s=>s.needsMeasurement),e=new Set(n.map(s=>s.element)),t=new Map;e.forEach(s=>{const i=A4(s);i.length&&(t.set(s,i),s.render())}),n.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=t.get(s);i&&i.forEach(([a,l])=>{s.getValue(a)?.set(l)})}),n.forEach(s=>s.measureEndState()),n.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Nm=!1,Dm=!1,na.forEach(n=>n.complete(Pm)),na.clear()}function G2(){na.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Nm=!0)})}function D4(){Pm=!0,G2(),H2(),Pm=!1}class Hv{constructor(e,t,s,i,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=i,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(na.add(this),Dm||(Dm=!0,Tt.read(G2),Tt.resolveKeyframes(H2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:i}=this;if(e[0]===null){const a=i?.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(s&&t){const c=s.readValue(t,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),i&&a===void 0&&i.set(e[0])}T4(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),na.delete(this)}cancel(){this.state==="scheduled"&&(na.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const N4=n=>n.startsWith("--");function P4(n,e,t){N4(e)?n.style.setProperty(e,t):n.style[e]=t}const R4=Ov(()=>window.ScrollTimeline!==void 0),B4={};function U4(n,e){const t=Ov(n);return()=>B4[e]??t()}const $2=U4(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),nc=([n,e,t,s])=>`cubic-bezier(${n}, ${e}, ${t}, ${s})`,m1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nc([0,.65,.55,1]),circOut:nc([.55,0,1,.45]),backIn:nc([.31,.01,.66,-.59]),backOut:nc([.33,1.53,.69,.99])};function Y2(n,e){if(n)return typeof n=="function"?$2()?I2(n,e):"ease-out":O2(n)?nc(n):Array.isArray(n)?n.map(t=>Y2(t,e)||m1.easeOut):m1[n]}function z4(n,e,t,{delay:s=0,duration:i=300,repeat:a=0,repeatType:l="loop",ease:c="easeOut",times:d}={},h=void 0){const g={[e]:t};d&&(g.offset=d);const m=Y2(c,i);Array.isArray(m)&&(g.easing=m);const y={delay:s,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return h&&(y.pseudoElement=h),n.animate(g,y)}function q2(n){return typeof n=="function"&&"applyToOptions"in n}function I4({type:n,...e}){return q2(n)&&$2()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class F4 extends Fv{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:s,keyframes:i,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:c,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,Mv(typeof e.type!="string");const h=I4(e);this.animation=z4(t,s,i,h,a),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const g=Iv(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(g):P4(t,s,g),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return $n(Number(e))}get time(){return $n(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Gn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&R4()?(this.animation.timeline=e,pn):t(this)}}const W2={anticipate:E2,backInOut:T2,circInOut:k2};function V4(n){return n in W2}function H4(n){typeof n.ease=="string"&&V4(n.ease)&&(n.ease=W2[n.ease])}const v1=10;class G4 extends F4{constructor(e){H4(e),V2(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:s,onComplete:i,element:a,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new Vv({...l,autoplay:!1}),d=Gn(this.finishedTime??this.time);t.setWithVelocity(c.sample(d-v1).value,c.sample(d).value,v1),c.stop()}}const y1=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(gr.test(n)||n==="0")&&!n.startsWith("url("));function $4(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function Y4(n,e,t,s){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],l=y1(i,e),c=y1(a,e);return!l||!c?!1:$4(n)||(t==="spring"||q2(t))&&s}function Gv(n){return y2(n)&&"offsetHeight"in n}const q4=new Set(["opacity","clipPath","filter","transform"]),W4=Ov(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function X4(n){const{motionValue:e,name:t,repeatDelay:s,repeatType:i,damping:a,type:l}=n;if(!Gv(e?.owner?.current))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return W4()&&t&&q4.has(t)&&(t!=="transform"||!d)&&!c&&!s&&i!=="mirror"&&a!==0&&l!=="inertia"}const K4=40;class Z4 extends Fv{constructor({autoplay:e=!0,delay:t=0,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",keyframes:c,name:d,motionValue:h,element:g,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Bs.now();const y={autoplay:e,delay:t,type:s,repeat:i,repeatDelay:a,repeatType:l,name:d,motionValue:h,element:g,...m},b=g?.KeyframeResolver||Hv;this.keyframeResolver=new b(c,(S,_,T)=>this.onKeyframesResolved(S,_,y,!T),d,h,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,s,i){this.keyframeResolver=void 0;const{name:a,type:l,velocity:c,delay:d,isHandoff:h,onUpdate:g}=s;this.resolvedAt=Bs.now(),Y4(e,a,l,c)||((ji.instantAnimations||!d)&&g?.(Iv(e,s,t)),e[0]=e[e.length-1],s.duration=0,s.repeat=0);const y={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>K4?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...s,keyframes:e},b=!h&&X4(y)?new G4({...y,element:y.motionValue.owner.current}):new Vv(y);b.finished.then(()=>this.notifyFinished()).catch(pn),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),D4()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Q4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function J4(n){const e=Q4.exec(n);if(!e)return[,];const[,t,s,i]=e;return[`--${t??s}`,i]}function X2(n,e,t=1){const[s,i]=J4(n);if(!s)return;const a=window.getComputedStyle(e).getPropertyValue(s);if(a){const l=a.trim();return v2(l)?parseFloat(l):l}return Pv(i)?X2(i,e,t+1):i}function $v(n,e){return n?.[e]??n?.default??n}const K2=new Set(["width","height","top","left","right","bottom",...Bo]),e3={test:n=>n==="auto",parse:n=>n},Z2=n=>e=>e.test(n),Q2=[Ro,ze,Yn,ar,$N,GN,e3],x1=n=>Q2.find(Z2(n));function t3(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||x2(n):!0}const s3=new Set(["brightness","contrast","saturate","opacity"]);function n3(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[s]=t.match(Rv)||[];if(!s)return n;const i=t.replace(s,"");let a=s3.has(e)?1:0;return s!==t&&(a*=100),e+"("+a+i+")"}const i3=/\b([a-z-]*)\(.*?\)/gu,Rm={...gr,getAnimatableNone:n=>{const e=n.match(i3);return e?e.map(n3).join(" "):n}},b1={...Ro,transform:Math.round},r3={rotate:ar,rotateX:ar,rotateY:ar,rotateZ:ar,scale:pd,scaleX:pd,scaleY:pd,scaleZ:pd,skew:ar,skewX:ar,skewY:ar,distance:ze,translateX:ze,translateY:ze,translateZ:ze,x:ze,y:ze,z:ze,perspective:ze,transformPerspective:ze,opacity:Cc,originX:o1,originY:o1,originZ:ze},Yv={borderWidth:ze,borderTopWidth:ze,borderRightWidth:ze,borderBottomWidth:ze,borderLeftWidth:ze,borderRadius:ze,radius:ze,borderTopLeftRadius:ze,borderTopRightRadius:ze,borderBottomRightRadius:ze,borderBottomLeftRadius:ze,width:ze,maxWidth:ze,height:ze,maxHeight:ze,top:ze,right:ze,bottom:ze,left:ze,padding:ze,paddingTop:ze,paddingRight:ze,paddingBottom:ze,paddingLeft:ze,margin:ze,marginTop:ze,marginRight:ze,marginBottom:ze,marginLeft:ze,backgroundPositionX:ze,backgroundPositionY:ze,...r3,zIndex:b1,fillOpacity:Cc,strokeOpacity:Cc,numOctaves:b1},a3={...Yv,color:Yt,backgroundColor:Yt,outlineColor:Yt,fill:Yt,stroke:Yt,borderColor:Yt,borderTopColor:Yt,borderRightColor:Yt,borderBottomColor:Yt,borderLeftColor:Yt,filter:Rm,WebkitFilter:Rm},J2=n=>a3[n];function eT(n,e){let t=J2(n);return t!==Rm&&(t=gr),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const o3=new Set(["auto","none","0"]);function l3(n,e,t){let s=0,i;for(;s<n.length&&!i;){const a=n[s];typeof a=="string"&&!o3.has(a)&&Tc(a).values.length&&(i=n[s]),s++}if(i&&t)for(const a of e)n[a]=eT(t,i)}class c3 extends Hv{constructor(e,t,s,i,a){super(e,t,s,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let h=e[d];if(typeof h=="string"&&(h=h.trim(),Pv(h))){const g=X2(h,t.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!K2.has(s)||e.length!==2)return;const[i,a]=e,l=x1(i),c=x1(a);if(l!==c)if(p1(l)&&p1(c))for(let d=0;d<e.length;d++){const h=e[d];typeof h=="string"&&(e[d]=parseFloat(h))}else sa[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let i=0;i<e.length;i++)(e[i]===null||t3(e[i]))&&s.push(i);s.length&&l3(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=sa[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const a=s.length-1,l=s[a];s[a]=sa[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function u3(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let s=document;const i=t?.[n]??s.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const tT=(n,e)=>e&&typeof n=="number"?e.transform(n):n,w1=30,d3=n=>!isNaN(parseFloat(n));class h3{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,i=!0)=>{const a=Bs.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();i&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Bs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=d3(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Lv);const s=this.events[e].add(t);return e==="change"?()=>{s(),Tt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Bs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>w1)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,w1);return b2(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ko(n,e){return new h3(n,e)}const{schedule:qv}=L2(queueMicrotask,!1),Cn={x:!1,y:!1};function sT(){return Cn.x||Cn.y}function f3(n){return n==="x"||n==="y"?Cn[n]?null:(Cn[n]=!0,()=>{Cn[n]=!1}):Cn.x||Cn.y?null:(Cn.x=Cn.y=!0,()=>{Cn.x=Cn.y=!1})}function nT(n,e){const t=u3(n),s=new AbortController,i={passive:!0,...e,signal:s.signal};return[t,i,()=>s.abort()]}function S1(n){return!(n.pointerType==="touch"||sT())}function g3(n,e,t={}){const[s,i,a]=nT(n,t),l=c=>{if(!S1(c))return;const{target:d}=c,h=e(d,c);if(typeof h!="function"||!d)return;const g=m=>{S1(m)&&(h(m),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,i)};return s.forEach(c=>{c.addEventListener("pointerenter",l,i)}),a}const iT=(n,e)=>e?n===e?!0:iT(n,e.parentElement):!1,Wv=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,p3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function m3(n){return p3.has(n.tagName)||n.tabIndex!==-1}const Zd=new WeakSet;function _1(n){return e=>{e.key==="Enter"&&n(e)}}function Dp(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const v3=(n,e)=>{const t=n.currentTarget;if(!t)return;const s=_1(()=>{if(Zd.has(t))return;Dp(t,"down");const i=_1(()=>{Dp(t,"up")}),a=()=>Dp(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",s,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",s),e)};function C1(n){return Wv(n)&&!sT()}function y3(n,e,t={}){const[s,i,a]=nT(n,t),l=c=>{const d=c.currentTarget;if(!C1(c))return;Zd.add(d);const h=e(d,c),g=(b,S)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",y),Zd.has(d)&&Zd.delete(d),C1(b)&&typeof h=="function"&&h(b,{success:S})},m=b=>{g(b,d===window||d===document||t.useGlobalTarget||iT(d,b.target))},y=b=>{g(b,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",y,i)};return s.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",l,i),Gv(c)&&(c.addEventListener("focus",h=>v3(h,i)),!m3(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function rT(n){return y2(n)&&"ownerSVGElement"in n}function x3(n){return rT(n)&&n.tagName==="svg"}const bs=n=>!!(n&&n.getVelocity),b3=[...Q2,Yt,gr],w3=n=>b3.find(Z2(n)),Xv=x.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class S3 extends x.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const s=t.offsetParent,i=Gv(s)&&s.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function _3({children:n,isPresent:e,anchorX:t,root:s}){const i=x.useId(),a=x.useRef(null),l=x.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=x.useContext(Xv);return x.useInsertionEffect(()=>{const{width:d,height:h,top:g,left:m,right:y}=l.current;if(e||!a.current||!d||!h)return;const b=t==="left"?`left: ${m}`:`right: ${y}`;a.current.dataset.motionPopId=i;const S=document.createElement("style");c&&(S.nonce=c);const _=s??document.head;return _.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${b}px !important;
            top: ${g}px !important;
          }
        `),()=>{_.removeChild(S),_.contains(S)&&_.removeChild(S)}},[e]),p.jsx(S3,{isPresent:e,childRef:a,sizeRef:l,children:x.cloneElement(n,{ref:a})})}const C3=({children:n,initial:e,isPresent:t,onExitComplete:s,custom:i,presenceAffectsLayout:a,mode:l,anchorX:c,root:d})=>{const h=Tv(T3),g=x.useId();let m=!0,y=x.useMemo(()=>(m=!1,{id:g,initial:e,isPresent:t,custom:i,onExitComplete:b=>{h.set(b,!0);for(const S of h.values())if(!S)return;s&&s()},register:b=>(h.set(b,!1),()=>h.delete(b))}),[t,h,s]);return a&&m&&(y={...y}),x.useMemo(()=>{h.forEach((b,S)=>h.set(S,!1))},[t]),x.useEffect(()=>{!t&&!h.size&&s&&s()},[t]),l==="popLayout"&&(n=p.jsx(_3,{isPresent:t,anchorX:c,root:d,children:n})),p.jsx(Hh.Provider,{value:y,children:n})};function T3(){return new Map}function aT(n=!0){const e=x.useContext(Hh);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:i}=e,a=x.useId();x.useEffect(()=>{if(n)return i(a)},[n]);const l=x.useCallback(()=>n&&s&&s(a),[a,s,n]);return!t&&s?[!1,l]:[!0]}const md=n=>n.key||"";function T1(n){const e=[];return x.Children.forEach(n,t=>{x.isValidElement(t)&&e.push(t)}),e}const E3=({children:n,custom:e,initial:t=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:a="sync",propagate:l=!1,anchorX:c="left",root:d})=>{const[h,g]=aT(l),m=x.useMemo(()=>T1(n),[n]),y=l&&!h?[]:m.map(md),b=x.useRef(!0),S=x.useRef(m),_=Tv(()=>new Map),[T,C]=x.useState(m),[M,O]=x.useState(m);m2(()=>{b.current=!1,S.current=m;for(let D=0;D<M.length;D++){const k=md(M[D]);y.includes(k)?_.delete(k):_.get(k)!==!0&&_.set(k,!1)}},[M,y.length,y.join("-")]);const L=[];if(m!==T){let D=[...m];for(let k=0;k<M.length;k++){const B=M[k],P=md(B);y.includes(P)||(D.splice(k,0,B),L.push(B))}return a==="wait"&&L.length&&(D=L),O(T1(D)),C(m),null}const{forceRender:j}=x.useContext(Cv);return p.jsx(p.Fragment,{children:M.map(D=>{const k=md(D),B=l&&!h?!1:m===M||y.includes(k),P=()=>{if(_.has(k))_.set(k,!0);else return;let z=!0;_.forEach(I=>{I||(z=!1)}),z&&(j?.(),O(S.current),l&&g?.(),s&&s())};return p.jsx(C3,{isPresent:B,initial:!b.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:d,onExitComplete:B?void 0:P,anchorX:c,children:D},k)})})},oT=x.createContext({strict:!1}),E1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Mo={};for(const n in E1)Mo[n]={isEnabled:e=>E1[n].some(t=>!!e[t])};function j3(n){for(const e in n)Mo[e]={...Mo[e],...n[e]}}const k3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||k3.has(n)}let lT=n=>!fh(n);function M3(n){typeof n=="function"&&(lT=e=>e.startsWith("on")?!fh(e):n(e))}try{M3(require("@emotion/is-prop-valid").default)}catch{}function O3(n,e,t){const s={};for(const i in n)i==="values"&&typeof n.values=="object"||(lT(i)||t===!0&&fh(i)||!e&&!fh(i)||n.draggable&&i.startsWith("onDrag"))&&(s[i]=n[i]);return s}function L3(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...s)=>n(...s);return new Proxy(t,{get:(s,i)=>i==="create"?n:(e.has(i)||e.set(i,n(i)),e.get(i))})}const Gh=x.createContext({});function $h(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Ec(n){return typeof n=="string"||Array.isArray(n)}const Kv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zv=["initial",...Kv];function Yh(n){return $h(n.animate)||Zv.some(e=>Ec(n[e]))}function cT(n){return!!(Yh(n)||n.variants)}function A3(n,e){if(Yh(n)){const{initial:t,animate:s}=n;return{initial:t===!1||Ec(t)?t:void 0,animate:Ec(s)?s:void 0}}return n.inherit!==!1?e:{}}function D3(n){const{initial:e,animate:t}=A3(n,x.useContext(Gh));return x.useMemo(()=>({initial:e,animate:t}),[j1(e),j1(t)])}function j1(n){return Array.isArray(n)?n.join(" "):n}const N3=Symbol.for("motionComponentSymbol");function po(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function P3(n,e,t){return x.useCallback(s=>{s&&n.onMount&&n.onMount(s),e&&(s?e.mount(s):e.unmount()),t&&(typeof t=="function"?t(s):po(t)&&(t.current=s))},[e])}const Qv=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),R3="framerAppearId",uT="data-"+Qv(R3),dT=x.createContext({});function B3(n,e,t,s,i){const{visualElement:a}=x.useContext(Gh),l=x.useContext(oT),c=x.useContext(Hh),d=x.useContext(Xv).reducedMotion,h=x.useRef(null);s=s||l.renderer,!h.current&&s&&(h.current=s(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const g=h.current,m=x.useContext(dT);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&U3(h.current,t,i,m);const y=x.useRef(!1);x.useInsertionEffect(()=>{g&&y.current&&g.update(t,c)});const b=t[uT],S=x.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return m2(()=>{g&&(y.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),qv.render(g.render),S.current&&g.animationState&&g.animationState.animateChanges())}),x.useEffect(()=>{g&&(!S.current&&g.animationState&&g.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),S.current=!1))}),g}function U3(n,e,t,s){const{layoutId:i,layout:a,drag:l,dragConstraints:c,layoutScroll:d,layoutRoot:h,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:hT(n.parent)),n.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!l||c&&po(c),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:s,crossfade:g,layoutScroll:d,layoutRoot:h})}function hT(n){if(n)return n.options.allowProjection!==!1?n.projection:hT(n.parent)}function z3({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:s,Component:i}){n&&j3(n);function a(c,d){let h;const g={...x.useContext(Xv),...c,layoutId:I3(c)},{isStatic:m}=g,y=D3(c),b=s(c,m);if(!m&&Ev){F3();const S=V3(g);h=S.MeasureLayout,y.visualElement=B3(i,b,g,e,S.ProjectionNode)}return p.jsxs(Gh.Provider,{value:y,children:[h&&y.visualElement?p.jsx(h,{visualElement:y.visualElement,...g}):null,t(i,c,P3(b,y.visualElement,d),b,m,y.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const l=x.forwardRef(a);return l[N3]=i,l}function I3({layoutId:n}){const e=x.useContext(Cv).id;return e&&n!==void 0?e+"-"+n:n}function F3(n,e){x.useContext(oT).strict}function V3(n){const{drag:e,layout:t}=Mo;if(!e&&!t)return{};const s={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const jc={};function H3(n){for(const e in n)jc[e]=n[e],Nv(e)&&(jc[e].isCSSVariable=!0)}function fT(n,{layout:e,layoutId:t}){return Uo.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!jc[n]||n==="opacity")}const G3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$3=Bo.length;function Y3(n,e,t){let s="",i=!0;for(let a=0;a<$3;a++){const l=Bo[a],c=n[l];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(l.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||t){const h=tT(c,Yv[l]);if(!d){i=!1;const g=G3[l]||l;s+=`${g}(${h}) `}t&&(e[l]=h)}}return s=s.trim(),t?s=t(e,i?"":s):i&&(s="none"),s}function Jv(n,e,t){const{style:s,vars:i,transformOrigin:a}=n;let l=!1,c=!1;for(const d in e){const h=e[d];if(Uo.has(d)){l=!0;continue}else if(Nv(d)){i[d]=h;continue}else{const g=tT(h,Yv[d]);d.startsWith("origin")?(c=!0,a[d]=g):s[d]=g}}if(e.transform||(l||t?s.transform=Y3(e,n.transform,t):s.transform&&(s.transform="none")),c){const{originX:d="50%",originY:h="50%",originZ:g=0}=a;s.transformOrigin=`${d} ${h} ${g}`}}const e0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function gT(n,e,t){for(const s in e)!bs(e[s])&&!fT(s,t)&&(n[s]=e[s])}function q3({transformTemplate:n},e){return x.useMemo(()=>{const t=e0();return Jv(t,e,n),Object.assign({},t.vars,t.style)},[e])}function W3(n,e){const t=n.style||{},s={};return gT(s,t,n),Object.assign(s,q3(n,e)),s}function X3(n,e){const t={},s=W3(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=s,t}const K3={offset:"stroke-dashoffset",array:"stroke-dasharray"},Z3={offset:"strokeDashoffset",array:"strokeDasharray"};function Q3(n,e,t=1,s=0,i=!0){n.pathLength=1;const a=i?K3:Z3;n[a.offset]=ze.transform(-s);const l=ze.transform(e),c=ze.transform(t);n[a.array]=`${l} ${c}`}function pT(n,{attrX:e,attrY:t,attrScale:s,pathLength:i,pathSpacing:a=1,pathOffset:l=0,...c},d,h,g){if(Jv(n,c,h),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:y}=n;m.transform&&(y.transform=m.transform,delete m.transform),(y.transform||m.transformOrigin)&&(y.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),y.transform&&(y.transformBox=g?.transformBox??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),s!==void 0&&(m.scale=s),i!==void 0&&Q3(m,i,a,l,!1)}const mT=()=>({...e0(),attrs:{}}),vT=n=>typeof n=="string"&&n.toLowerCase()==="svg";function J3(n,e,t,s){const i=x.useMemo(()=>{const a=mT();return pT(a,e,vT(s),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};gT(a,n.style,n),i.style={...a,...i.style}}return i}const eP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function t0(n){return typeof n!="string"||n.includes("-")?!1:!!(eP.indexOf(n)>-1||/[A-Z]/u.test(n))}function tP(n=!1){return(t,s,i,{latestValues:a},l)=>{const d=(t0(t)?J3:X3)(s,a,l,t),h=O3(s,typeof t=="string",n),g=t!==x.Fragment?{...h,...d,ref:i}:{},{children:m}=s,y=x.useMemo(()=>bs(m)?m.get():m,[m]);return x.createElement(t,{...g,children:y})}}function k1(n){const e=[{},{}];return n?.values.forEach((t,s)=>{e[0][s]=t.get(),e[1][s]=t.getVelocity()}),e}function s0(n,e,t,s){if(typeof e=="function"){const[i,a]=k1(s);e=e(t!==void 0?t:n.custom,i,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,a]=k1(s);e=e(t!==void 0?t:n.custom,i,a)}return e}function Qd(n){return bs(n)?n.get():n}function sP({scrapeMotionValuesFromProps:n,createRenderState:e},t,s,i){return{latestValues:nP(t,s,i,n),renderState:e()}}const yT=n=>(e,t)=>{const s=x.useContext(Gh),i=x.useContext(Hh),a=()=>sP(n,e,s,i);return t?a():Tv(a)};function nP(n,e,t,s){const i={},a=s(n,{});for(const y in a)i[y]=Qd(a[y]);let{initial:l,animate:c}=n;const d=Yh(n),h=cT(n);e&&h&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const m=g?c:l;if(m&&typeof m!="boolean"&&!$h(m)){const y=Array.isArray(m)?m:[m];for(let b=0;b<y.length;b++){const S=s0(n,y[b]);if(S){const{transitionEnd:_,transition:T,...C}=S;for(const M in C){let O=C[M];if(Array.isArray(O)){const L=g?O.length-1:0;O=O[L]}O!==null&&(i[M]=O)}for(const M in _)i[M]=_[M]}}}return i}function n0(n,e,t){const{style:s}=n,i={};for(const a in s)(bs(s[a])||e.style&&bs(e.style[a])||fT(a,n)||t?.getValue(a)?.liveStyle!==void 0)&&(i[a]=s[a]);return i}const iP={useVisualState:yT({scrapeMotionValuesFromProps:n0,createRenderState:e0})};function xT(n,e,t){const s=n0(n,e,t);for(const i in n)if(bs(n[i])||bs(e[i])){const a=Bo.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[a]=n[i]}return s}const rP={useVisualState:yT({scrapeMotionValuesFromProps:xT,createRenderState:mT})};function aP(n,e){return function(s,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...t0(s)?rP:iP,preloadedFeatures:n,useRender:tP(i),createVisualElement:e,Component:s};return z3(l)}}function kc(n,e,t){const s=n.getProps();return s0(s,e,t!==void 0?t:s.custom,n)}const Bm=n=>Array.isArray(n);function oP(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,ko(t))}function lP(n){return Bm(n)?n[n.length-1]||0:n}function cP(n,e){const t=kc(n,e);let{transitionEnd:s={},transition:i={},...a}=t||{};a={...a,...s};for(const l in a){const c=lP(a[l]);oP(n,l,c)}}function uP(n){return!!(bs(n)&&n.add)}function Um(n,e){const t=n.getValue("willChange");if(uP(t))return t.add(e);if(!t&&ji.WillChange){const s=new ji.WillChange("auto");n.addValue("willChange",s),s.add(e)}}function bT(n){return n.props[uT]}const dP=n=>n!==null;function hP(n,{repeat:e,repeatType:t="loop"},s){const i=n.filter(dP),a=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[a]}const fP={type:"spring",stiffness:500,damping:25,restSpeed:10},gP=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),pP={type:"keyframes",duration:.8},mP={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},vP=(n,{keyframes:e})=>e.length>2?pP:Uo.has(n)?n.startsWith("scale")?gP(e[1]):fP:mP;function yP({when:n,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:i,repeat:a,repeatType:l,repeatDelay:c,from:d,elapsed:h,...g}){return!!Object.keys(g).length}const i0=(n,e,t,s={},i,a)=>l=>{const c=$v(s,n)||{},d=c.delay||s.delay||0;let{elapsed:h=0}=s;h=h-Gn(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:y=>{e.set(y),c.onUpdate&&c.onUpdate(y)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:a?void 0:i};yP(c)||Object.assign(g,vP(n,g)),g.duration&&(g.duration=Gn(g.duration)),g.repeatDelay&&(g.repeatDelay=Gn(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let m=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(m=!0)),(ji.instantAnimations||ji.skipAnimations)&&(m=!0,g.duration=0,g.delay=0),g.allowFlatten=!c.type&&!c.ease,m&&!a&&e.get()!==void 0){const y=hP(g.keyframes,c);if(y!==void 0){Tt.update(()=>{g.onUpdate(y),g.onComplete()});return}}return c.isSync?new Vv(g):new Z4(g)};function xP({protectedKeys:n,needsAnimating:e},t){const s=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function wT(n,e,{delay:t=0,transitionOverride:s,type:i}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:l,...c}=e;s&&(a=s);const d=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const g in c){const m=n.getValue(g,n.latestValues[g]??null),y=c[g];if(y===void 0||h&&xP(h,g))continue;const b={delay:t,...$v(a||{},g)},S=m.get();if(S!==void 0&&!m.isAnimating&&!Array.isArray(y)&&y===S&&!b.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const C=bT(n);if(C){const M=window.MotionHandoffAnimation(C,g,Tt);M!==null&&(b.startTime=M,_=!0)}}Um(n,g),m.start(i0(g,m,y,n.shouldReduceMotion&&K2.has(g)?{type:!1}:b,n,_));const T=m.animation;T&&d.push(T)}return l&&Promise.all(d).then(()=>{Tt.update(()=>{l&&cP(n,l)})}),d}function zm(n,e,t={}){const s=kc(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(i=t.transitionOverride);const a=s?()=>Promise.all(wT(n,s,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:g,staggerDirection:m}=i;return bP(n,e,d,h,g,m,t)}:()=>Promise.resolve(),{when:c}=i;if(c){const[d,h]=c==="beforeChildren"?[a,l]:[l,a];return d().then(()=>h())}else return Promise.all([a(),l(t.delay)])}function bP(n,e,t=0,s=0,i=0,a=1,l){const c=[],d=n.variantChildren.size,h=(d-1)*i,g=typeof s=="function",m=g?y=>s(y,d):a===1?(y=0)=>y*i:(y=0)=>h-y*i;return Array.from(n.variantChildren).sort(wP).forEach((y,b)=>{y.notify("AnimationStart",e),c.push(zm(y,e,{...l,delay:t+(g?0:s)+m(b)}).then(()=>y.notify("AnimationComplete",e)))}),Promise.all(c)}function wP(n,e){return n.sortNodePosition(e)}function SP(n,e,t={}){n.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(a=>zm(n,a,t));s=Promise.all(i)}else if(typeof e=="string")s=zm(n,e,t);else{const i=typeof e=="function"?kc(n,e,t.custom):e;s=Promise.all(wT(n,i,t))}return s.then(()=>{n.notify("AnimationComplete",e)})}function ST(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let s=0;s<t;s++)if(e[s]!==n[s])return!1;return!0}const _P=Zv.length;function _T(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?_T(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<_P;t++){const s=Zv[t],i=n.props[s];(Ec(i)||i===!1)&&(e[s]=i)}return e}const CP=[...Kv].reverse(),TP=Kv.length;function EP(n){return e=>Promise.all(e.map(({animation:t,options:s})=>SP(n,t,s)))}function jP(n){let e=EP(n),t=M1(),s=!0;const i=d=>(h,g)=>{const m=kc(n,g,d==="exit"?n.presenceContext?.custom:void 0);if(m){const{transition:y,transitionEnd:b,...S}=m;h={...h,...S,...b}}return h};function a(d){e=d(n)}function l(d){const{props:h}=n,g=_T(n.parent)||{},m=[],y=new Set;let b={},S=1/0;for(let T=0;T<TP;T++){const C=CP[T],M=t[C],O=h[C]!==void 0?h[C]:g[C],L=Ec(O),j=C===d?M.isActive:null;j===!1&&(S=T);let D=O===g[C]&&O!==h[C]&&L;if(D&&s&&n.manuallyAnimateOnMount&&(D=!1),M.protectedKeys={...b},!M.isActive&&j===null||!O&&!M.prevProp||$h(O)||typeof O=="boolean")continue;const k=kP(M.prevProp,O);let B=k||C===d&&M.isActive&&!D&&L||T>S&&L,P=!1;const z=Array.isArray(O)?O:[O];let I=z.reduce(i(C),{});j===!1&&(I={});const{prevResolvedValues:F={}}=M,ee={...F,...I},X=V=>{B=!0,y.has(V)&&(P=!0,y.delete(V)),M.needsAnimating[V]=!0;const K=n.getValue(V);K&&(K.liveStyle=!1)};for(const V in ee){const K=I[V],te=F[V];if(b.hasOwnProperty(V))continue;let N=!1;Bm(K)&&Bm(te)?N=!ST(K,te):N=K!==te,N?K!=null?X(V):y.add(V):K!==void 0&&y.has(V)?X(V):M.protectedKeys[V]=!0}M.prevProp=O,M.prevResolvedValues=I,M.isActive&&(b={...b,...I}),s&&n.blockInitialAnimation&&(B=!1),B&&(!(D&&k)||P)&&m.push(...z.map(V=>({animation:V,options:{type:C}})))}if(y.size){const T={};if(typeof h.initial!="boolean"){const C=kc(n,Array.isArray(h.initial)?h.initial[0]:h.initial);C&&C.transition&&(T.transition=C.transition)}y.forEach(C=>{const M=n.getBaseTarget(C),O=n.getValue(C);O&&(O.liveStyle=!0),T[C]=M??null}),m.push({animation:T})}let _=!!m.length;return s&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(_=!1),s=!1,_?e(m):Promise.resolve()}function c(d,h){if(t[d].isActive===h)return Promise.resolve();n.variantChildren?.forEach(m=>m.animationState?.setActive(d,h)),t[d].isActive=h;const g=l(d);for(const m in t)t[m].protectedKeys={};return g}return{animateChanges:l,setActive:c,setAnimateFunction:a,getState:()=>t,reset:()=>{t=M1(),s=!0}}}function kP(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!ST(e,n):!1}function Fr(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function M1(){return{animate:Fr(!0),whileInView:Fr(),whileHover:Fr(),whileTap:Fr(),whileDrag:Fr(),whileFocus:Fr(),exit:Fr()}}class br{constructor(e){this.isMounted=!1,this.node=e}update(){}}class MP extends br{constructor(e){super(e),e.animationState||(e.animationState=jP(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();$h(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let OP=0;class LP extends br{constructor(){super(...arguments),this.id=OP++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const AP={animation:{Feature:MP},exit:{Feature:LP}};function Mc(n,e,t,s={passive:!0}){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t)}function $c(n){return{point:{x:n.pageX,y:n.pageY}}}const DP=n=>e=>Wv(e)&&n(e,$c(e));function hc(n,e,t,s){return Mc(n,e,DP(t),s)}function CT({top:n,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:n,max:s}}}function NP({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function PP(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),s=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}const TT=1e-4,RP=1-TT,BP=1+TT,ET=.01,UP=0-ET,zP=0+ET;function Es(n){return n.max-n.min}function IP(n,e,t){return Math.abs(n-e)<=t}function O1(n,e,t,s=.5){n.origin=s,n.originPoint=Lt(e.min,e.max,n.origin),n.scale=Es(t)/Es(e),n.translate=Lt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=RP&&n.scale<=BP||isNaN(n.scale))&&(n.scale=1),(n.translate>=UP&&n.translate<=zP||isNaN(n.translate))&&(n.translate=0)}function fc(n,e,t,s){O1(n.x,e.x,t.x,s?s.originX:void 0),O1(n.y,e.y,t.y,s?s.originY:void 0)}function L1(n,e,t){n.min=t.min+e.min,n.max=n.min+Es(e)}function FP(n,e,t){L1(n.x,e.x,t.x),L1(n.y,e.y,t.y)}function A1(n,e,t){n.min=e.min-t.min,n.max=n.min+Es(e)}function gc(n,e,t){A1(n.x,e.x,t.x),A1(n.y,e.y,t.y)}const D1=()=>({translate:0,scale:1,origin:0,originPoint:0}),mo=()=>({x:D1(),y:D1()}),N1=()=>({min:0,max:0}),Ft=()=>({x:N1(),y:N1()});function hn(n){return[n("x"),n("y")]}function Np(n){return n===void 0||n===1}function Im({scale:n,scaleX:e,scaleY:t}){return!Np(n)||!Np(e)||!Np(t)}function Gr(n){return Im(n)||jT(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function jT(n){return P1(n.x)||P1(n.y)}function P1(n){return n&&n!=="0%"}function gh(n,e,t){const s=n-t,i=e*s;return t+i}function R1(n,e,t,s,i){return i!==void 0&&(n=gh(n,i,s)),gh(n,t,s)+e}function Fm(n,e=0,t=1,s,i){n.min=R1(n.min,e,t,s,i),n.max=R1(n.max,e,t,s,i)}function kT(n,{x:e,y:t}){Fm(n.x,e.translate,e.scale,e.originPoint),Fm(n.y,t.translate,t.scale,t.originPoint)}const B1=.999999999999,U1=1.0000000000001;function VP(n,e,t,s=!1){const i=t.length;if(!i)return;e.x=e.y=1;let a,l;for(let c=0;c<i;c++){a=t[c],l=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&yo(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,kT(n,l)),s&&Gr(a.latestValues)&&yo(n,a.latestValues))}e.x<U1&&e.x>B1&&(e.x=1),e.y<U1&&e.y>B1&&(e.y=1)}function vo(n,e){n.min=n.min+e,n.max=n.max+e}function z1(n,e,t,s,i=.5){const a=Lt(n.min,n.max,i);Fm(n,e,t,a,s)}function yo(n,e){z1(n.x,e.x,e.scaleX,e.scale,e.originX),z1(n.y,e.y,e.scaleY,e.scale,e.originY)}function MT(n,e){return CT(PP(n.getBoundingClientRect(),e))}function HP(n,e,t){const s=MT(n,t),{scroll:i}=e;return i&&(vo(s.x,i.offset.x),vo(s.y,i.offset.y)),s}const OT=({current:n})=>n?n.ownerDocument.defaultView:null,I1=(n,e)=>Math.abs(n-e);function GP(n,e){const t=I1(n.x,e.x),s=I1(n.y,e.y);return Math.sqrt(t**2+s**2)}class LT{constructor(e,t,{transformPagePoint:s,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Rp(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,S=GP(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!S)return;const{point:_}=y,{timestamp:T}=fs;this.history.push({..._,timestamp:T});const{onStart:C,onMove:M}=this.handlers;b||(C&&C(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,y)},this.handlePointerMove=(y,b)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Pp(b,this.transformPagePoint),Tt.update(this.updatePoint,!0)},this.handlePointerUp=(y,b)=>{this.end();const{onEnd:S,onSessionEnd:_,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Rp(y.type==="pointercancel"?this.lastMoveEventInfo:Pp(b,this.transformPagePoint),this.history);this.startEvent&&S&&S(y,C),_&&_(y,C)},!Wv(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=s,this.distanceThreshold=l,this.contextWindow=i||window;const c=$c(e),d=Pp(c,this.transformPagePoint),{point:h}=d,{timestamp:g}=fs;this.history=[{...h,timestamp:g}];const{onSessionStart:m}=t;m&&m(e,Rp(d,this.history)),this.removeListeners=Vc(hc(this.contextWindow,"pointermove",this.handlePointerMove),hc(this.contextWindow,"pointerup",this.handlePointerUp),hc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),fr(this.updatePoint)}}function Pp(n,e){return e?{point:e(n.point)}:n}function F1(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Rp({point:n},e){return{point:n,delta:F1(n,AT(e)),offset:F1(n,$P(e)),velocity:YP(e,.1)}}function $P(n){return n[0]}function AT(n){return n[n.length-1]}function YP(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,s=null;const i=AT(n);for(;t>=0&&(s=n[t],!(i.timestamp-s.timestamp>Gn(e)));)t--;if(!s)return{x:0,y:0};const a=$n(i.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const l={x:(i.x-s.x)/a,y:(i.y-s.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function qP(n,{min:e,max:t},s){return e!==void 0&&n<e?n=s?Lt(e,n,s.min):Math.max(n,e):t!==void 0&&n>t&&(n=s?Lt(t,n,s.max):Math.min(n,t)),n}function V1(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function WP(n,{top:e,left:t,bottom:s,right:i}){return{x:V1(n.x,t,i),y:V1(n.y,e,s)}}function H1(n,e){let t=e.min-n.min,s=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,s]=[s,t]),{min:t,max:s}}function XP(n,e){return{x:H1(n.x,e.x),y:H1(n.y,e.y)}}function KP(n,e){let t=.5;const s=Es(n),i=Es(e);return i>s?t=_c(e.min,e.max-s,n.min):s>i&&(t=_c(n.min,n.max-i,e.min)),Ei(0,1,t)}function ZP(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Vm=.35;function QP(n=Vm){return n===!1?n=0:n===!0&&(n=Vm),{x:G1(n,"left","right"),y:G1(n,"top","bottom")}}function G1(n,e,t){return{min:$1(n,e),max:$1(n,t)}}function $1(n,e){return typeof n=="number"?n:n[e]||0}const JP=new WeakMap;class e5{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ft(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:s}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=m=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor($c(m).point)},l=(m,y)=>{const{drag:b,dragPropagation:S,onDragStart:_}=this.getProps();if(b&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=f3(b),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hn(C=>{let M=this.getAxisMotionValue(C).get()||0;if(Yn.test(M)){const{projection:O}=this.visualElement;if(O&&O.layout){const L=O.layout.layoutBox[C];L&&(M=Es(L)*(parseFloat(M)/100))}}this.originPoint[C]=M}),_&&Tt.postRender(()=>_(m,y)),Um(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},c=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y;const{dragPropagation:b,dragDirectionLock:S,onDirectionLock:_,onDrag:T}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:C}=y;if(S&&this.currentDirection===null){this.currentDirection=t5(C),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",y.point,C),this.updateAxis("y",y.point,C),this.visualElement.render(),T&&T(m,y)},d=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y,this.stop(m,y),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>hn(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new LT(e,{onSessionStart:a,onStart:l,onMove:c,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:s,contextWindow:OT(this.visualElement)})}stop(e,t){const s=e||this.latestPointerEvent,i=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!s)return;const{velocity:l}=i;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&Tt.postRender(()=>c(s,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:i}=this.getProps();if(!s||!vd(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(l=qP(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&po(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=WP(s.layoutBox,e):this.constraints=!1,this.elastic=QP(t),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&hn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=ZP(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!po(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=HP(s,i.root,this.visualElement.getTransformPagePoint());let l=XP(i.layout.layoutBox,a);if(t){const c=t(NP(l));this.hasMutatedConstraints=!!c,c&&(l=CT(c))}return l}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:i,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},h=hn(g=>{if(!vd(g,t,this.currentDirection))return;let m=d&&d[g]||{};l&&(m={min:0,max:0});const y=i?200:1e6,b=i?40:1e7,S={type:"inertia",velocity:s?e[g]:0,bounceStiffness:y,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(g,S)});return Promise.all(h).then(c)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return Um(this.visualElement,e),s.start(i0(e,s,0,t,this.visualElement,!1))}stopAnimation(){hn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){hn(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[t];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){hn(t=>{const{drag:s}=this.getProps();if(!vd(t,s,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(t);if(i&&i.layout){const{min:l,max:c}=i.layout.layoutBox[t];a.set(e[t]-Lt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!po(t)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};hn(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const d=c.get();i[l]=KP({min:d,max:d},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),hn(l=>{if(!vd(l,e,null))return;const c=this.getAxisMotionValue(l),{min:d,max:h}=this.constraints[l];c.set(Lt(d,h,i[l]))})}addListeners(){if(!this.visualElement.current)return;JP.set(this.visualElement,this);const e=this.visualElement.current,t=hc(e,"pointerdown",d=>{const{drag:h,dragListener:g=!0}=this.getProps();h&&g&&this.start(d)}),s=()=>{const{dragConstraints:d}=this.getProps();po(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Tt.read(s);const l=Mc(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(hn(g=>{const m=this.getAxisMotionValue(g);m&&(this.originPoint[g]+=d[g].translate,m.set(m.get()+d[g].translate))}),this.visualElement.render())});return()=>{l(),t(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:l=Vm,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:i,dragConstraints:a,dragElastic:l,dragMomentum:c}}}function vd(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function t5(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class s5 extends br{constructor(e){super(e),this.removeGroupControls=pn,this.removeListeners=pn,this.controls=new e5(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Y1=n=>(e,t)=>{n&&Tt.postRender(()=>n(e,t))};class n5 extends br{constructor(){super(...arguments),this.removePointerDownListener=pn}onPointerDown(e){this.session=new LT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:OT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:Y1(e),onStart:Y1(t),onMove:s,onEnd:(a,l)=>{delete this.session,i&&Tt.postRender(()=>i(a,l))}}}mount(){this.removePointerDownListener=hc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Jd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function q1(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Xl={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ze.test(n))n=parseFloat(n);else return n;const t=q1(n,e.target.x),s=q1(n,e.target.y);return`${t}% ${s}%`}},i5={correct:(n,{treeScale:e,projectionDelta:t})=>{const s=n,i=gr.parse(n);if(i.length>5)return s;const a=gr.createTransformer(n),l=typeof i[0]!="number"?1:0,c=t.x.scale*e.x,d=t.y.scale*e.y;i[0+l]/=c,i[1+l]/=d;const h=Lt(c,d,.5);return typeof i[2+l]=="number"&&(i[2+l]/=h),typeof i[3+l]=="number"&&(i[3+l]/=h),a(i)}};let W1=!1;class r5 extends x.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:i}=this.props,{projection:a}=e;H3(a5),a&&(t.group&&t.group.add(a),s&&s.register&&i&&s.register(a),W1&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Jd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:i,isPresent:a}=this.props,{projection:l}=s;return l&&(l.isPresent=a,W1=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||Tt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),qv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function DT(n){const[e,t]=aT(),s=x.useContext(Cv);return p.jsx(r5,{...n,layoutGroup:s,switchLayoutGroup:x.useContext(dT),isPresent:e,safeToRemove:t})}const a5={borderRadius:{...Xl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xl,borderTopRightRadius:Xl,borderBottomLeftRadius:Xl,borderBottomRightRadius:Xl,boxShadow:i5};function o5(n,e,t){const s=bs(n)?n:ko(n);return s.start(i0("",s,e,t)),s.animation}const l5=(n,e)=>n.depth-e.depth;class c5{constructor(){this.children=[],this.isDirty=!1}add(e){jv(this.children,e),this.isDirty=!0}remove(e){kv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(l5),this.isDirty=!1,this.children.forEach(e)}}function u5(n,e){const t=Bs.now(),s=({timestamp:i})=>{const a=i-t;a>=e&&(fr(s),n(a-e))};return Tt.setup(s,!0),()=>fr(s)}const NT=["TopLeft","TopRight","BottomLeft","BottomRight"],d5=NT.length,X1=n=>typeof n=="string"?parseFloat(n):n,K1=n=>typeof n=="number"||ze.test(n);function h5(n,e,t,s,i,a){i?(n.opacity=Lt(0,t.opacity??1,f5(s)),n.opacityExit=Lt(e.opacity??1,0,g5(s))):a&&(n.opacity=Lt(e.opacity??1,t.opacity??1,s));for(let l=0;l<d5;l++){const c=`border${NT[l]}Radius`;let d=Z1(e,c),h=Z1(t,c);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||K1(d)===K1(h)?(n[c]=Math.max(Lt(X1(d),X1(h),s),0),(Yn.test(h)||Yn.test(d))&&(n[c]+="%")):n[c]=h}(e.rotate||t.rotate)&&(n.rotate=Lt(e.rotate||0,t.rotate||0,s))}function Z1(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const f5=PT(0,.5,j2),g5=PT(.5,.95,pn);function PT(n,e,t){return s=>s<n?0:s>e?1:t(_c(n,e,s))}function Q1(n,e){n.min=e.min,n.max=e.max}function un(n,e){Q1(n.x,e.x),Q1(n.y,e.y)}function J1(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function eS(n,e,t,s,i){return n-=e,n=gh(n,1/t,s),i!==void 0&&(n=gh(n,1/i,s)),n}function p5(n,e=0,t=1,s=.5,i,a=n,l=n){if(Yn.test(e)&&(e=parseFloat(e),e=Lt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=Lt(a.min,a.max,s);n===a&&(c-=e),n.min=eS(n.min,e,t,c,i),n.max=eS(n.max,e,t,c,i)}function tS(n,e,[t,s,i],a,l){p5(n,e[t],e[s],e[i],e.scale,a,l)}const m5=["x","scaleX","originX"],v5=["y","scaleY","originY"];function sS(n,e,t,s){tS(n.x,e,m5,t?t.x:void 0,s?s.x:void 0),tS(n.y,e,v5,t?t.y:void 0,s?s.y:void 0)}function nS(n){return n.translate===0&&n.scale===1}function RT(n){return nS(n.x)&&nS(n.y)}function iS(n,e){return n.min===e.min&&n.max===e.max}function y5(n,e){return iS(n.x,e.x)&&iS(n.y,e.y)}function rS(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function BT(n,e){return rS(n.x,e.x)&&rS(n.y,e.y)}function aS(n){return Es(n.x)/Es(n.y)}function oS(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class x5{constructor(){this.members=[]}add(e){jv(this.members,e),e.scheduleRender()}remove(e){if(kv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let s;for(let i=t;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function b5(n,e,t){let s="";const i=n.x.translate/e.x,a=n.y.translate/e.y,l=t?.z||0;if((i||a||l)&&(s=`translate3d(${i}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:g,rotateX:m,rotateY:y,skewX:b,skewY:S}=t;h&&(s=`perspective(${h}px) ${s}`),g&&(s+=`rotate(${g}deg) `),m&&(s+=`rotateX(${m}deg) `),y&&(s+=`rotateY(${y}deg) `),b&&(s+=`skewX(${b}deg) `),S&&(s+=`skewY(${S}deg) `)}const c=n.x.scale*e.x,d=n.y.scale*e.y;return(c!==1||d!==1)&&(s+=`scale(${c}, ${d})`),s||"none"}const Bp=["","X","Y","Z"],w5=1e3;let S5=0;function Up(n,e,t,s){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),s&&(s[n]=0))}function UT(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=bT(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Tt,!(i||a))}const{parent:s}=n;s&&!s.hasCheckedOptimisedAppear&&UT(s)}function zT({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(l={},c=e?.()){this.id=S5++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(T5),this.nodes.forEach(M5),this.nodes.forEach(O5),this.nodes.forEach(E5)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new c5)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Lv),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const d=this.eventHandlers.get(l);d&&d.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=rT(l)&&!x3(l),this.instance=l;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),n){let g,m=0;const y=()=>this.root.updateBlockedByResize=!1;Tt.read(()=>{m=window.innerWidth}),n(l,()=>{const b=window.innerWidth;b!==m&&(m=b,this.root.updateBlockedByResize=!0,g&&g(),g=u5(y,250),Jd.hasAnimatedSinceResize&&(Jd.hasAnimatedSinceResize=!1,this.nodes.forEach(uS)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:m,hasRelativeLayoutChanged:y,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||h.getDefaultTransition()||P5,{onLayoutAnimationStart:_,onLayoutAnimationComplete:T}=h.getProps(),C=!this.targetLayout||!BT(this.targetLayout,b),M=!m&&y;if(this.options.layoutRoot||this.resumeFrom||M||m&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const O={...$v(S,"layout"),onPlay:_,onComplete:T};(h.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O),this.setAnimationOrigin(g,M)}else m||uS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),fr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(L5),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&UT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const m=this.path[g];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(lS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(cS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(k5),this.nodes.forEach(_5),this.nodes.forEach(C5)):this.nodes.forEach(cS),this.clearAllSnapshots();const c=Bs.now();fs.delta=Ei(0,1e3/60,c-fs.timestamp),fs.timestamp=c,fs.isProcessing=!0,kp.update.process(fs),kp.preRender.process(fs),kp.render.process(fs),fs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,qv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(j5),this.sharedNodes.forEach(A5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Tt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Tt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Es(this.snapshot.measuredBox.x)&&!Es(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ft(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const d=s(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!RT(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,g=h!==this.prevTransformTemplateValue;l&&this.instance&&(c||Gr(this.latestValues)||g)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return l&&(d=this.removeTransform(d)),R5(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Ft();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(B5))){const{scroll:h}=this.root;h&&(vo(c.x,h.offset.x),vo(c.y,h.offset.y))}return c}removeElementScroll(l){const c=Ft();if(un(c,l),this.scroll?.wasRoot)return c;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:g,options:m}=h;h!==this.root&&g&&m.layoutScroll&&(g.wasRoot&&un(c,l),vo(c.x,g.offset.x),vo(c.y,g.offset.y))}return c}applyTransform(l,c=!1){const d=Ft();un(d,l);for(let h=0;h<this.path.length;h++){const g=this.path[h];!c&&g.options.layoutScroll&&g.scroll&&g!==g.root&&yo(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Gr(g.latestValues)&&yo(d,g.latestValues)}return Gr(this.latestValues)&&yo(d,this.latestValues),d}removeTransform(l){const c=Ft();un(c,l);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!Gr(h.latestValues))continue;Im(h.latestValues)&&h.updateSnapshot();const g=Ft(),m=h.measurePageBox();un(g,m),sS(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,g)}return Gr(this.latestValues)&&sS(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:m}=this.options;if(!(!this.layout||!(g||m))){if(this.resolvedRelativeTargetAt=fs.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ft(),this.relativeTargetOrigin=Ft(),gc(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),un(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ft(),this.targetWithTransforms=Ft()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),FP(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):un(this.target,this.layout.layoutBox),kT(this.target,this.targetDelta)):un(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ft(),this.relativeTargetOrigin=Ft(),gc(this.relativeTargetOrigin,this.target,y.target),un(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Im(this.parent.latestValues)||jT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===fs.timestamp&&(d=!1),d)return;const{layout:h,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||g))return;un(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;VP(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Ft());const{target:b}=l;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(J1(this.prevProjectionDelta.x,this.projectionDelta.x),J1(this.prevProjectionDelta.y,this.projectionDelta.y)),fc(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==y||!oS(this.projectionDelta.x,this.prevProjectionDelta.x)||!oS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=mo(),this.projectionDelta=mo(),this.projectionDeltaWithTransform=mo()}setAnimationOrigin(l,c=!1){const d=this.snapshot,h=d?d.latestValues:{},g={...this.latestValues},m=mo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const y=Ft(),b=d?d.source:void 0,S=this.layout?this.layout.source:void 0,_=b!==S,T=this.getStack(),C=!T||T.members.length<=1,M=!!(_&&!C&&this.options.crossfade===!0&&!this.path.some(N5));this.animationProgress=0;let O;this.mixTargetDelta=L=>{const j=L/1e3;dS(m.x,l.x,j),dS(m.y,l.y,j),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gc(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),D5(this.relativeTarget,this.relativeTargetOrigin,y,j),O&&y5(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=Ft()),un(O,this.relativeTarget)),_&&(this.animationValues=g,h5(g,h,this.latestValues,j,M,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(fr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Tt.update(()=>{Jd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ko(0)),this.currentAnimation=o5(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(w5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:d,layout:h,latestValues:g}=l;if(!(!c||!d||!h)){if(this!==l&&this.layout&&h&&IT(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||Ft();const m=Es(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+m;const y=Es(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+y}un(c,d),yo(c,g),fc(this.projectionDeltaWithTransform,this.layoutCorrected,c,g)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new x5),this.sharedNodes.get(l).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const h={};d.z&&Up("z",l,h,this.animationValues);for(let g=0;g<Bp.length;g++)Up(`rotate${Bp[g]}`,l,h,this.animationValues),Up(`skew${Bp[g]}`,l,h,this.animationValues);l.render();for(const g in h)l.setStaticValue(g,h[g]),this.animationValues&&(this.animationValues[g]=h[g]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Qd(c?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Qd(c?.pointerEvents)||""),this.hasProjected&&!Gr(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=h.animationValues||h.latestValues;this.applyTransformsToTarget();let m=b5(this.projectionDeltaWithTransform,this.treeScale,g);d&&(m=d(g,m)),l.transform=m;const{x:y,y:b}=this.projectionDelta;l.transformOrigin=`${y.origin*100}% ${b.origin*100}% 0`,h.animationValues?l.opacity=h===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=h===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const S in jc){if(g[S]===void 0)continue;const{correct:_,applyTo:T,isCSSVariable:C}=jc[S],M=m==="none"?g[S]:_(g[S],h);if(T){const O=T.length;for(let L=0;L<O;L++)l[T[L]]=M}else C?this.options.visualElement.renderState.vars[S]=M:l[S]=M}this.options.layoutId&&(l.pointerEvents=h===this?Qd(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(lS),this.root.sharedNodes.clear()}}}function _5(n){n.updateLayout()}function C5(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:s}=n.layout,{animationType:i}=n.options,a=e.source!==n.layout.source;i==="size"?hn(g=>{const m=a?e.measuredBox[g]:e.layoutBox[g],y=Es(m);m.min=t[g].min,m.max=m.min+y}):IT(i,e.layoutBox,t)&&hn(g=>{const m=a?e.measuredBox[g]:e.layoutBox[g],y=Es(t[g]);m.max=m.min+y,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+y)});const l=mo();fc(l,t,e.layoutBox);const c=mo();a?fc(c,n.applyTransform(s,!0),e.measuredBox):fc(c,t,e.layoutBox);const d=!RT(l);let h=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:m,layout:y}=g;if(m&&y){const b=Ft();gc(b,e.layoutBox,m.layoutBox);const S=Ft();gc(S,t,y.layoutBox),BT(b,S)||(h=!0),g.options.layoutRoot&&(n.relativeTarget=S,n.relativeTargetOrigin=b,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function T5(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function E5(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function j5(n){n.clearSnapshot()}function lS(n){n.clearMeasurements()}function cS(n){n.isLayoutDirty=!1}function k5(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function uS(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function M5(n){n.resolveTargetDelta()}function O5(n){n.calcProjection()}function L5(n){n.resetSkewAndRotation()}function A5(n){n.removeLeadSnapshot()}function dS(n,e,t){n.translate=Lt(e.translate,0,t),n.scale=Lt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function hS(n,e,t,s){n.min=Lt(e.min,t.min,s),n.max=Lt(e.max,t.max,s)}function D5(n,e,t,s){hS(n.x,e.x,t.x,s),hS(n.y,e.y,t.y,s)}function N5(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const P5={duration:.45,ease:[.4,0,.1,1]},fS=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),gS=fS("applewebkit/")&&!fS("chrome/")?Math.round:pn;function pS(n){n.min=gS(n.min),n.max=gS(n.max)}function R5(n){pS(n.x),pS(n.y)}function IT(n,e,t){return n==="position"||n==="preserve-aspect"&&!IP(aS(e),aS(t),.2)}function B5(n){return n!==n.root&&n.scroll?.wasRoot}const U5=zT({attachResizeListener:(n,e)=>Mc(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),zp={current:void 0},FT=zT({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!zp.current){const n=new U5({});n.mount(window),n.setOptions({layoutScroll:!0}),zp.current=n}return zp.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),z5={pan:{Feature:n5},drag:{Feature:s5,ProjectionNode:FT,MeasureLayout:DT}};function mS(n,e,t){const{props:s}=n;n.animationState&&s.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,a=s[i];a&&Tt.postRender(()=>a(e,$c(e)))}class I5 extends br{mount(){const{current:e}=this.node;e&&(this.unmount=g3(e,(t,s)=>(mS(this.node,s,"Start"),i=>mS(this.node,i,"End"))))}unmount(){}}class F5 extends br{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vc(Mc(this.node.current,"focus",()=>this.onFocus()),Mc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function vS(n,e,t){const{props:s}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&s.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),a=s[i];a&&Tt.postRender(()=>a(e,$c(e)))}class V5 extends br{mount(){const{current:e}=this.node;e&&(this.unmount=y3(e,(t,s)=>(vS(this.node,s,"Start"),(i,{success:a})=>vS(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Hm=new WeakMap,Ip=new WeakMap,H5=n=>{const e=Hm.get(n.target);e&&e(n)},G5=n=>{n.forEach(H5)};function $5({root:n,...e}){const t=n||document;Ip.has(t)||Ip.set(t,{});const s=Ip.get(t),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(G5,{root:n,...e})),s[i]}function Y5(n,e,t){const s=$5(e);return Hm.set(n,t),s.observe(n),()=>{Hm.delete(n),s.unobserve(n)}}const q5={some:0,all:1};class W5 extends br{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:i="some",once:a}=e,l={root:t?t.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:q5[i]},c=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,a&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:g,onViewportLeave:m}=this.node.getProps(),y=h?g:m;y&&y(d)};return Y5(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(X5(e,t))&&this.startObserver()}unmount(){}}function X5({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const K5={inView:{Feature:W5},tap:{Feature:V5},focus:{Feature:F5},hover:{Feature:I5}},Z5={layout:{ProjectionNode:FT,MeasureLayout:DT}},Gm={current:null},VT={current:!1};function Q5(){if(VT.current=!0,!!Ev)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Gm.current=n.matches;n.addEventListener("change",e),e()}else Gm.current=!1}const J5=new WeakMap;function eR(n,e,t){for(const s in e){const i=e[s],a=t[s];if(bs(i))n.addValue(s,i);else if(bs(a))n.addValue(s,ko(i,{owner:n}));else if(a!==i)if(n.hasValue(s)){const l=n.getValue(s);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=n.getStaticValue(s);n.addValue(s,ko(l!==void 0?l:i,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const yS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class tR{scrapeMotionValuesFromProps(e,t,s){return{}}constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:a,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Hv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Bs.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Tt.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=h,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=Yh(t),this.isVariantNode=cT(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...m}=this.scrapeMotionValuesFromProps(t,{},this);for(const y in m){const b=m[y];d[y]!==void 0&&bs(b)&&b.set(d[y],!1)}}mount(e){this.current=e,J5.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,s)=>this.bindToMotionValue(s,t)),VT.current||Q5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Gm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),fr(this.notifyUpdate),fr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Uo.has(e);s&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Tt.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),a(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Mo){const t=Mo[e];if(!t)continue;const{isEnabled:s,Feature:i}=t;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ft()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<yS.length;s++){const i=yS[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,l=e[a];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=eR(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=ko(t===null?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(v2(s)||x2(s))?s=parseFloat(s):!w3(s)&&gr.test(t)&&(s=eT(e,t)),this.setBaseTarget(e,bs(s)?s.get():s)),bs(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let s;if(typeof t=="string"||typeof t=="object"){const a=s0(this.props,t,this.presenceContext?.custom);a&&(s=a[e])}if(t&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!bs(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Lv),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class HT extends tR{constructor(){super(...arguments),this.KeyframeResolver=c3}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;bs(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function GT(n,{style:e,vars:t},s,i){const a=n.style;let l;for(l in e)a[l]=e[l];i?.applyProjectionStyles(a,s);for(l in t)a.setProperty(l,t[l])}function sR(n){return window.getComputedStyle(n)}class nR extends HT{constructor(){super(...arguments),this.type="html",this.renderInstance=GT}readValueFromInstance(e,t){if(Uo.has(t))return this.projection?.isProjecting?Lm(t):k4(e,t);{const s=sR(e),i=(Nv(t)?s.getPropertyValue(t):s[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return MT(e,t)}build(e,t,s){Jv(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return n0(e,t,s)}}const $T=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function iR(n,e,t,s){GT(n,e,void 0,s);for(const i in e.attrs)n.setAttribute($T.has(i)?i:Qv(i),e.attrs[i])}class rR extends HT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ft}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Uo.has(t)){const s=J2(t);return s&&s.default||0}return t=$T.has(t)?t:Qv(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return xT(e,t,s)}build(e,t,s){pT(e,t,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,t,s,i){iR(e,t,s,i)}mount(e){this.isSVGTag=vT(e.tagName),super.mount(e)}}const aR=(n,e)=>t0(n)?new rR(e):new nR(e,{allowProjection:n!==x.Fragment}),oR=aP({...AP,...K5,...z5,...Z5},aR),mi=L3(oR),lR=()=>{const n=Js(),{session:e,userRole:t}=la(),[s,i]=x.useState(!1);return p.jsxs("header",{className:`flex items-center justify-between px-4 md:px-8 w-full h-[14vh] ${t==="admin"?"bg-[#E2D2A2]":"bg-[#AF524D]"}`,children:[p.jsx(os,{to:"/#home",children:p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsxs("div",{className:"w-8 h-8 bg-white rounded-t-lg relative",children:[p.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/3 bg-[#DFAD56]"}),p.jsx("div",{className:"absolute bottom-1/3 left-0 right-0 h-1/3 bg-[#E2D2A2]"}),p.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-0.5 h-3 bg-yellow-400",children:p.jsx("div",{className:"absolute -top-0.5 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-orange-400 rounded-full"})})]}),p.jsxs("div",{className:"text-white font-bold text-xl",children:[p.jsx("span",{className:"text-[#F8E6B4]",children:"Bakery"}),p.jsx("span",{className:"text-white",children:"Bliss"})]})]})}),p.jsx("nav",{className:"hidden md:block",children:p.jsx("ul",{className:"flex space-x-8 font-semibold text-base",children:[...t==="admin"?[{to:"/adminpage",label:"Dashboard"},{to:"/temp",label:"Temp"}]:[{to:"/",label:"Home"},{to:"/cakecustomization",label:"Cake Customization"},{to:"/cakecatalog",label:"Cake Catalog"},{to:"/aboutus",label:"About Us"},{to:"/contactus",label:"Contact Us"}]].map(a=>p.jsxs("li",{className:"relative group",children:[p.jsx(os,{to:a.to,className:`transition-colors duration-300 ${n.pathname===a.to?t==="admin"?"text-[#613C2A]":"text-[#EBD187]":"text-white"}`,children:a.label}),p.jsx("span",{className:"absolute left-0 -bottom-1 h-[2px] w-0 bg-white transition-all duration-300 group-hover:w-full"})]},a.to))})}),p.jsx("button",{className:"md:hidden p-2",onClick:()=>i(!s),"aria-label":"Toggle mobile menu",children:p.jsxs("div",{className:"w-6 h-6 flex flex-col justify-center items-center",children:[p.jsx("span",{className:`block w-5 h-0.5 bg-white transition-all duration-300 ${s?"rotate-45 translate-y-1":"-translate-y-1"}`}),p.jsx("span",{className:`block w-5 h-0.5 bg-white transition-all duration-300 ${s?"opacity-0":"opacity-100"}`}),p.jsx("span",{className:`block w-5 h-0.5 bg-white transition-all duration-300 ${s?"-rotate-45 -translate-y-1":"translate-y-1"}`})]})}),p.jsx("div",{className:`absolute top-full left-0 w-full ${t==="admin"?"bg-[#E2D2A2]":"bg-[#AF524D]"} shadow-lg transition-all duration-300 md:hidden ${s?"opacity-100 visible":"opacity-0 invisible"}`,children:p.jsx("nav",{className:"px-4 py-4",children:p.jsx("ul",{className:"space-y-4 font-semibold text-base",children:[...t==="admin"?[{to:"/adminpage",label:"Dashboard"},{to:"/temp",label:"Temp"}]:[{to:"/",label:"Home"},{to:"/cakecustomization",label:"Cake Customization"},{to:"/cakecatalog",label:"Cake Catalog"},{to:"/aboutus",label:"About Us"},{to:"/contactus",label:"Contact Us"}]].map(a=>p.jsx("li",{children:p.jsx(os,{to:a.to,className:`block py-2 transition-colors duration-300 ${n.pathname===a.to?t==="admin"?"text-[#613C2A]":"text-[#EBD187]":"text-white"}`,onClick:()=>i(!1),children:a.label})},a.to))})})}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx(os,{to:t==="admin"?"/admin/profile":"/profile",className:"h-12 w-12",children:p.jsx("img",{src:"/Profile Icon.png",alt:"Profile",className:"w-full h-full"})}),t!=="admin"&&p.jsx(os,{to:"/cart",className:"h-12 w-12",children:p.jsx("img",{src:"/Cart.png",alt:"Cart",className:"w-full h-full"})})]})]})},cR=()=>p.jsxs("footer",{className:"bg-[#381914] h-fit p-8 flex justify-between flex-wrap text-[#F8E6B4]",children:[p.jsx("div",{className:"w-full sm:w-auto mb-6 sm:mb-0",children:p.jsx(os,{to:"/#home",children:p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsxs("div",{className:"w-8 h-8 bg-[#F8E6B4] rounded-full relative",children:[p.jsx("div",{className:"absolute inset-1 bg-[#8B4513] rounded-full"}),p.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-2 h-1 bg-[#8B4513] rounded-t-full"}),p.jsx("div",{className:"absolute top-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-[#F8E6B4] rounded-full"})]}),p.jsxs("div",{className:"text-[#F8E6B4] font-bold text-xl",children:[p.jsx("span",{className:"text-[#AF524D]",children:"Connie"}),p.jsx("span",{className:"text-[#F8E6B4]",children:" de Cafe"})]})]})})}),p.jsxs("div",{className:"w-full sm:w-auto mb-6 sm:mb-0",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"Contact Us"}),p.jsx("p",{children:"📞 +63 912 345 6789"}),p.jsx("p",{children:"✉️ conniescakemall@gmail.com"}),p.jsx("p",{children:"📍 Dumaguete City, Philippines"}),p.jsx("p",{className:"mt-4 font-semibold",children:"Follow Us:"}),p.jsxs("div",{className:"flex gap-3 mt-2",children:[p.jsx("a",{href:"https://www.facebook.com/connies.cakemall",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",children:p.jsx("img",{src:"/fb_icon.png",alt:"Facebook",className:"w-6 h-6"})}),p.jsx("a",{href:"https://www.instagram.com/conniescakemall?igsh=MXNiNjUwdjVlNW5uaA==",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",children:p.jsx("img",{src:"/ig_icon.png",alt:"Instagram",className:"w-6 h-6"})})]})]}),p.jsxs("div",{className:"w-full sm:w-auto mb-6 sm:mb-0",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"Quick Links"}),p.jsxs("ul",{className:"space-y-1",children:[p.jsx("li",{children:p.jsx(os,{to:"/cakes",className:"hover:text-[#AF524D] transition-colors",children:"Our Cakes"})}),p.jsx("li",{children:p.jsx(os,{to:"/aboutus",className:"hover:text-[#AF524D] transition-colors",children:"About Us"})}),p.jsx("li",{children:p.jsx(os,{to:"/contact",className:"hover:text-[#AF524D] transition-colors",children:"Contact"})})]})]}),p.jsxs("div",{className:"w-full sm:w-auto",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"Legal"}),p.jsxs("ul",{className:"space-y-1",children:[p.jsx("li",{children:p.jsx(os,{to:"/terms",className:"hover:text-[#AF524D] transition-colors",children:"Terms & Conditions"})}),p.jsx("li",{children:p.jsx(os,{to:"/privacy",className:"hover:text-[#AF524D] transition-colors",children:"Privacy Policy"})}),p.jsx("li",{children:p.jsx(os,{to:"/aboutus",className:"hover:text-[#AF524D] transition-colors",children:"Location"})})]})]})]}),Xs=({children:n})=>p.jsx(mi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5,ease:"easeInOut"},children:n}),uR=()=>{const[n,e]=x.useState(""),[t,s]=x.useState(""),[i,a]=x.useState(""),[l,c]=x.useState(""),[d,h]=x.useState(""),[g,m]=x.useState(""),[y,b]=x.useState(!1),[S,_]=x.useState(""),[T,C]=x.useState(!1),[M,O]=x.useState(!1),{signUpNewUser:L,signUpWithGoogle:j}=la(),D=vr(),k={length:g.length>=6,uppercase:/[A-Z]/.test(g),lowercase:/[a-z]/.test(g),number:/[0-9]/.test(g),special:/[!@#$%^&*(),.?":{}|<>]/.test(g)},B=I=>{const F=I.target.value;m(F),C(F.length>0)},P=async()=>{if(!y){b(!0),_("");try{const I=await j();I.success?_e.success("Redirecting to Google..."):(_(I.error),_e.error(I.error))}catch(I){_("An unexpected error occurred"),_e.error("An unexpected error occurred"),console.error(I)}finally{b(!1)}}},z=async I=>{if(I.preventDefault(),y)return;b(!0),_("");const F=/[A-Z]/.test(g),ee=/[a-z]/.test(g),X=/[0-9]/.test(g),ae=/[!@#$%^&*(),.?":{}|<>]/.test(g);if(!(g.length>=6)){_("Password must be at least 6 characters long"),_e.error("Password too short. Please use at least 6 characters."),b(!1);return}if(!F){_("Password must contain at least one capital letter"),_e.error("Password must contain at least one capital letter."),b(!1);return}if(!ee){_("Password must contain at least one lowercase letter"),_e.error("Password must contain at least one lowercase letter."),b(!1);return}if(!X){_("Password must contain at least one number"),_e.error("Password must contain at least one number."),b(!1);return}if(!ae){_('Password must contain at least one special character (!@#$%^&*(),.?":{}|<>)'),_e.error("Password must contain at least one special character."),b(!1);return}try{const V=await L(l,g,n,t,i,d);V.success?(_e.success("Account created successfully! Welcome to Bakery Bliss!"),V.userRole==="admin"?(D("/adminpage"),setTimeout(()=>window.scrollTo(0,0),100)):(D("/"),window.scrollTo(0,0))):(_(V.error.message),_e.error(V.error.message))}catch(V){_("An unexpected error occurred"),_e.error("An unexpected error occurred"),console.error(V)}finally{b(!1)}};return p.jsx("div",{className:"bg-[url('/Background.png')] bg-cover bg-top min-h-screen w-full flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#52514B_100%)] flex items-center justify-center gap-6 md:gap-10 flex-col w-full max-w-lg sm:max-w-xl md:max-w-2xl lg:max-w-3xl h-auto py-8 md:py-12 px-6 md:px-10 rounded-3xl md:rounded-[2rem] shadow-2xl",children:[p.jsxs("div",{className:"text-center mb-2",children:[p.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-2",children:"Register Now!"}),p.jsx("p",{className:"text-sm md:text-base text-gray-600",children:"Please enter your details below"})]}),p.jsxs("form",{onSubmit:z,className:"flex flex-col space-y-8 w-full",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Personal Information"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:["First Name ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{className:"w-full bg-white text-gray-900 rounded-lg px-4 py-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-all duration-200",type:"text",id:"firstName",required:!0,value:n,onChange:I=>e(I.target.value),placeholder:"Enter your first name"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:["Last Name ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{className:"w-full bg-white text-gray-900 rounded-lg px-4 py-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-all duration-200",type:"text",id:"lastName",required:!0,value:t,onChange:I=>s(I.target.value),placeholder:"Enter your last name"})]})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Account Information"}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:["Email Address ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{className:"w-full bg-white text-gray-900 rounded-lg px-4 py-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-all duration-200",type:"email",id:"email",required:!0,value:l,onChange:I=>c(I.target.value),placeholder:"Enter your email address"}),p.jsx("p",{className:"text-xs text-gray-600",children:"We'll use this to send you order confirmations and updates"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:["Username ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{className:"w-full bg-white text-gray-900 rounded-lg px-4 py-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-all duration-200",type:"text",id:"username",required:!0,value:i,onChange:I=>a(I.target.value),placeholder:"Choose a unique username"})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),p.jsx("input",{className:"w-full bg-white text-gray-900 rounded-lg px-4 py-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-all duration-200",type:"tel",id:"phoneNumber",placeholder:"Enter your phone number",value:d,onChange:I=>h(I.target.value)}),p.jsx("p",{className:"text-xs text-gray-600",children:"Optional - for delivery updates and order notifications"})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Security"}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:["Password ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsxs("div",{className:"relative mb-4",children:[p.jsx("input",{className:"w-full bg-white text-gray-900 rounded-lg px-4 py-3 pr-12 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-all duration-200",type:M?"text":"password",id:"password",required:!0,minLength:6,value:g,onChange:B,onFocus:()=>C(g.length>0),onBlur:()=>C(!1),placeholder:"Create a strong password"}),p.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-500 hover:text-gray-700 transition-colors duration-200",onClick:()=>O(!M),children:M?p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):p.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),T&&p.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-xl p-4 z-20 w-fit",children:[p.jsx("div",{className:"text-sm font-medium text-gray-800 mb-3",children:"Password Requirements:"}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:`flex items-center text-sm ${k.length?"text-green-600":"text-red-500"}`,children:[p.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${k.length?"bg-green-500":"bg-red-500"}`}),"At least 6 characters"]}),p.jsxs("div",{className:`flex items-center text-sm ${k.uppercase?"text-green-600":"text-red-500"}`,children:[p.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${k.uppercase?"bg-green-500":"bg-red-500"}`}),"One capital letter (A-Z)"]}),p.jsxs("div",{className:`flex items-center text-sm ${k.lowercase?"text-green-600":"text-red-500"}`,children:[p.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${k.lowercase?"bg-green-500":"bg-red-500"}`}),"One lowercase letter (a-z)"]}),p.jsxs("div",{className:`flex items-center text-sm ${k.number?"text-green-600":"text-red-500"}`,children:[p.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${k.number?"bg-green-500":"bg-red-500"}`}),"One number (0-9)"]}),p.jsxs("div",{className:`flex items-center text-sm ${k.special?"text-green-600":"text-red-500"}`,children:[p.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${k.special?"bg-green-500":"bg-red-500"}`}),"One special character (!@#$%^&*)"]})]})]})]}),p.jsx("p",{className:"text-xs text-gray-900",children:"Password must be at least 6 characters with uppercase, lowercase, number, and special character"})]})]}),p.jsxs("div",{className:"pt-6 space-y-4",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-300"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-2 bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#52514B_100%)] text-gray-500",children:"Or continue with"})})]}),p.jsxs("button",{type:"button",onClick:P,disabled:y,className:"w-full flex items-center justify-center gap-3 bg-white text-gray-700 font-semibold py-4 px-6 rounded-xl cursor-pointer transition-all duration-300 hover:bg-gray-50 border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed text-base shadow-lg",children:[p.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[p.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),y?"Connecting...":"Continue with Google"]}),p.jsx("button",{type:"submit",disabled:y,className:"w-full bg-[#AF524D] text-white font-semibold py-4 px-6 rounded-xl cursor-pointer transition-all duration-300 hover:bg-[#8B3D3A] focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed text-base shadow-lg hover:shadow-xl",children:y?p.jsxs("div",{className:"flex items-center justify-center",children:[p.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):"Create Account"})]})]})]})})},dR=()=>p.jsx("section",{className:"bg-[url('/Hero.png')] bg-cover bg-center w-full h-[120vh] flex items-center justify-start",id:"home",children:p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-15 max-w-2xl w-full px-8",children:[p.jsx("h1",{className:"text-[#EBD187] text-8xl font-abhaya ",children:"Connie de Café"}),p.jsx("p",{className:"font-bold text-white/76 text-3xl",children:"Where every slice begins with your imagination"}),p.jsx("div",{className:"flex items-center justify-center mt-20",children:p.jsxs("div",{className:"group relative flex items-center space-x-4",children:[p.jsx(mi.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.3,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"bg-gradient-to-r from-white/60 to-transparent text-white px-6 py-4 rounded-full hover:bg-[#FFECB5] hover:text-gray-800 transition duration-300 tracking-widest text-2xl font-bold shadow-md",children:"Customize Now"}),p.jsx("img",{src:"/g_arrow.png",alt:"arrow",className:`
                absolute 
                left-full 
                top-[120%]
                translate-y-0
                opacity-0 
                group-hover:top-1/2 
                group-hover:-translate-y-1/2
                group-hover:opacity-100 
                transition-all 
                duration-500 
                ease-in-out 
                ml-2
              `})]})})]})}),hR=()=>p.jsx("div",{className:"bg-[linear-gradient(to_bottom,_#F2EFE8_0%,_#DFDAC7_51%,_#A8A599_100%)] h-auto py-20",children:p.jsxs("section",{className:"flex flex-col items-center text-center px-4 py-16",children:[p.jsx("h2",{className:"text-2xl md:text-5xl font-bold tracking-widest py-10 pb-30",children:"How to create your cake?"}),p.jsxs("p",{className:"max-w-2xl text-gray-700 mb-12 text-base md:text-3xl text-left",children:["Connie de Cafe's got you covered! With our drag-and-drop customization tool, you can bring your cake ideas to life — and see the magic happen in ",p.jsx("span",{className:"font-bold",children:"REAL TIME!"})]}),p.jsxs("div",{className:"relative w-full max-w-4xl p-11",children:[p.jsx("img",{src:"/Section 3.png",alt:"Cake",className:"w-full mx-auto"}),p.jsxs(mi.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute top-[18%] left-[0%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-xs w-auto text-left bg-gradient-to-r from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#82171C] backdrop-filter backdrop-blur-[2px] font-semibold",children:["Add Frosting ",p.jsx("br",{}),"& Fillings"]}),p.jsxs(mi.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute top-[10%] right-[5%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-xs w-auto text-left bg-gradient-to-l from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#82171C] backdrop-filter backdrop-blur-[2px] font-semibold",children:["Add Decorations ",p.jsx("br",{}),"& Toppings"]}),p.jsxs(mi.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute top-[42%] left-[-8%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-fit w-auto text-left bg-gradient-to-r from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#DFAD56]/53 backdrop-filter backdrop-blur-[2px] font-semibold",children:["Choose Cake ",p.jsx("br",{}),"Flavor"]}),p.jsxs(mi.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute top-[42%] right-[-8%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-fit w-auto text-left bg-gradient-to-l from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#DFAD56]/53 transition-transform hover:scale-115 duration-600 delay-100 backdrop-filter backdrop-blur-[2px] font-semibold",children:["Choose Cake ",p.jsx("br",{}),"Layers"]}),p.jsxs(mi.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute bottom-[20%] left-[-7%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-fit w-auto text-left bg-gradient-to-r from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#DFAD56]/53 transition-transform hover:scale-115 duration-600 delay-100 backdrop-filter backdrop-blur-[2px] font-semibold",children:["Choose Cake ",p.jsx("br",{}),"Shape"]}),p.jsxs(mi.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute bottom-[20%] right-[-12%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-fit w-auto text-left bg-gradient-to-l from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#DFAD56]/53 transition-transform hover:scale-115 duration-600 delay-100 backdrop-filter backdrop-blur-[2px] font-semibold",children:["Choose Cake ",p.jsx("br",{}),"Size"]})]})]})}),fR=()=>p.jsx("section",{className:"bg-[url('/Section3.png')] bg-cover bg-center w-full h-[120vh] py-20 flex items-center justify-end",children:p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-15 max-w-4xl w-full px-8",children:[p.jsx("h1",{className:"text-[#381914] text-8xl font-abhaya",children:"Our Cake Collection"}),p.jsx("p",{className:"font-bold text-white/76 text-3xl",children:"Not in the Mood to Customize? Choose from our pre-designed cake collection."}),p.jsx("div",{className:"flex items-center justify-center mt-20",children:p.jsxs("div",{className:"group relative flex items-center space-x-4",children:[p.jsx(os,{to:"/cakecatalog",className:"block",children:p.jsx(mi.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.3,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"bg-gradient-to-r from-white/60 to-transparent text-white px-6 py-4 rounded-full hover:bg-[#82171C] hover:text-gray-600 transition duration-300 tracking-widest text-2xl font-bold shadow-md cursor-pointer",children:"Explore"})}),p.jsx("img",{src:"/r_arrow.png",alt:"arrow",className:`
                absolute 
                right-full 
                top-[120%]
                translate-y-0
                opacity-0 
                group-hover:top-1/2 
                group-hover:-translate-y-1/2
                group-hover:opacity-100 
                transition-all 
                duration-500 
                ease-in-out 
                ml-2
              `})]})})]})}),gR=()=>p.jsxs(p.Fragment,{children:[p.jsx(dR,{}),p.jsx(hR,{}),p.jsx(fR,{})]}),pR=()=>{const[n,e]=x.useState(""),[t,s]=x.useState(""),[i,a]=x.useState(!1),[l,c]=x.useState(""),[d,h]=x.useState(!1),[g,m]=x.useState(!1),[y,b]=x.useState(""),[S,_]=x.useState(!1),[T,C]=x.useState(""),{session:M,signInUser:O,signInOrUpWithGoogle:L,resetPassword:j}=la(),D=vr(),k=async()=>{if(!i){a(!0),c("");try{const z=await L();z.success?_e.success("Redirecting to Google..."):(c(z.error),_e.error(z.error))}catch(z){c("An unexpected error occurred"),_e.error("An unexpected error occurred"),console.error(z)}finally{a(!1)}}},B=async z=>{if(z.preventDefault(),!i){a(!0),c("");try{const I=await O({email:n,password:t});I.success?(_e.success("Login successful!"),D("/redirect"),setTimeout(()=>window.scrollTo(0,0),100)):(c(I.error),_e.error(I.error))}catch(I){c("An unexpected error occurred"),_e.error("An unexpected error occurred"),console.error(I)}finally{a(!1)}}},P=async z=>{z.preventDefault(),_(!0),C(""),c("");try{const I=await j(y);I.success?(C(I.message),_e.success(I.message),b(""),setTimeout(()=>{m(!1),C("")},3e3)):(c(I.error),_e.error(I.error))}catch(I){c("An unexpected error occurred"),_e.error("An unexpected error occurred"),console.error(I)}finally{_(!1)}};return p.jsxs("div",{className:"bg-[url('/Background.png')] bg-cover bg-top min-h-screen w-full flex items-center justify-center p-4",children:[p.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#52514B_100%)] flex items-center justify-center gap-6 md:gap-10 flex-col w-full max-w-sm sm:max-w-md md:max-w-lg h-auto py-6 md:py-10 px-4 md:px-8 rounded-2xl md:rounded-3xl shadow-lg",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Welcome back!"}),p.jsx("p",{className:"text-xs md:text-sm mt-1",children:"Please enter your details below"})]}),p.jsxs("form",{onSubmit:B,className:"flex flex-col space-y-3 md:space-y-4 w-full",children:[p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"email",className:"text-sm md:text-base",children:["Email: ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{className:"w-full bg-white text-black rounded-md px-2 py-1 md:py-2 border border-black-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] text-sm md:text-base",type:"email",id:"email",required:!0,value:n,onChange:z=>e(z.target.value)})]}),p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"password",className:"text-sm md:text-base",children:["Password: ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{className:"w-full bg-white text-black rounded-md px-2 py-1 md:py-2 pr-10 border border-black-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] text-sm md:text-base",type:d?"text":"password",id:"password",required:!0,value:t,onChange:z=>s(z.target.value)}),p.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>h(!d),children:d?p.jsx("svg",{className:"h-4 w-4 md:h-5 md:w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):p.jsxs("svg",{className:"h-4 w-4 md:h-5 md:w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx("input",{className:"w-auto bg-white text-black rounded-3xl px-1 py-1/2 border border-black-300 focus:outline-none",type:"checkbox",id:"rememberMe"}),p.jsx("label",{className:"cursor-pointer text-sm md:text-base",htmlFor:"rememberMe",children:"Remember me"})]}),p.jsx("button",{type:"button",onClick:()=>m(!0),className:"cursor-pointer hover:underline hover:text-[#82171C] text-xs md:text-sm transition ease-in-out hover:font-semibold self-start sm:self-auto",children:"Forgot password?"})]}),p.jsxs("div",{className:"flex flex-col space-y-3 md:space-y-4",children:[p.jsx("button",{type:"submit",disabled:i,className:"bg-[#82171C] text-white font-bold px-4 md:px-6 py-2 md:py-3 rounded-md cursor-pointer transition ease-in-out delay-100 hover:bg-[#FFECB5] hover:text-gray-800 duration-300 tracking-wide w-full disabled:opacity-50 disabled:cursor-not-allowed text-sm md:text-base",children:i?"Logging in...":"LOGIN"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-300"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-2 bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#52514B_100%)] text-gray-500",children:"Or continue with"})})]}),p.jsxs("button",{type:"button",onClick:k,disabled:i,className:"flex items-center justify-center gap-3 bg-white text-gray-700 font-semibold px-4 md:px-6 py-2 md:py-3 rounded-md cursor-pointer transition ease-in-out delay-100 hover:bg-gray-50 border-2 border-gray-300 duration-300 tracking-wide w-full disabled:opacity-50 disabled:cursor-not-allowed text-sm md:text-base",children:[p.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[p.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),i?"Connecting...":"Continue with Google"]}),p.jsx("hr",{}),p.jsx(os,{className:"bg-[#DFAD56]/80 text-white font-bold px-4 md:px-6 py-2 md:py-3 rounded-md cursor-pointer transition ease-in-out delay-100 hover:bg-[#FFECB5] hover:text-gray-800 duration-300 tracking-wide w-full text-center text-sm md:text-base",to:"/signup",children:"SIGN UP"})]})]})]}),g&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-lg p-4 md:p-6 w-full max-w-sm md:w-96 md:max-w-md border-4 border-[#AF524D] shadow-2xl",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-base md:text-lg font-semibold text-[#381914]",children:"Reset Password"}),p.jsx("button",{onClick:()=>{m(!1),b(""),C(""),c("")},className:"text-gray-500 hover:text-gray-700 text-xl font-bold cursor-pointer",children:"×"})]}),p.jsx("p",{className:"text-xs md:text-sm text-gray-600 mb-4",children:"Enter your email address and we'll send you a link to reset your password."}),p.jsxs("form",{onSubmit:P,className:"space-y-3 md:space-y-4",children:[p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"resetEmail",className:"block text-xs md:text-sm font-medium text-gray-700",children:["Email: ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{type:"email",id:"resetEmail",required:!0,value:y,onChange:z=>b(z.target.value),className:"w-full bg-white text-black rounded-md px-2 md:px-3 py-1 md:py-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent text-sm md:text-base",placeholder:"Enter your email"})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:gap-3",children:[p.jsx("button",{type:"button",onClick:()=>{m(!1),b(""),C(""),c("")},className:"px-3 md:px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm md:text-base",children:"Cancel"}),p.jsx("button",{type:"submit",disabled:S,className:"px-3 md:px-4 py-2 bg-[#AF524D] text-white rounded-lg hover:bg-[#8B3D3A] transition-colors disabled:opacity-50 text-sm md:text-base",children:S?"Sending...":"Send Reset Link"})]})]})]})})]})},mR=()=>{const[n,e]=x.useState(""),[t,s]=x.useState(""),[i,a]=x.useState(!1),[l,c]=x.useState(""),[d,h]=x.useState(""),[g,m]=x.useState(!1),y=vr();x.useEffect(()=>{(async()=>{try{const C=window.location.hash,M=new URLSearchParams(window.location.search);console.log("ResetPassword: Checking session and URL params"),console.log("Hash:",C),console.log("Search params:",M.toString()),console.log("Full URL:",window.location.href);const{data:{session:O}}=await Ce.auth.getSession();if(console.log("Session found:",!!O),O)console.log("Valid session found, user can reset password"),m(!0),c("Please enter your new password");else if(C&&(C.includes("access_token")||C.includes("refresh_token"))){console.log("Tokens found in URL hash, attempting to get session");try{const{data:L,error:j}=await Ce.auth.getSession();if(L.session)console.log("Session created from URL tokens"),m(!0),c("Please enter your new password");else{console.error("Failed to create session from tokens:",j),console.log("Attempting manual session recovery...");try{const D=new URLSearchParams(C.substring(1)),k=D.get("access_token"),B=D.get("refresh_token");if(k){console.log("Found access token, attempting to set session");const{data:P,error:z}=await Ce.auth.setSession({access_token:k,refresh_token:B});P.session?(console.log("Manual session recovery successful"),m(!0),c("Please enter your new password")):(console.error("Manual session recovery failed:",z),h("Failed to validate reset link. Please try again."),_e.error("Invalid reset link. Please try again."))}else h("Failed to validate reset link. Please try again."),_e.error("Invalid reset link. Please try again.")}catch(D){console.error("Manual recovery error:",D),h("Failed to validate reset link. Please try again."),_e.error("Invalid reset link. Please try again.")}}}catch(L){console.error("Error recovering session:",L),h("Failed to validate reset link. Please try again."),_e.error("Invalid reset link. Please try again.")}}else if(M.has("access_token")||M.has("refresh_token")){console.log("Tokens found in search params, attempting to get session");const{data:L,error:j}=await Ce.auth.getSession();if(L.session)console.log("Session created from search params"),m(!0),c("Please enter your new password");else{console.error("Failed to create session from search params:",j),console.log("Attempting manual session recovery from search params...");try{const D=M.get("access_token"),k=M.get("refresh_token");if(D){console.log("Found access token in search params, attempting to set session");const{data:B,error:P}=await Ce.auth.setSession({access_token:D,refresh_token:k});B.session?(console.log("Manual session recovery from search params successful"),m(!0),c("Please enter your new password")):(console.error("Manual session recovery from search params failed:",P),h("Failed to validate reset link. Please try again."),_e.error("Invalid reset link. Please try again."))}else h("Failed to validate reset link. Please try again."),_e.error("Invalid reset link. Please try again.")}catch(D){console.error("Manual recovery from search params error:",D),h("Failed to validate reset link. Please try again."),_e.error("Invalid reset link. Please try again.")}}}else console.log("No valid session or tokens found"),h("This reset link is invalid or has expired. Please request a new password reset from the login page."),_e.error("Invalid reset link. Please try again.")}catch(C){console.error("Error checking session:",C),h("An error occurred while validating the reset link. Please try again."),_e.error("Error validating reset link. Please try again.")}})();const{data:{subscription:T}}=Ce.auth.onAuthStateChange((C,M)=>{console.log("Auth state change:",C,!!M),(C==="PASSWORD_RECOVERY"||C==="SIGNED_IN")&&M&&(console.log("Session established from auth state change"),m(!0),c("Please enter your new password"),h(""))});return()=>T?.unsubscribe()},[]);const b=async _=>{_.preventDefault(),a(!0),h(""),c("");const T=/[A-Z]/.test(n),C=/[a-z]/.test(n),M=/[!@#$%^&*(),.?":{}|<>]/.test(n);if(!(n.length>=6)){h("Password must be at least 6 characters long"),_e.error("Password too short. Please use at least 6 characters."),a(!1);return}if(!T){h("Password must contain at least one capital letter"),_e.error("Password must contain at least one capital letter."),a(!1);return}if(!C){h("Password must contain at least one lowercase letter"),_e.error("Password must contain at least one lowercase letter."),a(!1);return}if(!M){h('Password must contain at least one special character (!@#$%^&*(),.?":{}|<>)'),_e.error("Password must contain at least one special character."),a(!1);return}if(n!==t){h("Passwords do not match"),_e.error("Passwords do not match. Please try again."),a(!1);return}try{const{data:L,error:j}=await Ce.auth.updateUser({password:n});if(j){const D=j.message.includes("JWT")?"This reset link has expired. Please request a new password reset.":j.message;h(D),_e.error("Failed to update password. Please try again.")}else c("Password updated successfully! Redirecting to login..."),_e.success("Password updated successfully!"),e(""),s(""),await Ce.auth.signOut(),setTimeout(()=>{y("/login"),setTimeout(()=>window.scrollTo(0,0),100)},2e3)}catch(L){h("An unexpected error occurred. Please try again."),_e.error("Something went wrong. Please try again."),console.error(L)}finally{a(!1)}},S=()=>{y("/login"),setTimeout(()=>window.scrollTo(0,0),100)};return g?p.jsx("div",{className:"bg-[url('/Background.png')] bg-cover bg-center h-screen w-full flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#52514B_100%)] flex items-center justify-center flex-col max-w-md w-full rounded-3xl shadow-2xl p-8",children:[p.jsxs("div",{className:"text-center w-full mb-6",children:[p.jsx("div",{className:"mb-4",children:p.jsx("svg",{className:"w-16 h-16 text-[#AF524D] mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),p.jsx("h1",{className:"text-3xl font-bold text-[#381914] mb-2",children:"Reset Your Password"}),p.jsx("p",{className:"text-sm text-gray-600",children:"Enter your new password below"})]}),p.jsxs("form",{onSubmit:b,className:"flex flex-col space-y-5 w-full",children:[p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:["New Password: ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{type:"password",id:"newPassword",required:!0,minLength:6,value:n,onChange:_=>e(_.target.value),className:"w-full bg-white text-black rounded-md px-4 py-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-colors",placeholder:"Enter new password"}),p.jsx("p",{className:"text-xs text-gray-300 mt-2",children:"New password must be 6 characters"})]}),p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirm Password: ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{type:"password",id:"confirmPassword",required:!0,value:t,onChange:_=>s(_.target.value),className:"w-full bg-white text-black rounded-md px-4 py-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-colors",placeholder:"Confirm new password"})]}),p.jsxs("div",{className:"flex flex-col space-y-3 pt-2",children:[p.jsx("button",{type:"submit",disabled:i,className:"bg-[#82171C] text-white font-bold px-6 py-3 rounded-md cursor-pointer transition ease-in-out delay-100 hover:bg-[#FFECB5] hover:text-gray-800 duration-300 tracking-wide w-full disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:i?p.jsxs(p.Fragment,{children:[p.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating Password..."]}):"Update Password"}),p.jsx("button",{type:"button",onClick:S,className:"bg-gray-500 text-white font-bold px-6 py-3 rounded-md cursor-pointer transition ease-in-out delay-100 hover:bg-gray-600 duration-300 tracking-wide w-full",children:"Back to Login"})]})]})]})}):p.jsx("div",{className:"bg-[url('/Background.png')] bg-cover bg-center h-screen w-full flex items-center justify-center p-4",children:p.jsx("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#52514B_100%)] flex items-center justify-center flex-col max-w-md w-full rounded-3xl shadow-2xl p-8",children:p.jsxs("div",{className:"text-center w-full",children:[p.jsx("div",{className:"mb-6",children:p.jsx("svg",{className:"w-20 h-20 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),p.jsx("h1",{className:"text-2xl font-bold text-[#381914] mb-4",children:"Invalid Reset Link"}),p.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed text-sm",children:d}),p.jsx("button",{onClick:S,className:"bg-[#82171C] text-white font-bold px-8 py-3 rounded-md cursor-pointer transition ease-in-out delay-100 hover:bg-[#FFECB5] hover:text-gray-800 duration-300 tracking-wide w-full",children:"Back to Login"})]})})})};function Oc(n){"@babel/helpers - typeof";return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oc(n)}function vR(n,e){if(Oc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e);if(Oc(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function yR(n){var e=vR(n,"string");return Oc(e)=="symbol"?e:e+""}function ue(n,e,t){return(e=yR(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Fp,xS;function xR(){if(xS)return Fp;xS=1;var n=function(t,s,i,a,l,c,d,h){if(!t){var g;if(s===void 0)g=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var m=[i,a,l,c,d,h],y=0;g=new Error(s.replace(/%s/g,function(){return m[y++]})),g.name="Invariant Violation"}throw g.framesToPop=1,g}};return Fp=n,Fp}var bR=xR(),Jt=YT(bR),$e=x.createContext(null);function wR(){Jt(!!x.useContext,"useGoogleMap is React hook and requires React version 16.8+");var n=x.useContext($e);return Jt(!!n,"useGoogleMap needs a GoogleMap available up in the tree"),n}function SR(n,e,t){return Object.keys(n).reduce(function(i,a){return e(i,n[a],a)},t)}function _R(n,e){Object.keys(n).forEach(t=>e(n[t],t))}function CR(n,e,t,s){var i={},a=(l,c)=>{var d=t[c];d!==e[c]&&(i[c]=d,l(s,d))};return _R(n,a),i}function TR(n,e,t){var s=SR(t,function(a,l,c){return typeof n[c]=="function"&&a.push(google.maps.event.addListener(e,l,n[c])),a},[]);return s}function ER(n){google.maps.event.removeListener(n)}function tt(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];n.forEach(ER)}function Ke(n){var{updaterMap:e,eventMap:t,prevProps:s,nextProps:i,instance:a}=n,l=TR(i,a,t);return CR(e,s,i,a),l}var bS={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},wS={extraMapTypes(n,e){e.forEach(function(s,i){n.mapTypes.set(String(i),s)})},center(n,e){n.setCenter(e)},clickableIcons(n,e){n.setClickableIcons(e)},heading(n,e){n.setHeading(e)},mapTypeId(n,e){n.setMapTypeId(e)},options(n,e){n.setOptions(e)},streetView(n,e){n.setStreetView(e)},tilt(n,e){n.setTilt(e)},zoom(n,e){n.setZoom(e)}};function jR(n){var{children:e,options:t,id:s,mapContainerStyle:i,mapContainerClassName:a,center:l,onClick:c,onDblClick:d,onDrag:h,onDragEnd:g,onDragStart:m,onMouseMove:y,onMouseOut:b,onMouseOver:S,onMouseDown:_,onMouseUp:T,onRightClick:C,onCenterChanged:M,onLoad:O,onUnmount:L}=n,[j,D]=x.useState(null),k=x.useRef(null),[B,P]=x.useState(null),[z,I]=x.useState(null),[F,ee]=x.useState(null),[X,ae]=x.useState(null),[R,V]=x.useState(null),[K,te]=x.useState(null),[N,q]=x.useState(null),[de,ne]=x.useState(null),[ve,Q]=x.useState(null),[Se,Oe]=x.useState(null),[Te,Ie]=x.useState(null),[oe,xe]=x.useState(null);return x.useEffect(()=>{t&&j!==null&&j.setOptions(t)},[j,t]),x.useEffect(()=>{j!==null&&typeof l<"u"&&j.setCenter(l)},[j,l]),x.useEffect(()=>{j&&d&&(z!==null&&google.maps.event.removeListener(z),I(google.maps.event.addListener(j,"dblclick",d)))},[d]),x.useEffect(()=>{j&&g&&(F!==null&&google.maps.event.removeListener(F),ee(google.maps.event.addListener(j,"dragend",g)))},[g]),x.useEffect(()=>{j&&m&&(X!==null&&google.maps.event.removeListener(X),ae(google.maps.event.addListener(j,"dragstart",m)))},[m]),x.useEffect(()=>{j&&_&&(R!==null&&google.maps.event.removeListener(R),V(google.maps.event.addListener(j,"mousedown",_)))},[_]),x.useEffect(()=>{j&&y&&(K!==null&&google.maps.event.removeListener(K),te(google.maps.event.addListener(j,"mousemove",y)))},[y]),x.useEffect(()=>{j&&b&&(N!==null&&google.maps.event.removeListener(N),q(google.maps.event.addListener(j,"mouseout",b)))},[b]),x.useEffect(()=>{j&&S&&(de!==null&&google.maps.event.removeListener(de),ne(google.maps.event.addListener(j,"mouseover",S)))},[S]),x.useEffect(()=>{j&&T&&(ve!==null&&google.maps.event.removeListener(ve),Q(google.maps.event.addListener(j,"mouseup",T)))},[T]),x.useEffect(()=>{j&&C&&(Se!==null&&google.maps.event.removeListener(Se),Oe(google.maps.event.addListener(j,"rightclick",C)))},[C]),x.useEffect(()=>{j&&c&&(Te!==null&&google.maps.event.removeListener(Te),Ie(google.maps.event.addListener(j,"click",c)))},[c]),x.useEffect(()=>{j&&h&&(oe!==null&&google.maps.event.removeListener(oe),xe(google.maps.event.addListener(j,"drag",h)))},[h]),x.useEffect(()=>{j&&M&&(B!==null&&google.maps.event.removeListener(B),P(google.maps.event.addListener(j,"center_changed",M)))},[c]),x.useEffect(()=>{var Ee=k.current===null?null:new google.maps.Map(k.current,t);return D(Ee),Ee!==null&&O&&O(Ee),()=>{Ee!==null&&L&&L(Ee)}},[]),p.jsx("div",{id:s,ref:k,style:i,className:a,children:p.jsx($e.Provider,{value:j,children:j!==null?e:null})})}x.memo(jR);class kR extends x.PureComponent{constructor(){super(...arguments),ue(this,"state",{map:null}),ue(this,"registeredEvents",[]),ue(this,"mapRef",null),ue(this,"getInstance",()=>this.mapRef===null?null:new google.maps.Map(this.mapRef,this.props.options)),ue(this,"panTo",e=>{var t=this.getInstance();t&&t.panTo(e)}),ue(this,"setMapCallback",()=>{this.state.map!==null&&this.props.onLoad&&this.props.onLoad(this.state.map)}),ue(this,"getRef",e=>{this.mapRef=e})}componentDidMount(){var e=this.getInstance();this.registeredEvents=Ke({updaterMap:wS,eventMap:bS,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){this.state.map!==null&&(tt(this.registeredEvents),this.registeredEvents=Ke({updaterMap:wS,eventMap:bS,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),tt(this.registeredEvents))}render(){return p.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:p.jsx($e.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})}}function SS(n,e,t,s,i,a,l){try{var c=n[a](l),d=c.value}catch(h){return void t(h)}c.done?e(d):Promise.resolve(d).then(s,i)}function qT(n){return function(){var e=this,t=arguments;return new Promise(function(s,i){var a=n.apply(e,t);function l(d){SS(a,s,i,l,c,"next",d)}function c(d){SS(a,s,i,l,c,"throw",d)}l(void 0)})}}function WT(n){var{googleMapsApiKey:e,googleMapsClientId:t,version:s="weekly",language:i,region:a,libraries:l,channel:c,mapIds:d,authReferrerPolicy:h,apiUrl:g="https://maps.googleapis.com"}=n,m=[];return Jt(e&&t||!(e&&t),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?m.push("key=".concat(e)):t&&m.push("client=".concat(t)),s&&m.push("v=".concat(s)),i&&m.push("language=".concat(i)),a&&m.push("region=".concat(a)),l&&l.length&&m.push("libraries=".concat(l.sort().join(","))),c&&m.push("channel=".concat(c)),d&&d.length&&m.push("map_ids=".concat(d.join(","))),h&&m.push("auth_referrer_policy=".concat(h)),m.push("loading=async"),m.push("callback=initMap"),"".concat(g,"/maps/api/js?").concat(m.join("&"))}var Qr=typeof document<"u";function XT(n){var{url:e,id:t,nonce:s}=n;return Qr?new Promise(function(a,l){var c=document.getElementById(t),d=window;if(c){var h=c.getAttribute("data-state");if(c.src===e&&h!=="error"){if(h==="ready")return a(t);var g=d.initMap,m=c.onerror;d.initMap=function(){g&&g(),a(t)},c.onerror=function(b){m&&m(b),l(b)};return}else c.remove()}var y=document.createElement("script");y.type="text/javascript",y.src=e,y.id=t,y.async=!0,y.nonce=s||"",y.onerror=function(S){y.setAttribute("data-state","error"),l(S)},d.initMap=function(){y.setAttribute("data-state","ready"),a(t)},document.head.appendChild(y)}).catch(i=>{throw console.error("injectScript error: ",i),i}):Promise.reject(new Error("document is undefined"))}function _S(n){var e=n.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:n.tagName.toLowerCase()==="style"&&n.styleSheet&&n.styleSheet.cssText&&n.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(n.styleSheet.cssText="",!0):n.tagName.toLowerCase()==="style"&&n.innerHTML&&n.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(n.innerHTML="",!0):n.tagName.toLowerCase()==="style"&&!n.styleSheet&&!n.innerHTML}function KT(){var n=document.getElementsByTagName("head")[0];if(n){var e=n.insertBefore.bind(n);n.insertBefore=function(i,a){return _S(i)||Reflect.apply(e,n,[i,a]),i};var t=n.appendChild.bind(n);n.appendChild=function(i){return _S(i)||Reflect.apply(t,n,[i]),i}}}var Kl=!1;function ZT(){return p.jsx("div",{children:"Loading..."})}var $m={id:"script-loader",version:"weekly"};class QT extends x.PureComponent{constructor(){super(...arguments),ue(this,"check",null),ue(this,"state",{loaded:!1}),ue(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),ue(this,"isCleaningUp",qT(function*(){function e(t){if(!Kl)t();else if(Qr)var s=window.setInterval(function(){Kl||(window.clearInterval(s),t())},1)}return new Promise(e)})),ue(this,"cleanup",()=>{Kl=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(s){return typeof s.src=="string"&&s.src.includes("maps.googleapis")}).forEach(function(s){s.parentNode&&s.parentNode.removeChild(s)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(s){return s.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(s){s.parentNode&&s.parentNode.removeChild(s)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(s){return s.innerText!==void 0&&s.innerText.length>0&&s.innerText.includes(".gm-")}).forEach(function(s){s.parentNode&&s.parentNode.removeChild(s)})}),ue(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&KT(),Jt(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var e={id:this.props.id,nonce:this.props.nonce,url:WT(this.props)};XT(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(t=>{this.props.onError&&this.props.onError(t),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),ue(this,"getRef",e=>{this.check=e})}componentDidMount(){if(Qr){if(window.google&&window.google.maps&&!Kl){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(t){console.error("Error at injecting script after cleaning up: ",t)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),Qr&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(Qr){this.cleanup();var e=()=>{this.check||(delete window.google,Kl=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return p.jsxs(p.Fragment,{children:[p.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||p.jsx(ZT,{})]})}}ue(QT,"defaultProps",$m);function MR(n,e){if(n==null)return{};var t={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(e.includes(s))continue;t[s]=n[s]}return t}function r0(n,e){if(n==null)return{};var t,s,i=MR(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(s=0;s<a.length;s++)t=a[s],e.includes(t)||{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}var CS;function OR(n){var{id:e=$m.id,version:t=$m.version,nonce:s,googleMapsApiKey:i,googleMapsClientId:a,language:l,region:c,libraries:d,preventGoogleFontsLoading:h,channel:g,mapIds:m,authReferrerPolicy:y,apiUrl:b="https://maps.googleapis.com"}=n,S=x.useRef(!1),[_,T]=x.useState(!1),[C,M]=x.useState(void 0);x.useEffect(function(){return S.current=!0,()=>{S.current=!1}},[]),x.useEffect(function(){Qr&&h&&KT()},[h]),x.useEffect(function(){_&&Jt(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[_]);var O=WT({version:t,googleMapsApiKey:i,googleMapsClientId:a,language:l,region:c,libraries:d,channel:g,mapIds:m,authReferrerPolicy:y,apiUrl:b});x.useEffect(function(){if(!Qr)return;function D(){S.current&&(T(!0),CS=O)}if(window.google&&window.google.maps&&CS===O){D();return}XT({id:e,url:O,nonce:s}).then(D).catch(function(B){S.current&&M(B),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(i||"-",") or Client ID (").concat(a||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(B)})},[e,O,s]);var L=x.useRef(void 0);return x.useEffect(function(){L.current&&d!==L.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),L.current=d},[d]),{isLoaded:_,loadError:C,url:O}}var LR=["loadingElement","onLoad","onError","onUnmount","children"],AR=p.jsx(ZT,{});function DR(n){var{loadingElement:e,onLoad:t,onError:s,onUnmount:i,children:a}=n,l=r0(n,LR),{isLoaded:c,loadError:d}=OR(l);return x.useEffect(function(){c&&typeof t=="function"&&t()},[c,t]),x.useEffect(function(){d&&typeof s=="function"&&s(d)},[d,s]),x.useEffect(function(){return()=>{i&&i()}},[i]),c?a:e||AR}x.memo(DR);var TS;(function(n){n[n.INITIALIZED=0]="INITIALIZED",n[n.LOADING=1]="LOADING",n[n.SUCCESS=2]="SUCCESS",n[n.FAILURE=3]="FAILURE"})(TS||(TS={}));function ES(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function ph(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ES(Object(t),!0).forEach(function(s){ue(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ES(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var jS={},kS={options(n,e){n.setOptions(e)}};function NR(n){var{options:e,onLoad:t,onUnmount:s}=n,i=x.useContext($e),[a,l]=x.useState(null);return x.useEffect(()=>{a!==null&&a.setMap(i)},[i]),x.useEffect(()=>{e&&a!==null&&a.setOptions(e)},[a,e]),x.useEffect(()=>{var c=new google.maps.TrafficLayer(ph(ph({},e),{},{map:i}));return l(c),t&&t(c),()=>{a!==null&&(s&&s(a),a.setMap(null))}},[]),null}x.memo(NR);class PR extends x.PureComponent{constructor(){super(...arguments),ue(this,"state",{trafficLayer:null}),ue(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),ue(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(ph(ph({},this.props.options),{},{map:this.context}));this.registeredEvents=Ke({updaterMap:kS,eventMap:jS,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&(tt(this.registeredEvents),this.registeredEvents=Ke({updaterMap:kS,eventMap:jS,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),tt(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}ue(PR,"contextType",$e);function RR(n){var{onLoad:e,onUnmount:t}=n,s=x.useContext($e),[i,a]=x.useState(null);return x.useEffect(()=>{i!==null&&i.setMap(s)},[s]),x.useEffect(()=>{var l=new google.maps.BicyclingLayer;return a(l),l.setMap(s),e&&e(l),()=>{l!==null&&(t&&t(l),l.setMap(null))}},[]),null}x.memo(RR);class BR extends x.PureComponent{constructor(){super(...arguments),ue(this,"state",{bicyclingLayer:null}),ue(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}ue(BR,"contextType",$e);function UR(n){var{onLoad:e,onUnmount:t}=n,s=x.useContext($e),[i,a]=x.useState(null);return x.useEffect(()=>{i!==null&&i.setMap(s)},[s]),x.useEffect(()=>{var l=new google.maps.TransitLayer;return a(l),l.setMap(s),e&&e(l),()=>{i!==null&&(t&&t(i),i.setMap(null))}},[]),null}x.memo(UR);class zR extends x.PureComponent{constructor(){super(...arguments),ue(this,"state",{transitLayer:null}),ue(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}ue(zR,"contextType",$e);function MS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function mh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?MS(Object(t),!0).forEach(function(s){ue(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):MS(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var OS={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},LS={drawingMode(n,e){n.setDrawingMode(e)},options(n,e){n.setOptions(e)}};function IR(n){var{options:e,drawingMode:t,onCircleComplete:s,onMarkerComplete:i,onOverlayComplete:a,onPolygonComplete:l,onPolylineComplete:c,onRectangleComplete:d,onLoad:h,onUnmount:g}=n,m=x.useContext($e),[y,b]=x.useState(null),[S,_]=x.useState(null),[T,C]=x.useState(null),[M,O]=x.useState(null),[L,j]=x.useState(null),[D,k]=x.useState(null),[B,P]=x.useState(null);return x.useEffect(()=>{y!==null&&y.setMap(m)},[m]),x.useEffect(()=>{e&&y!==null&&y.setOptions(e)},[y,e]),x.useEffect(()=>{y!==null&&y.setDrawingMode(t??null)},[y,t]),x.useEffect(()=>{y&&s&&(S!==null&&google.maps.event.removeListener(S),_(google.maps.event.addListener(y,"circlecomplete",s)))},[y,s]),x.useEffect(()=>{y&&i&&(T!==null&&google.maps.event.removeListener(T),C(google.maps.event.addListener(y,"markercomplete",i)))},[y,i]),x.useEffect(()=>{y&&a&&(M!==null&&google.maps.event.removeListener(M),O(google.maps.event.addListener(y,"overlaycomplete",a)))},[y,a]),x.useEffect(()=>{y&&l&&(L!==null&&google.maps.event.removeListener(L),j(google.maps.event.addListener(y,"polygoncomplete",l)))},[y,l]),x.useEffect(()=>{y&&c&&(D!==null&&google.maps.event.removeListener(D),k(google.maps.event.addListener(y,"polylinecomplete",c)))},[y,c]),x.useEffect(()=>{y&&d&&(B!==null&&google.maps.event.removeListener(B),P(google.maps.event.addListener(y,"rectanglecomplete",d)))},[y,d]),x.useEffect(()=>{Jt(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var z=new google.maps.drawing.DrawingManager(mh(mh({},e),{},{map:m}));return t&&z.setDrawingMode(t),s&&_(google.maps.event.addListener(z,"circlecomplete",s)),i&&C(google.maps.event.addListener(z,"markercomplete",i)),a&&O(google.maps.event.addListener(z,"overlaycomplete",a)),l&&j(google.maps.event.addListener(z,"polygoncomplete",l)),c&&k(google.maps.event.addListener(z,"polylinecomplete",c)),d&&P(google.maps.event.addListener(z,"rectanglecomplete",d)),b(z),h&&h(z),()=>{y!==null&&(S&&google.maps.event.removeListener(S),T&&google.maps.event.removeListener(T),M&&google.maps.event.removeListener(M),L&&google.maps.event.removeListener(L),D&&google.maps.event.removeListener(D),B&&google.maps.event.removeListener(B),g&&g(y),y.setMap(null))}},[]),null}x.memo(IR);class FR extends x.PureComponent{constructor(e){super(e),ue(this,"registeredEvents",[]),ue(this,"state",{drawingManager:null}),ue(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),Jt(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(mh(mh({},this.props.options),{},{map:this.context}));this.registeredEvents=Ke({updaterMap:LS,eventMap:OS,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&(tt(this.registeredEvents),this.registeredEvents=Ke({updaterMap:LS,eventMap:OS,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),tt(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}ue(FR,"contextType",$e);function AS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function So(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?AS(Object(t),!0).forEach(function(s){ue(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):AS(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var DS={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},NS={animation(n,e){n.setAnimation(e)},clickable(n,e){n.setClickable(e)},cursor(n,e){n.setCursor(e)},draggable(n,e){n.setDraggable(e)},icon(n,e){n.setIcon(e)},label(n,e){n.setLabel(e)},map(n,e){n.setMap(e)},opacity(n,e){n.setOpacity(e)},options(n,e){n.setOptions(e)},position(n,e){n.setPosition(e)},shape(n,e){n.setShape(e)},title(n,e){n.setTitle(e)},visible(n,e){n.setVisible(e)},zIndex(n,e){n.setZIndex(e)}},vh={};function VR(n){var{position:e,options:t,clusterer:s,noClustererRedraw:i,children:a,draggable:l,visible:c,animation:d,clickable:h,cursor:g,icon:m,label:y,opacity:b,shape:S,title:_,zIndex:T,onClick:C,onDblClick:M,onDrag:O,onDragEnd:L,onDragStart:j,onMouseOut:D,onMouseOver:k,onMouseUp:B,onMouseDown:P,onRightClick:z,onClickableChanged:I,onCursorChanged:F,onAnimationChanged:ee,onDraggableChanged:X,onFlatChanged:ae,onIconChanged:R,onPositionChanged:V,onShapeChanged:K,onTitleChanged:te,onVisibleChanged:N,onZindexChanged:q,onLoad:de,onUnmount:ne}=n,ve=x.useContext($e),[Q,Se]=x.useState(null),[Oe,Te]=x.useState(null),[Ie,oe]=x.useState(null),[xe,Ee]=x.useState(null),[$,ce]=x.useState(null),[he,Me]=x.useState(null),[ye,Fe]=x.useState(null),[Ye,nt]=x.useState(null),[it,De]=x.useState(null),[Ze,St]=x.useState(null),[le,Le]=x.useState(null),[we,be]=x.useState(null),[ge,st]=x.useState(null),[ls,yn]=x.useState(null),[kt,Ve]=x.useState(null),[At,cs]=x.useState(null),[ut,Dt]=x.useState(null),[Ss,Ut]=x.useState(null),[Nt,_t]=x.useState(null),[fa,qo]=x.useState(null),[Sr,ga]=x.useState(null),[Ni,Wo]=x.useState(null);x.useEffect(()=>{Q!==null&&Q.setMap(ve)},[ve]),x.useEffect(()=>{typeof t<"u"&&Q!==null&&Q.setOptions(t)},[Q,t]),x.useEffect(()=>{typeof l<"u"&&Q!==null&&Q.setDraggable(l)},[Q,l]),x.useEffect(()=>{e&&Q!==null&&Q.setPosition(e)},[Q,e]),x.useEffect(()=>{typeof c<"u"&&Q!==null&&Q.setVisible(c)},[Q,c]),x.useEffect(()=>{Q?.setAnimation(d)},[Q,d]),x.useEffect(()=>{Q&&h!==void 0&&Q.setClickable(h)},[Q,h]),x.useEffect(()=>{Q&&g!==void 0&&Q.setCursor(g)},[Q,g]),x.useEffect(()=>{Q&&m!==void 0&&Q.setIcon(m)},[Q,m]),x.useEffect(()=>{Q&&y!==void 0&&Q.setLabel(y)},[Q,y]),x.useEffect(()=>{Q&&b!==void 0&&Q.setOpacity(b)},[Q,b]),x.useEffect(()=>{Q&&S!==void 0&&Q.setShape(S)},[Q,S]),x.useEffect(()=>{Q&&_!==void 0&&Q.setTitle(_)},[Q,_]),x.useEffect(()=>{Q&&T!==void 0&&Q.setZIndex(T)},[Q,T]),x.useEffect(()=>{Q&&M&&(Oe!==null&&google.maps.event.removeListener(Oe),Te(google.maps.event.addListener(Q,"dblclick",M)))},[M]),x.useEffect(()=>{Q&&L&&(Ie!==null&&google.maps.event.removeListener(Ie),oe(google.maps.event.addListener(Q,"dragend",L)))},[L]),x.useEffect(()=>{Q&&j&&(xe!==null&&google.maps.event.removeListener(xe),Ee(google.maps.event.addListener(Q,"dragstart",j)))},[j]),x.useEffect(()=>{Q&&P&&($!==null&&google.maps.event.removeListener($),ce(google.maps.event.addListener(Q,"mousedown",P)))},[P]),x.useEffect(()=>{Q&&D&&(he!==null&&google.maps.event.removeListener(he),Me(google.maps.event.addListener(Q,"mouseout",D)))},[D]),x.useEffect(()=>{Q&&k&&(ye!==null&&google.maps.event.removeListener(ye),Fe(google.maps.event.addListener(Q,"mouseover",k)))},[k]),x.useEffect(()=>{Q&&B&&(Ye!==null&&google.maps.event.removeListener(Ye),nt(google.maps.event.addListener(Q,"mouseup",B)))},[B]),x.useEffect(()=>{Q&&z&&(it!==null&&google.maps.event.removeListener(it),De(google.maps.event.addListener(Q,"rightclick",z)))},[z]),x.useEffect(()=>{Q&&C&&(Ze!==null&&google.maps.event.removeListener(Ze),St(google.maps.event.addListener(Q,"click",C)))},[C]),x.useEffect(()=>{Q&&O&&(le!==null&&google.maps.event.removeListener(le),Le(google.maps.event.addListener(Q,"drag",O)))},[O]),x.useEffect(()=>{Q&&I&&(we!==null&&google.maps.event.removeListener(we),be(google.maps.event.addListener(Q,"clickable_changed",I)))},[I]),x.useEffect(()=>{Q&&F&&(ge!==null&&google.maps.event.removeListener(ge),st(google.maps.event.addListener(Q,"cursor_changed",F)))},[F]),x.useEffect(()=>{Q&&ee&&(ls!==null&&google.maps.event.removeListener(ls),yn(google.maps.event.addListener(Q,"animation_changed",ee)))},[ee]),x.useEffect(()=>{Q&&X&&(kt!==null&&google.maps.event.removeListener(kt),Ve(google.maps.event.addListener(Q,"draggable_changed",X)))},[X]),x.useEffect(()=>{Q&&ae&&(At!==null&&google.maps.event.removeListener(At),cs(google.maps.event.addListener(Q,"flat_changed",ae)))},[ae]),x.useEffect(()=>{Q&&R&&(ut!==null&&google.maps.event.removeListener(ut),Dt(google.maps.event.addListener(Q,"icon_changed",R)))},[R]),x.useEffect(()=>{Q&&V&&(Ss!==null&&google.maps.event.removeListener(Ss),Ut(google.maps.event.addListener(Q,"position_changed",V)))},[V]),x.useEffect(()=>{Q&&K&&(Nt!==null&&google.maps.event.removeListener(Nt),_t(google.maps.event.addListener(Q,"shape_changed",K)))},[K]),x.useEffect(()=>{Q&&te&&(fa!==null&&google.maps.event.removeListener(fa),qo(google.maps.event.addListener(Q,"title_changed",te)))},[te]),x.useEffect(()=>{Q&&N&&(Sr!==null&&google.maps.event.removeListener(Sr),ga(google.maps.event.addListener(Q,"visible_changed",N)))},[N]),x.useEffect(()=>{Q&&q&&(Ni!==null&&google.maps.event.removeListener(Ni),Wo(google.maps.event.addListener(Q,"zindex_changed",q)))},[q]),x.useEffect(()=>{var Ms=So(So(So({},t||vh),s?vh:{map:ve}),{},{position:e}),Ae=new google.maps.Marker(Ms);return s?s.addMarker(Ae,!!i):Ae.setMap(ve),e&&Ae.setPosition(e),typeof c<"u"&&Ae.setVisible(c),typeof l<"u"&&Ae.setDraggable(l),typeof h<"u"&&Ae.setClickable(h),typeof g=="string"&&Ae.setCursor(g),m&&Ae.setIcon(m),typeof y<"u"&&Ae.setLabel(y),typeof b<"u"&&Ae.setOpacity(b),S&&Ae.setShape(S),typeof _=="string"&&Ae.setTitle(_),typeof T=="number"&&Ae.setZIndex(T),M&&Te(google.maps.event.addListener(Ae,"dblclick",M)),L&&oe(google.maps.event.addListener(Ae,"dragend",L)),j&&Ee(google.maps.event.addListener(Ae,"dragstart",j)),P&&ce(google.maps.event.addListener(Ae,"mousedown",P)),D&&Me(google.maps.event.addListener(Ae,"mouseout",D)),k&&Fe(google.maps.event.addListener(Ae,"mouseover",k)),B&&nt(google.maps.event.addListener(Ae,"mouseup",B)),z&&De(google.maps.event.addListener(Ae,"rightclick",z)),C&&St(google.maps.event.addListener(Ae,"click",C)),O&&Le(google.maps.event.addListener(Ae,"drag",O)),I&&be(google.maps.event.addListener(Ae,"clickable_changed",I)),F&&st(google.maps.event.addListener(Ae,"cursor_changed",F)),ee&&yn(google.maps.event.addListener(Ae,"animation_changed",ee)),X&&Ve(google.maps.event.addListener(Ae,"draggable_changed",X)),ae&&cs(google.maps.event.addListener(Ae,"flat_changed",ae)),R&&Dt(google.maps.event.addListener(Ae,"icon_changed",R)),V&&Ut(google.maps.event.addListener(Ae,"position_changed",V)),K&&_t(google.maps.event.addListener(Ae,"shape_changed",K)),te&&qo(google.maps.event.addListener(Ae,"title_changed",te)),N&&ga(google.maps.event.addListener(Ae,"visible_changed",N)),q&&Wo(google.maps.event.addListener(Ae,"zindex_changed",q)),Se(Ae),de&&de(Ae),()=>{Oe!==null&&google.maps.event.removeListener(Oe),Ie!==null&&google.maps.event.removeListener(Ie),xe!==null&&google.maps.event.removeListener(xe),$!==null&&google.maps.event.removeListener($),he!==null&&google.maps.event.removeListener(he),ye!==null&&google.maps.event.removeListener(ye),Ye!==null&&google.maps.event.removeListener(Ye),it!==null&&google.maps.event.removeListener(it),Ze!==null&&google.maps.event.removeListener(Ze),we!==null&&google.maps.event.removeListener(we),ge!==null&&google.maps.event.removeListener(ge),ls!==null&&google.maps.event.removeListener(ls),kt!==null&&google.maps.event.removeListener(kt),At!==null&&google.maps.event.removeListener(At),ut!==null&&google.maps.event.removeListener(ut),Ss!==null&&google.maps.event.removeListener(Ss),fa!==null&&google.maps.event.removeListener(fa),Sr!==null&&google.maps.event.removeListener(Sr),Ni!==null&&google.maps.event.removeListener(Ni),ne&&ne(Ae),s?s.removeMarker(Ae,!!i):Ae&&Ae.setMap(null)}},[]);var rf=x.useMemo(()=>a?x.Children.map(a,Ms=>{if(!x.isValidElement(Ms))return Ms;var Ae=Ms;return x.cloneElement(Ae,{anchor:Q})}):null,[a,Q]);return p.jsx(p.Fragment,{children:rf})||null}x.memo(VR);class JT extends x.PureComponent{constructor(){super(...arguments),ue(this,"registeredEvents",[])}componentDidMount(){var e=this;return qT(function*(){var t=So(So(So({},e.props.options||vh),e.props.clusterer?vh:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(t),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=Ke({updaterMap:NS,eventMap:DS,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&(tt(this.registeredEvents),this.registeredEvents=Ke({updaterMap:NS,eventMap:DS,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),tt(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?x.Children.map(this.props.children,t=>{if(!x.isValidElement(t))return t;var s=t;return x.cloneElement(s,{anchor:this.marker})}):null;return e||null}}ue(JT,"contextType",$e);var HR=function(){function n(e,t){e.getClusterer().extend(n,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=t,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return n.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},n.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},n.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var t=this.cluster.getClusterer();if(google.maps.event.trigger(t,"click",this.cluster),google.maps.event.trigger(t,"clusterclick",this.cluster),t.getZoomOnClick()){var s=t.getMaxZoom(),i=this.cluster.getBounds(),a=t.getMap();a!==null&&"fitBounds"in a&&a.fitBounds(i),this.timeOut=window.setTimeout(function(){var l=t.getMap();if(l!==null){"fitBounds"in l&&l.fitBounds(i);var c=l.getZoom()||0;s!==null&&c>s&&l.setZoom(s+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},n.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},n.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},n.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var t=this.getMap();t!==null&&(this.boundsChangedListener=google.maps.event.addListener(t,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},n.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},n.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},n.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},n.prototype.show=function(){var e,t,s,i,a,l;if(this.div&&this.center){var c=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,d=this.backgroundPosition.split(" "),h=parseInt(((e=d[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),g=parseInt(((t=d[1])===null||t===void 0?void 0:t.replace(/^\s+|\s+$/g,""))||"0",10),m=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(m!==null?"".concat(m.y,"px"):"0","; left: ").concat(m!==null?"".concat(m.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var y=document.createElement("img");y.alt=c,y.src=this.url,y.width=this.width,y.height=this.height,y.setAttribute("style","position: absolute; top: ".concat(g,"px; left: ").concat(h,"px")),this.cluster.getClusterer().enableRetinaIcons||(y.style.clip="rect(-".concat(g,"px, -").concat(h+this.width,"px, -").concat(g+this.height,", -").concat(h,")"));var b=document.createElement("div");b.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((s=this.sums)===null||s===void 0)&&s.text&&(b.innerText="".concat((i=this.sums)===null||i===void 0?void 0:i.text)),!((a=this.sums)===null||a===void 0)&&a.html&&(b.innerHTML="".concat((l=this.sums)===null||l===void 0?void 0:l.html)),this.div.innerHTML="",this.div.appendChild(y),this.div.appendChild(b),this.div.title=c,this.div.style.display=""}this.visible=!0},n.prototype.useStyle=function(e){this.sums=e;var t=this.cluster.getClusterer().getStyles(),s=t[Math.min(t.length-1,Math.max(0,e.index-1))];s&&(this.url=s.url,this.height=s.height,this.width=s.width,s.className&&(this.className="".concat(this.clusterClassName," ").concat(s.className)),this.anchorText=s.anchorText||[0,0],this.anchorIcon=s.anchorIcon||[this.height/2,this.width/2],this.textColor=s.textColor||"black",this.textSize=s.textSize||11,this.textDecoration=s.textDecoration||"none",this.fontWeight=s.fontWeight||"bold",this.fontStyle=s.fontStyle||"normal",this.fontFamily=s.fontFamily||"Arial,sans-serif",this.backgroundPosition=s.backgroundPosition||"0 0")},n.prototype.setCenter=function(e){this.center=e},n.prototype.getPosFromLatLng=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return t!==null&&(t.x-=this.anchorIcon[1],t.y-=this.anchorIcon[0]),t},n}(),GR=function(){function n(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new HR(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return n.prototype.getSize=function(){return this.markers.length},n.prototype.getMarkers=function(){return this.markers},n.prototype.getCenter=function(){return this.center},n.prototype.getMap=function(){return this.map},n.prototype.getClusterer=function(){return this.markerClusterer},n.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),t=this.getMarkers(),s=0,i=t;s<i.length;s++){var a=i[s],l=a.getPosition();l&&e.extend(l)}return e},n.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},n.prototype.addMarker=function(e){var t;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var s=e.getPosition();if(s){var i=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(i-1)+s.lat())/i,(this.center.lng()*(i-1)+s.lng())/i),this.calculateBounds()}}}else{var s=e.getPosition();s&&(this.center=s,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var a=this.markers.length,l=this.markerClusterer.getMaxZoom(),c=(t=this.map)===null||t===void 0?void 0:t.getZoom();if(l!==null&&typeof c<"u"&&c>l)e.getMap()!==this.map&&e.setMap(this.map);else if(a<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(a===this.minClusterSize)for(var d=0,h=this.markers;d<h.length;d++){var g=h[d];g.setMap(null)}else e.setMap(null);return!0},n.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var t=e.getPosition();if(t)return this.bounds.contains(t)}return!1},n.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},n.prototype.updateIcon=function(){var e,t=this.markers.length,s=this.markerClusterer.getMaxZoom(),i=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(s!==null&&typeof i<"u"&&i>s){this.clusterIcon.hide();return}if(t<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},n.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var t=0;t<this.markers.length;t++)if(e===this.markers[t])return!0;return!1},n}();function $R(n,e){var t=n.length,s=t.toString().length,i=Math.min(s,e);return{text:t.toString(),index:i,title:""}}var YR=2e3,qR=500,WR="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",XR="png",KR=[53,56,66,78,90],ZR="cluster",eE=function(){function n(e,t,s){t===void 0&&(t=[]),s===void 0&&(s={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(n,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=s.gridSize||60,this.minClusterSize=s.minimumClusterSize||2,this.maxZoom=s.maxZoom||null,this.styles=s.styles||[],this.title=s.title||"",this.zoomOnClick=!0,s.zoomOnClick!==void 0&&(this.zoomOnClick=s.zoomOnClick),this.averageCenter=!1,s.averageCenter!==void 0&&(this.averageCenter=s.averageCenter),this.ignoreHidden=!1,s.ignoreHidden!==void 0&&(this.ignoreHidden=s.ignoreHidden),this.enableRetinaIcons=!1,s.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=s.enableRetinaIcons),this.imagePath=s.imagePath||WR,this.imageExtension=s.imageExtension||XR,this.imageSizes=s.imageSizes||KR,this.calculator=s.calculator||$R,this.batchSize=s.batchSize||YR,this.batchSizeIE=s.batchSizeIE||qR,this.clusterClass=s.clusterClass||ZR,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(t,!0),this.setMap(e)}return n.prototype.onZoomChanged=function(){var e,t;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((t=this.getMap())===null||t===void 0?void 0:t.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},n.prototype.onIdle=function(){this.redraw()},n.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},n.prototype.onRemove=function(){for(var e=0,t=this.markers;e<t.length;e++){var s=t[e];s.getMap()!==this.activeMap&&s.setMap(this.activeMap)}for(var i=0,a=this.clusters;i<a.length;i++){var l=a[i];l.remove()}this.clusters=[];for(var c=0,d=this.listeners;c<d.length;c++){var h=d[c];google.maps.event.removeListener(h)}this.listeners=[],this.activeMap=null,this.ready=!1},n.prototype.draw=function(){},n.prototype.getMap=function(){return null},n.prototype.getPanes=function(){return null},n.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},n.prototype.setMap=function(){},n.prototype.addListener=function(){return{remove:function(){}}},n.prototype.bindTo=function(){},n.prototype.get=function(){},n.prototype.notify=function(){},n.prototype.set=function(){},n.prototype.setValues=function(){},n.prototype.unbind=function(){},n.prototype.unbindAll=function(){},n.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},n.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),t=new google.maps.LatLngBounds,s=0,i=e;s<i.length;s++){var a=i[s],l=a.getPosition();l&&t.extend(l)}var c=this.getMap();c!==null&&"fitBounds"in c&&c.fitBounds(t)},n.prototype.getGridSize=function(){return this.gridSize},n.prototype.setGridSize=function(e){this.gridSize=e},n.prototype.getMinimumClusterSize=function(){return this.minClusterSize},n.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},n.prototype.getMaxZoom=function(){return this.maxZoom},n.prototype.setMaxZoom=function(e){this.maxZoom=e},n.prototype.getStyles=function(){return this.styles},n.prototype.setStyles=function(e){this.styles=e},n.prototype.getTitle=function(){return this.title},n.prototype.setTitle=function(e){this.title=e},n.prototype.getZoomOnClick=function(){return this.zoomOnClick},n.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},n.prototype.getAverageCenter=function(){return this.averageCenter},n.prototype.setAverageCenter=function(e){this.averageCenter=e},n.prototype.getIgnoreHidden=function(){return this.ignoreHidden},n.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},n.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},n.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},n.prototype.getImageExtension=function(){return this.imageExtension},n.prototype.setImageExtension=function(e){this.imageExtension=e},n.prototype.getImagePath=function(){return this.imagePath},n.prototype.setImagePath=function(e){this.imagePath=e},n.prototype.getImageSizes=function(){return this.imageSizes},n.prototype.setImageSizes=function(e){this.imageSizes=e},n.prototype.getCalculator=function(){return this.calculator},n.prototype.setCalculator=function(e){this.calculator=e},n.prototype.getBatchSizeIE=function(){return this.batchSizeIE},n.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},n.prototype.getClusterClass=function(){return this.clusterClass},n.prototype.setClusterClass=function(e){this.clusterClass=e},n.prototype.getMarkers=function(){return this.markers},n.prototype.getTotalMarkers=function(){return this.markers.length},n.prototype.getClusters=function(){return this.clusters},n.prototype.getTotalClusters=function(){return this.clusters.length},n.prototype.addMarker=function(e,t){this.pushMarkerTo(e),t||this.redraw()},n.prototype.addMarkers=function(e,t){for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var i=e[s];i&&this.pushMarkerTo(i)}t||this.redraw()},n.prototype.pushMarkerTo=function(e){var t=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){t.ready&&(e.isAdded=!1,t.repaint())}),e.isAdded=!1,this.markers.push(e)},n.prototype.removeMarker_=function(e){var t=-1;if(this.markers.indexOf)t=this.markers.indexOf(e);else for(var s=0;s<this.markers.length;s++)if(e===this.markers[s]){t=s;break}return t===-1?!1:(e.setMap(null),this.markers.splice(t,1),!0)},n.prototype.removeMarker=function(e,t){var s=this.removeMarker_(e);return!t&&s&&this.repaint(),s},n.prototype.removeMarkers=function(e,t){for(var s=!1,i=0,a=e;i<a.length;i++){var l=a[i];s=s||this.removeMarker_(l)}return!t&&s&&this.repaint(),s},n.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},n.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var s=0,i=e;s<i.length;s++){var a=i[s];a.remove()}},0)},n.prototype.getExtendedBounds=function(e){var t=this.getProjection(),s=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));s!==null&&(s.x+=this.gridSize,s.y-=this.gridSize);var i=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(i!==null&&(i.x-=this.gridSize,i.y+=this.gridSize),s!==null){var a=t.fromDivPixelToLatLng(s);a!==null&&e.extend(a)}if(i!==null){var l=t.fromDivPixelToLatLng(i);l!==null&&e.extend(l)}return e},n.prototype.redraw=function(){this.createClusters(0)},n.prototype.resetViewport=function(e){for(var t=0,s=this.clusters;t<s.length;t++){var i=s[t];i.remove()}this.clusters=[];for(var a=0,l=this.markers;a<l.length;a++){var c=l[a];c.isAdded=!1,e&&c.setMap(null)}},n.prototype.distanceBetweenPoints=function(e,t){var s=6371,i=(t.lat()-e.lat())*Math.PI/180,a=(t.lng()-e.lng())*Math.PI/180,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return s*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},n.prototype.isMarkerInBounds=function(e,t){var s=e.getPosition();return s?t.contains(s):!1},n.prototype.addToClosestCluster=function(e){for(var t,s=4e4,i=null,a=0,l=this.clusters;a<l.length;a++){var c=l[a];t=c;var d=t.getCenter(),h=e.getPosition();if(d&&h){var g=this.distanceBetweenPoints(d,h);g<s&&(s=g,i=t)}}i&&i.isMarkerInClusterBounds(e)?i.addMarker(e):(t=new GR(this),t.addMarker(e),this.clusters.push(t))},n.prototype.createClusters=function(e){var t=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var s=this.getMap(),i=s!==null&&("getBounds"in s)?s.getBounds():null,a=s?.getZoom()||0,l=a>3?new google.maps.LatLngBounds(i?.getSouthWest(),i?.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),c=this.getExtendedBounds(l),d=Math.min(e+this.batchSize,this.markers.length),h=e;h<d;h++){var g=this.markers[h];g&&!g.isAdded&&this.isMarkerInBounds(g,c)&&(!this.ignoreHidden||this.ignoreHidden&&g.getVisible())&&this.addToClosestCluster(g)}if(d<this.markers.length)this.timerRefStatic=window.setTimeout(function(){t.createClusters(d)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var m=0,y=this.clusters;m<y.length;m++){var b=y[m];b.updateIcon()}}}},n.prototype.extend=function(e,t){return(function(i){for(var a in i.prototype){var l=a;this.prototype[l]=i.prototype[l]}return this}).apply(e,[t])},n}();function PS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function QR(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PS(Object(t),!0).forEach(function(s){ue(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):PS(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var fn={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},lt={averageCenter(n,e){n.setAverageCenter(e)},batchSizeIE(n,e){n.setBatchSizeIE(e)},calculator(n,e){n.setCalculator(e)},clusterClass(n,e){n.setClusterClass(e)},enableRetinaIcons(n,e){n.setEnableRetinaIcons(e)},gridSize(n,e){n.setGridSize(e)},ignoreHidden(n,e){n.setIgnoreHidden(e)},imageExtension(n,e){n.setImageExtension(e)},imagePath(n,e){n.setImagePath(e)},imageSizes(n,e){n.setImageSizes(e)},maxZoom(n,e){n.setMaxZoom(e)},minimumClusterSize(n,e){n.setMinimumClusterSize(e)},styles(n,e){n.setStyles(e)},title(n,e){n.setTitle(e)},zoomOnClick(n,e){n.setZoomOnClick(e)}},JR={};function e6(n){var{children:e,options:t,averageCenter:s,batchSizeIE:i,calculator:a,clusterClass:l,enableRetinaIcons:c,gridSize:d,ignoreHidden:h,imageExtension:g,imagePath:m,imageSizes:y,maxZoom:b,minimumClusterSize:S,styles:_,title:T,zoomOnClick:C,onClick:M,onClusteringBegin:O,onClusteringEnd:L,onMouseOver:j,onMouseOut:D,onLoad:k,onUnmount:B}=n,[P,z]=x.useState(null),I=x.useContext($e),[F,ee]=x.useState(null),[X,ae]=x.useState(null),[R,V]=x.useState(null),[K,te]=x.useState(null),[N,q]=x.useState(null);return x.useEffect(()=>{P&&D&&(K!==null&&google.maps.event.removeListener(K),te(google.maps.event.addListener(P,fn.onMouseOut,D)))},[D]),x.useEffect(()=>{P&&j&&(N!==null&&google.maps.event.removeListener(N),q(google.maps.event.addListener(P,fn.onMouseOver,j)))},[j]),x.useEffect(()=>{P&&M&&(F!==null&&google.maps.event.removeListener(F),ee(google.maps.event.addListener(P,fn.onClick,M)))},[M]),x.useEffect(()=>{P&&O&&(X!==null&&google.maps.event.removeListener(X),ae(google.maps.event.addListener(P,fn.onClusteringBegin,O)))},[O]),x.useEffect(()=>{P&&L&&(R!==null&&google.maps.event.removeListener(R),ae(google.maps.event.addListener(P,fn.onClusteringEnd,L)))},[L]),x.useEffect(()=>{typeof s<"u"&&P!==null&&lt.averageCenter(P,s)},[P,s]),x.useEffect(()=>{typeof i<"u"&&P!==null&&lt.batchSizeIE(P,i)},[P,i]),x.useEffect(()=>{typeof a<"u"&&P!==null&&lt.calculator(P,a)},[P,a]),x.useEffect(()=>{typeof l<"u"&&P!==null&&lt.clusterClass(P,l)},[P,l]),x.useEffect(()=>{typeof c<"u"&&P!==null&&lt.enableRetinaIcons(P,c)},[P,c]),x.useEffect(()=>{typeof d<"u"&&P!==null&&lt.gridSize(P,d)},[P,d]),x.useEffect(()=>{typeof h<"u"&&P!==null&&lt.ignoreHidden(P,h)},[P,h]),x.useEffect(()=>{typeof g<"u"&&P!==null&&lt.imageExtension(P,g)},[P,g]),x.useEffect(()=>{typeof m<"u"&&P!==null&&lt.imagePath(P,m)},[P,m]),x.useEffect(()=>{typeof y<"u"&&P!==null&&lt.imageSizes(P,y)},[P,y]),x.useEffect(()=>{typeof b<"u"&&P!==null&&lt.maxZoom(P,b)},[P,b]),x.useEffect(()=>{typeof S<"u"&&P!==null&&lt.minimumClusterSize(P,S)},[P,S]),x.useEffect(()=>{typeof _<"u"&&P!==null&&lt.styles(P,_)},[P,_]),x.useEffect(()=>{typeof T<"u"&&P!==null&&lt.title(P,T)},[P,T]),x.useEffect(()=>{typeof C<"u"&&P!==null&&lt.zoomOnClick(P,C)},[P,C]),x.useEffect(()=>{if(I){var de=QR({},t||JR),ne=new eE(I,[],de);return s&&lt.averageCenter(ne,s),i&&lt.batchSizeIE(ne,i),a&&lt.calculator(ne,a),l&&lt.clusterClass(ne,l),c&&lt.enableRetinaIcons(ne,c),d&&lt.gridSize(ne,d),h&&lt.ignoreHidden(ne,h),g&&lt.imageExtension(ne,g),m&&lt.imagePath(ne,m),y&&lt.imageSizes(ne,y),b&&lt.maxZoom(ne,b),S&&lt.minimumClusterSize(ne,S),_&&lt.styles(ne,_),T&&lt.title(ne,T),C&&lt.zoomOnClick(ne,C),D&&te(google.maps.event.addListener(ne,fn.onMouseOut,D)),j&&q(google.maps.event.addListener(ne,fn.onMouseOver,j)),M&&ee(google.maps.event.addListener(ne,fn.onClick,M)),O&&ae(google.maps.event.addListener(ne,fn.onClusteringBegin,O)),L&&V(google.maps.event.addListener(ne,fn.onClusteringEnd,L)),z(ne),k&&k(ne),()=>{K!==null&&google.maps.event.removeListener(K),N!==null&&google.maps.event.removeListener(N),F!==null&&google.maps.event.removeListener(F),X!==null&&google.maps.event.removeListener(X),R!==null&&google.maps.event.removeListener(R),B&&B(ne)}}},[]),P!==null&&e(P)||null}x.memo(e6);class t6 extends x.PureComponent{constructor(){super(...arguments),ue(this,"registeredEvents",[]),ue(this,"state",{markerClusterer:null}),ue(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new eE(this.context,[],this.props.options);this.registeredEvents=Ke({updaterMap:lt,eventMap:fn,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(tt(this.registeredEvents),this.registeredEvents=Ke({updaterMap:lt,eventMap:fn,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),tt(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}ue(t6,"contextType",$e);function RS(n){n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()}var tE=function(){function n(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(n,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return n.prototype.createInfoBoxDiv=function(){var e=this,t=function(g){g.returnValue=!1,g.preventDefault&&g.preventDefault(),e.enableEventPropagation||RS(g)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var s=this.getPanes();if(s!==null&&s[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var i=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-i.left-i.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var a=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],l=0,c=a;l<c.length;l++){var d=c[l];this.eventListeners.push(google.maps.event.addListener(this.div,d,RS))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",t),google.maps.event.trigger(this,"domready")}},n.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},n.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},n.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},n.prototype.getCloseClickHandler=function(){return this.closeClickHandler},n.prototype.panBox=function(e){if(this.div&&!e){var t=this.getMap();if(t instanceof google.maps.Map){var s=0,i=0,a=t.getBounds();a&&!a.contains(this.position)&&t.setCenter(this.position);var l=t.getDiv(),c=l.offsetWidth,d=l.offsetHeight,h=this.pixelOffset.width,g=this.pixelOffset.height,m=this.div.offsetWidth,y=this.div.offsetHeight,b=this.infoBoxClearance.width,S=this.infoBoxClearance.height,_=this.getProjection(),T=_.fromLatLngToContainerPixel(this.position);T!==null&&(T.x<-h+b?s=T.x+h-b:T.x+m+h+b>c&&(s=T.x+m+h+b-c),this.alignBottom?T.y<-g+S+y?i=T.y+g-S-y:T.y+g+S>d&&(i=T.y+g+S-d):T.y<-g+S?i=T.y+g-S:T.y+y+g+S>d&&(i=T.y+y+g+S-d)),s===0&&i===0||t.panBy(s,i)}}},n.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.div.style[t]=e[t]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var s=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+s*100+')"',this.div.style.filter="alpha(opacity="+s*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},n.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var t=this.div.ownerDocument,s=t&&t.defaultView?t.defaultView.getComputedStyle(this.div,""):null;s&&(e.top=parseInt(s.borderTopWidth||"",10)||0,e.bottom=parseInt(s.borderBottomWidth||"",10)||0,e.left=parseInt(s.borderLeftWidth||"",10)||0,e.right=parseInt(s.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var i=this.div.currentStyle;i&&(e.top=parseInt(i.borderTopWidth||"",10)||0,e.bottom=parseInt(i.borderBottomWidth||"",10)||0,e.left=parseInt(i.borderLeftWidth||"",10)||0,e.right=parseInt(i.borderRightWidth||"",10)||0)}return e},n.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},n.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),t=e.fromLatLngToDivPixel(this.position);t!==null&&(this.div.style.left=t.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(t.y+this.pixelOffset.height)+"px":this.div.style.top=t.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},n.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},n.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},n.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},n.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},n.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},n.prototype.getContent=function(){return this.content},n.prototype.getPosition=function(){return this.position},n.prototype.getZIndex=function(){return this.zIndex},n.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},n.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},n.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},n.prototype.open=function(e,t){var s=this;t&&(this.position=t.getPosition(),this.moveListener=google.maps.event.addListener(t,"position_changed",function(){var i=t.getPosition();s.setPosition(i)}),this.mapListener=google.maps.event.addListener(t,"map_changed",function(){s.setMap(t.map)})),this.setMap(e),this.div&&this.panBox()},n.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,t=this.eventListeners;e<t.length;e++){var s=t[e];google.maps.event.removeListener(s)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},n.prototype.extend=function(e,t){return(function(i){for(var a in i.prototype)Object.prototype.hasOwnProperty.call(this,a)||(this.prototype[a]=i.prototype[a]);return this}).apply(e,[t])},n}(),s6=["position"],n6=["position"];function BS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function yh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?BS(Object(t),!0).forEach(function(s){ue(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):BS(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var US={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},zS={options(n,e){n.setOptions(e)},position(n,e){e instanceof google.maps.LatLng?n.setPosition(e):n.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(n,e){n.setVisible(e)},zIndex(n,e){n.setZIndex(e)}},i6={};function r6(n){var{children:e,anchor:t,options:s,position:i,zIndex:a,onCloseClick:l,onDomReady:c,onContentChanged:d,onPositionChanged:h,onZindexChanged:g,onLoad:m,onUnmount:y}=n,b=x.useContext($e),[S,_]=x.useState(null),[T,C]=x.useState(null),[M,O]=x.useState(null),[L,j]=x.useState(null),[D,k]=x.useState(null),[B,P]=x.useState(null),z=x.useRef(null);return x.useEffect(()=>{b&&S!==null&&(S.close(),t?S.open(b,t):S.getPosition()&&S.open(b))},[b,S,t]),x.useEffect(()=>{s&&S!==null&&S.setOptions(s)},[S,s]),x.useEffect(()=>{if(i&&S!==null){var I=i instanceof google.maps.LatLng?i:new google.maps.LatLng(i.lat,i.lng);S.setPosition(I)}},[i]),x.useEffect(()=>{typeof a=="number"&&S!==null&&S.setZIndex(a)},[a]),x.useEffect(()=>{S&&l&&(T!==null&&google.maps.event.removeListener(T),C(google.maps.event.addListener(S,"closeclick",l)))},[l]),x.useEffect(()=>{S&&c&&(M!==null&&google.maps.event.removeListener(M),O(google.maps.event.addListener(S,"domready",c)))},[c]),x.useEffect(()=>{S&&d&&(L!==null&&google.maps.event.removeListener(L),j(google.maps.event.addListener(S,"content_changed",d)))},[d]),x.useEffect(()=>{S&&h&&(D!==null&&google.maps.event.removeListener(D),k(google.maps.event.addListener(S,"position_changed",h)))},[h]),x.useEffect(()=>{S&&g&&(B!==null&&google.maps.event.removeListener(B),P(google.maps.event.addListener(S,"zindex_changed",g)))},[g]),x.useEffect(()=>{if(b){var I=s||i6,{position:F}=I,ee=r0(I,s6),X;F&&!(F instanceof google.maps.LatLng)&&(X=new google.maps.LatLng(F.lat,F.lng));var ae=new tE(yh(yh({},ee),X?{position:X}:{}));z.current=document.createElement("div"),_(ae),l&&C(google.maps.event.addListener(ae,"closeclick",l)),c&&O(google.maps.event.addListener(ae,"domready",c)),d&&j(google.maps.event.addListener(ae,"content_changed",d)),h&&k(google.maps.event.addListener(ae,"position_changed",h)),g&&P(google.maps.event.addListener(ae,"zindex_changed",g)),ae.setContent(z.current),t?ae.open(b,t):ae.getPosition()?ae.open(b):Jt(!1,"You must provide either an anchor or a position prop for <InfoBox>."),m&&m(ae)}return()=>{S!==null&&(T&&google.maps.event.removeListener(T),L&&google.maps.event.removeListener(L),M&&google.maps.event.removeListener(M),D&&google.maps.event.removeListener(D),B&&google.maps.event.removeListener(B),y&&y(S),S.close())}},[]),z.current?No.createPortal(x.Children.only(e),z.current):null}x.memo(r6);class a6 extends x.PureComponent{constructor(){super(...arguments),ue(this,"registeredEvents",[]),ue(this,"containerElement",null),ue(this,"state",{infoBox:null}),ue(this,"open",(e,t)=>{t?this.context!==null&&e.open(this.context,t):e.getPosition()?this.context!==null&&e.open(this.context):Jt(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),ue(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e=this.props.options||{},{position:t}=e,s=r0(e,n6),i;t&&!(t instanceof google.maps.LatLng)&&(i=new google.maps.LatLng(t.lat,t.lng));var a=new tE(yh(yh({},s),i?{position:i}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=Ke({updaterMap:zS,eventMap:US,prevProps:{},nextProps:this.props,instance:a}),this.setState({infoBox:a},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:t}=this.state;t!==null&&(tt(this.registeredEvents),this.registeredEvents=Ke({updaterMap:zS,eventMap:US,prevProps:e,nextProps:this.props,instance:t}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:t}=this.state;t!==null&&(e&&e(t),tt(this.registeredEvents),t.close())}render(){return this.containerElement?No.createPortal(x.Children.only(this.props.children),this.containerElement):null}}ue(a6,"contextType",$e);var Vp,IS;function o6(){return IS||(IS=1,Vp=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,i,a;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[i]))return!1;for(i=s;i--!==0;){var l=a[i];if(!n(e[l],t[l]))return!1}return!0}return e!==e&&t!==t}),Vp}var l6=o6(),FS=YT(l6),VS=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Hp=1,Zl=8;class a0{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[t,s]=new Uint8Array(e,0,2);if(t!==219)throw new Error("Data does not appear to be in a KDBush format.");var i=s>>4;if(i!==Hp)throw new Error("Got v".concat(i," data when expected v").concat(Hp,"."));var a=VS[s&15];if(!a)throw new Error("Unrecognized array type.");var[l]=new Uint16Array(e,2,1),[c]=new Uint32Array(e,4,1);return new a0(c,l,a,e)}constructor(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=s,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var a=VS.indexOf(this.ArrayType),l=e*2*this.ArrayType.BYTES_PER_ELEMENT,c=e*this.IndexArrayType.BYTES_PER_ELEMENT,d=(8-c%8)%8;if(a<0)throw new Error("Unexpected typed array class: ".concat(s,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,Zl,e),this.coords=new this.ArrayType(this.data,Zl+c+d,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(Zl+l+c+d),this.ids=new this.IndexArrayType(this.data,Zl,e),this.coords=new this.ArrayType(this.data,Zl+c+d,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(Hp<<4)+a]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){var s=this._pos>>1;return this.ids[s]=s,this.coords[this._pos++]=e,this.coords[this._pos++]=t,s}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return Ym(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,s,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:a,coords:l,nodeSize:c}=this,d=[0,a.length-1,0],h=[];d.length;){var g=d.pop()||0,m=d.pop()||0,y=d.pop()||0;if(m-y<=c){for(var b=y;b<=m;b++){var S=l[2*b],_=l[2*b+1];S>=e&&S<=s&&_>=t&&_<=i&&h.push(a[b])}continue}var T=y+m>>1,C=l[2*T],M=l[2*T+1];C>=e&&C<=s&&M>=t&&M<=i&&h.push(a[T]),(g===0?e<=C:t<=M)&&(d.push(y),d.push(T-1),d.push(1-g)),(g===0?s>=C:i>=M)&&(d.push(T+1),d.push(m),d.push(1-g))}return h}within(e,t,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:i,coords:a,nodeSize:l}=this,c=[0,i.length-1,0],d=[],h=s*s;c.length;){var g=c.pop()||0,m=c.pop()||0,y=c.pop()||0;if(m-y<=l){for(var b=y;b<=m;b++)HS(a[2*b],a[2*b+1],e,t)<=h&&d.push(i[b]);continue}var S=y+m>>1,_=a[2*S],T=a[2*S+1];HS(_,T,e,t)<=h&&d.push(i[S]),(g===0?e-s<=_:t-s<=T)&&(c.push(y),c.push(S-1),c.push(1-g)),(g===0?e+s>=_:t+s>=T)&&(c.push(S+1),c.push(m),c.push(1-g))}return d}}function Ym(n,e,t,s,i,a){if(!(i-s<=t)){var l=s+i>>1;sE(n,e,l,s,i,a),Ym(n,e,t,s,l-1,1-a),Ym(n,e,t,l+1,i,1-a)}}function sE(n,e,t,s,i,a){for(;i>s;){if(i-s>600){var l=i-s+1,c=t-s+1,d=Math.log(l),h=.5*Math.exp(2*d/3),g=.5*Math.sqrt(d*h*(l-h)/l)*(c-l/2<0?-1:1),m=Math.max(s,Math.floor(t-c*h/l+g)),y=Math.min(i,Math.floor(t+(l-c)*h/l+g));sE(n,e,t,m,y,a)}var b=e[2*t+a],S=s,_=i;for(Ql(n,e,s,t),e[2*i+a]>b&&Ql(n,e,s,i);S<_;){for(Ql(n,e,S,_),S++,_--;e[2*S+a]<b;)S++;for(;e[2*_+a]>b;)_--}e[2*s+a]===b?Ql(n,e,s,_):(_++,Ql(n,e,_,i)),_<=t&&(s=_+1),t<=_&&(i=_-1)}}function Ql(n,e,t,s){Gp(n,t,s),Gp(e,2*t,2*s),Gp(e,2*t+1,2*s+1)}function Gp(n,e,t){var s=n[e];n[e]=n[t],n[t]=s}function HS(n,e,t,s){var i=n-t,a=e-s;return i*i+a*a}var c6={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:n=>n},GS=Math.fround||(n=>e=>(n[0]=+e,n[0]))(new Float32Array(1)),Vr=2,cr=3,$p=4,or=5,nE=6;class u6{constructor(e){this.options=Object.assign(Object.create(c6),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:t,minZoom:s,maxZoom:i}=this.options;t&&console.time("total time");var a="prepare ".concat(e.length," points");t&&console.time(a),this.points=e;for(var l=[],c=0;c<e.length;c++){var d=e[c];if(d.geometry){var[h,g]=d.geometry.coordinates,m=GS(yd(h)),y=GS(xd(g));l.push(m,y,1/0,c,-1,1),this.options.reduce&&l.push(0)}}var b=this.trees[i+1]=this._createTree(l);t&&console.timeEnd(a);for(var S=i;S>=s;S--){var _=+Date.now();b=this.trees[S]=this._createTree(this._cluster(b,S)),t&&console.log("z%d: %d clusters in %dms",S,b.numItems,+Date.now()-_)}return t&&console.timeEnd("total time"),this}getClusters(e,t){var s=((e[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[1])),a=e[2]===180?180:((e[2]+180)%360+360)%360-180,l=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)s=-180,a=180;else if(s>a){var c=this.getClusters([s,i,180,l],t),d=this.getClusters([-180,i,a,l],t);return c.concat(d)}var h=this.trees[this._limitZoom(t)],g=h.range(yd(s),xd(l),yd(a),xd(i)),m=h.data,y=[];for(var b of g){var S=this.stride*b;y.push(m[S+or]>1?$S(m,S,this.clusterProps):this.points[m[S+cr]])}return y}getChildren(e){var t=this._getOriginId(e),s=this._getOriginZoom(e),i="No cluster with the specified id.",a=this.trees[s];if(!a)throw new Error(i);var l=a.data;if(t*this.stride>=l.length)throw new Error(i);var c=this.options.radius/(this.options.extent*Math.pow(2,s-1)),d=l[t*this.stride],h=l[t*this.stride+1],g=a.within(d,h,c),m=[];for(var y of g){var b=y*this.stride;l[b+$p]===e&&m.push(l[b+or]>1?$S(l,b,this.clusterProps):this.points[l[b+cr]])}if(m.length===0)throw new Error(i);return m}getLeaves(e,t,s){t=t||10,s=s||0;var i=[];return this._appendLeaves(i,e,t,s,0),i}getTile(e,t,s){var i=this.trees[this._limitZoom(e)],a=Math.pow(2,e),{extent:l,radius:c}=this.options,d=c/l,h=(s-d)/a,g=(s+1+d)/a,m={features:[]};return this._addTileFeatures(i.range((t-d)/a,h,(t+1+d)/a,g),i.data,t,s,a,m),t===0&&this._addTileFeatures(i.range(1-d/a,h,1,g),i.data,a,s,a,m),t===a-1&&this._addTileFeatures(i.range(0,h,d/a,g),i.data,-1,s,a,m),m.features.length?m:null}getClusterExpansionZoom(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var s=this.getChildren(e);if(t++,s.length!==1)break;e=s[0].properties.cluster_id}return t}_appendLeaves(e,t,s,i,a){var l=this.getChildren(t);for(var c of l){var d=c.properties;if(d&&d.cluster?a+d.point_count<=i?a+=d.point_count:a=this._appendLeaves(e,d.cluster_id,s,i,a):a<i?a++:e.push(c),e.length===s)break}return a}_createTree(e){for(var t=new a0(e.length/this.stride|0,this.options.nodeSize,Float32Array),s=0;s<e.length;s+=this.stride)t.add(e[s],e[s+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,s,i,a,l){for(var c of e){var d=c*this.stride,h=t[d+or]>1,g=void 0,m=void 0,y=void 0;if(h)g=iE(t,d,this.clusterProps),m=t[d],y=t[d+1];else{var b=this.points[t[d+cr]];g=b.properties;var[S,_]=b.geometry.coordinates;m=yd(S),y=xd(_)}var T={type:1,geometry:[[Math.round(this.options.extent*(m*a-s)),Math.round(this.options.extent*(y*a-i))]],tags:g},C=void 0;h||this.options.generateId?C=t[d+cr]:C=this.points[t[d+cr]].id,C!==void 0&&(T.id=C),l.features.push(T)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){for(var{radius:s,extent:i,reduce:a,minPoints:l}=this.options,c=s/(i*Math.pow(2,t)),d=e.data,h=[],g=this.stride,m=0;m<d.length;m+=g)if(!(d[m+Vr]<=t)){d[m+Vr]=t;var y=d[m],b=d[m+1],S=e.within(d[m],d[m+1],c),_=d[m+or],T=_;for(var C of S){var M=C*g;d[M+Vr]>t&&(T+=d[M+or])}if(T>_&&T>=l){var O=y*_,L=b*_,j=void 0,D=-1,k=((m/g|0)<<5)+(t+1)+this.points.length;for(var B of S){var P=B*g;if(!(d[P+Vr]<=t)){d[P+Vr]=t;var z=d[P+or];O+=d[P]*z,L+=d[P+1]*z,d[P+$p]=k,a&&(j||(j=this._map(d,m,!0),D=this.clusterProps.length,this.clusterProps.push(j)),a(j,this._map(d,P)))}}d[m+$p]=k,h.push(O/T,L/T,1/0,k,-1,T),a&&h.push(D)}else{for(var I=0;I<g;I++)h.push(d[m+I]);if(T>1)for(var F of S){var ee=F*g;if(!(d[ee+Vr]<=t)){d[ee+Vr]=t;for(var X=0;X<g;X++)h.push(d[ee+X])}}}}return h}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,s){if(e[t+or]>1){var i=this.clusterProps[e[t+nE]];return s?Object.assign({},i):i}var a=this.points[e[t+cr]].properties,l=this.options.map(a);return s&&l===a?Object.assign({},l):l}}function $S(n,e,t){return{type:"Feature",id:n[e+cr],properties:iE(n,e,t),geometry:{type:"Point",coordinates:[d6(n[e]),h6(n[e+1])]}}}function iE(n,e,t){var s=n[e+or],i=s>=1e4?"".concat(Math.round(s/1e3),"k"):s>=1e3?"".concat(Math.round(s/100)/10,"k"):s,a=n[e+nE],l=a===-1?{}:Object.assign({},t[a]);return Object.assign(l,{cluster:!0,cluster_id:n[e+cr],point_count:s,point_count_abbreviated:i})}function yd(n){return n/360+.5}function xd(n){var e=Math.sin(n*Math.PI/180),t=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return t<0?0:t>1?1:t}function d6(n){return(n-.5)*360}function h6(n){var e=(180-n*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function f6(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t}class Qs{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class qm{constructor(e){var{markers:t,position:s}=e;this.markers=t,s&&(s instanceof google.maps.LatLng?this._position=s:this._position=new google.maps.LatLng(s))}get bounds(){if(!(this.markers.length===0&&!this._position)){var e=new google.maps.LatLngBounds(this._position,this._position);for(var t of this.markers)e.extend(Qs.getPosition(t));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>Qs.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(Qs.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class g6{constructor(e){var{maxZoom:t=16}=e;this.maxZoom=t}noop(e){var{markers:t}=e;return p6(t)}}var p6=n=>{var e=n.map(t=>new qm({position:Qs.getPosition(t),markers:[t]}));return e};class m6 extends g6{constructor(e){var{maxZoom:t,radius:s=60}=e,i=f6(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new u6(Object.assign({maxZoom:this.maxZoom,radius:s},i))}calculate(e){var t=!1,s={zoom:e.map.getZoom()};if(!FS(e.markers,this.markers)){t=!0,this.markers=[...e.markers];var i=this.markers.map(a=>{var l=Qs.getPosition(a),c=[l.lng(),l.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:c},properties:{marker:a}}});this.superCluster.load(i)}return t||(this.state.zoom<=this.maxZoom||s.zoom<=this.maxZoom)&&(t=!FS(this.state,s)),this.state=s,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster(e){var{map:t}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(s=>this.transformCluster(s))}transformCluster(e){var{geometry:{coordinates:[t,s]},properties:i}=e;if(i.cluster)return new qm({markers:this.superCluster.getLeaves(i.cluster_id,1/0).map(l=>l.properties.marker),position:{lat:s,lng:t}});var a=i.marker;return new qm({markers:[a],position:Qs.getPosition(a)})}}class v6{constructor(e,t){this.markers={sum:e.length};var s=t.map(a=>a.count),i=s.reduce((a,l)=>a+l,0);this.clusters={count:t.length,markers:{mean:i/t.length,sum:i,min:Math.min(...s),max:Math.max(...s)}}}}class y6{render(e,t,s){var{count:i,position:a}=e,l=i>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",c='<svg fill="'.concat(l,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(i,`</text>
</svg>`),d="Cluster of ".concat(i," markers"),h=Number(google.maps.Marker.MAX_ZINDEX)+i;if(Qs.isAdvancedMarkerAvailable(s)){var g=new DOMParser,m=g.parseFromString(c,"image/svg+xml").documentElement;m.setAttribute("transform","translate(0 25)");var y={map:s,position:a,zIndex:h,title:d,content:m};return new google.maps.marker.AdvancedMarkerElement(y)}var b={position:a,zIndex:h,title:d,icon:{url:"data:image/svg+xml;base64,".concat(btoa(c)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(b)}}function x6(n,e){for(var t in e.prototype)n.prototype[t]=e.prototype[t]}class o0{constructor(){x6(o0,google.maps.OverlayView)}}var pc;(function(n){n.CLUSTERING_BEGIN="clusteringbegin",n.CLUSTERING_END="clusteringend",n.CLUSTER_CLICK="click"})(pc||(pc={}));var b6=(n,e,t)=>{t.fitBounds(e.bounds)};class w6 extends o0{constructor(e){var{map:t,markers:s=[],algorithmOptions:i={},algorithm:a=new m6(i),renderer:l=new y6,onClusterClick:c=b6}=e;super(),this.markers=[...s],this.clusters=[],this.algorithm=a,this.renderer=l,this.onClusterClick=c,t&&this.setMap(t)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach(s=>{this.addMarker(s,!0)}),t||this.render()}removeMarker(e,t){var s=this.markers.indexOf(e);return s===-1?!1:(Qs.setMap(e,null),this.markers.splice(s,1),t||this.render(),!0)}removeMarkers(e,t){var s=!1;return e.forEach(i=>{s=this.removeMarker(i,!0)||s}),s&&!t&&this.render(),s}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,pc.CLUSTERING_BEGIN,this);var{clusters:t,changed:s}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(s||s==null){var i=new Set;for(var a of t)a.markers.length==1&&i.add(a.markers[0]);var l=[];for(var c of this.clusters)c.marker!=null&&(c.markers.length==1?i.has(c.marker)||Qs.setMap(c.marker,null):l.push(c.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame(()=>l.forEach(d=>Qs.setMap(d,null)))}google.maps.event.trigger(this,pc.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>Qs.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new v6(this.markers,this.clusters),t=this.getMap();this.clusters.forEach(s=>{s.markers.length===1?s.marker=s.markers[0]:(s.marker=this.renderer.render(s,e,t),s.markers.forEach(i=>Qs.setMap(i,null)),this.onClusterClick&&s.marker.addListener("click",i=>{google.maps.event.trigger(this,pc.CLUSTER_CLICK,s),this.onClusterClick(i,s,t)})),Qs.setMap(s.marker,t)})}}function YS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function qS(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?YS(Object(t),!0).forEach(function(s){ue(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):YS(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function S6(n){var e=wR(),[t,s]=x.useState(null);return x.useEffect(()=>{if(e&&t===null){var i=new w6(qS(qS({},n),{},{map:e}));s(i)}},[e]),t}function _6(n){var{children:e,options:t}=n,s=S6(t);return s!==null?e(s):null}x.memo(_6);var WS={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},XS={options(n,e){n.setOptions(e)},position(n,e){n.setPosition(e)},zIndex(n,e){n.setZIndex(e)}};function C6(n){var{children:e,anchor:t,options:s,position:i,zIndex:a,onCloseClick:l,onDomReady:c,onContentChanged:d,onPositionChanged:h,onZindexChanged:g,onLoad:m,onUnmount:y}=n,b=x.useContext($e),[S,_]=x.useState(null),[T,C]=x.useState(null),[M,O]=x.useState(null),[L,j]=x.useState(null),[D,k]=x.useState(null),[B,P]=x.useState(null),z=x.useRef(null);return x.useEffect(()=>{S!==null&&(S.close(),t?S.open(b,t):S.getPosition()&&S.open(b))},[b,S,t]),x.useEffect(()=>{s&&S!==null&&S.setOptions(s)},[S,s]),x.useEffect(()=>{i&&S!==null&&S.setPosition(i)},[i]),x.useEffect(()=>{typeof a=="number"&&S!==null&&S.setZIndex(a)},[a]),x.useEffect(()=>{S&&l&&(T!==null&&google.maps.event.removeListener(T),C(google.maps.event.addListener(S,"closeclick",l)))},[l]),x.useEffect(()=>{S&&c&&(M!==null&&google.maps.event.removeListener(M),O(google.maps.event.addListener(S,"domready",c)))},[c]),x.useEffect(()=>{S&&d&&(L!==null&&google.maps.event.removeListener(L),j(google.maps.event.addListener(S,"content_changed",d)))},[d]),x.useEffect(()=>{S&&h&&(D!==null&&google.maps.event.removeListener(D),k(google.maps.event.addListener(S,"position_changed",h)))},[h]),x.useEffect(()=>{S&&g&&(B!==null&&google.maps.event.removeListener(B),P(google.maps.event.addListener(S,"zindex_changed",g)))},[g]),x.useEffect(()=>{var I=new google.maps.InfoWindow(s);return _(I),z.current=document.createElement("div"),l&&C(google.maps.event.addListener(I,"closeclick",l)),c&&O(google.maps.event.addListener(I,"domready",c)),d&&j(google.maps.event.addListener(I,"content_changed",d)),h&&k(google.maps.event.addListener(I,"position_changed",h)),g&&P(google.maps.event.addListener(I,"zindex_changed",g)),I.setContent(z.current),i&&I.setPosition(i),a&&I.setZIndex(a),t?I.open(b,t):I.getPosition()?I.open(b):Jt(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),m&&m(I),()=>{T&&google.maps.event.removeListener(T),L&&google.maps.event.removeListener(L),M&&google.maps.event.removeListener(M),D&&google.maps.event.removeListener(D),B&&google.maps.event.removeListener(B),y&&y(I),I.close()}},[]),z.current?No.createPortal(x.Children.only(e),z.current):null}x.memo(C6);class T6 extends x.PureComponent{constructor(){super(...arguments),ue(this,"registeredEvents",[]),ue(this,"containerElement",null),ue(this,"state",{infoWindow:null}),ue(this,"open",(e,t)=>{t?e.open(this.context,t):e.getPosition()?e.open(this.context):Jt(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),ue(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=Ke({updaterMap:XS,eventMap:WS,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&(tt(this.registeredEvents),this.registeredEvents=Ke({updaterMap:XS,eventMap:WS,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&(tt(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?No.createPortal(x.Children.only(this.props.children),this.containerElement):null}}ue(T6,"contextType",$e);function KS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function xh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KS(Object(t),!0).forEach(function(s){ue(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):KS(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var ZS={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},QS={draggable(n,e){n.setDraggable(e)},editable(n,e){n.setEditable(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},path(n,e){n.setPath(e)},visible(n,e){n.setVisible(e)}},E6={};function j6(n){var{options:e,draggable:t,editable:s,visible:i,path:a,onDblClick:l,onDragEnd:c,onDragStart:d,onMouseDown:h,onMouseMove:g,onMouseOut:m,onMouseOver:y,onMouseUp:b,onRightClick:S,onClick:_,onDrag:T,onLoad:C,onUnmount:M}=n,O=x.useContext($e),[L,j]=x.useState(null),[D,k]=x.useState(null),[B,P]=x.useState(null),[z,I]=x.useState(null),[F,ee]=x.useState(null),[X,ae]=x.useState(null),[R,V]=x.useState(null),[K,te]=x.useState(null),[N,q]=x.useState(null),[de,ne]=x.useState(null),[ve,Q]=x.useState(null),[Se,Oe]=x.useState(null);return x.useEffect(()=>{L!==null&&L.setMap(O)},[O]),x.useEffect(()=>{typeof e<"u"&&L!==null&&L.setOptions(e)},[L,e]),x.useEffect(()=>{typeof t<"u"&&L!==null&&L.setDraggable(t)},[L,t]),x.useEffect(()=>{typeof s<"u"&&L!==null&&L.setEditable(s)},[L,s]),x.useEffect(()=>{typeof i<"u"&&L!==null&&L.setVisible(i)},[L,i]),x.useEffect(()=>{typeof a<"u"&&L!==null&&L.setPath(a)},[L,a]),x.useEffect(()=>{L&&l&&(D!==null&&google.maps.event.removeListener(D),k(google.maps.event.addListener(L,"dblclick",l)))},[l]),x.useEffect(()=>{L&&c&&(B!==null&&google.maps.event.removeListener(B),P(google.maps.event.addListener(L,"dragend",c)))},[c]),x.useEffect(()=>{L&&d&&(z!==null&&google.maps.event.removeListener(z),I(google.maps.event.addListener(L,"dragstart",d)))},[d]),x.useEffect(()=>{L&&h&&(F!==null&&google.maps.event.removeListener(F),ee(google.maps.event.addListener(L,"mousedown",h)))},[h]),x.useEffect(()=>{L&&g&&(X!==null&&google.maps.event.removeListener(X),ae(google.maps.event.addListener(L,"mousemove",g)))},[g]),x.useEffect(()=>{L&&m&&(R!==null&&google.maps.event.removeListener(R),V(google.maps.event.addListener(L,"mouseout",m)))},[m]),x.useEffect(()=>{L&&y&&(K!==null&&google.maps.event.removeListener(K),te(google.maps.event.addListener(L,"mouseover",y)))},[y]),x.useEffect(()=>{L&&b&&(N!==null&&google.maps.event.removeListener(N),q(google.maps.event.addListener(L,"mouseup",b)))},[b]),x.useEffect(()=>{L&&S&&(de!==null&&google.maps.event.removeListener(de),ne(google.maps.event.addListener(L,"rightclick",S)))},[S]),x.useEffect(()=>{L&&_&&(ve!==null&&google.maps.event.removeListener(ve),Q(google.maps.event.addListener(L,"click",_)))},[_]),x.useEffect(()=>{L&&T&&(Se!==null&&google.maps.event.removeListener(Se),Oe(google.maps.event.addListener(L,"drag",T)))},[T]),x.useEffect(()=>{var Te=new google.maps.Polyline(xh(xh({},e||E6),{},{map:O}));return a&&Te.setPath(a),typeof i<"u"&&Te.setVisible(i),typeof s<"u"&&Te.setEditable(s),typeof t<"u"&&Te.setDraggable(t),l&&k(google.maps.event.addListener(Te,"dblclick",l)),c&&P(google.maps.event.addListener(Te,"dragend",c)),d&&I(google.maps.event.addListener(Te,"dragstart",d)),h&&ee(google.maps.event.addListener(Te,"mousedown",h)),g&&ae(google.maps.event.addListener(Te,"mousemove",g)),m&&V(google.maps.event.addListener(Te,"mouseout",m)),y&&te(google.maps.event.addListener(Te,"mouseover",y)),b&&q(google.maps.event.addListener(Te,"mouseup",b)),S&&ne(google.maps.event.addListener(Te,"rightclick",S)),_&&Q(google.maps.event.addListener(Te,"click",_)),T&&Oe(google.maps.event.addListener(Te,"drag",T)),j(Te),C&&C(Te),()=>{D!==null&&google.maps.event.removeListener(D),B!==null&&google.maps.event.removeListener(B),z!==null&&google.maps.event.removeListener(z),F!==null&&google.maps.event.removeListener(F),X!==null&&google.maps.event.removeListener(X),R!==null&&google.maps.event.removeListener(R),K!==null&&google.maps.event.removeListener(K),N!==null&&google.maps.event.removeListener(N),de!==null&&google.maps.event.removeListener(de),ve!==null&&google.maps.event.removeListener(ve),M&&M(Te),Te.setMap(null)}},[]),null}x.memo(j6);class k6 extends x.PureComponent{constructor(){super(...arguments),ue(this,"registeredEvents",[]),ue(this,"state",{polyline:null}),ue(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(xh(xh({},this.props.options),{},{map:this.context}));this.registeredEvents=Ke({updaterMap:QS,eventMap:ZS,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&(tt(this.registeredEvents),this.registeredEvents=Ke({updaterMap:QS,eventMap:ZS,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),tt(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}ue(k6,"contextType",$e);function JS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function e_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?JS(Object(t),!0).forEach(function(s){ue(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):JS(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var t_={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},s_={draggable(n,e){n.setDraggable(e)},editable(n,e){n.setEditable(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},path(n,e){n.setPath(e)},paths(n,e){n.setPaths(e)},visible(n,e){n.setVisible(e)}};function M6(n){var{options:e,draggable:t,editable:s,visible:i,path:a,paths:l,onDblClick:c,onDragEnd:d,onDragStart:h,onMouseDown:g,onMouseMove:m,onMouseOut:y,onMouseOver:b,onMouseUp:S,onRightClick:_,onClick:T,onDrag:C,onLoad:M,onUnmount:O,onEdit:L}=n,j=x.useContext($e),[D,k]=x.useState(null),[B,P]=x.useState(null),[z,I]=x.useState(null),[F,ee]=x.useState(null),[X,ae]=x.useState(null),[R,V]=x.useState(null),[K,te]=x.useState(null),[N,q]=x.useState(null),[de,ne]=x.useState(null),[ve,Q]=x.useState(null),[Se,Oe]=x.useState(null),[Te,Ie]=x.useState(null);return x.useEffect(()=>{D!==null&&D.setMap(j)},[j]),x.useEffect(()=>{typeof e<"u"&&D!==null&&D.setOptions(e)},[D,e]),x.useEffect(()=>{typeof t<"u"&&D!==null&&D.setDraggable(t)},[D,t]),x.useEffect(()=>{typeof s<"u"&&D!==null&&D.setEditable(s)},[D,s]),x.useEffect(()=>{typeof i<"u"&&D!==null&&D.setVisible(i)},[D,i]),x.useEffect(()=>{typeof a<"u"&&D!==null&&D.setPath(a)},[D,a]),x.useEffect(()=>{typeof l<"u"&&D!==null&&D.setPaths(l)},[D,l]),x.useEffect(()=>{D&&typeof c=="function"&&(B!==null&&google.maps.event.removeListener(B),P(google.maps.event.addListener(D,"dblclick",c)))},[c]),x.useEffect(()=>{D&&(google.maps.event.addListener(D.getPath(),"insert_at",()=>{L?.(D)}),google.maps.event.addListener(D.getPath(),"set_at",()=>{L?.(D)}),google.maps.event.addListener(D.getPath(),"remove_at",()=>{L?.(D)}))},[D,L]),x.useEffect(()=>{D&&typeof d=="function"&&(z!==null&&google.maps.event.removeListener(z),I(google.maps.event.addListener(D,"dragend",d)))},[d]),x.useEffect(()=>{D&&typeof h=="function"&&(F!==null&&google.maps.event.removeListener(F),ee(google.maps.event.addListener(D,"dragstart",h)))},[h]),x.useEffect(()=>{D&&typeof g=="function"&&(X!==null&&google.maps.event.removeListener(X),ae(google.maps.event.addListener(D,"mousedown",g)))},[g]),x.useEffect(()=>{D&&typeof m=="function"&&(R!==null&&google.maps.event.removeListener(R),V(google.maps.event.addListener(D,"mousemove",m)))},[m]),x.useEffect(()=>{D&&typeof y=="function"&&(K!==null&&google.maps.event.removeListener(K),te(google.maps.event.addListener(D,"mouseout",y)))},[y]),x.useEffect(()=>{D&&typeof b=="function"&&(N!==null&&google.maps.event.removeListener(N),q(google.maps.event.addListener(D,"mouseover",b)))},[b]),x.useEffect(()=>{D&&typeof S=="function"&&(de!==null&&google.maps.event.removeListener(de),ne(google.maps.event.addListener(D,"mouseup",S)))},[S]),x.useEffect(()=>{D&&typeof _=="function"&&(ve!==null&&google.maps.event.removeListener(ve),Q(google.maps.event.addListener(D,"rightclick",_)))},[_]),x.useEffect(()=>{D&&typeof T=="function"&&(Se!==null&&google.maps.event.removeListener(Se),Oe(google.maps.event.addListener(D,"click",T)))},[T]),x.useEffect(()=>{D&&typeof C=="function"&&(Te!==null&&google.maps.event.removeListener(Te),Ie(google.maps.event.addListener(D,"drag",C)))},[C]),x.useEffect(()=>{var oe=new google.maps.Polygon(e_(e_({},e),{},{map:j}));return a&&oe.setPath(a),l&&oe.setPaths(l),typeof i<"u"&&oe.setVisible(i),typeof s<"u"&&oe.setEditable(s),typeof t<"u"&&oe.setDraggable(t),c&&P(google.maps.event.addListener(oe,"dblclick",c)),d&&I(google.maps.event.addListener(oe,"dragend",d)),h&&ee(google.maps.event.addListener(oe,"dragstart",h)),g&&ae(google.maps.event.addListener(oe,"mousedown",g)),m&&V(google.maps.event.addListener(oe,"mousemove",m)),y&&te(google.maps.event.addListener(oe,"mouseout",y)),b&&q(google.maps.event.addListener(oe,"mouseover",b)),S&&ne(google.maps.event.addListener(oe,"mouseup",S)),_&&Q(google.maps.event.addListener(oe,"rightclick",_)),T&&Oe(google.maps.event.addListener(oe,"click",T)),C&&Ie(google.maps.event.addListener(oe,"drag",C)),k(oe),M&&M(oe),()=>{B!==null&&google.maps.event.removeListener(B),z!==null&&google.maps.event.removeListener(z),F!==null&&google.maps.event.removeListener(F),X!==null&&google.maps.event.removeListener(X),R!==null&&google.maps.event.removeListener(R),K!==null&&google.maps.event.removeListener(K),N!==null&&google.maps.event.removeListener(N),de!==null&&google.maps.event.removeListener(de),ve!==null&&google.maps.event.removeListener(ve),Se!==null&&google.maps.event.removeListener(Se),O&&O(oe),oe.setMap(null)}},[]),null}x.memo(M6);class O6 extends x.PureComponent{constructor(){super(...arguments),ue(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=Ke({updaterMap:s_,eventMap:t_,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(tt(this.registeredEvents),this.registeredEvents=Ke({updaterMap:s_,eventMap:t_,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),tt(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}ue(O6,"contextType",$e);function n_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function bh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?n_(Object(t),!0).forEach(function(s){ue(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):n_(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var i_={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},r_={bounds(n,e){n.setBounds(e)},draggable(n,e){n.setDraggable(e)},editable(n,e){n.setEditable(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},visible(n,e){n.setVisible(e)}};function L6(n){var{options:e,bounds:t,draggable:s,editable:i,visible:a,onDblClick:l,onDragEnd:c,onDragStart:d,onMouseDown:h,onMouseMove:g,onMouseOut:m,onMouseOver:y,onMouseUp:b,onRightClick:S,onClick:_,onDrag:T,onBoundsChanged:C,onLoad:M,onUnmount:O}=n,L=x.useContext($e),[j,D]=x.useState(null),[k,B]=x.useState(null),[P,z]=x.useState(null),[I,F]=x.useState(null),[ee,X]=x.useState(null),[ae,R]=x.useState(null),[V,K]=x.useState(null),[te,N]=x.useState(null),[q,de]=x.useState(null),[ne,ve]=x.useState(null),[Q,Se]=x.useState(null),[Oe,Te]=x.useState(null),[Ie,oe]=x.useState(null);return x.useEffect(()=>{j!==null&&j.setMap(L)},[L]),x.useEffect(()=>{typeof e<"u"&&j!==null&&j.setOptions(e)},[j,e]),x.useEffect(()=>{typeof s<"u"&&j!==null&&j.setDraggable(s)},[j,s]),x.useEffect(()=>{typeof i<"u"&&j!==null&&j.setEditable(i)},[j,i]),x.useEffect(()=>{typeof a<"u"&&j!==null&&j.setVisible(a)},[j,a]),x.useEffect(()=>{typeof t<"u"&&j!==null&&j.setBounds(t)},[j,t]),x.useEffect(()=>{j&&l&&(k!==null&&google.maps.event.removeListener(k),B(google.maps.event.addListener(j,"dblclick",l)))},[l]),x.useEffect(()=>{j&&c&&(P!==null&&google.maps.event.removeListener(P),z(google.maps.event.addListener(j,"dragend",c)))},[c]),x.useEffect(()=>{j&&d&&(I!==null&&google.maps.event.removeListener(I),F(google.maps.event.addListener(j,"dragstart",d)))},[d]),x.useEffect(()=>{j&&h&&(ee!==null&&google.maps.event.removeListener(ee),X(google.maps.event.addListener(j,"mousedown",h)))},[h]),x.useEffect(()=>{j&&g&&(ae!==null&&google.maps.event.removeListener(ae),R(google.maps.event.addListener(j,"mousemove",g)))},[g]),x.useEffect(()=>{j&&m&&(V!==null&&google.maps.event.removeListener(V),K(google.maps.event.addListener(j,"mouseout",m)))},[m]),x.useEffect(()=>{j&&y&&(te!==null&&google.maps.event.removeListener(te),N(google.maps.event.addListener(j,"mouseover",y)))},[y]),x.useEffect(()=>{j&&b&&(q!==null&&google.maps.event.removeListener(q),de(google.maps.event.addListener(j,"mouseup",b)))},[b]),x.useEffect(()=>{j&&S&&(ne!==null&&google.maps.event.removeListener(ne),ve(google.maps.event.addListener(j,"rightclick",S)))},[S]),x.useEffect(()=>{j&&_&&(Q!==null&&google.maps.event.removeListener(Q),Se(google.maps.event.addListener(j,"click",_)))},[_]),x.useEffect(()=>{j&&T&&(Oe!==null&&google.maps.event.removeListener(Oe),Te(google.maps.event.addListener(j,"drag",T)))},[T]),x.useEffect(()=>{j&&C&&(Ie!==null&&google.maps.event.removeListener(Ie),oe(google.maps.event.addListener(j,"bounds_changed",C)))},[C]),x.useEffect(()=>{var xe=new google.maps.Rectangle(bh(bh({},e),{},{map:L}));return typeof a<"u"&&xe.setVisible(a),typeof i<"u"&&xe.setEditable(i),typeof s<"u"&&xe.setDraggable(s),typeof t<"u"&&xe.setBounds(t),l&&B(google.maps.event.addListener(xe,"dblclick",l)),c&&z(google.maps.event.addListener(xe,"dragend",c)),d&&F(google.maps.event.addListener(xe,"dragstart",d)),h&&X(google.maps.event.addListener(xe,"mousedown",h)),g&&R(google.maps.event.addListener(xe,"mousemove",g)),m&&K(google.maps.event.addListener(xe,"mouseout",m)),y&&N(google.maps.event.addListener(xe,"mouseover",y)),b&&de(google.maps.event.addListener(xe,"mouseup",b)),S&&ve(google.maps.event.addListener(xe,"rightclick",S)),_&&Se(google.maps.event.addListener(xe,"click",_)),T&&Te(google.maps.event.addListener(xe,"drag",T)),C&&oe(google.maps.event.addListener(xe,"bounds_changed",C)),D(xe),M&&M(xe),()=>{k!==null&&google.maps.event.removeListener(k),P!==null&&google.maps.event.removeListener(P),I!==null&&google.maps.event.removeListener(I),ee!==null&&google.maps.event.removeListener(ee),ae!==null&&google.maps.event.removeListener(ae),V!==null&&google.maps.event.removeListener(V),te!==null&&google.maps.event.removeListener(te),q!==null&&google.maps.event.removeListener(q),ne!==null&&google.maps.event.removeListener(ne),Q!==null&&google.maps.event.removeListener(Q),Oe!==null&&google.maps.event.removeListener(Oe),Ie!==null&&google.maps.event.removeListener(Ie),O&&O(xe),xe.setMap(null)}},[]),null}x.memo(L6);class A6 extends x.PureComponent{constructor(){super(...arguments),ue(this,"registeredEvents",[]),ue(this,"state",{rectangle:null}),ue(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(bh(bh({},this.props.options),{},{map:this.context}));this.registeredEvents=Ke({updaterMap:r_,eventMap:i_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&(tt(this.registeredEvents),this.registeredEvents=Ke({updaterMap:r_,eventMap:i_,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),tt(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}ue(A6,"contextType",$e);function a_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function wh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?a_(Object(t),!0).forEach(function(s){ue(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):a_(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var o_={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},l_={center(n,e){n.setCenter(e)},draggable(n,e){n.setDraggable(e)},editable(n,e){n.setEditable(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},radius(n,e){n.setRadius(e)},visible(n,e){n.setVisible(e)}},D6={};function N6(n){var{options:e,center:t,radius:s,draggable:i,editable:a,visible:l,onDblClick:c,onDragEnd:d,onDragStart:h,onMouseDown:g,onMouseMove:m,onMouseOut:y,onMouseOver:b,onMouseUp:S,onRightClick:_,onClick:T,onDrag:C,onCenterChanged:M,onRadiusChanged:O,onLoad:L,onUnmount:j}=n,D=x.useContext($e),[k,B]=x.useState(null),[P,z]=x.useState(null),[I,F]=x.useState(null),[ee,X]=x.useState(null),[ae,R]=x.useState(null),[V,K]=x.useState(null),[te,N]=x.useState(null),[q,de]=x.useState(null),[ne,ve]=x.useState(null),[Q,Se]=x.useState(null),[Oe,Te]=x.useState(null),[Ie,oe]=x.useState(null),[xe,Ee]=x.useState(null),[$,ce]=x.useState(null);return x.useEffect(()=>{k!==null&&k.setMap(D)},[D]),x.useEffect(()=>{typeof e<"u"&&k!==null&&k.setOptions(e)},[k,e]),x.useEffect(()=>{typeof i<"u"&&k!==null&&k.setDraggable(i)},[k,i]),x.useEffect(()=>{typeof a<"u"&&k!==null&&k.setEditable(a)},[k,a]),x.useEffect(()=>{typeof l<"u"&&k!==null&&k.setVisible(l)},[k,l]),x.useEffect(()=>{typeof s=="number"&&k!==null&&k.setRadius(s)},[k,s]),x.useEffect(()=>{typeof t<"u"&&k!==null&&k.setCenter(t)},[k,t]),x.useEffect(()=>{k&&c&&(P!==null&&google.maps.event.removeListener(P),z(google.maps.event.addListener(k,"dblclick",c)))},[c]),x.useEffect(()=>{k&&d&&(I!==null&&google.maps.event.removeListener(I),F(google.maps.event.addListener(k,"dragend",d)))},[d]),x.useEffect(()=>{k&&h&&(ee!==null&&google.maps.event.removeListener(ee),X(google.maps.event.addListener(k,"dragstart",h)))},[h]),x.useEffect(()=>{k&&g&&(ae!==null&&google.maps.event.removeListener(ae),R(google.maps.event.addListener(k,"mousedown",g)))},[g]),x.useEffect(()=>{k&&m&&(V!==null&&google.maps.event.removeListener(V),K(google.maps.event.addListener(k,"mousemove",m)))},[m]),x.useEffect(()=>{k&&y&&(te!==null&&google.maps.event.removeListener(te),N(google.maps.event.addListener(k,"mouseout",y)))},[y]),x.useEffect(()=>{k&&b&&(q!==null&&google.maps.event.removeListener(q),de(google.maps.event.addListener(k,"mouseover",b)))},[b]),x.useEffect(()=>{k&&S&&(ne!==null&&google.maps.event.removeListener(ne),ve(google.maps.event.addListener(k,"mouseup",S)))},[S]),x.useEffect(()=>{k&&_&&(Q!==null&&google.maps.event.removeListener(Q),Se(google.maps.event.addListener(k,"rightclick",_)))},[_]),x.useEffect(()=>{k&&T&&(Oe!==null&&google.maps.event.removeListener(Oe),Te(google.maps.event.addListener(k,"click",T)))},[T]),x.useEffect(()=>{k&&C&&(Ie!==null&&google.maps.event.removeListener(Ie),oe(google.maps.event.addListener(k,"drag",C)))},[C]),x.useEffect(()=>{k&&M&&(xe!==null&&google.maps.event.removeListener(xe),Ee(google.maps.event.addListener(k,"center_changed",M)))},[T]),x.useEffect(()=>{k&&O&&($!==null&&google.maps.event.removeListener($),ce(google.maps.event.addListener(k,"radius_changed",O)))},[O]),x.useEffect(()=>{var he=new google.maps.Circle(wh(wh({},e||D6),{},{map:D}));return typeof s=="number"&&he.setRadius(s),typeof t<"u"&&he.setCenter(t),typeof s=="number"&&he.setRadius(s),typeof l<"u"&&he.setVisible(l),typeof a<"u"&&he.setEditable(a),typeof i<"u"&&he.setDraggable(i),c&&z(google.maps.event.addListener(he,"dblclick",c)),d&&F(google.maps.event.addListener(he,"dragend",d)),h&&X(google.maps.event.addListener(he,"dragstart",h)),g&&R(google.maps.event.addListener(he,"mousedown",g)),m&&K(google.maps.event.addListener(he,"mousemove",m)),y&&N(google.maps.event.addListener(he,"mouseout",y)),b&&de(google.maps.event.addListener(he,"mouseover",b)),S&&ve(google.maps.event.addListener(he,"mouseup",S)),_&&Se(google.maps.event.addListener(he,"rightclick",_)),T&&Te(google.maps.event.addListener(he,"click",T)),C&&oe(google.maps.event.addListener(he,"drag",C)),M&&Ee(google.maps.event.addListener(he,"center_changed",M)),O&&ce(google.maps.event.addListener(he,"radius_changed",O)),B(he),L&&L(he),()=>{P!==null&&google.maps.event.removeListener(P),I!==null&&google.maps.event.removeListener(I),ee!==null&&google.maps.event.removeListener(ee),ae!==null&&google.maps.event.removeListener(ae),V!==null&&google.maps.event.removeListener(V),te!==null&&google.maps.event.removeListener(te),q!==null&&google.maps.event.removeListener(q),ne!==null&&google.maps.event.removeListener(ne),Q!==null&&google.maps.event.removeListener(Q),Oe!==null&&google.maps.event.removeListener(Oe),xe!==null&&google.maps.event.removeListener(xe),$!==null&&google.maps.event.removeListener($),j&&j(he),he.setMap(null)}},[]),null}x.memo(N6);class P6 extends x.PureComponent{constructor(){super(...arguments),ue(this,"registeredEvents",[]),ue(this,"state",{circle:null}),ue(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(wh(wh({},this.props.options),{},{map:this.context}));this.registeredEvents=Ke({updaterMap:l_,eventMap:o_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&(tt(this.registeredEvents),this.registeredEvents=Ke({updaterMap:l_,eventMap:o_,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),tt(this.registeredEvents),(e=this.state.circle)===null||e===void 0||e.setMap(null)}}render(){return null}}ue(P6,"contextType",$e);function c_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function Sh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?c_(Object(t),!0).forEach(function(s){ue(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):c_(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var u_={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},d_={add(n,e){n.add(e)},addgeojson(n,e,t){n.addGeoJson(e,t)},contains(n,e){n.contains(e)},foreach(n,e){n.forEach(e)},loadgeojson(n,e,t,s){n.loadGeoJson(e,t,s)},overridestyle(n,e,t){n.overrideStyle(e,t)},remove(n,e){n.remove(e)},revertstyle(n,e){n.revertStyle(e)},controlposition(n,e){n.setControlPosition(e)},controls(n,e){n.setControls(e)},drawingmode(n,e){n.setDrawingMode(e)},map(n,e){n.setMap(e)},style(n,e){n.setStyle(e)},togeojson(n,e){n.toGeoJson(e)}};function R6(n){var{options:e,onClick:t,onDblClick:s,onMouseDown:i,onMouseMove:a,onMouseOut:l,onMouseOver:c,onMouseUp:d,onRightClick:h,onAddFeature:g,onRemoveFeature:m,onRemoveProperty:y,onSetGeometry:b,onSetProperty:S,onLoad:_,onUnmount:T}=n,C=x.useContext($e),[M,O]=x.useState(null),[L,j]=x.useState(null),[D,k]=x.useState(null),[B,P]=x.useState(null),[z,I]=x.useState(null),[F,ee]=x.useState(null),[X,ae]=x.useState(null),[R,V]=x.useState(null),[K,te]=x.useState(null),[N,q]=x.useState(null),[de,ne]=x.useState(null),[ve,Q]=x.useState(null),[Se,Oe]=x.useState(null),[Te,Ie]=x.useState(null);return x.useEffect(()=>{M!==null&&M.setMap(C)},[C]),x.useEffect(()=>{M&&s&&(L!==null&&google.maps.event.removeListener(L),j(google.maps.event.addListener(M,"dblclick",s)))},[s]),x.useEffect(()=>{M&&i&&(D!==null&&google.maps.event.removeListener(D),k(google.maps.event.addListener(M,"mousedown",i)))},[i]),x.useEffect(()=>{M&&a&&(B!==null&&google.maps.event.removeListener(B),P(google.maps.event.addListener(M,"mousemove",a)))},[a]),x.useEffect(()=>{M&&l&&(z!==null&&google.maps.event.removeListener(z),I(google.maps.event.addListener(M,"mouseout",l)))},[l]),x.useEffect(()=>{M&&c&&(F!==null&&google.maps.event.removeListener(F),ee(google.maps.event.addListener(M,"mouseover",c)))},[c]),x.useEffect(()=>{M&&d&&(X!==null&&google.maps.event.removeListener(X),ae(google.maps.event.addListener(M,"mouseup",d)))},[d]),x.useEffect(()=>{M&&h&&(R!==null&&google.maps.event.removeListener(R),V(google.maps.event.addListener(M,"rightclick",h)))},[h]),x.useEffect(()=>{M&&t&&(K!==null&&google.maps.event.removeListener(K),te(google.maps.event.addListener(M,"click",t)))},[t]),x.useEffect(()=>{M&&g&&(N!==null&&google.maps.event.removeListener(N),q(google.maps.event.addListener(M,"addfeature",g)))},[g]),x.useEffect(()=>{M&&m&&(de!==null&&google.maps.event.removeListener(de),ne(google.maps.event.addListener(M,"removefeature",m)))},[m]),x.useEffect(()=>{M&&y&&(ve!==null&&google.maps.event.removeListener(ve),Q(google.maps.event.addListener(M,"removeproperty",y)))},[y]),x.useEffect(()=>{M&&b&&(Se!==null&&google.maps.event.removeListener(Se),Oe(google.maps.event.addListener(M,"setgeometry",b)))},[b]),x.useEffect(()=>{M&&S&&(Te!==null&&google.maps.event.removeListener(Te),Ie(google.maps.event.addListener(M,"setproperty",S)))},[S]),x.useEffect(()=>{if(C!==null){var oe=new google.maps.Data(Sh(Sh({},e),{},{map:C}));s&&j(google.maps.event.addListener(oe,"dblclick",s)),i&&k(google.maps.event.addListener(oe,"mousedown",i)),a&&P(google.maps.event.addListener(oe,"mousemove",a)),l&&I(google.maps.event.addListener(oe,"mouseout",l)),c&&ee(google.maps.event.addListener(oe,"mouseover",c)),d&&ae(google.maps.event.addListener(oe,"mouseup",d)),h&&V(google.maps.event.addListener(oe,"rightclick",h)),t&&te(google.maps.event.addListener(oe,"click",t)),g&&q(google.maps.event.addListener(oe,"addfeature",g)),m&&ne(google.maps.event.addListener(oe,"removefeature",m)),y&&Q(google.maps.event.addListener(oe,"removeproperty",y)),b&&Oe(google.maps.event.addListener(oe,"setgeometry",b)),S&&Ie(google.maps.event.addListener(oe,"setproperty",S)),O(oe),_&&_(oe)}return()=>{M&&(L!==null&&google.maps.event.removeListener(L),D!==null&&google.maps.event.removeListener(D),B!==null&&google.maps.event.removeListener(B),z!==null&&google.maps.event.removeListener(z),F!==null&&google.maps.event.removeListener(F),X!==null&&google.maps.event.removeListener(X),R!==null&&google.maps.event.removeListener(R),K!==null&&google.maps.event.removeListener(K),N!==null&&google.maps.event.removeListener(N),de!==null&&google.maps.event.removeListener(de),ve!==null&&google.maps.event.removeListener(ve),Se!==null&&google.maps.event.removeListener(Se),Te!==null&&google.maps.event.removeListener(Te),T&&T(M),M.setMap(null))}},[]),null}x.memo(R6);class B6 extends x.PureComponent{constructor(){super(...arguments),ue(this,"registeredEvents",[]),ue(this,"state",{data:null}),ue(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var e=new google.maps.Data(Sh(Sh({},this.props.options),{},{map:this.context}));this.registeredEvents=Ke({updaterMap:d_,eventMap:u_,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&(tt(this.registeredEvents),this.registeredEvents=Ke({updaterMap:d_,eventMap:u_,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),tt(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}ue(B6,"contextType",$e);function h_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function f_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?h_(Object(t),!0).forEach(function(s){ue(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):h_(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var g_={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},p_={options(n,e){n.setOptions(e)},url(n,e){n.setUrl(e)},zIndex(n,e){n.setZIndex(e)}};class U6 extends x.PureComponent{constructor(){super(...arguments),ue(this,"registeredEvents",[]),ue(this,"state",{kmlLayer:null}),ue(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(f_(f_({},this.props.options),{},{map:this.context}));this.registeredEvents=Ke({updaterMap:p_,eventMap:g_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&(tt(this.registeredEvents),this.registeredEvents=Ke({updaterMap:p_,eventMap:g_,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),tt(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}ue(U6,"contextType",$e);function rE(n,e){return typeof e=="function"?e(n.offsetWidth,n.offsetHeight):{x:0,y:0}}function z6(n,e){return new e(n.lat,n.lng)}function I6(n,e){return new e(new google.maps.LatLng(n.ne.lat,n.ne.lng),new google.maps.LatLng(n.sw.lat,n.sw.lng))}function F6(n,e,t){return n instanceof e?n:t(n,e)}function V6(n,e,t){return n instanceof e?n:t(n,e)}function H6(n,e,t){var s=n&&n.fromLatLngToDivPixel(t.getNorthEast()),i=n&&n.fromLatLngToDivPixel(t.getSouthWest());return s&&i?{left:"".concat(i.x+e.x,"px"),top:"".concat(s.y+e.y,"px"),width:"".concat(s.x-i.x-e.x,"px"),height:"".concat(i.y-s.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function G6(n,e,t){var s=n&&n.fromLatLngToDivPixel(t);if(s){var{x:i,y:a}=s;return{left:"".concat(i+e.x,"px"),top:"".concat(a+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function aE(n,e,t,s){return t!==void 0?H6(n,e,V6(t,google.maps.LatLngBounds,I6)):G6(n,e,F6(s,google.maps.LatLng,z6))}function $6(n,e){return n.left===e.left&&n.top===e.top&&n.width===e.height&&n.height===e.height}function m_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function Y6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?m_(Object(t),!0).forEach(function(s){ue(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):m_(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function q6(n,e,t,s,i){class a extends google.maps.OverlayView{constructor(c,d,h,g){super(),this.container=c,this.pane=d,this.position=h,this.bounds=g}onAdd(){var c,d=(c=this.getPanes())===null||c===void 0?void 0:c[this.pane];d?.appendChild(this.container)}draw(){var c=this.getProjection(),d=Y6({},this.container?rE(this.container,i):{x:0,y:0}),h=aE(c,d,this.bounds,this.position);for(var[g,m]of Object.entries(h))this.container.style[g]=m}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new a(n,e,t,s)}function v_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function W6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?v_(Object(t),!0).forEach(function(s){ue(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):v_(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function y_(n){if(!n)return"";var e=n instanceof google.maps.LatLng?n:new google.maps.LatLng(n.lat,n.lng);return e+""}function x_(n){if(!n)return"";var e=n instanceof google.maps.LatLngBounds?n:new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.east),new google.maps.LatLng(n.north,n.west));return e+""}function X6(n){var{position:e,bounds:t,mapPaneName:s,zIndex:i,onLoad:a,onUnmount:l,getPixelPositionOffset:c,children:d}=n,h=x.useContext($e),g=x.useMemo(()=>{var y=document.createElement("div");return y.style.position="absolute",y},[]),m=x.useMemo(()=>q6(g,s,e,t,c),[g,s,e,t]);return x.useEffect(()=>(a?.(m),m?.setMap(h),()=>{l?.(m),m?.setMap(null)}),[h,m]),x.useEffect(()=>{g.style.zIndex="".concat(i)},[i,g]),No.createPortal(d,g)}x.memo(X6);class zo extends x.PureComponent{constructor(e){super(e),ue(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),ue(this,"updatePane",()=>{var s=this.props.mapPaneName,i=this.overlayView.getPanes();Jt(!!s,"OverlayView requires props.mapPaneName but got %s",s),i?this.setState({paneEl:i[s]}):this.setState({paneEl:null})}),ue(this,"onAdd",()=>{var s,i;this.updatePane(),(s=(i=this.props).onLoad)===null||s===void 0||s.call(i,this.overlayView)}),ue(this,"onPositionElement",()=>{var s=this.overlayView.getProjection(),i=W6({x:0,y:0},this.containerRef.current?rE(this.containerRef.current,this.props.getPixelPositionOffset):{}),a=aE(s,i,this.props.bounds,this.props.position);if(!$6(a,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var l,c,d,h;this.setState({containerStyle:{top:(l=a.top)!==null&&l!==void 0?l:0,left:(c=a.left)!==null&&c!==void 0?c:0,width:(d=a.width)!==null&&d!==void 0?d:0,height:(h=a.height)!==null&&h!==void 0?h:0,position:"absolute"}})}}),ue(this,"draw",()=>{this.onPositionElement()}),ue(this,"onRemove",()=>{var s,i;this.setState(()=>({paneEl:null})),(s=(i=this.props).onUnmount)===null||s===void 0||s.call(i,this.overlayView)}),this.containerRef=x.createRef();var t=new google.maps.OverlayView;t.onAdd=this.onAdd,t.draw=this.draw,t.onRemove=this.onRemove,this.overlayView=t}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var t=y_(e.position),s=y_(this.props.position),i=x_(e.bounds),a=x_(this.props.bounds);(t!==s||i!==a)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?No.createPortal(p.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:x.Children.only(this.props.children)}),e):null}}ue(zo,"FLOAT_PANE","floatPane");ue(zo,"MAP_PANE","mapPane");ue(zo,"MARKER_LAYER","markerLayer");ue(zo,"OVERLAY_LAYER","overlayLayer");ue(zo,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");ue(zo,"contextType",$e);function K6(){}function b_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function w_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?b_(Object(t),!0).forEach(function(s){ue(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):b_(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var S_={onDblClick:"dblclick",onClick:"click"},__={opacity(n,e){n.setOpacity(e)}};function Z6(n){var{url:e,bounds:t,options:s,visible:i}=n,a=x.useContext($e),l=new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.west),new google.maps.LatLng(t.north,t.east)),c=x.useMemo(()=>new google.maps.GroundOverlay(e,l,s),[]);return x.useEffect(()=>{c!==null&&c.setMap(a)},[a]),x.useEffect(()=>{typeof e<"u"&&c!==null&&(c.set("url",e),c.setMap(a))},[c,e]),x.useEffect(()=>{typeof i<"u"&&c!==null&&c.setOpacity(i?1:0)},[c,i]),x.useEffect(()=>{var d=new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.west),new google.maps.LatLng(t.north,t.east));typeof t<"u"&&c!==null&&(c.set("bounds",d),c.setMap(a))},[c,t]),null}x.memo(Z6);class oE extends x.PureComponent{constructor(){super(...arguments),ue(this,"registeredEvents",[]),ue(this,"state",{groundOverlay:null}),ue(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){Jt(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,w_(w_({},this.props.options),{},{map:this.context}));this.registeredEvents=Ke({updaterMap:__,eventMap:S_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&(tt(this.registeredEvents),this.registeredEvents=Ke({updaterMap:__,eventMap:S_,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}ue(oE,"defaultProps",{onLoad:K6});ue(oE,"contextType",$e);function C_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function _h(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?C_(Object(t),!0).forEach(function(s){ue(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):C_(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var T_={},E_={data(n,e){n.setData(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)}};function Q6(n){var{data:e,onLoad:t,onUnmount:s,options:i}=n,a=x.useContext($e),[l,c]=x.useState(null);return x.useEffect(()=>{google.maps.visualization||Jt(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),x.useEffect(()=>{Jt(!!e,"data property is required in HeatmapLayer %s",e)},[e]),x.useEffect(()=>{l!==null&&l.setMap(a)},[a]),x.useEffect(()=>{i&&l!==null&&l.setOptions(i)},[l,i]),x.useEffect(()=>{var d=new google.maps.visualization.HeatmapLayer(_h(_h({},i),{},{data:e,map:a}));return c(d),t&&t(d),()=>{l!==null&&(s&&s(l),l.setMap(null))}},[]),null}x.memo(Q6);class J6 extends x.PureComponent{constructor(){super(...arguments),ue(this,"registeredEvents",[]),ue(this,"state",{heatmapLayer:null}),ue(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){Jt(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),Jt(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(_h(_h({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=Ke({updaterMap:E_,eventMap:T_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){tt(this.registeredEvents),this.registeredEvents=Ke({updaterMap:E_,eventMap:T_,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),tt(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}ue(J6,"contextType",$e);var j_={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},k_={register(n,e,t){n.registerPanoProvider(e,t)},links(n,e){n.setLinks(e)},motionTracking(n,e){n.setMotionTracking(e)},options(n,e){n.setOptions(e)},pano(n,e){n.setPano(e)},position(n,e){n.setPosition(e)},pov(n,e){n.setPov(e)},visible(n,e){n.setVisible(e)},zoom(n,e){n.setZoom(e)}};class e8 extends x.PureComponent{constructor(){super(...arguments),ue(this,"registeredEvents",[]),ue(this,"state",{streetViewPanorama:null}),ue(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,t,s=(e=(t=this.context)===null||t===void 0?void 0:t.getStreetView())!==null&&e!==void 0?e:null;this.registeredEvents=Ke({updaterMap:k_,eventMap:j_,prevProps:{},nextProps:this.props,instance:s}),this.setState(()=>({streetViewPanorama:s}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&(tt(this.registeredEvents),this.registeredEvents=Ke({updaterMap:k_,eventMap:j_,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),tt(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}ue(e8,"contextType",$e);class t8 extends x.PureComponent{constructor(){super(...arguments),ue(this,"state",{streetViewService:null}),ue(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}ue(t8,"contextType",$e);var M_={onDirectionsChanged:"directions_changed"},O_={directions(n,e){n.setDirections(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},panel(n,e){n.setPanel(e)},routeIndex(n,e){n.setRouteIndex(e)}};class s8 extends x.PureComponent{constructor(){super(...arguments),ue(this,"registeredEvents",[]),ue(this,"state",{directionsRenderer:null}),ue(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=Ke({updaterMap:O_,eventMap:M_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&(tt(this.registeredEvents),this.registeredEvents=Ke({updaterMap:O_,eventMap:M_,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),tt(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}ue(s8,"contextType",$e);var L_={onPlacesChanged:"places_changed"},A_={bounds(n,e){n.setBounds(e)}};class n8 extends x.PureComponent{constructor(){super(...arguments),ue(this,"registeredEvents",[]),ue(this,"containerElement",x.createRef()),ue(this,"state",{searchBox:null}),ue(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(Jt(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var e=this.containerElement.current.querySelector("input");if(e!==null){var t=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=Ke({updaterMap:A_,eventMap:L_,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{searchBox:t}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&(tt(this.registeredEvents),this.registeredEvents=Ke({updaterMap:A_,eventMap:L_,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),tt(this.registeredEvents))}render(){return p.jsx("div",{ref:this.containerElement,children:x.Children.only(this.props.children)})}}ue(n8,"contextType",$e);var D_={onPlaceChanged:"place_changed"},N_={bounds(n,e){n.setBounds(e)},restrictions(n,e){n.setComponentRestrictions(e)},fields(n,e){n.setFields(e)},options(n,e){n.setOptions(e)},types(n,e){n.setTypes(e)}};class lE extends x.PureComponent{constructor(){super(...arguments),ue(this,"registeredEvents",[]),ue(this,"containerElement",x.createRef()),ue(this,"state",{autocomplete:null}),ue(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;Jt(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var t=(e=this.containerElement.current)===null||e===void 0?void 0:e.querySelector("input");if(t){var s=new google.maps.places.Autocomplete(t,this.props.options);this.registeredEvents=Ke({updaterMap:N_,eventMap:D_,prevProps:{},nextProps:this.props,instance:s}),this.setState(()=>({autocomplete:s}),this.setAutocompleteCallback)}}componentDidUpdate(e){tt(this.registeredEvents),this.registeredEvents=Ke({updaterMap:N_,eventMap:D_,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&tt(this.registeredEvents)}render(){return p.jsx("div",{ref:this.containerElement,className:this.props.className,children:x.Children.only(this.props.children)})}}ue(lE,"defaultProps",{className:""});ue(lE,"contextType",$e);const ua=({message:n="Loading...",size:e="large"})=>e==="small"?p.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[p.jsx("div",{className:"w-4 h-4 border-2 border-[#AF524D] border-t-transparent rounded-full animate-spin"}),p.jsx("span",{className:"text-sm text-gray-600",children:n})]}):p.jsx("div",{className:"min-h-screen bg-[url('/Background.png')] bg-cover bg-center flex items-center justify-center",children:p.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#52514B_100%)] rounded-3xl shadow-2xl p-8 flex flex-col items-center space-y-6",children:[p.jsxs("div",{className:"relative",children:[p.jsxs("div",{className:"w-16 h-16 bg-[#AF524D] rounded-t-lg relative overflow-hidden",children:[p.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/3 bg-[#DFAD56]"}),p.jsx("div",{className:"absolute bottom-1/3 left-0 right-0 h-1/3 bg-[#E2D2A2]"}),p.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-1 h-4 bg-yellow-400",children:p.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-orange-400 rounded-full animate-pulse"})})]}),p.jsx("div",{className:"absolute inset-0 border-4 border-transparent border-t-[#AF524D] border-r-[#DFAD56] rounded-full animate-spin"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("h2",{className:"text-2xl font-bold text-[#381914] mb-2",children:"Bakery Bliss"}),p.jsx("p",{className:"text-gray-600 text-lg",children:n})]}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsx("div",{className:"w-3 h-3 bg-[#AF524D] rounded-full animate-bounce",style:{animationDelay:"0ms"}}),p.jsx("div",{className:"w-3 h-3 bg-[#DFAD56] rounded-full animate-bounce",style:{animationDelay:"150ms"}}),p.jsx("div",{className:"w-3 h-3 bg-[#E2D2A2] rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})}),i8=()=>{const[n,e]=x.useState(!0),t={width:"100%",height:"400px"},s={lat:10.3157,lng:123.8854},i=()=>{e(!1)};return n?p.jsx(ua,{message:"Loading about us page..."}):p.jsxs("section",{className:"bg-[linear-gradient(to_bottom,_#AF524D_0%,_#AF524D_20%,_#381914_83%)] bg-cover bg-center w-full h-fit py-20 px-60 flex flex-col items-center justify-center text-[#492220] space-y-10",children:[p.jsx("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-18 py-10 flex flex-col items-center justify-center rounded-2xl space-y-10 w-full shadow-2xl",children:p.jsx("h1",{className:"text-6xl font-bold font-jost",children:"Who is Connie?"})}),p.jsxs("div",{className:`bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-10 py-10 rounded-2xl shadow-2xl flex
      items-center justify-center gap-10 w-full`,children:[p.jsx("img",{src:"#",alt:"Connie's Picture",className:"w-1/3"}),p.jsxs("div",{className:"w-2/3",children:[p.jsx("h2",{children:"Connie June B. De Jesus"}),p.jsx("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."})]})]}),p.jsxs("div",{className:"flex items-center justify-center gap-10 w-full bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-10 py-10 rounded-2xl shadow-2xl",children:[p.jsxs("div",{className:"flex flex-col justify-center items-center w-2/3",id:"location",children:[p.jsx("h2",{className:"text-4xl font-bold font-jost",children:"Connie de Cafe's Location"}),p.jsx(QT,{googleMapsApiKey:"AIzaSyC7Nt8H-BUyKMx2JyekzXewcn1m3RLxXlQ",children:p.jsx(kR,{mapContainerStyle:t,center:s,zoom:12,onLoad:i,children:p.jsx(JT,{position:s})})})]}),p.jsx("div",{className:"flex flex-col justify-center items-center w-1/3",children:p.jsx("h2",{children:"Our Products"})})]})]})};class Yc{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const r8=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},gs={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:r8()},l0=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},a8=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=l0(n);gs.publicKey=t.publicKey,gs.blockHeadless=t.blockHeadless,gs.storageProvider=t.storageProvider,gs.blockList=t.blockList,gs.limitRate=t.limitRate,gs.origin=t.origin||e},cE=async(n,e,t={})=>{const s=await fetch(gs.origin+n,{method:"POST",headers:t,body:e}),i=await s.text(),a=new Yc(s.status,i);if(s.ok)return a;throw a},uE=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},o8=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},dE=n=>n.webdriver||!n.languages||n.languages.length===0,hE=()=>new Yc(451,"Unavailable For Headless Browser"),l8=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},c8=n=>!n.list?.length||!n.watchVariable,u8=(n,e)=>n instanceof FormData?n.get(e):n[e],fE=(n,e)=>{if(c8(n))return!1;l8(n.list,n.watchVariable);const t=u8(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},gE=()=>new Yc(403,"Forbidden"),d8=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},h8=async(n,e,t)=>{const s=Number(await t.get(n)||0);return e-Date.now()+s},pE=async(n,e,t)=>{if(!e.throttle||!t)return!1;d8(e.throttle,e.id);const s=e.id||n;return await h8(s,e.throttle,t)>0?!0:(await t.set(s,Date.now().toString()),!1)},mE=()=>new Yc(429,"Too Many Requests"),f8=async(n,e,t,s)=>{const i=l0(s),a=i.publicKey||gs.publicKey,l=i.blockHeadless||gs.blockHeadless,c=i.storageProvider||gs.storageProvider,d={...gs.blockList,...i.blockList},h={...gs.limitRate,...i.limitRate};return l&&dE(navigator)?Promise.reject(hE()):(uE(a,n,e),o8(t),t&&fE(d,t)?Promise.reject(gE()):await pE(location.pathname,h,c)?Promise.reject(mE()):cE("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:a,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},g8=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},p8=n=>typeof n=="string"?document.querySelector(n):n,m8=async(n,e,t,s)=>{const i=l0(s),a=i.publicKey||gs.publicKey,l=i.blockHeadless||gs.blockHeadless,c=gs.storageProvider||i.storageProvider,d={...gs.blockList,...i.blockList},h={...gs.limitRate,...i.limitRate};if(l&&dE(navigator))return Promise.reject(hE());const g=p8(t);uE(a,n,e),g8(g);const m=new FormData(g);return fE(d,m)?Promise.reject(gE()):await pE(location.pathname,h,c)?Promise.reject(mE()):(m.append("lib_version","4.4.1"),m.append("service_id",n),m.append("template_id",e),m.append("user_id",a),cE("/api/v1.0/email/send-form",m))},v8={init:a8,send:f8,sendForm:m8,EmailJSResponseStatus:Yc},y8=()=>{const[n,e]=x.useState({name:"",email:"",subject:"",message:""}),[t,s]=x.useState(!1),i=l=>{const{id:c,value:d}=l.target;e(h=>({...h,[c]:d}))},a=async l=>{if(l.preventDefault(),!n.name||!n.email||!n.subject||!n.message){_e.error("Please fill in all fields",{duration:4e3,position:"top-center"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)){_e.error("Please enter a valid email address",{duration:4e3,position:"top-center"});return}s(!0);try{if((await v8.send("YOUR_SERVICE_ID","YOUR_TEMPLATE_ID",{from_name:n.name,from_email:n.email,subject:n.subject,message:n.message,to_email:"conniedecafe@gmail.com"},"YOUR_PUBLIC_KEY")).status===200)_e.success("Message sent successfully! We will get back to you soon.",{duration:5e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}),e({name:"",email:"",subject:"",message:""});else throw new Error("Failed to send email")}catch(d){console.error("Error sending email:",d),_e.error("Failed to send message. Please try again.",{duration:4e3,position:"top-center"})}finally{s(!1)}};return p.jsxs("section",{className:"bg-[url('/AboutUs.png')] bg-cover bg-center w-full min-h-screen px-8 py-12 flex flex-col items-end justify-center space-y-6",children:[p.jsxs("form",{onSubmit:a,className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-8 py-8 flex flex-col items-center justify-center rounded-2xl space-y-6 w-full max-w-lg shadow-2xl",children:[p.jsx("h1",{className:"font-bold text-3xl text-center text-[#381914]",children:"Contact Us Today!"}),p.jsxs("div",{className:"flex flex-col space-y-4 w-full",children:[p.jsxs("div",{className:"flex flex-col space-y-2",children:[p.jsx("label",{className:"text-lg font-semibold text-[#381914]",htmlFor:"name",children:"Name:"}),p.jsx("input",{type:"text",id:"name",value:n.name,onChange:i,className:"w-full bg-white text-black rounded-lg px-3 py-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent"})]}),p.jsxs("div",{className:"flex flex-col space-y-2",children:[p.jsx("label",{className:"text-lg font-semibold text-[#381914]",htmlFor:"email",children:"Email:"}),p.jsx("input",{type:"email",id:"email",value:n.email,onChange:i,className:"w-full bg-white text-black rounded-lg px-3 py-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent"})]}),p.jsxs("div",{className:"flex flex-col space-y-2",children:[p.jsx("label",{className:"text-lg font-semibold text-[#381914]",htmlFor:"subject",children:"Subject:"}),p.jsx("input",{type:"text",id:"subject",value:n.subject,onChange:i,className:"w-full bg-white text-black rounded-lg px-3 py-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent"})]}),p.jsxs("div",{className:"flex flex-col space-y-2",children:[p.jsx("label",{className:"text-lg font-semibold text-[#381914]",htmlFor:"message",children:"Message:"}),p.jsx("textarea",{id:"message",value:n.message,onChange:i,className:"w-full h-24 bg-white text-black rounded-lg px-3 py-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent resize-none"})]})]}),p.jsx("div",{className:"w-full",children:p.jsx("button",{type:"submit",disabled:t,className:`bg-[#82171C] text-white font-bold px-6 py-2 rounded-lg cursor-pointer transition ease-in-out delay-100 hover:bg-[#FFECB5] hover:text-gray-800 duration-300 tracking-wide w-full ${t?"opacity-50 cursor-not-allowed":""}`,children:t?"Sending...":"Send Message"})})]}),p.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-8 py-6 flex flex-col items-center justify-center rounded-2xl space-y-4 w-full max-w-lg shadow-2xl",children:[p.jsx("h2",{className:"font-bold text-2xl text-[#381914] mb-2",children:"Get In Touch"}),p.jsxs("a",{href:"mailto:conniedecafe@gmail.com",className:"flex items-center w-full space-x-4 hover:opacity-80 transition-opacity",children:[p.jsx("img",{src:"/mail_icon.png",alt:"Mail Icon",className:"w-6 h-6"}),p.jsx("p",{className:"text-lg text-[#381914]",children:"conniedecafe@gmail.com"})]}),p.jsxs("a",{href:"tel:+639176292377",className:"flex items-center w-full space-x-4 hover:opacity-80 transition-opacity",children:[p.jsx("img",{src:"/phone_icon.png",alt:"Phone Icon",className:"w-6 h-6"}),p.jsx("p",{className:"text-lg text-[#381914]",children:"+63 917 629 2377"})]}),p.jsxs("div",{className:"flex items-center justify-center space-x-8 w-full pt-2",children:[p.jsx("a",{href:"https://www.facebook.com/connies.cakemall",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",children:p.jsx("img",{src:"/fb_icon.png",alt:"Facebook Icon",className:"w-8 h-8"})}),p.jsx("a",{href:"https://www.instagram.com/conniescakemall?igsh=MXNiNjUwdjVlNW5uaA==",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",children:p.jsx("img",{src:"/ig_icon.png",alt:"Instagram Icon",className:"w-8 h-8"})})]})]})]})};function x8(){const n=Js();return x.useEffect(()=>{if(n.hash){const e=document.getElementById(n.hash.substring(1));e&&e.scrollIntoView({behavior:"smooth"})}},[n]),null}function P_(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function c0(n,e){n===void 0&&(n={}),e===void 0&&(e={});const t=["__proto__","constructor","prototype"];Object.keys(e).filter(s=>t.indexOf(s)<0).forEach(s=>{typeof n[s]>"u"?n[s]=e[s]:P_(e[s])&&P_(n[s])&&Object.keys(e[s]).length>0&&c0(n[s],e[s])})}const vE={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function da(){const n=typeof document<"u"?document:{};return c0(n,vE),n}const b8={document:vE,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function ks(){const n=typeof window<"u"?window:{};return c0(n,b8),n}function w8(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function S8(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function yE(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function Ch(){return Date.now()}function _8(n){const e=ks();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function C8(n,e){e===void 0&&(e="x");const t=ks();let s,i,a;const l=_8(n);return t.WebKitCSSMatrix?(i=l.transform||l.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(c=>c.replace(",",".")).join(", ")),a=new t.WebKitCSSMatrix(i==="none"?"":i)):(a=l.MozTransform||l.OTransform||l.MsTransform||l.msTransform||l.transform||l.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),s=a.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?i=a.m41:s.length===16?i=parseFloat(s[12]):i=parseFloat(s[4])),e==="y"&&(t.WebKitCSSMatrix?i=a.m42:s.length===16?i=parseFloat(s[13]):i=parseFloat(s[5])),i||0}function bd(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function T8(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function Zs(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const s=t<0||arguments.length<=t?void 0:arguments[t];if(s!=null&&!T8(s)){const i=Object.keys(Object(s)).filter(a=>e.indexOf(a)<0);for(let a=0,l=i.length;a<l;a+=1){const c=i[a],d=Object.getOwnPropertyDescriptor(s,c);d!==void 0&&d.enumerable&&(bd(n[c])&&bd(s[c])?s[c].__swiper__?n[c]=s[c]:Zs(n[c],s[c]):!bd(n[c])&&bd(s[c])?(n[c]={},s[c].__swiper__?n[c]=s[c]:Zs(n[c],s[c])):n[c]=s[c])}}}return n}function wd(n,e,t){n.style.setProperty(e,t)}function xE(n){let{swiper:e,targetPosition:t,side:s}=n;const i=ks(),a=-e.translate;let l=null,c;const d=e.params.speed;e.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(e.cssModeFrameID);const h=t>a?"next":"prev",g=(y,b)=>h==="next"&&y>=b||h==="prev"&&y<=b,m=()=>{c=new Date().getTime(),l===null&&(l=c);const y=Math.max(Math.min((c-l)/d,1),0),b=.5-Math.cos(y*Math.PI)/2;let S=a+b*(t-a);if(g(S,t)&&(S=t),e.wrapperEl.scrollTo({[s]:S}),g(S,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[s]:S})}),i.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=i.requestAnimationFrame(m)};m()}function Vn(n,e){e===void 0&&(e="");const t=ks(),s=[...n.children];return t.HTMLSlotElement&&n instanceof HTMLSlotElement&&s.push(...n.assignedElements()),e?s.filter(i=>i.matches(e)):s}function E8(n,e){const t=[e];for(;t.length>0;){const s=t.shift();if(n===s)return!0;t.push(...s.children,...s.shadowRoot?s.shadowRoot.children:[],...s.assignedElements?s.assignedElements():[])}}function j8(n,e){const t=ks();let s=e.contains(n);return!s&&t.HTMLSlotElement&&e instanceof HTMLSlotElement&&(s=[...e.assignedElements()].includes(n),s||(s=E8(n,e))),s}function Th(n){try{console.warn(n);return}catch{}}function Eh(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:w8(e)),t}function k8(n,e){const t=[];for(;n.previousElementSibling;){const s=n.previousElementSibling;e?s.matches(e)&&t.push(s):t.push(s),n=s}return t}function M8(n,e){const t=[];for(;n.nextElementSibling;){const s=n.nextElementSibling;e?s.matches(e)&&t.push(s):t.push(s),n=s}return t}function hr(n,e){return ks().getComputedStyle(n,null).getPropertyValue(e)}function R_(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function O8(n,e){const t=[];let s=n.parentElement;for(;s;)t.push(s),s=s.parentElement;return t}function B_(n,e,t){const s=ks();return n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(s.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(s.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function di(n){return(Array.isArray(n)?n:[n]).filter(e=>!!e)}function U_(n,e){e===void 0&&(e=""),typeof trustedTypes<"u"?n.innerHTML=trustedTypes.createPolicy("html",{createHTML:t=>t}).createHTML(e):n.innerHTML=e}let Yp;function L8(){const n=ks(),e=da();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function bE(){return Yp||(Yp=L8()),Yp}let qp;function A8(n){let{userAgent:e}=n===void 0?{}:n;const t=bE(),s=ks(),i=s.navigator.platform,a=e||s.navigator.userAgent,l={ios:!1,android:!1},c=s.screen.width,d=s.screen.height,h=a.match(/(Android);?[\s\/]+([\d.]+)?/);let g=a.match(/(iPad).*OS\s([\d_]+)/);const m=a.match(/(iPod)(.*OS\s([\d_]+))?/),y=!g&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),b=i==="Win32";let S=i==="MacIntel";const _=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!g&&S&&t.touch&&_.indexOf(`${c}x${d}`)>=0&&(g=a.match(/(Version)\/([\d.]+)/),g||(g=[0,1,"13_0_0"]),S=!1),h&&!b&&(l.os="android",l.android=!0),(g||y||m)&&(l.os="ios",l.ios=!0),l}function wE(n){return n===void 0&&(n={}),qp||(qp=A8(n)),qp}let Wp;function D8(){const n=ks(),e=wE();let t=!1;function s(){const c=n.navigator.userAgent.toLowerCase();return c.indexOf("safari")>=0&&c.indexOf("chrome")<0&&c.indexOf("android")<0}if(s()){const c=String(n.navigator.userAgent);if(c.includes("Version/")){const[d,h]=c.split("Version/")[1].split(" ")[0].split(".").map(g=>Number(g));t=d<16||d===16&&h<2}}const i=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),a=s(),l=a||i&&e.ios;return{isSafari:t||a,needPerspectiveFix:t,need3dFix:l,isWebView:i}}function SE(){return Wp||(Wp=D8()),Wp}function N8(n){let{swiper:e,on:t,emit:s}=n;const i=ks();let a=null,l=null;const c=()=>{!e||e.destroyed||!e.initialized||(s("beforeResize"),s("resize"))},d=()=>{!e||e.destroyed||!e.initialized||(a=new ResizeObserver(m=>{l=i.requestAnimationFrame(()=>{const{width:y,height:b}=e;let S=y,_=b;m.forEach(T=>{let{contentBoxSize:C,contentRect:M,target:O}=T;O&&O!==e.el||(S=M?M.width:(C[0]||C).inlineSize,_=M?M.height:(C[0]||C).blockSize)}),(S!==y||_!==b)&&c()})}),a.observe(e.el))},h=()=>{l&&i.cancelAnimationFrame(l),a&&a.unobserve&&e.el&&(a.unobserve(e.el),a=null)},g=()=>{!e||e.destroyed||!e.initialized||s("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof i.ResizeObserver<"u"){d();return}i.addEventListener("resize",c),i.addEventListener("orientationchange",g)}),t("destroy",()=>{h(),i.removeEventListener("resize",c),i.removeEventListener("orientationchange",g)})}function P8(n){let{swiper:e,extendParams:t,on:s,emit:i}=n;const a=[],l=ks(),c=function(g,m){m===void 0&&(m={});const y=l.MutationObserver||l.WebkitMutationObserver,b=new y(S=>{if(e.__preventObserver__)return;if(S.length===1){i("observerUpdate",S[0]);return}const _=function(){i("observerUpdate",S[0])};l.requestAnimationFrame?l.requestAnimationFrame(_):l.setTimeout(_,0)});b.observe(g,{attributes:typeof m.attributes>"u"?!0:m.attributes,childList:e.isElement||(typeof m.childList>"u"?!0:m).childList,characterData:typeof m.characterData>"u"?!0:m.characterData}),a.push(b)},d=()=>{if(e.params.observer){if(e.params.observeParents){const g=O8(e.hostEl);for(let m=0;m<g.length;m+=1)c(g[m])}c(e.hostEl,{childList:e.params.observeSlideChildren}),c(e.wrapperEl,{attributes:!1})}},h=()=>{a.forEach(g=>{g.disconnect()}),a.splice(0,a.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),s("init",d),s("destroy",h)}var R8={on(n,e,t){const s=this;if(!s.eventsListeners||s.destroyed||typeof e!="function")return s;const i=t?"unshift":"push";return n.split(" ").forEach(a=>{s.eventsListeners[a]||(s.eventsListeners[a]=[]),s.eventsListeners[a][i](e)}),s},once(n,e,t){const s=this;if(!s.eventsListeners||s.destroyed||typeof e!="function")return s;function i(){s.off(n,i),i.__emitterProxy&&delete i.__emitterProxy;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];e.apply(s,l)}return i.__emitterProxy=e,s.on(n,i,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const s=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[s](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(s=>{typeof e>"u"?t.eventsListeners[s]=[]:t.eventsListeners[s]&&t.eventsListeners[s].forEach((i,a)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&t.eventsListeners[s].splice(a,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,s;for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return typeof a[0]=="string"||Array.isArray(a[0])?(e=a[0],t=a.slice(1,a.length),s=n):(e=a[0].events,t=a[0].data,s=a[0].context||n),t.unshift(s),(Array.isArray(e)?e:e.split(" ")).forEach(d=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(h=>{h.apply(s,[d,...t])}),n.eventsListeners&&n.eventsListeners[d]&&n.eventsListeners[d].forEach(h=>{h.apply(s,t)})}),n}};function B8(){const n=this;let e,t;const s=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=s.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=s.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(hr(s,"padding-left")||0,10)-parseInt(hr(s,"padding-right")||0,10),t=t-parseInt(hr(s,"padding-top")||0,10)-parseInt(hr(s,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function U8(){const n=this;function e(z,I){return parseFloat(z.getPropertyValue(n.getDirectionLabel(I))||0)}const t=n.params,{wrapperEl:s,slidesEl:i,size:a,rtlTranslate:l,wrongRTL:c}=n,d=n.virtual&&t.virtual.enabled,h=d?n.virtual.slides.length:n.slides.length,g=Vn(i,`.${n.params.slideClass}, swiper-slide`),m=d?n.virtual.slides.length:g.length;let y=[];const b=[],S=[];let _=t.slidesOffsetBefore;typeof _=="function"&&(_=t.slidesOffsetBefore.call(n));let T=t.slidesOffsetAfter;typeof T=="function"&&(T=t.slidesOffsetAfter.call(n));const C=n.snapGrid.length,M=n.slidesGrid.length;let O=t.spaceBetween,L=-_,j=0,D=0;if(typeof a>"u")return;typeof O=="string"&&O.indexOf("%")>=0?O=parseFloat(O.replace("%",""))/100*a:typeof O=="string"&&(O=parseFloat(O)),n.virtualSize=-O,g.forEach(z=>{l?z.style.marginLeft="":z.style.marginRight="",z.style.marginBottom="",z.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(wd(s,"--swiper-centered-offset-before",""),wd(s,"--swiper-centered-offset-after",""));const k=t.grid&&t.grid.rows>1&&n.grid;k?n.grid.initSlides(g):n.grid&&n.grid.unsetSlides();let B;const P=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(z=>typeof t.breakpoints[z].slidesPerView<"u").length>0;for(let z=0;z<m;z+=1){B=0;let I;if(g[z]&&(I=g[z]),k&&n.grid.updateSlide(z,I,g),!(g[z]&&hr(I,"display")==="none")){if(t.slidesPerView==="auto"){P&&(g[z].style[n.getDirectionLabel("width")]="");const F=getComputedStyle(I),ee=I.style.transform,X=I.style.webkitTransform;if(ee&&(I.style.transform="none"),X&&(I.style.webkitTransform="none"),t.roundLengths)B=n.isHorizontal()?B_(I,"width"):B_(I,"height");else{const ae=e(F,"width"),R=e(F,"padding-left"),V=e(F,"padding-right"),K=e(F,"margin-left"),te=e(F,"margin-right"),N=F.getPropertyValue("box-sizing");if(N&&N==="border-box")B=ae+K+te;else{const{clientWidth:q,offsetWidth:de}=I;B=ae+R+V+K+te+(de-q)}}ee&&(I.style.transform=ee),X&&(I.style.webkitTransform=X),t.roundLengths&&(B=Math.floor(B))}else B=(a-(t.slidesPerView-1)*O)/t.slidesPerView,t.roundLengths&&(B=Math.floor(B)),g[z]&&(g[z].style[n.getDirectionLabel("width")]=`${B}px`);g[z]&&(g[z].swiperSlideSize=B),S.push(B),t.centeredSlides?(L=L+B/2+j/2+O,j===0&&z!==0&&(L=L-a/2-O),z===0&&(L=L-a/2-O),Math.abs(L)<1/1e3&&(L=0),t.roundLengths&&(L=Math.floor(L)),D%t.slidesPerGroup===0&&y.push(L),b.push(L)):(t.roundLengths&&(L=Math.floor(L)),(D-Math.min(n.params.slidesPerGroupSkip,D))%n.params.slidesPerGroup===0&&y.push(L),b.push(L),L=L+B+O),n.virtualSize+=B+O,j=B,D+=1}}if(n.virtualSize=Math.max(n.virtualSize,a)+T,l&&c&&(t.effect==="slide"||t.effect==="coverflow")&&(s.style.width=`${n.virtualSize+O}px`),t.setWrapperSize&&(s.style[n.getDirectionLabel("width")]=`${n.virtualSize+O}px`),k&&n.grid.updateWrapperSize(B,y),!t.centeredSlides){const z=[];for(let I=0;I<y.length;I+=1){let F=y[I];t.roundLengths&&(F=Math.floor(F)),y[I]<=n.virtualSize-a&&z.push(F)}y=z,Math.floor(n.virtualSize-a)-Math.floor(y[y.length-1])>1&&y.push(n.virtualSize-a)}if(d&&t.loop){const z=S[0]+O;if(t.slidesPerGroup>1){const I=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),F=z*t.slidesPerGroup;for(let ee=0;ee<I;ee+=1)y.push(y[y.length-1]+F)}for(let I=0;I<n.virtual.slidesBefore+n.virtual.slidesAfter;I+=1)t.slidesPerGroup===1&&y.push(y[y.length-1]+z),b.push(b[b.length-1]+z),n.virtualSize+=z}if(y.length===0&&(y=[0]),O!==0){const z=n.isHorizontal()&&l?"marginLeft":n.getDirectionLabel("marginRight");g.filter((I,F)=>!t.cssMode||t.loop?!0:F!==g.length-1).forEach(I=>{I.style[z]=`${O}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let z=0;S.forEach(F=>{z+=F+(O||0)}),z-=O;const I=z>a?z-a:0;y=y.map(F=>F<=0?-_:F>I?I+T:F)}if(t.centerInsufficientSlides){let z=0;S.forEach(F=>{z+=F+(O||0)}),z-=O;const I=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(z+I<a){const F=(a-z-I)/2;y.forEach((ee,X)=>{y[X]=ee-F}),b.forEach((ee,X)=>{b[X]=ee+F})}}if(Object.assign(n,{slides:g,snapGrid:y,slidesGrid:b,slidesSizesGrid:S}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){wd(s,"--swiper-centered-offset-before",`${-y[0]}px`),wd(s,"--swiper-centered-offset-after",`${n.size/2-S[S.length-1]/2}px`);const z=-n.snapGrid[0],I=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(F=>F+z),n.slidesGrid=n.slidesGrid.map(F=>F+I)}if(m!==h&&n.emit("slidesLengthChange"),y.length!==C&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),b.length!==M&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!d&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const z=`${t.containerModifierClass}backface-hidden`,I=n.el.classList.contains(z);m<=t.maxBackfaceHiddenSlides?I||n.el.classList.add(z):I&&n.el.classList.remove(z)}}function z8(n){const e=this,t=[],s=e.virtual&&e.params.virtual.enabled;let i=0,a;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const l=c=>s?e.slides[e.getSlideIndexByData(c)]:e.slides[c];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(c=>{t.push(c)});else for(a=0;a<Math.ceil(e.params.slidesPerView);a+=1){const c=e.activeIndex+a;if(c>e.slides.length&&!s)break;t.push(l(c))}else t.push(l(e.activeIndex));for(a=0;a<t.length;a+=1)if(typeof t[a]<"u"){const c=t[a].offsetHeight;i=c>i?c:i}(i||i===0)&&(e.wrapperEl.style.height=`${i}px`)}function I8(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let s=0;s<e.length;s+=1)e[s].swiperSlideOffset=(n.isHorizontal()?e[s].offsetLeft:e[s].offsetTop)-t-n.cssOverflowAdjustment()}const z_=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function F8(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:s,rtlTranslate:i,snapGrid:a}=e;if(s.length===0)return;typeof s[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let l=-n;i&&(l=n),e.visibleSlidesIndexes=[],e.visibleSlides=[];let c=t.spaceBetween;typeof c=="string"&&c.indexOf("%")>=0?c=parseFloat(c.replace("%",""))/100*e.size:typeof c=="string"&&(c=parseFloat(c));for(let d=0;d<s.length;d+=1){const h=s[d];let g=h.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(g-=s[0].swiperSlideOffset);const m=(l+(t.centeredSlides?e.minTranslate():0)-g)/(h.swiperSlideSize+c),y=(l-a[0]+(t.centeredSlides?e.minTranslate():0)-g)/(h.swiperSlideSize+c),b=-(l-g),S=b+e.slidesSizesGrid[d],_=b>=0&&b<=e.size-e.slidesSizesGrid[d],T=b>=0&&b<e.size-1||S>1&&S<=e.size||b<=0&&S>=e.size;T&&(e.visibleSlides.push(h),e.visibleSlidesIndexes.push(d)),z_(h,T,t.slideVisibleClass),z_(h,_,t.slideFullyVisibleClass),h.progress=i?-m:m,h.originalProgress=i?-y:y}}function V8(n){const e=this;if(typeof n>"u"){const g=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*g||0}const t=e.params,s=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:a,isEnd:l,progressLoop:c}=e;const d=a,h=l;if(s===0)i=0,a=!0,l=!0;else{i=(n-e.minTranslate())/s;const g=Math.abs(n-e.minTranslate())<1,m=Math.abs(n-e.maxTranslate())<1;a=g||i<=0,l=m||i>=1,g&&(i=0),m&&(i=1)}if(t.loop){const g=e.getSlideIndexByData(0),m=e.getSlideIndexByData(e.slides.length-1),y=e.slidesGrid[g],b=e.slidesGrid[m],S=e.slidesGrid[e.slidesGrid.length-1],_=Math.abs(n);_>=y?c=(_-y)/S:c=(_+S-b)/S,c>1&&(c-=1)}Object.assign(e,{progress:i,progressLoop:c,isBeginning:a,isEnd:l}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),a&&!d&&e.emit("reachBeginning toEdge"),l&&!h&&e.emit("reachEnd toEdge"),(d&&!a||h&&!l)&&e.emit("fromEdge"),e.emit("progress",i)}const Xp=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function H8(){const n=this,{slides:e,params:t,slidesEl:s,activeIndex:i}=n,a=n.virtual&&t.virtual.enabled,l=n.grid&&t.grid&&t.grid.rows>1,c=m=>Vn(s,`.${t.slideClass}${m}, swiper-slide${m}`)[0];let d,h,g;if(a)if(t.loop){let m=i-n.virtual.slidesBefore;m<0&&(m=n.virtual.slides.length+m),m>=n.virtual.slides.length&&(m-=n.virtual.slides.length),d=c(`[data-swiper-slide-index="${m}"]`)}else d=c(`[data-swiper-slide-index="${i}"]`);else l?(d=e.find(m=>m.column===i),g=e.find(m=>m.column===i+1),h=e.find(m=>m.column===i-1)):d=e[i];d&&(l||(g=M8(d,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!g&&(g=e[0]),h=k8(d,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!h===0&&(h=e[e.length-1]))),e.forEach(m=>{Xp(m,m===d,t.slideActiveClass),Xp(m,m===g,t.slideNextClass),Xp(m,m===h,t.slidePrevClass)}),n.emitSlidesClasses()}const eh=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,s=e.closest(t());if(s){let i=s.querySelector(`.${n.params.lazyPreloaderClass}`);!i&&n.isElement&&(s.shadowRoot?i=s.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{s.shadowRoot&&(i=s.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),i&&i.remove())})),i&&i.remove()}},Kp=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},Wm=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const s=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),i=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const l=i,c=[l-e];c.push(...Array.from({length:e}).map((d,h)=>l+s+h)),n.slides.forEach((d,h)=>{c.includes(d.column)&&Kp(n,h)});return}const a=i+s-1;if(n.params.rewind||n.params.loop)for(let l=i-e;l<=a+e;l+=1){const c=(l%t+t)%t;(c<i||c>a)&&Kp(n,c)}else for(let l=Math.max(i-e,0);l<=Math.min(a+e,t-1);l+=1)l!==i&&(l>a||l<i)&&Kp(n,l)};function G8(n){const{slidesGrid:e,params:t}=n,s=n.rtlTranslate?n.translate:-n.translate;let i;for(let a=0;a<e.length;a+=1)typeof e[a+1]<"u"?s>=e[a]&&s<e[a+1]-(e[a+1]-e[a])/2?i=a:s>=e[a]&&s<e[a+1]&&(i=a+1):s>=e[a]&&(i=a);return t.normalizeSlideIndex&&(i<0||typeof i>"u")&&(i=0),i}function $8(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:s,params:i,activeIndex:a,realIndex:l,snapIndex:c}=e;let d=n,h;const g=b=>{let S=b-e.virtual.slidesBefore;return S<0&&(S=e.virtual.slides.length+S),S>=e.virtual.slides.length&&(S-=e.virtual.slides.length),S};if(typeof d>"u"&&(d=G8(e)),s.indexOf(t)>=0)h=s.indexOf(t);else{const b=Math.min(i.slidesPerGroupSkip,d);h=b+Math.floor((d-b)/i.slidesPerGroup)}if(h>=s.length&&(h=s.length-1),d===a&&!e.params.loop){h!==c&&(e.snapIndex=h,e.emit("snapIndexChange"));return}if(d===a&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=g(d);return}const m=e.grid&&i.grid&&i.grid.rows>1;let y;if(e.virtual&&i.virtual.enabled&&i.loop)y=g(d);else if(m){const b=e.slides.find(_=>_.column===d);let S=parseInt(b.getAttribute("data-swiper-slide-index"),10);Number.isNaN(S)&&(S=Math.max(e.slides.indexOf(b),0)),y=Math.floor(S/i.grid.rows)}else if(e.slides[d]){const b=e.slides[d].getAttribute("data-swiper-slide-index");b?y=parseInt(b,10):y=d}else y=d;Object.assign(e,{previousSnapIndex:c,snapIndex:h,previousRealIndex:l,realIndex:y,previousIndex:a,activeIndex:d}),e.initialized&&Wm(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(l!==y&&e.emit("realIndexChange"),e.emit("slideChange"))}function Y8(n,e){const t=this,s=t.params;let i=n.closest(`.${s.slideClass}, swiper-slide`);!i&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(c=>{!i&&c.matches&&c.matches(`.${s.slideClass}, swiper-slide`)&&(i=c)});let a=!1,l;if(i){for(let c=0;c<t.slides.length;c+=1)if(t.slides[c]===i){a=!0,l=c;break}}if(i&&a)t.clickedSlide=i,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=l;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}s.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var q8={updateSize:B8,updateSlides:U8,updateAutoHeight:z8,updateSlidesOffset:I8,updateSlidesProgress:F8,updateProgress:V8,updateSlidesClasses:H8,updateActiveIndex:$8,updateClickedSlide:Y8};function W8(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:s,translate:i,wrapperEl:a}=e;if(t.virtualTranslate)return s?-i:i;if(t.cssMode)return i;let l=C8(a,n);return l+=e.cssOverflowAdjustment(),s&&(l=-l),l||0}function X8(n,e){const t=this,{rtlTranslate:s,params:i,wrapperEl:a,progress:l}=t;let c=0,d=0;const h=0;t.isHorizontal()?c=s?-n:n:d=n,i.roundLengths&&(c=Math.floor(c),d=Math.floor(d)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?c:d,i.cssMode?a[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-c:-d:i.virtualTranslate||(t.isHorizontal()?c-=t.cssOverflowAdjustment():d-=t.cssOverflowAdjustment(),a.style.transform=`translate3d(${c}px, ${d}px, ${h}px)`);let g;const m=t.maxTranslate()-t.minTranslate();m===0?g=0:g=(n-t.minTranslate())/m,g!==l&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function K8(){return-this.snapGrid[0]}function Z8(){return-this.snapGrid[this.snapGrid.length-1]}function Q8(n,e,t,s,i){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),s===void 0&&(s=!0);const a=this,{params:l,wrapperEl:c}=a;if(a.animating&&l.preventInteractionOnTransition)return!1;const d=a.minTranslate(),h=a.maxTranslate();let g;if(s&&n>d?g=d:s&&n<h?g=h:g=n,a.updateProgress(g),l.cssMode){const m=a.isHorizontal();if(e===0)c[m?"scrollLeft":"scrollTop"]=-g;else{if(!a.support.smoothScroll)return xE({swiper:a,targetPosition:-g,side:m?"left":"top"}),!0;c.scrollTo({[m?"left":"top"]:-g,behavior:"smooth"})}return!0}return e===0?(a.setTransition(0),a.setTranslate(g),t&&(a.emit("beforeTransitionStart",e,i),a.emit("transitionEnd"))):(a.setTransition(e),a.setTranslate(g),t&&(a.emit("beforeTransitionStart",e,i),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(y){!a||a.destroyed||y.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,a.animating=!1,t&&a.emit("transitionEnd"))}),a.wrapperEl.addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd))),!0}var J8={getTranslate:W8,setTranslate:X8,minTranslate:K8,maxTranslate:Z8,translateTo:Q8};function eB(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function _E(n){let{swiper:e,runCallbacks:t,direction:s,step:i}=n;const{activeIndex:a,previousIndex:l}=e;let c=s;c||(a>l?c="next":a<l?c="prev":c="reset"),e.emit(`transition${i}`),t&&c==="reset"?e.emit(`slideResetTransition${i}`):t&&a!==l&&(e.emit(`slideChangeTransition${i}`),c==="next"?e.emit(`slideNextTransition${i}`):e.emit(`slidePrevTransition${i}`))}function tB(n,e){n===void 0&&(n=!0);const t=this,{params:s}=t;s.cssMode||(s.autoHeight&&t.updateAutoHeight(),_E({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function sB(n,e){n===void 0&&(n=!0);const t=this,{params:s}=t;t.animating=!1,!s.cssMode&&(t.setTransition(0),_E({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var nB={setTransition:eB,transitionStart:tB,transitionEnd:sB};function iB(n,e,t,s,i){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const a=this;let l=n;l<0&&(l=0);const{params:c,snapGrid:d,slidesGrid:h,previousIndex:g,activeIndex:m,rtlTranslate:y,wrapperEl:b,enabled:S}=a;if(!S&&!s&&!i||a.destroyed||a.animating&&c.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=a.params.speed);const _=Math.min(a.params.slidesPerGroupSkip,l);let T=_+Math.floor((l-_)/a.params.slidesPerGroup);T>=d.length&&(T=d.length-1);const C=-d[T];if(c.normalizeSlideIndex)for(let k=0;k<h.length;k+=1){const B=-Math.floor(C*100),P=Math.floor(h[k]*100),z=Math.floor(h[k+1]*100);typeof h[k+1]<"u"?B>=P&&B<z-(z-P)/2?l=k:B>=P&&B<z&&(l=k+1):B>=P&&(l=k)}if(a.initialized&&l!==m&&(!a.allowSlideNext&&(y?C>a.translate&&C>a.minTranslate():C<a.translate&&C<a.minTranslate())||!a.allowSlidePrev&&C>a.translate&&C>a.maxTranslate()&&(m||0)!==l))return!1;l!==(g||0)&&t&&a.emit("beforeSlideChangeStart"),a.updateProgress(C);let M;l>m?M="next":l<m?M="prev":M="reset";const O=a.virtual&&a.params.virtual.enabled;if(!(O&&i)&&(y&&-C===a.translate||!y&&C===a.translate))return a.updateActiveIndex(l),c.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),c.effect!=="slide"&&a.setTranslate(C),M!=="reset"&&(a.transitionStart(t,M),a.transitionEnd(t,M)),!1;if(c.cssMode){const k=a.isHorizontal(),B=y?C:-C;if(e===0)O&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),O&&!a._cssModeVirtualInitialSet&&a.params.initialSlide>0?(a._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{b[k?"scrollLeft":"scrollTop"]=B})):b[k?"scrollLeft":"scrollTop"]=B,O&&requestAnimationFrame(()=>{a.wrapperEl.style.scrollSnapType="",a._immediateVirtual=!1});else{if(!a.support.smoothScroll)return xE({swiper:a,targetPosition:B,side:k?"left":"top"}),!0;b.scrollTo({[k?"left":"top"]:B,behavior:"smooth"})}return!0}const D=SE().isSafari;return O&&!i&&D&&a.isElement&&a.virtual.update(!1,!1,l),a.setTransition(e),a.setTranslate(C),a.updateActiveIndex(l),a.updateSlidesClasses(),a.emit("beforeTransitionStart",e,s),a.transitionStart(t,M),e===0?a.transitionEnd(t,M):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(B){!a||a.destroyed||B.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(t,M))}),a.wrapperEl.addEventListener("transitionend",a.onSlideToWrapperTransitionEnd)),!0}function rB(n,e,t,s){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const i=this;if(i.destroyed)return;typeof e>"u"&&(e=i.params.speed);const a=i.grid&&i.params.grid&&i.params.grid.rows>1;let l=n;if(i.params.loop)if(i.virtual&&i.params.virtual.enabled)l=l+i.virtual.slidesBefore;else{let c;if(a){const y=l*i.params.grid.rows;c=i.slides.find(b=>b.getAttribute("data-swiper-slide-index")*1===y).column}else c=i.getSlideIndexByData(l);const d=a?Math.ceil(i.slides.length/i.params.grid.rows):i.slides.length,{centeredSlides:h}=i.params;let g=i.params.slidesPerView;g==="auto"?g=i.slidesPerViewDynamic():(g=Math.ceil(parseFloat(i.params.slidesPerView,10)),h&&g%2===0&&(g=g+1));let m=d-c<g;if(h&&(m=m||c<Math.ceil(g/2)),s&&h&&i.params.slidesPerView!=="auto"&&!a&&(m=!1),m){const y=h?c<i.activeIndex?"prev":"next":c-i.activeIndex-1<i.params.slidesPerView?"next":"prev";i.loopFix({direction:y,slideTo:!0,activeSlideIndex:y==="next"?c+1:c-d+1,slideRealIndex:y==="next"?i.realIndex:void 0})}if(a){const y=l*i.params.grid.rows;l=i.slides.find(b=>b.getAttribute("data-swiper-slide-index")*1===y).column}else l=i.getSlideIndexByData(l)}return requestAnimationFrame(()=>{i.slideTo(l,e,t,s)}),i}function aB(n,e,t){e===void 0&&(e=!0);const s=this,{enabled:i,params:a,animating:l}=s;if(!i||s.destroyed)return s;typeof n>"u"&&(n=s.params.speed);let c=a.slidesPerGroup;a.slidesPerView==="auto"&&a.slidesPerGroup===1&&a.slidesPerGroupAuto&&(c=Math.max(s.slidesPerViewDynamic("current",!0),1));const d=s.activeIndex<a.slidesPerGroupSkip?1:c,h=s.virtual&&a.virtual.enabled;if(a.loop){if(l&&!h&&a.loopPreventsSliding)return!1;if(s.loopFix({direction:"next"}),s._clientLeft=s.wrapperEl.clientLeft,s.activeIndex===s.slides.length-1&&a.cssMode)return requestAnimationFrame(()=>{s.slideTo(s.activeIndex+d,n,e,t)}),!0}return a.rewind&&s.isEnd?s.slideTo(0,n,e,t):s.slideTo(s.activeIndex+d,n,e,t)}function oB(n,e,t){e===void 0&&(e=!0);const s=this,{params:i,snapGrid:a,slidesGrid:l,rtlTranslate:c,enabled:d,animating:h}=s;if(!d||s.destroyed)return s;typeof n>"u"&&(n=s.params.speed);const g=s.virtual&&i.virtual.enabled;if(i.loop){if(h&&!g&&i.loopPreventsSliding)return!1;s.loopFix({direction:"prev"}),s._clientLeft=s.wrapperEl.clientLeft}const m=c?s.translate:-s.translate;function y(M){return M<0?-Math.floor(Math.abs(M)):Math.floor(M)}const b=y(m),S=a.map(M=>y(M)),_=i.freeMode&&i.freeMode.enabled;let T=a[S.indexOf(b)-1];if(typeof T>"u"&&(i.cssMode||_)){let M;a.forEach((O,L)=>{b>=O&&(M=L)}),typeof M<"u"&&(T=_?a[M]:a[M>0?M-1:M])}let C=0;if(typeof T<"u"&&(C=l.indexOf(T),C<0&&(C=s.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(C=C-s.slidesPerViewDynamic("previous",!0)+1,C=Math.max(C,0))),i.rewind&&s.isBeginning){const M=s.params.virtual&&s.params.virtual.enabled&&s.virtual?s.virtual.slides.length-1:s.slides.length-1;return s.slideTo(M,n,e,t)}else if(i.loop&&s.activeIndex===0&&i.cssMode)return requestAnimationFrame(()=>{s.slideTo(C,n,e,t)}),!0;return s.slideTo(C,n,e,t)}function lB(n,e,t){e===void 0&&(e=!0);const s=this;if(!s.destroyed)return typeof n>"u"&&(n=s.params.speed),s.slideTo(s.activeIndex,n,e,t)}function cB(n,e,t,s){e===void 0&&(e=!0),s===void 0&&(s=.5);const i=this;if(i.destroyed)return;typeof n>"u"&&(n=i.params.speed);let a=i.activeIndex;const l=Math.min(i.params.slidesPerGroupSkip,a),c=l+Math.floor((a-l)/i.params.slidesPerGroup),d=i.rtlTranslate?i.translate:-i.translate;if(d>=i.snapGrid[c]){const h=i.snapGrid[c],g=i.snapGrid[c+1];d-h>(g-h)*s&&(a+=i.params.slidesPerGroup)}else{const h=i.snapGrid[c-1],g=i.snapGrid[c];d-h<=(g-h)*s&&(a-=i.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,i.slidesGrid.length-1),i.slideTo(a,n,e,t)}function uB(){const n=this;if(n.destroyed)return;const{params:e,slidesEl:t}=n,s=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let i=n.getSlideIndexWhenGrid(n.clickedIndex),a;const l=n.isElement?"swiper-slide":`.${e.slideClass}`,c=n.grid&&n.params.grid&&n.params.grid.rows>1;if(e.loop){if(n.animating)return;a=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?n.slideToLoop(a):i>(c?(n.slides.length-s)/2-(n.params.grid.rows-1):n.slides.length-s)?(n.loopFix(),i=n.getSlideIndex(Vn(t,`${l}[data-swiper-slide-index="${a}"]`)[0]),yE(()=>{n.slideTo(i)})):n.slideTo(i)}else n.slideTo(i)}var dB={slideTo:iB,slideToLoop:rB,slideNext:aB,slidePrev:oB,slideReset:lB,slideToClosest:cB,slideToClickedSlide:uB};function hB(n,e){const t=this,{params:s,slidesEl:i}=t;if(!s.loop||t.virtual&&t.params.virtual.enabled)return;const a=()=>{Vn(i,`.${s.slideClass}, swiper-slide`).forEach((b,S)=>{b.setAttribute("data-swiper-slide-index",S)})},l=()=>{const y=Vn(i,`.${s.slideBlankClass}`);y.forEach(b=>{b.remove()}),y.length>0&&(t.recalcSlides(),t.updateSlides())},c=t.grid&&s.grid&&s.grid.rows>1;s.loopAddBlankSlides&&(s.slidesPerGroup>1||c)&&l();const d=s.slidesPerGroup*(c?s.grid.rows:1),h=t.slides.length%d!==0,g=c&&t.slides.length%s.grid.rows!==0,m=y=>{for(let b=0;b<y;b+=1){const S=t.isElement?Eh("swiper-slide",[s.slideBlankClass]):Eh("div",[s.slideClass,s.slideBlankClass]);t.slidesEl.append(S)}};if(h){if(s.loopAddBlankSlides){const y=d-t.slides.length%d;m(y),t.recalcSlides(),t.updateSlides()}else Th("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");a()}else if(g){if(s.loopAddBlankSlides){const y=s.grid.rows-t.slides.length%s.grid.rows;m(y),t.recalcSlides(),t.updateSlides()}else Th("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");a()}else a();t.loopFix({slideRealIndex:n,direction:s.centeredSlides?void 0:"next",initial:e})}function fB(n){let{slideRealIndex:e,slideTo:t=!0,direction:s,setTranslate:i,activeSlideIndex:a,initial:l,byController:c,byMousewheel:d}=n===void 0?{}:n;const h=this;if(!h.params.loop)return;h.emit("beforeLoopFix");const{slides:g,allowSlidePrev:m,allowSlideNext:y,slidesEl:b,params:S}=h,{centeredSlides:_,initialSlide:T}=S;if(h.allowSlidePrev=!0,h.allowSlideNext=!0,h.virtual&&S.virtual.enabled){t&&(!S.centeredSlides&&h.snapIndex===0?h.slideTo(h.virtual.slides.length,0,!1,!0):S.centeredSlides&&h.snapIndex<S.slidesPerView?h.slideTo(h.virtual.slides.length+h.snapIndex,0,!1,!0):h.snapIndex===h.snapGrid.length-1&&h.slideTo(h.virtual.slidesBefore,0,!1,!0)),h.allowSlidePrev=m,h.allowSlideNext=y,h.emit("loopFix");return}let C=S.slidesPerView;C==="auto"?C=h.slidesPerViewDynamic():(C=Math.ceil(parseFloat(S.slidesPerView,10)),_&&C%2===0&&(C=C+1));const M=S.slidesPerGroupAuto?C:S.slidesPerGroup;let O=_?Math.max(M,Math.ceil(C/2)):M;O%M!==0&&(O+=M-O%M),O+=S.loopAdditionalSlides,h.loopedSlides=O;const L=h.grid&&S.grid&&S.grid.rows>1;g.length<C+O||h.params.effect==="cards"&&g.length<C+O*2?Th("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):L&&S.grid.fill==="row"&&Th("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const j=[],D=[],k=L?Math.ceil(g.length/S.grid.rows):g.length,B=l&&k-T<C&&!_;let P=B?T:h.activeIndex;typeof a>"u"?a=h.getSlideIndex(g.find(R=>R.classList.contains(S.slideActiveClass))):P=a;const z=s==="next"||!s,I=s==="prev"||!s;let F=0,ee=0;const ae=(L?g[a].column:a)+(_&&typeof i>"u"?-C/2+.5:0);if(ae<O){F=Math.max(O-ae,M);for(let R=0;R<O-ae;R+=1){const V=R-Math.floor(R/k)*k;if(L){const K=k-V-1;for(let te=g.length-1;te>=0;te-=1)g[te].column===K&&j.push(te)}else j.push(k-V-1)}}else if(ae+C>k-O){ee=Math.max(ae-(k-O*2),M),B&&(ee=Math.max(ee,C-k+T+1));for(let R=0;R<ee;R+=1){const V=R-Math.floor(R/k)*k;L?g.forEach((K,te)=>{K.column===V&&D.push(te)}):D.push(V)}}if(h.__preventObserver__=!0,requestAnimationFrame(()=>{h.__preventObserver__=!1}),h.params.effect==="cards"&&g.length<C+O*2&&(D.includes(a)&&D.splice(D.indexOf(a),1),j.includes(a)&&j.splice(j.indexOf(a),1)),I&&j.forEach(R=>{g[R].swiperLoopMoveDOM=!0,b.prepend(g[R]),g[R].swiperLoopMoveDOM=!1}),z&&D.forEach(R=>{g[R].swiperLoopMoveDOM=!0,b.append(g[R]),g[R].swiperLoopMoveDOM=!1}),h.recalcSlides(),S.slidesPerView==="auto"?h.updateSlides():L&&(j.length>0&&I||D.length>0&&z)&&h.slides.forEach((R,V)=>{h.grid.updateSlide(V,R,h.slides)}),S.watchSlidesProgress&&h.updateSlidesOffset(),t){if(j.length>0&&I){if(typeof e>"u"){const R=h.slidesGrid[P],K=h.slidesGrid[P+F]-R;d?h.setTranslate(h.translate-K):(h.slideTo(P+Math.ceil(F),0,!1,!0),i&&(h.touchEventsData.startTranslate=h.touchEventsData.startTranslate-K,h.touchEventsData.currentTranslate=h.touchEventsData.currentTranslate-K))}else if(i){const R=L?j.length/S.grid.rows:j.length;h.slideTo(h.activeIndex+R,0,!1,!0),h.touchEventsData.currentTranslate=h.translate}}else if(D.length>0&&z)if(typeof e>"u"){const R=h.slidesGrid[P],K=h.slidesGrid[P-ee]-R;d?h.setTranslate(h.translate-K):(h.slideTo(P-ee,0,!1,!0),i&&(h.touchEventsData.startTranslate=h.touchEventsData.startTranslate-K,h.touchEventsData.currentTranslate=h.touchEventsData.currentTranslate-K))}else{const R=L?D.length/S.grid.rows:D.length;h.slideTo(h.activeIndex-R,0,!1,!0)}}if(h.allowSlidePrev=m,h.allowSlideNext=y,h.controller&&h.controller.control&&!c){const R={slideRealIndex:e,direction:s,setTranslate:i,activeSlideIndex:a,byController:!0};Array.isArray(h.controller.control)?h.controller.control.forEach(V=>{!V.destroyed&&V.params.loop&&V.loopFix({...R,slideTo:V.params.slidesPerView===S.slidesPerView?t:!1})}):h.controller.control instanceof h.constructor&&h.controller.control.params.loop&&h.controller.control.loopFix({...R,slideTo:h.controller.control.params.slidesPerView===S.slidesPerView?t:!1})}h.emit("loopFix")}function gB(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||!t||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const s=[];n.slides.forEach(i=>{const a=typeof i.swiperSlideIndex>"u"?i.getAttribute("data-swiper-slide-index")*1:i.swiperSlideIndex;s[a]=i}),n.slides.forEach(i=>{i.removeAttribute("data-swiper-slide-index")}),s.forEach(i=>{t.append(i)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var pB={loopCreate:hB,loopFix:fB,loopDestroy:gB};function mB(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function vB(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var yB={setGrabCursor:mB,unsetGrabCursor:vB};function xB(n,e){e===void 0&&(e=this);function t(s){if(!s||s===da()||s===ks())return null;s.assignedSlot&&(s=s.assignedSlot);const i=s.closest(n);return!i&&!s.getRootNode?null:i||t(s.getRootNode().host)}return t(e)}function I_(n,e,t){const s=ks(),{params:i}=n,a=i.edgeSwipeDetection,l=i.edgeSwipeThreshold;return a&&(t<=l||t>=s.innerWidth-l)?a==="prevent"?(e.preventDefault(),!0):!1:!0}function bB(n){const e=this,t=da();let s=n;s.originalEvent&&(s=s.originalEvent);const i=e.touchEventsData;if(s.type==="pointerdown"){if(i.pointerId!==null&&i.pointerId!==s.pointerId)return;i.pointerId=s.pointerId}else s.type==="touchstart"&&s.targetTouches.length===1&&(i.touchId=s.targetTouches[0].identifier);if(s.type==="touchstart"){I_(e,s,s.targetTouches[0].pageX);return}const{params:a,touches:l,enabled:c}=e;if(!c||!a.simulateTouch&&s.pointerType==="mouse"||e.animating&&a.preventInteractionOnTransition)return;!e.animating&&a.cssMode&&a.loop&&e.loopFix();let d=s.target;if(a.touchEventsTarget==="wrapper"&&!j8(d,e.wrapperEl)||"which"in s&&s.which===3||"button"in s&&s.button>0||i.isTouched&&i.isMoved)return;const h=!!a.noSwipingClass&&a.noSwipingClass!=="",g=s.composedPath?s.composedPath():s.path;h&&s.target&&s.target.shadowRoot&&g&&(d=g[0]);const m=a.noSwipingSelector?a.noSwipingSelector:`.${a.noSwipingClass}`,y=!!(s.target&&s.target.shadowRoot);if(a.noSwiping&&(y?xB(m,d):d.closest(m))){e.allowClick=!0;return}if(a.swipeHandler&&!d.closest(a.swipeHandler))return;l.currentX=s.pageX,l.currentY=s.pageY;const b=l.currentX,S=l.currentY;if(!I_(e,s,b))return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),l.startX=b,l.startY=S,i.touchStartTime=Ch(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,a.threshold>0&&(i.allowThresholdMove=!1);let _=!0;d.matches(i.focusableElements)&&(_=!1,d.nodeName==="SELECT"&&(i.isTouched=!1)),t.activeElement&&t.activeElement.matches(i.focusableElements)&&t.activeElement!==d&&(s.pointerType==="mouse"||s.pointerType!=="mouse"&&!d.matches(i.focusableElements))&&t.activeElement.blur();const T=_&&e.allowTouchMove&&a.touchStartPreventDefault;(a.touchStartForcePreventDefault||T)&&!d.isContentEditable&&s.preventDefault(),a.freeMode&&a.freeMode.enabled&&e.freeMode&&e.animating&&!a.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",s)}function wB(n){const e=da(),t=this,s=t.touchEventsData,{params:i,touches:a,rtlTranslate:l,enabled:c}=t;if(!c||!i.simulateTouch&&n.pointerType==="mouse")return;let d=n;if(d.originalEvent&&(d=d.originalEvent),d.type==="pointermove"&&(s.touchId!==null||d.pointerId!==s.pointerId))return;let h;if(d.type==="touchmove"){if(h=[...d.changedTouches].find(j=>j.identifier===s.touchId),!h||h.identifier!==s.touchId)return}else h=d;if(!s.isTouched){s.startMoving&&s.isScrolling&&t.emit("touchMoveOpposite",d);return}const g=h.pageX,m=h.pageY;if(d.preventedByNestedSwiper){a.startX=g,a.startY=m;return}if(!t.allowTouchMove){d.target.matches(s.focusableElements)||(t.allowClick=!1),s.isTouched&&(Object.assign(a,{startX:g,startY:m,currentX:g,currentY:m}),s.touchStartTime=Ch());return}if(i.touchReleaseOnEdges&&!i.loop)if(t.isVertical()){if(m<a.startY&&t.translate<=t.maxTranslate()||m>a.startY&&t.translate>=t.minTranslate()){s.isTouched=!1,s.isMoved=!1;return}}else{if(l&&(g>a.startX&&-t.translate<=t.maxTranslate()||g<a.startX&&-t.translate>=t.minTranslate()))return;if(!l&&(g<a.startX&&t.translate<=t.maxTranslate()||g>a.startX&&t.translate>=t.minTranslate()))return}if(e.activeElement&&e.activeElement.matches(s.focusableElements)&&e.activeElement!==d.target&&d.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&d.target===e.activeElement&&d.target.matches(s.focusableElements)){s.isMoved=!0,t.allowClick=!1;return}s.allowTouchCallbacks&&t.emit("touchMove",d),a.previousX=a.currentX,a.previousY=a.currentY,a.currentX=g,a.currentY=m;const y=a.currentX-a.startX,b=a.currentY-a.startY;if(t.params.threshold&&Math.sqrt(y**2+b**2)<t.params.threshold)return;if(typeof s.isScrolling>"u"){let j;t.isHorizontal()&&a.currentY===a.startY||t.isVertical()&&a.currentX===a.startX?s.isScrolling=!1:y*y+b*b>=25&&(j=Math.atan2(Math.abs(b),Math.abs(y))*180/Math.PI,s.isScrolling=t.isHorizontal()?j>i.touchAngle:90-j>i.touchAngle)}if(s.isScrolling&&t.emit("touchMoveOpposite",d),typeof s.startMoving>"u"&&(a.currentX!==a.startX||a.currentY!==a.startY)&&(s.startMoving=!0),s.isScrolling||d.type==="touchmove"&&s.preventTouchMoveFromPointerMove){s.isTouched=!1;return}if(!s.startMoving)return;t.allowClick=!1,!i.cssMode&&d.cancelable&&d.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&d.stopPropagation();let S=t.isHorizontal()?y:b,_=t.isHorizontal()?a.currentX-a.previousX:a.currentY-a.previousY;i.oneWayMovement&&(S=Math.abs(S)*(l?1:-1),_=Math.abs(_)*(l?1:-1)),a.diff=S,S*=i.touchRatio,l&&(S=-S,_=-_);const T=t.touchesDirection;t.swipeDirection=S>0?"prev":"next",t.touchesDirection=_>0?"prev":"next";const C=t.params.loop&&!i.cssMode,M=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!s.isMoved){if(C&&M&&t.loopFix({direction:t.swipeDirection}),s.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const j=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(j)}s.allowMomentumBounce=!1,i.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",d)}if(new Date().getTime(),i._loopSwapReset!==!1&&s.isMoved&&s.allowThresholdMove&&T!==t.touchesDirection&&C&&M&&Math.abs(S)>=1){Object.assign(a,{startX:g,startY:m,currentX:g,currentY:m,startTranslate:s.currentTranslate}),s.loopSwapReset=!0,s.startTranslate=s.currentTranslate;return}t.emit("sliderMove",d),s.isMoved=!0,s.currentTranslate=S+s.startTranslate;let O=!0,L=i.resistanceRatio;if(i.touchReleaseOnEdges&&(L=0),S>0?(C&&M&&s.allowThresholdMove&&s.currentTranslate>(i.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(i.slidesPerView!=="auto"&&t.slides.length-i.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),s.currentTranslate>t.minTranslate()&&(O=!1,i.resistance&&(s.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+s.startTranslate+S)**L))):S<0&&(C&&M&&s.allowThresholdMove&&s.currentTranslate<(i.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(i.slidesPerView!=="auto"&&t.slides.length-i.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(i.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),s.currentTranslate<t.maxTranslate()&&(O=!1,i.resistance&&(s.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-s.startTranslate-S)**L))),O&&(d.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&s.currentTranslate<s.startTranslate&&(s.currentTranslate=s.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&s.currentTranslate>s.startTranslate&&(s.currentTranslate=s.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(s.currentTranslate=s.startTranslate),i.threshold>0)if(Math.abs(S)>i.threshold||s.allowThresholdMove){if(!s.allowThresholdMove){s.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,s.currentTranslate=s.startTranslate,a.diff=t.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY;return}}else{s.currentTranslate=s.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&t.freeMode||i.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(s.currentTranslate),t.setTranslate(s.currentTranslate))}function SB(n){const e=this,t=e.touchEventsData;let s=n;s.originalEvent&&(s=s.originalEvent);let i;if(s.type==="touchend"||s.type==="touchcancel"){if(i=[...s.changedTouches].find(j=>j.identifier===t.touchId),!i||i.identifier!==t.touchId)return}else{if(t.touchId!==null||s.pointerId!==t.pointerId)return;i=s}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(s.type)&&!(["pointercancel","contextmenu"].includes(s.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:l,touches:c,rtlTranslate:d,slidesGrid:h,enabled:g}=e;if(!g||!l.simulateTouch&&s.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",s),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&l.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}l.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const m=Ch(),y=m-t.touchStartTime;if(e.allowClick){const j=s.path||s.composedPath&&s.composedPath();e.updateClickedSlide(j&&j[0]||s.target,j),e.emit("tap click",s),y<300&&m-t.lastClickTime<300&&e.emit("doubleTap doubleClick",s)}if(t.lastClickTime=Ch(),yE(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||c.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let b;if(l.followFinger?b=d?e.translate:-e.translate:b=-t.currentTranslate,l.cssMode)return;if(l.freeMode&&l.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:b});return}const S=b>=-e.maxTranslate()&&!e.params.loop;let _=0,T=e.slidesSizesGrid[0];for(let j=0;j<h.length;j+=j<l.slidesPerGroupSkip?1:l.slidesPerGroup){const D=j<l.slidesPerGroupSkip-1?1:l.slidesPerGroup;typeof h[j+D]<"u"?(S||b>=h[j]&&b<h[j+D])&&(_=j,T=h[j+D]-h[j]):(S||b>=h[j])&&(_=j,T=h[h.length-1]-h[h.length-2])}let C=null,M=null;l.rewind&&(e.isBeginning?M=l.virtual&&l.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(C=0));const O=(b-h[_])/T,L=_<l.slidesPerGroupSkip-1?1:l.slidesPerGroup;if(y>l.longSwipesMs){if(!l.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(O>=l.longSwipesRatio?e.slideTo(l.rewind&&e.isEnd?C:_+L):e.slideTo(_)),e.swipeDirection==="prev"&&(O>1-l.longSwipesRatio?e.slideTo(_+L):M!==null&&O<0&&Math.abs(O)>l.longSwipesRatio?e.slideTo(M):e.slideTo(_))}else{if(!l.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(s.target===e.navigation.nextEl||s.target===e.navigation.prevEl)?s.target===e.navigation.nextEl?e.slideTo(_+L):e.slideTo(_):(e.swipeDirection==="next"&&e.slideTo(C!==null?C:_+L),e.swipeDirection==="prev"&&e.slideTo(M!==null?M:_))}}function F_(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:s,allowSlidePrev:i,snapGrid:a}=n,l=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const c=l&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!c?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!l?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=i,n.allowSlideNext=s,n.params.watchOverflow&&a!==n.snapGrid&&n.checkOverflow()}function _B(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function CB(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:s}=n;if(!s)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let i;const a=n.maxTranslate()-n.minTranslate();a===0?i=0:i=(n.translate-n.minTranslate())/a,i!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function TB(n){const e=this;eh(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function EB(){const n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}const CE=(n,e)=>{const t=da(),{params:s,el:i,wrapperEl:a,device:l}=n,c=!!s.nested,d=e==="on"?"addEventListener":"removeEventListener",h=e;!i||typeof i=="string"||(t[d]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:c}),i[d]("touchstart",n.onTouchStart,{passive:!1}),i[d]("pointerdown",n.onTouchStart,{passive:!1}),t[d]("touchmove",n.onTouchMove,{passive:!1,capture:c}),t[d]("pointermove",n.onTouchMove,{passive:!1,capture:c}),t[d]("touchend",n.onTouchEnd,{passive:!0}),t[d]("pointerup",n.onTouchEnd,{passive:!0}),t[d]("pointercancel",n.onTouchEnd,{passive:!0}),t[d]("touchcancel",n.onTouchEnd,{passive:!0}),t[d]("pointerout",n.onTouchEnd,{passive:!0}),t[d]("pointerleave",n.onTouchEnd,{passive:!0}),t[d]("contextmenu",n.onTouchEnd,{passive:!0}),(s.preventClicks||s.preventClicksPropagation)&&i[d]("click",n.onClick,!0),s.cssMode&&a[d]("scroll",n.onScroll),s.updateOnWindowResize?n[h](l.ios||l.android?"resize orientationchange observerUpdate":"resize observerUpdate",F_,!0):n[h]("observerUpdate",F_,!0),i[d]("load",n.onLoad,{capture:!0}))};function jB(){const n=this,{params:e}=n;n.onTouchStart=bB.bind(n),n.onTouchMove=wB.bind(n),n.onTouchEnd=SB.bind(n),n.onDocumentTouchStart=EB.bind(n),e.cssMode&&(n.onScroll=CB.bind(n)),n.onClick=_B.bind(n),n.onLoad=TB.bind(n),CE(n,"on")}function kB(){CE(this,"off")}var MB={attachEvents:jB,detachEvents:kB};const V_=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function OB(){const n=this,{realIndex:e,initialized:t,params:s,el:i}=n,a=s.breakpoints;if(!a||a&&Object.keys(a).length===0)return;const l=da(),c=s.breakpointsBase==="window"||!s.breakpointsBase?s.breakpointsBase:"container",d=["window","container"].includes(s.breakpointsBase)||!s.breakpointsBase?n.el:l.querySelector(s.breakpointsBase),h=n.getBreakpoint(a,c,d);if(!h||n.currentBreakpoint===h)return;const m=(h in a?a[h]:void 0)||n.originalParams,y=V_(n,s),b=V_(n,m),S=n.params.grabCursor,_=m.grabCursor,T=s.enabled;y&&!b?(i.classList.remove(`${s.containerModifierClass}grid`,`${s.containerModifierClass}grid-column`),n.emitContainerClasses()):!y&&b&&(i.classList.add(`${s.containerModifierClass}grid`),(m.grid.fill&&m.grid.fill==="column"||!m.grid.fill&&s.grid.fill==="column")&&i.classList.add(`${s.containerModifierClass}grid-column`),n.emitContainerClasses()),S&&!_?n.unsetGrabCursor():!S&&_&&n.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(D=>{if(typeof m[D]>"u")return;const k=s[D]&&s[D].enabled,B=m[D]&&m[D].enabled;k&&!B&&n[D].disable(),!k&&B&&n[D].enable()});const C=m.direction&&m.direction!==s.direction,M=s.loop&&(m.slidesPerView!==s.slidesPerView||C),O=s.loop;C&&t&&n.changeDirection(),Zs(n.params,m);const L=n.params.enabled,j=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),T&&!L?n.disable():!T&&L&&n.enable(),n.currentBreakpoint=h,n.emit("_beforeBreakpoint",m),t&&(M?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!O&&j?(n.loopCreate(e),n.updateSlides()):O&&!j&&n.loopDestroy()),n.emit("breakpoint",m)}function LB(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let s=!1;const i=ks(),a=e==="window"?i.innerHeight:t.clientHeight,l=Object.keys(n).map(c=>{if(typeof c=="string"&&c.indexOf("@")===0){const d=parseFloat(c.substr(1));return{value:a*d,point:c}}return{value:c,point:c}});l.sort((c,d)=>parseInt(c.value,10)-parseInt(d.value,10));for(let c=0;c<l.length;c+=1){const{point:d,value:h}=l[c];e==="window"?i.matchMedia(`(min-width: ${h}px)`).matches&&(s=d):h<=t.clientWidth&&(s=d)}return s||"max"}var AB={setBreakpoint:OB,getBreakpoint:LB};function DB(n,e){const t=[];return n.forEach(s=>{typeof s=="object"?Object.keys(s).forEach(i=>{s[i]&&t.push(e+i)}):typeof s=="string"&&t.push(e+s)}),t}function NB(){const n=this,{classNames:e,params:t,rtl:s,el:i,device:a}=n,l=DB(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:s},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:a.android},{ios:a.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...l),i.classList.add(...e),n.emitContainerClasses()}function PB(){const n=this,{el:e,classNames:t}=n;!e||typeof e=="string"||(e.classList.remove(...t),n.emitContainerClasses())}var RB={addClasses:NB,removeClasses:PB};function BB(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:s}=t;if(s){const i=n.slides.length-1,a=n.slidesGrid[i]+n.slidesSizesGrid[i]+s*2;n.isLocked=n.size>a}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var UB={checkOverflow:BB},Xm={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function zB(n,e){return function(s){s===void 0&&(s={});const i=Object.keys(s)[0],a=s[i];if(typeof a!="object"||a===null){Zs(e,s);return}if(n[i]===!0&&(n[i]={enabled:!0}),i==="navigation"&&n[i]&&n[i].enabled&&!n[i].prevEl&&!n[i].nextEl&&(n[i].auto=!0),["pagination","scrollbar"].indexOf(i)>=0&&n[i]&&n[i].enabled&&!n[i].el&&(n[i].auto=!0),!(i in n&&"enabled"in a)){Zs(e,s);return}typeof n[i]=="object"&&!("enabled"in n[i])&&(n[i].enabled=!0),n[i]||(n[i]={enabled:!1}),Zs(e,s)}}const Zp={eventsEmitter:R8,update:q8,translate:J8,transition:nB,slide:dB,loop:pB,grabCursor:yB,events:MB,breakpoints:AB,checkOverflow:UB,classes:RB},Qp={};let u0=class fi{constructor(){let e,t;for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];i.length===1&&i[0].constructor&&Object.prototype.toString.call(i[0]).slice(8,-1)==="Object"?t=i[0]:[e,t]=i,t||(t={}),t=Zs({},t),e&&!t.el&&(t.el=e);const l=da();if(t.el&&typeof t.el=="string"&&l.querySelectorAll(t.el).length>1){const g=[];return l.querySelectorAll(t.el).forEach(m=>{const y=Zs({},t,{el:m});g.push(new fi(y))}),g}const c=this;c.__swiper__=!0,c.support=bE(),c.device=wE({userAgent:t.userAgent}),c.browser=SE(),c.eventsListeners={},c.eventsAnyListeners=[],c.modules=[...c.__modules__],t.modules&&Array.isArray(t.modules)&&c.modules.push(...t.modules);const d={};c.modules.forEach(g=>{g({params:t,swiper:c,extendParams:zB(t,d),on:c.on.bind(c),once:c.once.bind(c),off:c.off.bind(c),emit:c.emit.bind(c)})});const h=Zs({},Xm,d);return c.params=Zs({},h,Qp,t),c.originalParams=Zs({},c.params),c.passedParams=Zs({},t),c.params&&c.params.on&&Object.keys(c.params.on).forEach(g=>{c.on(g,c.params.on[g])}),c.params&&c.params.onAny&&c.onAny(c.params.onAny),Object.assign(c,{enabled:c.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return c.params.direction==="horizontal"},isVertical(){return c.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:c.params.allowSlideNext,allowSlidePrev:c.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:c.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:c.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),c.emit("_swiper"),c.params.init&&c.init(),c}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:s}=this,i=Vn(t,`.${s.slideClass}, swiper-slide`),a=R_(i[0]);return R_(e)-a}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>t.getAttribute("data-swiper-slide-index")*1===e))}getSlideIndexWhenGrid(e){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?e=Math.floor(e/this.params.grid.rows):this.params.grid.fill==="row"&&(e=e%Math.ceil(this.slides.length/this.params.grid.rows))),e}recalcSlides(){const e=this,{slidesEl:t,params:s}=e;e.slides=Vn(t,`.${s.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const s=this;e=Math.min(Math.max(e,0),1);const i=s.minTranslate(),l=(s.maxTranslate()-i)*e+i;s.translateTo(l,typeof t>"u"?0:t),s.updateActiveIndex(),s.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(s=>s.indexOf("swiper")===0||s.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(s=>s.indexOf("swiper-slide")===0||s.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(s=>{const i=e.getSlideClasses(s);t.push({slideEl:s,classNames:i}),e.emit("_slideClass",s,i)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const s=this,{params:i,slides:a,slidesGrid:l,slidesSizesGrid:c,size:d,activeIndex:h}=s;let g=1;if(typeof i.slidesPerView=="number")return i.slidesPerView;if(i.centeredSlides){let m=a[h]?Math.ceil(a[h].swiperSlideSize):0,y;for(let b=h+1;b<a.length;b+=1)a[b]&&!y&&(m+=Math.ceil(a[b].swiperSlideSize),g+=1,m>d&&(y=!0));for(let b=h-1;b>=0;b-=1)a[b]&&!y&&(m+=a[b].swiperSlideSize,g+=1,m>d&&(y=!0))}else if(e==="current")for(let m=h+1;m<a.length;m+=1)(t?l[m]+c[m]-l[h]<d:l[m]-l[h]<d)&&(g+=1);else for(let m=h-1;m>=0;m-=1)l[h]-l[m]<d&&(g+=1);return g}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:s}=e;s.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(l=>{l.complete&&eh(e,l)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function i(){const l=e.rtlTranslate?e.translate*-1:e.translate,c=Math.min(Math.max(l,e.maxTranslate()),e.minTranslate());e.setTranslate(c),e.updateActiveIndex(),e.updateSlidesClasses()}let a;if(s.freeMode&&s.freeMode.enabled&&!s.cssMode)i(),s.autoHeight&&e.updateAutoHeight();else{if((s.slidesPerView==="auto"||s.slidesPerView>1)&&e.isEnd&&!s.centeredSlides){const l=e.virtual&&s.virtual.enabled?e.virtual.slides:e.slides;a=e.slideTo(l.length-1,0,!1,!0)}else a=e.slideTo(e.activeIndex,0,!1,!0);a||i()}s.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const s=this,i=s.params.direction;return e||(e=i==="horizontal"?"vertical":"horizontal"),e===i||e!=="horizontal"&&e!=="vertical"||(s.el.classList.remove(`${s.params.containerModifierClass}${i}`),s.el.classList.add(`${s.params.containerModifierClass}${e}`),s.emitContainerClasses(),s.params.direction=e,s.slides.forEach(a=>{e==="vertical"?a.style.width="":a.style.height=""}),s.emit("changeDirection"),t&&s.update()),s}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let s=e||t.params.el;if(typeof s=="string"&&(s=document.querySelector(s)),!s)return!1;s.swiper=t,s.parentNode&&s.parentNode.host&&s.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const i=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let l=s&&s.shadowRoot&&s.shadowRoot.querySelector?s.shadowRoot.querySelector(i()):Vn(s,i())[0];return!l&&t.params.createElements&&(l=Eh("div",t.params.wrapperClass),s.append(l),Vn(s,`.${t.params.slideClass}`).forEach(c=>{l.append(c)})),Object.assign(t,{el:s,wrapperEl:l,slidesEl:t.isElement&&!s.parentNode.host.slideSlots?s.parentNode.host:l,hostEl:t.isElement?s.parentNode.host:s,mounted:!0,rtl:s.dir.toLowerCase()==="rtl"||hr(s,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(s.dir.toLowerCase()==="rtl"||hr(s,"direction")==="rtl"),wrongRTL:hr(l,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const i=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&i.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),i.forEach(a=>{a.complete?eh(t,a):a.addEventListener("load",l=>{eh(t,l.target)})}),Wm(t),t.initialized=!0,Wm(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const s=this,{params:i,el:a,wrapperEl:l,slides:c}=s;return typeof s.params>"u"||s.destroyed||(s.emit("beforeDestroy"),s.initialized=!1,s.detachEvents(),i.loop&&s.loopDestroy(),t&&(s.removeClasses(),a&&typeof a!="string"&&a.removeAttribute("style"),l&&l.removeAttribute("style"),c&&c.length&&c.forEach(d=>{d.classList.remove(i.slideVisibleClass,i.slideFullyVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),d.removeAttribute("style"),d.removeAttribute("data-swiper-slide-index")})),s.emit("destroy"),Object.keys(s.eventsListeners).forEach(d=>{s.off(d)}),e!==!1&&(s.el&&typeof s.el!="string"&&(s.el.swiper=null),S8(s)),s.destroyed=!0),null}static extendDefaults(e){Zs(Qp,e)}static get extendedDefaults(){return Qp}static get defaults(){return Xm}static installModule(e){fi.prototype.__modules__||(fi.prototype.__modules__=[]);const t=fi.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>fi.installModule(t)),fi):(fi.installModule(e),fi)}};Object.keys(Zp).forEach(n=>{Object.keys(Zp[n]).forEach(e=>{u0.prototype[e]=Zp[n][e]})});u0.use([N8,P8]);const TE=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function ra(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function _o(n,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(s=>t.indexOf(s)<0).forEach(s=>{typeof n[s]>"u"?n[s]=e[s]:ra(e[s])&&ra(n[s])&&Object.keys(e[s]).length>0?e[s].__swiper__?n[s]=e[s]:_o(n[s],e[s]):n[s]=e[s]})}function EE(n){return n===void 0&&(n={}),n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function jE(n){return n===void 0&&(n={}),n.pagination&&typeof n.pagination.el>"u"}function kE(n){return n===void 0&&(n={}),n.scrollbar&&typeof n.scrollbar.el>"u"}function ME(n){n===void 0&&(n="");const e=n.split(" ").map(s=>s.trim()).filter(s=>!!s),t=[];return e.forEach(s=>{t.indexOf(s)<0&&t.push(s)}),t.join(" ")}function IB(n){return n===void 0&&(n=""),n?n.includes("swiper-wrapper")?n:`swiper-wrapper ${n}`:"swiper-wrapper"}function FB(n){let{swiper:e,slides:t,passedParams:s,changedParams:i,nextEl:a,prevEl:l,scrollbarEl:c,paginationEl:d}=n;const h=i.filter(P=>P!=="children"&&P!=="direction"&&P!=="wrapperClass"),{params:g,pagination:m,navigation:y,scrollbar:b,virtual:S,thumbs:_}=e;let T,C,M,O,L,j,D,k;i.includes("thumbs")&&s.thumbs&&s.thumbs.swiper&&!s.thumbs.swiper.destroyed&&g.thumbs&&(!g.thumbs.swiper||g.thumbs.swiper.destroyed)&&(T=!0),i.includes("controller")&&s.controller&&s.controller.control&&g.controller&&!g.controller.control&&(C=!0),i.includes("pagination")&&s.pagination&&(s.pagination.el||d)&&(g.pagination||g.pagination===!1)&&m&&!m.el&&(M=!0),i.includes("scrollbar")&&s.scrollbar&&(s.scrollbar.el||c)&&(g.scrollbar||g.scrollbar===!1)&&b&&!b.el&&(O=!0),i.includes("navigation")&&s.navigation&&(s.navigation.prevEl||l)&&(s.navigation.nextEl||a)&&(g.navigation||g.navigation===!1)&&y&&!y.prevEl&&!y.nextEl&&(L=!0);const B=P=>{e[P]&&(e[P].destroy(),P==="navigation"?(e.isElement&&(e[P].prevEl.remove(),e[P].nextEl.remove()),g[P].prevEl=void 0,g[P].nextEl=void 0,e[P].prevEl=void 0,e[P].nextEl=void 0):(e.isElement&&e[P].el.remove(),g[P].el=void 0,e[P].el=void 0))};i.includes("loop")&&e.isElement&&(g.loop&&!s.loop?j=!0:!g.loop&&s.loop?D=!0:k=!0),h.forEach(P=>{if(ra(g[P])&&ra(s[P]))Object.assign(g[P],s[P]),(P==="navigation"||P==="pagination"||P==="scrollbar")&&"enabled"in s[P]&&!s[P].enabled&&B(P);else{const z=s[P];(z===!0||z===!1)&&(P==="navigation"||P==="pagination"||P==="scrollbar")?z===!1&&B(P):g[P]=s[P]}}),h.includes("controller")&&!C&&e.controller&&e.controller.control&&g.controller&&g.controller.control&&(e.controller.control=g.controller.control),i.includes("children")&&t&&S&&g.virtual.enabled?(S.slides=t,S.update(!0)):i.includes("virtual")&&S&&g.virtual.enabled&&(t&&(S.slides=t),S.update(!0)),i.includes("children")&&t&&g.loop&&(k=!0),T&&_.init()&&_.update(!0),C&&(e.controller.control=g.controller.control),M&&(e.isElement&&(!d||typeof d=="string")&&(d=document.createElement("div"),d.classList.add("swiper-pagination"),d.part.add("pagination"),e.el.appendChild(d)),d&&(g.pagination.el=d),m.init(),m.render(),m.update()),O&&(e.isElement&&(!c||typeof c=="string")&&(c=document.createElement("div"),c.classList.add("swiper-scrollbar"),c.part.add("scrollbar"),e.el.appendChild(c)),c&&(g.scrollbar.el=c),b.init(),b.updateSize(),b.setTranslate()),L&&(e.isElement&&((!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-next"),U_(a,e.hostEl.constructor.nextButtonSvg),a.part.add("button-next"),e.el.appendChild(a)),(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-button-prev"),U_(l,e.hostEl.constructor.prevButtonSvg),l.part.add("button-prev"),e.el.appendChild(l))),a&&(g.navigation.nextEl=a),l&&(g.navigation.prevEl=l),y.init(),y.update()),i.includes("allowSlideNext")&&(e.allowSlideNext=s.allowSlideNext),i.includes("allowSlidePrev")&&(e.allowSlidePrev=s.allowSlidePrev),i.includes("direction")&&e.changeDirection(s.direction,!1),(j||k)&&e.loopDestroy(),(D||k)&&e.loopCreate(),e.update()}function VB(n,e){n===void 0&&(n={}),e===void 0&&(e=!0);const t={on:{}},s={},i={};_o(t,Xm),t._emitClasses=!0,t.init=!1;const a={},l=TE.map(d=>d.replace(/_/,"")),c=Object.assign({},n);return Object.keys(c).forEach(d=>{typeof n[d]>"u"||(l.indexOf(d)>=0?ra(n[d])?(t[d]={},i[d]={},_o(t[d],n[d]),_o(i[d],n[d])):(t[d]=n[d],i[d]=n[d]):d.search(/on[A-Z]/)===0&&typeof n[d]=="function"?e?s[`${d[2].toLowerCase()}${d.substr(3)}`]=n[d]:t.on[`${d[2].toLowerCase()}${d.substr(3)}`]=n[d]:a[d]=n[d])}),["navigation","pagination","scrollbar"].forEach(d=>{t[d]===!0&&(t[d]={}),t[d]===!1&&delete t[d]}),{params:t,passedParams:i,rest:a,events:s}}function HB(n,e){let{el:t,nextEl:s,prevEl:i,paginationEl:a,scrollbarEl:l,swiper:c}=n;EE(e)&&s&&i&&(c.params.navigation.nextEl=s,c.originalParams.navigation.nextEl=s,c.params.navigation.prevEl=i,c.originalParams.navigation.prevEl=i),jE(e)&&a&&(c.params.pagination.el=a,c.originalParams.pagination.el=a),kE(e)&&l&&(c.params.scrollbar.el=l,c.originalParams.scrollbar.el=l),c.init(t)}function GB(n,e,t,s,i){const a=[];if(!e)return a;const l=d=>{a.indexOf(d)<0&&a.push(d)};if(t&&s){const d=s.map(i),h=t.map(i);d.join("")!==h.join("")&&l("children"),s.length!==t.length&&l("children")}return TE.filter(d=>d[0]==="_").map(d=>d.replace(/_/,"")).forEach(d=>{if(d in n&&d in e)if(ra(n[d])&&ra(e[d])){const h=Object.keys(n[d]),g=Object.keys(e[d]);h.length!==g.length?l(d):(h.forEach(m=>{n[d][m]!==e[d][m]&&l(d)}),g.forEach(m=>{n[d][m]!==e[d][m]&&l(d)}))}else n[d]!==e[d]&&l(d)}),a}const $B=n=>{!n||n.destroyed||!n.params.virtual||n.params.virtual&&!n.params.virtual.enabled||(n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.emit("_virtualUpdated"),n.parallax&&n.params.parallax&&n.params.parallax.enabled&&n.parallax.setTranslate())};function jh(){return jh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},jh.apply(this,arguments)}function OE(n){return n.type&&n.type.displayName&&n.type.displayName.includes("SwiperSlide")}function LE(n){const e=[];return Zt.Children.toArray(n).forEach(t=>{OE(t)?e.push(t):t.props&&t.props.children&&LE(t.props.children).forEach(s=>e.push(s))}),e}function YB(n){const e=[],t={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Zt.Children.toArray(n).forEach(s=>{if(OE(s))e.push(s);else if(s.props&&s.props.slot&&t[s.props.slot])t[s.props.slot].push(s);else if(s.props&&s.props.children){const i=LE(s.props.children);i.length>0?i.forEach(a=>e.push(a)):t["container-end"].push(s)}else t["container-end"].push(s)}),{slides:e,slots:t}}function qB(n,e,t){if(!t)return null;const s=g=>{let m=g;return g<0?m=e.length+g:m>=e.length&&(m=m-e.length),m},i=n.isHorizontal()?{[n.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:a,to:l}=t,c=n.params.loop?-e.length:0,d=n.params.loop?e.length*2:e.length,h=[];for(let g=c;g<d;g+=1)g>=a&&g<=l&&h.push(e[s(g)]);return h.map((g,m)=>Zt.cloneElement(g,{swiper:n,style:i,key:g.props.virtualIndex||g.key||`slide-${m}`}))}function mc(n,e){return typeof window>"u"?x.useEffect(n,e):x.useLayoutEffect(n,e)}const H_=x.createContext(null),WB=x.createContext(null),AE=x.forwardRef(function(n,e){let{className:t,tag:s="div",wrapperTag:i="div",children:a,onSwiper:l,...c}=n===void 0?{}:n,d=!1;const[h,g]=x.useState("swiper"),[m,y]=x.useState(null),[b,S]=x.useState(!1),_=x.useRef(!1),T=x.useRef(null),C=x.useRef(null),M=x.useRef(null),O=x.useRef(null),L=x.useRef(null),j=x.useRef(null),D=x.useRef(null),k=x.useRef(null),{params:B,passedParams:P,rest:z,events:I}=VB(c),{slides:F,slots:ee}=YB(a),X=()=>{S(!b)};Object.assign(B.on,{_containerClasses(te,N){g(N)}});const ae=()=>{Object.assign(B.on,I),d=!0;const te={...B};if(delete te.wrapperClass,C.current=new u0(te),C.current.virtual&&C.current.params.virtual.enabled){C.current.virtual.slides=F;const N={cache:!1,slides:F,renderExternal:y,renderExternalUpdate:!1};_o(C.current.params.virtual,N),_o(C.current.originalParams.virtual,N)}};T.current||ae(),C.current&&C.current.on("_beforeBreakpoint",X);const R=()=>{d||!I||!C.current||Object.keys(I).forEach(te=>{C.current.on(te,I[te])})},V=()=>{!I||!C.current||Object.keys(I).forEach(te=>{C.current.off(te,I[te])})};x.useEffect(()=>()=>{C.current&&C.current.off("_beforeBreakpoint",X)}),x.useEffect(()=>{!_.current&&C.current&&(C.current.emitSlidesClasses(),_.current=!0)}),mc(()=>{if(e&&(e.current=T.current),!!T.current)return C.current.destroyed&&ae(),HB({el:T.current,nextEl:L.current,prevEl:j.current,paginationEl:D.current,scrollbarEl:k.current,swiper:C.current},B),l&&!C.current.destroyed&&l(C.current),()=>{C.current&&!C.current.destroyed&&C.current.destroy(!0,!1)}},[]),mc(()=>{R();const te=GB(P,M.current,F,O.current,N=>N.key);return M.current=P,O.current=F,te.length&&C.current&&!C.current.destroyed&&FB({swiper:C.current,slides:F,passedParams:P,changedParams:te,nextEl:L.current,prevEl:j.current,scrollbarEl:k.current,paginationEl:D.current}),()=>{V()}}),mc(()=>{$B(C.current)},[m]);function K(){return B.virtual?qB(C.current,F,m):F.map((te,N)=>Zt.cloneElement(te,{swiper:C.current,swiperSlideIndex:N}))}return Zt.createElement(s,jh({ref:T,className:ME(`${h}${t?` ${t}`:""}`)},z),Zt.createElement(WB.Provider,{value:C.current},ee["container-start"],Zt.createElement(i,{className:IB(B.wrapperClass)},ee["wrapper-start"],K(),ee["wrapper-end"]),EE(B)&&Zt.createElement(Zt.Fragment,null,Zt.createElement("div",{ref:j,className:"swiper-button-prev"}),Zt.createElement("div",{ref:L,className:"swiper-button-next"})),kE(B)&&Zt.createElement("div",{ref:k,className:"swiper-scrollbar"}),jE(B)&&Zt.createElement("div",{ref:D,className:"swiper-pagination"}),ee["container-end"]))});AE.displayName="Swiper";const DE=x.forwardRef(function(n,e){let{tag:t="div",children:s,className:i="",swiper:a,zoom:l,lazy:c,virtualIndex:d,swiperSlideIndex:h,...g}=n===void 0?{}:n;const m=x.useRef(null),[y,b]=x.useState("swiper-slide"),[S,_]=x.useState(!1);function T(L,j,D){j===m.current&&b(D)}mc(()=>{if(typeof h<"u"&&(m.current.swiperSlideIndex=h),e&&(e.current=m.current),!(!m.current||!a)){if(a.destroyed){y!=="swiper-slide"&&b("swiper-slide");return}return a.on("_slideClass",T),()=>{a&&a.off("_slideClass",T)}}}),mc(()=>{a&&m.current&&!a.destroyed&&b(a.getSlideClasses(m.current))},[a]);const C={isActive:y.indexOf("swiper-slide-active")>=0,isVisible:y.indexOf("swiper-slide-visible")>=0,isPrev:y.indexOf("swiper-slide-prev")>=0,isNext:y.indexOf("swiper-slide-next")>=0},M=()=>typeof s=="function"?s(C):s,O=()=>{_(!0)};return Zt.createElement(t,jh({ref:m,className:ME(`${y}${i?` ${i}`:""}`),"data-swiper-slide-index":d,onLoad:O},g),l&&Zt.createElement(H_.Provider,{value:C},Zt.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof l=="number"?l:void 0},M(),c&&!S&&Zt.createElement("div",{className:"swiper-lazy-preloader"}))),!l&&Zt.createElement(H_.Provider,{value:C},M(),c&&!S&&Zt.createElement("div",{className:"swiper-lazy-preloader"})))});DE.displayName="SwiperSlide";function XB(n,e,t,s){return n.params.createElements&&Object.keys(s).forEach(i=>{if(!t[i]&&t.auto===!0){let a=Vn(n.el,`.${s[i]}`)[0];a||(a=Eh("div",s[i]),a.className=s[i],n.el.append(a)),t[i]=a,e[i]=a}}),t}function KB(n){let{swiper:e,extendParams:t,on:s,emit:i}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function a(S){let _;return S&&typeof S=="string"&&e.isElement&&(_=e.el.querySelector(S)||e.hostEl.querySelector(S),_)?_:(S&&(typeof S=="string"&&(_=[...document.querySelectorAll(S)]),e.params.uniqueNavElements&&typeof S=="string"&&_&&_.length>1&&e.el.querySelectorAll(S).length===1?_=e.el.querySelector(S):_&&_.length===1&&(_=_[0])),S&&!_?S:_)}function l(S,_){const T=e.params.navigation;S=di(S),S.forEach(C=>{C&&(C.classList[_?"add":"remove"](...T.disabledClass.split(" ")),C.tagName==="BUTTON"&&(C.disabled=_),e.params.watchOverflow&&e.enabled&&C.classList[e.isLocked?"add":"remove"](T.lockClass))})}function c(){const{nextEl:S,prevEl:_}=e.navigation;if(e.params.loop){l(_,!1),l(S,!1);return}l(_,e.isBeginning&&!e.params.rewind),l(S,e.isEnd&&!e.params.rewind)}function d(S){S.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),i("navigationPrev"))}function h(S){S.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),i("navigationNext"))}function g(){const S=e.params.navigation;if(e.params.navigation=XB(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(S.nextEl||S.prevEl))return;let _=a(S.nextEl),T=a(S.prevEl);Object.assign(e.navigation,{nextEl:_,prevEl:T}),_=di(_),T=di(T);const C=(M,O)=>{M&&M.addEventListener("click",O==="next"?h:d),!e.enabled&&M&&M.classList.add(...S.lockClass.split(" "))};_.forEach(M=>C(M,"next")),T.forEach(M=>C(M,"prev"))}function m(){let{nextEl:S,prevEl:_}=e.navigation;S=di(S),_=di(_);const T=(C,M)=>{C.removeEventListener("click",M==="next"?h:d),C.classList.remove(...e.params.navigation.disabledClass.split(" "))};S.forEach(C=>T(C,"next")),_.forEach(C=>T(C,"prev"))}s("init",()=>{e.params.navigation.enabled===!1?b():(g(),c())}),s("toEdge fromEdge lock unlock",()=>{c()}),s("destroy",()=>{m()}),s("enable disable",()=>{let{nextEl:S,prevEl:_}=e.navigation;if(S=di(S),_=di(_),e.enabled){c();return}[...S,..._].filter(T=>!!T).forEach(T=>T.classList.add(e.params.navigation.lockClass))}),s("click",(S,_)=>{let{nextEl:T,prevEl:C}=e.navigation;T=di(T),C=di(C);const M=_.target;let O=C.includes(M)||T.includes(M);if(e.isElement&&!O){const L=_.path||_.composedPath&&_.composedPath();L&&(O=L.find(j=>T.includes(j)||C.includes(j)))}if(e.params.navigation.hideOnClick&&!O){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===M||e.pagination.el.contains(M)))return;let L;T.length?L=T[0].classList.contains(e.params.navigation.hiddenClass):C.length&&(L=C[0].classList.contains(e.params.navigation.hiddenClass)),i(L===!0?"navigationShow":"navigationHide"),[...T,...C].filter(j=>!!j).forEach(j=>j.classList.toggle(e.params.navigation.hiddenClass))}});const y=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),g(),c()},b=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),m()};Object.assign(e.navigation,{enable:y,disable:b,update:c,init:g,destroy:m})}function ZB(n,e){const t=[];for(let s=0;s<n.length;s+=e)t.push(n.slice(s,s+e));return t}const QB=()=>{const[n,e]=x.useState(""),[t,s]=x.useState(""),[i,a]=x.useState(""),[l,c]=x.useState(""),[d,h]=x.useState(!1),[g,m]=x.useState(l),{session:y,signOut:b}=la(),[S,_]=x.useState(null),[T,C]=x.useState(!0),[M,O]=x.useState([]),[L,j]=x.useState(!1),D=vr(),k=15551234567,B=()=>!l||l===k?k:l,P=()=>!l||l===k,z=async()=>{try{await b(),D("/login"),setTimeout(()=>window.scrollTo(0,0),100)}catch(te){console.error("Error signing out:",te)}};x.useEffect(()=>{(async()=>{try{if(!y||!y.user){console.log("No session or user found.");return}const{data:N,error:q}=await Ce.from("CUSTOMER").select("*").eq("auth_user_id",y.user.id).single();q||!N?console.log("No profile data found for this user."):(e(N.cus_username||""),s(N.cus_fname||""),a(N.cus_lname||""),c(N.cus_celno||""),_(N))}catch(N){console.error("Error fetching profile:",N.message)}finally{C(!1)}})()},[y]),x.useEffect(()=>{S&&(async()=>{try{if(!S?.cus_id)return;const{data:N,error:q}=await Ce.from("CUSTOM-CAKE").select("*").eq("cus_id",S.cus_id);if(q)throw q;O(N)}catch(N){console.error("Error fetching custom cakes:",N.message)}})()},[S]);const I=ZB(M,4),F=()=>{const te=P()?"":l;m(te),h(!0)},ee=te=>{const N=te.target.value;(/^[\d]*$/.test(N)||N==="")&&m(N)},X=()=>{if(g&&!/^[\d]+$/.test(g)){_e.error("Phone number can only contain numbers",{duration:3e3,position:"top-center"});return}if(g&&(g.length<7||g.length>15)){_e.error("Phone number must be between 7 and 15 digits",{duration:3e3,position:"top-center"});return}c(g||""),h(!1)},ae=()=>{m(l),h(!1)},R=te=>{te.key==="Enter"?X():te.key==="Escape"&&ae()},V=()=>{setTimeout(()=>{h(!1)},100)},K=async()=>{if(!L){j(!0);try{if(!n.trim()){_e.error("Username is required",{duration:3e3,position:"top-center"});return}if(!t.trim()){_e.error("First name is required",{duration:3e3,position:"top-center"});return}if(!i.trim()){_e.error("Last name is required",{duration:3e3,position:"top-center"});return}const te=S?.cus_celno,N=g&&g.trim()!==""?g:k,q={cus_username:n.trim(),cus_fname:t.trim(),cus_lname:i.trim(),cus_celno:N},{error:de}=await Ce.from("CUSTOMER").update(q).eq("auth_user_id",y.user.id);de?(console.error("Error updating profile:",de.message),_e.error(`Failed to update profile: ${de.message}`,{duration:4e3,position:"top-center"})):(console.log("Profile updated successfully."),_(ne=>({...ne,...q})),c(N||""),h(!1),_e.success("Profile updated successfully!",{duration:3e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}))}catch(te){console.error("Unexpected error:",te),_e.error("An unexpected error occurred. Please try again.",{duration:4e3,position:"top-center"})}finally{j(!1)}}};return T?p.jsx(ua,{message:"Loading profile..."}):p.jsxs("section",{className:"bg-gradient-to-t from-[#424220] to-[#F8E6B4] min-h-screen flex flex-col items-center justify-center py-20 px-10",children:[p.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] w-full p-10 rounded-2xl shadow-2xl",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h1",{className:"text-3xl font-bold text-black",children:"My Profile"}),p.jsx("button",{onClick:z,className:"bg-red-500 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded",children:"Sign Out"})]}),p.jsx("div",{className:"flex justify-end mb-4"}),p.jsx("p",{className:"text-lg text-gray-500",children:"Manage and protect your account"}),p.jsx("hr",{className:"my-6 border-gray-400"}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-gray-500 font-semibold mb-2",children:"Username"}),p.jsx("input",{type:"text",value:n,onChange:te=>e(te.target.value),className:"bg-white border border-gray-300 px-4 py-2 rounded w-full"})]}),p.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-6",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-gray-500 font-semibold mb-2",children:"First Name"}),p.jsx("input",{type:"text",value:t,onChange:te=>s(te.target.value),className:"bg-white border border-gray-300 px-4 py-2 rounded w-full"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-gray-500 font-semibold mb-2",children:"Last Name"}),p.jsx("input",{type:"text",value:i,onChange:te=>a(te.target.value),className:"bg-white border border-gray-300 px-4 py-2 rounded w-full"})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-gray-500 font-semibold mb-1",children:"Email"}),p.jsx("p",{className:"text-black text-lg font-medium",children:S?.email||""})]}),p.jsxs("div",{className:"mb-10 gap-3",children:[p.jsx("label",{className:"block text-gray-500 font-semibold mb-1",children:"Phone Number"}),p.jsx("div",{className:"flex items-center gap-5",children:d?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"text",value:g||"",onChange:ee,onKeyPress:R,onBlur:V,className:"text-black text-lg font-medium border border-black rounded p-2",placeholder:"Enter your phone number",autoFocus:!0}),p.jsx("button",{onClick:X,className:"text-green-600 hover:text-green-800 cursor-pointer px-2 py-1 rounded",title:"Save",children:"✓"}),p.jsx("button",{onClick:ae,className:"text-red-600 hover:text-red-800 cursor-pointer px-2 py-1 rounded",title:"Cancel",children:"✕"})]}):p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("p",{className:`text-lg font-medium ${P()?"text-gray-500 italic":"text-black"}`,children:B()}),P()&&p.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full border border-yellow-300",children:"Default Number"}),p.jsx("button",{className:"text-blue-600 hover:text-blue-800 cursor-pointer",onClick:F,children:p.jsx("img",{className:"w-7 h-7 hover:color-red-500 ",src:"/edit.svg",alt:"Edit Icon"})})]})})]}),p.jsx("div",{className:"text-center",children:p.jsx("button",{className:`font-semibold py-2 px-10 rounded-lg text-lg cursor-pointer transition-colors ${L?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"}`,onClick:K,disabled:L,children:L?"Saving...":"Save"})})]}),p.jsxs("div",{className:"bg-gradient-to-t from-[#613C2A] to-[#EAD0C4] w-full p-10 rounded-2xl shadow-2xl mt-10",children:[p.jsx("div",{className:"bg-[#F2EFE8] p-2 rounded-full",children:p.jsx("p",{className:"text-2xl font-bold cursor-default",children:"Saved Custom Cakes:"})}),p.jsx("div",{className:"relative w-full min-h-[40vh] mt-10 bg-[#F3F0EA] rounded-r-3xl rounded-l-3xl py-6 px-4",children:M.length>0?p.jsxs(AE,{modules:[KB],navigation:{nextEl:".custom-next",prevEl:".custom-prev"},spaceBetween:20,slidesPerView:1,loop:!1,className:"w-full h-full",children:[I.map((te,N)=>p.jsx(DE,{children:p.jsx("div",{className:"flex justify-center gap-4",children:te.map((q,de)=>p.jsxs("div",{className:"bg-white rounded-3xl shadow-lg overflow-hidden w-56 text-center",children:[p.jsx("img",{src:q.preview_url||"/placeholder.jpg",alt:`Custom Cake ${q.cc_id}`,className:"rounded-t-3xl object-cover h-40 w-full"}),p.jsxs("div",{className:"bg-[#3B3B3B] text-white py-2 px-2 rounded-b-3xl",children:[p.jsxs("h3",{className:"font-bold text-lg",children:["Custom Cake #",q.cc_id]}),p.jsxs("p",{className:"text-sm italic",children:["Order #",q.order_id]}),p.jsx("p",{className:"text-xs text-blue-200 underline",children:"click to size"})]})]},de))})},N)),p.jsx("div",{className:"custom-prev absolute top-1/2 left-0 -translate-y-1/2 bg-gray-500 rounded-r-lg px-3 py-4 cursor-pointer z-10 text-white text-2xl",children:"<"}),p.jsx("div",{className:"custom-next absolute top-1/2 right-0 -translate-y-1/2 bg-gray-500 rounded-l-lg px-3 py-4 cursor-pointer z-10 text-white text-2xl",children:">"})]}):p.jsx("div",{className:"flex flex-col items-center justify-center h-full py-12",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"mb-4",children:p.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),p.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No Custom Cakes Yet"}),p.jsx("p",{className:"text-gray-500 mb-4",children:"You haven't created any custom cakes yet."}),p.jsx("p",{className:"text-sm text-gray-400",children:"Your custom cake designs will appear here once you create them."})]})})})]})]})},JB=n=>n?n.startsWith("http://")||n.startsWith("https://")?n:Ce.storage.from("cake").getPublicUrl(n).data.publicUrl:null,eU=()=>{const[n,e]=x.useState([]),[t,s]=x.useState(16e3),[i,a]=x.useState(!1),[l,c]=x.useState("default"),[d,h]=x.useState("all"),[g,m]=x.useState([]),[y,b]=x.useState(null),[S,_]=x.useState(!1),[T,C]=x.useState(1),[M,O]=x.useState(!0),L=21,[j,D]=x.useState(""),[k,B]=x.useState(""),[P,z]=x.useState("Pickup"),[I,F]=x.useState(""),[ee,X]=x.useState(1),[ae,R]=x.useState(!1),[V,K]=x.useState(1),[te,N]=x.useState(!1),[q,de]=x.useState(""),[ne,ve]=x.useState(!1);x.useEffect(()=>{(async()=>{try{O(!0);const{data:Fe,error:Ye}=await Ce.from("CAKE").select("*");if(Ye){console.error("Error fetching cakes:",Ye.message),_e.error("Failed to load cakes. Please try again.");return}const nt=Fe.map(it=>{const De=JB(it.cake_img);return console.log(`Cake: ${it.name}, cake_img: ${it.cake_img}, publicUrl: ${De}`),{...it,publicUrl:De}});e(nt)}catch(Fe){console.error("Error fetching cakes:",Fe),_e.error("Failed to load cakes. Please try again.")}finally{O(!1)}})()},[]),x.useEffect(()=>{const ye=()=>{const Fe=window.scrollY,Ye=window.innerHeight,nt=document.documentElement.scrollHeight,it=Fe+Ye>=nt-200;Fe>100&&!it?a(!0):a(!1)};return window.addEventListener("scroll",ye),()=>window.removeEventListener("scroll",ye)},[]);const Q=ye=>{b(ye),_(!0)},Se=()=>{_(!1),b(null)},Oe=()=>{if(!y)return;const ye=new Date;ye.setDate(ye.getDate()+1),D(ye.toISOString().split("T")[0]),B("14:00"),X(1),K(1),R(!0)},Te=async()=>{if(!ne){if(console.log("handlePlaceOrder called"),console.log("selectedCake:",y),console.log("orderDate:",j),console.log("orderTime:",k),console.log("orderType:",P),console.log("deliveryAddress:",I),!y||!j||!k||P==="Delivery"&&!I){console.log("Validation failed - missing required fields"),_e.error("Please fill in all required fields");return}ve(!0);try{console.log("Starting order placement...");const{data:{session:ye}}=await Ce.auth.getSession();if(!ye){console.log("No user session found"),_e.error("Please log in to place an order");return}const{data:Fe,error:Ye}=await Ce.from("CUSTOMER").select("cus_id").eq("auth_user_id",ye.user.id).single();if(Ye||!Fe){_e.error("Customer information not found. Please try again.");return}const nt=y.price*ee,it=new Date(`${j}T${k}`),De={order_date:new Date().toISOString().split("T")[0],delivery_method:P,order_schedule:it.toISOString().split("T")[0],delivery_address:P==="Delivery"?I:null,cus_id:Fe.cus_id,order_status:"Pending"};console.log("Attempting to create order with data:",De);const{data:Ze,error:St}=await Ce.from("ORDER").insert([De]).select().single();if(St){console.error("Error creating order:",St),console.error("Order error details:",{message:St.message,details:St.details,hint:St.hint,code:St.code}),_e.error("Failed to create order. Please try again.");return}console.log("Order created successfully:",Ze),console.log("Order ID from database:",Ze.order_id),console.log("Selected cake ID:",y.cake_id),console.log("Cake quantity:",ee);const le={quantity:ee,order_id:Ze.order_id,cake_id:y.cake_id};console.log("Attempting to create cake order with data:",le),console.log("Attempting to insert into CAKE-ORDERS table...");const{data:Le,error:we}=await Ce.from("CAKE-ORDERS").insert([le]).select();if(we){console.error("Error creating cake order:",we),console.error("Full error object:",JSON.stringify(we,null,2)),console.error("Error details:",{message:we.message,details:we.details,hint:we.hint,code:we.code}),_e.error("Failed to create cake order. Please try again.");return}console.log("Cake order created successfully:",Le);const{error:be}=await Ce.from("PAYMENT").insert([{payment_method:"Cash",amount_paid:nt,payment_date:new Date().toISOString().split("T")[0],payment_status:"Unpaid",receipt:null,order_id:Ze.order_id}]);if(be){console.error("Error creating payment:",be),_e.error("Failed to create payment record. Please try again.");return}const ge=`ORD-${Ze.order_id}`;de(ge),_e.success(`Order successfully placed for ${y.name}!`,{duration:4e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}),console.log("Advancing to step 3..."),K(3)}catch(ye){console.error("Error placing order:",ye),_e.error("Failed to place order. Please try again.",{duration:4e3,position:"top-center"})}finally{ve(!1)}}},Ie=()=>{R(!1),D(""),B(""),z("Pickup"),F(""),X(1),K(1),N(!1),de(""),ve(!1)},oe=()=>{console.log("nextStep called, current step:",V),V<3&&(console.log("Advancing to step:",V+1),K(V+1))},xe=()=>{V>1&&K(V-1)},Ee=n.filter(ye=>ye.price<=t).filter(ye=>d==="all"||ye.tier===parseInt(d)).filter(ye=>g.length===0||g.includes(ye.theme)).sort((ye,Fe)=>{switch(l){case"priceLowToHigh":return ye.price-Fe.price;case"priceHighToLow":return Fe.price-ye.price;case"alphabeticalAsc":return ye.name.localeCompare(Fe.name);case"alphabeticalDesc":return Fe.name.localeCompare(ye.name);default:return 0}}),$=Math.ceil(Ee.length/L),ce=T*L,he=ce-L,Me=Ee.slice(he,ce);return x.useEffect(()=>{C(1)},[t,d,g,l]),M?p.jsx(ua,{message:"Loading cake catalog..."}):p.jsxs("section",{className:"flex min-h-[120vh] bg-gradient-to-b from-[#f7f0e7] to-[#e5d6c4]",children:[p.jsx("div",{className:"w-1/3 flex items-center justify-start",children:p.jsxs("aside",{className:`${i?"fixed top-1/2 left-0 -translate-y-1/2 w-[20%]":"relative w-[80%]"} bg-white rounded-br-2xl rounded-tr-2xl shadow-lg p-4 text-[#381914]`,children:[p.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Filters"}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block mb-1 font-semibold",htmlFor:"sortBy",children:"Sort by"}),p.jsxs("select",{id:"sortBy",className:"w-full text-sm text-[#381914] border border-[#381914] rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#381914] cursor-pointer",value:l,onChange:ye=>c(ye.target.value),children:[p.jsx("option",{value:"default",children:"Default"}),p.jsx("option",{value:"priceLowToHigh",children:"Price: Low to High"}),p.jsx("option",{value:"priceHighToLow",children:"Price: High to Low"}),p.jsx("option",{value:"alphabeticalAsc",children:"Alphabetical: A → Z"}),p.jsx("option",{value:"alphabeticalDesc",children:"Alphabetical: Z → A"})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"Price"}),p.jsx("input",{type:"range",min:"0",max:"16000",value:t,onChange:ye=>s(ye.target.value),className:"w-full cursor-pointer slider-design appearance-none bg-[#6a2e2e] rounded-lg h-2"}),p.jsxs("p",{className:"text-sm mt-1",children:["₱0 - ₱",t]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"Theme"}),["Plain","Birthday","Wedding","Christmas","Graduation","Anniversary","New Years"].map(ye=>p.jsxs("label",{className:"block text-sm flex items-center",children:[p.jsx("input",{type:"checkbox",className:"mr-2 appearance-none w-4 h-4 border-2 border-[#381914] checked:bg-[#381914] checked:border-transparent focus:outline-none cursor-pointer",checked:g.includes(ye),onChange:Fe=>{Fe.target.checked?m([...g,ye]):m(g.filter(Ye=>Ye!==ye))}}),ye]},ye))]}),p.jsxs("div",{children:[p.jsx("label",{className:"block mb-1 font-semibold",htmlFor:"tier",children:"Tiers"}),p.jsxs("select",{id:"tier",className:"w-full text-sm text-[#381914] border border-[#381914] rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#381914]",value:d,onChange:ye=>h(ye.target.value),children:[p.jsx("option",{value:"all",children:"All Tiers"}),[1,2,3,4,5].map(ye=>p.jsxs("option",{value:ye,children:[ye," Tier"]},ye))]})]})]})}),p.jsxs("main",{className:`p-8 w-full ${i?"ml-1/5":""}`,children:[p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:Me.map(ye=>p.jsxs("div",{className:"bg-[#FAF6F1] rounded shadow-sm p-4 text-center cursor-pointer hover:shadow-lg transition-shadow duration-200 hover:scale-105 transform transition-transform",onClick:()=>Q(ye),children:[p.jsx("img",{src:ye.publicUrl||"/saved-cake.png",alt:ye.name,className:"w-full h-48 object-contain mb-4",onError:Fe=>{console.error(`Failed to load image for cake: ${ye.name}, URL: ${ye.publicUrl}`),Fe.target.src="/saved-cake.png"}}),p.jsx("h3",{className:"text-md font-semibold",children:ye.name}),p.jsxs("p",{className:"text-sm",children:["₱",ye.price]})]},ye.cake_id))}),$>1&&p.jsxs("div",{className:"flex justify-center items-center mt-8 space-x-2",children:[p.jsx("button",{onClick:()=>C(ye=>Math.max(ye-1,1)),disabled:T===1,className:"px-4 py-2 bg-[#AF524D] text-white rounded-lg hover:bg-[#8B3D3A] disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Previous"}),p.jsx("div",{className:"flex space-x-1",children:Array.from({length:$},(ye,Fe)=>Fe+1).map(ye=>p.jsx("button",{onClick:()=>C(ye),className:`px-3 py-2 rounded-lg transition-colors ${T===ye?"bg-[#AF524D] text-white":"bg-white text-[#381914] hover:bg-[#f0f0f0] border border-[#381914]"}`,children:ye},ye))}),p.jsx("button",{onClick:()=>C(ye=>Math.min(ye+1,$)),disabled:T===$,className:"px-4 py-2 bg-[#AF524D] text-white rounded-lg hover:bg-[#8B3D3A] disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Next"})]}),p.jsxs("div",{className:"text-center mt-4 text-sm text-[#381914]",children:["Showing ",he+1," to ",Math.min(ce,Ee.length)," of ",Ee.length," cakes"]})]}),S&&y&&p.jsx("div",{className:"fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[p.jsx("h2",{className:"text-2xl font-bold text-[#381914]",children:y.name}),p.jsx("button",{onClick:Se,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold cursor-pointer",children:"×"})]}),p.jsxs("div",{className:"p-6",children:[p.jsx("div",{className:"mb-6",children:p.jsx("img",{src:y.publicUrl||"/saved-cake.png",alt:y.name,className:"w-full h-64 object-contain rounded-lg",onError:ye=>{ye.target.src="/saved-cake.png"}})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-[#381914] mb-4",children:"Cake Details"}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{children:[p.jsx("span",{className:"font-medium text-gray-600",children:"Theme:"}),p.jsx("span",{className:"ml-2 text-[#381914]",children:y.theme})]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-medium text-gray-600",children:"Tiers:"}),p.jsx("span",{className:"ml-2 text-[#381914]",children:y.tier})]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-medium text-gray-600",children:"Price:"}),p.jsxs("span",{className:"ml-2 text-[#381914] font-bold",children:["₱",y.price]})]})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-[#381914] mb-4",children:"Description"}),p.jsx("p",{className:"text-gray-700 leading-relaxed",children:y.description||"No description available for this cake."})]})]}),p.jsx("div",{className:"mt-8 flex justify-center",children:p.jsx("button",{onClick:Oe,className:"px-6 py-2 bg-[#AF524D] text-white rounded-full hover:bg-[#8B3D3A] transition-colors",children:"Order This Cake"})})]})]})}),ae&&y&&p.jsx("div",{className:"fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[p.jsx("h2",{className:"text-2xl font-bold text-[#381914]",children:"Complete Your Order"}),p.jsx("button",{onClick:Ie,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold cursor-pointer",children:"×"})]}),p.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:p.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[p.jsxs("div",{className:`flex items-center ${V>=1?"text-[#AF524D]":"text-gray-400"}`,children:[p.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${V>=1?"bg-[#AF524D] text-white":"bg-gray-200 text-gray-500"}`,children:"1"}),p.jsx("span",{className:"ml-2 text-sm font-medium",children:"Order Details"})]}),p.jsx("div",{className:`w-8 h-1 ${V>=2?"bg-[#AF524D]":"bg-gray-200"}`}),p.jsxs("div",{className:`flex items-center ${V>=2?"text-[#AF524D]":"text-gray-400"}`,children:[p.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${V>=2?"bg-[#AF524D] text-white":"bg-gray-200 text-gray-500"}`,children:"2"}),p.jsx("span",{className:"ml-2 text-sm font-medium",children:"Review"})]}),p.jsx("div",{className:`w-8 h-1 ${V>=3?"bg-[#AF524D]":"bg-gray-200"}`}),p.jsxs("div",{className:`flex items-center ${V>=3?"text-[#AF524D]":"text-gray-400"}`,children:[p.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${V>=3?"bg-[#AF524D] text-white":"bg-gray-200 text-gray-500"}`,children:"3"}),p.jsx("span",{className:"ml-2 text-sm font-medium",children:"Success"})]})]})}),p.jsxs("div",{className:"p-6",children:[p.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("img",{src:y.publicUrl||"/saved-cake.png",alt:y.name,className:"w-16 h-16 object-contain rounded-lg",onError:ye=>{ye.target.src="/saved-cake.png"}}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-[#381914]",children:y.name}),p.jsxs("p",{className:"text-sm text-gray-600",children:["₱",y.price]})]})]})}),V===1&&p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Quantity *"}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("button",{type:"button",onClick:()=>X(Math.max(1,ee-1)),className:"w-10 h-10 rounded-full border-2 border-[#AF524D] text-[#AF524D] hover:bg-[#AF524D] hover:text-white transition-colors flex items-center justify-center font-bold text-lg",children:"-"}),p.jsx("span",{className:"w-16 text-center font-semibold text-[#381914] text-lg",children:ee}),p.jsx("button",{type:"button",onClick:()=>X(ee+1),className:"w-10 h-10 rounded-full border-2 border-[#AF524D] text-[#AF524D] hover:bg-[#AF524D] hover:text-white transition-colors flex items-center justify-center font-bold text-lg",children:"+"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Pickup/Delivery Date *"}),p.jsxs("div",{className:"relative",children:[p.jsxs("div",{className:"flex items-center gap-3 p-3 border-2 border-[#AF524D] rounded-lg bg-white",children:[p.jsx("div",{className:"flex-shrink-0",children:p.jsx("svg",{className:"w-6 h-6 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),p.jsx("div",{className:"flex-1",children:p.jsx("input",{type:"date",value:j,onChange:ye=>D(ye.target.value),min:new Date().toISOString().split("T")[0],className:"w-full bg-transparent border-none outline-none text-[#381914] font-medium cursor-pointer",required:!0})})]}),j&&p.jsx("div",{className:"mt-2 p-2 bg-[#AF524D] bg-opacity-10 rounded-lg border border-[#AF524D] border-opacity-30",children:p.jsxs("p",{className:"text-sm text-[#381914] font-medium",children:["Selected: ",new Date(j).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Pickup/Delivery Time *"}),p.jsxs("div",{className:"relative",children:[p.jsxs("div",{className:"flex items-center gap-3 p-3 border-2 border-[#AF524D] rounded-lg bg-white",children:[p.jsx("div",{className:"flex-shrink-0",children:p.jsx("svg",{className:"w-6 h-6 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),p.jsx("div",{className:"flex-1",children:p.jsx("input",{type:"time",value:k,onChange:ye=>B(ye.target.value),className:"w-full bg-transparent border-none outline-none text-[#381914] font-medium cursor-pointer",required:!0})})]}),k&&p.jsx("div",{className:"mt-2 p-2 bg-[#AF524D] bg-opacity-10 rounded-lg border border-[#AF524D] border-opacity-30",children:p.jsxs("p",{className:"text-sm text-[#381914] font-medium",children:["Selected: ",new Date(`2000-01-01T${k}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]})})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Order Type"}),p.jsxs("div",{className:"relative",children:[p.jsxs("div",{className:"flex items-center gap-3 p-3 border-2 border-[#AF524D] rounded-lg bg-white cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>N(!te),children:[p.jsx("div",{className:"flex-shrink-0",children:p.jsx("svg",{className:"w-6 h-6 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),p.jsx("div",{className:"flex-1",children:p.jsx("span",{className:"text-[#381914] font-medium",children:P})}),p.jsx("div",{className:"flex-shrink-0",children:p.jsx("svg",{className:`w-5 h-5 text-[#AF524D] transition-transform ${te?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),te&&p.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border-2 border-[#AF524D] rounded-lg shadow-lg z-10",children:[p.jsx("div",{className:"p-3 hover:bg-[#AF524D] hover:text-white cursor-pointer transition-colors border-b border-gray-100",onClick:()=>{z("Pickup"),N(!1)},children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),p.jsx("span",{className:"font-medium",children:"Pickup"})]})}),p.jsx("div",{className:"p-3 hover:bg-[#AF524D] hover:text-white cursor-pointer transition-colors",onClick:()=>{z("Delivery"),N(!1)},children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),p.jsx("span",{className:"font-medium",children:"Delivery"})]})})]}),P&&p.jsx("div",{className:"mt-2 p-2 bg-[#AF524D] bg-opacity-10 rounded-lg border border-[#AF524D] border-opacity-30",children:p.jsxs("p",{className:"text-sm text-[#381914] font-medium",children:["Selected: ",P]})})]})]}),P==="Delivery"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Delivery Address"}),p.jsx("textarea",{value:I,onChange:ye=>F(ye.target.value),placeholder:"Enter your complete delivery address...",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent resize-none"})]}),p.jsxs("div",{className:"flex gap-4 justify-end",children:[p.jsx("button",{onClick:Ie,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-full hover:bg-gray-400 transition-colors",children:"Cancel"}),p.jsx("button",{onClick:oe,disabled:!j||!k||P==="Delivery"&&!I,className:`px-6 py-2 rounded-full transition-colors ${!j||!k||P==="Delivery"&&!I?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-[#AF524D] text-white hover:bg-[#8B3D3A]"}`,children:"Next"})]})]}),V===2&&p.jsxs("div",{className:"space-y-6",children:[p.jsx("h3",{className:"text-lg font-semibold text-[#381914] mb-4",children:"Review Your Order"}),p.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[p.jsx("h4",{className:"font-semibold text-[#381914] mb-4",children:"Order Summary"}),p.jsxs("div",{className:"space-y-3 text-sm",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"font-medium",children:"Cake:"}),p.jsx("span",{children:y.name})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"font-medium",children:"Quantity:"}),p.jsx("span",{children:ee})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"font-medium",children:"Price per cake:"}),p.jsxs("span",{children:["₱",y.price]})]}),p.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-2",children:[p.jsx("span",{className:"font-semibold",children:"Total Price:"}),p.jsxs("span",{className:"font-semibold",children:["₱",y.price*ee]})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"font-medium",children:"Date:"}),p.jsx("span",{children:j?new Date(j).toLocaleDateString():"Not selected"})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"font-medium",children:"Time:"}),p.jsx("span",{children:k?new Date(`2000-01-01T${k}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"Not selected"})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"font-medium",children:"Type:"}),p.jsx("span",{children:P})]}),P==="Delivery"&&I&&p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"font-medium",children:"Address:"}),p.jsx("span",{className:"text-right max-w-xs truncate",children:I})]})]})]}),p.jsxs("div",{className:"flex gap-4 justify-between items-center pt-4 border-t border-gray-200",children:[p.jsx("button",{onClick:xe,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-full hover:bg-gray-400 transition-colors",children:"Back"}),p.jsx("button",{onClick:Te,disabled:ne,className:`px-6 py-2 rounded-full transition-colors ${ne?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-[#AF524D] text-white hover:bg-[#8B3D3A]"}`,children:ne?"Placing Order...":"Place Order"})]})]}),V===3&&p.jsxs("div",{className:"space-y-6",children:[p.jsx("h3",{className:"text-lg font-semibold text-[#381914] mb-4",children:"Order Successfully Placed!"}),p.jsxs("div",{className:"p-6 bg-green-50 border border-green-200 rounded-lg text-center",children:[p.jsx("div",{className:"flex items-center justify-center gap-3 mb-4",children:p.jsx("svg",{className:"w-12 h-12 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),p.jsx("h4",{className:"font-semibold text-green-800 text-xl mb-2",children:"Thank you for your order!"}),p.jsx("p",{className:"text-green-700 text-sm mb-4",children:"Your order has been successfully placed."})]}),p.jsx("div",{className:"flex gap-4 justify-center",children:p.jsx("button",{onClick:()=>{Ie(),Se()},className:"px-6 py-2 bg-[#AF524D] text-white rounded-full hover:bg-[#8B3D3A] transition-colors",children:"Done"})})]})]})]})})]})};function tU(){const{session:n,loading:e}=la(),t=vr();return x.useEffect(()=>{if(e){console.log("Still loading session... waiting.");return}(async()=>{if(console.log("Checking user role..."),!n?.user){console.log("No user found. Redirecting to login."),t("/login");return}const i=n.user.id;console.log("User ID:",i),console.log("User email:",n.user.email);const{data:a,error:l}=await Ce.from("CUSTOMER").select("cus_id, cus_fname, cus_lname, cus_username, email").eq("auth_user_id",i).single();if(a){console.log("Customer found:",a),t("/"),setTimeout(()=>window.scrollTo(0,0),100);return}const{data:c}=await Ce.from("ADMIN").select("admin_id, admin_uid").eq("admin_uid",i).single();if(c){console.log("Admin found:",c),t("/adminpage"),setTimeout(()=>window.scrollTo(0,0),100);return}console.log("No existing profile, creating customer...");const d=n.user.user_metadata?.full_name||n.user.user_metadata?.name||"Unknown User",h=d.split(" ")[0]||"Unknown",g=d.split(" ").slice(1).join(" ")||"User",m=n.user.user_metadata?.preferred_username||n.user.email.split("@")[0]||`user_${Date.now()}`,{data:y,error:b}=await Ce.from("CUSTOMER").insert([{cus_fname:h,cus_lname:g,cus_username:m,email:n.user.email,cus_celno:0,auth_user_id:i}]).select().single();b?console.error("Error creating customer profile:",b):console.log("New customer created:",y),t("/"),setTimeout(()=>window.scrollTo(0,0),100)})()},[n,e,t]),null}const sU=()=>{const{session:n}=la(),[e,t]=x.useState("toPay"),[s,i]=x.useState([]),[a,l]=x.useState(!0),[c,d]=x.useState(!1),[h,g]=x.useState(!1),[m,y]=x.useState(null),[b,S]=x.useState(null),[_,T]=x.useState(!1),C=k=>k?Ce.storage.from("cake").getPublicUrl(k).data.publicUrl:null,M=async()=>{if(n?.user)try{l(!0);const{data:k,error:B}=await Ce.from("CUSTOMER").select("cus_id").eq("auth_user_id",n.user.id).single();if(B){console.error("Error fetching customer:",B),Re.error("Failed to load customer information");return}const{data:P,error:z}=await Ce.from("ORDER").select(`
                     *,
                     CAKE-ORDERS (
                         co_id,
                         quantity,
                         cake_id,
                         CAKE (
                             cake_id,
                             name,
                             price,
                             cake_img
                         )
                     ),
                     PAYMENT (
                         payment_id,
                         payment_method,
                         amount_paid,
                         payment_status,
                         payment_date
                     )
                 `).eq("cus_id",k.cus_id).order("order_id",{ascending:!1});if(z){console.error("Error fetching orders:",z),Re.error("Failed to load orders");return}const I=[];P.forEach(F=>{F["CAKE-ORDERS"]&&F["CAKE-ORDERS"].length>0&&F["CAKE-ORDERS"].forEach(ee=>{I.push({order_id:F.order_id,order_date:F.order_date,delivery_method:F.delivery_method,order_schedule:F.order_schedule,delivery_address:F.delivery_address,order_status:F.order_status||"Pending",quantity:ee.quantity,cake_id:ee.cake_id,CAKE:ee.CAKE?{...ee.CAKE,publicUrl:C(ee.CAKE.cake_img)}:null,payment:F.PAYMENT?.[0]||null,total_price:ee.CAKE?ee.CAKE.price*ee.quantity:0})})}),i(I)}catch(k){console.error("Error fetching orders:",k),Re.error("Failed to load orders")}finally{l(!1)}},O=k=>{y(k),g(!0),S(null)},L=k=>{const B=k.target.files[0];if(B){if(!B.type.startsWith("image/")){Re.error("Please select an image file");return}if(B.size>5*1024*1024){Re.error("File size must be less than 5MB");return}S(B)}},j=async()=>{if(!b){Re.error("Please select a receipt image");return}if(!m){Re.error("No order selected");return}T(!0);try{const k=`receipts/${m.order_id}_${Date.now()}.${b.name.split(".").pop()}`,{data:B,error:P}=await Ce.storage.from("receipts").upload(k,b);if(P){console.error("Error uploading file:",P),Re.error("Failed to upload receipt");return}const{data:z}=Ce.storage.from("receipts").getPublicUrl(k),{error:I}=await Ce.from("PAYMENT").update({receipt:z.publicUrl,payment_status:"Paid",payment_date:new Date().toISOString().split("T")[0]}).eq("order_id",m.order_id);if(I){console.error("Error updating payment:",I),Re.error("Failed to update payment status");return}Re.success("Receipt uploaded successfully!"),g(!1),y(null),S(null),M()}catch(k){console.error("Error processing payment:",k),Re.error("Failed to process payment")}finally{T(!1)}},D=k=>{switch(k?.toLowerCase()){case"approved":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"cancelled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return x.useEffect(()=>{M()},[n?.user]),n?.user?a?p.jsx(ua,{message:"Loading..."}):p.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#f7f0e7] to-[#e5d6c4] py-8",children:[p.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"My Account"}),p.jsx("p",{className:"text-[#381914] opacity-80",children:"Manage your cart and view your orders"})]}),p.jsx("div",{className:"flex justify-center mb-8",children:p.jsxs("div",{className:"bg-white rounded-lg p-1 shadow-lg",children:[p.jsxs("button",{onClick:()=>t("toPay"),className:`px-6 py-3 rounded-md font-medium transition-colors ${e==="toPay"?"bg-[#AF524D] text-white":"text-[#381914] hover:bg-gray-100"}`,children:["To Pay (",s.filter(k=>k.order_status==="Pending").length,")"]}),p.jsxs("button",{onClick:()=>t("toReceive"),className:`px-6 py-3 rounded-md font-medium transition-colors ${e==="toReceive"?"bg-[#AF524D] text-white":"text-[#381914] hover:bg-gray-100"}`,children:["To Receive (",s.filter(k=>k.order_status==="Approved").length,")"]}),p.jsxs("button",{onClick:()=>t("completed"),className:`px-6 py-3 rounded-md font-medium transition-colors ${e==="completed"?"bg-[#AF524D] text-white":"text-[#381914] hover:bg-gray-100"}`,children:["Completed (",s.filter(k=>k.order_status==="Delivered").length,")"]}),p.jsxs("button",{onClick:()=>t("cancelled"),className:`px-6 py-3 rounded-md font-medium transition-colors ${e==="cancelled"?"bg-[#AF524D] text-white":"text-[#381914] hover:bg-gray-100"}`,children:["Cancelled (",s.filter(k=>k.order_status==="Cancelled").length,")"]})]})}),e==="toPay"&&p.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-[#381914] mb-6",children:"Orders to Pay"}),s.filter(k=>k.order_status==="Pending").length===0?p.jsxs("div",{className:"text-center py-12",children:[p.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m6 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})}),p.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No pending orders"}),p.jsx("p",{className:"text-gray-500",children:"Your pending orders will appear here"})]}):p.jsx("div",{className:"space-y-4",children:s.filter(k=>k.order_status==="Pending").map(k=>p.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:p.jsxs("div",{className:"flex items-start gap-4",children:[k.CAKE&&p.jsx("img",{src:k.CAKE.publicUrl||"/saved-cake.png",alt:k.CAKE.name,className:"w-16 h-16 object-cover rounded-lg",onError:B=>{B.target.src="/saved-cake.png"}}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-[#381914]",children:k.CAKE?k.CAKE.name:"Cake"}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID: ",k.order_id]}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",k.quantity]}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(k.order_date).toLocaleDateString()]}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Method: ",k.delivery_method]}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",k.order_status]}),k.payment&&p.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",k.payment.payment_status]})]}),p.jsxs("div",{className:"text-right",children:[p.jsxs("p",{className:"font-semibold text-[#381914]",children:["₱",k.total_price]}),p.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${D(k.order_status)}`,children:k.order_status})]})]}),p.jsx("div",{className:"flex justify-end mt-4",children:p.jsx("button",{onClick:()=>O(k),disabled:c,className:`py-2 px-6 rounded-lg font-semibold text-sm transition-all duration-200 ${c?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-[#AF524D] text-white hover:bg-[#8B3D3A] shadow-md hover:shadow-lg transform hover:scale-105"}`,children:"Pay Now"})})]})]})},k.order_id))})]}),e==="toReceive"&&p.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-[#381914] mb-6",children:"Orders to Receive"}),s.filter(k=>k.order_status==="Approved").length===0?p.jsxs("div",{className:"text-center py-12",children:[p.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),p.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No orders to receive"}),p.jsx("p",{className:"text-gray-500",children:"Your approved and paid orders will appear here"})]}):p.jsx("div",{className:"space-y-4",children:s.filter(k=>k.order_status==="Approved").map(k=>p.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:p.jsxs("div",{className:"flex items-start gap-4",children:[k.CAKE&&p.jsx("img",{src:k.CAKE.publicUrl||"/saved-cake.png",alt:k.CAKE.name,className:"w-16 h-16 object-cover rounded-lg",onError:B=>{B.target.src="/saved-cake.png"}}),p.jsx("div",{className:"flex-1",children:p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-[#381914]",children:k.CAKE?k.CAKE.name:"Cake"}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID: ",k.order_id]}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",k.quantity]}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(k.order_date).toLocaleDateString()]}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Method: ",k.delivery_method]}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",k.order_status]}),k.payment&&p.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",k.payment.payment_status]})]}),p.jsxs("div",{className:"text-right",children:[p.jsxs("p",{className:"font-semibold text-[#381914]",children:["₱",k.total_price]}),p.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${D(k.order_status)}`,children:k.order_status})]})]})})]})},k.order_id))})]}),e==="completed"&&p.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-[#381914] mb-6",children:"Delivered Orders"}),s.filter(k=>k.order_status==="Delivered").length===0?p.jsxs("div",{className:"text-center py-12",children:[p.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),p.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No delivered orders"}),p.jsx("p",{className:"text-gray-500",children:"Your delivered orders will appear here"})]}):p.jsx("div",{className:"space-y-4",children:s.filter(k=>k.order_status==="Delivered").map(k=>p.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:p.jsxs("div",{className:"flex items-start gap-4",children:[k.CAKE&&p.jsx("img",{src:k.CAKE.publicUrl||"/saved-cake.png",alt:k.CAKE.name,className:"w-16 h-16 object-cover rounded-lg",onError:B=>{B.target.src="/saved-cake.png"}}),p.jsx("div",{className:"flex-1",children:p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-[#381914]",children:k.CAKE?k.CAKE.name:"Cake"}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID: ",k.order_id]}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",k.quantity]}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(k.order_date).toLocaleDateString()]}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Method: ",k.delivery_method]}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",k.order_status]}),k.payment&&p.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",k.payment.payment_status]})]}),p.jsxs("div",{className:"text-right",children:[p.jsxs("p",{className:"font-semibold text-[#381914]",children:["₱",k.total_price]}),p.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${D(k.order_status)}`,children:k.order_status})]})]})})]})},k.order_id))})]}),e==="cancelled"&&p.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-[#381914] mb-6",children:"Cancelled Orders"}),s.filter(k=>k.order_status==="Cancelled").length===0?p.jsxs("div",{className:"text-center py-12",children:[p.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),p.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No cancelled orders"}),p.jsx("p",{className:"text-gray-500",children:"Your cancelled orders will appear here"})]}):p.jsx("div",{className:"space-y-4",children:s.filter(k=>k.order_status==="Cancelled").map(k=>p.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:p.jsxs("div",{className:"flex items-start gap-4",children:[k.CAKE&&p.jsx("img",{src:k.CAKE.publicUrl||"/saved-cake.png",alt:k.CAKE.name,className:"w-16 h-16 object-cover rounded-lg",onError:B=>{B.target.src="/saved-cake.png"}}),p.jsx("div",{className:"flex-1",children:p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-[#381914]",children:k.CAKE?k.CAKE.name:"Cake"}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID: ",k.order_id]}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",k.quantity]}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(k.order_date).toLocaleDateString()]}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Method: ",k.delivery_method]}),p.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",k.order_status]}),k.payment&&p.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",k.payment.payment_status]})]}),p.jsxs("div",{className:"text-right",children:[p.jsxs("p",{className:"font-semibold text-[#381914]",children:["₱",k.total_price]}),p.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${D(k.order_status)}`,children:k.order_status})]})]})})]})},k.order_id))})]})]}),h&&m&&p.jsx("div",{className:"fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-xl font-bold text-[#381914]",children:"Upload Receipt"}),p.jsx("button",{onClick:()=>{g(!1),y(null),S(null)},className:"text-gray-500 hover:text-gray-700 text-2xl font-bold cursor-pointer",children:"×"})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("p",{className:"text-gray-600 mb-2",children:"Order Details:"}),p.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[p.jsxs("p",{className:"text-sm text-gray-700",children:[p.jsx("span",{className:"font-semibold",children:"Order ID:"})," ",m.order_id]}),p.jsxs("p",{className:"text-sm text-gray-700",children:[p.jsx("span",{className:"font-semibold",children:"Item:"})," ",m.CAKE?m.CAKE.name:"Cake"]}),p.jsxs("p",{className:"text-sm text-gray-700",children:[p.jsx("span",{className:"font-semibold",children:"Total Amount:"})," ₱",m.total_price]}),p.jsxs("p",{className:"text-sm text-gray-700",children:[p.jsx("span",{className:"font-semibold",children:"Minimum Payment (50%):"})," ₱",(m.total_price*.5).toFixed(2)]})]}),p.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:p.jsxs("div",{className:"flex items-start",children:[p.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"Payment Instructions"}),p.jsxs("p",{className:"text-xs text-blue-700",children:["Please pay at least ",p.jsxs("span",{className:"font-semibold",children:["₱",(m.total_price*.5).toFixed(2)]})," to confirm your order. The remaining balance of ",p.jsxs("span",{className:"font-semibold",children:["₱",(m.total_price*.5).toFixed(2)]})," can be paid upon pickup or delivery."]})]})]})})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Receipt Image"}),p.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-[#AF524D] transition-colors",children:[p.jsx("input",{type:"file",accept:"image/*",onChange:L,className:"hidden",id:"receipt-upload"}),p.jsx("label",{htmlFor:"receipt-upload",className:"cursor-pointer",children:b?p.jsxs("div",{children:[p.jsx("svg",{className:"w-12 h-12 text-green-500 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),p.jsx("p",{className:"text-sm text-gray-600",children:b.name}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click to change file"})]}):p.jsxs("div",{children:[p.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),p.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload receipt"}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, JPEG up to 5MB"})]})})]})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:()=>{g(!1),y(null),S(null)},className:"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),p.jsx("button",{onClick:j,disabled:!b||_,className:`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${!b||_?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-[#AF524D] text-white hover:bg-[#8B3D3A]"}`,children:_?"Uploading...":"Upload Receipt"})]})]})})]}):p.jsx("div",{className:"min-h-screen bg-gradient-to-b from-[#f7f0e7] to-[#e5d6c4] py-8",children:p.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"My Account"}),p.jsx("p",{className:"text-[#381914] opacity-80",children:"Manage your cart and view your orders"})]}),p.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[p.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),p.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Please Log In First"}),p.jsx("p",{className:"text-gray-500 mb-6",children:"You need to be logged in to access your cart and orders."}),p.jsx(os,{to:"/login",className:"inline-block bg-[#AF524D] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#8B3D3A] transition-colors",children:"Go to Login"})]})]})})};function G(n,e,t){return(e=function(s){var i=function(a,l){if(typeof a!="object"||!a)return a;var c=a[Symbol.toPrimitive];if(c!==void 0){var d=c.call(a,l);if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(a)}(s,"string");return typeof i=="symbol"?i:i+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function G_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function Y(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?G_(Object(t),!0).forEach(function(s){G(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):G_(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function jt(n,e){if(n==null)return{};var t,s,i=function(l,c){if(l==null)return{};var d={};for(var h in l)if({}.hasOwnProperty.call(l,h)){if(c.indexOf(h)>=0)continue;d[h]=l[h]}return d}(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(s=0;s<a.length;s++)t=a[s],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function Wn(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}class $_{constructor(){G(this,"browserShadowBlurConstant",1),G(this,"DPI",96),G(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),G(this,"perfLimitSizeTotal",2097152),G(this,"maxCacheSideLimit",4096),G(this,"minCacheSideLimit",256),G(this,"disableStyleCopyPaste",!1),G(this,"enableGLFiltering",!0),G(this,"textureSize",4096),G(this,"forceGLPutImageData",!1),G(this,"cachesBoundsOfCurve",!1),G(this,"fontPaths",{}),G(this,"NUM_FRACTION_DIGITS",4)}}const at=new class extends $_{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=Y(Y({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const e=new $_,t=n?.reduce((s,i)=>(s[i]=e[i],s),{})||e;this.configure(t)}},pr=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];return console[n]("fabric",...t)};class Hn extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class nU extends Hn{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class iU{}class rU extends iU{testPrecision(e,t){const s="precision ".concat(t,` float;
void main(){}`),i=e.createShader(e.FRAGMENT_SHADER);return!!i&&(e.shaderSource(i,s),e.compileShader(i),!!e.getShaderParameter(i,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(s=>this.testPrecision(t,s)),t.getExtension("WEBGL_lose_context").loseContext(),pr("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const aU={};let Y_;const qn=()=>Y_||(Y_={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new rU,dispose(){},copyPasteData:aU}),Io=()=>qn().document,qh=()=>qn().window,NE=()=>{var n;return Math.max((n=at.devicePixelRatio)!==null&&n!==void 0?n:qh().devicePixelRatio,1)},vc=new class{constructor(){G(this,"charWidthsCache",{}),G(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:e,fontStyle:t,fontWeight:s}=n;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const i=this.charWidthsCache[e],a="".concat(t.toLowerCase(),"_").concat((s+"").toLowerCase());return i[a]||(i[a]={}),i[a]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:e}=at,t=Math.sqrt(e*n);return[Math.floor(t),Math.floor(e/t)]}},Km="6.7.1";function th(){}const qc=Math.PI/2,kh=2*Math.PI,d0=Math.PI/180,js=Object.freeze([1,0,0,1,0,0]),h0=16,nr=.4477152502,We="center",dt="left",Us="top",Zm="bottom",Vt="right",zs="none",f0=/\r?\n/,PE="moving",Wh="scaling",RE="rotating",g0="rotate",BE="skewing",Lc="resizing",oU="modifyPoly",lU="modifyPath",Mh="changed",Xh="scale",Fs="scaleX",mn="scaleY",Fo="skewX",Vo="skewY",Qt="fill",Is="stroke",Oh="modified",co="json",Jp="svg",je=new class{constructor(){this[co]=new Map,this[Jp]=new Map}has(n){return this[co].has(n)}getClass(n){const e=this[co].get(n);if(!e)throw new Hn("No class registered for ".concat(n));return e}setClass(n,e){e?this[co].set(e,n):(this[co].set(n.type,n),this[co].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[Jp].get(n)}setSVGClass(n,e){this[Jp].set(e??n.type.toLowerCase(),n)}},Lh=new class extends Array{remove(n){const e=this.indexOf(n);e>-1&&this.splice(e,1)}cancelAll(){const n=this.splice(0);return n.forEach(e=>e.abort()),n}cancelByCanvas(n){if(!n)return[];const e=this.filter(t=>{var s;return t.target===n||typeof t.target=="object"&&((s=t.target)===null||s===void 0?void 0:s.canvas)===n});return e.forEach(t=>t.abort()),e}cancelByTarget(n){if(!n)return[];const e=this.filter(t=>t.target===n);return e.forEach(t=>t.abort()),e}};class cU{constructor(){G(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(s=>{let[i,a]=s;this.on(i,a)}),()=>this.off(e);if(t){const s=e;return this.__eventListeners[s]||(this.__eventListeners[s]=[]),this.__eventListeners[s].push(t),()=>this.off(s,t)}return()=>!1}once(e,t){if(typeof e=="object"){const s=[];return Object.entries(e).forEach(i=>{let[a,l]=i;s.push(this.once(a,l))}),()=>s.forEach(i=>i())}if(t){const s=this.on(e,function(){for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];t.call(this,...a),s()});return s}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const s=this.__eventListeners[e],i=s.indexOf(t);i>-1&&s.splice(i,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const s in this.__eventListeners)this._removeEventListener(s);else typeof e=="object"?Object.entries(e).forEach(s=>{let[i,a]=s;this._removeEventListener(i,a)}):this._removeEventListener(e,t)}fire(e,t){var s;if(!this.__eventListeners)return;const i=(s=this.__eventListeners[e])===null||s===void 0?void 0:s.concat();if(i)for(let a=0;a<i.length;a++)i[a].call(this,t||{})}}const fo=(n,e)=>{const t=n.indexOf(e);return t!==-1&&n.splice(t,1),n},ki=n=>{if(n===0)return 1;switch(Math.abs(n)/qc){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},Mi=n=>{if(n===0)return 0;const e=n/qc,t=Math.sign(n);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(n)};class re{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new re(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new re(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new re(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new re(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new re(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new re(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new re(this.x/e.x,this.y/e.y)}scalarDivide(e){return new re(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new re(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,s=this.y-e.y;return Math.sqrt(t*t+s*s)}midPointFrom(e){return this.lerp(e)}min(e){return new re(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new re(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,s=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=s}clone(){return new re(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p0;const s=Mi(e),i=ki(e),a=this.subtract(t);return new re(a.x*i-a.y*s,a.x*s+a.y*i).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new re(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const p0=new re(0,0),sh=n=>!!n&&Array.isArray(n._objects);function UE(n){class e extends n{constructor(){super(...arguments),G(this,"_objects",[])}_onObjectAdded(s){}_onObjectRemoved(s){}_onStackOrderChanged(s){}add(){for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];const l=this._objects.push(...i);return i.forEach(c=>this._onObjectAdded(c)),l}insertAt(s){for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];return this._objects.splice(s,0,...a),a.forEach(c=>this._onObjectAdded(c)),this._objects.length}remove(){const s=this._objects,i=[];for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return l.forEach(d=>{const h=s.indexOf(d);h!==-1&&(s.splice(h,1),i.push(d),this._onObjectRemoved(d))}),i}forEachObject(s){this.getObjects().forEach((i,a,l)=>s(i,a,l))}getObjects(){for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return i.length===0?[...this._objects]:this._objects.filter(l=>l.isType(...i))}item(s){return this._objects[s]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(s,i){return!!this._objects.includes(s)||!!i&&this._objects.some(a=>a instanceof e&&a.contains(s,!0))}complexity(){return this._objects.reduce((s,i)=>s+=i.complexity?i.complexity():0,0)}sendObjectToBack(s){return!(!s||s===this._objects[0])&&(fo(this._objects,s),this._objects.unshift(s),this._onStackOrderChanged(s),!0)}bringObjectToFront(s){return!(!s||s===this._objects[this._objects.length-1])&&(fo(this._objects,s),this._objects.push(s),this._onStackOrderChanged(s),!0)}sendObjectBackwards(s,i){if(!s)return!1;const a=this._objects.indexOf(s);if(a!==0){const l=this.findNewLowerIndex(s,a,i);return fo(this._objects,s),this._objects.splice(l,0,s),this._onStackOrderChanged(s),!0}return!1}bringObjectForward(s,i){if(!s)return!1;const a=this._objects.indexOf(s);if(a!==this._objects.length-1){const l=this.findNewUpperIndex(s,a,i);return fo(this._objects,s),this._objects.splice(l,0,s),this._onStackOrderChanged(s),!0}return!1}moveObjectTo(s,i){return s!==this._objects[i]&&(fo(this._objects,s),this._objects.splice(i,0,s),this._onStackOrderChanged(s),!0)}findNewLowerIndex(s,i,a){let l;if(a){l=i;for(let c=i-1;c>=0;--c)if(s.isOverlapping(this._objects[c])){l=c;break}}else l=i-1;return l}findNewUpperIndex(s,i,a){let l;if(a){l=i;for(let c=i+1;c<this._objects.length;++c)if(s.isOverlapping(this._objects[c])){l=c;break}}else l=i+1;return l}collectObjects(s){let{left:i,top:a,width:l,height:c}=s,{includeIntersecting:d=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const h=[],g=new re(i,a),m=g.add(new re(l,c));for(let y=this._objects.length-1;y>=0;y--){const b=this._objects[y];b.selectable&&b.visible&&(d&&b.intersectsWithRect(g,m)||b.isContainedWithinRect(g,m)||d&&b.containsPoint(g)||d&&b.containsPoint(m))&&h.push(b)}return h}}return e}class zE extends cU{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function nh(n){return qh().requestAnimationFrame(n)}function uU(n){return qh().cancelAnimationFrame(n)}let dU=0;const mr=()=>dU++,Oi=()=>{const n=Io().createElement("canvas");if(!n||n.getContext===void 0)throw new Hn("Failed to create `canvas` element");return n},hU=()=>Io().createElement("img"),vn=n=>{const e=Oi();return e.width=n.width,e.height=n.height,e},IE=(n,e,t)=>n.toDataURL("image/".concat(e),t),FE=(n,e,t)=>new Promise((s,i)=>{n.toBlob(s,"image/".concat(e),t)}),Ht=n=>n*d0,Li=n=>n/d0,fU=n=>n.every((e,t)=>e===js[t]),Rs=(n,e,t)=>new re(n).transform(e,t),Mn=n=>{const e=1/(n[0]*n[3]-n[1]*n[2]),t=[e*n[3],-e*n[1],-e*n[2],e*n[0],0,0],{x:s,y:i}=new re(n[4],n[5]).transform(t,!0);return t[4]=-s,t[5]=-i,t},ps=(n,e,t)=>[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],t?0:n[0]*e[4]+n[2]*e[5]+n[4],t?0:n[1]*e[4]+n[3]*e[5]+n[5]],m0=(n,e)=>n.reduceRight((t,s)=>s&&t?ps(s,t,e):s||t,void 0)||js.concat(),VE=n=>{let[e,t]=n;return Math.atan2(t,e)},Ah=n=>{const e=VE(n),t=Math.pow(n[0],2)+Math.pow(n[1],2),s=Math.sqrt(t),i=(n[0]*n[3]-n[2]*n[1])/s,a=Math.atan2(n[0]*n[2]+n[1]*n[3],t);return{angle:Li(e),scaleX:s,scaleY:i,skewX:Li(a),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},Wc=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Ho(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=Ht(n),i=ki(s),a=Mi(s);return[i,a,-a,i,e?e-(i*e-a*t):0,t?t-(a*e+i*t):0]}const v0=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},HE=n=>Math.tan(Ht(n)),GE=n=>[1,0,HE(n),1,0,0],$E=n=>[1,HE(n),0,1,0,0],Kh=n=>{let{scaleX:e=1,scaleY:t=1,flipX:s=!1,flipY:i=!1,skewX:a=0,skewY:l=0}=n,c=v0(s?-e:e,i?-t:t);return a&&(c=ps(c,GE(a),!0)),l&&(c=ps(c,$E(l),!0)),c},gU=n=>{const{translateX:e=0,translateY:t=0,angle:s=0}=n;let i=Wc(e,t);s&&(i=ps(i,Ho({angle:s})));const a=Kh(n);return fU(a)||(i=ps(i,a)),i},ih=function(n){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(s,i){if(e&&e.aborted)return i(new nU("loadImage"));const a=hU();let l;e&&(l=function(d){a.src="",i(d)},e.addEventListener("abort",l,{once:!0}));const c=function(){a.onload=a.onerror=null,l&&e?.removeEventListener("abort",l),s(a)};n?(a.onload=c,a.onerror=function(){l&&e?.removeEventListener("abort",l),i(new Hn("Error loading ".concat(a.src)))},t&&(a.crossOrigin=t),a.src=n):c()})},Ac=function(n){let{signal:e,reviver:t=th}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((s,i)=>{const a=[];e&&e.addEventListener("abort",i,{once:!0}),Promise.all(n.map(l=>je.getClass(l.type).fromObject(l,{signal:e}).then(c=>(t(l,c),a.push(c),c)))).then(s).catch(l=>{a.forEach(c=>{c.dispose&&c.dispose()}),i(l)}).finally(()=>{e&&e.removeEventListener("abort",i)})})},Zh=function(n){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,s)=>{const i=[];e&&e.addEventListener("abort",s,{once:!0});const a=Object.values(n).map(c=>c&&c.type&&je.has(c.type)?Ac([c],{signal:e}).then(d=>{let[h]=d;return i.push(h),h}):c),l=Object.keys(n);Promise.all(a).then(c=>c.reduce((d,h,g)=>(d[l[g]]=h,d),{})).then(t).catch(c=>{i.forEach(d=>{d.dispose&&d.dispose()}),s(c)}).finally(()=>{e&&e.removeEventListener("abort",s)})})},Go=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in n&&(e[t]=n[t]),e),{})},y0=(n,e)=>Object.keys(n).reduce((t,s)=>(e(n[s],s,n)&&(t[s]=n[s]),t),{}),wt=(n,e)=>parseFloat(Number(n).toFixed(e)),Dc=n=>"matrix("+n.map(e=>wt(e,at.NUM_FRACTION_DIGITS)).join(" ")+")",gn=n=>!!n&&n.toLive!==void 0,q_=n=>!!n&&typeof n.toObject=="function",W_=n=>!!n&&n.offsetX!==void 0&&"source"in n,Yr=n=>!!n&&"multiSelectionStacking"in n;function YE(n){const e=n&&kn(n);let t=0,s=0;if(!n||!e)return{left:t,top:s};let i=n;const a=e.documentElement,l=e.body||{scrollLeft:0,scrollTop:0};for(;i&&(i.parentNode||i.host)&&(i=i.parentNode||i.host,i===e?(t=l.scrollLeft||a.scrollLeft||0,s=l.scrollTop||a.scrollTop||0):(t+=i.scrollLeft||0,s+=i.scrollTop||0),i.nodeType!==1||i.style.position!=="fixed"););return{left:t,top:s}}const kn=n=>n.ownerDocument||null,qE=n=>{var e;return((e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},WE=function(n,e,t){let{width:s,height:i}=t,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=s,n.height=i,a>1&&(n.setAttribute("width",(s*a).toString()),n.setAttribute("height",(i*a).toString()),e.scale(a,a))},Qm=(n,e)=>{let{width:t,height:s}=e;t&&(n.style.width=typeof t=="number"?"".concat(t,"px"):t),s&&(n.style.height=typeof s=="number"?"".concat(s,"px"):s)};function X_(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=zs,n}class XE{constructor(e){G(this,"_originalCanvasStyle",void 0),G(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(s=e)&&s.getContext!==void 0?e:e&&Io().getElementById(e)||Oi();var s;if(t.hasAttribute("data-fabric"))throw new Hn("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:s}=e;const{el:i}=this.lower;i.classList.remove("lower-canvas"),i.removeAttribute("data-fabric"),i.setAttribute("width","".concat(t)),i.setAttribute("height","".concat(s)),i.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:s,ctx:i}=this.lower;WE(s,i,e,t)}setCSSDimensions(e){Qm(this.lower.el,e)}calcOffset(){return function(e){var t;const s=e&&kn(e),i={left:0,top:0};if(!s)return i;const a=((t=qE(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};i.left+=parseInt(a.borderLeftWidth,10)||0,i.top+=parseInt(a.borderTopWidth,10)||0,i.left+=parseInt(a.paddingLeft,10)||0,i.top+=parseInt(a.paddingTop,10)||0;let l={left:0,top:0};const c=s.documentElement;e.getBoundingClientRect!==void 0&&(l=e.getBoundingClientRect());const d=YE(e);return{left:l.left+d.left-(c.clientLeft||0)+i.left,top:l.top+d.top-(c.clientTop||0)+i.top}}(this.lower.el)}dispose(){qn().dispose(this.lower.el),delete this.lower}}const pU={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...js]};class Xc extends UE(zE){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return Xc.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new XE(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];const a=super.insertAt(e,...s);return s.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),a}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(pr("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?NE():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:s=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const i=Y({width:this.width,height:this.height},e);this.elements.setDimensions(i,this.getRetinaScaling()),this.hasLostContext=!0,this.width=i.width,this.height=i.height}s||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const s=e,i=[...this.viewportTransform],a=Rs(e,Mn(i));i[0]=t,i[3]=t;const l=Rs(a,i);i[4]+=s.x-l.x,i[5]+=s.y-l.y,this.setViewportTransform(i)}setZoom(e){this.zoomToPoint(new re(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new re(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=nh(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,s=Mn(this.viewportTransform),i=Rs({x:0,y:0},s),a=Rs({x:e,y:t},s),l=i.min(a),c=i.max(a);return this.vptCoords={tl:l,tr:new re(c.x,l.y),bl:new re(l.x,c.y),br:c}}cancelRequestedRender(){this.nextRenderHandle&&(uU(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const s=this.viewportTransform,i=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(s[0],s[1],s[2],s[3],s[4],s[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),i&&(i._set("canvas",this),i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,i)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const s=this.viewportTransform;e.save(),e.transform(...s),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let s=0,i=t.length;s<i;++s)t[s]&&t[s].render(e)}_renderBackgroundOrOverlay(e,t){const s=this["".concat(t,"Color")],i=this["".concat(t,"Image")],a=this.viewportTransform,l=this["".concat(t,"Vpt")];if(!s&&!i)return;const c=gn(s);if(s){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=c?s.toLive(e):s,l&&e.transform(...a),c){e.transform(1,0,0,1,s.offsetX||0,s.offsetY||0);const d=s.gradientTransform||s.patternTransform;d&&e.transform(...d)}e.fill(),e.restore()}if(i){e.save();const{skipOffscreen:d}=this;this.skipOffscreen=l,l&&e.transform(...a),i.render(e),this.skipOffscreen=d,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new re(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new re(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new re(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new re(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new re(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Rs(this.getCenterPoint(),Mn(this.viewportTransform))}_centerObject(e,t){e.setXY(t,We,We),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const s=this.clipPath,i=s&&!s.excludeFromExport?this._toObject(s,e,t):null;return Y(Y(Y({version:Km},Go(this,t)),{},{objects:this._objects.filter(a=>!a.excludeFromExport).map(a=>this._toObject(a,e,t))},this.__serializeBgOverlay(e,t)),i?{clipPath:i}:null)}_toObject(e,t,s){let i;this.includeDefaultValues||(i=e.includeDefaultValues,e.includeDefaultValues=!1);const a=e[t](s);return this.includeDefaultValues||(e.includeDefaultValues=!!i),a}__serializeBgOverlay(e,t){const s={},i=this.backgroundImage,a=this.overlayImage,l=this.backgroundColor,c=this.overlayColor;return gn(l)?l.excludeFromExport||(s.background=l.toObject(t)):l&&(s.background=l),gn(c)?c.excludeFromExport||(s.overlay=c.toObject(t)):c&&(s.overlay=c),i&&!i.excludeFromExport&&(s.backgroundImage=this._toObject(i,e,t)),a&&!a.excludeFromExport&&(s.overlayImage=this._toObject(a,e,t)),s}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const s=[];return this._setSVGPreamble(s,e),this._setSVGHeader(s,e),this.clipPath&&s.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(s,"background"),this._setSVGBgOverlayImage(s,"backgroundImage",t),this._setSVGObjects(s,t),this.clipPath&&s.push(`</g>
`),this._setSVGBgOverlayColor(s,"overlay"),this._setSVGBgOverlayImage(s,"overlayImage",t),s.push("</svg>"),s.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const s=t.width||"".concat(this.width),i=t.height||"".concat(this.height),a=at.NUM_FRACTION_DIGITS,l=t.viewBox;let c;if(l)c='viewBox="'.concat(l.x," ").concat(l.y," ").concat(l.width," ").concat(l.height,'" ');else if(this.svgViewportTransformation){const d=this.viewportTransform;c='viewBox="'.concat(wt(-d[4]/d[0],a)," ").concat(wt(-d[5]/d[3],a)," ").concat(wt(this.width/d[0],a)," ").concat(wt(this.height/d[3],a),'" ')}else c='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',s,'" ','height="',i,'" ',c,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",Km,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(mr()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(gn(t)){const s=this["".concat(e,"Vpt")],i=this.viewportTransform,a={isType:()=>!1,width:this.width/(s?i[0]:1),height:this.height/(s?i[3]:1)};return t.toSVG(a,{additionalTransform:s?Dc(i):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},s=at.fontPaths;this._objects.forEach(function a(l){e.push(l),sh(l)&&l._objects.forEach(a)}),e.forEach(a=>{if(!(l=a)||typeof l._renderText!="function")return;var l;const{styles:c,fontFamily:d}=a;!t[d]&&s[d]&&(t[d]=!0,c&&Object.values(c).forEach(h=>{Object.values(h).forEach(g=>{let{fontFamily:m=""}=g;!t[m]&&s[m]&&(t[m]=!0)})}))});const i=Object.keys(t).map(a=>`		@font-face {
			font-family: '`.concat(a,`';
			src: url('`).concat(s[a],`');
		}
`)).join("");return i?`	<style type="text/css"><![CDATA[
`.concat(i,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(s=>{s.excludeFromExport||this._setSVGObject(e,s,t)})}_setSVGObject(e,t,s){e.push(t.toSVG(s))}_setSVGBgOverlayImage(e,t,s){const i=this[t];i&&!i.excludeFromExport&&i.toSVG&&e.push(i.toSVG(s))}_setSVGBgOverlayColor(e,t){const s=this["".concat(t,"Color")];if(s)if(gn(s)){const i=s.repeat||"",a=this.width,l=this.height,c=this["".concat(t,"Vpt")]?Dc(Mn(this.viewportTransform)):"";e.push('<rect transform="'.concat(c," translate(").concat(a/2,",").concat(l/2,')" x="').concat(s.offsetX-a/2,'" y="').concat(s.offsetY-l/2,'" width="').concat(i!=="repeat-y"&&i!=="no-repeat"||!W_(s)?a:s.source.width,'" height="').concat(i!=="repeat-x"&&i!=="no-repeat"||!W_(s)?l:s.source.height,'" fill="url(#SVGID_').concat(s.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',s,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:s}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Hn("`json` is undefined"));const i=typeof e=="string"?JSON.parse(e):e,{objects:a=[],backgroundImage:l,background:c,overlayImage:d,overlay:h,clipPath:g}=i,m=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Ac(a,{reviver:t,signal:s}),Zh({backgroundImage:l,backgroundColor:c,overlayImage:d,overlayColor:h,clipPath:g},{signal:s})]).then(y=>{let[b,S]=y;return this.clear(),this.add(...b),this.set(i),this.set(S),this.renderOnAddRemove=m,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=vn(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:s=1,multiplier:i=1,enableRetinaScaling:a=!1}=e,l=i*(a?this.getRetinaScaling():1);return IE(this.toCanvasElement(l,e),t,s)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:s=1,multiplier:i=1,enableRetinaScaling:a=!1}=e,l=i*(a?this.getRetinaScaling():1);return FE(this.toCanvasElement(l,e),t,s)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:s,left:i,top:a,filter:l}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=(t||this.width)*e,d=(s||this.height)*e,h=this.getZoom(),g=this.width,m=this.height,y=this.skipControlsDrawing,b=h*e,S=this.viewportTransform,_=[b,0,0,b,(S[4]-(i||0))*e,(S[5]-(a||0))*e],T=this.enableRetinaScaling,C=vn({width:c,height:d}),M=l?this._objects.filter(O=>l(O)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=_,this.width=c,this.height=d,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(C.getContext("2d"),M),this.viewportTransform=S,this.width=g,this.height=m,this.calcViewportBoundaries(),this.enableRetinaScaling=T,this.skipControlsDrawing=y,C}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Lh.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const s=()=>{this.destroy(),e(!0)};s.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=s:s()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}G(Xc,"ownDefaults",pU);const mU=["touchstart","touchmove","touchend"],vU=n=>{const e=YE(n.target),t=function(s){const i=s.changedTouches;return i&&i[0]?i[0]:s}(n);return new re(t.clientX+e.left,t.clientY+e.top)},Jm=n=>mU.includes(n.type)||n.pointerType==="touch",K_=n=>{n.preventDefault(),n.stopPropagation()},Si=n=>{let e=0,t=0,s=0,i=0;for(let a=0,l=n.length;a<l;a++){const{x:c,y:d}=n[a];(c>s||!a)&&(s=c),(c<e||!a)&&(e=c),(d>i||!a)&&(i=d),(d<t||!a)&&(t=d)}return{left:e,top:t,width:s-e,height:i-t}},yU=["translateX","translateY","scaleX","scaleY"],xU=(n,e)=>Dh(n,ps(e,n.calcOwnMatrix())),Dh=(n,e)=>{const t=Ah(e),{translateX:s,translateY:i,scaleX:a,scaleY:l}=t,c=jt(t,yU),d=new re(s,i);n.flipX=!1,n.flipY=!1,Object.assign(n,c),n.set({scaleX:a,scaleY:l}),n.setPositionByOrigin(d,We,We)},bU=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},KE=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),x0=(n,e,t)=>{const s=n/2,i=e/2,a=[new re(-s,-i),new re(s,-i),new re(-s,i),new re(s,i)].map(c=>c.transform(t)),l=Si(a);return new re(l.width,l.height)},Qh=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:js;return ps(Mn(arguments.length>1&&arguments[1]!==void 0?arguments[1]:js),n)},Co=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:js,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:js;return n.transform(Qh(e,t))},wU=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:js,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:js;return n.transform(Qh(e,t),!0)},SU=(n,e,t)=>{const s=Qh(e,t);return Dh(n,ps(s,n.calcOwnMatrix())),s},ZE=(n,e)=>{var t;const{transform:{target:s}}=e;(t=s.canvas)===null||t===void 0||t.fire("object:".concat(n),Y(Y({},e),{},{target:s})),s.fire(n,e)},_U={left:-.5,top:-.5,center:0,bottom:.5,right:.5},qt=n=>typeof n=="string"?_U[n]:n-.5,Nh="not-allowed";function QE(n){return qt(n.originX)===qt(We)&&qt(n.originY)===qt(We)}function Z_(n){return .5-qt(n)}const Ln=(n,e)=>n[e],JE=(n,e,t,s)=>({e:n,transform:e,pointer:new re(t,s)});function ej(n,e){const t=n.getTotalAngle()+Li(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function b0(n,e,t,s,i){var a;let{target:l,corner:c}=n;const d=l.controls[c],h=((a=l.canvas)===null||a===void 0?void 0:a.getZoom())||1,g=l.padding/h,m=function(y,b,S,_){const T=y.getRelativeCenterPoint(),C=S!==void 0&&_!==void 0?y.translateToGivenOrigin(T,We,We,S,_):new re(y.left,y.top);return(y.angle?b.rotate(-Ht(y.angle),T):b).subtract(C)}(l,new re(s,i),e,t);return m.x>=g&&(m.x-=g),m.x<=-g&&(m.x+=g),m.y>=g&&(m.y-=g),m.y<=g&&(m.y+=g),m.x-=d.offsetX,m.y-=d.offsetY,m}const CU=(n,e,t,s)=>{const{target:i,offsetX:a,offsetY:l}=e,c=t-a,d=s-l,h=!Ln(i,"lockMovementX")&&i.left!==c,g=!Ln(i,"lockMovementY")&&i.top!==d;return h&&i.set(dt,c),g&&i.set(Us,d),(h||g)&&ZE(PE,JE(n,e,t,s)),h||g},Q_={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},em=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n),J_=(n,e,t,s)=>{n/=255,e/=255,t/=255;const i=Math.max(n,e,t),a=Math.min(n,e,t);let l,c;const d=(i+a)/2;if(i===a)l=c=0;else{const h=i-a;switch(c=d>.5?h/(2-i-a):h/(i+a),i){case n:l=(e-t)/h+(e<t?6:0);break;case e:l=(t-n)/h+2;break;case t:l=(n-e)/h+4}l/=6}return[Math.round(360*l),Math.round(100*c),Math.round(100*d),s]},eC=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},Sd=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),tC=n=>{let[e,t,s,i=1]=n;const a=Math.round(.3*e+.59*t+.11*s);return[a,a,a,i]};class gt{constructor(e){if(G(this,"isUnrecognised",!1),e)if(e instanceof gt)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,s,i,a=1]=e;this.setSource([t,s,i,a])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Q_&&(e=Q_[e]),e==="transparent"?[255,255,255,0]:gt.sourceFromHex(e)||gt.sourceFromRgb(e)||gt.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,s]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(s,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,s]=J_(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(s,"%)")}toHsla(){const[e,t,s,i]=J_(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(s,"%,").concat(i,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,s,i]=this.getSource();return"".concat(Sd(e)).concat(Sd(t)).concat(Sd(s)).concat(Sd(Math.round(255*i)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(tC(this.getSource())),this}toBlackWhite(e){const[t,,,s]=tC(this.getSource()),i=t<(e||127)?0:255;return this.setSource([i,i,i,s]),this}overlayWith(e){e instanceof gt||(e=new gt(e));const t=this.getSource(),s=e.getSource(),[i,a,l]=t.map((c,d)=>Math.round(.5*c+.5*s[d]));return this.setSource([i,a,l,t[3]]),this}static fromRgb(e){return gt.fromRgba(e)}static fromRgba(e){return new gt(gt.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[s,i,a]=t.slice(1,4).map(l=>{const c=parseFloat(l);return l.endsWith("%")?Math.round(2.55*c):c});return[s,i,a,eC(t[4])]}}static fromHsl(e){return gt.fromHsla(e)}static fromHsla(e){return new gt(gt.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const s=(gt.parseAngletoDegrees(t[1])%360+360)%360/360,i=parseFloat(t[2])/100,a=parseFloat(t[3])/100;let l,c,d;if(i===0)l=c=d=a;else{const h=a<=.5?a*(i+1):a+i-a*i,g=2*a-h;l=em(g,h,s+1/3),c=em(g,h,s),d=em(g,h,s-1/3)}return[Math.round(255*l),Math.round(255*c),Math.round(255*d),eC(t[4])]}static fromHex(e){return new gt(gt.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let s;s=t.length<=4?t.split("").map(d=>d+d):t.match(/.{2}/g);const[i,a,l,c=255]=s.map(d=>parseInt(d,16));return[i,a,l,c/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),s=parseFloat(t);return t.includes("rad")?Li(s):t.includes("turn")?360*s:s}}const To=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h0;const t=/\D{0,2}$/.exec(n),s=parseFloat(n),i=at.DPI;switch(t?.[0]){case"mm":return s*i/25.4;case"cm":return s*i/2.54;case"in":return s*i;case"pt":return s*i/72;case"pc":return s*i/72*12;case"em":return s*e;default:return s}},TU=n=>{const[e,t]=n.trim().split(" "),[s,i]=(a=e)&&a!==zs?[a.slice(1,4),a.slice(5,8)]:a===zs?[a,a]:["Mid","Mid"];var a;return{meetOrSlice:t||"meet",alignX:s,alignY:i}},Nc=function(n,e){let t,s,i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const a=new gt(e),l=a.getAlpha();t=a.toRgb(),l!==1&&(s=l.toString())}else t="none";return i?"".concat(n,": ").concat(t,"; ").concat(s?"".concat(n,"-opacity: ").concat(s,"; "):""):"".concat(n,'="').concat(t,'" ').concat(s?"".concat(n,'-opacity="').concat(s,'" '):"")};class tj{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",s=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):zs,a=this.strokeDashOffset?this.strokeDashOffset:"0",l=this.strokeLineCap?this.strokeLineCap:"butt",c=this.strokeLineJoin?this.strokeLineJoin:"miter",d=this.strokeMiterLimit?this.strokeMiterLimit:"4",h=this.opacity!==void 0?this.opacity:"1",g=this.visible?"":" visibility: hidden;",m=e?"":this.getSvgFilter(),y=Nc(Qt,this.fill);return[Nc(Is,this.stroke),"stroke-width: ",s,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",l,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",c,"; ","stroke-miterlimit: ",d,"; ",y,"fill-rule: ",t,"; ","opacity: ",h,";",m,g].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const s=e?this.calcTransformMatrix():this.calcOwnMatrix(),i='transform="'.concat(Dc(s));return"".concat(i).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:s=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[this.getSvgTransform(!0,s),this.getSvgCommons()].join(""),a=e.indexOf("COMMON_PARTS");return e[a]=i,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:s,withShadow:i,additionalTransform:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l=t?"":'style="'.concat(this.getSvgStyles(),'" '),c=i?'style="'.concat(this.getSvgFilter(),'" '):"",d=this.clipPath,h=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",g=d&&d.absolutePositioned,m=this.stroke,y=this.fill,b=this.shadow,S=[],_=e.indexOf("COMMON_PARTS");let T;d&&(d.clipPathId="CLIPPATH_".concat(mr()),T='<clipPath id="'.concat(d.clipPathId,`" >
`).concat(d.toClipPathSVG(s),`</clipPath>
`)),g&&S.push("<g ",c,this.getSvgCommons(),` >
`),S.push("<g ",this.getSvgTransform(!1),g?"":c+this.getSvgCommons(),` >
`);const C=[l,h,t?"":this.addPaintOrder()," ",a?'transform="'.concat(a,'" '):""].join("");return e[_]=C,gn(y)&&S.push(y.toSVG(this)),gn(m)&&S.push(m.toSVG(this)),b&&S.push(b.toSVG(this)),d&&S.push(T),S.push(e.join("")),S.push(`</g>
`),g&&S.push(`</g>
`),s?s(S.join("")):S.join("")}addPaintOrder(){return this.paintFirst!==Qt?' paint-order="'.concat(this.paintFirst,'" '):""}}function Jh(n){return new RegExp("^("+n.join("|")+")\\b","i")}const aa="textDecorationThickness",sj=["fontSize","fontWeight","fontFamily","fontStyle"],nj=["underline","overline","linethrough"],ij=[...sj,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],rj=[...ij,...nj,"textBackgroundColor","direction",aa],EU=[...sj,...nj,Is,"strokeWidth",Qt,"deltaY","textBackgroundColor",aa],jU={_reNewline:f0,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:dt,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:dt,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[aa]:66.667},Fn="justify",Ph="justify-left",yc="justify-right",xc="justify-center";var sC,nC,iC;const On=String.raw(sC||(sC=Wn(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),tm=String.raw(nC||(nC=Wn(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),kU=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+On+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+On+"))?\\s+(.*)"),MU={cx:dt,x:dt,r:"radius",cy:Us,y:Us,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":aa},sm="font-size",nm="clip-path";Jh(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);Jh(["symbol","image","marker","pattern","view","svg"]);const rC=Jh(["symbol","g","a","svg","clipPath","defs"]);new RegExp(String.raw(iC||(iC=Wn(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),On,tm,On,tm,On,tm,On));const OU=new re(1,0),aj=new re,oj=(n,e)=>n.rotate(e),ev=(n,e)=>new re(e).subtract(n),tv=n=>n.distanceFrom(aj),sv=(n,e)=>Math.atan2(bc(n,e),AU(n,e)),LU=n=>sv(OU,n),w0=n=>n.eq(aj)?n:n.scalarDivide(tv(n)),lj=function(n){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return w0(new re(-n.y,n.x).scalarMultiply(e?1:-1))},bc=(n,e)=>n.x*e.y-n.y*e.x,AU=(n,e)=>n.x*e.x+n.y*e.y,aC=(n,e,t)=>{if(n.eq(e)||n.eq(t))return!0;const s=bc(e,t),i=bc(e,n),a=bc(t,n);return s>=0?i>=0&&a<=0:!(i<=0&&a>=0)},oC="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",lC=new RegExp("(?:\\s|^)"+oC+oC+"("+On+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class _i{constructor(e){const t=typeof e=="string"?_i.parseShadow(e):e;Object.assign(this,_i.ownDefaults,t),this.id=mr()}static parseShadow(e){const t=e.trim(),[,s=0,i=0,a=0]=(lC.exec(t)||[]).map(l=>parseFloat(l)||0);return{color:(t.replace(lC,"")||"rgb(0,0,0)").trim(),offsetX:s,offsetY:i,blur:a}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=oj(new re(this.offsetX,this.offsetY),Ht(-e.angle)),s=new gt(this.color);let i=40,a=40;return e.width&&e.height&&(i=100*wt((Math.abs(t.x)+this.blur)/e.width,at.NUM_FRACTION_DIGITS)+20,a=100*wt((Math.abs(t.y)+this.blur)/e.height,at.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(a,'%" height="').concat(100+2*a,'%" x="-').concat(i,'%" width="').concat(100+2*i,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(wt(this.blur?this.blur/2:0,at.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(wt(t.x,at.NUM_FRACTION_DIGITS),'" dy="').concat(wt(t.y,at.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(s.toRgb(),'" flood-opacity="').concat(s.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=_i.ownDefaults;return this.includeDefaultValues?e:y0(e,(s,i)=>s!==t[i])}static async fromObject(e){return new this(e)}}G(_i,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),G(_i,"type","shadow"),je.setClass(_i,"shadow");const Oo=(n,e,t)=>Math.max(n,Math.min(e,t)),DU=[Us,dt,Fs,mn,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Fo,Vo],Ai=[Qt,Is,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],NU={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:dt,originY:Us,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Qt,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},PU=(n,e,t,s)=>-t*Math.cos(n/s*qc)+t+e,RU=()=>!1;class S0{constructor(e){let{startValue:t,byValue:s,duration:i=500,delay:a=0,easing:l=PU,onStart:c=th,onChange:d=th,onComplete:h=th,abort:g=RU,target:m}=e;G(this,"_state","pending"),G(this,"durationProgress",0),G(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=i,this.delay=a,this.easing=l,this._onStart=c,this._onChange=d,this._onComplete=h,this._abort=g,this.target=m,this.startValue=t,this.byValue=s,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>nh(e),this.delay):nh(e)}tick(e){const t=(e||+new Date)-this.startTime,s=Math.min(t,this.duration);this.durationProgress=s/this.duration;const{value:i,valueProgress:a}=this.calculate(s);this.value=Object.freeze(i),this.valueProgress=a,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),nh(this.tick)))}register(){Lh.push(this)}unregister(){Lh.remove(this)}abort(){this._state="aborted",this.unregister()}}const BU=["startValue","endValue"];class UU extends S0{constructor(e){let{startValue:t=0,endValue:s=100}=e;super(Y(Y({},jt(e,BU)),{},{startValue:t,byValue:s-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const zU=["startValue","endValue"];class IU extends S0{constructor(e){let{startValue:t=[0],endValue:s=[100]}=e;super(Y(Y({},jt(e,zU)),{},{startValue:t,byValue:s.map((i,a)=>i-t[a])}))}calculate(e){const t=this.startValue.map((s,i)=>this.easing(e,s,this.byValue[i],this.duration,i));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const FU=["startValue","endValue","easing","onChange","onComplete","abort"],VU=(n,e,t,s)=>e+t*(1-Math.cos(n/s*qc)),im=n=>n&&((e,t,s)=>n(new gt(e).toRgba(),t,s));class HU extends S0{constructor(e){let{startValue:t,endValue:s,easing:i=VU,onChange:a,onComplete:l,abort:c}=e,d=jt(e,FU);const h=new gt(t).getSource(),g=new gt(s).getSource();super(Y(Y({},d),{},{startValue:h,byValue:g.map((m,y)=>m-h[y]),easing:i,onChange:im(a),onComplete:im(l),abort:im(c)}))}calculate(e){const[t,s,i,a]=this.startValue.map((c,d)=>this.easing(e,c,this.byValue[d],this.duration,d)),l=[...[t,s,i].map(Math.round),Oo(0,a,1)];return{value:l,valueProgress:l.map((c,d)=>this.byValue[d]!==0?Math.abs((c-this.startValue[d])/this.byValue[d]):0).find(c=>c!==0)||0}}}function cj(n){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(n)?new IU(n):new UU(n);return e.start(),e}function GU(n){const e=new HU(n);return e.start(),e}class Ot{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.points=this.points.concat(t.filter(i=>!this.includes(i))),this}static isPointContained(e,t,s){let i=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(s))return e.eq(t);if(t.x===s.x)return e.x===t.x&&(i||e.y>=Math.min(t.y,s.y)&&e.y<=Math.max(t.y,s.y));if(t.y===s.y)return e.y===t.y&&(i||e.x>=Math.min(t.x,s.x)&&e.x<=Math.max(t.x,s.x));{const a=ev(t,s),l=ev(t,e).divide(a);return i?Math.abs(l.x)===Math.abs(l.y):l.x===l.y&&l.x>=0&&l.x<=1}}static isPointInPolygon(e,t){const s=new re(e).setX(Math.min(e.x-1,...t.map(a=>a.x)));let i=0;for(let a=0;a<t.length;a++){const l=this.intersectSegmentSegment(t[a],t[(a+1)%t.length],e,s);if(l.includes(e))return!0;i+=+(l.status==="Intersection")}return i%2==1}static intersectLineLine(e,t,s,i){let a=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],l=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const c=t.x-e.x,d=t.y-e.y,h=i.x-s.x,g=i.y-s.y,m=e.x-s.x,y=e.y-s.y,b=h*y-g*m,S=c*y-d*m,_=g*c-h*d;if(_!==0){const T=b/_,C=S/_;return(a||0<=T&&T<=1)&&(l||0<=C&&C<=1)?new Ot("Intersection").append(new re(e.x+T*c,e.y+T*d)):new Ot}if(b===0||S===0){const T=a||l||Ot.isPointContained(e,s,i)||Ot.isPointContained(t,s,i)||Ot.isPointContained(s,e,t)||Ot.isPointContained(i,e,t);return new Ot(T?"Coincident":void 0)}return new Ot("Parallel")}static intersectSegmentLine(e,t,s,i){return Ot.intersectLineLine(e,t,s,i,!1,!0)}static intersectSegmentSegment(e,t,s,i){return Ot.intersectLineLine(e,t,s,i,!1,!1)}static intersectLinePolygon(e,t,s){let i=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const a=new Ot,l=s.length;for(let c,d,h,g=0;g<l;g++){if(c=s[g],d=s[(g+1)%l],h=Ot.intersectLineLine(e,t,c,d,i,!1),h.status==="Coincident")return h;a.append(...h.points)}return a.points.length>0&&(a.status="Intersection"),a}static intersectSegmentPolygon(e,t,s){return Ot.intersectLinePolygon(e,t,s,!1)}static intersectPolygonPolygon(e,t){const s=new Ot,i=e.length,a=[];for(let l=0;l<i;l++){const c=e[l],d=e[(l+1)%i],h=Ot.intersectSegmentPolygon(c,d,t);h.status==="Coincident"?(a.push(h),s.append(c,d)):s.append(...h.points)}return a.length>0&&a.length===e.length?new Ot("Coincident"):(s.points.length>0&&(s.status="Intersection"),s)}static intersectPolygonRectangle(e,t,s){const i=t.min(s),a=t.max(s),l=new re(a.x,i.y),c=new re(i.x,a.y);return Ot.intersectPolygonPolygon(e,[i,l,a,c])}}class $U extends zE{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?Rs(e,this.group.calcTransformMatrix()):e}setXY(e,t,s){this.group&&(e=Rs(e,Mn(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,s)}getRelativeXY(){return new re(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,s)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:s,bl:i}=this.aCoords||(this.aCoords=this.calcACoords()),a=[e,t,s,i];if(this.group){const l=this.group.calcTransformMatrix();return a.map(c=>Rs(c,l))}return a}intersectsWithRect(e,t){return Ot.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=Ot.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:s,top:i,width:a,height:l}=this.getBoundingRect();return s>=e.x&&s+a<=t.x&&i>=e.y&&i+l<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Ot.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(s=>s.x<=t.x&&s.x>=e.x&&s.y<=t.y&&s.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(s=>(s.x>=t.x||s.x<=e.x)&&(s.y>=t.y||s.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return Si(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(Fs,e),this._set(mn,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?Li(VE(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||js.concat()}calcACoords(){const e=Ho({angle:this.angle}),{x:t,y:s}=this.getRelativeCenterPoint(),i=Wc(t,s),a=ps(i,e),l=this._getTransformedDimensions(),c=l.x/2,d=l.y/2;return{tl:Rs({x:-c,y:-d},a),tr:Rs({x:c,y:-d},a),bl:Rs({x:-c,y:d},a),br:Rs({x:c,y:d},a)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,qt(this.originX),qt(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const s=this.transformMatrixKey(e),i=this.matrixCache;return i&&i.key.every((a,l)=>a===s[l])?i.value:(this.group&&(t=ps(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:s,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const s=this.getRelativeCenterPoint(),i={angle:this.angle,translateX:s.x,translateY:s.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},a=gU(i);return this.ownMatrixCache={key:e,value:a},a}_getNonTransformedDimensions(){return new re(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Y({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),s=t.strokeWidth;let i=s,a=0;this.strokeUniform&&(i=0,a=s);const l=t.width+i,c=t.height+i;let d;return d=t.skewX===0&&t.skewY===0?new re(l*t.scaleX,c*t.scaleY):x0(l,c,Kh(t)),d.scalarAdd(a)}translateToGivenOrigin(e,t,s,i,a){let l=e.x,c=e.y;const d=qt(i)-qt(t),h=qt(a)-qt(s);if(d||h){const g=this._getTransformedDimensions();l+=d*g.x,c+=h*g.y}return new re(l,c)}translateToCenterPoint(e,t,s){if(t===We&&s===We)return e;const i=this.translateToGivenOrigin(e,t,s,We,We);return this.angle?i.rotate(Ht(this.angle),e):i}translateToOriginPoint(e,t,s){const i=this.translateToGivenOrigin(e,We,We,t,s);return this.angle?i.rotate(Ht(this.angle),e):i}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?Rs(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new re(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,s){const i=this.translateToCenterPoint(e,t,s),a=this.translateToOriginPoint(i,this.originX,this.originY);this.set({left:a.x,top:a.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),dt,Us)}}const YU=["type"],qU=["extraParam"];let gi=class rh extends $U{static getDefaults(){return rh.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){pr("warn","Setting type has no effect",e)}constructor(e){super(),G(this,"_cacheContext",null),Object.assign(this,rh.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=Oi(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,s=e.height,i=at.maxCacheSideLimit,a=at.minCacheSideLimit;if(t<=i&&s<=i&&t*s<=at.perfLimitSizeTotal)return t<a&&(e.width=a),s<a&&(e.height=a),e;const l=t/s,[c,d]=vc.limitDimsByArea(l),h=Oo(a,c,i),g=Oo(a,d,i);return t>h&&(e.zoomX/=t/h,e.width=h,e.capped=!0),s>g&&(e.zoomY/=s/g,e.height=g,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),s=t.x*e.x/this.scaleX,i=t.y*e.y/this.scaleY;return{width:Math.ceil(s+2),height:Math.ceil(i+2),zoomX:e.x,zoomY:e.y,x:s,y:i}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:s,height:i,zoomX:a,zoomY:l,x:c,y:d}=this._limitCacheSize(this._getCacheCanvasDimensions()),h=s!==e.width||i!==e.height,g=this.zoomX!==a||this.zoomY!==l;if(!e||!t)return!1;if(h||g){s!==e.width||i!==e.height?(e.width=s,e.height=i):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const m=c/2,y=d/2;return this.cacheTranslationX=Math.round(e.width/2-m)+m,this.cacheTranslationY=Math.round(e.height/2-y)+y,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(a,l),this.zoomX=a,this.zoomY=l,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,s=this.calcTransformMatrix(!t);e.transform(s[0],s[1],s[2],s[3],s[4],s[5])}getObjectScaling(){if(!this.group)return new re(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Ah(this.calcTransformMatrix());return new re(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),s=this.getCanvasRetinaScaling();return e.scalarMultiply(t*s)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==Fs&&e!==mn||(t=this._constrainScale(t)),e===Fs&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof _i||(t=new _i(t));const s=this[e]!==t;return this[e]=t,s&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||s&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:s,cacheTranslationX:i,cacheTranslationY:a}=this,{width:l,height:c}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:s,cacheTranslationX:i,cacheTranslationY:a,width:l,height:c,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Is&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,s){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(s,0,0),e.restore()}drawObject(e,t,s){const i=this.fill,a=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,s),this.fill=i,this.stroke=a}createClipPathLayer(e,t){const s=vn(t),i=s.getContext("2d");if(i.translate(t.cacheTranslationX,t.cacheTranslationY),i.scale(t.zoomX,t.zoomY),e._cacheCanvas=s,t.parentClipPaths.forEach(a=>{a.transform(i)}),t.parentClipPaths.push(e),e.absolutePositioned){const a=Mn(this.calcTransformMatrix());i.transform(a[0],a[1],a[2],a[3],a[4],a[5])}return e.transform(i),e.drawObject(i,!0,t),s}_drawClipPath(e,t,s){if(!t)return;t._transformDone=!0;const i=this.createClipPathLayer(t,s);this.drawClipPathOnCache(e,t,i)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,s=this._cacheContext;return!(!t||!s||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&s&&!e&&(s.save(),s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,t.width,t.height),s.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const s=t.stroke;s&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,gn(s)?s.gradientUnits==="percentage"||s.gradientTransform||s.patternTransform?this._applyPatternForTransformedGradient(e,s):(e.strokeStyle=s.toLive(e),this._applyPatternGradientTransform(e,s)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:s}=t;s&&(gn(s)?(e.fillStyle=s.toLive(e),this._applyPatternGradientTransform(e,s)):e.fillStyle=s)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,s=this.canvas,i=this.getCanvasRetinaScaling(),[a,,,l]=s?.viewportTransform||js,c=a*i,d=l*i,h=t.nonScaling?new re(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*at.browserShadowBlurConstant*(c+d)*(h.x+h.y)/4,e.shadowOffsetX=t.offsetX*c*h.x,e.shadowOffsetY=t.offsetY*d*h.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!gn(t))return{offsetX:0,offsetY:0};const s=t.gradientTransform||t.patternTransform,i=-this.width/2+t.offsetX||0,a=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,i,a):e.transform(1,0,0,1,i,a),s&&e.transform(s[0],s[1],s[2],s[3],s[4],s[5]),{offsetX:i,offsetY:a}}_renderPaintInOrder(e){this.paintFirst===Is?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var s;const i=this._limitCacheSize(this._getCacheCanvasDimensions()),a=this.getCanvasRetinaScaling(),l=i.x/this.scaleX/a,c=i.y/this.scaleY/a,d=vn({width:Math.ceil(l),height:Math.ceil(c)}),h=d.getContext("2d");h&&(h.beginPath(),h.moveTo(0,0),h.lineTo(l,0),h.lineTo(l,c),h.lineTo(0,c),h.closePath(),h.translate(l/2,c/2),h.scale(i.zoomX/this.scaleX/a,i.zoomY/this.scaleY/a),this._applyPatternGradientTransform(h,t),h.fillStyle=t.toLive(e),h.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(a*this.scaleX/i.zoomX,a*this.scaleY/i.zoomY),e.strokeStyle=(s=h.createPattern(d,"no-repeat"))!==null&&s!==void 0?s:"")}_findCenterFromElement(){return new re(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(je.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=KE(this),s=this.group,i=this.shadow,a=Math.abs,l=e.enableRetinaScaling?NE():1,c=(e.multiplier||1)*l,d=e.canvasProvider||(M=>new Xc(M,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&bU(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&SU(this,this.getViewportTransform()),this.setCoords();const h=Oi(),g=this.getBoundingRect(),m=this.shadow,y=new re;if(m){const M=m.blur,O=m.nonScaling?new re(1,1):this.getObjectScaling();y.x=2*Math.round(a(m.offsetX)+M)*a(O.x),y.y=2*Math.round(a(m.offsetY)+M)*a(O.y)}const b=g.width+y.x,S=g.height+y.y;h.width=Math.ceil(b),h.height=Math.ceil(S);const _=d(h);e.format==="jpeg"&&(_.backgroundColor="#fff"),this.setPositionByOrigin(new re(_.width/2,_.height/2),We,We);const T=this.canvas;_._objects=[this],this.set("canvas",_),this.setCoords();const C=_.toCanvasElement(c||1,e);return this.set("canvas",T),this.shadow=i,s&&(this.group=s),this.set(t),this.setCoords(),_._objects=[],_.destroy(),C}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return IE(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return FE(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:s,originY:i}=this;if(t){const{x:a,y:l}=this.getRelativeCenterPoint();this.originX=We,this.originY=We,this.left=a,this.top=l}if(this.set("angle",e),t){const{x:a,y:l}=this.translateToOriginPoint(this.getRelativeCenterPoint(),s,i);this.left=a,this.top=l,this.originX=s,this.originY=i}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Lh.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&qn().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((s,i)=>{let[a,l]=i;return s[a]=this._animate(a,l,t),s},{})}_animate(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=e.split("."),a=this.constructor.colorProperties.includes(i[i.length-1]),{abort:l,startValue:c,onChange:d,onComplete:h}=s,g=Y(Y({},s),{},{target:this,startValue:c??i.reduce((m,y)=>m[y],this),endValue:t,abort:l?.bind(this),onChange:(m,y,b)=>{i.reduce((S,_,T)=>(T===i.length-1&&(S[_]=m),S[_]),this),d&&d(m,y,b)},onComplete:(m,y,b)=>{this.setCoords(),h&&h(m,y,b)}});return a?GU(g):cj(g)}isDescendantOf(e){const{parent:t,group:s}=this;return t===e||s===e||!!t&&t.isDescendantOf(e)||!!s&&s!==t&&s.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),s=e.getAncestors();if(t.length===0&&s.length>0&&this===s[s.length-1])return{fork:[],otherFork:[e,...s.slice(0,s.length-1)],common:[this]};for(let i,a=0;a<t.length;a++){if(i=t[a],i===e)return{fork:[this,...t.slice(0,a)],otherFork:[],common:t.slice(a)};for(let l=0;l<s.length;l++){if(this===s[l])return{fork:[],otherFork:[e,...s.slice(0,l)],common:[this,...t]};if(i===s[l])return{fork:[this,...t.slice(0,a)],otherFork:[e,...s.slice(0,l)],common:t.slice(a)}}}return{fork:[this,...t],otherFork:[e,...s],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const s=t.common[0]||this.canvas;if(!s)return;const i=t.fork.pop(),a=t.otherFork.pop(),l=s._objects.indexOf(i),c=s._objects.indexOf(a);return l>-1&&l>c}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(rh.customProperties,this.constructor.customProperties||[]);let t;const s=at.NUM_FRACTION_DIGITS,{clipPath:i,fill:a,stroke:l,shadow:c,strokeDashArray:d,left:h,top:g,originX:m,originY:y,width:b,height:S,strokeWidth:_,strokeLineCap:T,strokeDashOffset:C,strokeLineJoin:M,strokeUniform:O,strokeMiterLimit:L,scaleX:j,scaleY:D,angle:k,flipX:B,flipY:P,opacity:z,visible:I,backgroundColor:F,fillRule:ee,paintFirst:X,globalCompositeOperation:ae,skewX:R,skewY:V}=this;i&&!i.excludeFromExport&&(t=i.toObject(e.concat("inverted","absolutePositioned")));const K=N=>wt(N,s),te=Y(Y({},Go(this,e)),{},{type:this.constructor.type,version:Km,originX:m,originY:y,left:K(h),top:K(g),width:K(b),height:K(S),fill:q_(a)?a.toObject():a,stroke:q_(l)?l.toObject():l,strokeWidth:K(_),strokeDashArray:d&&d.concat(),strokeLineCap:T,strokeDashOffset:C,strokeLineJoin:M,strokeUniform:O,strokeMiterLimit:K(L),scaleX:K(j),scaleY:K(D),angle:K(k),flipX:B,flipY:P,opacity:K(z),shadow:c&&c.toObject(),visible:I,backgroundColor:F,fillRule:ee,paintFirst:X,globalCompositeOperation:ae,skewX:K(R),skewY:K(V)},t?{clipPath:t}:null);return this.includeDefaultValues?te:this._removeDefaultValues(te)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),s=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return y0(e,(i,a)=>{if(a===dt||a===Us||a==="type")return!0;const l=s[a];return i!==l&&!(Array.isArray(i)&&Array.isArray(l)&&i.length===0&&l.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=jt(e,YU),s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:i}=s,a=jt(s,qU);return Zh(t,a).then(l=>i?(delete l[i],new this(t[i],l)):new this(l))}static fromObject(e,t){return this._fromObject(e,t)}};G(gi,"stateProperties",DU),G(gi,"cacheProperties",Ai),G(gi,"ownDefaults",NU),G(gi,"type","FabricObject"),G(gi,"colorProperties",[Qt,Is,"backgroundColor"]),G(gi,"customProperties",[]),je.setClass(gi),je.setClass(gi,"object");const $o=(n,e,t)=>(s,i,a,l)=>{const c=e(s,i,a,l);return c&&ZE(n,Y(Y({},JE(s,i,a,l)),t)),c};function Yo(n){return(e,t,s,i)=>{const{target:a,originX:l,originY:c}=t,d=a.getRelativeCenterPoint(),h=a.translateToOriginPoint(d,l,c),g=n(e,t,s,i);return a.setPositionByOrigin(h,t.originX,t.originY),g}}const cC=$o(Lc,Yo((n,e,t,s)=>{const i=b0(e,e.originX,e.originY,t,s);if(qt(e.originX)===qt(We)||qt(e.originX)===qt(Vt)&&i.x<0||qt(e.originX)===qt(dt)&&i.x>0){const{target:a}=e,l=a.strokeWidth/(a.strokeUniform?a.scaleX:1),c=QE(e)?2:1,d=a.width,h=Math.abs(i.x*c/a.scaleX)-l;return a.set("width",Math.max(h,1)),d!==a.width}return!1}));function WU(n,e,t,s,i){s=s||{};const a=this.sizeX||s.cornerSize||i.cornerSize,l=this.sizeY||s.cornerSize||i.cornerSize,c=s.transparentCorners!==void 0?s.transparentCorners:i.transparentCorners,d=c?Is:Qt,h=!c&&(s.cornerStrokeColor||i.cornerStrokeColor);let g,m=e,y=t;n.save(),n.fillStyle=s.cornerColor||i.cornerColor||"",n.strokeStyle=s.cornerStrokeColor||i.cornerStrokeColor||"",a>l?(g=a,n.scale(1,l/a),y=t*a/l):l>a?(g=l,n.scale(a/l,1),m=e*l/a):g=a,n.beginPath(),n.arc(m,y,g/2,0,kh,!1),n[d](),h&&n.stroke(),n.restore()}function XU(n,e,t,s,i){s=s||{};const a=this.sizeX||s.cornerSize||i.cornerSize,l=this.sizeY||s.cornerSize||i.cornerSize,c=s.transparentCorners!==void 0?s.transparentCorners:i.transparentCorners,d=c?Is:Qt,h=!c&&(s.cornerStrokeColor||i.cornerStrokeColor),g=a/2,m=l/2;n.save(),n.fillStyle=s.cornerColor||i.cornerColor||"",n.strokeStyle=s.cornerStrokeColor||i.cornerStrokeColor||"",n.translate(e,t);const y=i.getTotalAngle();n.rotate(Ht(y)),n["".concat(d,"Rect")](-g,-m,a,l),h&&n.strokeRect(-g,-m,a,l),n.restore()}class Tn{constructor(e){G(this,"visible",!0),G(this,"actionName",Xh),G(this,"angle",0),G(this,"x",0),G(this,"y",0),G(this,"offsetX",0),G(this,"offsetY",0),G(this,"sizeX",0),G(this,"sizeY",0),G(this,"touchSizeX",0),G(this,"touchSizeY",0),G(this,"cursorStyle","crosshair"),G(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,s,i){var a;let{tl:l,tr:c,br:d,bl:h}=i;return((a=t.canvas)===null||a===void 0?void 0:a.getActiveObject())===t&&t.isControlVisible(e)&&Ot.isPointInPolygon(s,[l,c,d,h])}getActionHandler(e,t,s){return this.actionHandler}getMouseDownHandler(e,t,s){return this.mouseDownHandler}getMouseUpHandler(e,t,s){return this.mouseUpHandler}cursorStyleHandler(e,t,s){return t.cursorStyle}getActionName(e,t,s){return t.actionName}getVisibility(e,t){var s,i;return(s=(i=e._controlsVisibility)===null||i===void 0?void 0:i[t])!==null&&s!==void 0?s:this.visible}setVisibility(e,t,s){this.visible=e}positionHandler(e,t,s,i){return new re(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,s,i,a,l){const c=m0([Wc(s,i),Ho({angle:e}),v0((a?this.touchSizeX:this.sizeX)||t,(a?this.touchSizeY:this.sizeY)||t)]);return{tl:new re(-.5,-.5).transform(c),tr:new re(.5,-.5).transform(c),br:new re(.5,.5).transform(c),bl:new re(-.5,.5).transform(c)}}render(e,t,s,i,a){((i=i||{}).cornerStyle||a.cornerStyle)==="circle"?WU.call(this,e,t,s,i,a):XU.call(this,e,t,s,i,a)}}const KU=(n,e,t)=>t.lockRotation?Nh:e.cursorStyle,ZU=$o(RE,Yo((n,e,t,s)=>{let{target:i,ex:a,ey:l,theta:c,originX:d,originY:h}=e;const g=i.translateToOriginPoint(i.getRelativeCenterPoint(),d,h);if(Ln(i,"lockRotation"))return!1;const m=Math.atan2(l-g.y,a-g.x),y=Math.atan2(s-g.y,t-g.x);let b=Li(y-m+c);if(i.snapAngle&&i.snapAngle>0){const _=i.snapAngle,T=i.snapThreshold||_,C=Math.ceil(b/_)*_,M=Math.floor(b/_)*_;Math.abs(b-M)<T?b=M:Math.abs(b-C)<T&&(b=C)}b<0&&(b=360+b),b%=360;const S=i.angle!==b;return i.angle=b,S}));function uj(n,e){const t=e.canvas,s=n[t.uniScaleKey];return t.uniformScaling&&!s||!t.uniformScaling&&s}function dj(n,e,t){const s=Ln(n,"lockScalingX"),i=Ln(n,"lockScalingY");if(s&&i||!e&&(s||i)&&t||s&&e==="x"||i&&e==="y")return!0;const{width:a,height:l,strokeWidth:c}=n;return a===0&&c===0&&e!=="y"||l===0&&c===0&&e!=="x"}const QU=["e","se","s","sw","w","nw","n","ne","e"],ic=(n,e,t)=>{const s=uj(n,t);if(dj(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",s))return Nh;const i=ej(t,e);return"".concat(QU[i],"-resize")};function _0(n,e,t,s){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const a=e.target,l=i.by,c=uj(n,a);let d,h,g,m,y,b;if(dj(a,l,c))return!1;if(e.gestureScale)h=e.scaleX*e.gestureScale,g=e.scaleY*e.gestureScale;else{if(d=b0(e,e.originX,e.originY,t,s),y=l!=="y"?Math.sign(d.x||e.signX||1):1,b=l!=="x"?Math.sign(d.y||e.signY||1):1,e.signX||(e.signX=y),e.signY||(e.signY=b),Ln(a,"lockScalingFlip")&&(e.signX!==y||e.signY!==b))return!1;if(m=a._getTransformedDimensions(),c&&!l){const T=Math.abs(d.x)+Math.abs(d.y),{original:C}=e,M=T/(Math.abs(m.x*C.scaleX/a.scaleX)+Math.abs(m.y*C.scaleY/a.scaleY));h=C.scaleX*M,g=C.scaleY*M}else h=Math.abs(d.x*a.scaleX/m.x),g=Math.abs(d.y*a.scaleY/m.y);QE(e)&&(h*=2,g*=2),e.signX!==y&&l!=="y"&&(e.originX=Z_(e.originX),h*=-1,e.signX=y),e.signY!==b&&l!=="x"&&(e.originY=Z_(e.originY),g*=-1,e.signY=b)}const S=a.scaleX,_=a.scaleY;return l?(l==="x"&&a.set(Fs,h),l==="y"&&a.set(mn,g)):(!Ln(a,"lockScalingX")&&a.set(Fs,h),!Ln(a,"lockScalingY")&&a.set(mn,g)),S!==a.scaleX||_!==a.scaleY}const _d=$o(Wh,Yo((n,e,t,s)=>_0(n,e,t,s))),JU=$o(Wh,Yo((n,e,t,s)=>_0(n,e,t,s,{by:"x"}))),ez=$o(Wh,Yo((n,e,t,s)=>_0(n,e,t,s,{by:"y"}))),tz=["target","ex","ey","skewingSide"],rm={x:{counterAxis:"y",scale:Fs,skew:Fo,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:mn,skew:Vo,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},sz=["ns","nesw","ew","nwse"],nz=(n,e,t)=>{if(e.x!==0&&Ln(t,"lockSkewingY")||e.y!==0&&Ln(t,"lockSkewingX"))return Nh;const s=ej(t,e)%4;return"".concat(sz[s],"-resize")};function hj(n,e,t,s,i){const{target:a}=t,{counterAxis:l,origin:c,lockSkewing:d,skew:h,flip:g}=rm[n];if(Ln(a,d))return!1;const{origin:m,flip:y}=rm[l],b=qt(t[m])*(a[y]?-1:1),S=-Math.sign(b)*(a[g]?-1:1),_=.5*-((a[h]===0&&b0(t,We,We,s,i)[n]>0||a[h]>0?1:-1)*S)+.5;return $o(BE,Yo((C,M,O,L)=>function(j,D,k){let{target:B,ex:P,ey:z,skewingSide:I}=D,F=jt(D,tz);const{skew:ee}=rm[j],X=k.subtract(new re(P,z)).divide(new re(B.scaleX,B.scaleY))[j],ae=B[ee],R=F[ee],V=Math.tan(Ht(R)),K=j==="y"?B._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:B._getTransformedDimensions({scaleX:1,scaleY:1}).y,te=2*X*I/Math.max(K,1)+V,N=Li(Math.atan(te));B.set(ee,N);const q=ae!==B[ee];if(q&&j==="y"){const{skewX:de,scaleX:ne}=B,ve=B._getTransformedDimensions({skewY:ae}),Q=B._getTransformedDimensions(),Se=de!==0?ve.x/Q.x:1;Se!==1&&B.set(Fs,Se*ne)}return q}(n,M,new re(O,L))))(e,Y(Y({},t),{},{[c]:_,skewingSide:S}),s,i)}const iz=(n,e,t,s)=>hj("x",n,e,t,s),rz=(n,e,t,s)=>hj("y",n,e,t,s);function ef(n,e){return n[e.canvas.altActionKey]}const Cd=(n,e,t)=>{const s=ef(n,t);return e.x===0?s?Fo:mn:e.y===0?s?Vo:Fs:""},xo=(n,e,t)=>ef(n,t)?nz(0,e,t):ic(n,e,t),uC=(n,e,t,s)=>ef(n,e.target)?rz(n,e,t,s):JU(n,e,t,s),dC=(n,e,t,s)=>ef(n,e.target)?iz(n,e,t,s):ez(n,e,t,s),fj=()=>({ml:new Tn({x:-.5,y:0,cursorStyleHandler:xo,actionHandler:uC,getActionName:Cd}),mr:new Tn({x:.5,y:0,cursorStyleHandler:xo,actionHandler:uC,getActionName:Cd}),mb:new Tn({x:0,y:.5,cursorStyleHandler:xo,actionHandler:dC,getActionName:Cd}),mt:new Tn({x:0,y:-.5,cursorStyleHandler:xo,actionHandler:dC,getActionName:Cd}),tl:new Tn({x:-.5,y:-.5,cursorStyleHandler:ic,actionHandler:_d}),tr:new Tn({x:.5,y:-.5,cursorStyleHandler:ic,actionHandler:_d}),bl:new Tn({x:-.5,y:.5,cursorStyleHandler:ic,actionHandler:_d}),br:new Tn({x:.5,y:.5,cursorStyleHandler:ic,actionHandler:_d}),mtr:new Tn({x:0,y:-.5,actionHandler:ZU,cursorStyleHandler:KU,offsetY:-40,withConnection:!0,actionName:g0})}),az=()=>({mr:new Tn({x:.5,y:0,actionHandler:cC,cursorStyleHandler:xo,actionName:Lc}),ml:new Tn({x:-.5,y:0,actionHandler:cC,cursorStyleHandler:xo,actionName:Lc})}),oz=()=>Y(Y({},fj()),az());class Pc extends gi{static getDefaults(){return Y(Y({},super.getDefaults()),Pc.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Pc.ownDefaults),this.setOptions(e)}static createControls(){return{controls:fj()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,s=t.target,i=t.action;if(this===s&&i&&i.startsWith(Xh))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const s=Object.entries(this.oCoords);for(let i=s.length-1;i>=0;i--){const[a,l]=s[i],c=this.controls[a];if(c.shouldActivate(a,this,e,t?l.touchCorner:l.corner))return this.__corner=a,{key:a,control:c,coord:this.oCoords[a]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),s=Wc(t.x,t.y),i=Ho({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),a=ps(s,i),l=ps(e,a),c=ps(l,[1/e[0],0,0,1/e[3],0,0]),d=this.group?Ah(this.calcTransformMatrix()):void 0;d&&(d.scaleX=Math.abs(d.scaleX),d.scaleY=Math.abs(d.scaleY));const h=this._calculateCurrentDimensions(d),g={};return this.forEachControl((m,y)=>{const b=m.positionHandler(h,c,this,m);g[y]=Object.assign(b,this._calcCornerCoords(m,b))}),g}_calcCornerCoords(e,t){const s=this.getTotalAngle();return{corner:e.calcCornerCoords(s,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(s,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),s=this._calculateCurrentDimensions(),i=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/i[0],1/i[3]),e.rotate(Ht(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-s.x/2,-s.y/2,s.x,s.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=Y({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},s);e.save(),e.strokeStyle=i.borderColor,this._setLineDash(e,i.borderDashArray),this.strokeBorders(e,t),i.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:s,hasControls:i}=this,a=Y({hasBorders:s,hasControls:i},t),l=this.getViewportTransform(),c=a.hasBorders,d=a.hasControls,h=ps(l,this.calcTransformMatrix()),g=Ah(h);e.save(),e.translate(g.translateX,g.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(g.angle-=180),e.rotate(Ht(this.group?g.angle:this.angle)),c&&this.drawBorders(e,g,t),d&&this.drawControls(e,t),e.restore()}drawBorders(e,t,s){let i;if(s&&s.forActiveSelection||this.group){const a=x0(this.width,this.height,Kh(t)),l=this.isStrokeAccountedForInDimensions()?p0:(this.strokeUniform?new re().scalarAdd(this.canvas?this.canvas.getZoom():1):new re(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);i=a.add(l).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else i=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,i,s)}drawControlsConnectingLines(e,t){let s=!1;e.beginPath(),this.forEachControl((i,a)=>{i.withConnection&&i.getVisibility(this,a)&&(s=!0,e.moveTo(i.x*t.x,i.y*t.y),e.lineTo(i.x*t.x+i.offsetX,i.y*t.y+i.offsetY))}),s&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const s=this.getCanvasRetinaScaling(),{cornerStrokeColor:i,cornerDashArray:a,cornerColor:l}=this,c=Y({cornerStrokeColor:i,cornerDashArray:a,cornerColor:l},t);e.setTransform(s,0,0,s,0,0),e.strokeStyle=e.fillStyle=c.cornerColor,this.transparentCorners||(e.strokeStyle=c.cornerStrokeColor),this._setLineDash(e,c.cornerDashArray),this.forEachControl((d,h)=>{if(d.getVisibility(this,h)){const g=this.oCoords[h];d.render(e,g.x,g.y,c,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[s,i]=t;return this.setControlVisible(s,i)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const s=this.canvas.viewportTransform;t.save(),t.transform(s[0],s[1],s[2],s[3],s[4],s[5]),this.transform(t);const i=this.width+4,a=this.height+4;return t.clearRect(-i/2,-a/2,i,a),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function gj(n,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(s=>{s!=="constructor"&&Object.defineProperty(n.prototype,s,Object.getOwnPropertyDescriptor(t.prototype,s)||Object.create(null))})}),n}G(Pc,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class ws extends Pc{}gj(ws,[tj]),je.setClass(ws),je.setClass(ws,"object");const lz=(n,e,t,s)=>{const i=2*(s=Math.round(s))+1,{data:a}=n.getImageData(e-s,t-s,i,i);for(let l=3;l<a.length;l+=4)if(a[l]>0)return!1;return!0};class pj{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new re(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new re(1/this.options.scaleX,1/this.options.scaleY):new re(1,1)}createSideVector(e,t){const s=ev(e,t);return this.options.strokeUniform?s.multiply(this.scale):s}projectOrthogonally(e,t,s){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,s)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new re(e);return t.y+=t.x*Math.tan(Ht(this.options.skewY)),t.x+=t.y*Math.tan(Ht(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const cz=new re;class Eo extends pj{static getOrthogonalRotationFactor(e,t){const s=t?sv(e,t):LU(e);return Math.abs(s)<qc?-1:1}constructor(e,t,s,i){super(i),G(this,"AB",void 0),G(this,"AC",void 0),G(this,"alpha",void 0),G(this,"bisector",void 0),this.A=new re(e),this.B=new re(t),this.C=new re(s),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=sv(this.AB,this.AC),this.bisector=w0(oj(this.AB.eq(cz)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t),a=lj(i),l=Eo.getOrthogonalRotationFactor(a,this.bisector);return this.scaleUnitVector(a,s*l)}projectBevel(){const e=[];return(this.alpha%kh==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),s=1/Math.sin(t/2),i=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*s),a=this.options.strokeUniform?tv(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return tv(i)/this.strokeProjectionMagnitude<=a&&e.push(this.applySkew(this.A.add(i))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const s=[],i=new re(Eo.getOrthogonalRotationFactor(this.bisector),Eo.getOrthogonalRotationFactor(new re(this.bisector.y,this.bisector.x)));return[new re(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i),new re(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i)].forEach(a=>{aC(a,e,t)&&s.push(this.A.add(a))}),s}projectRoundWithSkew(e,t){const s=[],{skewX:i,skewY:a,scaleX:l,scaleY:c,strokeUniform:d}=this.options,h=new re(Math.tan(Ht(i)),Math.tan(Ht(a))),g=this.strokeProjectionMagnitude,m=d?g/c/Math.sqrt(1/c**2+1/l**2*h.y**2):g/Math.sqrt(1+h.y**2),y=new re(Math.sqrt(Math.max(g**2-m**2,0)),m),b=d?g/Math.sqrt(1+h.x**2*(1/c)**2/(1/l+1/l*h.x*h.y)**2):g/Math.sqrt(1+h.x**2/(1+h.x*h.y)**2),S=new re(b,Math.sqrt(Math.max(g**2-b**2,0)));return[S,S.scalarMultiply(-1),y,y.scalarMultiply(-1)].map(_=>this.applySkew(d?_.multiply(this.strokeUniformScalar):_)).forEach(_=>{aC(_,e,t)&&s.push(this.applySkew(this.A).add(_))}),s}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%kh==0,s=this.applySkew(this.A),i=e[t?0:2].subtract(s),a=e[t?1:0].subtract(s),l=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),c=bc(i,l)>0,d=c?i:a,h=c?a:i;return this.isSkewed()?e.push(...this.projectRoundWithSkew(d,h)):e.push(...this.projectRoundNoSkew(d,h)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class hC extends pj{constructor(e,t,s){super(s),this.A=new re(e),this.T=new re(t)}calcOrthogonalProjection(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t);return this.scaleUnitVector(lj(i),s)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new re(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new Eo(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new re(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),s=this.scaleUnitVector(w0(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),i=this.A.add(s);e.push(i.add(t),i.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const uz=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const s=[];if(n.length===0)return s;const i=n.reduce((a,l)=>(a[a.length-1].eq(l)||a.push(new re(l)),a),[new re(n[0])]);if(i.length===1)t=!0;else if(!t){const a=i[0],l=((c,d)=>{for(let h=c.length-1;h>=0;h--)if(d(c[h],h,c))return h;return-1})(i,c=>!c.eq(a));i.splice(l+1)}return i.forEach((a,l,c)=>{let d,h;l===0?(h=c[1],d=t?a:c[c.length-1]):l===c.length-1?(d=c[l-1],h=t?a:c[0]):(d=c[l-1],h=c[l+1]),t&&c.length===1?s.push(...new hC(a,a,e).project()):!t||l!==0&&l!==c.length-1?s.push(...new Eo(a,d,h,e).project()):s.push(...new hC(a,l===0?h:d,e).project())}),s},C0=n=>{const e={};return Object.keys(n).forEach(t=>{e[t]={},Object.keys(n[t]).forEach(s=>{e[t][s]=Y({},n[t][s])})}),e},dz=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let Jl;const T0=n=>{if(Jl||Jl||(Jl="Intl"in qh()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),Jl){const e=Jl.segment(n);return Array.from(e).map(t=>{let{segment:s}=t;return s})}return hz(n)},hz=n=>{const e=[];for(let t,s=0;s<n.length;s++)(t=fz(n,s))!==!1&&e.push(t);return e},fz=(n,e)=>{const t=n.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return n.charAt(e);if(55296<=t&&t<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";const i=n.charCodeAt(e+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const s=n.charCodeAt(e-1);if(55296>s||s>56319)throw"Low surrogate without preceding high surrogate";return!1},E0=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==e.fill||n.stroke!==e.stroke||n.strokeWidth!==e.strokeWidth||n.fontSize!==e.fontSize||n.fontFamily!==e.fontFamily||n.fontWeight!==e.fontWeight||n.fontStyle!==e.fontStyle||n.textDecorationThickness!==e.textDecorationThickness||n.textBackgroundColor!==e.textBackgroundColor||n.deltaY!==e.deltaY||t&&(n.overline!==e.overline||n.underline!==e.underline||n.linethrough!==e.linethrough)},gz=(n,e)=>{const t=e.split(`
`),s=[];let i=-1,a={};n=C0(n);for(let l=0;l<t.length;l++){const c=T0(t[l]);if(n[l])for(let d=0;d<c.length;d++){i++;const h=n[l][d];h&&Object.keys(h).length>0&&(E0(a,h,!0)?s.push({start:i,end:i+1,style:h}):s[s.length-1].end++),a=h||{}}else i+=c.length,a={}}return s},pz=(n,e)=>{if(!Array.isArray(n))return C0(n);const t=e.split(f0),s={};let i=-1,a=0;for(let l=0;l<t.length;l++){const c=T0(t[l]);for(let d=0;d<c.length;d++)i++,n[a]&&n[a].start<=i&&i<n[a].end&&(s[l]=s[l]||{},s[l][d]=Y({},n[a].style),i===n[a].end-1&&a++)}return s},wr=["display","transform",Qt,"fill-opacity","fill-rule","opacity",Is,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function fC(n,e){const t=n.nodeName,s=n.getAttribute("class"),i=n.getAttribute("id"),a="(?![a-zA-Z\\-]+)";let l;if(l=new RegExp("^"+t,"i"),e=e.replace(l,""),i&&e.length&&(l=new RegExp("#"+i+a,"i"),e=e.replace(l,"")),s&&e.length){const c=s.split(" ");for(let d=c.length;d--;)l=new RegExp("\\."+c[d]+a,"i"),e=e.replace(l,"")}return e.length===0}function mz(n,e){let t=!0;const s=fC(n,e.pop());return s&&e.length&&(t=function(i,a){let l,c=!0;for(;i.parentElement&&i.parentElement.nodeType===1&&a.length;)c&&(l=a.pop()),c=fC(i=i.parentElement,l);return a.length===0}(n,e)),s&&t&&e.length===0}const vz=n=>{var e;return(e=MU[n])!==null&&e!==void 0?e:n},yz=new RegExp("(".concat(On,")"),"gi"),xz=n=>n.replace(yz," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var gC,pC,mC,vC,yC,xC,bC;const Ts="(".concat(On,")"),bz=String.raw(gC||(gC=Wn(["(skewX)(",")"],["(skewX)\\(","\\)"])),Ts),wz=String.raw(pC||(pC=Wn(["(skewY)(",")"],["(skewY)\\(","\\)"])),Ts),Sz=String.raw(mC||(mC=Wn(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Ts,Ts,Ts),_z=String.raw(vC||(vC=Wn(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Ts,Ts),Cz=String.raw(yC||(yC=Wn(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Ts,Ts),Tz=String.raw(xC||(xC=Wn(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Ts,Ts,Ts,Ts,Ts,Ts),j0="(?:".concat(Tz,"|").concat(Cz,"|").concat(Sz,"|").concat(_z,"|").concat(bz,"|").concat(wz,")"),Ez="(?:".concat(j0,"*)"),jz=String.raw(bC||(bC=Wn(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),Ez),kz=new RegExp(jz),Mz=new RegExp(j0),Oz=new RegExp(j0,"g");function nv(n){const e=[];if(!(n=xz(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!kz.test(n))return[...js];for(const t of n.matchAll(Oz)){const s=Mz.exec(t[0]);if(!s)continue;let i=js;const a=s.filter(S=>!!S),[,l,...c]=a,[d,h,g,m,y,b]=c.map(S=>parseFloat(S));switch(l){case"translate":i=Wc(d,h);break;case g0:i=Ho({angle:d},{x:h,y:g});break;case Xh:i=v0(d,h);break;case Fo:i=GE(d);break;case Vo:i=$E(d);break;case"matrix":i=[d,h,g,m,y,b]}e.push(i)}return m0(e)}function Lz(n,e,t,s){const i=Array.isArray(e);let a,l=e;if(n!==Qt&&n!==Is||e!==zs){if(n==="strokeUniform")return e==="non-scaling-stroke";if(n==="strokeDashArray")l=e===zs?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")l=t&&t.transformMatrix?ps(t.transformMatrix,nv(e)):nv(e);else if(n==="visible")l=e!==zs&&e!=="hidden",t&&t.visible===!1&&(l=!1);else if(n==="opacity")l=parseFloat(e),t&&t.opacity!==void 0&&(l*=t.opacity);else if(n==="textAnchor")l=e==="start"?dt:e==="end"?Vt:We;else if(n==="charSpacing"||n===aa)a=To(e,s)/s*1e3;else if(n==="paintFirst"){const c=e.indexOf(Qt),d=e.indexOf(Is);l=Qt,(c>-1&&d>-1&&d<c||c===-1&&d>-1)&&(l=Is)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return e;if(n==="imageSmoothing")return e==="optimizeQuality";a=i?e.map(To):To(e,s)}}else l="";return!i&&isNaN(a)?l:a}function Az(n,e){const t=n.match(kU);if(!t)return;const s=t[1],i=t[3],a=t[4],l=t[5],c=t[6];s&&(e.fontStyle=s),i&&(e.fontWeight=isNaN(parseFloat(i))?i:parseFloat(i)),a&&(e.fontSize=To(a)),c&&(e.fontFamily=c),l&&(e.lineHeight=l==="normal"?1:l)}function Dz(n,e){n.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[s,i]=t.split(":");e[s.trim().toLowerCase()]=i.trim()})}function Nz(n){const e={},t=n.getAttribute("style");return t&&(typeof t=="string"?Dz(t,e):function(s,i){Object.entries(s).forEach(a=>{let[l,c]=a;c!==void 0&&(i[l.toLowerCase()]=c)})}(t,e)),e}const Pz={stroke:"strokeOpacity",fill:"fillOpacity"};function Di(n,e,t){if(!n)return{};let s,i={},a=h0;n.parentNode&&rC.test(n.parentNode.nodeName)&&(i=Di(n.parentElement,e,t),i.fontSize&&(s=a=To(i.fontSize)));const l=Y(Y(Y({},e.reduce((h,g)=>{const m=n.getAttribute(g);return m&&(h[g]=m),h},{})),function(h){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m={};for(const y in g)mz(h,y.split(" "))&&(m=Y(Y({},m),g[y]));return m}(n,t)),Nz(n));l[nm]&&n.setAttribute(nm,l[nm]),l[sm]&&(s=To(l[sm],a),l[sm]="".concat(s));const c={};for(const h in l){const g=vz(h),m=Lz(g,l[h],i,s);c[g]=m}c&&c.font&&Az(c.font,c);const d=Y(Y({},i),c);return rC.test(n.nodeName)?d:function(h){const g=ws.getDefaults();return Object.entries(Pz).forEach(m=>{let[y,b]=m;if(h[b]===void 0||h[y]==="")return;if(h[y]===void 0){if(!g[y])return;h[y]=g[y]}if(h[y].indexOf("url(")===0)return;const S=new gt(h[y]);h[y]=S.setAlpha(wt(S.getAlpha()*h[b],2)).toRgba()}),h}(d)}const Rz=["left","top","width","height","visible"],mj=["rx","ry"];class In extends ws{static getDefaults(){return Y(Y({},super.getDefaults()),In.ownDefaults)}constructor(e){super(),Object.assign(this,In.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:s}=this,i=-t/2,a=-s/2,l=this.rx?Math.min(this.rx,t/2):0,c=this.ry?Math.min(this.ry,s/2):0,d=l!==0||c!==0;e.beginPath(),e.moveTo(i+l,a),e.lineTo(i+t-l,a),d&&e.bezierCurveTo(i+t-nr*l,a,i+t,a+nr*c,i+t,a+c),e.lineTo(i+t,a+s-c),d&&e.bezierCurveTo(i+t,a+s-nr*c,i+t-nr*l,a+s,i+t-l,a+s),e.lineTo(i+l,a+s),d&&e.bezierCurveTo(i+nr*l,a+s,i,a+s-nr*c,i,a+s-c),e.lineTo(i,a+c),d&&e.bezierCurveTo(i,a+nr*c,i+nr*l,a,i+l,a),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...mj,...e])}_toSVG(){const{width:e,height:t,rx:s,ry:i}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(s,'" ry="').concat(i,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,s){const i=Di(e,this.ATTRIBUTE_NAMES,s),{left:a=0,top:l=0,width:c=0,height:d=0,visible:h=!0}=i,g=jt(i,Rz);return new this(Y(Y(Y({},t),g),{},{left:a,top:l,width:c,height:d,visible:!!(h&&c&&d)}))}}G(In,"type","Rect"),G(In,"cacheProperties",[...Ai,...mj]),G(In,"ownDefaults",{rx:0,ry:0}),G(In,"ATTRIBUTE_NAMES",[...wr,"x","y","rx","ry","width","height"]),je.setClass(In),je.setSVGClass(In);const xi="initialization",Rh="added",k0="removed",Bh="imperative",vj=(n,e)=>{const{strokeUniform:t,strokeWidth:s,width:i,height:a,group:l}=e,c=l&&l!==n?Qh(l.calcTransformMatrix(),n.calcTransformMatrix()):null,d=c?e.getRelativeCenterPoint().transform(c):e.getRelativeCenterPoint(),h=!e.isStrokeAccountedForInDimensions(),g=t&&h?wU(new re(s,s),void 0,n.calcTransformMatrix()):p0,m=!t&&h?s:0,y=x0(i+m,a+m,m0([c,e.calcOwnMatrix()],!0)).add(g).scalarDivide(2);return[d.subtract(y),d.add(y)]};class tf{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:s,strategy:i}=e;return t===xi||t===Bh||!!s&&i!==s}shouldLayoutClipPath(e){let{type:t,target:{clipPath:s}}=e;return t!==xi&&s&&!s.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:s,target:i}=t;if(s===Bh&&t.overrides)return t.overrides;if(e.length===0)return;const{left:a,top:l,width:c,height:d}=Si(e.map(m=>vj(i,m)).reduce((m,y)=>m.concat(y),[])),h=new re(c,d),g=new re(a,l).add(h.scalarDivide(2));if(s===xi){const m=this.getInitialSize(t,{size:h,center:g});return{center:g,relativeCorrection:new re(0,0),size:m}}return{center:g.transform(i.calcOwnMatrix()),size:h}}}G(tf,"type","strategy");class iv extends tf{shouldPerformLayout(e){return!0}}G(iv,"type","fit-content"),je.setClass(iv);const Bz=["strategy"],Uz=["target","strategy","bubbles","prevStrategy"],yj="layoutManager";class Rc{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new iv;G(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=Y(Y({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const s=this.getLayoutResult(t);s&&this.commitLayout(t,s),this.onAfterLayout(t,s),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:s}=t;return[Oh,PE,Lc,RE,Wh,BE,Mh,oU,lU].map(i=>e.on(i,a=>this.performLayout(i===Oh?{type:"object_modified",trigger:i,e:a,target:s}:{type:"object_modifying",trigger:i,e:a,target:s})))}subscribe(e,t){this.unsubscribe(e,t);const s=this.attachHandlers(e,t);this._subscriptions.set(e,s)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(s=>s()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:s}=e,{canvas:i}=t;if(s===xi||s===Rh?this.subscribeTargets(e):s===k0&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),i&&i.fire("object:layout:before",{target:t,context:e}),s===Bh&&e.deep){const a=jt(e,Bz);t.forEachObject(l=>l.layoutManager&&l.layoutManager.performLayout(Y(Y({},a),{},{bubbles:!1,target:l})))}}getLayoutResult(e){const{target:t,strategy:s,type:i}=e,a=s.calcLayoutResult(e,t.getObjects());if(!a)return;const l=i===xi?new re:t.getRelativeCenterPoint(),{center:c,correction:d=new re,relativeCorrection:h=new re}=a,g=l.subtract(c).add(d).transform(i===xi?js:Mn(t.calcOwnMatrix()),!0).add(h);return{result:a,prevCenter:l,nextCenter:c,offset:g}}commitLayout(e,t){const{target:s}=e,{result:{size:i},nextCenter:a}=t;var l,c;s.set({width:i.x,height:i.y}),this.layoutObjects(e,t),e.type===xi?s.set({left:(l=e.x)!==null&&l!==void 0?l:a.x+i.x*qt(s.originX),top:(c=e.y)!==null&&c!==void 0?c:a.y+i.y*qt(s.originY)}):(s.setPositionByOrigin(a,We,We),s.setCoords(),s.set("dirty",!0))}layoutObjects(e,t){const{target:s}=e;s.forEachObject(i=>{i.group===s&&this.layoutObject(e,t,i)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,s.clipPath)}layoutObject(e,t,s){let{offset:i}=t;s.set({left:s.left+i.x,top:s.top+i.y})}onAfterLayout(e,t){const{target:s,strategy:i,bubbles:a,prevStrategy:l}=e,c=jt(e,Uz),{canvas:d}=s;s.fire("layout:after",{context:e,result:t}),d&&d.fire("object:layout:after",{context:e,result:t,target:s});const h=s.parent;a&&h!=null&&h.layoutManager&&((c.path||(c.path=[])).push(s),h.layoutManager.performLayout(Y(Y({},c),{},{target:h}))),s.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(s=>s())),e.clear()}toObject(){return{type:yj,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}je.setClass(Rc,yj);const zz=["type","objects","layoutManager"];class Iz extends Rc{performLayout(){}}class ia extends UE(ws){static getDefaults(){return Y(Y({},super.getDefaults()),ia.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),G(this,"_activeObjects",[]),G(this,"__objectSelectionTracker",void 0),G(this,"__objectSelectionDisposer",void 0),Object.assign(this,ia.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var s;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(i=>{this.enterGroup(i,!1)}),this.layoutManager=(s=t.layoutManager)!==null&&s!==void 0?s:new Rc,this.layoutManager.performLayout({type:xi,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(pr("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(pr("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,s,i)=>this.canEnterGroup(t)&&i.indexOf(t)===s)}add(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const i=this._filterObjectsBeforeEnteringGroup(t),a=super.add(...i);return this._onAfterObjectsChange(Rh,i),a}insertAt(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];const a=this._filterObjectsBeforeEnteringGroup(s),l=super.insertAt(e,...a);return this._onAfterObjectsChange(Rh,a),l}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(k0,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const s=this[e];return super._set(e,t),e==="canvas"&&s!==t&&(this._objects||[]).forEach(i=>{i._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:s}=t;const i=this._activeObjects;if(e)i.push(s),this._set("dirty",!0);else if(i.length>0){const a=i.indexOf(s);a>-1&&(i.splice(a,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&Dh(e,ps(Mn(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const s=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();s&&(s===e||e.isDescendantOf(s))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(Dh(e,ps(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const s=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;s>-1&&this._activeObjects.splice(s,1)}shouldCache(){const e=ws.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,s){this._renderBackground(e);for(let a=0;a<this._objects.length;a++){var i;const l=this._objects[a];(i=this.canvas)!==null&&i!==void 0&&i.preserveObjectStacking&&l.group!==this?(e.save(),e.transform(...Mn(this.calcTransformMatrix())),l.render(e),e.restore()):l.group===this&&l.render(e)}this._drawClipPath(e,this.clipPath,s)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(Y({target:this,type:Bh},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const s=this.includeDefaultValues;return this._objects.filter(function(i){return!i.excludeFromExport}).map(function(i){const a=i.includeDefaultValues;i.includeDefaultValues=s;const l=i[e||"toObject"](t);return i.includeDefaultValues=a,l})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return Y(Y(Y({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=In.prototype._toSVG.call(this),s=t.indexOf("COMMON_PARTS");t[s]='for="group" ';const i=t.join("");return e?e(i):i}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],s=this._createSVGBgRect(e);s&&t.push("		",s);for(let i=0;i<this._objects.length;i++)t.push("		",this._objects[i].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],s=this._createSVGBgRect(e);s&&t.push("	",s);for(let i=0;i<this._objects.length;i++)t.push("	",this._objects[i].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:s,objects:i=[],layoutManager:a}=e,l=jt(e,zz);return Promise.all([Ac(i,t),Zh(l,t)]).then(c=>{let[d,h]=c;const g=new this(d,Y(Y(Y({},l),h),{},{layoutManager:new Iz}));if(a){const m=je.getClass(a.type),y=je.getClass(a.strategy);g.layoutManager=new m(new y)}else g.layoutManager=new Rc;return g.layoutManager.subscribeTargets({type:xi,target:g,targets:g.getObjects()}),g.setCoords(),g})}}G(ia,"type","Group"),G(ia,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),je.setClass(ia);const Fz=(n,e)=>Math.min(e.width/n.width,e.height/n.height),Vz=(n,e)=>Math.max(e.width/n.width,e.height/n.height),rv="\\s*,?\\s*",ec="".concat(rv,"(").concat(On,")"),Hz="".concat(ec).concat(ec).concat(ec).concat(rv,"([01])").concat(rv,"([01])").concat(ec).concat(ec),Gz={m:"l",M:"L"},$z=(n,e,t,s,i,a,l,c,d,h,g)=>{const m=ki(n),y=Mi(n),b=ki(e),S=Mi(e),_=t*i*b-s*a*S+l,T=s*i*b+t*a*S+c;return["C",h+d*(-t*i*y-s*a*m),g+d*(-s*i*y+t*a*m),_+d*(t*i*S+s*a*b),T+d*(s*i*S-t*a*b),_,T]},wC=(n,e,t,s)=>{const i=Math.atan2(e,n),a=Math.atan2(s,t);return a>=i?a-i:2*Math.PI-(i-a)};function SC(n,e,t,s,i,a,l,c){let d;if(at.cachesBoundsOfCurve&&(d=[...arguments].join(),vc.boundsOfCurveCache[d]))return vc.boundsOfCurveCache[d];const h=Math.sqrt,g=Math.abs,m=[],y=[[0,0],[0,0]];let b=6*n-12*t+6*i,S=-3*n+9*t-9*i+3*l,_=3*t-3*n;for(let L=0;L<2;++L){if(L>0&&(b=6*e-12*s+6*a,S=-3*e+9*s-9*a+3*c,_=3*s-3*e),g(S)<1e-12){if(g(b)<1e-12)continue;const P=-_/b;0<P&&P<1&&m.push(P);continue}const j=b*b-4*_*S;if(j<0)continue;const D=h(j),k=(-b+D)/(2*S);0<k&&k<1&&m.push(k);const B=(-b-D)/(2*S);0<B&&B<1&&m.push(B)}let T=m.length;const C=T,M=xj(n,e,t,s,i,a,l,c);for(;T--;){const{x:L,y:j}=M(m[T]);y[0][T]=L,y[1][T]=j}y[0][C]=n,y[1][C]=e,y[0][C+1]=l,y[1][C+1]=c;const O=[new re(Math.min(...y[0]),Math.min(...y[1])),new re(Math.max(...y[0]),Math.max(...y[1]))];return at.cachesBoundsOfCurve&&(vc.boundsOfCurveCache[d]=O),O}const Yz=(n,e,t)=>{let[s,i,a,l,c,d,h,g]=t;const m=((y,b,S,_,T,C,M)=>{if(S===0||_===0)return[];let O=0,L=0,j=0;const D=Math.PI,k=M*d0,B=Mi(k),P=ki(k),z=.5*(-P*y-B*b),I=.5*(-P*b+B*y),F=S**2,ee=_**2,X=I**2,ae=z**2,R=F*ee-F*X-ee*ae;let V=Math.abs(S),K=Math.abs(_);if(R<0){const oe=Math.sqrt(1-R/(F*ee));V*=oe,K*=oe}else j=(T===C?-1:1)*Math.sqrt(R/(F*X+ee*ae));const te=j*V*I/K,N=-j*K*z/V,q=P*te-B*N+.5*y,de=B*te+P*N+.5*b;let ne=wC(1,0,(z-te)/V,(I-N)/K),ve=wC((z-te)/V,(I-N)/K,(-z-te)/V,(-I-N)/K);C===0&&ve>0?ve-=2*D:C===1&&ve<0&&(ve+=2*D);const Q=Math.ceil(Math.abs(ve/D*2)),Se=[],Oe=ve/Q,Te=8/3*Math.sin(Oe/4)*Math.sin(Oe/4)/Math.sin(Oe/2);let Ie=ne+Oe;for(let oe=0;oe<Q;oe++)Se[oe]=$z(ne,Ie,P,B,V,K,q,de,Te,O,L),O=Se[oe][5],L=Se[oe][6],ne=Ie,Ie+=Oe;return Se})(h-n,g-e,i,a,c,d,l);for(let y=0,b=m.length;y<b;y++)m[y][1]+=n,m[y][2]+=e,m[y][3]+=n,m[y][4]+=e,m[y][5]+=n,m[y][6]+=e;return m},qz=n=>{let e=0,t=0,s=0,i=0;const a=[];let l,c=0,d=0;for(const h of n){const g=[...h];let m;switch(g[0]){case"l":g[1]+=e,g[2]+=t;case"L":e=g[1],t=g[2],m=["L",e,t];break;case"h":g[1]+=e;case"H":e=g[1],m=["L",e,t];break;case"v":g[1]+=t;case"V":t=g[1],m=["L",e,t];break;case"m":g[1]+=e,g[2]+=t;case"M":e=g[1],t=g[2],s=g[1],i=g[2],m=["M",e,t];break;case"c":g[1]+=e,g[2]+=t,g[3]+=e,g[4]+=t,g[5]+=e,g[6]+=t;case"C":c=g[3],d=g[4],e=g[5],t=g[6],m=["C",g[1],g[2],c,d,e,t];break;case"s":g[1]+=e,g[2]+=t,g[3]+=e,g[4]+=t;case"S":l==="C"?(c=2*e-c,d=2*t-d):(c=e,d=t),e=g[3],t=g[4],m=["C",c,d,g[1],g[2],e,t],c=m[3],d=m[4];break;case"q":g[1]+=e,g[2]+=t,g[3]+=e,g[4]+=t;case"Q":c=g[1],d=g[2],e=g[3],t=g[4],m=["Q",c,d,e,t];break;case"t":g[1]+=e,g[2]+=t;case"T":l==="Q"?(c=2*e-c,d=2*t-d):(c=e,d=t),e=g[1],t=g[2],m=["Q",c,d,e,t];break;case"a":g[6]+=e,g[7]+=t;case"A":Yz(e,t,g).forEach(y=>a.push(y)),e=g[6],t=g[7];break;case"z":case"Z":e=s,t=i,m=["Z"]}m?(a.push(m),l=m[0]):l=""}return a},Uh=(n,e,t,s)=>Math.sqrt((t-n)**2+(s-e)**2),xj=(n,e,t,s,i,a,l,c)=>d=>{const h=d**3,g=(b=>3*b**2*(1-b))(d),m=(b=>3*b*(1-b)**2)(d),y=(b=>(1-b)**3)(d);return new re(l*h+i*g+t*m+n*y,c*h+a*g+s*m+e*y)},bj=n=>n**2,wj=n=>2*n*(1-n),Sj=n=>(1-n)**2,Wz=(n,e,t,s,i,a,l,c)=>d=>{const h=bj(d),g=wj(d),m=Sj(d),y=3*(m*(t-n)+g*(i-t)+h*(l-i)),b=3*(m*(s-e)+g*(a-s)+h*(c-a));return Math.atan2(b,y)},Xz=(n,e,t,s,i,a)=>l=>{const c=bj(l),d=wj(l),h=Sj(l);return new re(i*c+t*d+n*h,a*c+s*d+e*h)},Kz=(n,e,t,s,i,a)=>l=>{const c=1-l,d=2*(c*(t-n)+l*(i-t)),h=2*(c*(s-e)+l*(a-s));return Math.atan2(h,d)},_C=(n,e,t)=>{let s=new re(e,t),i=0;for(let a=1;a<=100;a+=1){const l=n(a/100);i+=Uh(s.x,s.y,l.x,l.y),s=l}return i},Zz=(n,e)=>{let t,s=0,i=0,a={x:n.x,y:n.y},l=Y({},a),c=.01,d=0;const h=n.iterator,g=n.angleFinder;for(;i<e&&c>1e-4;)l=h(s),d=s,t=Uh(a.x,a.y,l.x,l.y),t+i>e?(s-=c,c/=2):(a=l,s+=c,i+=t);return Y(Y({},l),{},{angle:g(d)})},_j=n=>{let e,t,s=0,i=0,a=0,l=0,c=0;const d=[];for(const h of n){const g={x:i,y:a,command:h[0],length:0};switch(h[0]){case"M":t=g,t.x=l=i=h[1],t.y=c=a=h[2];break;case"L":t=g,t.length=Uh(i,a,h[1],h[2]),i=h[1],a=h[2];break;case"C":e=xj(i,a,h[1],h[2],h[3],h[4],h[5],h[6]),t=g,t.iterator=e,t.angleFinder=Wz(i,a,h[1],h[2],h[3],h[4],h[5],h[6]),t.length=_C(e,i,a),i=h[5],a=h[6];break;case"Q":e=Xz(i,a,h[1],h[2],h[3],h[4]),t=g,t.iterator=e,t.angleFinder=Kz(i,a,h[1],h[2],h[3],h[4]),t.length=_C(e,i,a),i=h[3],a=h[4];break;case"Z":t=g,t.destX=l,t.destY=c,t.length=Uh(i,a,l,c),i=l,a=c}s+=t.length,d.push(t)}return d.push({length:s,x:i,y:a}),d},Qz=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_j(n),s=0;for(;e-t[s].length>0&&s<t.length-2;)e-=t[s].length,s++;const i=t[s],a=e/i.length,l=n[s];switch(i.command){case"M":return{x:i.x,y:i.y,angle:0};case"Z":return Y(Y({},new re(i.x,i.y).lerp(new re(i.destX,i.destY),a)),{},{angle:Math.atan2(i.destY-i.y,i.destX-i.x)});case"L":return Y(Y({},new re(i.x,i.y).lerp(new re(l[1],l[2]),a)),{},{angle:Math.atan2(l[2]-i.y,l[1]-i.x)});case"C":case"Q":return Zz(i,e)}},Jz=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),CC=new RegExp(Hz,"g"),eI=new RegExp(On,"gi"),tI={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},sI=n=>{var e;const t=[],s=(e=n.match(Jz))!==null&&e!==void 0?e:[];for(const i of s){const a=i[0];if(a==="z"||a==="Z"){t.push([a]);continue}const l=tI[a.toLowerCase()];let c=[];if(a==="a"||a==="A"){CC.lastIndex=0;for(let d=null;d=CC.exec(i);)c.push(...d.slice(1))}else c=i.match(eI)||[];for(let d=0;d<c.length;d+=l){const h=new Array(l),g=Gz[a];h[0]=d>0&&g?g:a;for(let m=0;m<l;m++)h[m+1]=parseFloat(c[d+m]);t.push(h)}}return t},nI=(n,e)=>n.map(t=>t.map((s,i)=>i===0||e===void 0?s:wt(s,e)).join(" ")).join(" ");function av(n,e){const t=n.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(s=>{let[i,a]=s;return t.setProperty(i,a)}))}class iI extends XE{constructor(e){let{allowTouchScrolling:t=!1,containerClass:s=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),G(this,"upper",void 0),G(this,"container",void 0);const{el:i}=this.lower,a=this.createUpperCanvas();this.upper={el:a,ctx:a.getContext("2d")},this.applyCanvasStyle(i,{allowTouchScrolling:t}),this.applyCanvasStyle(a,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const l=this.createContainerElement();l.classList.add(s),i.parentNode&&i.parentNode.replaceChild(l,i),l.append(i,a),this.container=l}createUpperCanvas(){const{el:e}=this.lower,t=Oi();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Io().createElement("div");return e.setAttribute("data-fabric","wrapper"),av(e,{position:"relative"}),X_(e),e}applyCanvasStyle(e,t){const{styles:s,allowTouchScrolling:i}=t;av(e,Y(Y({},s),{},{"touch-action":i?"manipulation":zs})),X_(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:s,ctx:i}=this.upper;WE(s,i,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),Qm(this.upper.el,e),Qm(this.container,e)}cleanupDOM(e){const t=this.container,{el:s}=this.lower,{el:i}=this.upper;super.cleanupDOM(e),t.removeChild(i),t.removeChild(s),t.parentNode&&t.parentNode.replaceChild(s,t)}dispose(){super.dispose(),qn().dispose(this.upper.el),delete this.upper,delete this.container}}class sf extends Xc{constructor(){super(...arguments),G(this,"targets",[]),G(this,"_hoveredTargets",[]),G(this,"_objectsToRender",void 0),G(this,"_currentTransform",null),G(this,"_groupSelector",null),G(this,"contextTopDirty",!1)}static getDefaults(){return Y(Y({},super.getDefaults()),sf.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new iI(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),s=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=s,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,s){const i=this.targetFindTolerance,a=this.pixelFindContext;this.clearContext(a),a.save(),a.translate(-t+i,-s+i),a.transform(...this.viewportTransform);const l=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(a),e.selectionBackgroundColor=l,a.restore();const c=Math.round(i*this.getRetinaScaling());return lz(a,c,c,c)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(s=>!!s&&e[s]===!0):e[t])}_shouldClearSelection(e,t){const s=this.getActiveObjects(),i=this._activeObject;return!!(!t||t&&i&&s.length>1&&s.indexOf(t)===-1&&i!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&i&&i!==t)}_shouldCenterTransform(e,t,s){if(!e)return;let i;return t===Xh||t===Fs||t===mn||t===Lc?i=this.centeredScaling||e.centeredScaling:t===g0&&(i=this.centeredRotation||e.centeredRotation),i?!s:s}_getOriginFromCorner(e,t){const s={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?s.x=Vt:["mr","tr","br"].includes(t)&&(s.x=dt),["tl","mt","tr"].includes(t)?s.y=Zm:["bl","mb","br"].includes(t)&&(s.y=Us)),s}_setupCurrentTransform(e,t,s){var i;const a=t.group?Co(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:l="",control:c}=t.getActiveControl()||{},d=s&&c?(i=c.getActionHandler(e,t,c))===null||i===void 0?void 0:i.bind(c):CU,h=((b,S,_,T)=>{if(!S||!b)return"drag";const C=T.controls[S];return C.getActionName(_,C,T)})(s,l,e,t),g=e[this.centeredKey],m=this._shouldCenterTransform(t,h,g)?{x:We,y:We}:this._getOriginFromCorner(t,l),y={target:t,action:h,actionHandler:d,actionPerformed:!1,corner:l,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:a.x-t.left,offsetY:a.y-t.top,originX:m.x,originY:m.y,ex:a.x,ey:a.y,lastX:a.x,lastY:a.y,theta:Ht(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:g,original:Y(Y({},KE(t)),{},{originX:m.x,originY:m.y})};this._currentTransform=y,this.fire("before:transform",{e,transform:y})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:s,deltaX:i,deltaY:a}=this._groupSelector,l=new re(t,s).transform(this.viewportTransform),c=new re(t+i,s+a).transform(this.viewportTransform),d=this.selectionLineWidth/2;let h=Math.min(l.x,c.x),g=Math.min(l.y,c.y),m=Math.max(l.x,c.x),y=Math.max(l.y,c.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(h,g,m-h,y-g)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,h+=d,g+=d,m-=d,y-=d,ws.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(h,g,m-h,y-g))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),s=this._activeObject,i=this.getActiveObjects();if(this.targets=[],s&&i.length>=1){if(s.findControl(t,Jm(e))||i.length>1&&this.searchPossibleTargets([s],t))return s;if(s===this.searchPossibleTargets([s],t)){if(this.preserveObjectStacking){const a=this.targets;this.targets=[];const l=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&l&&l!==s?(this.targets=a,s):l}return s}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let s=e.getCoords();const i=this.getZoom(),a=e.padding/i;if(a){const[l,c,d,h]=s,g=Math.atan2(c.y-l.y,c.x-l.x),m=ki(g)*a,y=Mi(g)*a,b=m+y,S=m-y;s=[new re(l.x-S,l.y-b),new re(c.x+b,c.y-S),new re(d.x+S,d.y+b),new re(h.x-b,h.y+S)]}return Ot.isPointInPolygon(t,s)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,Co(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let s=e.length;for(;s--;){const i=e[s];if(this._checkTarget(i,t)){if(sh(i)&&i.subTargetCheck){const a=this._searchPossibleTargets(i._objects,t);a&&this.targets.push(a)}return i}}}searchPossibleTargets(e,t){const s=this._searchPossibleTargets(e,t);if(s&&sh(s)&&s.interactive&&this.targets[0]){const i=this.targets;for(let a=i.length-1;a>0;a--){const l=i[a];if(!sh(l)||!l.interactive)return l}return i[0]}return s}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const s=this.upperCanvasEl,i=s.getBoundingClientRect();let a=vU(e),l=i.width||0,c=i.height||0;l&&c||(Us in i&&Zm in i&&(c=Math.abs(i.top-i.bottom)),Vt in i&&dt in i&&(l=Math.abs(i.right-i.left))),this.calcOffset(),a.x=a.x-this._offset.left,a.y=a.y-this._offset.top,t||(a=Co(a,void 0,this.viewportTransform));const d=this.getRetinaScaling();d!==1&&(a.x/=d,a.y/=d);const h=l===0||c===0?new re(1,1):new re(s.width/l,s.height/c);return a.multiply(h)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Oi(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return Yr(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let s=!1,i=!1;const a=this.getActiveObjects(),l=[],c=[];e.forEach(d=>{a.includes(d)||(s=!0,d.fire("deselected",{e:t,target:d}),c.push(d))}),a.forEach(d=>{e.includes(d)||(s=!0,d.fire("selected",{e:t,target:d}),l.push(d))}),e.length>0&&a.length>0?(i=!0,s&&this.fire("selection:updated",{e:t,selected:l,deselected:c})):a.length>0?(i=!0,this.fire("selection:created",{e:t,selected:l})):e.length>0&&(i=!0,this.fire("selection:cleared",{e:t,deselected:c})),i&&(this._objectsToRender=void 0)}setActiveObject(e,t){const s=this.getActiveObjects(),i=this._setActiveObject(e,t);return this._fireSelectionEvents(s,t),i}_setActiveObject(e,t){const s=this._activeObject;return s!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Yr(e)&&s!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const s=this._activeObject;return!!s&&!s.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===s&&this.endCurrentTransform(e),Yr(s)&&s===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),s=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[s]});const i=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),i}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,s=t.target,i={e,target:s,transform:t,action:t.action};s._scaling&&(s._scaling=!1),s.setCoords(),t.actionPerformed&&(this.fire("object:modified",i),s.fire(Oh,i))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;Yr(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,s){const i=this._realizeGroupTransformOnObject(e),a=super._toObject(e,t,s);return e.set(i),a}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&Yr(t)&&this._activeObject===t){const s=Go(e,["angle","flipX","flipY",dt,Fs,mn,Fo,Vo,Us]);return xU(e,t.calcOwnMatrix()),s}return{}}_setSVGObject(e,t,s){const i=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,s),t.set(i)}}G(sf,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class rI{constructor(e){G(this,"targets",[]),G(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:i}=e.getActiveObject()||{};i&&i.focus()},s=e.upperCanvasEl;s.addEventListener("click",t),this.__disposer=()=>s.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),fo(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const aI=["target","oldTarget","fireCanvas","e"],Ks={passive:!1},uo=(n,e)=>{const t=n.getViewportPoint(e),s=n.getScenePoint(e);return{viewportPoint:t,scenePoint:s,pointer:t,absolutePointer:s}},ir=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];return n.addEventListener(...t)},dn=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];return n.removeEventListener(...t)},oI={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class ov extends sf{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),G(this,"_isClick",void 0),G(this,"textEditingManager",new rI(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(ir,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const s=this.upperCanvasEl,i=this._getEventPrefix();e(qE(s),"resize",this._onResize),e(s,i+"down",this._onMouseDown),e(s,"".concat(i,"move"),this._onMouseMove,Ks),e(s,"".concat(i,"out"),this._onMouseOut),e(s,"".concat(i,"enter"),this._onMouseEnter),e(s,"wheel",this._onMouseWheel),e(s,"contextmenu",this._onContextMenu),e(s,"click",this._onClick),e(s,"dblclick",this._onClick),e(s,"dragstart",this._onDragStart),e(s,"dragend",this._onDragEnd),e(s,"dragover",this._onDragOver),e(s,"dragenter",this._onDragEnter),e(s,"dragleave",this._onDragLeave),e(s,"drop",this._onDrop),this.enablePointerEvents||e(s,"touchstart",this._onTouchStart,Ks)}removeListeners(){this.addOrRemove(dn,"remove");const e=this._getEventPrefix(),t=kn(this.upperCanvasEl);dn(t,"".concat(e,"up"),this._onMouseUp),dn(t,"touchend",this._onTouchEnd,Ks),dn(t,"".concat(e,"move"),this._onMouseMove,Ks),dn(t,"touchmove",this._onMouseMove,Ks),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,s=Y({e},uo(this,e));this.fire("mouse:out",Y(Y({},s),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",Y({},s)),this._hoveredTargets.forEach(i=>{this.fire("mouse:out",Y(Y({},s),{},{target:i})),i&&i.fire("mouseout",Y({},s))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",Y({e},uo(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const s={e,target:t};return this.fire("dragstart",s),t.fire("dragstart",s),void ir(this.upperCanvasEl,"drag",this._onDragProgress)}K_(e)}_renderDragEffects(e,t,s){let i=!1;const a=this._dropTarget;a&&a!==t&&a!==s&&(a.clearContextTop(),i=!0),t?.clearContextTop(),s!==t&&s?.clearContextTop();const l=this.contextTop;l.save(),l.transform(...this.viewportTransform),t&&(l.save(),t.transform(l),t.renderDragSourceEffect(e),l.restore(),i=!0),s&&(l.save(),s.transform(l),s.renderDropTargetEffect(e),l.restore(),i=!0),l.restore(),i&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==zs,s=t?this._activeObject:void 0,i={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:s};dn(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",i),this._dragSource&&this._dragSource.fire("dragend",i),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:s,targets:i}=this.findDragTargets(e),a=this._dragSource,l={e,target:s,subTargets:i,dragSource:a,canDrop:!1,dropTarget:void 0};let c;this.fire(t,l),this._fireEnterLeaveEvents(s,l),s&&(s.canDrop(e)&&(c=s),s.fire(t,l));for(let d=0;d<i.length;d++){const h=i[d];h.canDrop(e)&&(c=h),h.fire(t,l)}this._renderDragEffects(e,a,c),this._dropTarget=c}_onDragEnter(e){const{target:t,targets:s}=this.findDragTargets(e),i={e,target:t,subTargets:s,dragSource:this._dragSource};this.fire("dragenter",i),this._fireEnterLeaveEvents(t,i)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:s}=this.findDragTargets(e),i=this._basicEventHandler("drop:before",Y({e,target:t,subTargets:s,dragSource:this._dragSource},uo(this,e)));i.didDrop=!1,i.dropTarget=void 0,this._basicEventHandler("drop",i),this.fire("drop:after",i)}_onContextMenu(e){const t=this.findTarget(e),s=this.targets||[],i=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:s});return this.stopContextMenu&&K_(e),this._basicEventHandler("contextmenu",i),!1}_onClick(e){const t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),t==2&&e.type==="dblclick"&&this._handleEvent(e,"dblclick"),t==3&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const s=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||s&&this._target===s)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const i=this.upperCanvasEl,a=this._getEventPrefix(),l=kn(i);ir(l,"touchend",this._onTouchEnd,Ks),t&&ir(l,"touchmove",this._onMouseMove,Ks),dn(i,"".concat(a,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,s=this._getEventPrefix();dn(t,"".concat(s,"move"),this._onMouseMove,Ks);const i=kn(t);ir(i,"".concat(s,"up"),this._onMouseUp),ir(i,"".concat(s,"move"),this._onMouseMove,Ks)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),s=kn(this.upperCanvasEl);dn(s,"touchend",this._onTouchEnd,Ks),dn(s,"touchmove",this._onMouseMove,Ks),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{ir(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,s=this._getEventPrefix();if(this._isMainEvent(e)){const i=kn(this.upperCanvasEl);dn(i,"".concat(s,"up"),this._onMouseUp),dn(i,"".concat(s,"move"),this._onMouseMove,Ks),ir(t,"".concat(s,"move"),this._onMouseMove,Ks)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const s=this._currentTransform,i=this._isClick,a=this._target,{button:l}=e;if(l)return(this.fireMiddleClick&&l===1||this.fireRightClick&&l===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let c,d,h=!1;if(s&&(this._finalizeCurrentTransform(e),h=s.actionPerformed),!i){const g=a===this._activeObject;this.handleSelection(e),h||(h=this._shouldRender(a)||!g&&a===this._activeObject)}if(a){const g=a.findControl(this.getViewportPoint(e),Jm(e)),{key:m,control:y}=g||{};if(d=m,a.selectable&&a!==this._activeObject&&a.activeOn==="up")this.setActiveObject(a,e),h=!0;else if(y){const b=y.getMouseUpHandler(e,a,y);b&&(c=this.getScenePoint(e),b.call(y,e,s,c.x,c.y))}a.isMoving=!1}if(s&&(s.target!==a||s.corner!==d)){const g=s.target&&s.target.controls[s.corner],m=g&&g.getMouseUpHandler(e,s.target,g);c=c||this.getScenePoint(e),m&&m.call(g,e,s,c.x,c.y)}this._setCursorFromEvent(e,a),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,a&&(a.__corner=void 0),h?this.requestRenderAll():i||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:s,subTargets:i=[]}=t;this.fire(e,t),s&&s.fire(e,t);for(let a=0;a<i.length;a++)i[a]!==s&&i[a].fire(e,t);return t}_handleEvent(e,t,s){const i=this._target,a=this.targets||[],l=Y(Y(Y({e,target:i,subTargets:a},uo(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),t==="down:before"||t==="down"?s:{});this.fire("mouse:".concat(t),l),i&&i.fire("mouse".concat(t),l);for(let c=0;c<a.length;c++)a[c]!==i&&a[c].fire("mouse".concat(t),l)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target,s=!!t&&t===this._activeObject;const{button:i}=e;if(i)return(this.fireMiddleClick&&i===1||this.fireRightClick&&i===2)&&this._handleEvent(e,"down",{alreadySelected:s}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let a=this._shouldRender(t),l=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,l=!0,a=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const c=this.getScenePoint(e);this._groupSelector={x:c.x,y:c.y,deltaY:0,deltaX:0}}if(s=!!t&&t===this._activeObject,t){t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const c=t.findControl(this.getViewportPoint(e),Jm(e));if(t===this._activeObject&&(c||!l)){this._setupCurrentTransform(e,t,s);const d=c?c.control:void 0,h=this.getScenePoint(e),g=d&&d.getMouseDownHandler(e,t,d);g&&g.call(d,e,this._currentTransform,h.x,h.y)}}a&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:s}),a&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=Co(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const s=this.getScenePoint(e);t.deltaX=s.x-t.x,t.deltaY=s.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const s=this.findTarget(e);this._setCursorFromEvent(e,s),this._fireOverOutEvents(e,s)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const s=this._hoveredTarget,i=this._hoveredTargets,a=this.targets,l=Math.max(i.length,a.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:s,fireCanvas:!0});for(let c=0;c<l;c++)this.fireSyntheticInOutEvents("mouse",{e,target:a[c],oldTarget:i[c]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const s=this._draggedoverTarget,i=this._hoveredTargets,a=this.targets,l=Math.max(i.length,a.length);this.fireSyntheticInOutEvents("drag",Y(Y({},t),{},{target:e,oldTarget:s,fireCanvas:!0}));for(let c=0;c<l;c++)this.fireSyntheticInOutEvents("drag",Y(Y({},t),{},{target:a[c],oldTarget:i[c]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:s,oldTarget:i,fireCanvas:a,e:l}=t,c=jt(t,aI);const{targetIn:d,targetOut:h,canvasIn:g,canvasOut:m}=oI[e],y=i!==s;if(i&&y){const b=Y(Y({},c),{},{e:l,target:i,nextTarget:s},uo(this,l));a&&this.fire(m,b),i.fire(h,b)}if(s&&y){const b=Y(Y({},c),{},{e:l,target:s,previousTarget:i},uo(this,l));a&&this.fire(g,b),s.fire(d,b)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),s=this._currentTransform,i=s.target,a=i.group?Co(t,void 0,i.group.calcTransformMatrix()):t;s.shiftKey=e.shiftKey,s.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,s,a),s.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,s){const{action:i,actionHandler:a,target:l}=t,c=!!a&&a(e,t,s.x,s.y);c&&l.setCoords(),i==="drag"&&c&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||c}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let s=t.hoverCursor||this.hoverCursor;const i=Yr(this._activeObject)?this._activeObject:null,a=(!i||t.group!==i)&&t.findControl(this.getViewportPoint(e));if(a){const l=a.control;this.setCursor(l.cursorStyleHandler(e,l,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(l=>{s=l.hoverCursor||s}),this.setCursor(s)}handleMultiSelection(e,t){const s=this._activeObject,i=Yr(s);if(s&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(s!==t||i)&&(i||!t.isDescendantOf(s)&&!s.isDescendantOf(t))&&!t.onSelect({e})&&!s.getActiveControl()){if(i){const a=s.getObjects();if(t===s){const l=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(a,l)||this.searchPossibleTargets(this._objects,l))||!t.selectable)return!1}t.group===s?(s.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],s.size()===1&&this._setActiveObject(s.item(0),e)):(s.multiSelectAdd(t),this._hoveredTarget=s,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(a,e)}else{s.isEditing&&s.exitEditing();const a=new(je.getClass("ActiveSelection"))([],{canvas:this});a.multiSelectAdd(s,t),this._hoveredTarget=a,this._setActiveObject(a,e),this._fireSelectionEvents([s],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:s,deltaX:i,deltaY:a}=this._groupSelector,l=new re(t,s),c=l.add(new re(i,a)),d=l.min(c),h=l.max(c).subtract(d),g=this.collectObjects({left:d.x,top:d.y,width:h.x,height:h.y},{includeIntersecting:!this.selectionFullyContained}),m=l.eq(c)?g[0]?[g[0]]:[]:g.length>1?g.filter(y=>!y.onSelect({e})).reverse():g;if(m.length===1)this.setActiveObject(m[0],e);else if(m.length>1){const y=je.getClass("ActiveSelection");this.setActiveObject(new y(m,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const Cj={x1:0,y1:0,x2:0,y2:0},lI=Y(Y({},Cj),{},{r1:0,r2:0}),bo=(n,e)=>isNaN(n)&&typeof e=="number"?e:n,cI=/^(\d+\.\d+)%|(\d+)%$/;function Tj(n){return n&&cI.test(n)}function Ej(n,e){const t=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(Tj(n)?100:1):NaN;return Oo(0,bo(t,e),1)}const uI=/\s*;\s*/,dI=/\s*:\s*/;function hI(n,e){let t,s;const i=n.getAttribute("style");if(i){const l=i.split(uI);l[l.length-1]===""&&l.pop();for(let c=l.length;c--;){const[d,h]=l[c].split(dI).map(g=>g.trim());d==="stop-color"?t=h:d==="stop-opacity"&&(s=h)}}const a=new gt(t||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:Ej(n.getAttribute("offset"),0),color:a.toRgb(),opacity:bo(parseFloat(s||n.getAttribute("stop-opacity")||""),1)*a.getAlpha()*e}}function fI(n,e){const t=[],s=n.getElementsByTagName("stop"),i=Ej(e,1);for(let a=s.length;a--;)t.push(hI(s[a],i));return t}function jj(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function kj(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Sn(n,e){return n.getAttribute(e)}function gI(n,e){return function(t,s){let i,{width:a,height:l,gradientUnits:c}=s;return Object.keys(t).reduce((d,h)=>{const g=t[h];return g==="Infinity"?i=1:g==="-Infinity"?i=0:(i=typeof g=="string"?parseFloat(g):g,typeof g=="string"&&Tj(g)&&(i*=.01,c==="pixels"&&(h!=="x1"&&h!=="x2"&&h!=="r2"||(i*=a),h!=="y1"&&h!=="y2"||(i*=l)))),d[h]=i,d},{})}(jj(n)==="linear"?function(t){return{x1:Sn(t,"x1")||0,y1:Sn(t,"y1")||0,x2:Sn(t,"x2")||"100%",y2:Sn(t,"y2")||0}}(n):function(t){return{x1:Sn(t,"fx")||Sn(t,"cx")||"50%",y1:Sn(t,"fy")||Sn(t,"cy")||"50%",r1:0,x2:Sn(t,"cx")||"50%",y2:Sn(t,"cy")||"50%",r2:Sn(t,"r")||"50%"}}(n),Y(Y({},e),{},{gradientUnits:kj(n)}))}class Td{constructor(e){const{type:t="linear",gradientUnits:s="pixels",coords:i={},colorStops:a=[],offsetX:l=0,offsetY:c=0,gradientTransform:d,id:h}=e||{};Object.assign(this,{type:t,gradientUnits:s,coords:Y(Y({},t==="radial"?lI:Cj),i),colorStops:a,offsetX:l,offsetY:c,gradientTransform:d,id:h?"".concat(h,"_").concat(mr()):mr()})}addColorStop(e){for(const t in e){const s=new gt(e[t]);this.colorStops.push({offset:parseFloat(t),color:s.toRgb(),opacity:s.getAlpha()})}return this}toObject(e){return Y(Y({},Go(this,e)),{},{type:this.type,coords:Y({},this.coords),colorStops:this.colorStops.map(t=>Y({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[],i=this.gradientTransform?this.gradientTransform.concat():js.concat(),a=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",l=this.colorStops.map(m=>Y({},m)).sort((m,y)=>m.offset-y.offset);let c=-this.offsetX,d=-this.offsetY;var h;a==="objectBoundingBox"?(c/=e.width,d/=e.height):(c+=e.width/2,d+=e.height/2),(h=e)&&typeof h._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(c-=e.pathOffset.x,d-=e.pathOffset.y),i[4]-=c,i[5]-=d;const g=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(a,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(Dc(i),'"'),""].join(" ");if(this.type==="linear"){const{x1:m,y1:y,x2:b,y2:S}=this.coords;s.push("<linearGradient ",g,' x1="',m,'" y1="',y,'" x2="',b,'" y2="',S,`">
`)}else if(this.type==="radial"){const{x1:m,y1:y,x2:b,y2:S,r1:_,r2:T}=this.coords,C=_>T;s.push("<radialGradient ",g,' cx="',C?m:b,'" cy="',C?y:S,'" r="',C?_:T,'" fx="',C?b:m,'" fy="',C?S:y,`">
`),C&&(l.reverse(),l.forEach(O=>{O.offset=1-O.offset}));const M=Math.min(_,T);if(M>0){const O=M/Math.max(_,T);l.forEach(L=>{L.offset+=O*(1-L.offset)})}}return l.forEach(m=>{let{color:y,offset:b,opacity:S}=m;s.push("<stop ",'offset="',100*b+"%",'" style="stop-color:',y,S!==void 0?";stop-opacity: "+S:";",`"/>
`)}),s.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),s.join("")}toLive(e){const{x1:t,y1:s,x2:i,y2:a,r1:l,r2:c}=this.coords,d=this.type==="linear"?e.createLinearGradient(t,s,i,a):e.createRadialGradient(t,s,l,i,a,c);return this.colorStops.forEach(h=>{let{color:g,opacity:m,offset:y}=h;d.addColorStop(y,m!==void 0?new gt(g).setAlpha(m).toRgba():g)}),d}static async fromObject(e){const{colorStops:t,gradientTransform:s}=e;return new this(Y(Y({},e),{},{colorStops:t?t.map(i=>Y({},i)):void 0,gradientTransform:s?[...s]:void 0}))}static fromElement(e,t,s){const i=kj(e),a=t._findCenterFromElement();return new this(Y({id:e.getAttribute("id")||void 0,type:jj(e),coords:gI(e,{width:s.viewBoxWidth||s.width,height:s.viewBoxHeight||s.height}),colorStops:fI(e,s.opacity),gradientUnits:i,gradientTransform:nv(e.getAttribute("gradientTransform")||"")},i==="pixels"?{offsetX:t.width/2-a.x,offsetY:t.height/2-a.y}:{offsetX:0,offsetY:0}))}}G(Td,"type","Gradient"),je.setClass(Td,"gradient"),je.setClass(Td,"linear"),je.setClass(Td,"radial");const pI=["type","source","patternTransform"];class am{get type(){return"pattern"}set type(e){pr("warn","Setting type has no effect",e)}constructor(e){G(this,"repeat","repeat"),G(this,"offsetX",0),G(this,"offsetY",0),G(this,"crossOrigin",""),this.id=mr(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:s}=this;return Y(Y({},Go(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:s,offsetX:wt(this.offsetX,at.NUM_FRACTION_DIGITS),offsetY:wt(this.offsetY,at.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:s}=e;const{source:i,repeat:a,id:l}=this,c=bo(this.offsetX/t,0),d=bo(this.offsetY/s,0),h=a==="repeat-y"||a==="no-repeat"?1+Math.abs(c||0):bo(i.width/t,0),g=a==="repeat-x"||a==="no-repeat"?1+Math.abs(d||0):bo(i.height/s,0);return['<pattern id="SVGID_'.concat(l,'" x="').concat(c,'" y="').concat(d,'" width="').concat(h,'" height="').concat(g,'">'),'<image x="0" y="0" width="'.concat(i.width,'" height="').concat(i.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:s,source:i,patternTransform:a}=e,l=jt(e,pI);const c=await ih(i,Y(Y({},t),{},{crossOrigin:l.crossOrigin}));return new this(Y(Y({},l),{},{patternTransform:a&&a.slice(0),source:c}))}}G(am,"type","Pattern"),je.setClass(am),je.setClass(am,"pattern");const mI=["path","left","top"],vI=["d"];class qr extends ws{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:s,left:i,top:a}=t,l=jt(t,mI);super(),Object.assign(this,qr.ownDefaults),this.setOptions(l),this._setPath(e||[],!0),typeof i=="number"&&this.set(dt,i),typeof a=="number"&&this.set(Us,a)}_setPath(e,t){this.path=qz(Array.isArray(e)?e:sI(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new re(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,s=-this.pathOffset.y;e.beginPath();for(const i of this.path)switch(i[0]){case"L":e.lineTo(i[1]+t,i[2]+s);break;case"M":e.moveTo(i[1]+t,i[2]+s);break;case"C":e.bezierCurveTo(i[1]+t,i[2]+s,i[3]+t,i[4]+s,i[5]+t,i[6]+s);break;case"Q":e.quadraticCurveTo(i[1]+t,i[2]+s,i[3]+t,i[4]+s);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y(Y({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=nI(this.path,at.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=at.NUM_FRACTION_DIGITS;return" translate(".concat(wt(-this.pathOffset.x,e),", ").concat(wt(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:s,pathOffset:i}=this._calcDimensions();this.set({width:t,height:s,pathOffset:i}),e&&this.setPositionByOrigin(i,We,We)}_calcBoundsFromPath(){const e=[];let t=0,s=0,i=0,a=0;for(const l of this.path)switch(l[0]){case"L":i=l[1],a=l[2],e.push({x:t,y:s},{x:i,y:a});break;case"M":i=l[1],a=l[2],t=i,s=a;break;case"C":e.push(...SC(i,a,l[1],l[2],l[3],l[4],l[5],l[6])),i=l[5],a=l[6];break;case"Q":e.push(...SC(i,a,l[1],l[2],l[1],l[2],l[3],l[4])),i=l[3],a=l[4];break;case"Z":i=t,a=s}return Si(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return Y(Y({},e),{},{pathOffset:new re(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,s){const i=Di(e,this.ATTRIBUTE_NAMES,s),{d:a}=i;return new this(a,Y(Y(Y({},jt(i,vI)),t),{},{left:void 0,top:void 0}))}}G(qr,"type","Path"),G(qr,"cacheProperties",[...Ai,"path","fillRule"]),G(qr,"ATTRIBUTE_NAMES",[...wr,"d"]),je.setClass(qr),je.setSVGClass(qr);const yI=["left","top","radius"],Mj=["radius","startAngle","endAngle","counterClockwise"];class vi extends ws{static getDefaults(){return Y(Y({},super.getDefaults()),vi.ownDefaults)}constructor(e){super(),Object.assign(this,vi.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Ht(this.startAngle),Ht(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(Fs)}getRadiusY(){return this.get("radius")*this.get(mn)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Mj,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,s=Ht(this.startAngle),i=Ht(this.endAngle),a=ki(s)*t,l=Mi(s)*t,c=ki(i)*t,d=Mi(i)*t,h=e>180?1:0,g=this.counterClockwise?0:1;return['<path d="M '.concat(a," ").concat(l," A ").concat(t," ").concat(t," 0 ").concat(h," ").concat(g," ").concat(c," ").concat(d,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,s){const i=Di(e,this.ATTRIBUTE_NAMES,s),{left:a=0,top:l=0,radius:c=0}=i;return new this(Y(Y({},jt(i,yI)),{},{radius:c,left:a-c,top:l-c}))}static fromObject(e){return super._fromObject(e)}}G(vi,"type","Circle"),G(vi,"cacheProperties",[...Ai,...Mj]),G(vi,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),G(vi,"ATTRIBUTE_NAMES",["cx","cy","r",...wr]),je.setClass(vi),je.setSVGClass(vi);const xI=["x1","y1","x2","y2"],bI=["x1","y1","x2","y2"],lv=["x1","x2","y1","y2"];class Wr extends ws{constructor(){let[e,t,s,i]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Wr.ownDefaults),this.setOptions(a),this.x1=e,this.x2=s,this.y1=t,this.y2=i,this._setWidthHeight();const{left:l,top:c}=a;typeof l=="number"&&this.set(dt,l),typeof c=="number"&&this.set(Us,c)}_setWidthHeight(){const{x1:e,y1:t,x2:s,y2:i}=this;this.width=Math.abs(s-e),this.height=Math.abs(i-t);const{left:a,top:l,width:c,height:d}=Si([{x:e,y:t},{x:s,y:i}]),h=new re(a+c/2,l+d/2);this.setPositionByOrigin(h,We,We)}_set(e,t){return super._set(e,t),lv.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const s=e.strokeStyle;var i;gn(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(i=this.stroke)!==null&&i!==void 0?i:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=s}_findCenterFromElement(){return new re((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y(Y({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:s,y2:i,width:a,height:l}=this,c=e<=t?-1:1,d=s<=i?-1:1;return{x1:c*a/2,x2:c*-a/2,y1:d*l/2,y2:d*-l/2}}_toSVG(){const{x1:e,x2:t,y1:s,y2:i}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(s,'" x2="').concat(t,'" y2="').concat(i,`" />
`)]}static async fromElement(e,t,s){const i=Di(e,this.ATTRIBUTE_NAMES,s),{x1:a=0,y1:l=0,x2:c=0,y2:d=0}=i;return new this([a,l,c,d],jt(i,xI))}static fromObject(e){let{x1:t,y1:s,x2:i,y2:a}=e,l=jt(e,bI);return this._fromObject(Y(Y({},l),{},{points:[t,s,i,a]}),{extraParam:"points"})}}G(Wr,"type","Line"),G(Wr,"cacheProperties",[...Ai,...lv]),G(Wr,"ATTRIBUTE_NAMES",wr.concat(lv)),je.setClass(Wr),je.setSVGClass(Wr);class Jr extends ws{static getDefaults(){return Y(Y({},super.getDefaults()),Jr.ownDefaults)}constructor(e){super(),Object.assign(this,Jr.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,s=this.height/2;e.beginPath(),e.moveTo(-t,s),e.lineTo(0,-s),e.lineTo(t,s),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}G(Jr,"type","Triangle"),G(Jr,"ownDefaults",{width:100,height:100}),je.setClass(Jr),je.setSVGClass(Jr);const Oj=["rx","ry"];class yi extends ws{static getDefaults(){return Y(Y({},super.getDefaults()),yi.ownDefaults)}constructor(e){super(),Object.assign(this,yi.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(Fs)}getRy(){return this.get("ry")*this.get(mn)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Oj,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,kh,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,s){const i=Di(e,this.ATTRIBUTE_NAMES,s);return i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,new this(i)}}function wI(n){if(!n)return[];const e=n.replace(/,/g," ").trim().split(/\s+/),t=[];for(let s=0;s<e.length;s+=2)t.push({x:parseFloat(e[s]),y:parseFloat(e[s+1])});return t}G(yi,"type","Ellipse"),G(yi,"cacheProperties",[...Ai,...Oj]),G(yi,"ownDefaults",{rx:0,ry:0}),G(yi,"ATTRIBUTE_NAMES",[...wr,"cx","cy","rx","ry"]),je.setClass(yi),je.setSVGClass(yi);const SI=["left","top"],Lj={exactBoundingBox:!1};class jn extends ws{static getDefaults(){return Y(Y({},super.getDefaults()),jn.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),G(this,"strokeDiff",void 0),Object.assign(this,jn.ownDefaults),this.setOptions(t),this.points=e;const{left:s,top:i}=t;this.initialized=!0,this.setBoundingBox(!0),typeof s=="number"&&this.set(dt,s),typeof i=="number"&&this.set(Us,i)}isOpen(){return!0}_projectStrokeOnPoints(e){return uz(this.points,e,this.isOpen())}_calcDimensions(e){e=Y({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(h=>h.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new re,strokeOffset:new re,strokeDiff:new re};const s=Si(t),i=Kh(Y(Y({},e),{},{scaleX:1,scaleY:1})),a=Si(this.points.map(h=>Rs(h,i,!0))),l=new re(this.scaleX,this.scaleY);let c=s.left+s.width/2,d=s.top+s.height/2;return this.exactBoundingBox&&(c-=d*Math.tan(Ht(this.skewX)),d-=c*Math.tan(Ht(this.skewY))),Y(Y({},s),{},{pathOffset:new re(c,d),strokeOffset:new re(a.left,a.top).subtract(new re(s.left,s.top)).multiply(l),strokeDiff:new re(s.width,s.height).subtract(new re(a.width,a.height)).multiply(l)})}_findCenterFromElement(){const e=Si(this.points);return new re(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:s,width:i,height:a,pathOffset:l,strokeOffset:c,strokeDiff:d}=this._calcDimensions();this.set({width:i,height:a,pathOffset:l,strokeOffset:c,strokeDiff:d}),e&&this.setPositionByOrigin(new re(t+i/2,s+a/2),We,We)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new re(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let l;if(Object.keys(e).some(c=>this.strokeUniform||this.constructor.layoutProperties.includes(c))){var t,s;const{width:c,height:d}=this._calcDimensions(e);l=new re((t=e.width)!==null&&t!==void 0?t:c,(s=e.height)!==null&&s!==void 0?s:d)}else{var i,a;l=new re((i=e.width)!==null&&i!==void 0?i:this.width,(a=e.height)!==null&&a!==void 0?a:this.height)}return l.multiply(new re(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const s=this.initialized&&this[e]!==t,i=super._set(e,t);return this.exactBoundingBox&&s&&((e===Fs||e===mn)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),i}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y(Y({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:s,y:i}=t;return{x:s,y:i}})})}_toSVG(){const e=[],t=this.pathOffset.x,s=this.pathOffset.y,i=at.NUM_FRACTION_DIGITS;for(let a=0,l=this.points.length;a<l;a++)e.push(wt(this.points[a].x-t,i),",",wt(this.points[a].y-s,i)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,s=this.pathOffset.x,i=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-s,this.points[0].y-i);for(let a=0;a<t;a++){const l=this.points[a];e.lineTo(l.x-s,l.y-i)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,s){return new this(wI(e.getAttribute("points")),Y(Y({},jt(Di(e,this.ATTRIBUTE_NAMES,s),SI)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}G(jn,"ownDefaults",Lj),G(jn,"type","Polyline"),G(jn,"layoutProperties",[Fo,Vo,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),G(jn,"cacheProperties",[...Ai,"points"]),G(jn,"ATTRIBUTE_NAMES",[...wr]),je.setClass(jn),je.setSVGClass(jn);class Ed extends jn{isOpen(){return!1}}G(Ed,"ownDefaults",Lj),G(Ed,"type","Polygon"),je.setClass(Ed),je.setSVGClass(Ed);class Aj extends ws{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const s in t)for(const i in t[s])for(const a in t[s][i])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const s=t===void 0?this.styles:{0:this.styles[t]};for(const i in s)for(const a in s[i])if(s[i][a][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let s,i,a=0,l=!0,c=0;for(const d in t){s=0;for(const h in t[d]){const g=t[d][h]||{};a++,g[e]!==void 0?(i?g[e]!==i&&(l=!1):i=g[e],g[e]===this[e]&&delete g[e]):l=!1,Object.keys(g).length!==0?s++:delete t[d][h]}s===0&&delete t[d]}for(let d=0;d<this._textLines.length;d++)c+=this._textLines[d].length;l&&a===c&&(this[e]=i,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let s,i,a;for(i in t){for(a in s=t[i],s)delete s[a][e],Object.keys(s[a]).length===0&&delete s[a];Object.keys(s).length===0&&delete t[i]}}_extendStyles(e,t){const{lineIndex:s,charIndex:i}=this.get2DCursorLocation(e);this._getLineStyle(s)||this._setLineStyle(s);const a=y0(Y(Y({},this._getStyleDeclaration(s,i)),t),l=>l!==void 0);this._setStyleDeclaration(s,i,a)}getSelectionStyles(e,t,s){const i=[];for(let a=e;a<(t||e);a++)i.push(this.getStyleAtPosition(a,s));return i}getStyleAtPosition(e,t){const{lineIndex:s,charIndex:i}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(s,i):this._getStyleDeclaration(s,i)}setSelectionStyles(e,t,s){for(let i=t;i<(s||t);i++)this._extendStyles(i,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var s;const i=this.styles&&this.styles[e];return i&&(s=i[t])!==null&&s!==void 0?s:{}}getCompleteStyleDeclaration(e,t){return Y(Y({},Go(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,s){this.styles[e][t]=s}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}G(Aj,"_styleProperties",EU);const _I=/  +/g,CI=/"/g;function om(n,e,t,s,i){return"		".concat(function(a,l){let{left:c,top:d,width:h,height:g}=l,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:at.NUM_FRACTION_DIGITS;const y=Nc(Qt,a,!1),[b,S,_,T]=[c,d,h,g].map(C=>wt(C,m));return"<rect ".concat(y,' x="').concat(b,'" y="').concat(S,'" width="').concat(_,'" height="').concat(T,'"></rect>')}(n,{left:e,top:t,width:s,height:i}),`
`)}const TI=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let lm;class xs extends Aj{static getDefaults(){return Y(Y({},super.getDefaults()),xs.ownDefaults)}constructor(e,t){super(),G(this,"__charBounds",[]),Object.assign(this,xs.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=_j(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Fn)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,s,i,a,l,c;for(let d=0,h=this._textLines.length;d<h;d++)if((this.textAlign===Fn||d!==h-1&&!this.isEndOfWrapping(d))&&(i=0,a=this._textLines[d],t=this.getLineWidth(d),t<this.width&&(c=this.textLines[d].match(this._reSpacesAndTabs)))){s=c.length,e=(this.width-t)/s;for(let g=0;g<=a.length;g++)l=this.__charBounds[d][g],this._reSpaceAndTab.test(a[g])?(l.width+=e,l.kernedWidth+=e,l.left+=i,i+=e):l.left+=i}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const s=t?this._unwrappedTextLines:this._textLines;let i;for(i=0;i<s.length;i++){if(e<=s[i].length)return{lineIndex:i,charIndex:e};e-=s[i].length+this.missingNewlineOffset(i,t)}return{lineIndex:i-1,charIndex:s[i-1].length<e?s[i-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Is?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,s){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case We:e.textBaseline="middle";break;case"ascender":e.textBaseline=Us;break;case"descender":e.textBaseline=Zm}e.font=this._getFontDeclaration(t,s)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,s=this._textLines.length;t<s;t++){const i=this.getLineWidth(t);i>e&&(e=i)}return e}_renderTextLine(e,t,s,i,a,l){this._renderChars(e,t,s,i,a,l)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,s=this._getLeftOffset();let i=this._getTopOffset();for(let a=0,l=this._textLines.length;a<l;a++){const c=this.getHeightOfLine(a);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",a)){i+=c;continue}const d=this._textLines[a].length,h=this._getLineLeftOffset(a);let g,m,y=0,b=0,S=this.getValueOfPropertyAt(a,0,"textBackgroundColor");for(let _=0;_<d;_++){const T=this.__charBounds[a][_];m=this.getValueOfPropertyAt(a,_,"textBackgroundColor"),this.path?(e.save(),e.translate(T.renderLeft,T.renderTop),e.rotate(T.angle),e.fillStyle=m,m&&e.fillRect(-T.width/2,-c/this.lineHeight*(1-this._fontSizeFraction),T.width,c/this.lineHeight),e.restore()):m!==S?(g=s+h+b,this.direction==="rtl"&&(g=this.width-g-y),e.fillStyle=S,S&&e.fillRect(g,i,y,c/this.lineHeight),b=T.left,y=T.width,S=m):y+=T.kernedWidth}m&&!this.path&&(g=s+h+b,this.direction==="rtl"&&(g=this.width-g-y),e.fillStyle=m,e.fillRect(g,i,y,c/this.lineHeight)),i+=c}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,s,i){const a=vc.getFontCache(t),l=this._getFontDeclaration(t),c=s+e,d=s&&l===this._getFontDeclaration(i),h=t.fontSize/this.CACHE_FONT_SIZE;let g,m,y,b;if(s&&a[s]!==void 0&&(y=a[s]),a[e]!==void 0&&(b=g=a[e]),d&&a[c]!==void 0&&(m=a[c],b=m-y),g===void 0||y===void 0||m===void 0){const S=function(){return lm||(lm=vn({width:0,height:0}).getContext("2d")),lm}();this._setTextStyles(S,t,!0),g===void 0&&(b=g=S.measureText(e).width,a[e]=g),y===void 0&&d&&s&&(y=S.measureText(s).width,a[s]=y),d&&m===void 0&&(m=S.measureText(c).width,a[c]=m,b=m-y)}return{width:g*h,kernedWidth:b*h}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,s,i=0;const a=this.pathSide===Vt,l=this.path,c=this._textLines[e],d=c.length,h=new Array(d);this.__charBounds[e]=h;for(let g=0;g<d;g++){const m=c[g];s=this._getGraphemeBox(m,e,g,t),h[g]=s,i+=s.kernedWidth,t=m}if(h[d]={left:s?s.left+s.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},l&&l.segmentsInfo){let g=0;const m=l.segmentsInfo[l.segmentsInfo.length-1].length;switch(this.textAlign){case dt:g=a?m-i:0;break;case We:g=(m-i)/2;break;case Vt:g=a?0:m-i}g+=this.pathStartOffset*(a?-1:1);for(let y=a?d-1:0;a?y>=0:y<d;a?y--:y++)s=h[y],g>m?g%=m:g<0&&(g+=m),this._setGraphemeOnPath(g,s),g+=s.kernedWidth}return{width:i,numOfSpaces:0}}_setGraphemeOnPath(e,t){const s=e+t.kernedWidth/2,i=this.path,a=Qz(i.path,s,i.segmentsInfo);t.renderLeft=a.x-i.pathOffset.x,t.renderTop=a.y-i.pathOffset.y,t.angle=a.angle+(this.pathSide===Vt?Math.PI:0)}_getGraphemeBox(e,t,s,i,a){const l=this.getCompleteStyleDeclaration(t,s),c=i?this.getCompleteStyleDeclaration(t,s-1):{},d=this._measureChar(e,l,i,c);let h,g=d.kernedWidth,m=d.width;this.charSpacing!==0&&(h=this._getWidthOfCharSpacing(),m+=h,g+=h);const y={width:m,left:0,height:l.fontSize,kernedWidth:g,deltaY:l.deltaY};if(s>0&&!a){const b=this.__charBounds[t][s-1];y.left=b.left+b.width+d.kernedWidth-d.width}return y}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let s=1,i=this._textLines[e].length;s<i;s++)t=Math.max(this.getHeightOfChar(e,s),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let s=0,i=this._textLines.length;s<i;s++)e=this.getHeightOfLine(s),t+=s===i-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let s=0;const i=this._getLeftOffset(),a=this._getTopOffset();for(let l=0,c=this._textLines.length;l<c;l++){const d=this.getHeightOfLine(l),h=d/this.lineHeight,g=this._getLineLeftOffset(l);this._renderTextLine(t,e,this._textLines[l],i+g,a+s+h,l),s+=d}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(Qt))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,s,i,a,l){const c=this.getHeightOfLine(l),d=this.textAlign.includes(Fn),h=this.path,g=!d&&this.charSpacing===0&&this.isEmptyStyles(l)&&!h,m=this.direction==="ltr",y=this.direction==="ltr"?1:-1,b=t.direction;let S,_,T,C,M,O="",L=0;if(t.save(),b!==this.direction&&(t.canvas.setAttribute("dir",m?"ltr":"rtl"),t.direction=m?"ltr":"rtl",t.textAlign=m?dt:Vt),a-=c*this._fontSizeFraction/this.lineHeight,g)return this._renderChar(e,t,l,0,s.join(""),i,a),void t.restore();for(let j=0,D=s.length-1;j<=D;j++)C=j===D||this.charSpacing||h,O+=s[j],T=this.__charBounds[l][j],L===0?(i+=y*(T.kernedWidth-T.width),L+=T.width):L+=T.kernedWidth,d&&!C&&this._reSpaceAndTab.test(s[j])&&(C=!0),C||(S=S||this.getCompleteStyleDeclaration(l,j),_=this.getCompleteStyleDeclaration(l,j+1),C=E0(S,_,!1)),C&&(h?(t.save(),t.translate(T.renderLeft,T.renderTop),t.rotate(T.angle),this._renderChar(e,t,l,j,O,-L/2,0),t.restore()):(M=i,this._renderChar(e,t,l,j,O,M,a)),O="",S=_,i+=y*L,L=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,s=this.height+this.strokeWidth,i=vn({width:t,height:s}),a=i.getContext("2d");return i.width=t,i.height=s,a.beginPath(),a.moveTo(0,0),a.lineTo(t,0),a.lineTo(t,s),a.lineTo(0,s),a.closePath(),a.translate(t/2,s/2),a.fillStyle=e.toLive(a),this._applyPatternGradientTransform(a,e),a.fill(),a.createPattern(i,"no-repeat")}handleFiller(e,t,s){let i,a;return gn(s)?s.gradientUnits==="percentage"||s.gradientTransform||s.patternTransform?(i=-this.width/2,a=-this.height/2,e.translate(i,a),e[t]=this._applyPatternGradientTransformText(s),{offsetX:i,offsetY:a}):(e[t]=s.toLive(e),this._applyPatternGradientTransform(e,s)):(e[t]=s,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:s,strokeWidth:i}=t;return e.lineWidth=i,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",s)}_setFillStyles(e,t){let{fill:s}=t;return this.handleFiller(e,"fillStyle",s)}_renderChar(e,t,s,i,a,l,c){const d=this._getStyleDeclaration(s,i),h=this.getCompleteStyleDeclaration(s,i),g=e==="fillText"&&h.fill,m=e==="strokeText"&&h.stroke&&h.strokeWidth;if(m||g){if(t.save(),t.font=this._getFontDeclaration(h),d.textBackgroundColor&&this._removeShadow(t),d.deltaY&&(c+=d.deltaY),g){const y=this._setFillStyles(t,h);t.fillText(a,l-y.offsetX,c-y.offsetY)}if(m){const y=this._setStrokeStyles(t,h);t.strokeText(a,l-y.offsetX,c-y.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,s){const i=this.get2DCursorLocation(e,!0),a=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),l=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),c={fontSize:a*s.size,deltaY:l+a*s.baseline};this.setSelectionStyles(c,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),s=this.width-t,i=this.textAlign,a=this.direction,l=this.isEndOfWrapping(e);let c=0;return i===Fn||i===xc&&!l||i===yc&&!l||i===Ph&&!l?0:(i===We&&(c=s/2),i===Vt&&(c=s),i===xc&&(c=s/2),i===yc&&(c=s),a==="rtl"&&(i===Vt||i===Fn||i===yc?c=0:i===dt||i===Ph?c=-s:i!==We&&i!==xc||(c=-s/2)),c)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,s){var i;return(i=this._getStyleDeclaration(e,t)[s])!==null&&i!==void 0?i:this[s]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let s=this._getTopOffset();const i=this._getLeftOffset(),a=this.path,l=this._getWidthOfCharSpacing(),c=t==="linethrough"?.5:t==="overline"?1:0,d=this.offsets[t];for(let h=0,g=this._textLines.length;h<g;h++){const m=this.getHeightOfLine(h);if(!this[t]&&!this.styleHas(t,h)){s+=m;continue}const y=this._textLines[h],b=m/this.lineHeight,S=this._getLineLeftOffset(h);let _=0,T=0,C=this.getValueOfPropertyAt(h,0,t),M=this.getValueOfPropertyAt(h,0,Qt),O=this.getValueOfPropertyAt(h,0,aa),L=C,j=M,D=O;const k=s+b*(1-this._fontSizeFraction);let B=this.getHeightOfChar(h,0),P=this.getValueOfPropertyAt(h,0,"deltaY");for(let F=0,ee=y.length;F<ee;F++){const X=this.__charBounds[h][F];L=this.getValueOfPropertyAt(h,F,t),j=this.getValueOfPropertyAt(h,F,Qt),D=this.getValueOfPropertyAt(h,F,aa);const ae=this.getHeightOfChar(h,F),R=this.getValueOfPropertyAt(h,F,"deltaY");if(a&&L&&j){const V=this.fontSize*D/1e3;e.save(),e.fillStyle=M,e.translate(X.renderLeft,X.renderTop),e.rotate(X.angle),e.fillRect(-X.kernedWidth/2,d*ae+R-c*V,X.kernedWidth,V),e.restore()}else if((L!==C||j!==M||ae!==B||D!==O||R!==P)&&T>0){const V=this.fontSize*O/1e3;let K=i+S+_;this.direction==="rtl"&&(K=this.width-K-T),C&&M&&O&&(e.fillStyle=M,e.fillRect(K,k+d*B+P-c*V,T,V)),_=X.left,T=X.width,C=L,O=D,M=j,B=ae,P=R}else T+=X.kernedWidth}let z=i+S+_;this.direction==="rtl"&&(z=this.width-z-T),e.fillStyle=j;const I=this.fontSize*D/1e3;L&&j&&D&&e.fillRect(z,k+d*B+P-c*I,T-l,I),s+=m}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:s=this.fontWeight,fontSize:i=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const l=e.includes("'")||e.includes('"')||e.includes(",")||xs.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,s,"".concat(a?this.CACHE_FONT_SIZE:i,"px"),l].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return T0(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),s=new Array(t.length),i=[`
`];let a=[];for(let l=0;l<t.length;l++)s[l]=this.graphemeSplit(t[l]),a=a.concat(s[l],i);return a.pop(),{_unwrappedLines:s,lines:t,graphemeText:a,graphemeLines:s}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y(Y({},super.toObject([...rj,...e])),{},{styles:gz(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:s}=this.constructor;super.set(e,t);let i=!1,a=!1;if(typeof e=="object")for(const l in e)l==="path"&&this.setPathInfo(),i=i||s.includes(l),a=a||l==="path";else i=s.includes(e),a=e==="path";return a&&this.setPathInfo(),i&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,s){const i=Di(e,xs.ATTRIBUTE_NAMES,s),a=Y(Y({},t),i),{textAnchor:l=dt,textDecoration:c="",dx:d=0,dy:h=0,top:g=0,left:m=0,fontSize:y=h0,strokeWidth:b=1}=a,S=jt(a,TI),_=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),Y({left:m+d,top:g+h,underline:c.includes("underline"),overline:c.includes("overline"),linethrough:c.includes("line-through"),strokeWidth:0,fontSize:y},S)),T=_.getScaledHeight()/_.height,C=((_.height+_.strokeWidth)*_.lineHeight-_.height)*T,M=_.getScaledHeight()+C;let O=0;return l===We&&(O=_.getScaledWidth()/2),l===Vt&&(O=_.getScaledWidth()),_.set({left:_.left-O,top:_.top-(M-_.fontSize*(.07+_._fontSizeFraction))/_.lineHeight,strokeWidth:b}),_}static fromObject(e){return this._fromObject(Y(Y({},e),{},{styles:pz(e.styles||{},e.text)}),{extraParam:"text"})}}G(xs,"textLayoutProperties",ij),G(xs,"cacheProperties",[...Ai,...rj]),G(xs,"ownDefaults",jU),G(xs,"type","Text"),G(xs,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),G(xs,"ATTRIBUTE_NAMES",wr.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),gj(xs,[class extends tj{_toSVG(){const n=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(n){const e=this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0}),t=this.path;return t?e+t._createBaseSVGMarkup(t._toSVG(),{reviver:n,withShadow:!0,additionalTransform:Dc(this.calcOwnMatrix())}):e}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:e,textSpans:t}=n;const s=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(CI,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",s?'text-decoration="'.concat(s,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(n,e){const t=[],s=[];let i,a=n;this.backgroundColor&&s.push(...om(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let l=0,c=this._textLines.length;l<c;l++)i=this._getLineLeftOffset(l),this.direction==="rtl"&&(i+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",l))&&this._setSVGTextLineBg(s,l,e+i,a),this._setSVGTextLineText(t,l,e+i,a),a+=this.getHeightOfLine(l);return{textSpans:t,textBgRects:s}}_createTextCharSpan(n,e,t,s,i){const a=at.NUM_FRACTION_DIGITS,l=this.getSvgSpanStyles(e,n!==n.trim()||!!n.match(_I)),c=l?'style="'.concat(l,'"'):"",d=e.deltaY,h=d?' dy="'.concat(wt(d,a),'" '):"",{angle:g,renderLeft:m,renderTop:y,width:b}=i;let S="";if(m!==void 0){const _=b/2;g&&(S=' rotate="'.concat(wt(Li(g),a),'"'));const T=Ho({angle:Li(g)});T[4]=m,T[5]=y;const C=new re(-_,0).transform(T);t=C.x,s=C.y}return'<tspan x="'.concat(wt(t,a),'" y="').concat(wt(s,a),'" ').concat(h).concat(S).concat(c,">").concat(dz(n),"</tspan>")}_setSVGTextLineText(n,e,t,s){const i=this.getHeightOfLine(e),a=this.textAlign.includes(Fn),l=this._textLines[e];let c,d,h,g,m,y="",b=0;s+=i*(1-this._fontSizeFraction)/this.lineHeight;for(let S=0,_=l.length-1;S<=_;S++)m=S===_||this.charSpacing||this.path,y+=l[S],h=this.__charBounds[e][S],b===0?(t+=h.kernedWidth-h.width,b+=h.width):b+=h.kernedWidth,a&&!m&&this._reSpaceAndTab.test(l[S])&&(m=!0),m||(c=c||this.getCompleteStyleDeclaration(e,S),d=this.getCompleteStyleDeclaration(e,S+1),m=E0(c,d,!0)),m&&(g=this._getStyleDeclaration(e,S),n.push(this._createTextCharSpan(y,g,t,s,h)),y="",c=d,this.direction==="rtl"?t-=b:t+=b,b=0)}_setSVGTextLineBg(n,e,t,s){const i=this._textLines[e],a=this.getHeightOfLine(e)/this.lineHeight;let l,c=0,d=0,h=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let g=0;g<i.length;g++){const{left:m,width:y,kernedWidth:b}=this.__charBounds[e][g];l=this.getValueOfPropertyAt(e,g,"textBackgroundColor"),l!==h?(h&&n.push(...om(h,t+d,s,c,a)),d=m,c=y,h=l):c+=b}l&&n.push(...om(h,t+d,s,c,a))}_getSVGLineTopOffset(n){let e,t=0;for(e=0;e<n;e++)t+=this.getHeightOfLine(e);const s=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*s/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," text-decoration-thickness: ").concat(wt(this.textDecorationThickness*this.getObjectScaling().y/10,at.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(n,e){const{fontFamily:t,strokeWidth:s,stroke:i,fill:a,fontSize:l,fontStyle:c,fontWeight:d,deltaY:h,textDecorationThickness:g,linethrough:m,overline:y,underline:b}=n,S=this.getSvgTextDecoration({underline:b??this.underline,overline:y??this.overline,linethrough:m??this.linethrough}),_=g||this.textDecorationThickness;return[i?Nc(Is,i):"",s?"stroke-width: ".concat(s,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",l?"font-size: ".concat(l,"px; "):"",c?"font-style: ".concat(c,"; "):"",d?"font-weight: ".concat(d,"; "):"",S?"text-decoration: ".concat(S,"; text-decoration-thickness: ").concat(wt(_*this.getObjectScaling().y/10,at.NUM_FRACTION_DIGITS),"%; "):"",a?Nc(Qt,a):"",h?"baseline-shift: ".concat(-h,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(e=>n[e.replace("-","")]).join(" ")}}]),je.setClass(xs),je.setSVGClass(xs);class EI{constructor(e){G(this,"target",void 0),G(this,"__mouseDownInPlace",!1),G(this,"__dragStartFired",!1),G(this,"__isDraggingOver",!1),G(this,"__dragStartSelection",void 0),G(this,"__dragImageDisposer",void 0),G(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(s=>s()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,s=t.getSelectionStartFromPointer(e);return t.isEditing&&s>=t.selectionStart&&s<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var s;let{selectionStart:i,selectionEnd:a}=t;const l=this.target,c=l.canvas,d=new re(l.flipX?-1:1,l.flipY?-1:1),h=l._getCursorBoundaries(i),g=new re(h.left+h.leftOffset,h.top+h.topOffset).multiply(d).transform(l.calcTransformMatrix()),m=c.getScenePoint(e).subtract(g),y=l.getCanvasRetinaScaling(),b=l.getBoundingRect(),S=g.subtract(new re(b.left,b.top)),_=c.viewportTransform,T=S.add(m).transform(_,!0),C=l.backgroundColor,M=C0(l.styles);l.backgroundColor="";const O={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};l.setSelectionStyles(O,0,i),l.setSelectionStyles(O,a,l.text.length),l.dirty=!0;const L=l.toCanvasElement({enableRetinaScaling:c.enableRetinaScaling,viewportTransform:!0});l.backgroundColor=C,l.styles=M,l.dirty=!0,av(L,{position:"fixed",left:"".concat(-L.width,"px"),border:zs,width:"".concat(L.width/y,"px"),height:"".concat(L.height/y,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{L.remove()},kn(e.target||this.target.hiddenTextarea).body.appendChild(L),(s=e.dataTransfer)===null||s===void 0||s.setDragImage(L,T.x,T.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,s=this.isActive();if(s&&e.dataTransfer){const i=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},a=t._text.slice(i.selectionStart,i.selectionEnd).join(""),l=Y({text:t.text,value:a},i);e.dataTransfer.setData("text/plain",a),e.dataTransfer.setData("application/fabric",JSON.stringify({value:a,styles:t.getSelectionStyles(i.selectionStart,i.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,l)}return t.abortCursorAnimation(),s}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),s=this.__dragStartSelection;return t<s.selectionStart||t>s.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const s=this.targetCanDrop(t);!this.__isDraggingOver&&s&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,s=this.targetCanDrop(t);!this.__isDraggingOver&&s?this.__isDraggingOver=!0:this.__isDraggingOver&&!s&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:s}=e,i=s.defaultPrevented;this.__isDraggingOver=!1,s.preventDefault();let a=(t=s.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(a&&!i){const l=this.target,c=l.canvas;let d=l.getSelectionStartFromPointer(s);const{styles:h}=s.dataTransfer.types.includes("application/fabric")?JSON.parse(s.dataTransfer.getData("application/fabric")):{},g=a[Math.max(0,a.length-1)],m=0;if(this.__dragStartSelection){const y=this.__dragStartSelection.selectionStart,b=this.__dragStartSelection.selectionEnd;d>y&&d<=b?d=y:d>b&&(d-=b-y),l.removeChars(y,b),delete this.__dragStartSelection}l._reNewline.test(g)&&(l._reNewline.test(l._text[d])||d===l._text.length)&&(a=a.trimEnd()),e.didDrop=!0,e.dropTarget=l,l.insertChars(a,h,d),c.setActiveObject(l),l.enterEditing(s),l.selectionStart=Math.min(d+m,l._text.length),l.selectionEnd=Math.min(l.selectionStart+a.length,l._text.length),l.hiddenTextarea.value=l.text,l._updateTextarea(),l.hiddenTextarea.focus(),l.fire(Mh,{index:d+m,action:"drop"}),c.fire("text:changed",{target:l}),c.contextTopDirty=!0,c.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var s;const i=this.target,a=this.target.canvas,{selectionStart:l,selectionEnd:c}=this.__dragStartSelection,d=((s=t.dataTransfer)===null||s===void 0?void 0:s.dropEffect)||zs;d===zs?(i.selectionStart=l,i.selectionEnd=c,i._updateTextarea(),i.hiddenTextarea.focus()):(i.clearContextTop(),d==="move"&&(i.removeChars(l,c),i.selectionStart=i.selectionEnd=l,i.hiddenTextarea&&(i.hiddenTextarea.value=i.text),i._updateTextarea(),i.fire(Mh,{index:l,action:"dragend"}),a.fire("text:changed",{target:i}),a.requestRenderAll()),i.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const TC=/[ \n\.,;!\?\-]/;class jI extends xs{constructor(){super(...arguments),G(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:s,delay:i,onComplete:a}=e;return cj({startValue:this._currentCursorOpacity,endValue:t,duration:s,delay:i,onComplete:a,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:l=>{this._currentCursorOpacity=l,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,s=e-1;if(this._reSpace.test(this._text[s]))for(;this._reSpace.test(this._text[s]);)t++,s--;for(;/\S/.test(this._text[s])&&s>-1;)t++,s--;return e-t}findWordBoundaryRight(e){let t=0,s=e;if(this._reSpace.test(this._text[s]))for(;this._reSpace.test(this._text[s]);)t++,s++;for(;/\S/.test(this._text[s])&&s<this._text.length;)t++,s++;return e+t}findLineBoundaryLeft(e){let t=0,s=e-1;for(;!/\n/.test(this._text[s])&&s>-1;)t++,s--;return e-t}findLineBoundaryRight(e){let t=0,s=e;for(;!/\n/.test(this._text[s])&&s<this._text.length;)t++,s++;return e+t}searchWordBoundary(e,t){const s=this._text;let i=e>0&&this._reSpace.test(s[e])&&(t===-1||!f0.test(s[e-1]))?e-1:e,a=s[i];for(;i>0&&i<s.length&&!TC.test(a);)i+=t,a=s[i];return t===-1&&TC.test(a)&&i++,i}selectWord(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const s=this.searchWordBoundary(e,-1),i=Math.max(s,this.searchWordBoundary(e,1));this.selectionStart=s,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const s=this.findLineBoundaryLeft(e),i=this.findLineBoundaryRight(e);this.selectionStart=s,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;kn(t).activeElement!==t&&t.focus();const s=this.getSelectionStartFromPointer(e),i=this.selectionStart,a=this.selectionEnd;(s===this.__selectionStartOnMouseDown&&i!==a||i!==s&&a!==s)&&(s>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=s):(this.selectionStart=s,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===a||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,s){const i=s.slice(0,e),a=this.graphemeSplit(i).length;if(e===t)return{selectionStart:a,selectionEnd:a};const l=s.slice(e,t);return{selectionStart:a,selectionEnd:a+this.graphemeSplit(l).length}}fromGraphemeToStringSelection(e,t,s){const i=s.slice(0,e).join("").length;return e===t?{selectionStart:i,selectionEnd:i}:{selectionStart:i,selectionEnd:i+s.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),s=this.get2DCursorLocation(e),i=s.lineIndex,a=s.charIndex,l=this.getValueOfPropertyAt(i,a,"fontSize")*this.lineHeight,c=t.leftOffset,d=this.getCanvasRetinaScaling(),h=this.canvas.upperCanvasEl,g=h.width/d,m=h.height/d,y=g-l,b=m-l,S=new re(t.left+c,t.top+t.topOffset+l).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new re(h.clientWidth/g,h.clientHeight/m));return S.x<0&&(S.x=0),S.x>y&&(S.x=y),S.y<0&&(S.y=0),S.y>b&&(S.y=b),S.x+=this.canvas._offset.left,S.y+=this.canvas._offset.top,{left:"".concat(S.x,"px"),top:"".concat(S.y,"px"),fontSize:"".concat(l,"px"),charHeight:l}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(Oh),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:s,charIndex:i}=this.get2DCursorLocation(e,!0),{lineIndex:a,charIndex:l}=this.get2DCursorLocation(t,!0);if(s!==a){if(this.styles[s])for(let c=i;c<this._unwrappedTextLines[s].length;c++)delete this.styles[s][c];if(this.styles[a])for(let c=l;c<this._unwrappedTextLines[a].length;c++){const d=this.styles[a][c];d&&(this.styles[s]||(this.styles[s]={}),this.styles[s][i+c-l]=d)}for(let c=s+1;c<=a;c++)delete this.styles[c];this.shiftLineStyles(a,s-a)}else if(this.styles[s]){const c=this.styles[s],d=l-i;for(let h=i;h<l;h++)delete c[h];for(const h in this.styles[s]){const g=parseInt(h,10);g>=l&&(c[g-d]=c[h],delete c[h])}}}shiftLineStyles(e,t){const s=Object.assign({},this.styles);for(const i in this.styles){const a=parseInt(i,10);a>e&&(this.styles[a+t]=s[a],s[a-t]||delete this.styles[a])}}insertNewlineStyleObject(e,t,s,i){const a={},l=this._unwrappedTextLines[e].length,c=l===t;let d=!1;s||(s=1),this.shiftLineStyles(e,s);const h=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const m in this.styles[e]){const y=parseInt(m,10);y>=t&&(d=!0,a[y-t]=this.styles[e][m],c&&t===0||delete this.styles[e][m])}let g=!1;for(d&&!c&&(this.styles[e+s]=a,g=!0),(g||l>t)&&s--;s>0;)i&&i[s-1]?this.styles[e+s]={0:Y({},i[s-1])}:h?this.styles[e+s]={0:Y({},h)}:delete this.styles[e+s],s--;this._forceClearCache=!0}insertCharStyleObject(e,t,s,i){this.styles||(this.styles={});const a=this.styles[e],l=a?Y({},a):{};s||(s=1);for(const d in l){const h=parseInt(d,10);h>=t&&(a[h+s]=l[h],l[h-s]||delete a[h])}if(this._forceClearCache=!0,i){for(;s--;)Object.keys(i[s]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+s]=Y({},i[s]));return}if(!a)return;const c=a[t?t-1:1];for(;c&&s--;)this.styles[e][t+s]=Y({},c)}insertNewStyleBlock(e,t,s){const i=this.get2DCursorLocation(t,!0),a=[0];let l,c=0;for(let d=0;d<e.length;d++)e[d]===`
`?(c++,a[c]=0):a[c]++;for(a[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,a[0],s),s=s&&s.slice(a[0]+1)),c&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+a[0],c),l=1;l<c;l++)a[l]>0?this.insertCharStyleObject(i.lineIndex+l,0,a[l],s):s&&this.styles[i.lineIndex+l]&&s[0]&&(this.styles[i.lineIndex+l][0]=s[0]),s=s&&s.slice(a[l]+1);a[l]>0&&this.insertCharStyleObject(i.lineIndex+l,0,a[l],s)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:s;i>s&&this.removeStyleFromTo(s,i);const a=this.graphemeSplit(e);this.insertNewStyleBlock(a,s,t),this._text=[...this._text.slice(0,s),...a,...this._text.slice(i)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,s){s<=e?(t===e?this._selectionDirection=dt:this._selectionDirection===Vt&&(this._selectionDirection=dt,this.selectionEnd=e),this.selectionStart=s):s>e&&s<t?this._selectionDirection===Vt?this.selectionEnd=s:this.selectionStart=s:(t===e?this._selectionDirection=Vt:this._selectionDirection===dt&&(this._selectionDirection=Vt,this.selectionStart=t),this.selectionEnd=s)}}class kI extends jI{initHiddenTextarea(){const e=this.canvas&&kn(this.canvas.getElement())||Io(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(l=>{let[c,d]=l;return t.setAttribute(c,d)});const{top:s,left:i,fontSize:a}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(s,"; left: ").concat(i,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(a,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(l=>{let[c,d]=l;return t.addEventListener(c,this[d].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste,{value:s,selectionStart:i,selectionEnd:a}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const l=()=>{this.updateFromTextArea(),this.fire(Mh),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void l();const c=this._splitTextIntoLines(s).graphemeText,d=this._text.length,h=c.length,g=this.selectionStart,m=this.selectionEnd,y=g!==m;let b,S,_,T,C=h-d;const M=this.fromStringToGraphemeSelection(i,a,s),O=g>M.selectionStart;y?(S=this._text.slice(g,m),C+=m-g):h<d&&(S=O?this._text.slice(m+C,m):this._text.slice(g,g-C));const L=c.slice(M.selectionEnd-C,M.selectionEnd);if(S&&S.length&&(L.length&&(b=this.getSelectionStyles(g,g+1,!1),b=L.map(()=>b[0])),y?(_=g,T=m):O?(_=m-S.length,T=m):(_=m,T=m+S.length),this.removeStyleFromTo(_,T)),L.length){const{copyPasteData:j}=qn();t&&L.join("")===j.copiedText&&!at.disableStyleCopyPaste&&(b=j.copiedTextStyle),this.insertNewStyleBlock(L,g,b)}l()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:s,selectionEnd:i}=t;this.compositionStart=s,this.compositionEnd=i,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=qn();e.copiedText=this.getSelectedText(),at.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let s,i=this._getLineLeftOffset(e);return t>0&&(s=this.__charBounds[e][t-1],i+=s.left+s.width),i}getDownCursorOffset(e,t){const s=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(s),a=i.lineIndex;if(a===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-s;const l=i.charIndex,c=this._getWidthBeforeCursor(a,l),d=this._getIndexOnLine(a+1,c);return this._textLines[a].slice(l).length+d+1+this.missingNewlineOffset(a)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const s=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(s),a=i.lineIndex;if(a===0||e.metaKey||e.keyCode===33)return-s;const l=i.charIndex,c=this._getWidthBeforeCursor(a,l),d=this._getIndexOnLine(a-1,c),h=this._textLines[a].slice(0,l),g=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+d-h.length+(1-g)}_getIndexOnLine(e,t){const s=this._textLines[e];let i,a,l=this._getLineLeftOffset(e),c=0;for(let d=0,h=s.length;d<h;d++)if(i=this.__charBounds[e][d].width,l+=i,l>t){a=!0;const g=l-i,m=l,y=Math.abs(g-t);c=Math.abs(m-t)<y?d:d-1;break}return a||(c=s.length-1),c}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const s=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===Vt);if(t.shiftKey?this.moveCursorWithShift(s):this.moveCursorWithoutShift(s),s!==0){const i=this.text.length;this.selectionStart=Oo(0,this.selectionStart,i),this.selectionEnd=Oo(0,this.selectionEnd,i),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===dt?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,s){let i;if(e.altKey)i=this["findWordBoundary".concat(s)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=s==="Left"?-1:1,!0;i=this["findLineBoundary".concat(s)](this[t])}return i!==void 0&&this[t]!==i&&(this[t]=i,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=dt,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Vt&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=dt,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const s="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[s](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===dt&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Vt,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Vt,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const EC=n=>!!n.button;class MI extends kI{constructor(){super(...arguments),G(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new EI(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:s}=e;this.canvas&&this.editable&&!EC(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),s&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=s||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:s}=e;const i=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const a=this.canvas._activeObject;if(a&&a!==this)return}!this.editable||this.group&&!this.group.interactive||s&&s.actionPerformed||EC(t)||i||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),s=this.selectionStart,i=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(s,i,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(Mn(this.calcTransformMatrix())).add(new re(-this._getLeftOffset(),-this._getTopOffset()));let s=0,i=0,a=0;for(let h=0;h<this._textLines.length&&s<=t.y;h++)s+=this.getHeightOfLine(h),a=h,h>0&&(i+=this._textLines[h-1].length+this.missingNewlineOffset(h-1));let l=Math.abs(this._getLineLeftOffset(a));const c=this._textLines[a].length,d=this.__charBounds[a];for(let h=0;h<c;h++){const g=l+d[h].kernedWidth;if(t.x<=g){Math.abs(t.x-g)<=Math.abs(t.x-l)&&i++;break}l=g,i++}return Math.min(this.flipX?c-i:i,this._text.length)}}const jd="moveCursorUp",kd="moveCursorDown",Md="moveCursorLeft",Od="moveCursorRight",Ld="exitEditing",jC=(n,e)=>{const t=e.getRetinaScaling();n.setTransform(t,0,0,t,0,0);const s=e.viewportTransform;n.transform(s[0],s[1],s[2],s[3],s[4],s[5])},OI=Y({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Ld,27:Ld,33:jd,34:kd,35:Od,36:Md,37:Md,38:jd,39:Od,40:kd},keysMapRtl:{9:Ld,27:Ld,33:jd,34:kd,35:Md,36:Od,37:Od,38:jd,39:Md,40:kd},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class bi extends MI{static getDefaults(){return Y(Y({},super.getDefaults()),bi.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,Y(Y({},bi.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof ov&&this.canvas.textEditingManager.remove(this),t instanceof ov&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,s=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,s)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,s)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const s=super.toCanvasElement(e);return this.isEditing=t,s}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries(),s=this.findAncestorsWithClipPath(),i=s.length>0;let a,l=e;if(i){a=vn(e.canvas),l=a.getContext("2d"),jC(l,this.canvas);const c=this.calcTransformMatrix();l.transform(c[0],c[1],c[2],c[3],c[4],c[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(l,t):this.renderCursor(l,t),i)for(const c of s){const d=c.clipPath,h=vn(e.canvas),g=h.getContext("2d");if(jC(g,this.canvas),!d.absolutePositioned){const m=c.calcTransformMatrix();g.transform(m[0],m[1],m[2],m[3],m[4],m[5])}d.transform(g),d.drawObject(g,!0,{}),this.drawClipPathOnCache(l,d,h)}i&&(e.setTransform(1,0,0,1,0,0),e.drawImage(a,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const s=this._getLeftOffset(),i=this._getTopOffset(),a=this._getCursorBoundariesOffsets(e,t);return{left:s,top:i,leftOffset:a.left,topOffset:a.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,s=0;const{charIndex:i,lineIndex:a}=this.get2DCursorLocation(e);for(let h=0;h<a;h++)t+=this.getHeightOfLine(h);const l=this._getLineLeftOffset(a),c=this.__charBounds[a][i];c&&(s=c.left),this.charSpacing!==0&&i===this._textLines[a].length&&(s-=this._getWidthOfCharSpacing());const d={top:t,left:l+(s>0?s:0)};return this.direction==="rtl"&&(this.textAlign===Vt||this.textAlign===Fn||this.textAlign===yc?d.left*=-1:this.textAlign===dt||this.textAlign===Ph?d.left=l-(s>0?s:0):this.textAlign!==We&&this.textAlign!==xc||(d.left=l-(s>0?s:0))),d}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const s=this.get2DCursorLocation(e),i=s.lineIndex,a=s.charIndex>0?s.charIndex-1:0,l=this.getValueOfPropertyAt(i,a,"fontSize"),c=this.getObjectScaling().x*this.canvas.getZoom(),d=this.cursorWidth/c,h=this.getValueOfPropertyAt(i,a,"deltaY"),g=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-l*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(i,a,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-d/2,top:g+t.top+h,width:d,height:l}}_renderCursor(e,t,s){const{color:i,opacity:a,left:l,top:c,width:d,height:h}=this.getCursorRenderingData(s,t);e.fillStyle=i,e.globalAlpha=a,e.fillRect(l,c,d,h)}renderSelection(e,t){const s={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,s,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,s){const i=t.selectionStart,a=t.selectionEnd,l=this.textAlign.includes(Fn),c=this.get2DCursorLocation(i),d=this.get2DCursorLocation(a),h=c.lineIndex,g=d.lineIndex,m=c.charIndex<0?0:c.charIndex,y=d.charIndex<0?0:d.charIndex;for(let b=h;b<=g;b++){const S=this._getLineLeftOffset(b)||0;let _=this.getHeightOfLine(b),T=0,C=0,M=0;if(b===h&&(C=this.__charBounds[h][m].left),b>=h&&b<g)M=l&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===g)if(y===0)M=this.__charBounds[g][y].left;else{const k=this._getWidthOfCharSpacing();M=this.__charBounds[g][y-1].left+this.__charBounds[g][y-1].width-k}T=_,(this.lineHeight<1||b===g&&this.lineHeight>1)&&(_/=this.lineHeight);let O=s.left+S+C,L=_,j=0;const D=M-C;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",L=1,j=_):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Vt||this.textAlign===Fn||this.textAlign===yc?O=this.width-O-D:this.textAlign===dt||this.textAlign===Ph?O=s.left+S-M:this.textAlign!==We&&this.textAlign!==xc||(O=s.left+S-M)),e.fillRect(O,s.top+s.topOffset+j,D,L),s.topOffset+=T}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,Qt)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}G(bi,"ownDefaults",OI),G(bi,"type","IText"),je.setClass(bi),je.setClass(bi,"i-text");class ea extends bi{static getDefaults(){return Y(Y({},super.getDefaults()),ea.ownDefaults)}constructor(e,t){super(e,Y(Y({},ea.ownDefaults),t))}static createControls(){return{controls:oz()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Fn)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,s=0,i=0;const a={};for(let l=0;l<e.graphemeLines.length;l++)e.graphemeText[i]===`
`&&l>0?(s=0,i++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[i])&&l>0&&(s++,i++),a[l]={line:t,offset:s},i+=e.graphemeLines[l].length,s+=e.graphemeLines[l].length;return a}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const s=this._styleMap[t];s&&(t=s.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,s=0,i=e+1,a=!1;const l=this._styleMap[e],c=this._styleMap[e+1];l&&(e=l.line,s=l.offset),c&&(i=c.line,a=i===e,t=c.offset);const d=e===void 0?this.styles:{line:this.styles[e]};for(const h in d)for(const g in d[h]){const m=parseInt(g,10);if(m>=s&&(!a||m<t))for(const y in d[h][g])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const s=this._styleMap[e];if(!s)return{};e=s.line,t=s.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,s){const i=this._styleMap[e];super._setStyleDeclaration(i.line,i.offset+t,s)}_deleteStyleDeclaration(e,t){const s=this._styleMap[e];super._deleteStyleDeclaration(s.line,s.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const s=this.getGraphemeDataForRender(e),i=[];for(let a=0;a<s.wordsData.length;a++)i.push(...this._wrapLine(a,t,s));return this.isWrapping=!1,i}getGraphemeDataForRender(e){const t=this.splitByGrapheme,s=t?"":" ";let i=0;return{wordsData:e.map((a,l)=>{let c=0;const d=t?this.graphemeSplit(a):this.wordSplit(a);return d.length===0?[{word:[],width:0}]:d.map(h=>{const g=t?[h]:this.graphemeSplit(h),m=this._measureWord(g,l,c);return i=Math.max(m,i),c+=g.length+s.length,{word:g,width:m}})}),largestWordWidth:i}}_measureWord(e,t){let s,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=0;for(let l=0,c=e.length;l<c;l++)a+=this._getGraphemeBox(e[l],t,l+i,s,!0).kernedWidth,s=e[l];return a}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,s){let{largestWordWidth:i,wordsData:a}=s,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const c=this._getWidthOfCharSpacing(),d=this.splitByGrapheme,h=[],g=d?"":" ";let m=0,y=[],b=0,S=0,_=!0;t-=l;const T=Math.max(t,i,this.dynamicMinWidth),C=a[e];let M;for(b=0,M=0;M<C.length;M++){const{word:O,width:L}=C[M];b+=O.length,m+=S+L-c,m>T&&!_?(h.push(y),y=[],m=L,_=!0):m+=c,_||d||y.push(g),y=y.concat(O),S=d?0:this._measureWord([g],e,b),b++,_=!1}return M&&h.push(y),i+l>this.dynamicMinWidth&&(this.dynamicMinWidth=i-c+l),h}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),s=this._wrapText(t.lines,this.width),i=new Array(s.length);for(let a=0;a<s.length;a++)i[a]=s[a].join("");return t.lines=i,t.graphemeLines=s,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const s=parseInt(t,10);if(this._textLines[s]){const i=this._styleMap[t].line;e.set("".concat(i),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}G(ea,"type","Textbox"),G(ea,"textLayoutProperties",[...bi.textLayoutProperties,"width"]),G(ea,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),je.setClass(ea);class kC extends tf{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:s}=e,{clipPath:i,group:a}=s;if(!i||!this.shouldPerformLayout(e))return;const{width:l,height:c}=Si(vj(s,i)),d=new re(l,c);if(i.absolutePositioned)return{center:Co(i.getRelativeCenterPoint(),void 0,a?a.calcTransformMatrix():void 0),size:d};{const h=i.getRelativeCenterPoint().transform(s.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:g=new re,correction:m=new re}=this.calcBoundingBox(t,e)||{};return{center:g.add(h),correction:m.subtract(h),size:d}}return{center:s.getRelativeCenterPoint().add(h),size:d}}}}G(kC,"type","clip-path"),je.setClass(kC);class MC extends tf{getInitialSize(e,t){let{target:s}=e,{size:i}=t;return new re(s.width||i.x,s.height||i.y)}}G(MC,"type","fixed"),je.setClass(MC);class LI extends Rc{subscribeTargets(e){const t=e.target;e.targets.reduce((s,i)=>(i.parent&&s.add(i.parent),s),new Set).forEach(s=>{s.layoutManager.subscribeTargets({target:s,targets:[t]})})}unsubscribeTargets(e){const t=e.target,s=t.getObjects();e.targets.reduce((i,a)=>(a.parent&&i.add(a.parent),i),new Set).forEach(i=>{!s.some(a=>a.parent===i)&&i.layoutManager.unsubscribeTargets({target:i,targets:[t]})})}}class ta extends ia{static getDefaults(){return Y(Y({},super.getDefaults()),ta.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,ta.ownDefaults),this.setOptions(t);const{left:s,top:i,layoutManager:a}=t;this.groupInit(e,{left:s,top:i,layoutManager:a??new LI})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(i=>{const a=this._objects.findIndex(c=>c.isInFrontOf(i)),l=a===-1?this.size():a;this.insertAt(l,i)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(pr("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const s=new Set;t.forEach(i=>{const{parent:a}=i;a&&s.add(a)}),e===k0?s.forEach(i=>{i._onAfterObjectsChange(Rh,t)}):s.forEach(i=>{i._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,s){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const i=Y(Y({hasControls:!1},s),{},{forActiveSelection:!0});for(let a=0;a<this._objects.length;a++)this._objects[a]._renderControls(e,i);super._renderControls(e,t),e.restore()}}G(ta,"type","ActiveSelection"),G(ta,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),je.setClass(ta),je.setClass(ta,"activeSelection");class AI{constructor(){G(this,"resources",{})}applyFilters(e,t,s,i,a){const l=a.getContext("2d");if(!l)return;l.drawImage(t,0,0,s,i);const c={sourceWidth:s,sourceHeight:i,imageData:l.getImageData(0,0,s,i),originalEl:t,originalImageData:l.getImageData(0,0,s,i),canvasEl:a,ctx:l,filterBackend:this};e.forEach(h=>{h.applyTo(c)});const{imageData:d}=c;return d.width===s&&d.height===i||(a.width=d.width,a.height=d.height),l.putImageData(d,0,0),c}}class Dj{constructor(){let{tileSize:e=at.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};G(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),G(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const s=vn({width:e,height:t}),i=s.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});i&&(i.clearColor(0,0,0,0),this.canvas=s,this.gl=i)}applyFilters(e,t,s,i,a,l){const c=this.gl,d=a.getContext("2d");if(!c||!d)return;let h;l&&(h=this.getCachedTexture(l,t));const g={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:s,sourceHeight:i,destinationWidth:s,destinationHeight:i,context:c,sourceTexture:this.createTexture(c,s,i,h?void 0:t),targetTexture:this.createTexture(c,s,i),originalTexture:h||this.createTexture(c,s,i,h?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:a},m=c.createFramebuffer();return c.bindFramebuffer(c.FRAMEBUFFER,m),e.forEach(y=>{y&&y.applyTo(g)}),function(y){const b=y.targetCanvas,S=b.width,_=b.height,T=y.destinationWidth,C=y.destinationHeight;S===T&&_===C||(b.width=T,b.height=C)}(g),this.copyGLTo2D(c,g),c.bindTexture(c.TEXTURE_2D,null),c.deleteTexture(g.sourceTexture),c.deleteTexture(g.targetTexture),c.deleteFramebuffer(m),d.setTransform(1,0,0,1,0,0),g}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,s,i,a){const{NEAREST:l,TEXTURE_2D:c,RGBA:d,UNSIGNED_BYTE:h,CLAMP_TO_EDGE:g,TEXTURE_MAG_FILTER:m,TEXTURE_MIN_FILTER:y,TEXTURE_WRAP_S:b,TEXTURE_WRAP_T:S}=e,_=e.createTexture();return e.bindTexture(c,_),e.texParameteri(c,m,a||l),e.texParameteri(c,y,a||l),e.texParameteri(c,b,g),e.texParameteri(c,S,g),i?e.texImage2D(c,0,d,d,h,i):e.texImage2D(c,0,d,t,s,0,d,h,null),_}getCachedTexture(e,t,s){const{textureCache:i}=this;if(i[e])return i[e];{const a=this.createTexture(this.gl,t.width,t.height,t,s);return a&&(i[e]=a),a}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const s=e.canvas,i=t.targetCanvas,a=i.getContext("2d");if(!a)return;a.translate(0,i.height),a.scale(1,-1);const l=s.height-i.height;a.drawImage(s,0,l,i.width,i.height,0,0,i.width,i.height)}copyGLTo2DPutImageData(e,t){const s=t.targetCanvas.getContext("2d"),i=t.destinationWidth,a=t.destinationHeight,l=i*a*4;if(!s)return;const c=new Uint8Array(this.imageBuffer,0,l),d=new Uint8ClampedArray(this.imageBuffer,0,l);e.readPixels(0,0,i,a,e.RGBA,e.UNSIGNED_BYTE,c);const h=new ImageData(d,i,a);s.putImageData(h,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const s=e.getExtension("WEBGL_debug_renderer_info");if(s){const i=e.getParameter(s.UNMASKED_RENDERER_WEBGL),a=e.getParameter(s.UNMASKED_VENDOR_WEBGL);i&&(t.renderer=i.toLowerCase()),a&&(t.vendor=a.toLowerCase())}return this.gpuInfo=t,t}}let cm;function DI(){const{WebGLProbe:n}=qn();return n.queryWebGL(Oi()),at.enableGLFiltering&&n.isSupported(at.textureSize)?new Dj({tileSize:at.textureSize}):new AI}function um(){return!cm&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(cm=DI()),cm}const NI=["filters","resizeFilter","src","crossOrigin","type"],Nj=["cropX","cropY"];class Cs extends ws{static getDefaults(){return Y(Y({},super.getDefaults()),Cs.ownDefaults)}constructor(e,t){super(),G(this,"_lastScaleX",1),G(this,"_lastScaleY",1),G(this,"_filterScalingX",1),G(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Cs.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(mr()),this.setElement(typeof e=="string"?(this.canvas&&kn(this.canvas.getElement())||Io()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(s),(t=e.classList)===null||t===void 0||t.add(Cs.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=um(!1);t instanceof Dj&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&qn().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,s=this.height/2;e.beginPath(),e.moveTo(-t,-s),e.lineTo(t,-s),e.lineTo(t,s),e.lineTo(-t,s),e.lineTo(-t,-s),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(s=>{s&&t.push(s.toObject())}),Y(Y({},super.toObject([...Nj,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,s=-this.width/2,i=-this.height/2;let a=[],l=[],c="",d="";if(!t)return[];if(this.hasCrop()){const h=mr();a.push('<clipPath id="imageCrop_'+h+`">
`,'	<rect x="'+s+'" y="'+i+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),c=' clip-path="url(#imageCrop_'+h+')" '}if(this.imageSmoothing||(d=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(s-this.cropX,'" y="').concat(i-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(d).concat(c,`></image>
`)),this.stroke||this.strokeDashArray){const h=this.fill;this.fill=null,l=['	<rect x="'.concat(s,'" y="').concat(i,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=h}return a=this.paintFirst!==Qt?a.concat(l,e):a.concat(e,l),a}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ih(e,{crossOrigin:t,signal:s}).then(i=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(i)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,s=this.getTotalObjectScaling(),i=s.x,a=s.y,l=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||i>t&&a>t)return this._element=l,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=a);const c=vn(l),{width:d,height:h}=l;this._element=c,this._lastScaleX=e.scaleX=i,this._lastScaleY=e.scaleY=a,um().applyFilters([e],l,d,h,this._element),this._filterScalingX=c.width/this._originalElement.width,this._filterScalingY=c.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(a=>a&&!a.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,s=t.naturalWidth||t.width,i=t.naturalHeight||t.height;if(this._element===this._originalElement){const a=vn({width:s,height:i});this._element=a,this._filteredEl=a}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,s,i),this._lastScaleX=1,this._lastScaleY=1);um().applyFilters(e,this._originalElement,s,i,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const s=this._filterScalingX,i=this._filterScalingY,a=this.width,l=this.height,c=Math.max(this.cropX,0),d=Math.max(this.cropY,0),h=t.naturalWidth||t.width,g=t.naturalHeight||t.height,m=c*s,y=d*i,b=Math.min(a*s,h-m),S=Math.min(l*i,g-y),_=-a/2,T=-l/2,C=Math.min(a,h/s-c),M=Math.min(l,g/i-d);t&&e.drawImage(t,m,y,b,S,_,T,C,M)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s=this.getOriginalSize();this.width=e||s.width,this.height=t||s.height}parsePreserveAspectRatioAttribute(){const e=TU(this.preserveAspectRatio||""),t=this.width,s=this.height,i={width:t,height:s};let a,l=this._element.width,c=this._element.height,d=1,h=1,g=0,m=0,y=0,b=0;return!e||e.alignX===zs&&e.alignY===zs?(d=t/l,h=s/c):(e.meetOrSlice==="meet"&&(d=h=Fz(this._element,i),a=(t-l*d)/2,e.alignX==="Min"&&(g=-a),e.alignX==="Max"&&(g=a),a=(s-c*h)/2,e.alignY==="Min"&&(m=-a),e.alignY==="Max"&&(m=a)),e.meetOrSlice==="slice"&&(d=h=Vz(this._element,i),a=l-t/d,e.alignX==="Mid"&&(y=a/2),e.alignX==="Max"&&(y=a),a=c-s/h,e.alignY==="Mid"&&(b=a/2),e.alignY==="Max"&&(b=a),l=t/d,c=s/h)),{width:l,height:c,scaleX:d,scaleY:h,offsetLeft:g,offsetTop:m,cropX:y,cropY:b}}static fromObject(e,t){let{filters:s,resizeFilter:i,src:a,crossOrigin:l,type:c}=e,d=jt(e,NI);return Promise.all([ih(a,Y(Y({},t),{},{crossOrigin:l})),s&&Ac(s,t),i&&Ac([i],t),Zh(d,t)]).then(h=>{let[g,m=[],[y]=[],b={}]=h;return new this(g,Y(Y({},d),{},{src:a,filters:m,resizeFilter:y},b))})}static fromURL(e){let{crossOrigin:t=null,signal:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return ih(e,{crossOrigin:t,signal:s}).then(a=>new this(a,i))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;const i=Di(e,this.ATTRIBUTE_NAMES,s);return this.fromURL(i["xlink:href"]||i.href,t,i).catch(a=>(pr("log","Unable to parse Image",a),null))}}G(Cs,"type","Image"),G(Cs,"cacheProperties",[...Ai,...Nj]),G(Cs,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),G(Cs,"CSS_CANVAS","canvas-img"),G(Cs,"ATTRIBUTE_NAMES",[...wr,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),je.setClass(Cs),je.setSVGClass(Cs);Jh(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const nf=n=>n.webgl!==void 0,M0="precision highp float",PI=`
    `.concat(M0,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),RI=["type"],BI=["type"],UI=new RegExp(M0,"g");class es{get type(){return this.constructor.type}constructor(){let e=jt(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},RI);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return PI}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:i="highp"}}=qn();i!=="highp"&&(t=t.replace(UI,M0.replace("highp",i)));const a=e.createShader(e.VERTEX_SHADER),l=e.createShader(e.FRAGMENT_SHADER),c=e.createProgram();if(!a||!l||!c)throw new Hn("Vertex, fragment shader or program creation error");if(e.shaderSource(a,s),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new Hn("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(a)));if(e.shaderSource(l,t),e.compileShader(l),!e.getShaderParameter(l,e.COMPILE_STATUS))throw new Hn("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(l)));if(e.attachShader(c,a),e.attachShader(c,l),e.linkProgram(c),!e.getProgramParameter(c,e.LINK_STATUS))throw new Hn('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(c)));const d=this.getUniformLocations(e,c)||{};return d.uStepW=e.getUniformLocation(c,"uStepW"),d.uStepH=e.getUniformLocation(c,"uStepH"),{program:c,attributeLocations:this.getAttributeLocations(e,c),uniformLocations:d}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const s=this.constructor.uniformLocations,i={};for(let a=0;a<s.length;a++)i[s[a]]=e.getUniformLocation(t,s[a]);return i}sendAttributeData(e,t,s){const i=t.aPosition,a=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const s=e.destinationWidth,i=e.destinationHeight;e.sourceWidth===s&&e.sourceHeight===i||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,s,i)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){nf(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,s=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(s.program),this.sendAttributeData(t,s.attributeLocations,e.aPosition),t.uniform1f(s.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(s.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,s.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,s){e.activeTexture(s),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:s}=e,i=vn({width:t,height:s});e.helpLayer=i}}toObject(){const e=Object.keys(this.constructor.defaults||{});return Y({type:this.type},e.reduce((t,s)=>(t[s]=this[s],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(jt(e,BI))}}G(es,"type","BaseFilter"),G(es,"uniformLocations",[]);const zI={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class Ad extends es{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(zI[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const s=new gt(this.color).getSource(),i=this.alpha,a=s[0]*i,l=s[1]*i,c=s[2]*i,d=1-i;for(let h=0;h<t.length;h+=4){const g=t[h],m=t[h+1],y=t[h+2];let b,S,_;switch(this.mode){case"multiply":b=g*a/255,S=m*l/255,_=y*c/255;break;case"screen":b=255-(255-g)*(255-a)/255,S=255-(255-m)*(255-l)/255,_=255-(255-y)*(255-c)/255;break;case"add":b=g+a,S=m+l,_=y+c;break;case"difference":b=Math.abs(g-a),S=Math.abs(m-l),_=Math.abs(y-c);break;case"subtract":b=g-a,S=m-l,_=y-c;break;case"darken":b=Math.min(g,a),S=Math.min(m,l),_=Math.min(y,c);break;case"lighten":b=Math.max(g,a),S=Math.max(m,l),_=Math.max(y,c);break;case"overlay":b=a<128?2*g*a/255:255-2*(255-g)*(255-a)/255,S=l<128?2*m*l/255:255-2*(255-m)*(255-l)/255,_=c<128?2*y*c/255:255-2*(255-y)*(255-c)/255;break;case"exclusion":b=a+g-2*a*g/255,S=l+m-2*l*m/255,_=c+y-2*c*y/255;break;case"tint":b=a+g*d,S=l+m*d,_=c+y*d}t[h]=b,t[h+1]=S,t[h+2]=_}}sendUniformData(e,t){const s=new gt(this.color).getSource();s[0]=this.alpha*s[0]/255,s[1]=this.alpha*s[1]/255,s[2]=this.alpha*s[2]/255,s[3]=this.alpha,e.uniform4fv(t.uColor,s)}}G(Ad,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),G(Ad,"type","BlendColor"),G(Ad,"uniformLocations",["uColor"]),je.setClass(Ad);const II={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},FI=["type","image"];class Dd extends es{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return II[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,s=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,s,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:s}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/s,1]}applyTo2d(e){let{imageData:{data:t,width:s,height:i},filterBackend:{resources:a}}=e;const l=this.image;a.blendImage||(a.blendImage=Oi());const c=a.blendImage,d=c.getContext("2d");c.width!==s||c.height!==i?(c.width=s,c.height=i):d.clearRect(0,0,s,i),d.setTransform(l.scaleX,0,0,l.scaleY,l.left,l.top),d.drawImage(l.getElement(),0,0,s,i);const h=d.getImageData(0,0,s,i).data;for(let g=0;g<t.length;g+=4){const m=t[g],y=t[g+1],b=t[g+2],S=t[g+3],_=h[g],T=h[g+1],C=h[g+2],M=h[g+3];switch(this.mode){case"multiply":t[g]=m*_/255,t[g+1]=y*T/255,t[g+2]=b*C/255,t[g+3]=S*M/255;break;case"mask":t[g+3]=M}}}sendUniformData(e,t){const s=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,s)}toObject(){return Y(Y({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:s,image:i}=e,a=jt(e,FI);return Cs.fromObject(i,t).then(l=>new this(Y(Y({},a),{},{image:l})))}}G(Dd,"type","BlendImage"),G(Dd,"defaults",{mode:"multiply",alpha:1}),G(Dd,"uniformLocations",["uTransformMatrix","uImage"]),je.setClass(Dd);class Nd extends es{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(e){nf(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){let{imageData:{data:t,width:s,height:i}}=e;this.aspectRatio=s/i,this.horizontal=!0;let a=this.getBlurValue()*s;const l=new Uint8ClampedArray(t),c=15,d=4*s;for(let h=0;h<t.length;h+=4){let g=0,m=0,y=0,b=0,S=0;const _=h-h%d,T=_+d;for(let C=-14;C<c;C++){const M=C/c,O=4*Math.floor(a*M),L=1-Math.abs(M);let j=h+O;j<_?j=_:j>T&&(j=T);const D=t[j+3]*L;g+=t[j]*D,m+=t[j+1]*D,y+=t[j+2]*D,b+=D,S+=L}l[h]=g/b,l[h+1]=m/b,l[h+2]=y/b,l[h+3]=b/S}this.horizontal=!1,a=this.getBlurValue()*i;for(let h=0;h<l.length;h+=4){let g=0,m=0,y=0,b=0,S=0;const _=h%d,T=l.length-d+_;for(let C=-14;C<c;C++){const M=C/c,O=Math.floor(a*M)*d,L=1-Math.abs(M);let j=h+O;j<_?j=_:j>T&&(j=T);const D=l[j+3]*L;g+=l[j]*D,m+=l[j+1]*D,y+=l[j+2]*D,b+=D,S+=L}t[h]=g/b,t[h+1]=m/b,t[h+2]=y/b,t[h+3]=b/S}}sendUniformData(e,t){const s=this.chooseRightDelta();e.uniform2fv(t.uDelta,s)}isNeutralState(){return this.blur===0}getBlurValue(){let e=1;const{horizontal:t,aspectRatio:s}=this;return t?s>1&&(e=1/s):s<1&&(e=s),e*this.blur*.12}chooseRightDelta(){const e=this.getBlurValue();return this.horizontal?[e,0]:[0,e]}}G(Nd,"type","Blur"),G(Nd,"defaults",{blur:0}),G(Nd,"uniformLocations",["uDelta"]),je.setClass(Nd);class Pd extends es{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=Math.round(255*this.brightness);for(let i=0;i<t.length;i+=4)t[i]+=s,t[i+1]+=s,t[i+2]+=s}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}G(Pd,"type","Brightness"),G(Pd,"defaults",{brightness:0}),G(Pd,"uniformLocations",["uBrightness"]),je.setClass(Pd);const Pj={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class wo extends es{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,s=this.matrix,i=this.colorsOnly;for(let a=0;a<t.length;a+=4){const l=t[a],c=t[a+1],d=t[a+2];if(t[a]=l*s[0]+c*s[1]+d*s[2]+255*s[4],t[a+1]=l*s[5]+c*s[6]+d*s[7]+255*s[9],t[a+2]=l*s[10]+c*s[11]+d*s[12]+255*s[14],!i){const h=t[a+3];t[a]+=h*s[3],t[a+1]+=h*s[8],t[a+2]+=h*s[13],t[a+3]=l*s[15]+c*s[16]+d*s[17]+h*s[18]+255*s[19]}}}sendUniformData(e,t){const s=this.matrix,i=[s[0],s[1],s[2],s[3],s[5],s[6],s[7],s[8],s[10],s[11],s[12],s[13],s[15],s[16],s[17],s[18]],a=[s[4],s[9],s[14],s[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,i),e.uniform4fv(t.uConstants,a)}toObject(){return Y(Y({},super.toObject()),{},{matrix:[...this.matrix]})}}function ha(n,e){var t;const s=(G(t=class extends wo{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),G(t,"defaults",{colorsOnly:!1,matrix:e}),t);return je.setClass(s,n),s}G(wo,"type","ColorMatrix"),G(wo,"defaults",Pj),G(wo,"uniformLocations",["uColorMatrix","uConstants"]),je.setClass(wo);ha("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);ha("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);ha("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);ha("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);ha("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);ha("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);ha("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class OC extends es{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){nf(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(s=>je.getClass(s.type).fromObject(s,t))).then(s=>new this({subFilters:s}))}}G(OC,"type","Composed"),je.setClass(OC);class Rd extends es{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const s=Math.floor(255*this.contrast),i=259*(s+255)/(255*(259-s));for(let a=0;a<t.length;a+=4)t[a]=i*(t[a]-128)+128,t[a+1]=i*(t[a+1]-128)+128,t[a+2]=i*(t[a+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}G(Rd,"type","Contrast"),G(Rd,"defaults",{contrast:0}),G(Rd,"uniformLocations",["uContrast"]),je.setClass(Rd);const VI={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Bd extends es{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return VI[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,s=t.data,i=this.matrix,a=Math.round(Math.sqrt(i.length)),l=Math.floor(a/2),c=t.width,d=t.height,h=e.ctx.createImageData(c,d),g=h.data,m=this.opaque?1:0;let y,b,S,_,T,C,M,O,L,j,D,k,B;for(D=0;D<d;D++)for(j=0;j<c;j++){for(T=4*(D*c+j),y=0,b=0,S=0,_=0,B=0;B<a;B++)for(k=0;k<a;k++)M=D+B-l,C=j+k-l,M<0||M>=d||C<0||C>=c||(O=4*(M*c+C),L=i[B*a+k],y+=s[O]*L,b+=s[O+1]*L,S+=s[O+2]*L,m||(_+=s[O+3]*L));g[T]=y,g[T+1]=b,g[T+2]=S,g[T+3]=m?s[T+3]:_}e.imageData=h}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return Y(Y({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}G(Bd,"type","Convolute"),G(Bd,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),G(Bd,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),je.setClass(Bd);const Rj="Gamma";class Ud extends es{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const s=this.gamma,i=1/s[0],a=1/s[1],l=1/s[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const c=this.rgbValues;for(let d=0;d<256;d++)c.r[d]=255*Math.pow(d/255,i),c.g[d]=255*Math.pow(d/255,a),c.b[d]=255*Math.pow(d/255,l);for(let d=0;d<t.length;d+=4)t[d]=c.r[t[d]],t[d+1]=c.g[t[d+1]],t[d+2]=c.b[t[d+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:Rj,gamma:this.gamma.concat()}}}G(Ud,"type",Rj),G(Ud,"defaults",{gamma:[1,1,1]}),G(Ud,"uniformLocations",["uGamma"]),je.setClass(Ud);const HI={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class zd extends es{applyTo2d(e){let{imageData:{data:t}}=e;for(let s,i=0;i<t.length;i+=4){const a=t[i],l=t[i+1],c=t[i+2];switch(this.mode){case"average":s=(a+l+c)/3;break;case"lightness":s=(Math.min(a,l,c)+Math.max(a,l,c))/2;break;case"luminosity":s=.21*a+.72*l+.07*c}t[i+2]=t[i+1]=t[i]=s}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return HI[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}G(zd,"type","Grayscale"),G(zd,"defaults",{mode:"average"}),G(zd,"uniformLocations",["uMode"]),je.setClass(zd);const GI=Y(Y({},Pj),{},{rotation:0});class dm extends wo{calculateMatrix(){const e=this.rotation*Math.PI,t=ki(e),s=Mi(e),i=1/3,a=Math.sqrt(i)*s,l=1-t;this.matrix=[t+l/3,i*l-a,i*l+a,0,0,i*l+a,t+i*l,i*l-a,0,0,i*l-a,i*l+a,t+i*l,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}G(dm,"type","HueRotation"),G(dm,"defaults",GI),je.setClass(dm);class Id extends es{applyTo2d(e){let{imageData:{data:t}}=e;for(let s=0;s<t.length;s+=4)t[s]=255-t[s],t[s+1]=255-t[s+1],t[s+2]=255-t[s+2],this.alpha&&(t[s+3]=255-t[s+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}G(Id,"type","Invert"),G(Id,"defaults",{alpha:!1,invert:!0}),G(Id,"uniformLocations",["uInvert","uAlpha"]),je.setClass(Id);class Fd extends es{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=this.noise;for(let i=0;i<t.length;i+=4){const a=(.5-Math.random())*s;t[i]+=a,t[i+1]+=a,t[i+2]+=a}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}G(Fd,"type","Noise"),G(Fd,"defaults",{noise:0}),G(Fd,"uniformLocations",["uNoise","uSeed"]),je.setClass(Fd);class Vd extends es{applyTo2d(e){let{imageData:{data:t,width:s,height:i}}=e;for(let a=0;a<i;a+=this.blocksize)for(let l=0;l<s;l+=this.blocksize){const c=4*a*s+4*l,d=t[c],h=t[c+1],g=t[c+2],m=t[c+3];for(let y=a;y<Math.min(a+this.blocksize,i);y++)for(let b=l;b<Math.min(l+this.blocksize,s);b++){const S=4*y*s+4*b;t[S]=d,t[S+1]=h,t[S+2]=g,t[S+3]=m}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}G(Vd,"type","Pixelate"),G(Vd,"defaults",{blocksize:4}),G(Vd,"uniformLocations",["uBlocksize"]),je.setClass(Vd);class Hd extends es{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=255*this.distance,i=new gt(this.color).getSource(),a=[i[0]-s,i[1]-s,i[2]-s],l=[i[0]+s,i[1]+s,i[2]+s];for(let c=0;c<t.length;c+=4){const d=t[c],h=t[c+1],g=t[c+2];d>a[0]&&h>a[1]&&g>a[2]&&d<l[0]&&h<l[1]&&g<l[2]&&(t[c+3]=0)}}sendUniformData(e,t){const s=new gt(this.color).getSource(),i=this.distance,a=[0+s[0]/255-i,0+s[1]/255-i,0+s[2]/255-i,1],l=[s[0]/255+i,s[1]/255+i,s[2]/255+i,1];e.uniform4fv(t.uLow,a),e.uniform4fv(t.uHigh,l)}}G(Hd,"type","RemoveColor"),G(Hd,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),G(Hd,"uniformLocations",["uLow","uHigh"]),je.setClass(Hd);class Gd extends es{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,s=this.getFilterWindow(),i=new Array(s);for(let a=1;a<=s;a++)i[a-1]=e(a*t);return i}generateShader(e){const t=new Array(e);for(let s=1;s<=e;s++)t[s-1]="".concat(s,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((s,i)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(s,") * uTaps[").concat(i,"] + texture2D(uTexture, vTexCoord - ").concat(s,") * uTaps[").concat(i,`];
              sum += 2.0 * uTaps[`).concat(i,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){nf(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const s=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(s)/s}}applyTo2d(e){const t=e.imageData,s=this.scaleX,i=this.scaleY;this.rcpScaleX=1/s,this.rcpScaleY=1/i;const a=t.width,l=t.height,c=Math.round(a*s),d=Math.round(l*i);let h;h=this.resizeType==="sliceHack"?this.sliceByTwo(e,a,l,c,d):this.resizeType==="hermite"?this.hermiteFastResize(e,a,l,c,d):this.resizeType==="bilinear"?this.bilinearFiltering(e,a,l,c,d):this.resizeType==="lanczos"?this.lanczosResize(e,a,l,c,d):new ImageData(c,d),e.imageData=h}sliceByTwo(e,t,s,i,a){const l=e.imageData,c=.5;let d=!1,h=!1,g=t*c,m=s*c;const y=e.filterBackend.resources;let b=0,S=0;const _=t;let T=0;y.sliceByTwo||(y.sliceByTwo=Oi());const C=y.sliceByTwo;(C.width<1.5*t||C.height<s)&&(C.width=1.5*t,C.height=s);const M=C.getContext("2d");for(M.clearRect(0,0,1.5*t,s),M.putImageData(l,0,0),i=Math.floor(i),a=Math.floor(a);!d||!h;)t=g,s=m,i<Math.floor(g*c)?g=Math.floor(g*c):(g=i,d=!0),a<Math.floor(m*c)?m=Math.floor(m*c):(m=a,h=!0),M.drawImage(C,b,S,t,s,_,T,g,m),b=_,S=T,T+=m;return M.getImageData(b,S,i,a)}lanczosResize(e,t,s,i,a){const l=e.imageData.data,c=e.ctx.createImageData(i,a),d=c.data,h=this.lanczosCreate(this.lanczosLobes),g=this.rcpScaleX,m=this.rcpScaleY,y=2/this.rcpScaleX,b=2/this.rcpScaleY,S=Math.ceil(g*this.lanczosLobes/2),_=Math.ceil(m*this.lanczosLobes/2),T={},C={x:0,y:0},M={x:0,y:0};return function O(L){let j,D,k,B,P,z,I,F,ee,X,ae;for(C.x=(L+.5)*g,M.x=Math.floor(C.x),j=0;j<a;j++){for(C.y=(j+.5)*m,M.y=Math.floor(C.y),P=0,z=0,I=0,F=0,ee=0,D=M.x-S;D<=M.x+S;D++)if(!(D<0||D>=t)){X=Math.floor(1e3*Math.abs(D-C.x)),T[X]||(T[X]={});for(let R=M.y-_;R<=M.y+_;R++)R<0||R>=s||(ae=Math.floor(1e3*Math.abs(R-C.y)),T[X][ae]||(T[X][ae]=h(Math.sqrt(Math.pow(X*y,2)+Math.pow(ae*b,2))/1e3)),k=T[X][ae],k>0&&(B=4*(R*t+D),P+=k,z+=k*l[B],I+=k*l[B+1],F+=k*l[B+2],ee+=k*l[B+3]))}B=4*(j*i+L),d[B]=z/P,d[B+1]=I/P,d[B+2]=F/P,d[B+3]=ee/P}return++L<i?O(L):c}(0)}bilinearFiltering(e,t,s,i,a){let l,c,d,h,g,m,y,b,S,_,T,C,M,O=0;const L=this.rcpScaleX,j=this.rcpScaleY,D=4*(t-1),k=e.imageData.data,B=e.ctx.createImageData(i,a),P=B.data;for(y=0;y<a;y++)for(b=0;b<i;b++)for(g=Math.floor(L*b),m=Math.floor(j*y),S=L*b-g,_=j*y-m,M=4*(m*t+g),T=0;T<4;T++)l=k[M+T],c=k[M+4+T],d=k[M+D+T],h=k[M+D+4+T],C=l*(1-S)*(1-_)+c*S*(1-_)+d*_*(1-S)+h*S*_,P[O++]=C;return B}hermiteFastResize(e,t,s,i,a){const l=this.rcpScaleX,c=this.rcpScaleY,d=Math.ceil(l/2),h=Math.ceil(c/2),g=e.imageData.data,m=e.ctx.createImageData(i,a),y=m.data;for(let b=0;b<a;b++)for(let S=0;S<i;S++){const _=4*(S+b*i);let T=0,C=0,M=0,O=0,L=0,j=0,D=0;const k=(b+.5)*c;for(let B=Math.floor(b*c);B<(b+1)*c;B++){const P=Math.abs(k-(B+.5))/h,z=(S+.5)*l,I=P*P;for(let F=Math.floor(S*l);F<(S+1)*l;F++){let ee=Math.abs(z-(F+.5))/d;const X=Math.sqrt(I+ee*ee);X>1&&X<-1||(T=2*X*X*X-3*X*X+1,T>0&&(ee=4*(F+B*t),D+=T*g[ee+3],M+=T,g[ee+3]<255&&(T=T*g[ee+3]/250),O+=T*g[ee],L+=T*g[ee+1],j+=T*g[ee+2],C+=T))}}y[_]=O/C,y[_+1]=L/C,y[_+2]=j/C,y[_+3]=D/M}return m}}G(Gd,"type","Resize"),G(Gd,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),G(Gd,"uniformLocations",["uDelta","uTaps"]),je.setClass(Gd);class $d extends es{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=-this.saturation;for(let i=0;i<t.length;i+=4){const a=t[i],l=t[i+1],c=t[i+2],d=Math.max(a,l,c);t[i]+=d!==a?(d-a)*s:0,t[i+1]+=d!==l?(d-l)*s:0,t[i+2]+=d!==c?(d-c)*s:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}G($d,"type","Saturation"),G($d,"defaults",{saturation:0}),G($d,"uniformLocations",["uSaturation"]),je.setClass($d);class Yd extends es{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=-this.vibrance;for(let i=0;i<t.length;i+=4){const a=t[i],l=t[i+1],c=t[i+2],d=Math.max(a,l,c),h=(a+l+c)/3,g=2*Math.abs(d-h)/255*s;t[i]+=d!==a?(d-a)*g:0,t[i+1]+=d!==l?(d-l)*g:0,t[i+2]+=d!==c?(d-c)*g:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}G(Yd,"type","Vibrance"),G(Yd,"defaults",{vibrance:0}),G(Yd,"uniformLocations",["uVibrance"]),je.setClass(Yd);const $I=()=>{console.log("=== CakeCustomization Component Initialized ===");const n=x.useRef(null),e=x.useRef(null),t=x.useRef(null),[s,i]=x.useState(!0),[a,l]=x.useState([]),[c,d]=x.useState([]),[h,g]=x.useState([]),[m,y]=x.useState("select"),[b,S]=x.useState("#FF0000"),[_,T]=x.useState(""),[C,M]=x.useState(24),[O,L]=x.useState("Arial"),[j,D]=x.useState(!1),[k,B]=x.useState(null),[P,z]=x.useState(0),[I,F]=x.useState("cake base");console.log("Initial state:",{loading:s,canvasReady:j,selectedColor:b}),x.useEffect(()=>{console.log("=== CanvasReady state changed ==="),console.log("New canvasReady value:",j)},[j]);const ee=$=>{if(!$)return console.log("getPublicImageUrl: No path provided"),null;if($.startsWith("http"))return console.log("getPublicImageUrl: Path is already a URL:",$),$;console.log("getPublicImageUrl: Processing path:",$);try{const ce="asset";console.log(`getPublicImageUrl: Using bucket "${ce}"`);let he=$;$.includes("/")||console.log(`getPublicImageUrl: Path doesn't include folder, using filename: ${$}`);const{data:Me,error:ye}=Ce.storage.from(ce).getPublicUrl(he);return ye?(console.log(`getPublicImageUrl: Error with bucket "${ce}":`,ye),null):Me&&Me.publicUrl?(console.log(`getPublicImageUrl: Success with bucket "${ce}":`,Me.publicUrl),Me.publicUrl):(console.error(`getPublicImageUrl: No public URL generated for bucket "${ce}"`),null)}catch(ce){return console.error("getPublicImageUrl: Unexpected error:",ce),null}},X=async $=>{if(!$)return!1;try{return(await fetch($,{method:"HEAD"})).ok}catch(ce){return console.log("testImageUrl: Error testing URL:",$,ce),!1}},ae=async()=>{try{console.log("=== TESTING STORAGE BUCKET STRUCTURE ===");const $="asset",{data:ce,error:he}=await Ce.storage.from($).list("",{limit:100});if(he){console.error("Error listing bucket contents:",he);return}console.log("Bucket contents:",ce);const Me=["cake base","icing","topping"];for(const ye of Me)try{const{data:Fe,error:Ye}=await Ce.storage.from($).list(ye,{limit:100});Ye?console.log(`Error listing folder "${ye}":`,Ye):console.log(`Folder "${ye}" contents:`,Fe)}catch(Fe){console.log(`Exception listing folder "${ye}":`,Fe)}}catch($){console.error("Error testing storage bucket:",$)}},R=()=>{const $=t.current;if(!$){console.log("Color wheel canvas not ready");return}const ce=$.getContext("2d");if(!ce){console.log("Color wheel context not ready");return}const he=$.width/2,Me=$.height/2,ye=Math.min(he,Me)-10;ce.clearRect(0,0,$.width,$.height);const Fe=ce.createImageData($.width,$.height),Ye=Fe.data;for(let nt=0;nt<$.height;nt++)for(let it=0;it<$.width;it++){const De=it-he,Ze=nt-Me,St=Math.sqrt(De*De+Ze*Ze),le=Math.atan2(Ze,De);if(St<=ye){const Le=(le*180/Math.PI+360)%360,we=Math.min(St/ye*100,100),be=50,ge=(Ve,At,cs)=>{At/=100,cs/=100;const ut=(1-Math.abs(2*cs-1))*At,Dt=ut*(1-Math.abs(Ve/60%2-1)),Ss=cs-ut/2;let Ut=0,Nt=0,_t=0;return 0<=Ve&&Ve<60?(Ut=ut,Nt=Dt,_t=0):60<=Ve&&Ve<120?(Ut=Dt,Nt=ut,_t=0):120<=Ve&&Ve<180?(Ut=0,Nt=ut,_t=Dt):180<=Ve&&Ve<240?(Ut=0,Nt=Dt,_t=ut):240<=Ve&&Ve<300?(Ut=Dt,Nt=0,_t=ut):300<=Ve&&Ve<360&&(Ut=ut,Nt=0,_t=Dt),[Math.round((Ut+Ss)*255),Math.round((Nt+Ss)*255),Math.round((_t+Ss)*255)]},[st,ls,yn]=ge(Le,we,be),kt=(nt*$.width+it)*4;Ye[kt]=st,Ye[kt+1]=ls,Ye[kt+2]=yn,Ye[kt+3]=255}}ce.putImageData(Fe,0,0),ce.beginPath(),ce.arc(he,Me,20,0,2*Math.PI),ce.fillStyle=b,ce.fill(),ce.strokeStyle="#333",ce.lineWidth=2,ce.stroke(),console.log("Color wheel drawn successfully")},V=$=>{console.log("=== Get Color From Wheel called ==="),console.log("Event:",$);const ce=t.current;if(console.log("Color wheel canvas:",ce),!ce){console.log("Color wheel canvas not available");return}const he=ce.getBoundingClientRect(),Me=$.clientX-he.left,ye=$.clientY-he.top,Fe=ce.width/2,Ye=ce.height/2;console.log("Click coordinates:",{x:Me,y:ye,centerX:Fe,centerY:Ye});const nt=Me-Fe,it=ye-Ye,De=Math.sqrt(nt*nt+it*it),Ze=Math.min(Fe,Ye)-10;if(console.log("Distance calculation:",{deltaX:nt,deltaY:it,distance:De,radius:Ze}),De<=Ze){const le=(Math.atan2(it,nt)*180/Math.PI+360)%360,Le=Math.min(De/Ze*100,100),we=50,be=(Ve,At,cs)=>{At/=100,cs/=100;const ut=(1-Math.abs(2*cs-1))*At,Dt=ut*(1-Math.abs(Ve/60%2-1)),Ss=cs-ut/2;let Ut=0,Nt=0,_t=0;return 0<=Ve&&Ve<60?(Ut=ut,Nt=Dt,_t=0):60<=Ve&&Ve<120?(Ut=Dt,Nt=ut,_t=0):120<=Ve&&Ve<180?(Ut=0,Nt=ut,_t=Dt):180<=Ve&&Ve<240?(Ut=0,Nt=Dt,_t=ut):240<=Ve&&Ve<300?(Ut=Dt,Nt=0,_t=ut):300<=Ve&&Ve<360&&(Ut=ut,Nt=0,_t=Dt),[Math.round((Ut+Ss)*255),Math.round((Nt+Ss)*255),Math.round((_t+Ss)*255)]},ge=(Ve,At,cs)=>"#"+[Ve,At,cs].map(ut=>{const Dt=ut.toString(16);return Dt.length===1?"0"+Dt:Dt}).join(""),[st,ls,yn]=be(le,Le,we),kt=ge(st,ls,yn);if(console.log("Calculated color:",kt),S(kt),console.log("Checking canvas readiness for color change"),console.log("canvasReady:",j),console.log("canvas.current:",e.current),console.log("getActiveObject method:",e.current?.getActiveObject),j&&e.current&&e.current.getActiveObject){console.log("Canvas is ready, getting active object");const Ve=e.current.getActiveObject();console.log("Active object for color change:",Ve),Ve?(console.log("Setting fill color on active object"),Ve.set("fill",kt),e.current.renderAll(),console.log("Color changed successfully"),k&&k===Ve&&z(At=>At+1)):console.log("No active object for color change")}else console.log("Canvas not ready for color change")}else console.log("Click outside color wheel radius")},K=$=>{console.log("=== Mouse Down on Color Wheel ==="),t.current&&(document.addEventListener("mousemove",te),document.addEventListener("mouseup",N),V($))},te=$=>{console.log("=== Mouse Move on Color Wheel ===");const ce={clientX:$.clientX,clientY:$.clientY};V(ce)},N=()=>{console.log("=== Mouse Up on Color Wheel ==="),document.removeEventListener("mousemove",te),document.removeEventListener("mouseup",N)};x.useEffect(()=>{console.log("=== Fetch Images useEffect triggered ==="),(async()=>{try{console.log("Setting loading to true"),i(!0);const{data:ce,error:he}=await Ce.from("ASSET").select("*");if(he){console.error("Error fetching assets:",he),Re.error("Failed to load assets");return}console.log("=== ASSET DATA DEBUG ==="),console.log("Raw asset data:",ce),console.log("Asset count:",ce?.length||0),ce&&ce.length>0&&(console.log("Sample asset:",ce[0]),console.log("Asset structure:",Object.keys(ce[0]))),await ae();const Me=ce.filter(De=>De.type==="cake base"),ye=ce.filter(De=>De.type==="icing"),Fe=ce.filter(De=>De.type==="topping");console.log("Filtered cake bases:",Me),console.log("Filtered icing assets:",ye),console.log("Filtered topping assets:",Fe);const Ye=Me.map(De=>{const Ze=`cake base/${De.src}`,St=ee(Ze);return console.log(`Processing cake base ${De.src}:`,{asset:De,fullPath:Ze,publicUrl:St}),{cake_id:De.asset_id,name:De.src.replace(".png","").replace(/_/g," ").replace(/\b\w/g,le=>le.toUpperCase()),publicUrl:St,admin_id:De.admin_id}}),nt=ye.map(De=>{const Ze=`icing/${De.src}`,St=ee(Ze);return console.log(`Processing icing ${De.src}:`,{asset:De,fullPath:Ze,publicUrl:St}),{id:De.asset_id,name:De.src.replace(".png","").replace(/_/g," ").replace(/\b\w/g,le=>le.toUpperCase()),image_path:Ze,category:De.type,admin_id:De.admin_id}}),it=Fe.map(De=>{const Ze=`topping/${De.src}`,St=ee(Ze);return console.log(`Processing topping ${De.src}:`,{asset:De,fullPath:Ze,publicUrl:St}),{id:De.asset_id,name:De.src.replace(".png","").replace(/_/g," ").replace(/\b\w/g,le=>le.toUpperCase()),category:De.type,admin_id:De.admin_id}});if(console.log("=== PROCESSED DATA DEBUG ==="),console.log("Final cake images:",Ye),console.log("Final icing assets:",nt),console.log("Final topping assets:",it),Ye.length>0){console.log("Testing first cake image URL...");const De=Ye[0].publicUrl;if(console.log("First cake URL:",De),De){const Ze=await X(De);console.log("First cake URL accessible:",Ze)}}if(nt.length>0){console.log("Testing first icing URL...");const De=ee(nt[0].image_path);if(console.log("First icing URL:",De),De){const Ze=await X(De);console.log("First icing URL accessible:",Ze)}}Ye.length===0&&console.warn("No cake bases found in ASSET table"),nt.length===0&&console.warn("No icing assets found in ASSET table"),it.length===0&&console.warn("No topping assets found in ASSET table"),l(Ye),d(nt),g(it)}catch(ce){console.error("Error fetching images:",ce),Re.error("Failed to load images")}finally{console.log("Setting loading to false"),i(!1)}})()},[]),x.useEffect(()=>{if(console.log("=== Canvas Initialization useEffect triggered ==="),console.log("Loading state:",s),console.log("Canvas ref:",n.current),!s&&n.current&&!e.current){console.log("Loading is false, initializing canvas..."),console.log("Canvas ref element:",n.current);try{const $=n.current.parentElement,ce=$.getBoundingClientRect();console.log("=== Canvas Sizing Debug ==="),console.log("Container element:",$),console.log("Container rect:",ce),console.log("Container width:",ce.width),console.log("Container height:",ce.height);const he=ce.width,Me=ce.height;console.log("Calculated maxWidth:",he),console.log("Calculated maxHeight:",Me),console.log("Canvas element before creation:",n.current),e.current=new ov(n.current,{width:he,height:Me,backgroundColor:"#f8f9fa"}),console.log("Canvas created successfully:",e.current),console.log("Canvas dimensions after creation:",{width:e.current.width,height:e.current.height}),console.log("Container computed styles:",{width:window.getComputedStyle($).width,height:window.getComputedStyle($).height,maxWidth:window.getComputedStyle($).maxWidth,maxHeight:window.getComputedStyle($).maxHeight,overflow:window.getComputedStyle($).overflow}),console.log("Canvas element computed styles:",{width:window.getComputedStyle(n.current).width,height:window.getComputedStyle(n.current).height,maxWidth:window.getComputedStyle(n.current).maxWidth,maxHeight:window.getComputedStyle(n.current).maxHeight}),e.current.on("selection:created",de),e.current.on("selection:cleared",ne),e.current.on("object:modified",ve),e.current.on("object:moving",ve),e.current.on("object:scaling",ve),e.current.on("object:rotating",ve),console.log("Event listeners added"),console.log("Setting canvasReady to true"),setTimeout(()=>{console.log("Delayed canvas ready set to true"),D(!0)},100)}catch($){console.error("Error creating Canvas:",$)}}else console.log("Loading is still true, canvas ref not ready, or canvas already exists")},[s]);const q=()=>{if(console.log("=== Canvas Resize Debug ==="),console.log("Canvas current:",e.current),console.log("Canvas ref:",n.current),e.current&&n.current){const ce=n.current.parentElement.getBoundingClientRect();console.log("Resize - Container rect:",ce),console.log("Resize - Container width:",ce.width),console.log("Resize - Container height:",ce.height);const he=ce.width,Me=ce.height;console.log("Resize - Calculated maxWidth:",he),console.log("Resize - Calculated maxHeight:",Me),console.log("Resize - Current canvas dimensions:",{width:e.current.width,height:e.current.height}),e.current.setDimensions({width:he,height:Me}),e.current.renderAll(),console.log("Resize - New canvas dimensions:",{width:e.current.width,height:e.current.height})}else console.log("Resize - Canvas not ready for resize")};x.useEffect(()=>{if(j&&e.current)return window.addEventListener("resize",q),()=>{window.removeEventListener("resize",q)}},[j]),x.useEffect(()=>()=>{console.log("Canvas cleanup - disposing canvas"),e.current&&(e.current.dispose(),e.current=null),console.log("Setting canvasReady to false"),D(!1)},[]),x.useEffect(()=>{console.log("=== Color Wheel useEffect triggered ==="),console.log("Selected color:",b),console.log("Color wheel ref:",t.current),t.current?(console.log("Drawing color wheel..."),R()):console.log("Color wheel ref not ready")},[b,P]),x.useEffect(()=>{console.log("=== Color Wheel Mount useEffect triggered ===");const $=setTimeout(()=>{console.log("Attempting to draw color wheel on mount"),console.log("Color wheel ref on mount:",t.current),t.current?(console.log("Drawing color wheel on mount..."),R()):console.log("Color wheel ref not ready on mount")},100);return()=>{console.log("Clearing color wheel mount timer"),clearTimeout($)}},[]);const de=()=>{if(console.log("=== Handle Selection called ==="),console.log("Canvas ready:",j),console.log("Canvas current:",e.current),!e.current){console.log("Canvas not available in handleSelection");return}const $=e.current.getActiveObject();console.log("Active object:",$),$&&(console.log("Active object type:",$.type),B($),z(ce=>ce+1),$.type==="text"?(console.log("Setting text properties from active object"),T($.text),M($.fontSize),L($.fontFamily),S($.fill)):S($.fill||"#FF0000"))},ne=()=>{console.log("=== Handle Deselection called ==="),console.log("Resetting text properties"),T(""),M(24),L("Arial"),S("#FF0000"),B(null),z(0)},ve=()=>{console.log("=== Handle Object Modified called ==="),z($=>$+1)},Q=$=>{if(console.log("=== Add Cake Base called ==="),console.log("Cake:",$),console.log("Canvas ready:",j),console.log("Canvas current:",e.current),!j||!e.current){console.log("Canvas not ready for addCakeBase"),Re.error("Canvas not ready");return}console.log("Creating image for cake base");const ce=new Image;ce.onload=()=>{console.log("Image loaded successfully, creating FabricImage");const he=new Cs(ce);he.scaleToWidth(300),he.set({left:250,top:200,name:"cake-base"}),console.log("Adding fabric image to canvas"),e.current.add(he),e.current.setActiveObject(he),e.current.renderAll(),console.log("Cake base added successfully"),Re.success(`${$.name} added to canvas`)},ce.onerror=he=>{console.error("Image failed to load:",he),console.log("Image src that failed:",$.publicUrl),Re.error("Failed to load cake image")},ce.src=$.publicUrl,console.log("Image src set to:",$.publicUrl)},Se=$=>{if(!j||!e.current){Re.error("Canvas not ready");return}const ce=ee($.image_path);console.log("Adding decoration:",{decoration:$,imageUrl:ce});const he=new Image;he.onload=()=>{const Me=new Cs(he);Me.scaleToWidth(80),Me.set({left:300,top:250,name:"decoration"}),e.current.add(Me),e.current.setActiveObject(Me),e.current.renderAll(),Re.success(`${$.name} added to canvas`)},he.onerror=Me=>{console.error("Decoration image failed to load:",Me),console.log("Image src that failed:",ce),Re.error("Failed to load decoration image")},he.src=ce},Oe=$=>{if(!j||!e.current){Re.error("Canvas not ready");return}const ce=ee(`topping/${$.src}`);console.log("Adding topping:",{topping:$,imageUrl:ce});const he=new Image;he.onload=()=>{const Me=new Cs(he);Me.scaleToWidth(60),Me.set({left:320,top:270,name:"topping"}),e.current.add(Me),e.current.setActiveObject(Me),e.current.renderAll(),Re.success(`${$.name} added to canvas`)},he.onerror=Me=>{console.error("Topping image failed to load:",Me),console.log("Image src that failed:",ce),Re.error("Failed to load topping image")},he.src=ce},Te=()=>{if(!_.trim()){Re.error("Please enter some text");return}if(!j||!e.current){Re.error("Canvas not ready");return}const $=new xs(_,{left:350,top:100,fontSize:C,fontFamily:O,fill:b,name:"text"});e.current.add($),e.current.setActiveObject($),e.current.renderAll(),T(""),Re.success("Text added to canvas")},Ie=$=>{if(console.log("=== Change Size called ==="),console.log("Scale:",$),console.log("Canvas ready:",j),console.log("Canvas current:",e.current),console.log("Canvas getActiveObject method:",e.current?.getActiveObject),!j){console.log("Canvas not ready - canvasReady is false"),Re.error("Canvas not ready");return}if(!e.current){console.log("Canvas not ready - canvas.current is null"),Re.error("Canvas not ready");return}if(typeof e.current.getActiveObject!="function"){console.log("Canvas not ready - getActiveObject is not a function"),console.log("getActiveObject type:",typeof e.current.getActiveObject),Re.error("Canvas not ready");return}console.log("Getting active object");const ce=e.current.getActiveObject();console.log("Active object:",ce),ce?(console.log("Scaling active object by:",$),ce.scale($),e.current.renderAll(),z(he=>he+1),console.log("Size changed successfully")):(console.log("No active object found"),Re.error("Please select an object first"))},oe=()=>{if(!j||!e.current||!e.current.getActiveObject){Re.error("Canvas not ready");return}const $=e.current.getActiveObject();$?(e.current.remove($),e.current.renderAll(),Re.success("Object deleted")):Re.error("Please select an object first")},xe=()=>{if(!j||!e.current){Re.error("Canvas not ready");return}e.current.clear(),e.current.backgroundColor="#f8f9fa",e.current.renderAll(),Re.success("Canvas cleared")},Ee=()=>{if(!j||!e.current){Re.error("Canvas not ready");return}const $=e.current.toDataURL({format:"png",quality:1}),ce=document.createElement("a");ce.download="custom-cake-design.png",ce.href=$,ce.click(),Re.success("Design exported successfully")};return console.log("=== Render called ==="),console.log("Current state:",{loading:s,canvasReady:j,selectedColor:b,cakeImages:a.length}),s?(console.log("Showing loading spinner"),p.jsx(ua,{message:"Loading cake designer..."})):p.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[p.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Cake Designer"}),p.jsx("div",{className:"h-4 w-px bg-gray-300"}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx("button",{onClick:()=>y("select"),className:`p-2 rounded hover:bg-gray-100 transition-colors ${m==="select"?"bg-blue-100 text-blue-600":"text-gray-600"}`,title:"Select Tool (V)",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.122 2.122"})})}),p.jsx("button",{onClick:()=>y("text"),className:`p-2 rounded hover:bg-gray-100 transition-colors ${m==="text"?"bg-blue-100 text-blue-600":"text-gray-600"}`,title:"Text Tool (T)",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})})})]})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx("button",{onClick:()=>Ie(.8),className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Decrease Size",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12H3"})})}),p.jsx("button",{onClick:()=>Ie(1.2),className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Increase Size",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),p.jsx("div",{className:"h-4 w-px bg-gray-300"}),p.jsx("button",{onClick:oe,className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete Selected",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),p.jsx("button",{onClick:xe,className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Clear Canvas",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),p.jsx("button",{onClick:Ee,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",title:"Save Design",children:"Save"})]})]}),p.jsxs("div",{className:"flex-1 flex min-h-0 overflow-hidden",children:[p.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col overflow-hidden",children:[m==="text"&&p.jsxs("div",{className:"p-4 border-b border-gray-200",children:[p.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Text"}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("input",{type:"text",value:_,onChange:$=>T($.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter text..."}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Size"}),p.jsx("input",{type:"range",min:"12",max:"72",value:C,onChange:$=>M(parseInt($.target.value)),className:"w-full"}),p.jsxs("span",{className:"text-xs text-gray-500",children:[C,"px"]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Font"}),p.jsxs("select",{value:O,onChange:$=>L($.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",children:[p.jsx("option",{value:"Arial",children:"Arial"}),p.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),p.jsx("option",{value:"Courier New",children:"Courier New"}),p.jsx("option",{value:"Georgia",children:"Georgia"}),p.jsx("option",{value:"Verdana",children:"Verdana"})]})]}),p.jsx("button",{onClick:Te,className:"w-full px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Add Text"})]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0",children:[p.jsxs("div",{className:"flex space-x-1 p-4 pb-2 bg-gray-50 border-b border-gray-200",children:[p.jsx("button",{onClick:()=>F("cake base"),className:`flex-1 py-2 px-3 text-xs font-medium rounded-md transition-colors ${I==="cake base"?"bg-white text-gray-900 shadow-sm border border-gray-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Cake Bases"}),p.jsx("button",{onClick:()=>F("icing"),className:`flex-1 py-2 px-3 text-xs font-medium rounded-md transition-colors ${I==="icing"?"bg-white text-gray-900 shadow-sm border border-gray-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Icing"}),p.jsx("button",{onClick:()=>F("topping"),className:`flex-1 py-2 px-3 text-xs font-medium rounded-md transition-colors ${I==="topping"?"bg-white text-gray-900 shadow-sm border border-gray-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Toppings"})]}),p.jsxs("div",{className:"p-4",children:[I==="cake base"&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Cake Bases"}),a.length>0?p.jsx("div",{className:"space-y-2",children:a.map($=>p.jsxs("div",{className:"group cursor-pointer",children:[p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:$.publicUrl,alt:$.name,className:"w-full h-16 object-cover rounded border border-gray-200 group-hover:border-blue-300 transition-colors",onError:ce=>{ce.target.src="/saved-cake.png"}}),p.jsx("button",{onClick:()=>Q($),className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-colors duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100",children:p.jsx("span",{className:"text-white text-xs font-medium",children:"Add"})})]}),p.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:$.name})]},$.cake_id))}):p.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No cake bases found"})]}),I==="icing"&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Icing & Decorations"}),c.length>0?p.jsx("div",{className:"space-y-2",children:c.map($=>p.jsxs("div",{className:"group cursor-pointer",children:[p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:ee($.image_path),alt:$.name,className:"w-full h-16 object-cover rounded border border-gray-200 group-hover:border-blue-300 transition-colors",onError:ce=>{console.error("Decoration image failed to load in UI:",$.image_path),ce.target.src="/saved-cake.png"}}),p.jsx("button",{onClick:()=>Se($),className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-colors duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100",children:p.jsx("span",{className:"text-white text-xs font-medium",children:"Add"})})]}),p.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:$.name})]},$.id))}):p.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No icing decorations found"})]}),I==="topping"&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Toppings"}),h.length>0?p.jsx("div",{className:"space-y-2",children:h.map($=>p.jsxs("div",{className:"group cursor-pointer",children:[p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:ee(`topping/${$.src}`),alt:$.name,className:"w-full h-16 object-cover rounded border border-gray-200 group-hover:border-blue-300 transition-colors",onError:ce=>{console.error("Topping image failed to load in UI:",`topping/${$.src}`),ce.target.src="/saved-cake.png"}}),p.jsx("button",{onClick:()=>Oe($),className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-colors duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100",children:p.jsx("span",{className:"text-white text-xs font-medium",children:"Add"})})]}),p.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:$.name})]},$.id))}):p.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No toppings found"})]})]})]})]}),p.jsx("div",{className:"flex-1 bg-gray-100 flex items-center justify-center p-4 min-h-0 overflow-hidden",children:p.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden w-full h-full min-w-[800px] min-h-[600px]",children:p.jsx("canvas",{ref:n,className:"w-full h-full"})})}),p.jsxs("div",{className:"w-64 bg-white border-l border-gray-200 p-4",children:[p.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Properties"}),k?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Color"}),p.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[p.jsx("canvas",{ref:t,width:"120",height:"120",className:"border border-gray-300 rounded cursor-pointer",onMouseDown:K,title:"Click and drag to select color"}),p.jsx("div",{className:"flex items-center space-x-2",children:p.jsx("span",{className:"text-sm text-gray-600 font-mono",children:b})})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Type"}),p.jsx("div",{className:"text-sm font-medium text-gray-900 capitalize",children:k.type})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Position"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx("input",{type:"number",value:Math.round(k.left||0),onChange:$=>{k.set("left",parseFloat($.target.value)),e.current.renderAll(),z(ce=>ce+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),p.jsx("input",{type:"number",value:Math.round(k.top||0),onChange:$=>{k.set("top",parseFloat($.target.value)),e.current.renderAll(),z(ce=>ce+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Size"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx("input",{type:"number",value:Math.round(k.width*(k.scaleX||1)),onChange:$=>{const he=parseFloat($.target.value)/k.width;k.set("scaleX",he),e.current.renderAll(),z(Me=>Me+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),p.jsx("input",{type:"number",value:Math.round(k.height*(k.scaleY||1)),onChange:$=>{const he=parseFloat($.target.value)/k.height;k.set("scaleY",he),e.current.renderAll(),z(Me=>Me+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Rotation"}),p.jsx("input",{type:"number",value:Math.round(k.angle||0),onChange:$=>{k.set("angle",parseFloat($.target.value)),e.current.renderAll(),z(ce=>ce+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Opacity"}),p.jsx("input",{type:"range",min:"0",max:"100",value:Math.round((k.opacity||1)*100),onChange:$=>{k.set("opacity",parseFloat($.target.value)/100),e.current.renderAll(),z(ce=>ce+1)},className:"w-full"}),p.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round((k.opacity||1)*100),"%"]})]}),k.type==="text"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Text"}),p.jsx("input",{type:"text",value:k.text||"",onChange:$=>{k.set("text",$.target.value),e.current.renderAll(),z(ce=>ce+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]},P):p.jsx("div",{className:"text-sm text-gray-500 text-center py-8",children:"Select an object to view its properties"})]})]})]})},LC=()=>{const[n,e]=x.useState([]),[t,s]=x.useState([]),[i,a]=x.useState(null),[l,c]=x.useState({id:null,field:null}),[d,h]=x.useState({}),[g,m]=x.useState(""),[y,b]=x.useState(""),[S,_]=x.useState(""),[T,C]=x.useState([]),[M,O]=x.useState(""),[L,j]=x.useState(!1);x.useEffect(()=>{(async()=>{const{data:ee,error:X}=await Ce.from("INVENTORY").select(`
          inven_id,
          stock_quantity,
          last_updated,
          ingred_id,
          INGREDIENT (
            ingred_name,
            unit
          )
        `);if(X)console.error(X);else{const ae=ee.map(R=>({inven_id:R.inven_id,quantity:R.stock_quantity,updated:R.last_updated,name:R.INGREDIENT?.ingred_name,unit:R.INGREDIENT?.unit,ingred_id:R.ingred_id}));e(ae)}})()},[]),x.useEffect(()=>{(async()=>{const{data:ee,error:X}=await Ce.from("INGREDIENT").select("ingred_id, ingred_name, unit").order("ingred_name");X?console.error("Error fetching ingredients:",X):(C(ee||[]),console.log("Available ingredients:",ee))})()},[]);const D=()=>{const F=`new-${Date.now()}`;s([...t,{inven_id:F,quantity:"0",updated:new Date().toISOString().split("T")[0],name:"Item Name",ingred_id:null,isNew:!0}])},k=async()=>{if(!i)return;if(i.toString().startsWith("new-"))s(t.filter(ee=>ee.inven_id!==i));else try{const{data:ee,error:X}=await Ce.from("INVENTORY").select("ingred_id").eq("inven_id",i).single();if(X){console.error("Error fetching inventory record:",X),_e.error(`Failed to fetch inventory record: ${X.message}`,{duration:4e3,position:"top-center"});return}const ae=ee.ingred_id,{error:R}=await Ce.from("INVENTORY").delete().eq("inven_id",i);if(R){console.error("Delete inventory error:",R),_e.error(`Failed to delete inventory item: ${R.message}`,{duration:4e3,position:"top-center"});return}const{data:V,error:K}=await Ce.from("INVENTORY").select("inven_id").eq("ingred_id",ae);if(K)console.error("Error checking other inventory records:",K);else if(!V||V.length===0){console.log(`Deleting ingredient with ID ${ae} as it's no longer used`);const{error:te}=await Ce.from("INGREDIENT").delete().eq("ingred_id",ae);te?console.error("Delete ingredient error:",te):console.log(`Successfully deleted ingredient with ID ${ae}`)}else console.log(`Ingredient with ID ${ae} is still used in other inventory records, keeping it`);e(n.filter(te=>te.inven_id!==i))}catch(ee){console.error("Error in delete operation:",ee)}a(null)},B=async()=>{if(L)return;j(!0),console.log("=== SAVE CHANGES START ==="),console.log("New rows to save:",t),console.log("Edited rows to save:",d),console.log("Available ingredients:",T);for(const X of t){if(console.log("Processing new row:",X),!X.name||!X.quantity){console.warn("Skipping incomplete new row:",X);continue}try{console.log(`Looking for ingredient: "${X.name.trim()}"`);const{data:ae,error:R}=await Ce.from("INGREDIENT").select("ingred_id, unit").ilike("ingred_name",X.name.trim());if(R){console.error("Ingredient fetch error (insert):",R);continue}console.log("Found ingredients:",ae);let V,K=X.unit||"pcs";if(!ae||ae.length===0){console.log(`Creating new ingredient: "${X.name.trim()}" with unit: "${K}"`);const{data:N,error:q}=await Ce.from("INGREDIENT").insert([{ingred_name:X.name.trim(),unit:K}]).select("ingred_id").single();if(q){console.error("Error creating ingredient:",q);continue}V=N.ingred_id,console.log(`Created new ingredient with ID ${V} for "${X.name}"`)}else{V=ae[0].ingred_id;const N=ae[0].unit;if(K!==N){console.log(`Updating unit for ingredient "${X.name}" from "${N}" to "${K}"`);const{error:q}=await Ce.from("INGREDIENT").update({unit:K}).eq("ingred_id",V);q&&console.error("Error updating ingredient unit:",q)}console.log(`Found existing ingredient ID ${V} for "${X.name}"`)}const{error:te}=await Ce.from("INVENTORY").insert([{stock_quantity:parseFloat(X.quantity),last_updated:new Date().toISOString().split("T")[0],ingred_id:V}]);te?(console.error("Insert error:",te),_e.error(`Failed to save inventory item "${X.name}": ${te.message}`,{duration:4e3,position:"top-center"})):console.log(`Successfully inserted new row for "${X.name}"`)}catch(ae){console.error("Error processing new row:",ae)}}for(const[X,ae]of Object.entries(d)){console.log(`Processing edited row ${X}:`,ae),console.log("Values object keys:",Object.keys(ae)),console.log("Values object:",ae);const R=n.find(q=>q.inven_id===parseInt(X));if(!R){console.warn(`Original row not found for ID ${X}`);continue}const V={name:ae.name||R.name,quantity:ae.quantity!==void 0?ae.quantity:R.quantity,unit:ae.unit||R.unit||"pcs"};console.log(`Merged data for row ${X}:`,V);const{quantity:K,name:te,unit:N}=V;if(!te||K===void 0){console.warn("Skipping incomplete edited row:",{id:X,mergedData:V});continue}try{console.log(`Looking for ingredient: "${te.trim()}"`);const{data:q,error:de}=await Ce.from("INGREDIENT").select("ingred_id, unit").ilike("ingred_name",te.trim());if(de){console.error("Ingredient fetch error (update):",de);continue}console.log("Found ingredients:",q);let ne,ve=N||"pcs";if(!q||q.length===0){console.log(`Creating new ingredient: "${te.trim()}" with unit: "${ve}"`);const{data:Se,error:Oe}=await Ce.from("INGREDIENT").insert([{ingred_name:te.trim(),unit:ve}]).select("ingred_id").single();if(Oe){console.error("Error creating ingredient:",Oe);continue}ne=Se.ingred_id,console.log(`Created new ingredient with ID ${ne} for "${te}"`)}else{ne=q[0].ingred_id;const Se=q[0].unit;if(ve!==Se){console.log(`Updating unit for ingredient "${te}" from "${Se}" to "${ve}"`);const{error:Oe}=await Ce.from("INGREDIENT").update({unit:ve}).eq("ingred_id",ne);Oe&&console.error("Error updating ingredient unit:",Oe)}console.log(`Found existing ingredient ID ${ne} for "${te}"`)}const{error:Q}=await Ce.from("INVENTORY").update({stock_quantity:parseFloat(K),last_updated:new Date().toISOString().split("T")[0],ingred_id:ne}).eq("inven_id",X);Q?(console.error(`Update error for inven_id ${X}:`,Q),_e.error(`Failed to update inventory item: ${Q.message}`,{duration:4e3,position:"top-center"})):console.log(`Successfully updated row with inven_id ${X}`)}catch(q){console.error("Error processing updated row:",q)}}h({}),s([]),c({id:null,field:null}),a(null),console.log("Refreshing inventory...");const{data:F,error:ee}=await Ce.from("INVENTORY").select(`
        inven_id,
        stock_quantity,
        last_updated,
        ingred_id,
        INGREDIENT (
          ingred_name,
          unit
        )
      `);if(ee)console.error("Refresh fetch error:",ee);else if(F){const X=F.map(ae=>({inven_id:ae.inven_id,quantity:ae.stock_quantity,updated:ae.last_updated,name:ae.INGREDIENT?.ingred_name,unit:ae.INGREDIENT?.unit,ingred_id:ae.ingred_id}));console.log("Inventory refreshed:",X),e(X)}console.log("=== SAVE CHANGES END ==="),_e.success("Inventory saved successfully!",{duration:3e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}),j(!1)},P=F=>{a(ee=>ee===F?null:F)},z=(F,ee,X)=>{F.toString().startsWith("new-")?s(ae=>ae.map(R=>R.inven_id===F?{...R,[ee]:X}:R)):h(ae=>({...ae,[F]:{...ae[F],[ee]:X}}))},I=[...n,...t].filter(F=>(F.name||"").toLowerCase().includes(M.toLowerCase()));return p.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6 w-full border-4 border-[#AF524D] min-h-[80vh] max-h-[80vh] flex flex-col",children:[p.jsxs("div",{className:"flex gap-4 items-center mb-6",children:[p.jsx("h1",{className:"text-3xl font-semibold mb-4 text-[#381914]",children:"Inventory"}),p.jsx("div",{className:"ml-auto flex items-center gap-2",children:p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"text",placeholder:"Search ingredients...",value:M,onChange:F=>O(F.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent"}),p.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto",children:p.jsxs("table",{className:"w-full border-collapse table-fixed",children:[p.jsx("thead",{className:"bg-gray-200 sticky top-0 z-10",children:p.jsxs("tr",{children:[p.jsx("th",{className:"text-left py-2 px-4 text-sm font-semibold w-1/4",children:"Item Name"}),p.jsx("th",{className:"text-left py-2 px-4 text-sm font-semibold w-1/4",children:"Quantity"}),p.jsx("th",{className:"text-left py-2 px-4 text-sm font-semibold w-1/4",children:"Unit"}),p.jsx("th",{className:"text-left py-2 px-4 text-sm font-semibold w-1/4",children:"Last Updated"})]})}),p.jsx("tbody",{children:I.map(F=>{const ee=i===F.inven_id,X=d[F.inven_id]||{},ae=l.id===F.inven_id&&l.field==="name";return console.log({rowId:F.inven_id,selected:i===F.inven_id,editing:l.id===F.inven_id}),p.jsxs("tr",{className:`border-t text-sm cursor-pointer ${ee?"bg-yellow-100":"hover:bg-gray-100"}`,onClick:()=>P(F.inven_id),children:[p.jsx("td",{className:"py-2 px-4",children:p.jsx("div",{className:"flex items-center gap-2",children:ae?p.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-40",value:g,onChange:R=>m(R.target.value),onBlur:()=>{z(F.inven_id,"name",g),c({id:null,field:null})},autoFocus:!0}):p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{children:X.name??F.name}),p.jsx("span",{className:"cursor-pointer hover:text-blue-700",onClick:R=>{R.stopPropagation(),c({id:F.inven_id,field:"name"}),m(X.name??F.name)},children:p.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),p.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]})})]})})}),p.jsx("td",{className:"py-2 px-4",children:p.jsx("div",{className:"flex items-center gap-2",children:l.id===F.inven_id&&l.field==="quantity"?p.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-20",value:y,onChange:R=>b(R.target.value),onBlur:()=>{z(F.inven_id,"quantity",y),c({id:null,field:null})},autoFocus:!0}):p.jsxs("div",{className:"flex items-center gap-2",onClick:R=>{R.stopPropagation(),c({id:F.inven_id,field:"quantity"}),b(X.quantity??F.quantity)},children:[p.jsx("span",{children:X.quantity??F.quantity}),p.jsx("span",{className:"cursor-pointer hover:text-blue-700",children:p.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),p.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]})})]})})}),p.jsx("td",{className:"py-2 px-4",children:p.jsx("div",{className:"flex items-center gap-2",children:l.id===F.inven_id&&l.field==="unit"?p.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-20",value:S,onChange:R=>_(R.target.value),onBlur:()=>{z(F.inven_id,"unit",S),c({id:null,field:null})},autoFocus:!0}):p.jsxs("div",{className:"flex items-center gap-2",onClick:R=>{R.stopPropagation(),c({id:F.inven_id,field:"unit"}),_(X.unit??F.unit??"pcs")},children:[p.jsx("span",{children:X.unit??F.unit??"pcs"}),p.jsx("span",{className:"cursor-pointer hover:text-blue-700",children:p.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),p.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})})}),p.jsx("td",{className:"py-2 px-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[new Date(F.updated).toLocaleDateString(),p.jsx("img",{src:"/clock.svg",alt:""})]})})]},F.inven_id)})})]})}),p.jsxs("div",{className:"mt-6 flex justify-end gap-4 flex-wrap",children:[p.jsx("button",{className:"bg-[#D9D9D9] text-black px-6 py-2 rounded-full cursor-pointer hover:bg-gray-300 transition-colors",onClick:D,children:"ADD"}),p.jsx("button",{className:`px-6 py-2 rounded-full transition-colors ${i?"bg-[#D9D9D9] text-black cursor-pointer hover:bg-gray-300":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:k,disabled:!i,children:"DELETE"}),p.jsx("button",{className:`px-6 py-2 rounded-full transition-colors ${L?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-600 text-white cursor-pointer hover:bg-green-700"}`,onClick:B,disabled:L,children:L?"Saving...":"SAVE CHANGES"})]})]})},YI=()=>{const[n,e]=x.useState([]),[t,s]=x.useState([]),[i,a]=x.useState(null),[l,c]=x.useState({id:null,field:null}),[d,h]=x.useState({}),[g,m]=x.useState(""),[y,b]=x.useState(""),[S,_]=x.useState(""),[T,C]=x.useState(""),[M,O]=x.useState(null),[L,j]=x.useState(""),[D,k]=x.useState(!1),[B,P]=x.useState(null),[z,I]=x.useState(""),[F,ee]=x.useState(!1),[X,ae]=x.useState(""),[R,V]=x.useState("");x.useEffect(()=>{(async()=>{const{data:xe,error:Ee}=await Ce.from("CAKE").select("*").order("name");Ee?console.error("Error fetching cakes:",Ee):(console.log("Fetched cakes from database:",xe),e(xe||[]))})()},[]);const K=oe=>{a(xe=>xe===oe?null:oe)},te=()=>{const oe=`new-${Date.now()}`;s([...t,{id:oe,name:"New Cake",theme:"Theme",description:"Description",tier:1,price:0,cake_img:"",isNew:!0}])},N=async()=>{if(!i)return;if(i.toString().startsWith("new-"))s(t.filter(xe=>xe.id!==i));else try{const{error:xe}=await Ce.from("CAKE").delete().eq("cake_id",i);if(xe){console.error("Delete error:",xe);return}e(n.filter(Ee=>Ee.cake_id!==i))}catch(xe){console.error("Error in delete operation:",xe)}a(null)},q=(oe,xe,Ee)=>{console.log(`handleFieldChange called: id=${oe}, field=${xe}, value=${Ee}`);let $=Ee;xe==="tier"?$=parseInt(Ee)||1:xe==="price"&&($=parseFloat(Ee)||0),oe&&oe.toString().startsWith("new-")?s(he=>he.map(Me=>Me.id===oe?{...Me,[xe]:$}:Me)):h(he=>{const Me={...he,[oe]:{...he[oe],[xe]:$}};return console.log(`Updated editedValues for ID ${oe}:`,Me[oe]),Me})},de=(oe,xe)=>{P(oe),I(xe),k(!0)},ne=()=>{B&&(q(B,"description",z),k(!1),P(null),I(""))},ve=()=>{k(!1),P(null),I("")},Q=async(oe,xe)=>{const Ee=oe.target.files[0];if(Ee)try{O(xe);const ce=[...n,...t].find(nt=>nt.cake_id===xe||nt.id===xe)?.name||"cake",he=Ee.name.split(".").pop(),ye=`${ce.replace(/[^a-zA-Z0-9]/g,"_").toLowerCase()}_${Date.now()}.${he}`,{error:Fe}=await Ce.storage.from("cake").upload(ye,Ee);if(Fe){console.error("Error uploading image:",Fe),O(null);return}const{data:{publicUrl:Ye}}=Ce.storage.from("cake").getPublicUrl(ye);q(xe,"cake_img",Ye),O(null),console.log("Image uploaded successfully:",Ye),console.log("Stored URL in database:",Ye),_e.success("Image uploaded successfully!",{duration:2e3,position:"top-center"})}catch($){console.error("Error in image upload:",$),O(null),_e.error("Failed to upload image. Please try again.",{duration:4e3,position:"top-center"})}},Se=async()=>{if(F)return;ee(!0),console.log("=== SAVE CAKES CHANGES START ==="),console.log("New rows to save:",t),console.log("Edited rows to save:",d);for(const Ee of t){if(console.log("Processing new cake:",Ee),!Ee.name){console.warn("Skipping incomplete new cake:",Ee);continue}try{const{error:$}=await Ce.from("CAKE").insert([{name:Ee.name,theme:Ee.theme,description:Ee.description,tier:parseInt(Ee.tier)||1,price:parseFloat(Ee.price)||0,cake_img:Ee.cake_img||""}]);$?(console.error("Insert error:",$),_e.error(`Failed to save cake "${Ee.name}": ${$.message}`,{duration:4e3,position:"top-center"})):console.log(`Successfully inserted new cake: "${Ee.name}"`)}catch($){console.error("Error processing new cake:",$)}}console.log("All editedValues before processing:",d);for(const[Ee,$]of Object.entries(d)){if(console.log(`Processing edited cake ${Ee}:`,$),!Ee||Ee==="undefined"){console.warn("Skipping row with invalid ID:",Ee);continue}const ce=n.find(he=>he.cake_id===parseInt(Ee)||he.cake_id===Ee);console.log(`Original row for ID ${Ee}:`,ce);try{const he={name:$.name!==void 0?$.name:ce?.name,theme:$.theme!==void 0?$.theme:ce?.theme,description:$.description!==void 0?$.description:ce?.description,tier:$.tier!==void 0?parseInt($.tier)||1:ce?.tier,price:$.price!==void 0?parseFloat($.price)||0:ce?.price,cake_img:$.cake_img!==void 0?$.cake_img:ce?.cake_img||""};console.log(`Update data for cake ID ${Ee}:`,he);const{error:Me}=await Ce.from("CAKE").update(he).eq("cake_id",Ee);Me?(console.error(`Update error for cake ID ${Ee}:`,Me),_e.error(`Failed to update cake: ${Me.message}`,{duration:4e3,position:"top-center"})):console.log(`Successfully updated cake with ID ${Ee}`)}catch(he){console.error("Error processing updated cake:",he)}}h({}),s([]),c({id:null,field:null}),a(null),console.log("Refreshing cakes...");const{data:oe,error:xe}=await Ce.from("CAKE").select("*").order("name");xe?console.error("Refresh fetch error:",xe):oe&&(console.log("Cakes refreshed:",oe),e(oe)),console.log("=== SAVE CAKES CHANGES END ==="),_e.success("Cakes saved successfully!",{duration:3e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}),ee(!1)},Oe=[...n,...t].filter(oe=>{const xe=oe.name||"",Ee=oe.theme||"",$=oe.tier||1,ce=xe.toLowerCase().includes(L.toLowerCase()),he=X===""||Ee.toLowerCase().includes(X.toLowerCase()),Me=R===""||$.toString()===R;return ce&&he&&Me}),Te=[...new Set([...n,...t].map(oe=>oe.theme).filter(Boolean))],Ie=[...new Set([...n,...t].map(oe=>oe.tier).filter(Boolean))].sort((oe,xe)=>oe-xe);return p.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6 w-full border-4 border-[#AF524D] min-h-[80vh] max-h-[80vh] flex flex-col",children:[p.jsxs("div",{className:"flex gap-4 items-center mb-6",children:[p.jsx("h1",{className:"text-3xl font-semibold mb-4 text-[#381914]",children:"Cakes"}),p.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[p.jsxs("div",{className:"relative",children:[p.jsxs("select",{value:X,onChange:oe=>ae(oe.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 pl-10 pr-8 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent appearance-none bg-white",children:[p.jsx("option",{value:"",children:"All Themes"}),Te.map(oe=>p.jsx("option",{value:oe,children:oe},oe))]}),p.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),p.jsx("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p.jsxs("div",{className:"relative",children:[p.jsxs("select",{value:R,onChange:oe=>V(oe.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 pl-10 pr-8 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent appearance-none bg-white",children:[p.jsx("option",{value:"",children:"All Tiers"}),Ie.map(oe=>p.jsxs("option",{value:oe,children:[oe," Tier",oe>1?"s":""]},oe))]}),p.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),p.jsx("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"text",placeholder:"Search cake...",value:L,onChange:oe=>j(oe.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent"}),p.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})]}),p.jsx("div",{className:"flex-1 overflow-y-auto",children:p.jsxs("table",{className:"w-full border-collapse table-fixed",children:[p.jsx("thead",{className:"bg-gray-200 sticky top-0 z-10",children:p.jsxs("tr",{children:[p.jsx("th",{className:"text-left py-2 px-4 text-sm font-semibold w-1/6",children:"Cake Name"}),p.jsx("th",{className:"text-left py-2 px-4 text-sm font-semibold w-1/6",children:"Theme"}),p.jsx("th",{className:"text-left py-2 px-4 text-sm font-semibold w-1/6",children:"Description"}),p.jsx("th",{className:"text-left py-2 px-4 text-sm font-semibold w-1/6",children:"Tiers"}),p.jsx("th",{className:"text-left py-2 px-4 text-sm font-semibold w-1/6",children:"Price"}),p.jsx("th",{className:"text-left py-2 px-4 text-sm font-semibold w-1/6",children:"Cake Image"})]})}),p.jsx("tbody",{children:Oe.map(oe=>{const xe=oe.cake_id||oe.id,Ee=i===xe,$=d[xe]||{},ce=l.id===xe&&l.field==="name";return console.log({rowId:xe,selected:i===xe,editing:l.id===xe}),p.jsxs("tr",{className:`border-t text-sm cursor-pointer ${Ee?"bg-yellow-100":"hover:bg-gray-100"}`,onClick:()=>K(xe),children:[p.jsx("td",{className:"py-2 px-4",children:p.jsx("div",{className:"flex items-center gap-2",children:ce?p.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-40",value:g,onChange:he=>m(he.target.value),onBlur:()=>{q(xe,"name",g),c({id:null,field:null})},autoFocus:!0}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"flex-grow truncate",children:$.name??oe.name}),p.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:he=>{he.stopPropagation(),c({id:xe,field:"name"}),m($.name??oe.name)},children:p.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),p.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-name-${xe}`)})]})})}),p.jsx("td",{className:"py-2 px-4",children:p.jsx("div",{className:"flex items-center gap-2",children:l.id===xe&&l.field==="theme"?p.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-20",value:y,onChange:he=>b(he.target.value),onBlur:()=>{q(xe,"theme",y),c({id:null,field:null})},autoFocus:!0}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"flex-grow truncate",children:$.theme??oe.theme}),p.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:he=>{he.stopPropagation(),c({id:xe,field:"theme"}),b($.theme??oe.theme)},children:p.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),p.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-theme-${xe}`)})]})})}),p.jsx("td",{className:"py-2 px-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"flex-grow truncate",children:$.description??oe.description}),p.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:he=>{he.stopPropagation(),de(xe,$.description??oe.description)},children:p.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),p.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-description-${xe}`)})]})}),p.jsx("td",{className:"py-2 px-4",children:p.jsx("div",{className:"flex items-center gap-2",children:l.id===xe&&l.field==="tier"?p.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-16",value:T,onChange:he=>C(he.target.value),onBlur:()=>{q(xe,"tier",parseInt(T)||1),c({id:null,field:null})},autoFocus:!0}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"truncate",children:$.tier??oe.tier}),p.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:he=>{he.stopPropagation(),c({id:xe,field:"tier"}),C($.tier??oe.tier)},children:p.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),p.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-tier-${xe}`)})]})})}),p.jsx("td",{className:"py-2 px-4",children:p.jsx("div",{className:"flex items-center gap-2",children:l.id===xe&&l.field==="price"?p.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-16",value:S,onChange:he=>_(he.target.value),onBlur:()=>{q(xe,"price",parseFloat(S)||0),c({id:null,field:null})},autoFocus:!0}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"truncate",children:["₱",$.price??oe.price]}),p.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:he=>{he.stopPropagation(),c({id:xe,field:"price"}),_($.price??oe.price)},children:p.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),p.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-price-${xe}`)})]})})}),p.jsx("td",{className:"py-2 px-4",children:p.jsx("div",{className:"relative",children:M===xe?p.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded border-2 border-dashed border-gray-300 flex items-center justify-center",children:p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#AF524D]"}),p.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Uploading..."})]})}):$.cake_img||oe.cake_img?p.jsxs("div",{className:"w-16 h-16 rounded overflow-hidden border border-gray-300",children:[p.jsx("img",{src:$.cake_img||oe.cake_img,alt:"Cake",className:"w-full h-full object-cover"}),p.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-30 transition-all duration-200 flex items-center justify-center",children:p.jsxs("label",{className:"cursor-pointer opacity-0 hover:opacity-100 transition-opacity duration-200",children:[p.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),p.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:he=>Q(he,xe),onClick:he=>he.stopPropagation()})]})})]}):p.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded border-2 border-dashed border-gray-300 flex items-center justify-center hover:border-[#AF524D] transition-colors duration-200",children:p.jsxs("label",{className:"cursor-pointer flex flex-col items-center",children:[p.jsx("svg",{className:"w-6 h-6 text-gray-400 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),p.jsx("span",{className:"text-xs text-gray-500",children:"Upload"}),p.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:he=>Q(he,xe),onClick:he=>he.stopPropagation()})]})})})})]},xe)})})]})}),p.jsxs("div",{className:"mt-6 flex justify-end gap-4 flex-wrap",children:[p.jsx("button",{className:"bg-[#D9D9D9] text-black px-6 py-2 rounded-full cursor-pointer hover:bg-gray-300 transition-colors",onClick:te,children:"ADD"}),p.jsx("button",{className:`px-6 py-2 rounded-full transition-colors ${i?"bg-[#D9D9D9] text-black cursor-pointer hover:bg-gray-300":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:N,disabled:!i,children:"DELETE"}),p.jsx("button",{className:`px-6 py-2 rounded-full transition-colors ${F?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-600 text-white cursor-pointer hover:bg-green-700"}`,onClick:Se,disabled:F,children:F?"Saving...":"SAVE CHANGES"})]}),D&&p.jsx("div",{className:"fixed inset-0 bg-gray/50 backdrop-blur-sm flex items-center justify-center z-50",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-w-md border-4 border-[#AF524D] shadow-2xl",children:[p.jsx("h3",{className:"text-lg font-semibold mb-4 text-[#381914]",children:"Edit Description"}),p.jsx("textarea",{value:z,onChange:oe=>I(oe.target.value),className:"w-full h-32 p-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent",placeholder:"Enter cake description...",autoFocus:!0}),p.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[p.jsx("button",{onClick:ve,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",children:"Cancel"}),p.jsx("button",{onClick:ne,className:"px-4 py-2 bg-[#AF524D] text-white rounded-lg hover:bg-[#8B3D3A] transition-colors cursor-pointer",children:"Save"})]})]})})]})},tc=n=>n?n.startsWith("http://")||n.startsWith("https://")?n:Ce.storage.from("cake").getPublicUrl(n).data.publicUrl:null,qI=()=>{const[n,e]=x.useState([]),[t,s]=x.useState([]),[i,a]=x.useState(null),[l,c]=x.useState({id:null,field:null}),[d,h]=x.useState({}),[g,m]=x.useState(""),[y,b]=x.useState(""),[S,_]=x.useState(""),[T,C]=x.useState(""),[M,O]=x.useState(""),[L,j]=x.useState(""),[D,k]=x.useState(""),[B,P]=x.useState(""),[z,I]=x.useState(""),[F,ee]=x.useState([]),[X,ae]=x.useState([]),[R,V]=x.useState(""),[K,te]=x.useState(!1),[N,q]=x.useState(!1),[de,ne]=x.useState(null),[ve,Q]=x.useState(!1),[Se,Oe]=x.useState(null),[Te,Ie]=x.useState(!1),[oe,xe]=x.useState(null),[Ee,$]=x.useState(null),[ce,he]=x.useState(!1);x.useEffect(()=>{(async()=>{const{data:Le,error:we}=await Ce.from("ORDER").select(`
          order_id,
          order_date,
          delivery_method,
          order_schedule,
          delivery_address,
          order_status,
          cus_id,
          CUSTOMER (
            cus_id,
            cus_fname,
            cus_lname,
            cus_celno,
            email
          ),
          PAYMENT (
            payment_id,
            payment_method,
            amount_paid,
            payment_date,
            payment_status,
            receipt
          ),
          "CAKE-ORDERS" (
            co_id,
            quantity,
            cake_id,
            CAKE (
              cake_id,
              name,
              cake_img,
              price,
              theme,
              tier,
              description
            )
          )
        `);if(console.log("Query result:",{data:Le,error:we}),Le&&Le.length>0&&(console.log("Raw database response - first order:",Le[0]),console.log("Customer data from first order:",Le[0].customer),console.log("Cake orders from first order:",Le[0]["CAKE-ORDERS"]),console.log("Testing different customer relationship names:"),console.log("data[0].CUSTOMER:",Le[0].CUSTOMER),console.log("data[0].customer:",Le[0].customer),console.log("data[0].Customer:",Le[0].Customer),console.log("data[0].customers:",Le[0].customers)),we)console.error("Database error:",we);else{const be=Le.flatMap(ge=>!ge["CAKE-ORDERS"]||ge["CAKE-ORDERS"].length===0?[{order_id:ge.order_id,co_id:null,customer_id:ge.cus_id,customer:ge.CUSTOMER?`${ge.CUSTOMER.cus_fname} ${ge.CUSTOMER.cus_lname}`:"Unknown Customer",customer_email:ge.CUSTOMER?.email||"N/A",customer_phone:ge.CUSTOMER?.cus_celno||"N/A",cake:"No Cake Assigned",cake_img:null,cake_img_url:null,cake_price:0,cake_theme:"N/A",cake_tier:"N/A",cake_description:"N/A",scheduled_date:ge.order_schedule,order_type:ge.delivery_method,delivery_address:ge.delivery_address||"N/A",cake_id:null,quantity:0,amount_paid:ge.PAYMENT?.[0]?.amount_paid||0,payment_date:ge.PAYMENT?.[0]?.payment_date,payment_status:ge.PAYMENT?.[0]?.payment_status||"Pending",payment_method:ge.PAYMENT?.[0]?.payment_method||"Cash",receipt_path:ge.PAYMENT?.[0]?.receipt,order_status:ge.order_status,order_date:ge.order_date}]:ge["CAKE-ORDERS"].map(st=>({order_id:ge.order_id,co_id:st.co_id,customer_id:ge.cus_id,customer:ge.CUSTOMER?`${ge.CUSTOMER.cus_fname} ${ge.CUSTOMER.cus_lname}`:"Unknown Customer",customer_email:ge.CUSTOMER?.email||"N/A",customer_phone:ge.CUSTOMER?.cus_celno||"N/A",cake:st.CAKE?.name||"Unknown Cake",cake_img:st.CAKE?.cake_img,cake_img_url:tc(st.CAKE?.cake_img),cake_price:st.CAKE?.price||0,cake_theme:st.CAKE?.theme||"N/A",cake_tier:st.CAKE?.tier||"N/A",cake_description:st.CAKE?.description||"N/A",scheduled_date:ge.order_schedule,order_type:ge.delivery_method,delivery_address:ge.delivery_address||"N/A",cake_id:st.cake_id,quantity:st.quantity||0,amount_paid:ge.PAYMENT?.[0]?.amount_paid||0,payment_date:ge.PAYMENT?.[0]?.payment_date,payment_status:ge.PAYMENT?.[0]?.payment_status||"Pending",payment_method:ge.PAYMENT?.[0]?.payment_method||"Cash",receipt_path:ge.PAYMENT?.[0]?.receipt,order_status:ge.order_status,order_date:ge.order_date})));be.length>0&&console.log("Customer info from first row:",{customer:be[0].customer,customer_id:be[0].customer_id,customer_email:be[0].customer_email,customer_phone:be[0].customer_phone}),e(be)}})()},[]),x.useEffect(()=>{(async()=>{const{data:Le,error:we}=await Ce.from("CAKE").select("cake_id, name, cake_img, price, theme, tier, description").order("name");we?console.error("Error fetching cakes:",we):(ee(Le||[]),console.log("Available cakes:",Le))})()},[]),x.useEffect(()=>{(async()=>{const{data:Le,error:we}=await Ce.from("CUSTOMER").select("cus_id, cus_fname, cus_lname, email, cus_celno").order("cus_fname");we?console.error("Error fetching customers:",we):(ae(Le||[]),console.log("Available customers:",Le))})()},[]);const Me=()=>{const le=`new-${Date.now()}`;s([...t,{order_id:le,co_id:le,customer_id:null,customer:"Select Customer",customer_email:"",customer_phone:"",cake:"Select Cake",cake_img:null,cake_img_url:null,cake_price:0,cake_theme:"",cake_tier:"",cake_description:"",scheduled_date:new Date().toISOString().split("T")[0],order_type:"pickup",delivery_address:"Delivery Address",cake_id:null,quantity:1,amount_paid:0,payment_date:new Date().toISOString().split("T")[0],payment_status:"Pending",payment_method:"Cash",receipt_path:null,order_status:"Pending",order_date:new Date().toISOString().split("T")[0],isNew:!0}])},ye=async()=>{if(!i)return;if(i.toString().startsWith("new-"))s(t.filter(Le=>Le.order_id!==i));else try{const{error:Le}=await Ce.from("CAKE-ORDERS").delete().eq("order_id",i);Le?(console.error("Error deleting order:",Le),_e.error("Failed to delete order")):(e(n.filter(we=>we.order_id!==i)),a(null),_e.success("Order deleted successfully"))}catch(Le){console.error("Error deleting order:",Le),_e.error("Failed to delete order")}},Fe=async()=>{te(!0);try{for(const we of t){const be=F.find(kt=>kt.name===we.cake),ge=be?be.cake_id:null,st=X.find(kt=>`${kt.cus_fname} ${kt.cus_lname}`===we.customer),ls=st?st.cus_id:null,{error:yn}=await Ce.from("CAKE-ORDERS").insert({customer_id:ls,cake_id:ge,scheduled_date:we.scheduled_date,order_type:we.order_type,delivery_address:we.delivery_address,amount_paid:parseFloat(we.amount_paid)||0,payment_date:we.payment_date,payment_status:we.payment_status,payment_method:we.payment_method,receipt_path:we.receipt_path});if(yn){console.error("Error inserting new order:",yn),_e.error("Failed to save new order"),te(!1);return}}for(const[we,be]of Object.entries(d)){if(we.toString().startsWith("new-"))continue;const ge={};if(be.scheduled_date!==void 0&&(ge.scheduled_date=be.scheduled_date),be.order_type!==void 0&&(ge.order_type=be.order_type),be.delivery_address!==void 0&&(ge.delivery_address=be.delivery_address),be.amount_paid!==void 0&&(ge.amount_paid=parseFloat(be.amount_paid)||0),be.payment_date!==void 0&&(ge.payment_date=be.payment_date),be.payment_status!==void 0&&(ge.payment_status=be.payment_status),be.payment_method!==void 0&&(ge.payment_method=be.payment_method),be.receipt_path!==void 0&&(ge.receipt_path=be.receipt_path),be.cake!==void 0){const st=F.find(ls=>ls.name===be.cake);ge.cake_id=st?st.cake_id:null}if(be.customer!==void 0){const st=X.find(ls=>`${ls.cus_fname} ${ls.cus_lname}`===be.customer);ge.customer_id=st?st.cus_id:null}if(Object.keys(ge).length>0){const{error:st}=await Ce.from("CAKE-ORDERS").update(ge).eq("order_id",we);if(st){console.error("Error updating order:",st),_e.error("Failed to update order"),te(!1);return}}}const{data:le,error:Le}=await Ce.from("ORDER").select(`
          order_id,
          order_date,
          delivery_method,
          order_schedule,
          delivery_address,
          order_status,
          cus_id,
          CUSTOMER (
            cus_id,
            cus_fname,
            cus_lname,
            cus_celno,
            email
          ),
          PAYMENT (
            payment_id,
            payment_method,
            amount_paid,
            payment_date,
            payment_status,
            receipt
          ),
          "CAKE-ORDERS" (
            co_id,
            quantity,
            cake_id,
            CAKE (
              cake_id,
              name,
              cake_img,
              price,
              theme,
              tier,
              description
            )
          )
        `);if(Le)console.error("Error refreshing data:",Le);else{const we=le.flatMap(be=>!be["CAKE-ORDERS"]||be["CAKE-ORDERS"].length===0?[{order_id:be.order_id,co_id:null,customer_id:be.cus_id,customer:be.CUSTOMER?`${be.CUSTOMER.cus_fname} ${be.CUSTOMER.cus_lname}`:"Unknown Customer",customer_email:be.CUSTOMER?.email||"N/A",customer_phone:be.CUSTOMER?.cus_celno||"N/A",cake:"No Cake Assigned",cake_img:null,cake_img_url:null,cake_price:0,cake_theme:"N/A",cake_tier:"N/A",cake_description:"N/A",scheduled_date:be.order_schedule,order_type:be.delivery_method,delivery_address:be.delivery_address||"N/A",cake_id:null,quantity:0,amount_paid:be.PAYMENT?.[0]?.amount_paid||0,payment_date:be.PAYMENT?.[0]?.payment_date,payment_status:be.PAYMENT?.[0]?.payment_status||"Pending",payment_method:be.PAYMENT?.[0]?.payment_method||"Cash",receipt_path:be.PAYMENT?.[0]?.receipt,order_status:be.order_status,order_date:be.order_date}]:be.CAKE-ORDERS.map(ge=>({order_id:be.order_id,co_id:ge.co_id,customer_id:be.cus_id,customer:be.CUSTOMER?`${be.CUSTOMER.cus_fname} ${be.CUSTOMER.cus_lname}`:"Unknown Customer",customer_email:be.CUSTOMER?.email||"N/A",customer_phone:be.CUSTOMER?.cus_celno||"N/A",cake:ge.CAKE?.name||"Unknown Cake",cake_img:ge.CAKE?.cake_img,cake_img_url:tc(ge.CAKE?.cake_img),cake_price:ge.CAKE?.price||0,cake_theme:ge.CAKE?.theme||"N/A",cake_tier:ge.CAKE?.tier||"N/A",cake_description:ge.CAKE?.description||"N/A",scheduled_date:be.order_schedule,order_type:be.delivery_method,delivery_address:be.delivery_address||"N/A",cake_id:ge.cake_id,quantity:ge.quantity||0,amount_paid:be.PAYMENT?.[0]?.amount_paid||0,payment_date:be.PAYMENT?.[0]?.payment_date,payment_status:be.PAYMENT?.[0]?.payment_status||"Pending",payment_method:be.PAYMENT?.[0]?.payment_method||"Cash",receipt_path:be.PAYMENT?.[0]?.receipt,order_status:be.order_status,order_date:be.order_date})));e(we)}s([]),h({}),a(null),_e.success("Changes saved successfully")}catch(le){console.error("Error saving changes:",le),_e.error("Failed to save changes")}finally{te(!1)}},Ye=le=>{a(le)},nt=(le,Le,we)=>{if(h(be=>({...be,[le]:{...be[le],[Le]:we}})),Le==="cake"){const be=F.find(ge=>ge.name===we);be&&h(ge=>({...ge,[le]:{...ge[le],cake_img_url:tc(be.cake_img),cake_price:be.price,cake_theme:be.theme,cake_tier:be.tier,cake_description:be.description}}))}},it=le=>{de&&(nt(de,"cake",le.name),h(Le=>({...Le,[de]:{...Le[de],cake_img_url:tc(le.cake_img),cake_price:le.price,cake_theme:le.theme,cake_tier:le.tier,cake_description:le.description}}))),q(!1),ne(null)},De=le=>{if(Se){const Le=`${le.cus_fname} ${le.cus_lname}`;nt(Se,"customer",Le),h(we=>({...we,[Se]:{...we[Se],customer_email:le.email,customer_phone:le.cus_celno}}))}Q(!1),Oe(null)},Ze=async()=>{if(!(!Ee||!oe)){he(!0);try{const le=Ee.name.split(".").pop(),Le=`receipt_${oe}_${Date.now()}.${le}`,{error:we}=await Ce.storage.from("receipts").upload(Le,Ee);if(we)throw we;const{data:{publicUrl:be}}=Ce.storage.from("receipts").getPublicUrl(Le),{error:ge}=await Ce.from("CAKE-ORDERS").update({receipt_path:be}).eq("order_id",oe);if(ge)throw ge;e(n.map(st=>st.order_id===oe?{...st,receipt_path:be}:st)),_e.success("Receipt uploaded successfully"),Ie(!1),xe(null),$(null)}catch(le){console.error("Error uploading receipt:",le),_e.error("Failed to upload receipt")}finally{he(!1)}}},St=[...n,...t].filter(le=>{const Le=le.customer||"",we=le.cake||"",be=le.cake_theme||"",ge=le.cake_tier||"";return Le.toLowerCase().includes(R.toLowerCase())||we.toLowerCase().includes(R.toLowerCase())||be.toLowerCase().includes(R.toLowerCase())||ge.toLowerCase().includes(R.toLowerCase())});return p.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 w-full border-2 border-[#AF524D] min-h-[80vh] max-h-[80vh] flex flex-col",children:[p.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center mb-8",children:[p.jsx("div",{className:"flex-1",children:p.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"Cake Orders Management"})}),p.jsx("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:p.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[p.jsx("input",{type:"text",placeholder:"Search by customer, cake, theme, or tier...",value:R,onChange:le=>V(le.target.value),className:"w-full sm:w-80 border-2 border-gray-200 rounded-xl px-5 py-3 pl-12 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base"}),p.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})})]}),p.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50 rounded-xl border border-gray-200",children:p.jsx("div",{className:"overflow-x-auto h-full",children:p.jsxs("table",{className:"w-full border-collapse",children:[p.jsx("thead",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white sticky top-0 z-10",children:p.jsxs("tr",{children:[p.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide",children:"Customer Details"}),p.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide",children:"Cake Information"}),p.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide",children:"Order Details"}),p.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide",children:"Schedule & Delivery"}),p.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide",children:"Payment Details"}),p.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide",children:"Receipt"})]})}),p.jsx("tbody",{className:"divide-y divide-gray-200",children:St.map(le=>{const Le=i===le.order_id,we=d[le.order_id]||{},be=l.id===le.order_id&&l.field==="scheduled_date";return l.id===le.order_id&&l.field,l.id===le.order_id&&l.field,l.id===le.order_id&&l.field,l.id===le.order_id&&l.field,l.id===le.order_id&&l.field,l.id===le.order_id&&l.field,p.jsxs("tr",{className:`transition-all duration-200 cursor-pointer ${Le?"bg-blue-50 border-l-4 border-l-blue-500 shadow-md":"hover:bg-gray-100 border-l-4 border-l-transparent"}`,onClick:()=>Ye(le.order_id),children:[p.jsx("td",{className:"py-6 px-6 align-top",children:p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h4",{className:"font-semibold text-gray-900 text-base",children:we.customer??le.customer}),p.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium px-3 py-1 rounded-lg hover:bg-blue-50 transition-colors",onClick:ge=>{ge.stopPropagation(),Oe(le.order_id),Q(!0)},children:"Edit"})]}),p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),we.customer_email??le.customer_email]}),p.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),we.customer_phone??le.customer_phone]})]})]})}),p.jsx("td",{className:"py-6 px-6 align-top",children:p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:"w-16 h-16 flex-shrink-0",children:[we.cake_img_url||le.cake_img_url?p.jsx("img",{src:we.cake_img_url||le.cake_img_url,alt:we.cake||le.cake||"Cake",className:"w-full h-full object-cover rounded-lg border-2 border-gray-200 shadow-sm",onError:ge=>{ge.target.style.display="none",ge.target.nextSibling.style.display="flex"}}):null,(!(we.cake_img_url||le.cake_img_url)||(we.cake_img_url||le.cake_img_url)==="")&&p.jsx("div",{className:"w-full h-full bg-gray-200 rounded-lg border-2 border-gray-300 flex items-center justify-center text-gray-500 text-xs font-medium",children:"No Image"})]}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h4",{className:"font-semibold text-gray-900 text-base truncate",children:we.cake??le.cake}),p.jsxs("p",{className:"text-lg font-bold text-[#AF524D]",children:["₱",(we.cake_price??le.cake_price).toLocaleString()]}),p.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:we.cake_description??le.cake_description})]})]}),p.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium px-3 py-1 rounded-lg hover:bg-blue-50 transition-colors",onClick:ge=>{ge.stopPropagation(),ne(le.order_id),q(!0)},children:"Change Cake"})]})}),p.jsx("td",{className:"py-6 px-6 align-top",children:p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9zm9-3h-2v3H8V6h8z"})}),p.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Quantity:"})]}),p.jsx("p",{className:"text-base font-medium text-gray-900",children:we.quantity??le.quantity}),p.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l3-7m3 7V4M12 10V2m0 14a2 2 0 100-4 2 2 0 000 4zm-8-6a3 3 0 11-6 0 3 3 0 016 0z"})}),p.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Theme:"})]}),p.jsx("p",{className:"text-base font-medium text-gray-900",children:we.cake_theme??le.cake_theme}),p.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H7a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2"})}),p.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tier:"})]}),p.jsx("p",{className:"text-base font-medium text-gray-900",children:we.cake_tier??le.cake_tier}),p.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),p.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Order Status:"})]}),p.jsx("p",{className:"text-base font-medium text-gray-900",children:we.order_status??le.order_status})]})}),p.jsx("td",{className:"py-6 px-6 align-top",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),p.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Scheduled Date:"})]}),be?p.jsx("input",{type:"date",className:"border-2 border-gray-200 rounded-lg px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D]",value:S,onChange:ge=>_(ge.target.value),onBlur:()=>{nt(le.order_id,"scheduled_date",S),c({id:null,field:null})},autoFocus:!0}):p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("p",{className:"text-base font-medium text-gray-900",children:we.scheduled_date?new Date(we.scheduled_date).toLocaleDateString():new Date(le.scheduled_date).toLocaleDateString()}),p.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:ge=>{ge.stopPropagation(),c({id:le.order_id,field:"scheduled_date"}),_(we.scheduled_date??le.scheduled_date)},children:"Edit"})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),p.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Order Type:"})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${(we.order_type??le.order_type)==="Pickup"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:we.order_type??le.order_type}),p.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:ge=>{ge.stopPropagation(),c({id:le.order_id,field:"order_type"}),C(we.order_type??le.order_type)},children:"Edit"})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),p.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Delivery Address:"})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("p",{className:"text-sm text-gray-600 max-w-32 truncate",children:we.delivery_address??le.delivery_address}),p.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:ge=>{ge.stopPropagation(),c({id:le.order_id,field:"delivery_address"}),O(we.delivery_address??le.delivery_address)},children:"Edit"})]})]})]})}),p.jsx("td",{className:"py-6 px-6 align-top",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),p.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Amount:"})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("p",{className:"text-xl font-bold text-[#AF524D]",children:["₱",(we.amount_paid??le.amount_paid).toLocaleString()]}),p.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:ge=>{ge.stopPropagation(),c({id:le.order_id,field:"amount_paid"}),j(we.amount_paid??le.amount_paid)},children:"Edit"})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m2 0h1m-1 0h1m1 0h1m-1 0h1m1 0h1m-1 0h1m1 0h1M7 15h1m2 0h1m-1 0h1m1 0h1m-1 0h1m1 0h1m-1 0h1m1 0h1"})}),p.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Payment Method:"})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm font-medium",children:we.payment_method??le.payment_method}),p.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:ge=>{ge.stopPropagation(),c({id:le.order_id,field:"payment_method"}),k(we.payment_method??le.payment_method)},children:"Edit"})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),p.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Payment Status:"})]}),p.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${(we.payment_status??le.payment_status)==="Paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:we.payment_status??le.payment_status})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),p.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Payment Date:"})]}),p.jsx("p",{className:"text-sm text-gray-600",children:we.payment_date?new Date(we.payment_date).toLocaleDateString():le.payment_date?new Date(le.payment_date).toLocaleDateString():"Not specified"})]})]})}),p.jsx("td",{className:"py-6 px-6 align-top",children:p.jsxs("div",{className:"space-y-3",children:[p.jsx("div",{className:"text-center",children:we.receipt_path??le.receipt_path?p.jsxs("div",{className:"flex flex-col items-center gap-2",children:[p.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:p.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),p.jsx("span",{className:"text-sm font-medium text-green-700",children:"Receipt Uploaded"})]}):p.jsxs("div",{className:"flex flex-col items-center gap-2",children:[p.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:p.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),p.jsx("span",{className:"text-sm font-medium text-gray-500",children:"No Receipt"})]})}),p.jsx("button",{className:"w-full text-blue-600 hover:text-blue-800 text-sm font-medium px-4 py-2 rounded-lg hover:bg-blue-50 transition-colors border border-blue-200",onClick:ge=>{ge.stopPropagation(),xe(le.order_id),Ie(!0)},children:we.receipt_path??le.receipt_path?"Change Receipt":"Upload Receipt"})]})})]},le.order_id)})})]})})}),p.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-between gap-4",children:[p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{className:"bg-[#AF524D] hover:bg-[#8B3A3A] text-white px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:Me,children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Order"]})}),p.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${i?"bg-red-600 hover:bg-red-700 text-white hover:shadow-xl transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:ye,disabled:!i,children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Order"]})})]}),p.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${K?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white hover:shadow-xl transform hover:-translate-y-0.5"}`,onClick:Fe,disabled:K,children:p.jsx("div",{className:"flex items-center gap-2",children:K?p.jsxs(p.Fragment,{children:[p.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving Changes..."]}):p.jsxs(p.Fragment,{children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save All Changes"]})})})]}),N&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-2xl p-8 w-full max-w-6xl max-h-[90vh] overflow-y-auto border-2 border-[#AF524D] shadow-2xl",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-2xl font-bold text-[#381914]",children:"Select a Cake"}),p.jsx("p",{className:"text-gray-600 mt-1",children:"Choose from available cakes in the catalog"})]}),p.jsx("button",{onClick:()=>{q(!1),ne(null)},className:"text-gray-500 hover:text-gray-700 text-3xl font-bold cursor-pointer hover:bg-gray-100 rounded-full w-10 h-10 flex items-center justify-center transition-colors",children:"×"})]}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:F.map(le=>p.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-4 cursor-pointer hover:border-[#AF524D] hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1",onClick:()=>it(le),children:[p.jsxs("div",{className:"aspect-square mb-4",children:[le.cake_img?p.jsx("img",{src:tc(le.cake_img),alt:le.name,className:"w-full h-full object-cover rounded-lg border-2 border-gray-200",onError:Le=>{Le.target.style.display="none",Le.target.nextSibling.style.display="flex"}}):null,(!le.cake_img||le.cake_img==="")&&p.jsx("div",{className:"w-full h-full bg-gray-200 rounded-lg border-2 border-gray-300 flex items-center justify-center text-gray-500 text-sm font-medium",children:"No Image"})]}),p.jsx("h4",{className:"font-semibold text-gray-800 text-center text-sm mb-2 truncate",children:le.name}),p.jsxs("div",{className:"space-y-1 text-center",children:[p.jsxs("p",{className:"text-lg font-bold text-[#AF524D]",children:["₱",le.price?.toLocaleString()||"0"]}),p.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-600",children:[p.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:le.theme}),p.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full",children:[le.tier," Tier"]})]}),p.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:le.description})]})]},le.cake_id))}),p.jsx("div",{className:"mt-8 flex justify-end",children:p.jsx("button",{onClick:()=>{q(!1),ne(null)},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-xl hover:bg-gray-400 transition-colors font-medium",children:"Cancel Selection"})})]})}),ve&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-2xl p-8 w-full max-w-3xl max-h-[90vh] overflow-y-auto border-2 border-[#AF524D] shadow-2xl",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-2xl font-bold text-[#381914]",children:"Select a Customer"}),p.jsx("p",{className:"text-gray-600 mt-1",children:"Choose from registered customers"})]}),p.jsx("button",{onClick:()=>{Q(!1),Oe(null)},className:"text-gray-500 hover:text-gray-700 text-3xl font-bold cursor-pointer hover:bg-gray-100 rounded-full w-10 h-10 flex items-center justify-center transition-colors",children:"×"})]}),p.jsx("div",{className:"space-y-4",children:X.map(le=>p.jsx("div",{className:"border-2 border-gray-200 rounded-xl p-6 cursor-pointer hover:border-[#AF524D] hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1",onClick:()=>De(le),children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("h4",{className:"font-semibold text-gray-800 text-lg mb-2",children:[le.cus_fname," ",le.cus_lname]}),p.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),le.email]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),le.cus_celno]})]})]}),p.jsx("div",{className:"text-blue-600",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},le.cus_id))}),p.jsx("div",{className:"mt-8 flex justify-end",children:p.jsx("button",{onClick:()=>{Q(!1),Oe(null)},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-xl hover:bg-gray-400 transition-colors font-medium",children:"Cancel Selection"})})]})}),Te&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-2xl p-8 w-full max-w-md border-2 border-[#AF524D] shadow-2xl",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-2xl font-bold text-[#381914]",children:"Upload Receipt"}),p.jsx("p",{className:"text-gray-600 mt-1",children:"Upload payment receipt for this order"})]}),p.jsx("button",{onClick:()=>{Ie(!1),xe(null),$(null)},className:"text-gray-500 hover:text-gray-700 text-3xl font-bold cursor-pointer hover:bg-gray-100 rounded-full w-10 h-10 flex items-center justify-center transition-colors",children:"×"})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Select Receipt File"}),p.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-[#AF524D] transition-colors",children:[p.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:le=>$(le.target.files[0]),className:"w-full opacity-0 absolute inset-0 cursor-pointer"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:p.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),p.jsxs("div",{className:"text-sm text-gray-600",children:[p.jsx("span",{className:"font-medium text-[#AF524D]",children:"Click to upload"})," or drag and drop"]}),p.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, PDF up to 10MB"})]})]}),Ee&&p.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:p.jsxs("p",{className:"text-sm text-green-800 font-medium",children:["Selected: ",Ee.name]})})]}),p.jsxs("div",{className:"flex justify-end gap-3",children:[p.jsx("button",{onClick:()=>{Ie(!1),xe(null),$(null)},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-xl hover:bg-gray-400 transition-colors font-medium",children:"Cancel"}),p.jsx("button",{onClick:Ze,disabled:!Ee||ce,className:`px-6 py-3 rounded-xl font-medium transition-all duration-200 ${!Ee||ce?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}`,children:ce?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):"Upload Receipt"})]})]})]})})]})},WI=()=>p.jsx("div",{className:"bg-white rounded-2xl shadow-md p-6 w-full border-4 border-[#AF524D] min-h-screen max-h-screen flex flex-col items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"mb-8",children:p.jsx("svg",{className:"w-32 h-32 mx-auto text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),p.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-4",children:"Under Construction"}),p.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-md",children:"We're working hard to bring you the assets management system. This feature will be available soon!"}),p.jsx("div",{className:"w-64 bg-gray-200 rounded-full h-3 mx-auto mb-8",children:p.jsx("div",{className:"bg-[#AF524D] h-3 rounded-full animate-pulse",style:{width:"60%"}})}),p.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 max-w-md mx-auto",children:[p.jsxs("div",{className:"flex items-center justify-center mb-4",children:[p.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full animate-pulse mr-3"}),p.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Development in Progress"})]}),p.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Asset Inventory System"]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Equipment Tracking"]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("svg",{className:"w-4 h-4 text-yellow-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),"Maintenance Scheduling"]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("svg",{className:"w-4 h-4 text-gray-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),"Asset Analytics Dashboard"]})]})]}),p.jsxs("div",{className:"mt-8 text-sm text-gray-500",children:["Estimated completion: ",p.jsx("span",{className:"font-semibold text-[#AF524D]",children:"Coming Soon"})]})]})}),hm=({children:n,allowedRoles:e})=>{const{session:t,userRole:s,loading:i}=x.useContext(_v);return i?p.jsx(ua,{message:"Checking authentication..."}):t?e.includes(s)?n:p.jsx(Mw,{to:"/"}):p.jsx(Mw,{to:"/login"})},XI=()=>{const n=Js(),e=n.pathname.split("/").pop();return p.jsx("aside",{className:"w-52 bg-white border-4 border-[#AF524D] py-4 px-2 rounded-2xl max-h-fit",children:p.jsx("ul",{className:"space-y-2",children:[{name:"Inventory",path:"inventory"},{name:"Cake Orders",path:"cake orders"},{name:"Cakes",path:"cakes"},{name:"Custom Cake Assets",path:"custom cake assets"}].map((t,s)=>{const i=t.isExternal?n.pathname===t.path:e===t.path;return p.jsx(os,{to:t.isExternal?t.path:`/adminpage/${t.path}`,className:`block text-sm px-3 py-2 rounded border transition-colors ${i?"bg-[#AF524D] text-white border-[#AF524D]":"text-black-700 hover:bg-[#DFBFA6] border-black/50"}`,children:t.name},s)})})})},KI=()=>p.jsxs("section",{className:"flex flex-col md:flex-row gap-4 p-4 bg-[#F8E6B4] min-h-screen",children:[p.jsx(XI,{}),p.jsx(XO,{})]}),ZI=()=>{const[n,e]=x.useState(null),[t,s]=x.useState(!0),{session:i,signOut:a}=la(),l=vr();x.useEffect(()=>{(async()=>{if(!i?.user?.id)return;const{data:h,error:g}=await Ce.from("ADMIN").select("*").eq("admin_uid",i.user.id).single();g?(console.error("Admin not found:",g.message),e(null)):e(h),s(!1)})()},[i]);const c=async()=>{try{await a(),l("/login"),setTimeout(()=>window.scrollTo(0,0),100)}catch(d){console.error("Error signing out:",d)}};return t?p.jsx(ua,{message:"Loading profile..."}):n?p.jsx("section",{className:"bg-gradient-to-t from-[#424220] to-[#F8E6B4] min-h-screen flex flex-col items-center justify-center py-20 px-10",children:p.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] w-full p-10 rounded-2xl shadow-2xl max-w-xl",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h1",{className:"text-3xl font-bold text-black",children:"Admin Profile"}),p.jsx("button",{onClick:c,className:"bg-red-500 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded cursor-pointer",children:"Sign Out"})]}),p.jsx("p",{className:"text-lg text-gray-500",children:"View your admin account information"}),p.jsx("hr",{className:"my-6 border-gray-400"}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-gray-500 font-semibold mb-2",children:"Username"}),p.jsx("p",{className:"text-black text-lg",children:n.username})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-gray-500 font-semibold mb-2",children:"Email"}),p.jsx("p",{className:"text-black text-lg",children:n.admin_email})]})]})}):p.jsx("p",{className:"text-center text-red-500 text-lg",children:"No admin data found."})},QI=()=>{const{pathname:n}=Js();x.useEffect(()=>{const e=()=>{window.scrollTo?window.scrollTo(0,0):window.scroll?window.scroll(0,0):document.documentElement.scrollTop!==void 0?document.documentElement.scrollTop=0:document.body.scrollTop!==void 0&&(document.body.scrollTop=0)};e();const t=setTimeout(e,100);return()=>clearTimeout(t)},[n])};function JI(){const n=Js();return p.jsx(E3,{mode:"wait",children:p.jsxs(ZO,{location:n,children:[p.jsx(Kt,{path:"/signup",element:p.jsx(Xs,{children:p.jsx(uR,{})})}),p.jsx(Kt,{path:"/login",element:p.jsx(Xs,{children:p.jsx(pR,{})})}),p.jsx(Kt,{path:"/reset-password",element:p.jsx(Xs,{children:p.jsx(mR,{})})}),p.jsx(Kt,{path:"/",element:p.jsx(Xs,{children:p.jsx(gR,{})})}),p.jsx(Kt,{path:"/redirect",element:p.jsx(Xs,{children:p.jsx(tU,{})})}),p.jsx(Kt,{path:"/aboutus",element:p.jsx(Xs,{children:p.jsx(i8,{})})}),p.jsx(Kt,{path:"/contactus",element:p.jsx(Xs,{children:p.jsx(y8,{})})}),p.jsx(Kt,{path:"/cakecatalog",element:p.jsx(Xs,{children:p.jsx(eU,{})})}),p.jsx(Kt,{path:"/cart",element:p.jsx(Xs,{children:p.jsx(sU,{})})}),p.jsx(Kt,{path:"/cakecustomization",element:p.jsx(Xs,{children:p.jsx($I,{})})}),p.jsx(Kt,{path:"/profile",element:p.jsx(hm,{allowedRoles:["customer"],children:p.jsx(Xs,{children:p.jsx(QB,{})})})}),p.jsxs(Kt,{path:"/adminpage",element:p.jsx(hm,{allowedRoles:["admin"],children:p.jsx(Xs,{children:p.jsx(KI,{})})}),children:[p.jsx(Kt,{index:!0,element:p.jsx(LC,{})}),p.jsx(Kt,{path:"inventory",element:p.jsx(LC,{})}),p.jsx(Kt,{path:"cakes",element:p.jsx(YI,{})}),p.jsx(Kt,{path:"cake orders",element:p.jsx(qI,{})}),p.jsx(Kt,{path:"custom cake assets",element:p.jsx(WI,{})})]}),p.jsx(Kt,{path:"/admin/profile",element:p.jsx(hm,{allowedRoles:["admin"],children:p.jsx(Xs,{children:p.jsx(ZI,{})})})})]},n.pathname)})}function eF(){return QI(),p.jsxs(p.Fragment,{children:[p.jsx(TN,{position:"top-center",reverseOrder:!1}),p.jsx(lR,{}),p.jsx(JI,{}),p.jsx(x8,{}),p.jsx(cR,{})]})}nO.createRoot(document.getElementById("root")).render(p.jsx(PD,{children:p.jsx(wL,{children:p.jsx(eF,{})})}));
