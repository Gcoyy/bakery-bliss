(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function Pp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function EE(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function s(){var r=!1;try{r=this instanceof s}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var r=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return n[s]}})}),t}var qm={exports:{}},Fl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ob;function kE(){if(Ob)return Fl;Ob=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,a){var l=null;if(a!==void 0&&(l=""+a),r.key!==void 0&&(l=""+r.key),"key"in r){a={};for(var u in r)u!=="key"&&(a[u]=r[u])}else a=r;return r=a.ref,{$$typeof:n,type:s,key:l,ref:r!==void 0?r:null,props:a}}return Fl.Fragment=e,Fl.jsx=t,Fl.jsxs=t,Fl}var Mb;function AE(){return Mb||(Mb=1,qm.exports=kE()),qm.exports}var d=AE(),Wm={exports:{}},Ul={},Xm={exports:{}},Km={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rb;function NE(){return Rb||(Rb=1,function(n){function e(R,$){var Q=R.length;R.push($);e:for(;0<Q;){var pe=Q-1>>>1,O=R[pe];if(0<r(O,$))R[pe]=$,R[Q]=O,Q=pe;else break e}}function t(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var $=R[0],Q=R.pop();if(Q!==$){R[0]=Q;e:for(var pe=0,O=R.length,q=O>>>1;pe<q;){var fe=2*(pe+1)-1,me=R[fe],_e=fe+1,re=R[_e];if(0>r(me,Q))_e<O&&0>r(re,me)?(R[pe]=re,R[_e]=Q,pe=_e):(R[pe]=me,R[fe]=Q,pe=fe);else if(_e<O&&0>r(re,Q))R[pe]=re,R[_e]=Q,pe=_e;else break e}}return $}function r(R,$){var Q=R.sortIndex-$.sortIndex;return Q!==0?Q:R.id-$.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],f=[],g=1,x=null,v=3,b=!1,w=!1,_=!1,T=!1,S=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function M(R){for(var $=t(f);$!==null;){if($.callback===null)s(f);else if($.startTime<=R)s(f),$.sortIndex=$.expirationTime,e(h,$);else break;$=t(f)}}function D(R){if(_=!1,M(R),!w)if(t(h)!==null)w=!0,B||(B=!0,Y());else{var $=t(f);$!==null&&ne(D,$.startTime-R)}}var B=!1,F=-1,L=5,V=-1;function N(){return T?!0:!(n.unstable_now()-V<L)}function H(){if(T=!1,B){var R=n.unstable_now();V=R;var $=!0;try{e:{w=!1,_&&(_=!1,A(F),F=-1),b=!0;var Q=v;try{t:{for(M(R),x=t(h);x!==null&&!(x.expirationTime>R&&N());){var pe=x.callback;if(typeof pe=="function"){x.callback=null,v=x.priorityLevel;var O=pe(x.expirationTime<=R);if(R=n.unstable_now(),typeof O=="function"){x.callback=O,M(R),$=!0;break t}x===t(h)&&s(h),M(R)}else s(h);x=t(h)}if(x!==null)$=!0;else{var q=t(f);q!==null&&ne(D,q.startTime-R),$=!1}}break e}finally{x=null,v=Q,b=!1}$=void 0}}finally{$?Y():B=!1}}}var Y;if(typeof E=="function")Y=function(){E(H)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,te=se.port2;se.port1.onmessage=H,Y=function(){te.postMessage(null)}}else Y=function(){S(H,0)};function ne(R,$){F=S(function(){R(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(R){R.callback=null},n.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<R?Math.floor(1e3/R):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(R){switch(v){case 1:case 2:case 3:var $=3;break;default:$=v}var Q=v;v=$;try{return R()}finally{v=Q}},n.unstable_requestPaint=function(){T=!0},n.unstable_runWithPriority=function(R,$){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var Q=v;v=R;try{return $()}finally{v=Q}},n.unstable_scheduleCallback=function(R,$,Q){var pe=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?pe+Q:pe):Q=pe,R){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Q+O,R={id:g++,callback:$,priorityLevel:R,startTime:Q,expirationTime:O,sortIndex:-1},Q>pe?(R.sortIndex=Q,e(f,R),t(h)===null&&R===t(f)&&(_?(A(F),F=-1):_=!0,ne(D,Q-pe))):(R.sortIndex=O,e(h,R),w||b||(w=!0,B||(B=!0,Y()))),R},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(R){var $=v;return function(){var Q=v;v=$;try{return R.apply(this,arguments)}finally{v=Q}}}}(Km)),Km}var Pb;function DE(){return Pb||(Pb=1,Xm.exports=NE()),Xm.exports}var Qm={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lb;function OE(){if(Lb)return qe;Lb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.iterator;function v(O){return O===null||typeof O!="object"?null:(O=x&&O[x]||O["@@iterator"],typeof O=="function"?O:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function T(O,q,fe){this.props=O,this.context=q,this.refs=_,this.updater=fe||b}T.prototype.isReactComponent={},T.prototype.setState=function(O,q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,q,"setState")},T.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function S(){}S.prototype=T.prototype;function A(O,q,fe){this.props=O,this.context=q,this.refs=_,this.updater=fe||b}var E=A.prototype=new S;E.constructor=A,w(E,T.prototype),E.isPureReactComponent=!0;var M=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function F(O,q,fe,me,_e,re){return fe=re.ref,{$$typeof:n,type:O,key:q,ref:fe!==void 0?fe:null,props:re}}function L(O,q){return F(O.type,q,void 0,void 0,void 0,O.props)}function V(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function N(O){var q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(fe){return q[fe]})}var H=/\/+/g;function Y(O,q){return typeof O=="object"&&O!==null&&O.key!=null?N(""+O.key):q.toString(36)}function se(){}function te(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(se,se):(O.status="pending",O.then(function(q){O.status==="pending"&&(O.status="fulfilled",O.value=q)},function(q){O.status==="pending"&&(O.status="rejected",O.reason=q)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function ne(O,q,fe,me,_e){var re=typeof O;(re==="undefined"||re==="boolean")&&(O=null);var xe=!1;if(O===null)xe=!0;else switch(re){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(O.$$typeof){case n:case e:xe=!0;break;case g:return xe=O._init,ne(xe(O._payload),q,fe,me,_e)}}if(xe)return _e=_e(O),xe=me===""?"."+Y(O,0):me,M(_e)?(fe="",xe!=null&&(fe=xe.replace(H,"$&/")+"/"),ne(_e,q,fe,"",function(Oe){return Oe})):_e!=null&&(V(_e)&&(_e=L(_e,fe+(_e.key==null||O&&O.key===_e.key?"":(""+_e.key).replace(H,"$&/")+"/")+xe)),q.push(_e)),1;xe=0;var de=me===""?".":me+":";if(M(O))for(var je=0;je<O.length;je++)me=O[je],re=de+Y(me,je),xe+=ne(me,q,fe,re,_e);else if(je=v(O),typeof je=="function")for(O=je.call(O),je=0;!(me=O.next()).done;)me=me.value,re=de+Y(me,je++),xe+=ne(me,q,fe,re,_e);else if(re==="object"){if(typeof O.then=="function")return ne(te(O),q,fe,me,_e);throw q=String(O),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return xe}function R(O,q,fe){if(O==null)return O;var me=[],_e=0;return ne(O,me,"","",function(re){return q.call(fe,re,_e++)}),me}function $(O){if(O._status===-1){var q=O._result;q=q(),q.then(function(fe){(O._status===0||O._status===-1)&&(O._status=1,O._result=fe)},function(fe){(O._status===0||O._status===-1)&&(O._status=2,O._result=fe)}),O._status===-1&&(O._status=0,O._result=q)}if(O._status===1)return O._result.default;throw O._result}var Q=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function pe(){}return qe.Children={map:R,forEach:function(O,q,fe){R(O,function(){q.apply(this,arguments)},fe)},count:function(O){var q=0;return R(O,function(){q++}),q},toArray:function(O){return R(O,function(q){return q})||[]},only:function(O){if(!V(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},qe.Component=T,qe.Fragment=t,qe.Profiler=r,qe.PureComponent=A,qe.StrictMode=s,qe.Suspense=h,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,qe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return D.H.useMemoCache(O)}},qe.cache=function(O){return function(){return O.apply(null,arguments)}},qe.cloneElement=function(O,q,fe){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var me=w({},O.props),_e=O.key,re=void 0;if(q!=null)for(xe in q.ref!==void 0&&(re=void 0),q.key!==void 0&&(_e=""+q.key),q)!B.call(q,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&q.ref===void 0||(me[xe]=q[xe]);var xe=arguments.length-2;if(xe===1)me.children=fe;else if(1<xe){for(var de=Array(xe),je=0;je<xe;je++)de[je]=arguments[je+2];me.children=de}return F(O.type,_e,void 0,void 0,re,me)},qe.createContext=function(O){return O={$$typeof:l,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:a,_context:O},O},qe.createElement=function(O,q,fe){var me,_e={},re=null;if(q!=null)for(me in q.key!==void 0&&(re=""+q.key),q)B.call(q,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(_e[me]=q[me]);var xe=arguments.length-2;if(xe===1)_e.children=fe;else if(1<xe){for(var de=Array(xe),je=0;je<xe;je++)de[je]=arguments[je+2];_e.children=de}if(O&&O.defaultProps)for(me in xe=O.defaultProps,xe)_e[me]===void 0&&(_e[me]=xe[me]);return F(O,re,void 0,void 0,null,_e)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(O){return{$$typeof:u,render:O}},qe.isValidElement=V,qe.lazy=function(O){return{$$typeof:g,_payload:{_status:-1,_result:O},_init:$}},qe.memo=function(O,q){return{$$typeof:f,type:O,compare:q===void 0?null:q}},qe.startTransition=function(O){var q=D.T,fe={};D.T=fe;try{var me=O(),_e=D.S;_e!==null&&_e(fe,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(pe,Q)}catch(re){Q(re)}finally{D.T=q}},qe.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},qe.use=function(O){return D.H.use(O)},qe.useActionState=function(O,q,fe){return D.H.useActionState(O,q,fe)},qe.useCallback=function(O,q){return D.H.useCallback(O,q)},qe.useContext=function(O){return D.H.useContext(O)},qe.useDebugValue=function(){},qe.useDeferredValue=function(O,q){return D.H.useDeferredValue(O,q)},qe.useEffect=function(O,q,fe){var me=D.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return me.useEffect(O,q)},qe.useId=function(){return D.H.useId()},qe.useImperativeHandle=function(O,q,fe){return D.H.useImperativeHandle(O,q,fe)},qe.useInsertionEffect=function(O,q){return D.H.useInsertionEffect(O,q)},qe.useLayoutEffect=function(O,q){return D.H.useLayoutEffect(O,q)},qe.useMemo=function(O,q){return D.H.useMemo(O,q)},qe.useOptimistic=function(O,q){return D.H.useOptimistic(O,q)},qe.useReducer=function(O,q,fe){return D.H.useReducer(O,q,fe)},qe.useRef=function(O){return D.H.useRef(O)},qe.useState=function(O){return D.H.useState(O)},qe.useSyncExternalStore=function(O,q,fe){return D.H.useSyncExternalStore(O,q,fe)},qe.useTransition=function(){return D.H.useTransition()},qe.version="19.1.0",qe}var Bb;function Lp(){return Bb||(Bb=1,Qm.exports=OE()),Qm.exports}var Zm={exports:{}},bs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb;function ME(){if(Fb)return bs;Fb=1;var n=Lp();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(h,f,g){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:x==null?null:""+x,children:h,containerInfo:f,implementation:g}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return bs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,bs.createPortal=function(h,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(h,f,null,g)},bs.flushSync=function(h){var f=l.T,g=s.p;try{if(l.T=null,s.p=2,h)return h()}finally{l.T=f,s.p=g,s.d.f()}},bs.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(h,f))},bs.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},bs.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var g=f.as,x=u(g,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?s.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:x,integrity:v,fetchPriority:b}):g==="script"&&s.d.X(h,{crossOrigin:x,integrity:v,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},bs.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);s.d.M(h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(h)},bs.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,x=u(g,f.crossOrigin);s.d.L(h,g,{crossOrigin:x,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},bs.preloadModule=function(h,f){if(typeof h=="string")if(f){var g=u(f.as,f.crossOrigin);s.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(h)},bs.requestFormReset=function(h){s.d.r(h)},bs.unstable_batchedUpdates=function(h,f){return h(f)},bs.useFormState=function(h,f,g){return l.H.useFormState(h,f,g)},bs.useFormStatus=function(){return l.H.useHostTransitionStatus()},bs.version="19.1.0",bs}var Ub;function RE(){if(Ub)return Zm.exports;Ub=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Zm.exports=ME(),Zm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb;function PE(){if(zb)return Ul;zb=1;var n=DE(),e=Lp(),t=RE();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function u(i){if(a(i)!==i)throw Error(s(188))}function h(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(s(188));return o!==i?null:i}for(var c=i,m=o;;){var p=c.return;if(p===null)break;var y=p.alternate;if(y===null){if(m=p.return,m!==null){c=m;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===c)return u(p),i;if(y===m)return u(p),o;y=y.sibling}throw Error(s(188))}if(c.return!==m.return)c=p,m=y;else{for(var C=!1,k=p.child;k;){if(k===c){C=!0,c=p,m=y;break}if(k===m){C=!0,m=p,c=y;break}k=k.sibling}if(!C){for(k=y.child;k;){if(k===c){C=!0,c=y,m=p;break}if(k===m){C=!0,m=y,c=p;break}k=k.sibling}if(!C)throw Error(s(189))}}if(c.alternate!==m)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?i:o}function f(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=f(i),o!==null)return o;i=i.sibling}return null}var g=Object.assign,x=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),A=Symbol.for("react.consumer"),E=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function Y(i){return i===null||typeof i!="object"?null:(i=H&&i[H]||i["@@iterator"],typeof i=="function"?i:null)}var se=Symbol.for("react.client.reference");function te(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===se?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case T:return"Profiler";case _:return"StrictMode";case D:return"Suspense";case B:return"SuspenseList";case V:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case E:return(i.displayName||"Context")+".Provider";case A:return(i._context.displayName||"Context")+".Consumer";case M:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case F:return o=i.displayName||null,o!==null?o:te(i.type)||"Memo";case L:o=i._payload,i=i._init;try{return te(i(o))}catch{}}return null}var ne=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},pe=[],O=-1;function q(i){return{current:i}}function fe(i){0>O||(i.current=pe[O],pe[O]=null,O--)}function me(i,o){O++,pe[O]=i.current,i.current=o}var _e=q(null),re=q(null),xe=q(null),de=q(null);function je(i,o){switch(me(xe,o),me(re,i),me(_e,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?ab(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=ab(o),i=ob(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}fe(_e),me(_e,i)}function Oe(){fe(_e),fe(re),fe(xe)}function oe(i){i.memoizedState!==null&&me(de,i);var o=_e.current,c=ob(o,i.type);o!==c&&(me(re,i),me(_e,c))}function Ce(i){re.current===i&&(fe(_e),fe(re)),de.current===i&&(fe(de),Ml._currentValue=Q)}var Te=Object.prototype.hasOwnProperty,we=n.unstable_scheduleCallback,Ve=n.unstable_cancelCallback,Ee=n.unstable_shouldYield,Ge=n.unstable_requestPaint,Se=n.unstable_now,it=n.unstable_getCurrentPriorityLevel,Gt=n.unstable_ImmediatePriority,Zt=n.unstable_UserBlockingPriority,Jt=n.unstable_NormalPriority,bn=n.unstable_LowPriority,Hs=n.unstable_IdlePriority,$s=n.log,ie=n.unstable_setDisableYieldValue,Me=null,ye=null;function ce(i){if(typeof $s=="function"&&ie(i),ye&&typeof ye.setStrictMode=="function")try{ye.setStrictMode(Me,i)}catch{}}var le=Math.clz32?Math.clz32:va,ot=Math.log,Un=Math.LN2;function va(i){return i>>>=0,i===0?32:31-(ot(i)/Un|0)|0}var sn=256,ya=4194304;function sr(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ni(i,o,c){var m=i.pendingLanes;if(m===0)return 0;var p=0,y=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var k=m&134217727;return k!==0?(m=k&~y,m!==0?p=sr(m):(C&=k,C!==0?p=sr(C):c||(c=k&~i,c!==0&&(p=sr(c))))):(k=m&~y,k!==0?p=sr(k):C!==0?p=sr(C):c||(c=m&~i,c!==0&&(p=sr(c)))),p===0?0:o!==0&&o!==p&&(o&y)===0&&(y=p&-p,c=o&-o,y>=c||y===32&&(c&4194048)!==0)?o:p}function Vr(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Vc(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Go(){var i=sn;return sn<<=1,(sn&4194048)===0&&(sn=256),i}function Ic(){var i=ya;return ya<<=1,(ya&62914560)===0&&(ya=4194304),i}function Di(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function Oi(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Uh(i,o,c,m,p,y){var C=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var k=i.entanglements,P=i.expirationTimes,K=i.hiddenUpdates;for(c=C&~c;0<c;){var ae=31-le(c),he=1<<ae;k[ae]=0,P[ae]=-1;var Z=K[ae];if(Z!==null)for(K[ae]=null,ae=0;ae<Z.length;ae++){var J=Z[ae];J!==null&&(J.lane&=-536870913)}c&=~he}m!==0&&Hc(i,m,0),y!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=y&~(C&~o))}function Hc(i,o,c){i.pendingLanes|=o,i.suspendedLanes&=~o;var m=31-le(o);i.entangledLanes|=o,i.entanglements[m]=i.entanglements[m]|1073741824|c&4194090}function X(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var m=31-le(c),p=1<<m;p&o|i[m]&o&&(i[m]|=o),c&=~p}}function ge(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function $e(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ne(){var i=$.p;return i!==0?i:(i=window.event,i===void 0?32:Tb(i.type))}function Re(i,o){var c=$.p;try{return $.p=i,o()}finally{$.p=c}}var Be=Math.random().toString(36).slice(2),Fe="__reactFiber$"+Be,nt="__reactProps$"+Be,Ct="__reactContainer$"+Be,Le="__reactEvents$"+Be,ht="__reactListeners$"+Be,Ds="__reactHandles$"+Be,Ir="__reactResources$"+Be,ls="__reactMarker$"+Be;function Hr(i){delete i[Fe],delete i[nt],delete i[Le],delete i[ht],delete i[Ds]}function wn(i){var o=i[Fe];if(o)return o;for(var c=i.parentNode;c;){if(o=c[Ct]||c[Fe]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=db(i);i!==null;){if(c=i[Fe])return c;i=db(i)}return o}i=c,c=i.parentNode}return null}function Gs(i){if(i=i[Fe]||i[Ct]){var o=i.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return i}return null}function cs(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function zn(i){var o=i[Ir];return o||(o=i[Ir]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function kt(i){i[ls]=!0}var _n=new Set,Qe={};function us(i,o){vs(i,o),vs(i+"Capture",o)}function vs(i,o){for(Qe[i]=o,i=0;i<o.length;i++)_n.add(o[i])}var Ot=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ft={},Vn={};function ds(i){return Te.call(Vn,i)?!0:Te.call(Ft,i)?!1:Ot.test(i)?Vn[i]=!0:(Ft[i]=!0,!1)}function Ut(i,o,c){if(ds(o))if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+c)}}function zt(i,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+c)}}function nr(i,o,c,m){if(m===null)i.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(o,c,""+m)}}var zh,J0;function ba(i){if(zh===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);zh=o&&o[1]||"",J0=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zh+i+J0}var Vh=!1;function Ih(i,o){if(!i||Vh)return"";Vh=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(J){var Z=J}Reflect.construct(i,[],he)}else{try{he.call()}catch(J){Z=J}i.call(he.prototype)}}else{try{throw Error()}catch(J){Z=J}(he=i())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(J){if(J&&Z&&typeof J.stack=="string")return[J.stack,Z.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=m.DetermineComponentFrameRoot(),C=y[0],k=y[1];if(C&&k){var P=C.split(`
`),K=k.split(`
`);for(p=m=0;m<P.length&&!P[m].includes("DetermineComponentFrameRoot");)m++;for(;p<K.length&&!K[p].includes("DetermineComponentFrameRoot");)p++;if(m===P.length||p===K.length)for(m=P.length-1,p=K.length-1;1<=m&&0<=p&&P[m]!==K[p];)p--;for(;1<=m&&0<=p;m--,p--)if(P[m]!==K[p]){if(m!==1||p!==1)do if(m--,p--,0>p||P[m]!==K[p]){var ae=`
`+P[m].replace(" at new "," at ");return i.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",i.displayName)),ae}while(1<=m&&0<=p);break}}}finally{Vh=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?ba(c):""}function wj(i){switch(i.tag){case 26:case 27:case 5:return ba(i.type);case 16:return ba("Lazy");case 13:return ba("Suspense");case 19:return ba("SuspenseList");case 0:case 15:return Ih(i.type,!1);case 11:return Ih(i.type.render,!1);case 1:return Ih(i.type,!0);case 31:return ba("Activity");default:return""}}function ex(i){try{var o="";do o+=wj(i),i=i.return;while(i);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function nn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function tx(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function _j(i){var o=tx(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),m=""+i[o];if(!i.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,y=c.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(C){m=""+C,y.call(this,C)}}),Object.defineProperty(i,o,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(C){m=""+C},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function $c(i){i._valueTracker||(i._valueTracker=_j(i))}function sx(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),m="";return i&&(m=tx(i)?i.checked?"true":"false":i.value),i=m,i!==c?(o.setValue(i),!0):!1}function Gc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Sj=/[\n"\\]/g;function rn(i){return i.replace(Sj,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Hh(i,o,c,m,p,y,C,k){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),o!=null?C==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+nn(o)):i.value!==""+nn(o)&&(i.value=""+nn(o)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),o!=null?$h(i,C,nn(o)):c!=null?$h(i,C,nn(c)):m!=null&&i.removeAttribute("value"),p==null&&y!=null&&(i.defaultChecked=!!y),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?i.name=""+nn(k):i.removeAttribute("name")}function nx(i,o,c,m,p,y,C,k){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),o!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||o!=null))return;c=c!=null?""+nn(c):"",o=o!=null?""+nn(o):c,k||o===i.value||(i.value=o),i.defaultValue=o}m=m??p,m=typeof m!="function"&&typeof m!="symbol"&&!!m,i.checked=k?i.checked:!!m,i.defaultChecked=!!m,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C)}function $h(i,o,c){o==="number"&&Gc(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function wa(i,o,c,m){if(i=i.options,o){o={};for(var p=0;p<c.length;p++)o["$"+c[p]]=!0;for(c=0;c<i.length;c++)p=o.hasOwnProperty("$"+i[c].value),i[c].selected!==p&&(i[c].selected=p),p&&m&&(i[c].defaultSelected=!0)}else{for(c=""+nn(c),o=null,p=0;p<i.length;p++){if(i[p].value===c){i[p].selected=!0,m&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function rx(i,o,c){if(o!=null&&(o=""+nn(o),o!==i.value&&(i.value=o),c==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=c!=null?""+nn(c):""}function ix(i,o,c,m){if(o==null){if(m!=null){if(c!=null)throw Error(s(92));if(ne(m)){if(1<m.length)throw Error(s(93));m=m[0]}c=m}c==null&&(c=""),o=c}c=nn(o),i.defaultValue=c,m=i.textContent,m===c&&m!==""&&m!==null&&(i.value=m)}function _a(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var Cj=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ax(i,o,c){var m=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?m?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":m?i.setProperty(o,c):typeof c!="number"||c===0||Cj.has(o)?o==="float"?i.cssFloat=c:i[o]=(""+c).trim():i[o]=c+"px"}function ox(i,o,c){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,c!=null){for(var m in c)!c.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?i.setProperty(m,""):m==="float"?i.cssFloat="":i[m]="");for(var p in o)m=o[p],o.hasOwnProperty(p)&&c[p]!==m&&ax(i,p,m)}else for(var y in o)o.hasOwnProperty(y)&&ax(i,y,o[y])}function Gh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jj=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tj=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yc(i){return Tj.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Yh=null;function qh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Sa=null,Ca=null;function lx(i){var o=Gs(i);if(o&&(i=o.stateNode)){var c=i[nt]||null;e:switch(i=o.stateNode,o.type){case"input":if(Hh(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+rn(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var m=c[o];if(m!==i&&m.form===i.form){var p=m[nt]||null;if(!p)throw Error(s(90));Hh(m,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(o=0;o<c.length;o++)m=c[o],m.form===i.form&&sx(m)}break e;case"textarea":rx(i,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&wa(i,!!c.multiple,o,!1)}}}var Wh=!1;function cx(i,o,c){if(Wh)return i(o,c);Wh=!0;try{var m=i(o);return m}finally{if(Wh=!1,(Sa!==null||Ca!==null)&&(Du(),Sa&&(o=Sa,i=Ca,Ca=Sa=null,lx(o),i)))for(o=0;o<i.length;o++)lx(i[o])}}function Yo(i,o){var c=i.stateNode;if(c===null)return null;var m=c[nt]||null;if(m===null)return null;c=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(s(231,o,typeof c));return c}var rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xh=!1;if(rr)try{var qo={};Object.defineProperty(qo,"passive",{get:function(){Xh=!0}}),window.addEventListener("test",qo,qo),window.removeEventListener("test",qo,qo)}catch{Xh=!1}var $r=null,Kh=null,qc=null;function ux(){if(qc)return qc;var i,o=Kh,c=o.length,m,p="value"in $r?$r.value:$r.textContent,y=p.length;for(i=0;i<c&&o[i]===p[i];i++);var C=c-i;for(m=1;m<=C&&o[c-m]===p[y-m];m++);return qc=p.slice(i,1<m?1-m:void 0)}function Wc(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Xc(){return!0}function dx(){return!1}function Os(i){function o(c,m,p,y,C){this._reactName=c,this._targetInst=p,this.type=m,this.nativeEvent=y,this.target=C,this.currentTarget=null;for(var k in i)i.hasOwnProperty(k)&&(c=i[k],this[k]=c?c(y):y[k]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Xc:dx,this.isPropagationStopped=dx,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Xc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Xc)},persist:function(){},isPersistent:Xc}),o}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kc=Os(Mi),Wo=g({},Mi,{view:0,detail:0}),Ej=Os(Wo),Qh,Zh,Xo,Qc=g({},Wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ef,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Xo&&(Xo&&i.type==="mousemove"?(Qh=i.screenX-Xo.screenX,Zh=i.screenY-Xo.screenY):Zh=Qh=0,Xo=i),Qh)},movementY:function(i){return"movementY"in i?i.movementY:Zh}}),hx=Os(Qc),kj=g({},Qc,{dataTransfer:0}),Aj=Os(kj),Nj=g({},Wo,{relatedTarget:0}),Jh=Os(Nj),Dj=g({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),Oj=Os(Dj),Mj=g({},Mi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Rj=Os(Mj),Pj=g({},Mi,{data:0}),fx=Os(Pj),Lj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uj(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Fj[i])?!!o[i]:!1}function ef(){return Uj}var zj=g({},Wo,{key:function(i){if(i.key){var o=Lj[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Wc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Bj[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ef,charCode:function(i){return i.type==="keypress"?Wc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Wc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Vj=Os(zj),Ij=g({},Qc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mx=Os(Ij),Hj=g({},Wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ef}),$j=Os(Hj),Gj=g({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yj=Os(Gj),qj=g({},Qc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Wj=Os(qj),Xj=g({},Mi,{newState:0,oldState:0}),Kj=Os(Xj),Qj=[9,13,27,32],tf=rr&&"CompositionEvent"in window,Ko=null;rr&&"documentMode"in document&&(Ko=document.documentMode);var Zj=rr&&"TextEvent"in window&&!Ko,gx=rr&&(!tf||Ko&&8<Ko&&11>=Ko),px=" ",xx=!1;function vx(i,o){switch(i){case"keyup":return Qj.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yx(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ja=!1;function Jj(i,o){switch(i){case"compositionend":return yx(o);case"keypress":return o.which!==32?null:(xx=!0,px);case"textInput":return i=o.data,i===px&&xx?null:i;default:return null}}function eT(i,o){if(ja)return i==="compositionend"||!tf&&vx(i,o)?(i=ux(),qc=Kh=$r=null,ja=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return gx&&o.locale!=="ko"?null:o.data;default:return null}}var tT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bx(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!tT[i.type]:o==="textarea"}function wx(i,o,c,m){Sa?Ca?Ca.push(m):Ca=[m]:Sa=m,o=Bu(o,"onChange"),0<o.length&&(c=new Kc("onChange","change",null,c,m),i.push({event:c,listeners:o}))}var Qo=null,Zo=null;function sT(i){tb(i,0)}function Zc(i){var o=cs(i);if(sx(o))return i}function _x(i,o){if(i==="change")return o}var Sx=!1;if(rr){var sf;if(rr){var nf="oninput"in document;if(!nf){var Cx=document.createElement("div");Cx.setAttribute("oninput","return;"),nf=typeof Cx.oninput=="function"}sf=nf}else sf=!1;Sx=sf&&(!document.documentMode||9<document.documentMode)}function jx(){Qo&&(Qo.detachEvent("onpropertychange",Tx),Zo=Qo=null)}function Tx(i){if(i.propertyName==="value"&&Zc(Zo)){var o=[];wx(o,Zo,i,qh(i)),cx(sT,o)}}function nT(i,o,c){i==="focusin"?(jx(),Qo=o,Zo=c,Qo.attachEvent("onpropertychange",Tx)):i==="focusout"&&jx()}function rT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Zc(Zo)}function iT(i,o){if(i==="click")return Zc(o)}function aT(i,o){if(i==="input"||i==="change")return Zc(o)}function oT(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Ys=typeof Object.is=="function"?Object.is:oT;function Jo(i,o){if(Ys(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),m=Object.keys(o);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var p=c[m];if(!Te.call(o,p)||!Ys(i[p],o[p]))return!1}return!0}function Ex(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function kx(i,o){var c=Ex(i);i=0;for(var m;c;){if(c.nodeType===3){if(m=i+c.textContent.length,i<=o&&m>=o)return{node:c,offset:o-i};i=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Ex(c)}}function Ax(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Ax(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Nx(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Gc(i.document);o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=Gc(i.document)}return o}function rf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var lT=rr&&"documentMode"in document&&11>=document.documentMode,Ta=null,af=null,el=null,of=!1;function Dx(i,o,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;of||Ta==null||Ta!==Gc(m)||(m=Ta,"selectionStart"in m&&rf(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),el&&Jo(el,m)||(el=m,m=Bu(af,"onSelect"),0<m.length&&(o=new Kc("onSelect","select",null,o,c),i.push({event:o,listeners:m}),o.target=Ta)))}function Ri(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var Ea={animationend:Ri("Animation","AnimationEnd"),animationiteration:Ri("Animation","AnimationIteration"),animationstart:Ri("Animation","AnimationStart"),transitionrun:Ri("Transition","TransitionRun"),transitionstart:Ri("Transition","TransitionStart"),transitioncancel:Ri("Transition","TransitionCancel"),transitionend:Ri("Transition","TransitionEnd")},lf={},Ox={};rr&&(Ox=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);function Pi(i){if(lf[i])return lf[i];if(!Ea[i])return i;var o=Ea[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in Ox)return lf[i]=o[c];return i}var Mx=Pi("animationend"),Rx=Pi("animationiteration"),Px=Pi("animationstart"),cT=Pi("transitionrun"),uT=Pi("transitionstart"),dT=Pi("transitioncancel"),Lx=Pi("transitionend"),Bx=new Map,cf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cf.push("scrollEnd");function Sn(i,o){Bx.set(i,o),us(o,[i])}var Fx=new WeakMap;function an(i,o){if(typeof i=="object"&&i!==null){var c=Fx.get(i);return c!==void 0?c:(o={value:i,source:o,stack:ex(o)},Fx.set(i,o),o)}return{value:i,source:o,stack:ex(o)}}var on=[],ka=0,uf=0;function Jc(){for(var i=ka,o=uf=ka=0;o<i;){var c=on[o];on[o++]=null;var m=on[o];on[o++]=null;var p=on[o];on[o++]=null;var y=on[o];if(on[o++]=null,m!==null&&p!==null){var C=m.pending;C===null?p.next=p:(p.next=C.next,C.next=p),m.pending=p}y!==0&&Ux(c,p,y)}}function eu(i,o,c,m){on[ka++]=i,on[ka++]=o,on[ka++]=c,on[ka++]=m,uf|=m,i.lanes|=m,i=i.alternate,i!==null&&(i.lanes|=m)}function df(i,o,c,m){return eu(i,o,c,m),tu(i)}function Aa(i,o){return eu(i,null,null,o),tu(i)}function Ux(i,o,c){i.lanes|=c;var m=i.alternate;m!==null&&(m.lanes|=c);for(var p=!1,y=i.return;y!==null;)y.childLanes|=c,m=y.alternate,m!==null&&(m.childLanes|=c),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(p=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,p&&o!==null&&(p=31-le(c),i=y.hiddenUpdates,m=i[p],m===null?i[p]=[o]:m.push(o),o.lane=c|536870912),y):null}function tu(i){if(50<jl)throw jl=0,xm=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Na={};function hT(i,o,c,m){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qs(i,o,c,m){return new hT(i,o,c,m)}function hf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ir(i,o){var c=i.alternate;return c===null?(c=qs(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function zx(i,o){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,o=c.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function su(i,o,c,m,p,y){var C=0;if(m=i,typeof i=="function")hf(i)&&(C=1);else if(typeof i=="string")C=mE(i,c,_e.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case V:return i=qs(31,c,o,p),i.elementType=V,i.lanes=y,i;case w:return Li(c.children,p,y,o);case _:C=8,p|=24;break;case T:return i=qs(12,c,o,p|2),i.elementType=T,i.lanes=y,i;case D:return i=qs(13,c,o,p),i.elementType=D,i.lanes=y,i;case B:return i=qs(19,c,o,p),i.elementType=B,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case S:case E:C=10;break e;case A:C=9;break e;case M:C=11;break e;case F:C=14;break e;case L:C=16,m=null;break e}C=29,c=Error(s(130,i===null?"null":typeof i,"")),m=null}return o=qs(C,c,o,p),o.elementType=i,o.type=m,o.lanes=y,o}function Li(i,o,c,m){return i=qs(7,i,m,o),i.lanes=c,i}function ff(i,o,c){return i=qs(6,i,null,o),i.lanes=c,i}function mf(i,o,c){return o=qs(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Da=[],Oa=0,nu=null,ru=0,ln=[],cn=0,Bi=null,ar=1,or="";function Fi(i,o){Da[Oa++]=ru,Da[Oa++]=nu,nu=i,ru=o}function Vx(i,o,c){ln[cn++]=ar,ln[cn++]=or,ln[cn++]=Bi,Bi=i;var m=ar;i=or;var p=32-le(m)-1;m&=~(1<<p),c+=1;var y=32-le(o)+p;if(30<y){var C=p-p%5;y=(m&(1<<C)-1).toString(32),m>>=C,p-=C,ar=1<<32-le(o)+p|c<<p|m,or=y+i}else ar=1<<y|c<<p|m,or=i}function gf(i){i.return!==null&&(Fi(i,1),Vx(i,1,0))}function pf(i){for(;i===nu;)nu=Da[--Oa],Da[Oa]=null,ru=Da[--Oa],Da[Oa]=null;for(;i===Bi;)Bi=ln[--cn],ln[cn]=null,or=ln[--cn],ln[cn]=null,ar=ln[--cn],ln[cn]=null}var Ts=null,At=null,at=!1,Ui=null,In=!1,xf=Error(s(519));function zi(i){var o=Error(s(418,""));throw nl(an(o,i)),xf}function Ix(i){var o=i.stateNode,c=i.type,m=i.memoizedProps;switch(o[Fe]=i,o[nt]=m,c){case"dialog":Je("cancel",o),Je("close",o);break;case"iframe":case"object":case"embed":Je("load",o);break;case"video":case"audio":for(c=0;c<El.length;c++)Je(El[c],o);break;case"source":Je("error",o);break;case"img":case"image":case"link":Je("error",o),Je("load",o);break;case"details":Je("toggle",o);break;case"input":Je("invalid",o),nx(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),$c(o);break;case"select":Je("invalid",o);break;case"textarea":Je("invalid",o),ix(o,m.value,m.defaultValue,m.children),$c(o)}c=m.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||m.suppressHydrationWarning===!0||ib(o.textContent,c)?(m.popover!=null&&(Je("beforetoggle",o),Je("toggle",o)),m.onScroll!=null&&Je("scroll",o),m.onScrollEnd!=null&&Je("scrollend",o),m.onClick!=null&&(o.onclick=Fu),o=!0):o=!1,o||zi(i)}function Hx(i){for(Ts=i.return;Ts;)switch(Ts.tag){case 5:case 13:In=!1;return;case 27:case 3:In=!0;return;default:Ts=Ts.return}}function tl(i){if(i!==Ts)return!1;if(!at)return Hx(i),at=!0,!1;var o=i.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Mm(i.type,i.memoizedProps)),c=!c),c&&At&&zi(i),Hx(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8)if(c=i.data,c==="/$"){if(o===0){At=jn(i.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;i=i.nextSibling}At=null}}else o===27?(o=At,ai(i.type)?(i=Bm,Bm=null,At=i):At=o):At=Ts?jn(i.stateNode.nextSibling):null;return!0}function sl(){At=Ts=null,at=!1}function $x(){var i=Ui;return i!==null&&(Ps===null?Ps=i:Ps.push.apply(Ps,i),Ui=null),i}function nl(i){Ui===null?Ui=[i]:Ui.push(i)}var vf=q(null),Vi=null,lr=null;function Gr(i,o,c){me(vf,o._currentValue),o._currentValue=c}function cr(i){i._currentValue=vf.current,fe(vf)}function yf(i,o,c){for(;i!==null;){var m=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),i===c)break;i=i.return}}function bf(i,o,c,m){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var y=p.dependencies;if(y!==null){var C=p.child;y=y.firstContext;e:for(;y!==null;){var k=y;y=p;for(var P=0;P<o.length;P++)if(k.context===o[P]){y.lanes|=c,k=y.alternate,k!==null&&(k.lanes|=c),yf(y.return,c,i),m||(C=null);break e}y=k.next}}else if(p.tag===18){if(C=p.return,C===null)throw Error(s(341));C.lanes|=c,y=C.alternate,y!==null&&(y.lanes|=c),yf(C,c,i),C=null}else C=p.child;if(C!==null)C.return=p;else for(C=p;C!==null;){if(C===i){C=null;break}if(p=C.sibling,p!==null){p.return=C.return,C=p;break}C=C.return}p=C}}function rl(i,o,c,m){i=null;for(var p=o,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var C=p.alternate;if(C===null)throw Error(s(387));if(C=C.memoizedProps,C!==null){var k=p.type;Ys(p.pendingProps.value,C.value)||(i!==null?i.push(k):i=[k])}}else if(p===de.current){if(C=p.alternate,C===null)throw Error(s(387));C.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(Ml):i=[Ml])}p=p.return}i!==null&&bf(o,i,c,m),o.flags|=262144}function iu(i){for(i=i.firstContext;i!==null;){if(!Ys(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ii(i){Vi=i,lr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ys(i){return Gx(Vi,i)}function au(i,o){return Vi===null&&Ii(i),Gx(i,o)}function Gx(i,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},lr===null){if(i===null)throw Error(s(308));lr=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else lr=lr.next=o;return c}var fT=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(c,m){i.push(m)}};this.abort=function(){o.aborted=!0,i.forEach(function(c){return c()})}},mT=n.unstable_scheduleCallback,gT=n.unstable_NormalPriority,Yt={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wf(){return{controller:new fT,data:new Map,refCount:0}}function il(i){i.refCount--,i.refCount===0&&mT(gT,function(){i.controller.abort()})}var al=null,_f=0,Ma=0,Ra=null;function pT(i,o){if(al===null){var c=al=[];_f=0,Ma=Cm(),Ra={status:"pending",value:void 0,then:function(m){c.push(m)}}}return _f++,o.then(Yx,Yx),o}function Yx(){if(--_f===0&&al!==null){Ra!==null&&(Ra.status="fulfilled");var i=al;al=null,Ma=0,Ra=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function xT(i,o){var c=[],m={status:"pending",value:null,reason:null,then:function(p){c.push(p)}};return i.then(function(){m.status="fulfilled",m.value=o;for(var p=0;p<c.length;p++)(0,c[p])(o)},function(p){for(m.status="rejected",m.reason=p,p=0;p<c.length;p++)(0,c[p])(void 0)}),m}var qx=R.S;R.S=function(i,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&pT(i,o),qx!==null&&qx(i,o)};var Hi=q(null);function Sf(){var i=Hi.current;return i!==null?i:xt.pooledCache}function ou(i,o){o===null?me(Hi,Hi.current):me(Hi,o.pool)}function Wx(){var i=Sf();return i===null?null:{parent:Yt._currentValue,pool:i}}var ol=Error(s(460)),Xx=Error(s(474)),lu=Error(s(542)),Cf={then:function(){}};function Kx(i){return i=i.status,i==="fulfilled"||i==="rejected"}function cu(){}function Qx(i,o,c){switch(c=i[c],c===void 0?i.push(o):c!==o&&(o.then(cu,cu),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Jx(i),i;default:if(typeof o.status=="string")o.then(cu,cu);else{if(i=xt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(m){if(o.status==="pending"){var p=o;p.status="fulfilled",p.value=m}},function(m){if(o.status==="pending"){var p=o;p.status="rejected",p.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Jx(i),i}throw ll=o,ol}}var ll=null;function Zx(){if(ll===null)throw Error(s(459));var i=ll;return ll=null,i}function Jx(i){if(i===ol||i===lu)throw Error(s(483))}var Yr=!1;function jf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tf(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function qr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Wr(i,o,c){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(ct&2)!==0){var p=m.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),m.pending=o,o=tu(i),Ux(i,null,c),o}return eu(i,m,o,c),tu(i)}function cl(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var m=o.lanes;m&=i.pendingLanes,c|=m,o.lanes=c,X(i,c)}}function Ef(i,o){var c=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var p=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var C={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?p=y=C:y=y.next=C,c=c.next}while(c!==null);y===null?p=y=o:y=y.next=o}else p=y=o;c={baseState:m.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:m.shared,callbacks:m.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}var kf=!1;function ul(){if(kf){var i=Ra;if(i!==null)throw i}}function dl(i,o,c,m){kf=!1;var p=i.updateQueue;Yr=!1;var y=p.firstBaseUpdate,C=p.lastBaseUpdate,k=p.shared.pending;if(k!==null){p.shared.pending=null;var P=k,K=P.next;P.next=null,C===null?y=K:C.next=K,C=P;var ae=i.alternate;ae!==null&&(ae=ae.updateQueue,k=ae.lastBaseUpdate,k!==C&&(k===null?ae.firstBaseUpdate=K:k.next=K,ae.lastBaseUpdate=P))}if(y!==null){var he=p.baseState;C=0,ae=K=P=null,k=y;do{var Z=k.lane&-536870913,J=Z!==k.lane;if(J?(tt&Z)===Z:(m&Z)===Z){Z!==0&&Z===Ma&&(kf=!0),ae!==null&&(ae=ae.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Ie=i,Ue=k;Z=o;var gt=c;switch(Ue.tag){case 1:if(Ie=Ue.payload,typeof Ie=="function"){he=Ie.call(gt,he,Z);break e}he=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Ue.payload,Z=typeof Ie=="function"?Ie.call(gt,he,Z):Ie,Z==null)break e;he=g({},he,Z);break e;case 2:Yr=!0}}Z=k.callback,Z!==null&&(i.flags|=64,J&&(i.flags|=8192),J=p.callbacks,J===null?p.callbacks=[Z]:J.push(Z))}else J={lane:Z,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ae===null?(K=ae=J,P=he):ae=ae.next=J,C|=Z;if(k=k.next,k===null){if(k=p.shared.pending,k===null)break;J=k,k=J.next,J.next=null,p.lastBaseUpdate=J,p.shared.pending=null}}while(!0);ae===null&&(P=he),p.baseState=P,p.firstBaseUpdate=K,p.lastBaseUpdate=ae,y===null&&(p.shared.lanes=0),si|=C,i.lanes=C,i.memoizedState=he}}function ev(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function tv(i,o){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)ev(c[i],o)}var Pa=q(null),uu=q(0);function sv(i,o){i=pr,me(uu,i),me(Pa,o),pr=i|o.baseLanes}function Af(){me(uu,pr),me(Pa,Pa.current)}function Nf(){pr=uu.current,fe(Pa),fe(uu)}var Xr=0,We=null,ft=null,Vt=null,du=!1,La=!1,$i=!1,hu=0,hl=0,Ba=null,vT=0;function Mt(){throw Error(s(321))}function Df(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!Ys(i[c],o[c]))return!1;return!0}function Of(i,o,c,m,p,y){return Xr=y,We=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,R.H=i===null||i.memoizedState===null?Uv:zv,$i=!1,y=c(m,p),$i=!1,La&&(y=rv(o,c,m,p)),nv(i),y}function nv(i){R.H=vu;var o=ft!==null&&ft.next!==null;if(Xr=0,Vt=ft=We=null,du=!1,hl=0,Ba=null,o)throw Error(s(300));i===null||es||(i=i.dependencies,i!==null&&iu(i)&&(es=!0))}function rv(i,o,c,m){We=i;var p=0;do{if(La&&(Ba=null),hl=0,La=!1,25<=p)throw Error(s(301));if(p+=1,Vt=ft=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}R.H=jT,y=o(c,m)}while(La);return y}function yT(){var i=R.H,o=i.useState()[0];return o=typeof o.then=="function"?fl(o):o,i=i.useState()[0],(ft!==null?ft.memoizedState:null)!==i&&(We.flags|=1024),o}function Mf(){var i=hu!==0;return hu=0,i}function Rf(i,o,c){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~c}function Pf(i){if(du){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}du=!1}Xr=0,Vt=ft=We=null,La=!1,hl=hu=0,Ba=null}function Ms(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?We.memoizedState=Vt=i:Vt=Vt.next=i,Vt}function It(){if(ft===null){var i=We.alternate;i=i!==null?i.memoizedState:null}else i=ft.next;var o=Vt===null?We.memoizedState:Vt.next;if(o!==null)Vt=o,ft=i;else{if(i===null)throw We.alternate===null?Error(s(467)):Error(s(310));ft=i,i={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Vt===null?We.memoizedState=Vt=i:Vt=Vt.next=i}return Vt}function Lf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fl(i){var o=hl;return hl+=1,Ba===null&&(Ba=[]),i=Qx(Ba,i,o),o=We,(Vt===null?o.memoizedState:Vt.next)===null&&(o=o.alternate,R.H=o===null||o.memoizedState===null?Uv:zv),i}function fu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return fl(i);if(i.$$typeof===E)return ys(i)}throw Error(s(438,String(i)))}function Bf(i){var o=null,c=We.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var m=We.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(p){return p.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=Lf(),We.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(i),m=0;m<i;m++)c[m]=N;return o.index++,c}function ur(i,o){return typeof o=="function"?o(i):o}function mu(i){var o=It();return Ff(o,ft,i)}function Ff(i,o,c){var m=i.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=c;var p=i.baseQueue,y=m.pending;if(y!==null){if(p!==null){var C=p.next;p.next=y.next,y.next=C}o.baseQueue=p=y,m.pending=null}if(y=i.baseState,p===null)i.memoizedState=y;else{o=p.next;var k=C=null,P=null,K=o,ae=!1;do{var he=K.lane&-536870913;if(he!==K.lane?(tt&he)===he:(Xr&he)===he){var Z=K.revertLane;if(Z===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),he===Ma&&(ae=!0);else if((Xr&Z)===Z){K=K.next,Z===Ma&&(ae=!0);continue}else he={lane:0,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},P===null?(k=P=he,C=y):P=P.next=he,We.lanes|=Z,si|=Z;he=K.action,$i&&c(y,he),y=K.hasEagerState?K.eagerState:c(y,he)}else Z={lane:he,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},P===null?(k=P=Z,C=y):P=P.next=Z,We.lanes|=he,si|=he;K=K.next}while(K!==null&&K!==o);if(P===null?C=y:P.next=k,!Ys(y,i.memoizedState)&&(es=!0,ae&&(c=Ra,c!==null)))throw c;i.memoizedState=y,i.baseState=C,i.baseQueue=P,m.lastRenderedState=y}return p===null&&(m.lanes=0),[i.memoizedState,m.dispatch]}function Uf(i){var o=It(),c=o.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=i;var m=c.dispatch,p=c.pending,y=o.memoizedState;if(p!==null){c.pending=null;var C=p=p.next;do y=i(y,C.action),C=C.next;while(C!==p);Ys(y,o.memoizedState)||(es=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),c.lastRenderedState=y}return[y,m]}function iv(i,o,c){var m=We,p=It(),y=at;if(y){if(c===void 0)throw Error(s(407));c=c()}else c=o();var C=!Ys((ft||p).memoizedState,c);C&&(p.memoizedState=c,es=!0),p=p.queue;var k=lv.bind(null,m,p,i);if(ml(2048,8,k,[i]),p.getSnapshot!==o||C||Vt!==null&&Vt.memoizedState.tag&1){if(m.flags|=2048,Fa(9,gu(),ov.bind(null,m,p,c,o),null),xt===null)throw Error(s(349));y||(Xr&124)!==0||av(m,o,c)}return c}function av(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=We.updateQueue,o===null?(o=Lf(),We.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function ov(i,o,c,m){o.value=c,o.getSnapshot=m,cv(o)&&uv(i)}function lv(i,o,c){return c(function(){cv(o)&&uv(i)})}function cv(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!Ys(i,c)}catch{return!0}}function uv(i){var o=Aa(i,2);o!==null&&Zs(o,i,2)}function zf(i){var o=Ms();if(typeof i=="function"){var c=i;if(i=c(),$i){ce(!0);try{c()}finally{ce(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:i},o}function dv(i,o,c,m){return i.baseState=c,Ff(i,ft,typeof m=="function"?m:ur)}function bT(i,o,c,m,p){if(xu(i))throw Error(s(485));if(i=o.action,i!==null){var y={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){y.listeners.push(C)}};R.T!==null?c(!0):y.isTransition=!1,m(y),c=o.pending,c===null?(y.next=o.pending=y,hv(o,y)):(y.next=c.next,o.pending=c.next=y)}}function hv(i,o){var c=o.action,m=o.payload,p=i.state;if(o.isTransition){var y=R.T,C={};R.T=C;try{var k=c(p,m),P=R.S;P!==null&&P(C,k),fv(i,o,k)}catch(K){Vf(i,o,K)}finally{R.T=y}}else try{y=c(p,m),fv(i,o,y)}catch(K){Vf(i,o,K)}}function fv(i,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(m){mv(i,o,m)},function(m){return Vf(i,o,m)}):mv(i,o,c)}function mv(i,o,c){o.status="fulfilled",o.value=c,gv(o),i.state=c,o=i.pending,o!==null&&(c=o.next,c===o?i.pending=null:(c=c.next,o.next=c,hv(i,c)))}function Vf(i,o,c){var m=i.pending;if(i.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=c,gv(o),o=o.next;while(o!==m)}i.action=null}function gv(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function pv(i,o){return o}function xv(i,o){if(at){var c=xt.formState;if(c!==null){e:{var m=We;if(at){if(At){t:{for(var p=At,y=In;p.nodeType!==8;){if(!y){p=null;break t}if(p=jn(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){At=jn(p.nextSibling),m=p.data==="F!";break e}}zi(m)}m=!1}m&&(o=c[0])}}return c=Ms(),c.memoizedState=c.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pv,lastRenderedState:o},c.queue=m,c=Lv.bind(null,We,m),m.dispatch=c,m=zf(!1),y=Yf.bind(null,We,!1,m.queue),m=Ms(),p={state:o,dispatch:null,action:i,pending:null},m.queue=p,c=bT.bind(null,We,p,y,c),p.dispatch=c,m.memoizedState=i,[o,c,!1]}function vv(i){var o=It();return yv(o,ft,i)}function yv(i,o,c){if(o=Ff(i,o,pv)[0],i=mu(ur)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=fl(o)}catch(C){throw C===ol?lu:C}else m=o;o=It();var p=o.queue,y=p.dispatch;return c!==o.memoizedState&&(We.flags|=2048,Fa(9,gu(),wT.bind(null,p,c),null)),[m,y,i]}function wT(i,o){i.action=o}function bv(i){var o=It(),c=ft;if(c!==null)return yv(o,c,i);It(),o=o.memoizedState,c=It();var m=c.queue.dispatch;return c.memoizedState=i,[o,m,!1]}function Fa(i,o,c,m){return i={tag:i,create:c,deps:m,inst:o,next:null},o=We.updateQueue,o===null&&(o=Lf(),We.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=i.next=i:(m=c.next,c.next=i,i.next=m,o.lastEffect=i),i}function gu(){return{destroy:void 0,resource:void 0}}function wv(){return It().memoizedState}function pu(i,o,c,m){var p=Ms();m=m===void 0?null:m,We.flags|=i,p.memoizedState=Fa(1|o,gu(),c,m)}function ml(i,o,c,m){var p=It();m=m===void 0?null:m;var y=p.memoizedState.inst;ft!==null&&m!==null&&Df(m,ft.memoizedState.deps)?p.memoizedState=Fa(o,y,c,m):(We.flags|=i,p.memoizedState=Fa(1|o,y,c,m))}function _v(i,o){pu(8390656,8,i,o)}function Sv(i,o){ml(2048,8,i,o)}function Cv(i,o){return ml(4,2,i,o)}function jv(i,o){return ml(4,4,i,o)}function Tv(i,o){if(typeof o=="function"){i=i();var c=o(i);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Ev(i,o,c){c=c!=null?c.concat([i]):null,ml(4,4,Tv.bind(null,o,i),c)}function If(){}function kv(i,o){var c=It();o=o===void 0?null:o;var m=c.memoizedState;return o!==null&&Df(o,m[1])?m[0]:(c.memoizedState=[i,o],i)}function Av(i,o){var c=It();o=o===void 0?null:o;var m=c.memoizedState;if(o!==null&&Df(o,m[1]))return m[0];if(m=i(),$i){ce(!0);try{i()}finally{ce(!1)}}return c.memoizedState=[m,o],m}function Hf(i,o,c){return c===void 0||(Xr&1073741824)!==0?i.memoizedState=o:(i.memoizedState=c,i=Oy(),We.lanes|=i,si|=i,c)}function Nv(i,o,c,m){return Ys(c,o)?c:Pa.current!==null?(i=Hf(i,c,m),Ys(i,o)||(es=!0),i):(Xr&42)===0?(es=!0,i.memoizedState=c):(i=Oy(),We.lanes|=i,si|=i,o)}function Dv(i,o,c,m,p){var y=$.p;$.p=y!==0&&8>y?y:8;var C=R.T,k={};R.T=k,Yf(i,!1,o,c);try{var P=p(),K=R.S;if(K!==null&&K(k,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var ae=xT(P,m);gl(i,o,ae,Qs(i))}else gl(i,o,m,Qs(i))}catch(he){gl(i,o,{then:function(){},status:"rejected",reason:he},Qs())}finally{$.p=y,R.T=C}}function _T(){}function $f(i,o,c,m){if(i.tag!==5)throw Error(s(476));var p=Ov(i).queue;Dv(i,p,o,Q,c===null?_T:function(){return Mv(i),c(m)})}function Ov(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:Q},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:c},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function Mv(i){var o=Ov(i).next.queue;gl(i,o,{},Qs())}function Gf(){return ys(Ml)}function Rv(){return It().memoizedState}function Pv(){return It().memoizedState}function ST(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var c=Qs();i=qr(c);var m=Wr(o,i,c);m!==null&&(Zs(m,o,c),cl(m,o,c)),o={cache:wf()},i.payload=o;return}o=o.return}}function CT(i,o,c){var m=Qs();c={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},xu(i)?Bv(o,c):(c=df(i,o,c,m),c!==null&&(Zs(c,i,m),Fv(c,o,m)))}function Lv(i,o,c){var m=Qs();gl(i,o,c,m)}function gl(i,o,c,m){var p={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(xu(i))Bv(o,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var C=o.lastRenderedState,k=y(C,c);if(p.hasEagerState=!0,p.eagerState=k,Ys(k,C))return eu(i,o,p,0),xt===null&&Jc(),!1}catch{}finally{}if(c=df(i,o,p,m),c!==null)return Zs(c,i,m),Fv(c,o,m),!0}return!1}function Yf(i,o,c,m){if(m={lane:2,revertLane:Cm(),action:m,hasEagerState:!1,eagerState:null,next:null},xu(i)){if(o)throw Error(s(479))}else o=df(i,c,m,2),o!==null&&Zs(o,i,2)}function xu(i){var o=i.alternate;return i===We||o!==null&&o===We}function Bv(i,o){La=du=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function Fv(i,o,c){if((c&4194048)!==0){var m=o.lanes;m&=i.pendingLanes,c|=m,o.lanes=c,X(i,c)}}var vu={readContext:ys,use:fu,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt},Uv={readContext:ys,use:fu,useCallback:function(i,o){return Ms().memoizedState=[i,o===void 0?null:o],i},useContext:ys,useEffect:_v,useImperativeHandle:function(i,o,c){c=c!=null?c.concat([i]):null,pu(4194308,4,Tv.bind(null,o,i),c)},useLayoutEffect:function(i,o){return pu(4194308,4,i,o)},useInsertionEffect:function(i,o){pu(4,2,i,o)},useMemo:function(i,o){var c=Ms();o=o===void 0?null:o;var m=i();if($i){ce(!0);try{i()}finally{ce(!1)}}return c.memoizedState=[m,o],m},useReducer:function(i,o,c){var m=Ms();if(c!==void 0){var p=c(o);if($i){ce(!0);try{c(o)}finally{ce(!1)}}}else p=o;return m.memoizedState=m.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},m.queue=i,i=i.dispatch=CT.bind(null,We,i),[m.memoizedState,i]},useRef:function(i){var o=Ms();return i={current:i},o.memoizedState=i},useState:function(i){i=zf(i);var o=i.queue,c=Lv.bind(null,We,o);return o.dispatch=c,[i.memoizedState,c]},useDebugValue:If,useDeferredValue:function(i,o){var c=Ms();return Hf(c,i,o)},useTransition:function(){var i=zf(!1);return i=Dv.bind(null,We,i.queue,!0,!1),Ms().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,c){var m=We,p=Ms();if(at){if(c===void 0)throw Error(s(407));c=c()}else{if(c=o(),xt===null)throw Error(s(349));(tt&124)!==0||av(m,o,c)}p.memoizedState=c;var y={value:c,getSnapshot:o};return p.queue=y,_v(lv.bind(null,m,y,i),[i]),m.flags|=2048,Fa(9,gu(),ov.bind(null,m,y,c,o),null),c},useId:function(){var i=Ms(),o=xt.identifierPrefix;if(at){var c=or,m=ar;c=(m&~(1<<32-le(m)-1)).toString(32)+c,o="«"+o+"R"+c,c=hu++,0<c&&(o+="H"+c.toString(32)),o+="»"}else c=vT++,o="«"+o+"r"+c.toString(32)+"»";return i.memoizedState=o},useHostTransitionStatus:Gf,useFormState:xv,useActionState:xv,useOptimistic:function(i){var o=Ms();o.memoizedState=o.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=Yf.bind(null,We,!0,c),c.dispatch=o,[i,o]},useMemoCache:Bf,useCacheRefresh:function(){return Ms().memoizedState=ST.bind(null,We)}},zv={readContext:ys,use:fu,useCallback:kv,useContext:ys,useEffect:Sv,useImperativeHandle:Ev,useInsertionEffect:Cv,useLayoutEffect:jv,useMemo:Av,useReducer:mu,useRef:wv,useState:function(){return mu(ur)},useDebugValue:If,useDeferredValue:function(i,o){var c=It();return Nv(c,ft.memoizedState,i,o)},useTransition:function(){var i=mu(ur)[0],o=It().memoizedState;return[typeof i=="boolean"?i:fl(i),o]},useSyncExternalStore:iv,useId:Rv,useHostTransitionStatus:Gf,useFormState:vv,useActionState:vv,useOptimistic:function(i,o){var c=It();return dv(c,ft,i,o)},useMemoCache:Bf,useCacheRefresh:Pv},jT={readContext:ys,use:fu,useCallback:kv,useContext:ys,useEffect:Sv,useImperativeHandle:Ev,useInsertionEffect:Cv,useLayoutEffect:jv,useMemo:Av,useReducer:Uf,useRef:wv,useState:function(){return Uf(ur)},useDebugValue:If,useDeferredValue:function(i,o){var c=It();return ft===null?Hf(c,i,o):Nv(c,ft.memoizedState,i,o)},useTransition:function(){var i=Uf(ur)[0],o=It().memoizedState;return[typeof i=="boolean"?i:fl(i),o]},useSyncExternalStore:iv,useId:Rv,useHostTransitionStatus:Gf,useFormState:bv,useActionState:bv,useOptimistic:function(i,o){var c=It();return ft!==null?dv(c,ft,i,o):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Bf,useCacheRefresh:Pv},Ua=null,pl=0;function yu(i){var o=pl;return pl+=1,Ua===null&&(Ua=[]),Qx(Ua,i,o)}function xl(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function bu(i,o){throw o.$$typeof===x?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Vv(i){var o=i._init;return o(i._payload)}function Iv(i){function o(G,U){if(i){var W=G.deletions;W===null?(G.deletions=[U],G.flags|=16):W.push(U)}}function c(G,U){if(!i)return null;for(;U!==null;)o(G,U),U=U.sibling;return null}function m(G){for(var U=new Map;G!==null;)G.key!==null?U.set(G.key,G):U.set(G.index,G),G=G.sibling;return U}function p(G,U){return G=ir(G,U),G.index=0,G.sibling=null,G}function y(G,U,W){return G.index=W,i?(W=G.alternate,W!==null?(W=W.index,W<U?(G.flags|=67108866,U):W):(G.flags|=67108866,U)):(G.flags|=1048576,U)}function C(G){return i&&G.alternate===null&&(G.flags|=67108866),G}function k(G,U,W,ue){return U===null||U.tag!==6?(U=ff(W,G.mode,ue),U.return=G,U):(U=p(U,W),U.return=G,U)}function P(G,U,W,ue){var De=W.type;return De===w?ae(G,U,W.props.children,ue,W.key):U!==null&&(U.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===L&&Vv(De)===U.type)?(U=p(U,W.props),xl(U,W),U.return=G,U):(U=su(W.type,W.key,W.props,null,G.mode,ue),xl(U,W),U.return=G,U)}function K(G,U,W,ue){return U===null||U.tag!==4||U.stateNode.containerInfo!==W.containerInfo||U.stateNode.implementation!==W.implementation?(U=mf(W,G.mode,ue),U.return=G,U):(U=p(U,W.children||[]),U.return=G,U)}function ae(G,U,W,ue,De){return U===null||U.tag!==7?(U=Li(W,G.mode,ue,De),U.return=G,U):(U=p(U,W),U.return=G,U)}function he(G,U,W){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=ff(""+U,G.mode,W),U.return=G,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case v:return W=su(U.type,U.key,U.props,null,G.mode,W),xl(W,U),W.return=G,W;case b:return U=mf(U,G.mode,W),U.return=G,U;case L:var ue=U._init;return U=ue(U._payload),he(G,U,W)}if(ne(U)||Y(U))return U=Li(U,G.mode,W,null),U.return=G,U;if(typeof U.then=="function")return he(G,yu(U),W);if(U.$$typeof===E)return he(G,au(G,U),W);bu(G,U)}return null}function Z(G,U,W,ue){var De=U!==null?U.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return De!==null?null:k(G,U,""+W,ue);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case v:return W.key===De?P(G,U,W,ue):null;case b:return W.key===De?K(G,U,W,ue):null;case L:return De=W._init,W=De(W._payload),Z(G,U,W,ue)}if(ne(W)||Y(W))return De!==null?null:ae(G,U,W,ue,null);if(typeof W.then=="function")return Z(G,U,yu(W),ue);if(W.$$typeof===E)return Z(G,U,au(G,W),ue);bu(G,W)}return null}function J(G,U,W,ue,De){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return G=G.get(W)||null,k(U,G,""+ue,De);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case v:return G=G.get(ue.key===null?W:ue.key)||null,P(U,G,ue,De);case b:return G=G.get(ue.key===null?W:ue.key)||null,K(U,G,ue,De);case L:var Ke=ue._init;return ue=Ke(ue._payload),J(G,U,W,ue,De)}if(ne(ue)||Y(ue))return G=G.get(W)||null,ae(U,G,ue,De,null);if(typeof ue.then=="function")return J(G,U,W,yu(ue),De);if(ue.$$typeof===E)return J(G,U,W,au(U,ue),De);bu(U,ue)}return null}function Ie(G,U,W,ue){for(var De=null,Ke=null,Pe=U,ze=U=0,ss=null;Pe!==null&&ze<W.length;ze++){Pe.index>ze?(ss=Pe,Pe=null):ss=Pe.sibling;var rt=Z(G,Pe,W[ze],ue);if(rt===null){Pe===null&&(Pe=ss);break}i&&Pe&&rt.alternate===null&&o(G,Pe),U=y(rt,U,ze),Ke===null?De=rt:Ke.sibling=rt,Ke=rt,Pe=ss}if(ze===W.length)return c(G,Pe),at&&Fi(G,ze),De;if(Pe===null){for(;ze<W.length;ze++)Pe=he(G,W[ze],ue),Pe!==null&&(U=y(Pe,U,ze),Ke===null?De=Pe:Ke.sibling=Pe,Ke=Pe);return at&&Fi(G,ze),De}for(Pe=m(Pe);ze<W.length;ze++)ss=J(Pe,G,ze,W[ze],ue),ss!==null&&(i&&ss.alternate!==null&&Pe.delete(ss.key===null?ze:ss.key),U=y(ss,U,ze),Ke===null?De=ss:Ke.sibling=ss,Ke=ss);return i&&Pe.forEach(function(di){return o(G,di)}),at&&Fi(G,ze),De}function Ue(G,U,W,ue){if(W==null)throw Error(s(151));for(var De=null,Ke=null,Pe=U,ze=U=0,ss=null,rt=W.next();Pe!==null&&!rt.done;ze++,rt=W.next()){Pe.index>ze?(ss=Pe,Pe=null):ss=Pe.sibling;var di=Z(G,Pe,rt.value,ue);if(di===null){Pe===null&&(Pe=ss);break}i&&Pe&&di.alternate===null&&o(G,Pe),U=y(di,U,ze),Ke===null?De=di:Ke.sibling=di,Ke=di,Pe=ss}if(rt.done)return c(G,Pe),at&&Fi(G,ze),De;if(Pe===null){for(;!rt.done;ze++,rt=W.next())rt=he(G,rt.value,ue),rt!==null&&(U=y(rt,U,ze),Ke===null?De=rt:Ke.sibling=rt,Ke=rt);return at&&Fi(G,ze),De}for(Pe=m(Pe);!rt.done;ze++,rt=W.next())rt=J(Pe,G,ze,rt.value,ue),rt!==null&&(i&&rt.alternate!==null&&Pe.delete(rt.key===null?ze:rt.key),U=y(rt,U,ze),Ke===null?De=rt:Ke.sibling=rt,Ke=rt);return i&&Pe.forEach(function(TE){return o(G,TE)}),at&&Fi(G,ze),De}function gt(G,U,W,ue){if(typeof W=="object"&&W!==null&&W.type===w&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case v:e:{for(var De=W.key;U!==null;){if(U.key===De){if(De=W.type,De===w){if(U.tag===7){c(G,U.sibling),ue=p(U,W.props.children),ue.return=G,G=ue;break e}}else if(U.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===L&&Vv(De)===U.type){c(G,U.sibling),ue=p(U,W.props),xl(ue,W),ue.return=G,G=ue;break e}c(G,U);break}else o(G,U);U=U.sibling}W.type===w?(ue=Li(W.props.children,G.mode,ue,W.key),ue.return=G,G=ue):(ue=su(W.type,W.key,W.props,null,G.mode,ue),xl(ue,W),ue.return=G,G=ue)}return C(G);case b:e:{for(De=W.key;U!==null;){if(U.key===De)if(U.tag===4&&U.stateNode.containerInfo===W.containerInfo&&U.stateNode.implementation===W.implementation){c(G,U.sibling),ue=p(U,W.children||[]),ue.return=G,G=ue;break e}else{c(G,U);break}else o(G,U);U=U.sibling}ue=mf(W,G.mode,ue),ue.return=G,G=ue}return C(G);case L:return De=W._init,W=De(W._payload),gt(G,U,W,ue)}if(ne(W))return Ie(G,U,W,ue);if(Y(W)){if(De=Y(W),typeof De!="function")throw Error(s(150));return W=De.call(W),Ue(G,U,W,ue)}if(typeof W.then=="function")return gt(G,U,yu(W),ue);if(W.$$typeof===E)return gt(G,U,au(G,W),ue);bu(G,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,U!==null&&U.tag===6?(c(G,U.sibling),ue=p(U,W),ue.return=G,G=ue):(c(G,U),ue=ff(W,G.mode,ue),ue.return=G,G=ue),C(G)):c(G,U)}return function(G,U,W,ue){try{pl=0;var De=gt(G,U,W,ue);return Ua=null,De}catch(Pe){if(Pe===ol||Pe===lu)throw Pe;var Ke=qs(29,Pe,null,G.mode);return Ke.lanes=ue,Ke.return=G,Ke}finally{}}}var za=Iv(!0),Hv=Iv(!1),un=q(null),Hn=null;function Kr(i){var o=i.alternate;me(qt,qt.current&1),me(un,i),Hn===null&&(o===null||Pa.current!==null||o.memoizedState!==null)&&(Hn=i)}function $v(i){if(i.tag===22){if(me(qt,qt.current),me(un,i),Hn===null){var o=i.alternate;o!==null&&o.memoizedState!==null&&(Hn=i)}}else Qr()}function Qr(){me(qt,qt.current),me(un,un.current)}function dr(i){fe(un),Hn===i&&(Hn=null),fe(qt)}var qt=q(0);function wu(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Lm(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function qf(i,o,c,m){o=i.memoizedState,c=c(m,o),c=c==null?o:g({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Wf={enqueueSetState:function(i,o,c){i=i._reactInternals;var m=Qs(),p=qr(m);p.payload=o,c!=null&&(p.callback=c),o=Wr(i,p,m),o!==null&&(Zs(o,i,m),cl(o,i,m))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var m=Qs(),p=qr(m);p.tag=1,p.payload=o,c!=null&&(p.callback=c),o=Wr(i,p,m),o!==null&&(Zs(o,i,m),cl(o,i,m))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=Qs(),m=qr(c);m.tag=2,o!=null&&(m.callback=o),o=Wr(i,m,c),o!==null&&(Zs(o,i,c),cl(o,i,c))}};function Gv(i,o,c,m,p,y,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,y,C):o.prototype&&o.prototype.isPureReactComponent?!Jo(c,m)||!Jo(p,y):!0}function Yv(i,o,c,m){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,m),o.state!==i&&Wf.enqueueReplaceState(o,o.state,null)}function Gi(i,o){var c=o;if("ref"in o){c={};for(var m in o)m!=="ref"&&(c[m]=o[m])}if(i=i.defaultProps){c===o&&(c=g({},c));for(var p in i)c[p]===void 0&&(c[p]=i[p])}return c}var _u=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function qv(i){_u(i)}function Wv(i){console.error(i)}function Xv(i){_u(i)}function Su(i,o){try{var c=i.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function Kv(i,o,c){try{var m=i.onCaughtError;m(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Xf(i,o,c){return c=qr(c),c.tag=3,c.payload={element:null},c.callback=function(){Su(i,o)},c}function Qv(i){return i=qr(i),i.tag=3,i}function Zv(i,o,c,m){var p=c.type.getDerivedStateFromError;if(typeof p=="function"){var y=m.value;i.payload=function(){return p(y)},i.callback=function(){Kv(o,c,m)}}var C=c.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){Kv(o,c,m),typeof p!="function"&&(ni===null?ni=new Set([this]):ni.add(this));var k=m.stack;this.componentDidCatch(m.value,{componentStack:k!==null?k:""})})}function TT(i,o,c,m,p){if(c.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=c.alternate,o!==null&&rl(o,c,p,!0),c=un.current,c!==null){switch(c.tag){case 13:return Hn===null?ym():c.alternate===null&&Nt===0&&(Nt=3),c.flags&=-257,c.flags|=65536,c.lanes=p,m===Cf?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([m]):o.add(m),wm(i,m,p)),!1;case 22:return c.flags|=65536,m===Cf?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([m]):c.add(m)),wm(i,m,p)),!1}throw Error(s(435,c.tag))}return wm(i,m,p),ym(),!1}if(at)return o=un.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=p,m!==xf&&(i=Error(s(422),{cause:m}),nl(an(i,c)))):(m!==xf&&(o=Error(s(423),{cause:m}),nl(an(o,c))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,m=an(m,c),p=Xf(i.stateNode,m,p),Ef(i,p),Nt!==4&&(Nt=2)),!1;var y=Error(s(520),{cause:m});if(y=an(y,c),Cl===null?Cl=[y]:Cl.push(y),Nt!==4&&(Nt=2),o===null)return!0;m=an(m,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,i=p&-p,c.lanes|=i,i=Xf(c.stateNode,m,i),Ef(c,i),!1;case 1:if(o=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ni===null||!ni.has(y))))return c.flags|=65536,p&=-p,c.lanes|=p,p=Qv(p),Zv(p,i,c,m),Ef(c,p),!1}c=c.return}while(c!==null);return!1}var Jv=Error(s(461)),es=!1;function hs(i,o,c,m){o.child=i===null?Hv(o,null,c,m):za(o,i.child,c,m)}function ey(i,o,c,m,p){c=c.render;var y=o.ref;if("ref"in m){var C={};for(var k in m)k!=="ref"&&(C[k]=m[k])}else C=m;return Ii(o),m=Of(i,o,c,C,y,p),k=Mf(),i!==null&&!es?(Rf(i,o,p),hr(i,o,p)):(at&&k&&gf(o),o.flags|=1,hs(i,o,m,p),o.child)}function ty(i,o,c,m,p){if(i===null){var y=c.type;return typeof y=="function"&&!hf(y)&&y.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=y,sy(i,o,y,m,p)):(i=su(c.type,null,m,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,!nm(i,p)){var C=y.memoizedProps;if(c=c.compare,c=c!==null?c:Jo,c(C,m)&&i.ref===o.ref)return hr(i,o,p)}return o.flags|=1,i=ir(y,m),i.ref=o.ref,i.return=o,o.child=i}function sy(i,o,c,m,p){if(i!==null){var y=i.memoizedProps;if(Jo(y,m)&&i.ref===o.ref)if(es=!1,o.pendingProps=m=y,nm(i,p))(i.flags&131072)!==0&&(es=!0);else return o.lanes=i.lanes,hr(i,o,p)}return Kf(i,o,c,m,p)}function ny(i,o,c){var m=o.pendingProps,p=m.children,y=i!==null?i.memoizedState:null;if(m.mode==="hidden"){if((o.flags&128)!==0){if(m=y!==null?y.baseLanes|c:c,i!==null){for(p=o.child=i.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;o.childLanes=y&~m}else o.childLanes=0,o.child=null;return ry(i,o,m,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&ou(o,y!==null?y.cachePool:null),y!==null?sv(o,y):Af(),$v(o);else return o.lanes=o.childLanes=536870912,ry(i,o,y!==null?y.baseLanes|c:c,c)}else y!==null?(ou(o,y.cachePool),sv(o,y),Qr(),o.memoizedState=null):(i!==null&&ou(o,null),Af(),Qr());return hs(i,o,p,c),o.child}function ry(i,o,c,m){var p=Sf();return p=p===null?null:{parent:Yt._currentValue,pool:p},o.memoizedState={baseLanes:c,cachePool:p},i!==null&&ou(o,null),Af(),$v(o),i!==null&&rl(i,o,m,!0),null}function Cu(i,o){var c=o.ref;if(c===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(i===null||i.ref!==c)&&(o.flags|=4194816)}}function Kf(i,o,c,m,p){return Ii(o),c=Of(i,o,c,m,void 0,p),m=Mf(),i!==null&&!es?(Rf(i,o,p),hr(i,o,p)):(at&&m&&gf(o),o.flags|=1,hs(i,o,c,p),o.child)}function iy(i,o,c,m,p,y){return Ii(o),o.updateQueue=null,c=rv(o,m,c,p),nv(i),m=Mf(),i!==null&&!es?(Rf(i,o,y),hr(i,o,y)):(at&&m&&gf(o),o.flags|=1,hs(i,o,c,y),o.child)}function ay(i,o,c,m,p){if(Ii(o),o.stateNode===null){var y=Na,C=c.contextType;typeof C=="object"&&C!==null&&(y=ys(C)),y=new c(m,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Wf,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=m,y.state=o.memoizedState,y.refs={},jf(o),C=c.contextType,y.context=typeof C=="object"&&C!==null?ys(C):Na,y.state=o.memoizedState,C=c.getDerivedStateFromProps,typeof C=="function"&&(qf(o,c,C,m),y.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(C=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),C!==y.state&&Wf.enqueueReplaceState(y,y.state,null),dl(o,m,y,p),ul(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(i===null){y=o.stateNode;var k=o.memoizedProps,P=Gi(c,k);y.props=P;var K=y.context,ae=c.contextType;C=Na,typeof ae=="object"&&ae!==null&&(C=ys(ae));var he=c.getDerivedStateFromProps;ae=typeof he=="function"||typeof y.getSnapshotBeforeUpdate=="function",k=o.pendingProps!==k,ae||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(k||K!==C)&&Yv(o,y,m,C),Yr=!1;var Z=o.memoizedState;y.state=Z,dl(o,m,y,p),ul(),K=o.memoizedState,k||Z!==K||Yr?(typeof he=="function"&&(qf(o,c,he,m),K=o.memoizedState),(P=Yr||Gv(o,c,P,m,Z,K,C))?(ae||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=K),y.props=m,y.state=K,y.context=C,m=P):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{y=o.stateNode,Tf(i,o),C=o.memoizedProps,ae=Gi(c,C),y.props=ae,he=o.pendingProps,Z=y.context,K=c.contextType,P=Na,typeof K=="object"&&K!==null&&(P=ys(K)),k=c.getDerivedStateFromProps,(K=typeof k=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C!==he||Z!==P)&&Yv(o,y,m,P),Yr=!1,Z=o.memoizedState,y.state=Z,dl(o,m,y,p),ul();var J=o.memoizedState;C!==he||Z!==J||Yr||i!==null&&i.dependencies!==null&&iu(i.dependencies)?(typeof k=="function"&&(qf(o,c,k,m),J=o.memoizedState),(ae=Yr||Gv(o,c,ae,m,Z,J,P)||i!==null&&i.dependencies!==null&&iu(i.dependencies))?(K||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(m,J,P),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(m,J,P)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=J),y.props=m,y.state=J,y.context=P,m=ae):(typeof y.componentDidUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=1024),m=!1)}return y=m,Cu(i,o),m=(o.flags&128)!==0,y||m?(y=o.stateNode,c=m&&typeof c.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,i!==null&&m?(o.child=za(o,i.child,null,p),o.child=za(o,null,c,p)):hs(i,o,c,p),o.memoizedState=y.state,i=o.child):i=hr(i,o,p),i}function oy(i,o,c,m){return sl(),o.flags|=256,hs(i,o,c,m),o.child}var Qf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zf(i){return{baseLanes:i,cachePool:Wx()}}function Jf(i,o,c){return i=i!==null?i.childLanes&~c:0,o&&(i|=dn),i}function ly(i,o,c){var m=o.pendingProps,p=!1,y=(o.flags&128)!==0,C;if((C=y)||(C=i!==null&&i.memoizedState===null?!1:(qt.current&2)!==0),C&&(p=!0,o.flags&=-129),C=(o.flags&32)!==0,o.flags&=-33,i===null){if(at){if(p?Kr(o):Qr(),at){var k=At,P;if(P=k){e:{for(P=k,k=In;P.nodeType!==8;){if(!k){k=null;break e}if(P=jn(P.nextSibling),P===null){k=null;break e}}k=P}k!==null?(o.memoizedState={dehydrated:k,treeContext:Bi!==null?{id:ar,overflow:or}:null,retryLane:536870912,hydrationErrors:null},P=qs(18,null,null,0),P.stateNode=k,P.return=o,o.child=P,Ts=o,At=null,P=!0):P=!1}P||zi(o)}if(k=o.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return Lm(k)?o.lanes=32:o.lanes=536870912,null;dr(o)}return k=m.children,m=m.fallback,p?(Qr(),p=o.mode,k=ju({mode:"hidden",children:k},p),m=Li(m,p,c,null),k.return=o,m.return=o,k.sibling=m,o.child=k,p=o.child,p.memoizedState=Zf(c),p.childLanes=Jf(i,C,c),o.memoizedState=Qf,m):(Kr(o),em(o,k))}if(P=i.memoizedState,P!==null&&(k=P.dehydrated,k!==null)){if(y)o.flags&256?(Kr(o),o.flags&=-257,o=tm(i,o,c)):o.memoizedState!==null?(Qr(),o.child=i.child,o.flags|=128,o=null):(Qr(),p=m.fallback,k=o.mode,m=ju({mode:"visible",children:m.children},k),p=Li(p,k,c,null),p.flags|=2,m.return=o,p.return=o,m.sibling=p,o.child=m,za(o,i.child,null,c),m=o.child,m.memoizedState=Zf(c),m.childLanes=Jf(i,C,c),o.memoizedState=Qf,o=p);else if(Kr(o),Lm(k)){if(C=k.nextSibling&&k.nextSibling.dataset,C)var K=C.dgst;C=K,m=Error(s(419)),m.stack="",m.digest=C,nl({value:m,source:null,stack:null}),o=tm(i,o,c)}else if(es||rl(i,o,c,!1),C=(c&i.childLanes)!==0,es||C){if(C=xt,C!==null&&(m=c&-c,m=(m&42)!==0?1:ge(m),m=(m&(C.suspendedLanes|c))!==0?0:m,m!==0&&m!==P.retryLane))throw P.retryLane=m,Aa(i,m),Zs(C,i,m),Jv;k.data==="$?"||ym(),o=tm(i,o,c)}else k.data==="$?"?(o.flags|=192,o.child=i.child,o=null):(i=P.treeContext,At=jn(k.nextSibling),Ts=o,at=!0,Ui=null,In=!1,i!==null&&(ln[cn++]=ar,ln[cn++]=or,ln[cn++]=Bi,ar=i.id,or=i.overflow,Bi=o),o=em(o,m.children),o.flags|=4096);return o}return p?(Qr(),p=m.fallback,k=o.mode,P=i.child,K=P.sibling,m=ir(P,{mode:"hidden",children:m.children}),m.subtreeFlags=P.subtreeFlags&65011712,K!==null?p=ir(K,p):(p=Li(p,k,c,null),p.flags|=2),p.return=o,m.return=o,m.sibling=p,o.child=m,m=p,p=o.child,k=i.child.memoizedState,k===null?k=Zf(c):(P=k.cachePool,P!==null?(K=Yt._currentValue,P=P.parent!==K?{parent:K,pool:K}:P):P=Wx(),k={baseLanes:k.baseLanes|c,cachePool:P}),p.memoizedState=k,p.childLanes=Jf(i,C,c),o.memoizedState=Qf,m):(Kr(o),c=i.child,i=c.sibling,c=ir(c,{mode:"visible",children:m.children}),c.return=o,c.sibling=null,i!==null&&(C=o.deletions,C===null?(o.deletions=[i],o.flags|=16):C.push(i)),o.child=c,o.memoizedState=null,c)}function em(i,o){return o=ju({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function ju(i,o){return i=qs(22,i,null,o),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function tm(i,o,c){return za(o,i.child,null,c),i=em(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function cy(i,o,c){i.lanes|=o;var m=i.alternate;m!==null&&(m.lanes|=o),yf(i.return,o,c)}function sm(i,o,c,m,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=m,y.tail=c,y.tailMode=p)}function uy(i,o,c){var m=o.pendingProps,p=m.revealOrder,y=m.tail;if(hs(i,o,m.children,c),m=qt.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&cy(i,c,o);else if(i.tag===19)cy(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}switch(me(qt,m),p){case"forwards":for(c=o.child,p=null;c!==null;)i=c.alternate,i!==null&&wu(i)===null&&(p=c),c=c.sibling;c=p,c===null?(p=o.child,o.child=null):(p=c.sibling,c.sibling=null),sm(o,!1,p,c,y);break;case"backwards":for(c=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&wu(i)===null){o.child=p;break}i=p.sibling,p.sibling=c,c=p,p=i}sm(o,!0,c,null,y);break;case"together":sm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function hr(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),si|=o.lanes,(c&o.childLanes)===0)if(i!==null){if(rl(i,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,c=ir(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=ir(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function nm(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&iu(i)))}function ET(i,o,c){switch(o.tag){case 3:je(o,o.stateNode.containerInfo),Gr(o,Yt,i.memoizedState.cache),sl();break;case 27:case 5:oe(o);break;case 4:je(o,o.stateNode.containerInfo);break;case 10:Gr(o,o.type,o.memoizedProps.value);break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(Kr(o),o.flags|=128,null):(c&o.child.childLanes)!==0?ly(i,o,c):(Kr(o),i=hr(i,o,c),i!==null?i.sibling:null);Kr(o);break;case 19:var p=(i.flags&128)!==0;if(m=(c&o.childLanes)!==0,m||(rl(i,o,c,!1),m=(c&o.childLanes)!==0),p){if(m)return uy(i,o,c);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),me(qt,qt.current),m)break;return null;case 22:case 23:return o.lanes=0,ny(i,o,c);case 24:Gr(o,Yt,i.memoizedState.cache)}return hr(i,o,c)}function dy(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps)es=!0;else{if(!nm(i,c)&&(o.flags&128)===0)return es=!1,ET(i,o,c);es=(i.flags&131072)!==0}else es=!1,at&&(o.flags&1048576)!==0&&Vx(o,ru,o.index);switch(o.lanes=0,o.tag){case 16:e:{i=o.pendingProps;var m=o.elementType,p=m._init;if(m=p(m._payload),o.type=m,typeof m=="function")hf(m)?(i=Gi(m,i),o.tag=1,o=ay(null,o,m,i,c)):(o.tag=0,o=Kf(null,o,m,i,c));else{if(m!=null){if(p=m.$$typeof,p===M){o.tag=11,o=ey(null,o,m,i,c);break e}else if(p===F){o.tag=14,o=ty(null,o,m,i,c);break e}}throw o=te(m)||m,Error(s(306,o,""))}}return o;case 0:return Kf(i,o,o.type,o.pendingProps,c);case 1:return m=o.type,p=Gi(m,o.pendingProps),ay(i,o,m,p,c);case 3:e:{if(je(o,o.stateNode.containerInfo),i===null)throw Error(s(387));m=o.pendingProps;var y=o.memoizedState;p=y.element,Tf(i,o),dl(o,m,null,c);var C=o.memoizedState;if(m=C.cache,Gr(o,Yt,m),m!==y.cache&&bf(o,[Yt],c,!0),ul(),m=C.element,y.isDehydrated)if(y={element:m,isDehydrated:!1,cache:C.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=oy(i,o,m,c);break e}else if(m!==p){p=an(Error(s(424)),o),nl(p),o=oy(i,o,m,c);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(At=jn(i.firstChild),Ts=o,at=!0,Ui=null,In=!0,c=Hv(o,null,m,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(sl(),m===p){o=hr(i,o,c);break e}hs(i,o,m,c)}o=o.child}return o;case 26:return Cu(i,o),i===null?(c=gb(o.type,null,o.pendingProps,null))?o.memoizedState=c:at||(c=o.type,i=o.pendingProps,m=Uu(xe.current).createElement(c),m[Fe]=o,m[nt]=i,ms(m,c,i),kt(m),o.stateNode=m):o.memoizedState=gb(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return oe(o),i===null&&at&&(m=o.stateNode=hb(o.type,o.pendingProps,xe.current),Ts=o,In=!0,p=At,ai(o.type)?(Bm=p,At=jn(m.firstChild)):At=p),hs(i,o,o.pendingProps.children,c),Cu(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&at&&((p=m=At)&&(m=tE(m,o.type,o.pendingProps,In),m!==null?(o.stateNode=m,Ts=o,At=jn(m.firstChild),In=!1,p=!0):p=!1),p||zi(o)),oe(o),p=o.type,y=o.pendingProps,C=i!==null?i.memoizedProps:null,m=y.children,Mm(p,y)?m=null:C!==null&&Mm(p,C)&&(o.flags|=32),o.memoizedState!==null&&(p=Of(i,o,yT,null,null,c),Ml._currentValue=p),Cu(i,o),hs(i,o,m,c),o.child;case 6:return i===null&&at&&((i=c=At)&&(c=sE(c,o.pendingProps,In),c!==null?(o.stateNode=c,Ts=o,At=null,i=!0):i=!1),i||zi(o)),null;case 13:return ly(i,o,c);case 4:return je(o,o.stateNode.containerInfo),m=o.pendingProps,i===null?o.child=za(o,null,m,c):hs(i,o,m,c),o.child;case 11:return ey(i,o,o.type,o.pendingProps,c);case 7:return hs(i,o,o.pendingProps,c),o.child;case 8:return hs(i,o,o.pendingProps.children,c),o.child;case 12:return hs(i,o,o.pendingProps.children,c),o.child;case 10:return m=o.pendingProps,Gr(o,o.type,m.value),hs(i,o,m.children,c),o.child;case 9:return p=o.type._context,m=o.pendingProps.children,Ii(o),p=ys(p),m=m(p),o.flags|=1,hs(i,o,m,c),o.child;case 14:return ty(i,o,o.type,o.pendingProps,c);case 15:return sy(i,o,o.type,o.pendingProps,c);case 19:return uy(i,o,c);case 31:return m=o.pendingProps,c=o.mode,m={mode:m.mode,children:m.children},i===null?(c=ju(m,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=ir(i.child,m),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return ny(i,o,c);case 24:return Ii(o),m=ys(Yt),i===null?(p=Sf(),p===null&&(p=xt,y=wf(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=c),p=y),o.memoizedState={parent:m,cache:p},jf(o),Gr(o,Yt,p)):((i.lanes&c)!==0&&(Tf(i,o),dl(o,null,null,c),ul()),p=i.memoizedState,y=o.memoizedState,p.parent!==m?(p={parent:m,cache:m},o.memoizedState=p,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=p),Gr(o,Yt,m)):(m=y.cache,Gr(o,Yt,m),m!==p.cache&&bf(o,[Yt],c,!0))),hs(i,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function fr(i){i.flags|=4}function hy(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!bb(o)){if(o=un.current,o!==null&&((tt&4194048)===tt?Hn!==null:(tt&62914560)!==tt&&(tt&536870912)===0||o!==Hn))throw ll=Cf,Xx;i.flags|=8192}}function Tu(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Ic():536870912,i.lanes|=o,$a|=o)}function vl(i,o){if(!at)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function jt(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,m=0;if(o)for(var p=i.child;p!==null;)c|=p.lanes|p.childLanes,m|=p.subtreeFlags&65011712,m|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)c|=p.lanes|p.childLanes,m|=p.subtreeFlags,m|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=m,i.childLanes=c,o}function kT(i,o,c){var m=o.pendingProps;switch(pf(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(o),null;case 1:return jt(o),null;case 3:return c=o.stateNode,m=null,i!==null&&(m=i.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),cr(Yt),Oe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(tl(o)?fr(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,$x())),jt(o),null;case 26:return c=o.memoizedState,i===null?(fr(o),c!==null?(jt(o),hy(o,c)):(jt(o),o.flags&=-16777217)):c?c!==i.memoizedState?(fr(o),jt(o),hy(o,c)):(jt(o),o.flags&=-16777217):(i.memoizedProps!==m&&fr(o),jt(o),o.flags&=-16777217),null;case 27:Ce(o),c=xe.current;var p=o.type;if(i!==null&&o.stateNode!=null)i.memoizedProps!==m&&fr(o);else{if(!m){if(o.stateNode===null)throw Error(s(166));return jt(o),null}i=_e.current,tl(o)?Ix(o):(i=hb(p,m,c),o.stateNode=i,fr(o))}return jt(o),null;case 5:if(Ce(o),c=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==m&&fr(o);else{if(!m){if(o.stateNode===null)throw Error(s(166));return jt(o),null}if(i=_e.current,tl(o))Ix(o);else{switch(p=Uu(xe.current),i){case 1:i=p.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:i=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":i=p.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":i=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":i=p.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof m.is=="string"?p.createElement("select",{is:m.is}):p.createElement("select"),m.multiple?i.multiple=!0:m.size&&(i.size=m.size);break;default:i=typeof m.is=="string"?p.createElement(c,{is:m.is}):p.createElement(c)}}i[Fe]=o,i[nt]=m;e:for(p=o.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===o)break e;for(;p.sibling===null;){if(p.return===null||p.return===o)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}o.stateNode=i;e:switch(ms(i,c,m),c){case"button":case"input":case"select":case"textarea":i=!!m.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&fr(o)}}return jt(o),o.flags&=-16777217,null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==m&&fr(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(s(166));if(i=xe.current,tl(o)){if(i=o.stateNode,c=o.memoizedProps,m=null,p=Ts,p!==null)switch(p.tag){case 27:case 5:m=p.memoizedProps}i[Fe]=o,i=!!(i.nodeValue===c||m!==null&&m.suppressHydrationWarning===!0||ib(i.nodeValue,c)),i||zi(o)}else i=Uu(i).createTextNode(m),i[Fe]=o,o.stateNode=i}return jt(o),null;case 13:if(m=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=tl(o),m!==null&&m.dehydrated!==null){if(i===null){if(!p)throw Error(s(318));if(p=o.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[Fe]=o}else sl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;jt(o),p=!1}else p=$x(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return o.flags&256?(dr(o),o):(dr(o),null)}if(dr(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=m!==null,i=i!==null&&i.memoizedState!==null,c){m=o.child,p=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(p=m.alternate.memoizedState.cachePool.pool);var y=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(y=m.memoizedState.cachePool.pool),y!==p&&(m.flags|=2048)}return c!==i&&c&&(o.child.flags|=8192),Tu(o,o.updateQueue),jt(o),null;case 4:return Oe(),i===null&&km(o.stateNode.containerInfo),jt(o),null;case 10:return cr(o.type),jt(o),null;case 19:if(fe(qt),p=o.memoizedState,p===null)return jt(o),null;if(m=(o.flags&128)!==0,y=p.rendering,y===null)if(m)vl(p,!1);else{if(Nt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(y=wu(i),y!==null){for(o.flags|=128,vl(p,!1),i=y.updateQueue,o.updateQueue=i,Tu(o,i),o.subtreeFlags=0,i=c,c=o.child;c!==null;)zx(c,i),c=c.sibling;return me(qt,qt.current&1|2),o.child}i=i.sibling}p.tail!==null&&Se()>Au&&(o.flags|=128,m=!0,vl(p,!1),o.lanes=4194304)}else{if(!m)if(i=wu(y),i!==null){if(o.flags|=128,m=!0,i=i.updateQueue,o.updateQueue=i,Tu(o,i),vl(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!at)return jt(o),null}else 2*Se()-p.renderingStartTime>Au&&c!==536870912&&(o.flags|=128,m=!0,vl(p,!1),o.lanes=4194304);p.isBackwards?(y.sibling=o.child,o.child=y):(i=p.last,i!==null?i.sibling=y:o.child=y,p.last=y)}return p.tail!==null?(o=p.tail,p.rendering=o,p.tail=o.sibling,p.renderingStartTime=Se(),o.sibling=null,i=qt.current,me(qt,m?i&1|2:i&1),o):(jt(o),null);case 22:case 23:return dr(o),Nf(),m=o.memoizedState!==null,i!==null?i.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(c&536870912)!==0&&(o.flags&128)===0&&(jt(o),o.subtreeFlags&6&&(o.flags|=8192)):jt(o),c=o.updateQueue,c!==null&&Tu(o,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==c&&(o.flags|=2048),i!==null&&fe(Hi),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),cr(Yt),jt(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function AT(i,o){switch(pf(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return cr(Yt),Oe(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Ce(o),null;case 13:if(dr(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));sl()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return fe(qt),null;case 4:return Oe(),null;case 10:return cr(o.type),null;case 22:case 23:return dr(o),Nf(),i!==null&&fe(Hi),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return cr(Yt),null;case 25:return null;default:return null}}function fy(i,o){switch(pf(o),o.tag){case 3:cr(Yt),Oe();break;case 26:case 27:case 5:Ce(o);break;case 4:Oe();break;case 13:dr(o);break;case 19:fe(qt);break;case 10:cr(o.type);break;case 22:case 23:dr(o),Nf(),i!==null&&fe(Hi);break;case 24:cr(Yt)}}function yl(i,o){try{var c=o.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var p=m.next;c=p;do{if((c.tag&i)===i){m=void 0;var y=c.create,C=c.inst;m=y(),C.destroy=m}c=c.next}while(c!==p)}}catch(k){pt(o,o.return,k)}}function Zr(i,o,c){try{var m=o.updateQueue,p=m!==null?m.lastEffect:null;if(p!==null){var y=p.next;m=y;do{if((m.tag&i)===i){var C=m.inst,k=C.destroy;if(k!==void 0){C.destroy=void 0,p=o;var P=c,K=k;try{K()}catch(ae){pt(p,P,ae)}}}m=m.next}while(m!==y)}}catch(ae){pt(o,o.return,ae)}}function my(i){var o=i.updateQueue;if(o!==null){var c=i.stateNode;try{tv(o,c)}catch(m){pt(i,i.return,m)}}}function gy(i,o,c){c.props=Gi(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(m){pt(i,o,m)}}function bl(i,o){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var m=i.stateNode;break;case 30:m=i.stateNode;break;default:m=i.stateNode}typeof c=="function"?i.refCleanup=c(m):c.current=m}}catch(p){pt(i,o,p)}}function $n(i,o){var c=i.ref,m=i.refCleanup;if(c!==null)if(typeof m=="function")try{m()}catch(p){pt(i,o,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(p){pt(i,o,p)}else c.current=null}function py(i){var o=i.type,c=i.memoizedProps,m=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&m.focus();break e;case"img":c.src?m.src=c.src:c.srcSet&&(m.srcset=c.srcSet)}}catch(p){pt(i,i.return,p)}}function rm(i,o,c){try{var m=i.stateNode;KT(m,i.type,c,o),m[nt]=o}catch(p){pt(i,i.return,p)}}function xy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ai(i.type)||i.tag===4}function im(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||xy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ai(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function am(i,o,c){var m=i.tag;if(m===5||m===6)i=i.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(i),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Fu));else if(m!==4&&(m===27&&ai(i.type)&&(c=i.stateNode,o=null),i=i.child,i!==null))for(am(i,o,c),i=i.sibling;i!==null;)am(i,o,c),i=i.sibling}function Eu(i,o,c){var m=i.tag;if(m===5||m===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(m!==4&&(m===27&&ai(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Eu(i,o,c),i=i.sibling;i!==null;)Eu(i,o,c),i=i.sibling}function vy(i){var o=i.stateNode,c=i.memoizedProps;try{for(var m=i.type,p=o.attributes;p.length;)o.removeAttributeNode(p[0]);ms(o,m,c),o[Fe]=i,o[nt]=c}catch(y){pt(i,i.return,y)}}var mr=!1,Rt=!1,om=!1,yy=typeof WeakSet=="function"?WeakSet:Set,ts=null;function NT(i,o){if(i=i.containerInfo,Dm=Gu,i=Nx(i),rf(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var p=m.anchorOffset,y=m.focusNode;m=m.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var C=0,k=-1,P=-1,K=0,ae=0,he=i,Z=null;t:for(;;){for(var J;he!==c||p!==0&&he.nodeType!==3||(k=C+p),he!==y||m!==0&&he.nodeType!==3||(P=C+m),he.nodeType===3&&(C+=he.nodeValue.length),(J=he.firstChild)!==null;)Z=he,he=J;for(;;){if(he===i)break t;if(Z===c&&++K===p&&(k=C),Z===y&&++ae===m&&(P=C),(J=he.nextSibling)!==null)break;he=Z,Z=he.parentNode}he=J}c=k===-1||P===-1?null:{start:k,end:P}}else c=null}c=c||{start:0,end:0}}else c=null;for(Om={focusedElem:i,selectionRange:c},Gu=!1,ts=o;ts!==null;)if(o=ts,i=o.child,(o.subtreeFlags&1024)!==0&&i!==null)i.return=o,ts=i;else for(;ts!==null;){switch(o=ts,y=o.alternate,i=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,c=o,p=y.memoizedProps,y=y.memoizedState,m=c.stateNode;try{var Ie=Gi(c.type,p,c.elementType===c.type);i=m.getSnapshotBeforeUpdate(Ie,y),m.__reactInternalSnapshotBeforeUpdate=i}catch(Ue){pt(c,c.return,Ue)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,c=i.nodeType,c===9)Pm(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Pm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,ts=i;break}ts=o.return}}function by(i,o,c){var m=c.flags;switch(c.tag){case 0:case 11:case 15:Jr(i,c),m&4&&yl(5,c);break;case 1:if(Jr(i,c),m&4)if(i=c.stateNode,o===null)try{i.componentDidMount()}catch(C){pt(c,c.return,C)}else{var p=Gi(c.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(p,o,i.__reactInternalSnapshotBeforeUpdate)}catch(C){pt(c,c.return,C)}}m&64&&my(c),m&512&&bl(c,c.return);break;case 3:if(Jr(i,c),m&64&&(i=c.updateQueue,i!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{tv(i,o)}catch(C){pt(c,c.return,C)}}break;case 27:o===null&&m&4&&vy(c);case 26:case 5:Jr(i,c),o===null&&m&4&&py(c),m&512&&bl(c,c.return);break;case 12:Jr(i,c);break;case 13:Jr(i,c),m&4&&Sy(i,c),m&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=UT.bind(null,c),nE(i,c))));break;case 22:if(m=c.memoizedState!==null||mr,!m){o=o!==null&&o.memoizedState!==null||Rt,p=mr;var y=Rt;mr=m,(Rt=o)&&!y?ei(i,c,(c.subtreeFlags&8772)!==0):Jr(i,c),mr=p,Rt=y}break;case 30:break;default:Jr(i,c)}}function wy(i){var o=i.alternate;o!==null&&(i.alternate=null,wy(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Hr(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var bt=null,Rs=!1;function gr(i,o,c){for(c=c.child;c!==null;)_y(i,o,c),c=c.sibling}function _y(i,o,c){if(ye&&typeof ye.onCommitFiberUnmount=="function")try{ye.onCommitFiberUnmount(Me,c)}catch{}switch(c.tag){case 26:Rt||$n(c,o),gr(i,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Rt||$n(c,o);var m=bt,p=Rs;ai(c.type)&&(bt=c.stateNode,Rs=!1),gr(i,o,c),Al(c.stateNode),bt=m,Rs=p;break;case 5:Rt||$n(c,o);case 6:if(m=bt,p=Rs,bt=null,gr(i,o,c),bt=m,Rs=p,bt!==null)if(Rs)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(c.stateNode)}catch(y){pt(c,o,y)}else try{bt.removeChild(c.stateNode)}catch(y){pt(c,o,y)}break;case 18:bt!==null&&(Rs?(i=bt,ub(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Bl(i)):ub(bt,c.stateNode));break;case 4:m=bt,p=Rs,bt=c.stateNode.containerInfo,Rs=!0,gr(i,o,c),bt=m,Rs=p;break;case 0:case 11:case 14:case 15:Rt||Zr(2,c,o),Rt||Zr(4,c,o),gr(i,o,c);break;case 1:Rt||($n(c,o),m=c.stateNode,typeof m.componentWillUnmount=="function"&&gy(c,o,m)),gr(i,o,c);break;case 21:gr(i,o,c);break;case 22:Rt=(m=Rt)||c.memoizedState!==null,gr(i,o,c),Rt=m;break;default:gr(i,o,c)}}function Sy(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Bl(i)}catch(c){pt(o,o.return,c)}}function DT(i){switch(i.tag){case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new yy),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new yy),o;default:throw Error(s(435,i.tag))}}function lm(i,o){var c=DT(i);o.forEach(function(m){var p=zT.bind(null,i,m);c.has(m)||(c.add(m),m.then(p,p))})}function Ws(i,o){var c=o.deletions;if(c!==null)for(var m=0;m<c.length;m++){var p=c[m],y=i,C=o,k=C;e:for(;k!==null;){switch(k.tag){case 27:if(ai(k.type)){bt=k.stateNode,Rs=!1;break e}break;case 5:bt=k.stateNode,Rs=!1;break e;case 3:case 4:bt=k.stateNode.containerInfo,Rs=!0;break e}k=k.return}if(bt===null)throw Error(s(160));_y(y,C,p),bt=null,Rs=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)Cy(o,i),o=o.sibling}var Cn=null;function Cy(i,o){var c=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Ws(o,i),Xs(i),m&4&&(Zr(3,i,i.return),yl(3,i),Zr(5,i,i.return));break;case 1:Ws(o,i),Xs(i),m&512&&(Rt||c===null||$n(c,c.return)),m&64&&mr&&(i=i.updateQueue,i!==null&&(m=i.callbacks,m!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?m:c.concat(m))));break;case 26:var p=Cn;if(Ws(o,i),Xs(i),m&512&&(Rt||c===null||$n(c,c.return)),m&4){var y=c!==null?c.memoizedState:null;if(m=i.memoizedState,c===null)if(m===null)if(i.stateNode===null){e:{m=i.type,c=i.memoizedProps,p=p.ownerDocument||p;t:switch(m){case"title":y=p.getElementsByTagName("title")[0],(!y||y[ls]||y[Fe]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(m),p.head.insertBefore(y,p.querySelector("head > title"))),ms(y,m,c),y[Fe]=i,kt(y),m=y;break e;case"link":var C=vb("link","href",p).get(m+(c.href||""));if(C){for(var k=0;k<C.length;k++)if(y=C[k],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){C.splice(k,1);break t}}y=p.createElement(m),ms(y,m,c),p.head.appendChild(y);break;case"meta":if(C=vb("meta","content",p).get(m+(c.content||""))){for(k=0;k<C.length;k++)if(y=C[k],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){C.splice(k,1);break t}}y=p.createElement(m),ms(y,m,c),p.head.appendChild(y);break;default:throw Error(s(468,m))}y[Fe]=i,kt(y),m=y}i.stateNode=m}else yb(p,i.type,i.stateNode);else i.stateNode=xb(p,m,i.memoizedProps);else y!==m?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,m===null?yb(p,i.type,i.stateNode):xb(p,m,i.memoizedProps)):m===null&&i.stateNode!==null&&rm(i,i.memoizedProps,c.memoizedProps)}break;case 27:Ws(o,i),Xs(i),m&512&&(Rt||c===null||$n(c,c.return)),c!==null&&m&4&&rm(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Ws(o,i),Xs(i),m&512&&(Rt||c===null||$n(c,c.return)),i.flags&32){p=i.stateNode;try{_a(p,"")}catch(J){pt(i,i.return,J)}}m&4&&i.stateNode!=null&&(p=i.memoizedProps,rm(i,p,c!==null?c.memoizedProps:p)),m&1024&&(om=!0);break;case 6:if(Ws(o,i),Xs(i),m&4){if(i.stateNode===null)throw Error(s(162));m=i.memoizedProps,c=i.stateNode;try{c.nodeValue=m}catch(J){pt(i,i.return,J)}}break;case 3:if(Iu=null,p=Cn,Cn=zu(o.containerInfo),Ws(o,i),Cn=p,Xs(i),m&4&&c!==null&&c.memoizedState.isDehydrated)try{Bl(o.containerInfo)}catch(J){pt(i,i.return,J)}om&&(om=!1,jy(i));break;case 4:m=Cn,Cn=zu(i.stateNode.containerInfo),Ws(o,i),Xs(i),Cn=m;break;case 12:Ws(o,i),Xs(i);break;case 13:Ws(o,i),Xs(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(mm=Se()),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,lm(i,m)));break;case 22:p=i.memoizedState!==null;var P=c!==null&&c.memoizedState!==null,K=mr,ae=Rt;if(mr=K||p,Rt=ae||P,Ws(o,i),Rt=ae,mr=K,Xs(i),m&8192)e:for(o=i.stateNode,o._visibility=p?o._visibility&-2:o._visibility|1,p&&(c===null||P||mr||Rt||Yi(i)),c=null,o=i;;){if(o.tag===5||o.tag===26){if(c===null){P=c=o;try{if(y=P.stateNode,p)C=y.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{k=P.stateNode;var he=P.memoizedProps.style,Z=he!=null&&he.hasOwnProperty("display")?he.display:null;k.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(J){pt(P,P.return,J)}}}else if(o.tag===6){if(c===null){P=o;try{P.stateNode.nodeValue=p?"":P.memoizedProps}catch(J){pt(P,P.return,J)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=i.updateQueue,m!==null&&(c=m.retryQueue,c!==null&&(m.retryQueue=null,lm(i,c))));break;case 19:Ws(o,i),Xs(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,lm(i,m)));break;case 30:break;case 21:break;default:Ws(o,i),Xs(i)}}function Xs(i){var o=i.flags;if(o&2){try{for(var c,m=i.return;m!==null;){if(xy(m)){c=m;break}m=m.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var p=c.stateNode,y=im(i);Eu(i,y,p);break;case 5:var C=c.stateNode;c.flags&32&&(_a(C,""),c.flags&=-33);var k=im(i);Eu(i,k,C);break;case 3:case 4:var P=c.stateNode.containerInfo,K=im(i);am(i,K,P);break;default:throw Error(s(161))}}catch(ae){pt(i,i.return,ae)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function jy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;jy(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Jr(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)by(i,o.alternate,o),o=o.sibling}function Yi(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Zr(4,o,o.return),Yi(o);break;case 1:$n(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&gy(o,o.return,c),Yi(o);break;case 27:Al(o.stateNode);case 26:case 5:$n(o,o.return),Yi(o);break;case 22:o.memoizedState===null&&Yi(o);break;case 30:Yi(o);break;default:Yi(o)}i=i.sibling}}function ei(i,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,p=i,y=o,C=y.flags;switch(y.tag){case 0:case 11:case 15:ei(p,y,c),yl(4,y);break;case 1:if(ei(p,y,c),m=y,p=m.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(K){pt(m,m.return,K)}if(m=y,p=m.updateQueue,p!==null){var k=m.stateNode;try{var P=p.shared.hiddenCallbacks;if(P!==null)for(p.shared.hiddenCallbacks=null,p=0;p<P.length;p++)ev(P[p],k)}catch(K){pt(m,m.return,K)}}c&&C&64&&my(y),bl(y,y.return);break;case 27:vy(y);case 26:case 5:ei(p,y,c),c&&m===null&&C&4&&py(y),bl(y,y.return);break;case 12:ei(p,y,c);break;case 13:ei(p,y,c),c&&C&4&&Sy(p,y);break;case 22:y.memoizedState===null&&ei(p,y,c),bl(y,y.return);break;case 30:break;default:ei(p,y,c)}o=o.sibling}}function cm(i,o){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&il(c))}function um(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&il(i))}function Gn(i,o,c,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Ty(i,o,c,m),o=o.sibling}function Ty(i,o,c,m){var p=o.flags;switch(o.tag){case 0:case 11:case 15:Gn(i,o,c,m),p&2048&&yl(9,o);break;case 1:Gn(i,o,c,m);break;case 3:Gn(i,o,c,m),p&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&il(i)));break;case 12:if(p&2048){Gn(i,o,c,m),i=o.stateNode;try{var y=o.memoizedProps,C=y.id,k=y.onPostCommit;typeof k=="function"&&k(C,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){pt(o,o.return,P)}}else Gn(i,o,c,m);break;case 13:Gn(i,o,c,m);break;case 23:break;case 22:y=o.stateNode,C=o.alternate,o.memoizedState!==null?y._visibility&2?Gn(i,o,c,m):wl(i,o):y._visibility&2?Gn(i,o,c,m):(y._visibility|=2,Va(i,o,c,m,(o.subtreeFlags&10256)!==0)),p&2048&&cm(C,o);break;case 24:Gn(i,o,c,m),p&2048&&um(o.alternate,o);break;default:Gn(i,o,c,m)}}function Va(i,o,c,m,p){for(p=p&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var y=i,C=o,k=c,P=m,K=C.flags;switch(C.tag){case 0:case 11:case 15:Va(y,C,k,P,p),yl(8,C);break;case 23:break;case 22:var ae=C.stateNode;C.memoizedState!==null?ae._visibility&2?Va(y,C,k,P,p):wl(y,C):(ae._visibility|=2,Va(y,C,k,P,p)),p&&K&2048&&cm(C.alternate,C);break;case 24:Va(y,C,k,P,p),p&&K&2048&&um(C.alternate,C);break;default:Va(y,C,k,P,p)}o=o.sibling}}function wl(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=i,m=o,p=m.flags;switch(m.tag){case 22:wl(c,m),p&2048&&cm(m.alternate,m);break;case 24:wl(c,m),p&2048&&um(m.alternate,m);break;default:wl(c,m)}o=o.sibling}}var _l=8192;function Ia(i){if(i.subtreeFlags&_l)for(i=i.child;i!==null;)Ey(i),i=i.sibling}function Ey(i){switch(i.tag){case 26:Ia(i),i.flags&_l&&i.memoizedState!==null&&pE(Cn,i.memoizedState,i.memoizedProps);break;case 5:Ia(i);break;case 3:case 4:var o=Cn;Cn=zu(i.stateNode.containerInfo),Ia(i),Cn=o;break;case 22:i.memoizedState===null&&(o=i.alternate,o!==null&&o.memoizedState!==null?(o=_l,_l=16777216,Ia(i),_l=o):Ia(i));break;default:Ia(i)}}function ky(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Sl(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var m=o[c];ts=m,Ny(m,i)}ky(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ay(i),i=i.sibling}function Ay(i){switch(i.tag){case 0:case 11:case 15:Sl(i),i.flags&2048&&Zr(9,i,i.return);break;case 3:Sl(i);break;case 12:Sl(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,ku(i)):Sl(i);break;default:Sl(i)}}function ku(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var m=o[c];ts=m,Ny(m,i)}ky(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Zr(8,o,o.return),ku(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,ku(o));break;default:ku(o)}i=i.sibling}}function Ny(i,o){for(;ts!==null;){var c=ts;switch(c.tag){case 0:case 11:case 15:Zr(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var m=c.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:il(c.memoizedState.cache)}if(m=c.child,m!==null)m.return=c,ts=m;else e:for(c=i;ts!==null;){m=ts;var p=m.sibling,y=m.return;if(wy(m),m===c){ts=null;break e}if(p!==null){p.return=y,ts=p;break e}ts=y}}}var OT={getCacheForType:function(i){var o=ys(Yt),c=o.data.get(i);return c===void 0&&(c=i(),o.data.set(i,c)),c}},MT=typeof WeakMap=="function"?WeakMap:Map,ct=0,xt=null,Ze=null,tt=0,ut=0,Ks=null,ti=!1,Ha=!1,dm=!1,pr=0,Nt=0,si=0,qi=0,hm=0,dn=0,$a=0,Cl=null,Ps=null,fm=!1,mm=0,Au=1/0,Nu=null,ni=null,fs=0,ri=null,Ga=null,Ya=0,gm=0,pm=null,Dy=null,jl=0,xm=null;function Qs(){if((ct&2)!==0&&tt!==0)return tt&-tt;if(R.T!==null){var i=Ma;return i!==0?i:Cm()}return Ne()}function Oy(){dn===0&&(dn=(tt&536870912)===0||at?Go():536870912);var i=un.current;return i!==null&&(i.flags|=32),dn}function Zs(i,o,c){(i===xt&&(ut===2||ut===9)||i.cancelPendingCommit!==null)&&(qa(i,0),ii(i,tt,dn,!1)),Oi(i,c),((ct&2)===0||i!==xt)&&(i===xt&&((ct&2)===0&&(qi|=c),Nt===4&&ii(i,tt,dn,!1)),Yn(i))}function My(i,o,c){if((ct&6)!==0)throw Error(s(327));var m=!c&&(o&124)===0&&(o&i.expiredLanes)===0||Vr(i,o),p=m?LT(i,o):bm(i,o,!0),y=m;do{if(p===0){Ha&&!m&&ii(i,o,0,!1);break}else{if(c=i.current.alternate,y&&!RT(c)){p=bm(i,o,!1),y=!1;continue}if(p===2){if(y=o,i.errorRecoveryDisabledLanes&y)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){o=C;e:{var k=i;p=Cl;var P=k.current.memoizedState.isDehydrated;if(P&&(qa(k,C).flags|=256),C=bm(k,C,!1),C!==2){if(dm&&!P){k.errorRecoveryDisabledLanes|=y,qi|=y,p=4;break e}y=Ps,Ps=p,y!==null&&(Ps===null?Ps=y:Ps.push.apply(Ps,y))}p=C}if(y=!1,p!==2)continue}}if(p===1){qa(i,0),ii(i,o,0,!0);break}e:{switch(m=i,y=p,y){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:ii(m,o,dn,!ti);break e;case 2:Ps=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(p=mm+300-Se(),10<p)){if(ii(m,o,dn,!ti),Ni(m,0,!0)!==0)break e;m.timeoutHandle=lb(Ry.bind(null,m,c,Ps,Nu,fm,o,dn,qi,$a,ti,y,2,-0,0),p);break e}Ry(m,c,Ps,Nu,fm,o,dn,qi,$a,ti,y,0,-0,0)}}break}while(!0);Yn(i)}function Ry(i,o,c,m,p,y,C,k,P,K,ae,he,Z,J){if(i.timeoutHandle=-1,he=o.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(Ol={stylesheets:null,count:0,unsuspend:gE},Ey(o),he=xE(),he!==null)){i.cancelPendingCommit=he(Vy.bind(null,i,o,y,c,m,p,C,k,P,ae,1,Z,J)),ii(i,y,C,!K);return}Vy(i,o,y,c,m,p,C,k,P)}function RT(i){for(var o=i;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var m=0;m<c.length;m++){var p=c[m],y=p.getSnapshot;p=p.value;try{if(!Ys(y(),p))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ii(i,o,c,m){o&=~hm,o&=~qi,i.suspendedLanes|=o,i.pingedLanes&=~o,m&&(i.warmLanes|=o),m=i.expirationTimes;for(var p=o;0<p;){var y=31-le(p),C=1<<y;m[y]=-1,p&=~C}c!==0&&Hc(i,c,o)}function Du(){return(ct&6)===0?(Tl(0),!1):!0}function vm(){if(Ze!==null){if(ut===0)var i=Ze.return;else i=Ze,lr=Vi=null,Pf(i),Ua=null,pl=0,i=Ze;for(;i!==null;)fy(i.alternate,i),i=i.return;Ze=null}}function qa(i,o){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,ZT(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),vm(),xt=i,Ze=c=ir(i.current,null),tt=o,ut=0,Ks=null,ti=!1,Ha=Vr(i,o),dm=!1,$a=dn=hm=qi=si=Nt=0,Ps=Cl=null,fm=!1,(o&8)!==0&&(o|=o&32);var m=i.entangledLanes;if(m!==0)for(i=i.entanglements,m&=o;0<m;){var p=31-le(m),y=1<<p;o|=i[p],m&=~y}return pr=o,Jc(),c}function Py(i,o){We=null,R.H=vu,o===ol||o===lu?(o=Zx(),ut=3):o===Xx?(o=Zx(),ut=4):ut=o===Jv?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ks=o,Ze===null&&(Nt=1,Su(i,an(o,i.current)))}function Ly(){var i=R.H;return R.H=vu,i===null?vu:i}function By(){var i=R.A;return R.A=OT,i}function ym(){Nt=4,ti||(tt&4194048)!==tt&&un.current!==null||(Ha=!0),(si&134217727)===0&&(qi&134217727)===0||xt===null||ii(xt,tt,dn,!1)}function bm(i,o,c){var m=ct;ct|=2;var p=Ly(),y=By();(xt!==i||tt!==o)&&(Nu=null,qa(i,o)),o=!1;var C=Nt;e:do try{if(ut!==0&&Ze!==null){var k=Ze,P=Ks;switch(ut){case 8:vm(),C=6;break e;case 3:case 2:case 9:case 6:un.current===null&&(o=!0);var K=ut;if(ut=0,Ks=null,Wa(i,k,P,K),c&&Ha){C=0;break e}break;default:K=ut,ut=0,Ks=null,Wa(i,k,P,K)}}PT(),C=Nt;break}catch(ae){Py(i,ae)}while(!0);return o&&i.shellSuspendCounter++,lr=Vi=null,ct=m,R.H=p,R.A=y,Ze===null&&(xt=null,tt=0,Jc()),C}function PT(){for(;Ze!==null;)Fy(Ze)}function LT(i,o){var c=ct;ct|=2;var m=Ly(),p=By();xt!==i||tt!==o?(Nu=null,Au=Se()+500,qa(i,o)):Ha=Vr(i,o);e:do try{if(ut!==0&&Ze!==null){o=Ze;var y=Ks;t:switch(ut){case 1:ut=0,Ks=null,Wa(i,o,y,1);break;case 2:case 9:if(Kx(y)){ut=0,Ks=null,Uy(o);break}o=function(){ut!==2&&ut!==9||xt!==i||(ut=7),Yn(i)},y.then(o,o);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Kx(y)?(ut=0,Ks=null,Uy(o)):(ut=0,Ks=null,Wa(i,o,y,7));break;case 5:var C=null;switch(Ze.tag){case 26:C=Ze.memoizedState;case 5:case 27:var k=Ze;if(!C||bb(C)){ut=0,Ks=null;var P=k.sibling;if(P!==null)Ze=P;else{var K=k.return;K!==null?(Ze=K,Ou(K)):Ze=null}break t}}ut=0,Ks=null,Wa(i,o,y,5);break;case 6:ut=0,Ks=null,Wa(i,o,y,6);break;case 8:vm(),Nt=6;break e;default:throw Error(s(462))}}BT();break}catch(ae){Py(i,ae)}while(!0);return lr=Vi=null,R.H=m,R.A=p,ct=c,Ze!==null?0:(xt=null,tt=0,Jc(),Nt)}function BT(){for(;Ze!==null&&!Ee();)Fy(Ze)}function Fy(i){var o=dy(i.alternate,i,pr);i.memoizedProps=i.pendingProps,o===null?Ou(i):Ze=o}function Uy(i){var o=i,c=o.alternate;switch(o.tag){case 15:case 0:o=iy(c,o,o.pendingProps,o.type,void 0,tt);break;case 11:o=iy(c,o,o.pendingProps,o.type.render,o.ref,tt);break;case 5:Pf(o);default:fy(c,o),o=Ze=zx(o,pr),o=dy(c,o,pr)}i.memoizedProps=i.pendingProps,o===null?Ou(i):Ze=o}function Wa(i,o,c,m){lr=Vi=null,Pf(o),Ua=null,pl=0;var p=o.return;try{if(TT(i,p,o,c,tt)){Nt=1,Su(i,an(c,i.current)),Ze=null;return}}catch(y){if(p!==null)throw Ze=p,y;Nt=1,Su(i,an(c,i.current)),Ze=null;return}o.flags&32768?(at||m===1?i=!0:Ha||(tt&536870912)!==0?i=!1:(ti=i=!0,(m===2||m===9||m===3||m===6)&&(m=un.current,m!==null&&m.tag===13&&(m.flags|=16384))),zy(o,i)):Ou(o)}function Ou(i){var o=i;do{if((o.flags&32768)!==0){zy(o,ti);return}i=o.return;var c=kT(o.alternate,o,pr);if(c!==null){Ze=c;return}if(o=o.sibling,o!==null){Ze=o;return}Ze=o=i}while(o!==null);Nt===0&&(Nt=5)}function zy(i,o){do{var c=AT(i.alternate,i);if(c!==null){c.flags&=32767,Ze=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(i=i.sibling,i!==null)){Ze=i;return}Ze=i=c}while(i!==null);Nt=6,Ze=null}function Vy(i,o,c,m,p,y,C,k,P){i.cancelPendingCommit=null;do Mu();while(fs!==0);if((ct&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(y=o.lanes|o.childLanes,y|=uf,Uh(i,c,y,C,k,P),i===xt&&(Ze=xt=null,tt=0),Ga=o,ri=i,Ya=c,gm=y,pm=p,Dy=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,VT(Jt,function(){return Yy(),null})):(i.callbackNode=null,i.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=R.T,R.T=null,p=$.p,$.p=2,C=ct,ct|=4;try{NT(i,o,c)}finally{ct=C,$.p=p,R.T=m}}fs=1,Iy(),Hy(),$y()}}function Iy(){if(fs===1){fs=0;var i=ri,o=Ga,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=R.T,R.T=null;var m=$.p;$.p=2;var p=ct;ct|=4;try{Cy(o,i);var y=Om,C=Nx(i.containerInfo),k=y.focusedElem,P=y.selectionRange;if(C!==k&&k&&k.ownerDocument&&Ax(k.ownerDocument.documentElement,k)){if(P!==null&&rf(k)){var K=P.start,ae=P.end;if(ae===void 0&&(ae=K),"selectionStart"in k)k.selectionStart=K,k.selectionEnd=Math.min(ae,k.value.length);else{var he=k.ownerDocument||document,Z=he&&he.defaultView||window;if(Z.getSelection){var J=Z.getSelection(),Ie=k.textContent.length,Ue=Math.min(P.start,Ie),gt=P.end===void 0?Ue:Math.min(P.end,Ie);!J.extend&&Ue>gt&&(C=gt,gt=Ue,Ue=C);var G=kx(k,Ue),U=kx(k,gt);if(G&&U&&(J.rangeCount!==1||J.anchorNode!==G.node||J.anchorOffset!==G.offset||J.focusNode!==U.node||J.focusOffset!==U.offset)){var W=he.createRange();W.setStart(G.node,G.offset),J.removeAllRanges(),Ue>gt?(J.addRange(W),J.extend(U.node,U.offset)):(W.setEnd(U.node,U.offset),J.addRange(W))}}}}for(he=[],J=k;J=J.parentNode;)J.nodeType===1&&he.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<he.length;k++){var ue=he[k];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Gu=!!Dm,Om=Dm=null}finally{ct=p,$.p=m,R.T=c}}i.current=o,fs=2}}function Hy(){if(fs===2){fs=0;var i=ri,o=Ga,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=R.T,R.T=null;var m=$.p;$.p=2;var p=ct;ct|=4;try{by(i,o.alternate,o)}finally{ct=p,$.p=m,R.T=c}}fs=3}}function $y(){if(fs===4||fs===3){fs=0,Ge();var i=ri,o=Ga,c=Ya,m=Dy;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?fs=5:(fs=0,Ga=ri=null,Gy(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(ni=null),$e(c),o=o.stateNode,ye&&typeof ye.onCommitFiberRoot=="function")try{ye.onCommitFiberRoot(Me,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=R.T,p=$.p,$.p=2,R.T=null;try{for(var y=i.onRecoverableError,C=0;C<m.length;C++){var k=m[C];y(k.value,{componentStack:k.stack})}}finally{R.T=o,$.p=p}}(Ya&3)!==0&&Mu(),Yn(i),p=i.pendingLanes,(c&4194090)!==0&&(p&42)!==0?i===xm?jl++:(jl=0,xm=i):jl=0,Tl(0)}}function Gy(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,il(o)))}function Mu(i){return Iy(),Hy(),$y(),Yy()}function Yy(){if(fs!==5)return!1;var i=ri,o=gm;gm=0;var c=$e(Ya),m=R.T,p=$.p;try{$.p=32>c?32:c,R.T=null,c=pm,pm=null;var y=ri,C=Ya;if(fs=0,Ga=ri=null,Ya=0,(ct&6)!==0)throw Error(s(331));var k=ct;if(ct|=4,Ay(y.current),Ty(y,y.current,C,c),ct=k,Tl(0,!1),ye&&typeof ye.onPostCommitFiberRoot=="function")try{ye.onPostCommitFiberRoot(Me,y)}catch{}return!0}finally{$.p=p,R.T=m,Gy(i,o)}}function qy(i,o,c){o=an(c,o),o=Xf(i.stateNode,o,2),i=Wr(i,o,2),i!==null&&(Oi(i,2),Yn(i))}function pt(i,o,c){if(i.tag===3)qy(i,i,c);else for(;o!==null;){if(o.tag===3){qy(o,i,c);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ni===null||!ni.has(m))){i=an(c,i),c=Qv(2),m=Wr(o,c,2),m!==null&&(Zv(c,m,o,i),Oi(m,2),Yn(m));break}}o=o.return}}function wm(i,o,c){var m=i.pingCache;if(m===null){m=i.pingCache=new MT;var p=new Set;m.set(o,p)}else p=m.get(o),p===void 0&&(p=new Set,m.set(o,p));p.has(c)||(dm=!0,p.add(c),i=FT.bind(null,i,o,c),o.then(i,i))}function FT(i,o,c){var m=i.pingCache;m!==null&&m.delete(o),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,xt===i&&(tt&c)===c&&(Nt===4||Nt===3&&(tt&62914560)===tt&&300>Se()-mm?(ct&2)===0&&qa(i,0):hm|=c,$a===tt&&($a=0)),Yn(i)}function Wy(i,o){o===0&&(o=Ic()),i=Aa(i,o),i!==null&&(Oi(i,o),Yn(i))}function UT(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),Wy(i,c)}function zT(i,o){var c=0;switch(i.tag){case 13:var m=i.stateNode,p=i.memoizedState;p!==null&&(c=p.retryLane);break;case 19:m=i.stateNode;break;case 22:m=i.stateNode._retryCache;break;default:throw Error(s(314))}m!==null&&m.delete(o),Wy(i,c)}function VT(i,o){return we(i,o)}var Ru=null,Xa=null,_m=!1,Pu=!1,Sm=!1,Wi=0;function Yn(i){i!==Xa&&i.next===null&&(Xa===null?Ru=Xa=i:Xa=Xa.next=i),Pu=!0,_m||(_m=!0,HT())}function Tl(i,o){if(!Sm&&Pu){Sm=!0;do for(var c=!1,m=Ru;m!==null;){if(i!==0){var p=m.pendingLanes;if(p===0)var y=0;else{var C=m.suspendedLanes,k=m.pingedLanes;y=(1<<31-le(42|i)+1)-1,y&=p&~(C&~k),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,Zy(m,y))}else y=tt,y=Ni(m,m===xt?y:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(y&3)===0||Vr(m,y)||(c=!0,Zy(m,y));m=m.next}while(c);Sm=!1}}function IT(){Xy()}function Xy(){Pu=_m=!1;var i=0;Wi!==0&&(QT()&&(i=Wi),Wi=0);for(var o=Se(),c=null,m=Ru;m!==null;){var p=m.next,y=Ky(m,o);y===0?(m.next=null,c===null?Ru=p:c.next=p,p===null&&(Xa=c)):(c=m,(i!==0||(y&3)!==0)&&(Pu=!0)),m=p}Tl(i)}function Ky(i,o){for(var c=i.suspendedLanes,m=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var C=31-le(y),k=1<<C,P=p[C];P===-1?((k&c)===0||(k&m)!==0)&&(p[C]=Vc(k,o)):P<=o&&(i.expiredLanes|=k),y&=~k}if(o=xt,c=tt,c=Ni(i,i===o?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m=i.callbackNode,c===0||i===o&&(ut===2||ut===9)||i.cancelPendingCommit!==null)return m!==null&&m!==null&&Ve(m),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Vr(i,c)){if(o=c&-c,o===i.callbackPriority)return o;switch(m!==null&&Ve(m),$e(c)){case 2:case 8:c=Zt;break;case 32:c=Jt;break;case 268435456:c=Hs;break;default:c=Jt}return m=Qy.bind(null,i),c=we(c,m),i.callbackPriority=o,i.callbackNode=c,o}return m!==null&&m!==null&&Ve(m),i.callbackPriority=2,i.callbackNode=null,2}function Qy(i,o){if(fs!==0&&fs!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Mu()&&i.callbackNode!==c)return null;var m=tt;return m=Ni(i,i===xt?m:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m===0?null:(My(i,m,o),Ky(i,Se()),i.callbackNode!=null&&i.callbackNode===c?Qy.bind(null,i):null)}function Zy(i,o){if(Mu())return null;My(i,o,!0)}function HT(){JT(function(){(ct&6)!==0?we(Gt,IT):Xy()})}function Cm(){return Wi===0&&(Wi=Go()),Wi}function Jy(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Yc(""+i)}function eb(i,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,i.id&&c.setAttribute("form",i.id),o.parentNode.insertBefore(c,o),i=new FormData(i),c.parentNode.removeChild(c),i}function $T(i,o,c,m,p){if(o==="submit"&&c&&c.stateNode===p){var y=Jy((p[nt]||null).action),C=m.submitter;C&&(o=(o=C[nt]||null)?Jy(o.formAction):C.getAttribute("formAction"),o!==null&&(y=o,C=null));var k=new Kc("action","action",null,m,p);i.push({event:k,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Wi!==0){var P=C?eb(p,C):new FormData(p);$f(c,{pending:!0,data:P,method:p.method,action:y},null,P)}}else typeof y=="function"&&(k.preventDefault(),P=C?eb(p,C):new FormData(p),$f(c,{pending:!0,data:P,method:p.method,action:y},y,P))},currentTarget:p}]})}}for(var jm=0;jm<cf.length;jm++){var Tm=cf[jm],GT=Tm.toLowerCase(),YT=Tm[0].toUpperCase()+Tm.slice(1);Sn(GT,"on"+YT)}Sn(Mx,"onAnimationEnd"),Sn(Rx,"onAnimationIteration"),Sn(Px,"onAnimationStart"),Sn("dblclick","onDoubleClick"),Sn("focusin","onFocus"),Sn("focusout","onBlur"),Sn(cT,"onTransitionRun"),Sn(uT,"onTransitionStart"),Sn(dT,"onTransitionCancel"),Sn(Lx,"onTransitionEnd"),vs("onMouseEnter",["mouseout","mouseover"]),vs("onMouseLeave",["mouseout","mouseover"]),vs("onPointerEnter",["pointerout","pointerover"]),vs("onPointerLeave",["pointerout","pointerover"]),us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),us("onBeforeInput",["compositionend","keypress","textInput","paste"]),us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(El));function tb(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var m=i[c],p=m.event;m=m.listeners;e:{var y=void 0;if(o)for(var C=m.length-1;0<=C;C--){var k=m[C],P=k.instance,K=k.currentTarget;if(k=k.listener,P!==y&&p.isPropagationStopped())break e;y=k,p.currentTarget=K;try{y(p)}catch(ae){_u(ae)}p.currentTarget=null,y=P}else for(C=0;C<m.length;C++){if(k=m[C],P=k.instance,K=k.currentTarget,k=k.listener,P!==y&&p.isPropagationStopped())break e;y=k,p.currentTarget=K;try{y(p)}catch(ae){_u(ae)}p.currentTarget=null,y=P}}}}function Je(i,o){var c=o[Le];c===void 0&&(c=o[Le]=new Set);var m=i+"__bubble";c.has(m)||(sb(o,i,2,!1),c.add(m))}function Em(i,o,c){var m=0;o&&(m|=4),sb(c,i,m,o)}var Lu="_reactListening"+Math.random().toString(36).slice(2);function km(i){if(!i[Lu]){i[Lu]=!0,_n.forEach(function(c){c!=="selectionchange"&&(qT.has(c)||Em(c,!1,i),Em(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Lu]||(o[Lu]=!0,Em("selectionchange",!1,o))}}function sb(i,o,c,m){switch(Tb(o)){case 2:var p=bE;break;case 8:p=wE;break;default:p=Im}c=p.bind(null,o,c,i),p=void 0,!Xh||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),m?p!==void 0?i.addEventListener(o,c,{capture:!0,passive:p}):i.addEventListener(o,c,!0):p!==void 0?i.addEventListener(o,c,{passive:p}):i.addEventListener(o,c,!1)}function Am(i,o,c,m,p){var y=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var C=m.tag;if(C===3||C===4){var k=m.stateNode.containerInfo;if(k===p)break;if(C===4)for(C=m.return;C!==null;){var P=C.tag;if((P===3||P===4)&&C.stateNode.containerInfo===p)return;C=C.return}for(;k!==null;){if(C=wn(k),C===null)return;if(P=C.tag,P===5||P===6||P===26||P===27){m=y=C;continue e}k=k.parentNode}}m=m.return}cx(function(){var K=y,ae=qh(c),he=[];e:{var Z=Bx.get(i);if(Z!==void 0){var J=Kc,Ie=i;switch(i){case"keypress":if(Wc(c)===0)break e;case"keydown":case"keyup":J=Vj;break;case"focusin":Ie="focus",J=Jh;break;case"focusout":Ie="blur",J=Jh;break;case"beforeblur":case"afterblur":J=Jh;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=hx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Aj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=$j;break;case Mx:case Rx:case Px:J=Oj;break;case Lx:J=Yj;break;case"scroll":case"scrollend":J=Ej;break;case"wheel":J=Wj;break;case"copy":case"cut":case"paste":J=Rj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=mx;break;case"toggle":case"beforetoggle":J=Kj}var Ue=(o&4)!==0,gt=!Ue&&(i==="scroll"||i==="scrollend"),G=Ue?Z!==null?Z+"Capture":null:Z;Ue=[];for(var U=K,W;U!==null;){var ue=U;if(W=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||W===null||G===null||(ue=Yo(U,G),ue!=null&&Ue.push(kl(U,ue,W))),gt)break;U=U.return}0<Ue.length&&(Z=new J(Z,Ie,null,c,ae),he.push({event:Z,listeners:Ue}))}}if((o&7)===0){e:{if(Z=i==="mouseover"||i==="pointerover",J=i==="mouseout"||i==="pointerout",Z&&c!==Yh&&(Ie=c.relatedTarget||c.fromElement)&&(wn(Ie)||Ie[Ct]))break e;if((J||Z)&&(Z=ae.window===ae?ae:(Z=ae.ownerDocument)?Z.defaultView||Z.parentWindow:window,J?(Ie=c.relatedTarget||c.toElement,J=K,Ie=Ie?wn(Ie):null,Ie!==null&&(gt=a(Ie),Ue=Ie.tag,Ie!==gt||Ue!==5&&Ue!==27&&Ue!==6)&&(Ie=null)):(J=null,Ie=K),J!==Ie)){if(Ue=hx,ue="onMouseLeave",G="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(Ue=mx,ue="onPointerLeave",G="onPointerEnter",U="pointer"),gt=J==null?Z:cs(J),W=Ie==null?Z:cs(Ie),Z=new Ue(ue,U+"leave",J,c,ae),Z.target=gt,Z.relatedTarget=W,ue=null,wn(ae)===K&&(Ue=new Ue(G,U+"enter",Ie,c,ae),Ue.target=W,Ue.relatedTarget=gt,ue=Ue),gt=ue,J&&Ie)t:{for(Ue=J,G=Ie,U=0,W=Ue;W;W=Ka(W))U++;for(W=0,ue=G;ue;ue=Ka(ue))W++;for(;0<U-W;)Ue=Ka(Ue),U--;for(;0<W-U;)G=Ka(G),W--;for(;U--;){if(Ue===G||G!==null&&Ue===G.alternate)break t;Ue=Ka(Ue),G=Ka(G)}Ue=null}else Ue=null;J!==null&&nb(he,Z,J,Ue,!1),Ie!==null&&gt!==null&&nb(he,gt,Ie,Ue,!0)}}e:{if(Z=K?cs(K):window,J=Z.nodeName&&Z.nodeName.toLowerCase(),J==="select"||J==="input"&&Z.type==="file")var De=_x;else if(bx(Z))if(Sx)De=aT;else{De=rT;var Ke=nT}else J=Z.nodeName,!J||J.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?K&&Gh(K.elementType)&&(De=_x):De=iT;if(De&&(De=De(i,K))){wx(he,De,c,ae);break e}Ke&&Ke(i,Z,K),i==="focusout"&&K&&Z.type==="number"&&K.memoizedProps.value!=null&&$h(Z,"number",Z.value)}switch(Ke=K?cs(K):window,i){case"focusin":(bx(Ke)||Ke.contentEditable==="true")&&(Ta=Ke,af=K,el=null);break;case"focusout":el=af=Ta=null;break;case"mousedown":of=!0;break;case"contextmenu":case"mouseup":case"dragend":of=!1,Dx(he,c,ae);break;case"selectionchange":if(lT)break;case"keydown":case"keyup":Dx(he,c,ae)}var Pe;if(tf)e:{switch(i){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else ja?vx(i,c)&&(ze="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(ze="onCompositionStart");ze&&(gx&&c.locale!=="ko"&&(ja||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&ja&&(Pe=ux()):($r=ae,Kh="value"in $r?$r.value:$r.textContent,ja=!0)),Ke=Bu(K,ze),0<Ke.length&&(ze=new fx(ze,i,null,c,ae),he.push({event:ze,listeners:Ke}),Pe?ze.data=Pe:(Pe=yx(c),Pe!==null&&(ze.data=Pe)))),(Pe=Zj?Jj(i,c):eT(i,c))&&(ze=Bu(K,"onBeforeInput"),0<ze.length&&(Ke=new fx("onBeforeInput","beforeinput",null,c,ae),he.push({event:Ke,listeners:ze}),Ke.data=Pe)),$T(he,i,K,c,ae)}tb(he,o)})}function kl(i,o,c){return{instance:i,listener:o,currentTarget:c}}function Bu(i,o){for(var c=o+"Capture",m=[];i!==null;){var p=i,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Yo(i,c),p!=null&&m.unshift(kl(i,p,y)),p=Yo(i,o),p!=null&&m.push(kl(i,p,y))),i.tag===3)return m;i=i.return}return[]}function Ka(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function nb(i,o,c,m,p){for(var y=o._reactName,C=[];c!==null&&c!==m;){var k=c,P=k.alternate,K=k.stateNode;if(k=k.tag,P!==null&&P===m)break;k!==5&&k!==26&&k!==27||K===null||(P=K,p?(K=Yo(c,y),K!=null&&C.unshift(kl(c,K,P))):p||(K=Yo(c,y),K!=null&&C.push(kl(c,K,P)))),c=c.return}C.length!==0&&i.push({event:o,listeners:C})}var WT=/\r\n?/g,XT=/\u0000|\uFFFD/g;function rb(i){return(typeof i=="string"?i:""+i).replace(WT,`
`).replace(XT,"")}function ib(i,o){return o=rb(o),rb(i)===o}function Fu(){}function mt(i,o,c,m,p,y){switch(c){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||_a(i,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&_a(i,""+m);break;case"className":zt(i,"class",m);break;case"tabIndex":zt(i,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":zt(i,c,m);break;case"style":ox(i,m,y);break;case"data":if(o!=="object"){zt(i,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||c!=="href")){i.removeAttribute(c);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(c);break}m=Yc(""+m),i.setAttribute(c,m);break;case"action":case"formAction":if(typeof m=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(o!=="input"&&mt(i,o,"name",p.name,p,null),mt(i,o,"formEncType",p.formEncType,p,null),mt(i,o,"formMethod",p.formMethod,p,null),mt(i,o,"formTarget",p.formTarget,p,null)):(mt(i,o,"encType",p.encType,p,null),mt(i,o,"method",p.method,p,null),mt(i,o,"target",p.target,p,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(c);break}m=Yc(""+m),i.setAttribute(c,m);break;case"onClick":m!=null&&(i.onclick=Fu);break;case"onScroll":m!=null&&Je("scroll",i);break;case"onScrollEnd":m!=null&&Je("scrollend",i);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(s(61));if(c=m.__html,c!=null){if(p.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"multiple":i.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":i.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){i.removeAttribute("xlink:href");break}c=Yc(""+m),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(c,""+m):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":m===!0?i.setAttribute(c,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(c,m):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?i.setAttribute(c,m):i.removeAttribute(c);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?i.removeAttribute(c):i.setAttribute(c,m);break;case"popover":Je("beforetoggle",i),Je("toggle",i),Ut(i,"popover",m);break;case"xlinkActuate":nr(i,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":nr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":nr(i,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":nr(i,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":nr(i,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":nr(i,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":nr(i,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":nr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":nr(i,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Ut(i,"is",m);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=jj.get(c)||c,Ut(i,c,m))}}function Nm(i,o,c,m,p,y){switch(c){case"style":ox(i,m,y);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(s(61));if(c=m.__html,c!=null){if(p.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"children":typeof m=="string"?_a(i,m):(typeof m=="number"||typeof m=="bigint")&&_a(i,""+m);break;case"onScroll":m!=null&&Je("scroll",i);break;case"onScrollEnd":m!=null&&Je("scrollend",i);break;case"onClick":m!=null&&(i.onclick=Fu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qe.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(p=c.endsWith("Capture"),o=c.slice(2,p?c.length-7:void 0),y=i[nt]||null,y=y!=null?y[c]:null,typeof y=="function"&&i.removeEventListener(o,y,p),typeof m=="function")){typeof y!="function"&&y!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(o,m,p);break e}c in i?i[c]=m:m===!0?i.setAttribute(c,""):Ut(i,c,m)}}}function ms(i,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",i),Je("load",i);var m=!1,p=!1,y;for(y in c)if(c.hasOwnProperty(y)){var C=c[y];if(C!=null)switch(y){case"src":m=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:mt(i,o,y,C,c,null)}}p&&mt(i,o,"srcSet",c.srcSet,c,null),m&&mt(i,o,"src",c.src,c,null);return;case"input":Je("invalid",i);var k=y=C=p=null,P=null,K=null;for(m in c)if(c.hasOwnProperty(m)){var ae=c[m];if(ae!=null)switch(m){case"name":p=ae;break;case"type":C=ae;break;case"checked":P=ae;break;case"defaultChecked":K=ae;break;case"value":y=ae;break;case"defaultValue":k=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,o));break;default:mt(i,o,m,ae,c,null)}}nx(i,y,k,P,K,C,p,!1),$c(i);return;case"select":Je("invalid",i),m=C=y=null;for(p in c)if(c.hasOwnProperty(p)&&(k=c[p],k!=null))switch(p){case"value":y=k;break;case"defaultValue":C=k;break;case"multiple":m=k;default:mt(i,o,p,k,c,null)}o=y,c=C,i.multiple=!!m,o!=null?wa(i,!!m,o,!1):c!=null&&wa(i,!!m,c,!0);return;case"textarea":Je("invalid",i),y=p=m=null;for(C in c)if(c.hasOwnProperty(C)&&(k=c[C],k!=null))switch(C){case"value":m=k;break;case"defaultValue":p=k;break;case"children":y=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(91));break;default:mt(i,o,C,k,c,null)}ix(i,m,p,y),$c(i);return;case"option":for(P in c)if(c.hasOwnProperty(P)&&(m=c[P],m!=null))switch(P){case"selected":i.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:mt(i,o,P,m,c,null)}return;case"dialog":Je("beforetoggle",i),Je("toggle",i),Je("cancel",i),Je("close",i);break;case"iframe":case"object":Je("load",i);break;case"video":case"audio":for(m=0;m<El.length;m++)Je(El[m],i);break;case"image":Je("error",i),Je("load",i);break;case"details":Je("toggle",i);break;case"embed":case"source":case"link":Je("error",i),Je("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in c)if(c.hasOwnProperty(K)&&(m=c[K],m!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:mt(i,o,K,m,c,null)}return;default:if(Gh(o)){for(ae in c)c.hasOwnProperty(ae)&&(m=c[ae],m!==void 0&&Nm(i,o,ae,m,c,void 0));return}}for(k in c)c.hasOwnProperty(k)&&(m=c[k],m!=null&&mt(i,o,k,m,c,null))}function KT(i,o,c,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,C=null,k=null,P=null,K=null,ae=null;for(J in c){var he=c[J];if(c.hasOwnProperty(J)&&he!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":P=he;default:m.hasOwnProperty(J)||mt(i,o,J,null,m,he)}}for(var Z in m){var J=m[Z];if(he=c[Z],m.hasOwnProperty(Z)&&(J!=null||he!=null))switch(Z){case"type":y=J;break;case"name":p=J;break;case"checked":K=J;break;case"defaultChecked":ae=J;break;case"value":C=J;break;case"defaultValue":k=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,o));break;default:J!==he&&mt(i,o,Z,J,m,he)}}Hh(i,C,k,P,K,ae,y,p);return;case"select":J=C=k=Z=null;for(y in c)if(P=c[y],c.hasOwnProperty(y)&&P!=null)switch(y){case"value":break;case"multiple":J=P;default:m.hasOwnProperty(y)||mt(i,o,y,null,m,P)}for(p in m)if(y=m[p],P=c[p],m.hasOwnProperty(p)&&(y!=null||P!=null))switch(p){case"value":Z=y;break;case"defaultValue":k=y;break;case"multiple":C=y;default:y!==P&&mt(i,o,p,y,m,P)}o=k,c=C,m=J,Z!=null?wa(i,!!c,Z,!1):!!m!=!!c&&(o!=null?wa(i,!!c,o,!0):wa(i,!!c,c?[]:"",!1));return;case"textarea":J=Z=null;for(k in c)if(p=c[k],c.hasOwnProperty(k)&&p!=null&&!m.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:mt(i,o,k,null,m,p)}for(C in m)if(p=m[C],y=c[C],m.hasOwnProperty(C)&&(p!=null||y!=null))switch(C){case"value":Z=p;break;case"defaultValue":J=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==y&&mt(i,o,C,p,m,y)}rx(i,Z,J);return;case"option":for(var Ie in c)if(Z=c[Ie],c.hasOwnProperty(Ie)&&Z!=null&&!m.hasOwnProperty(Ie))switch(Ie){case"selected":i.selected=!1;break;default:mt(i,o,Ie,null,m,Z)}for(P in m)if(Z=m[P],J=c[P],m.hasOwnProperty(P)&&Z!==J&&(Z!=null||J!=null))switch(P){case"selected":i.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:mt(i,o,P,Z,m,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in c)Z=c[Ue],c.hasOwnProperty(Ue)&&Z!=null&&!m.hasOwnProperty(Ue)&&mt(i,o,Ue,null,m,Z);for(K in m)if(Z=m[K],J=c[K],m.hasOwnProperty(K)&&Z!==J&&(Z!=null||J!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,o));break;default:mt(i,o,K,Z,m,J)}return;default:if(Gh(o)){for(var gt in c)Z=c[gt],c.hasOwnProperty(gt)&&Z!==void 0&&!m.hasOwnProperty(gt)&&Nm(i,o,gt,void 0,m,Z);for(ae in m)Z=m[ae],J=c[ae],!m.hasOwnProperty(ae)||Z===J||Z===void 0&&J===void 0||Nm(i,o,ae,Z,m,J);return}}for(var G in c)Z=c[G],c.hasOwnProperty(G)&&Z!=null&&!m.hasOwnProperty(G)&&mt(i,o,G,null,m,Z);for(he in m)Z=m[he],J=c[he],!m.hasOwnProperty(he)||Z===J||Z==null&&J==null||mt(i,o,he,Z,m,J)}var Dm=null,Om=null;function Uu(i){return i.nodeType===9?i:i.ownerDocument}function ab(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ob(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Mm(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Rm=null;function QT(){var i=window.event;return i&&i.type==="popstate"?i===Rm?!1:(Rm=i,!0):(Rm=null,!1)}var lb=typeof setTimeout=="function"?setTimeout:void 0,ZT=typeof clearTimeout=="function"?clearTimeout:void 0,cb=typeof Promise=="function"?Promise:void 0,JT=typeof queueMicrotask=="function"?queueMicrotask:typeof cb<"u"?function(i){return cb.resolve(null).then(i).catch(eE)}:lb;function eE(i){setTimeout(function(){throw i})}function ai(i){return i==="head"}function ub(i,o){var c=o,m=0,p=0;do{var y=c.nextSibling;if(i.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(0<m&&8>m){c=m;var C=i.ownerDocument;if(c&1&&Al(C.documentElement),c&2&&Al(C.body),c&4)for(c=C.head,Al(c),C=c.firstChild;C;){var k=C.nextSibling,P=C.nodeName;C[ls]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&C.rel.toLowerCase()==="stylesheet"||c.removeChild(C),C=k}}if(p===0){i.removeChild(y),Bl(o);return}p--}else c==="$"||c==="$?"||c==="$!"?p++:m=c.charCodeAt(0)-48;else m=0;c=y}while(c);Bl(o)}function Pm(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Pm(c),Hr(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function tE(i,o,c,m){for(;i.nodeType===1;){var p=c;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(m){if(!i[ls])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=jn(i.nextSibling),i===null)break}return null}function sE(i,o,c){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=jn(i.nextSibling),i===null))return null;return i}function Lm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function nE(i,o){var c=i.ownerDocument;if(i.data!=="$?"||c.readyState==="complete")o();else{var m=function(){o(),c.removeEventListener("DOMContentLoaded",m)};c.addEventListener("DOMContentLoaded",m),i._reactRetry=m}}function jn(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return i}var Bm=null;function db(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return i;o--}else c==="/$"&&o++}i=i.previousSibling}return null}function hb(i,o,c){switch(o=Uu(c),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Al(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Hr(i)}var hn=new Map,fb=new Set;function zu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var xr=$.d;$.d={f:rE,r:iE,D:aE,C:oE,L:lE,m:cE,X:dE,S:uE,M:hE};function rE(){var i=xr.f(),o=Du();return i||o}function iE(i){var o=Gs(i);o!==null&&o.tag===5&&o.type==="form"?Mv(o):xr.r(i)}var Qa=typeof document>"u"?null:document;function mb(i,o,c){var m=Qa;if(m&&typeof o=="string"&&o){var p=rn(o);p='link[rel="'+i+'"][href="'+p+'"]',typeof c=="string"&&(p+='[crossorigin="'+c+'"]'),fb.has(p)||(fb.add(p),i={rel:i,crossOrigin:c,href:o},m.querySelector(p)===null&&(o=m.createElement("link"),ms(o,"link",i),kt(o),m.head.appendChild(o)))}}function aE(i){xr.D(i),mb("dns-prefetch",i,null)}function oE(i,o){xr.C(i,o),mb("preconnect",i,o)}function lE(i,o,c){xr.L(i,o,c);var m=Qa;if(m&&i&&o){var p='link[rel="preload"][as="'+rn(o)+'"]';o==="image"&&c&&c.imageSrcSet?(p+='[imagesrcset="'+rn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(p+='[imagesizes="'+rn(c.imageSizes)+'"]')):p+='[href="'+rn(i)+'"]';var y=p;switch(o){case"style":y=Za(i);break;case"script":y=Ja(i)}hn.has(y)||(i=g({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:i,as:o},c),hn.set(y,i),m.querySelector(p)!==null||o==="style"&&m.querySelector(Nl(y))||o==="script"&&m.querySelector(Dl(y))||(o=m.createElement("link"),ms(o,"link",i),kt(o),m.head.appendChild(o)))}}function cE(i,o){xr.m(i,o);var c=Qa;if(c&&i){var m=o&&typeof o.as=="string"?o.as:"script",p='link[rel="modulepreload"][as="'+rn(m)+'"][href="'+rn(i)+'"]',y=p;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Ja(i)}if(!hn.has(y)&&(i=g({rel:"modulepreload",href:i},o),hn.set(y,i),c.querySelector(p)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Dl(y)))return}m=c.createElement("link"),ms(m,"link",i),kt(m),c.head.appendChild(m)}}}function uE(i,o,c){xr.S(i,o,c);var m=Qa;if(m&&i){var p=zn(m).hoistableStyles,y=Za(i);o=o||"default";var C=p.get(y);if(!C){var k={loading:0,preload:null};if(C=m.querySelector(Nl(y)))k.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":o},c),(c=hn.get(y))&&Fm(i,c);var P=C=m.createElement("link");kt(P),ms(P,"link",i),P._p=new Promise(function(K,ae){P.onload=K,P.onerror=ae}),P.addEventListener("load",function(){k.loading|=1}),P.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Vu(C,o,m)}C={type:"stylesheet",instance:C,count:1,state:k},p.set(y,C)}}}function dE(i,o){xr.X(i,o);var c=Qa;if(c&&i){var m=zn(c).hoistableScripts,p=Ja(i),y=m.get(p);y||(y=c.querySelector(Dl(p)),y||(i=g({src:i,async:!0},o),(o=hn.get(p))&&Um(i,o),y=c.createElement("script"),kt(y),ms(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},m.set(p,y))}}function hE(i,o){xr.M(i,o);var c=Qa;if(c&&i){var m=zn(c).hoistableScripts,p=Ja(i),y=m.get(p);y||(y=c.querySelector(Dl(p)),y||(i=g({src:i,async:!0,type:"module"},o),(o=hn.get(p))&&Um(i,o),y=c.createElement("script"),kt(y),ms(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},m.set(p,y))}}function gb(i,o,c,m){var p=(p=xe.current)?zu(p):null;if(!p)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Za(c.href),c=zn(p).hoistableStyles,m=c.get(o),m||(m={type:"style",instance:null,count:0,state:null},c.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Za(c.href);var y=zn(p).hoistableStyles,C=y.get(i);if(C||(p=p.ownerDocument||p,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,C),(y=p.querySelector(Nl(i)))&&!y._p&&(C.instance=y,C.state.loading=5),hn.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},hn.set(i,c),y||fE(p,i,c,C.state))),o&&m===null)throw Error(s(528,""));return C}if(o&&m!==null)throw Error(s(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ja(c),c=zn(p).hoistableScripts,m=c.get(o),m||(m={type:"script",instance:null,count:0,state:null},c.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Za(i){return'href="'+rn(i)+'"'}function Nl(i){return'link[rel="stylesheet"]['+i+"]"}function pb(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function fE(i,o,c,m){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=i.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),ms(o,"link",c),kt(o),i.head.appendChild(o))}function Ja(i){return'[src="'+rn(i)+'"]'}function Dl(i){return"script[async]"+i}function xb(i,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var m=i.querySelector('style[data-href~="'+rn(c.href)+'"]');if(m)return o.instance=m,kt(m),m;var p=g({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return m=(i.ownerDocument||i).createElement("style"),kt(m),ms(m,"style",p),Vu(m,c.precedence,i),o.instance=m;case"stylesheet":p=Za(c.href);var y=i.querySelector(Nl(p));if(y)return o.state.loading|=4,o.instance=y,kt(y),y;m=pb(c),(p=hn.get(p))&&Fm(m,p),y=(i.ownerDocument||i).createElement("link"),kt(y);var C=y;return C._p=new Promise(function(k,P){C.onload=k,C.onerror=P}),ms(y,"link",m),o.state.loading|=4,Vu(y,c.precedence,i),o.instance=y;case"script":return y=Ja(c.src),(p=i.querySelector(Dl(y)))?(o.instance=p,kt(p),p):(m=c,(p=hn.get(y))&&(m=g({},c),Um(m,p)),i=i.ownerDocument||i,p=i.createElement("script"),kt(p),ms(p,"link",m),i.head.appendChild(p),o.instance=p);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,Vu(m,c.precedence,i));return o.instance}function Vu(i,o,c){for(var m=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=m.length?m[m.length-1]:null,y=p,C=0;C<m.length;C++){var k=m[C];if(k.dataset.precedence===o)y=k;else if(y!==p)break}y?y.parentNode.insertBefore(i,y.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(i,o.firstChild))}function Fm(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Um(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Iu=null;function vb(i,o,c){if(Iu===null){var m=new Map,p=Iu=new Map;p.set(c,m)}else p=Iu,m=p.get(c),m||(m=new Map,p.set(c,m));if(m.has(i))return m;for(m.set(i,null),c=c.getElementsByTagName(i),p=0;p<c.length;p++){var y=c[p];if(!(y[ls]||y[Fe]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var C=y.getAttribute(o)||"";C=i+C;var k=m.get(C);k?k.push(y):m.set(C,[y])}}return m}function yb(i,o,c){i=i.ownerDocument||i,i.head.insertBefore(c,o==="title"?i.querySelector("head > title"):null)}function mE(i,o,c){if(c===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function bb(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Ol=null;function gE(){}function pE(i,o,c){if(Ol===null)throw Error(s(475));var m=Ol;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=Za(c.href),y=i.querySelector(Nl(p));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(m.count++,m=Hu.bind(m),i.then(m,m)),o.state.loading|=4,o.instance=y,kt(y);return}y=i.ownerDocument||i,c=pb(c),(p=hn.get(p))&&Fm(c,p),y=y.createElement("link"),kt(y);var C=y;C._p=new Promise(function(k,P){C.onload=k,C.onerror=P}),ms(y,"link",c),o.instance=y}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(m.count++,o=Hu.bind(m),i.addEventListener("load",o),i.addEventListener("error",o))}}function xE(){if(Ol===null)throw Error(s(475));var i=Ol;return i.stylesheets&&i.count===0&&zm(i,i.stylesheets),0<i.count?function(o){var c=setTimeout(function(){if(i.stylesheets&&zm(i,i.stylesheets),i.unsuspend){var m=i.unsuspend;i.unsuspend=null,m()}},6e4);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(c)}}:null}function Hu(){if(this.count--,this.count===0){if(this.stylesheets)zm(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var $u=null;function zm(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,$u=new Map,o.forEach(vE,i),$u=null,Hu.call(i))}function vE(i,o){if(!(o.state.loading&4)){var c=$u.get(i);if(c)var m=c.get(null);else{c=new Map,$u.set(i,c);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var C=p[y];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(c.set(C.dataset.precedence,C),m=C)}m&&c.set(null,m)}p=o.instance,C=p.getAttribute("data-precedence"),y=c.get(C)||m,y===m&&c.set(null,p),c.set(C,p),this.count++,m=Hu.bind(this),p.addEventListener("load",m),p.addEventListener("error",m),y?y.parentNode.insertBefore(p,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),o.state.loading|=4}}var Ml={$$typeof:E,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function yE(i,o,c,m,p,y,C,k){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Di(0),this.hiddenUpdates=Di(null),this.identifierPrefix=m,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function wb(i,o,c,m,p,y,C,k,P,K,ae,he){return i=new yE(i,o,c,C,k,P,K,he),o=1,y===!0&&(o|=24),y=qs(3,null,null,o),i.current=y,y.stateNode=i,o=wf(),o.refCount++,i.pooledCache=o,o.refCount++,y.memoizedState={element:m,isDehydrated:c,cache:o},jf(y),i}function _b(i){return i?(i=Na,i):Na}function Sb(i,o,c,m,p,y){p=_b(p),m.context===null?m.context=p:m.pendingContext=p,m=qr(o),m.payload={element:c},y=y===void 0?null:y,y!==null&&(m.callback=y),c=Wr(i,m,o),c!==null&&(Zs(c,i,o),cl(c,i,o))}function Cb(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function Vm(i,o){Cb(i,o),(i=i.alternate)&&Cb(i,o)}function jb(i){if(i.tag===13){var o=Aa(i,67108864);o!==null&&Zs(o,i,67108864),Vm(i,67108864)}}var Gu=!0;function bE(i,o,c,m){var p=R.T;R.T=null;var y=$.p;try{$.p=2,Im(i,o,c,m)}finally{$.p=y,R.T=p}}function wE(i,o,c,m){var p=R.T;R.T=null;var y=$.p;try{$.p=8,Im(i,o,c,m)}finally{$.p=y,R.T=p}}function Im(i,o,c,m){if(Gu){var p=Hm(m);if(p===null)Am(i,o,m,Yu,c),Eb(i,m);else if(SE(p,i,o,c,m))m.stopPropagation();else if(Eb(i,m),o&4&&-1<_E.indexOf(i)){for(;p!==null;){var y=Gs(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var C=sr(y.pendingLanes);if(C!==0){var k=y;for(k.pendingLanes|=2,k.entangledLanes|=2;C;){var P=1<<31-le(C);k.entanglements[1]|=P,C&=~P}Yn(y),(ct&6)===0&&(Au=Se()+500,Tl(0))}}break;case 13:k=Aa(y,2),k!==null&&Zs(k,y,2),Du(),Vm(y,2)}if(y=Hm(m),y===null&&Am(i,o,m,Yu,c),y===p)break;p=y}p!==null&&m.stopPropagation()}else Am(i,o,m,null,c)}}function Hm(i){return i=qh(i),$m(i)}var Yu=null;function $m(i){if(Yu=null,i=wn(i),i!==null){var o=a(i);if(o===null)i=null;else{var c=o.tag;if(c===13){if(i=l(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Yu=i,null}function Tb(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(it()){case Gt:return 2;case Zt:return 8;case Jt:case bn:return 32;case Hs:return 268435456;default:return 32}default:return 32}}var Gm=!1,oi=null,li=null,ci=null,Rl=new Map,Pl=new Map,ui=[],_E="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Eb(i,o){switch(i){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":ci=null;break;case"pointerover":case"pointerout":Rl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pl.delete(o.pointerId)}}function Ll(i,o,c,m,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:c,eventSystemFlags:m,nativeEvent:y,targetContainers:[p]},o!==null&&(o=Gs(o),o!==null&&jb(o)),i):(i.eventSystemFlags|=m,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function SE(i,o,c,m,p){switch(o){case"focusin":return oi=Ll(oi,i,o,c,m,p),!0;case"dragenter":return li=Ll(li,i,o,c,m,p),!0;case"mouseover":return ci=Ll(ci,i,o,c,m,p),!0;case"pointerover":var y=p.pointerId;return Rl.set(y,Ll(Rl.get(y)||null,i,o,c,m,p)),!0;case"gotpointercapture":return y=p.pointerId,Pl.set(y,Ll(Pl.get(y)||null,i,o,c,m,p)),!0}return!1}function kb(i){var o=wn(i.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){i.blockedOn=o,Re(i.priority,function(){if(c.tag===13){var m=Qs();m=ge(m);var p=Aa(c,m);p!==null&&Zs(p,c,m),Vm(c,m)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function qu(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=Hm(i.nativeEvent);if(c===null){c=i.nativeEvent;var m=new c.constructor(c.type,c);Yh=m,c.target.dispatchEvent(m),Yh=null}else return o=Gs(c),o!==null&&jb(o),i.blockedOn=c,!1;o.shift()}return!0}function Ab(i,o,c){qu(i)&&c.delete(o)}function CE(){Gm=!1,oi!==null&&qu(oi)&&(oi=null),li!==null&&qu(li)&&(li=null),ci!==null&&qu(ci)&&(ci=null),Rl.forEach(Ab),Pl.forEach(Ab)}function Wu(i,o){i.blockedOn===o&&(i.blockedOn=null,Gm||(Gm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,CE)))}var Xu=null;function Nb(i){Xu!==i&&(Xu=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Xu===i&&(Xu=null);for(var o=0;o<i.length;o+=3){var c=i[o],m=i[o+1],p=i[o+2];if(typeof m!="function"){if($m(m||c)===null)continue;break}var y=Gs(c);y!==null&&(i.splice(o,3),o-=3,$f(y,{pending:!0,data:p,method:c.method,action:m},m,p))}}))}function Bl(i){function o(P){return Wu(P,i)}oi!==null&&Wu(oi,i),li!==null&&Wu(li,i),ci!==null&&Wu(ci,i),Rl.forEach(o),Pl.forEach(o);for(var c=0;c<ui.length;c++){var m=ui[c];m.blockedOn===i&&(m.blockedOn=null)}for(;0<ui.length&&(c=ui[0],c.blockedOn===null);)kb(c),c.blockedOn===null&&ui.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(m=0;m<c.length;m+=3){var p=c[m],y=c[m+1],C=p[nt]||null;if(typeof y=="function")C||Nb(c);else if(C){var k=null;if(y&&y.hasAttribute("formAction")){if(p=y,C=y[nt]||null)k=C.formAction;else if($m(p)!==null)continue}else k=C.action;typeof k=="function"?c[m+1]=k:(c.splice(m,3),m-=3),Nb(c)}}}function Ym(i){this._internalRoot=i}Ku.prototype.render=Ym.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var c=o.current,m=Qs();Sb(c,m,i,o,null,null)},Ku.prototype.unmount=Ym.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Sb(i.current,2,null,i,null,null),Du(),o[Ct]=null}};function Ku(i){this._internalRoot=i}Ku.prototype.unstable_scheduleHydration=function(i){if(i){var o=Ne();i={blockedOn:null,target:i,priority:o};for(var c=0;c<ui.length&&o!==0&&o<ui[c].priority;c++);ui.splice(c,0,i),c===0&&kb(i)}};var Db=e.version;if(Db!=="19.1.0")throw Error(s(527,Db,"19.1.0"));$.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=h(o),i=i!==null?f(i):null,i=i===null?null:i.stateNode,i};var jE={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qu.isDisabled&&Qu.supportsFiber)try{Me=Qu.inject(jE),ye=Qu}catch{}}return Ul.createRoot=function(i,o){if(!r(i))throw Error(s(299));var c=!1,m="",p=qv,y=Wv,C=Xv,k=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(k=o.unstable_transitionCallbacks)),o=wb(i,1,!1,null,null,c,m,p,y,C,k,null),i[Ct]=o.current,km(i),new Ym(o)},Ul.hydrateRoot=function(i,o,c){if(!r(i))throw Error(s(299));var m=!1,p="",y=qv,C=Wv,k=Xv,P=null,K=null;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(k=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(P=c.unstable_transitionCallbacks),c.formState!==void 0&&(K=c.formState)),o=wb(i,1,!0,o,c??null,m,p,y,C,k,P,K),o.context=_b(null),c=o.current,m=Qs(),m=ge(m),p=qr(m),p.callback=null,Wr(c,p,m),c=m,o.current.lanes=c,Oi(o,c),Yn(o),i[Ct]=o.current,km(i),new Ku(o)},Ul.version="19.1.0",Ul}var Vb;function LE(){if(Vb)return Wm.exports;Vb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wm.exports=PE(),Wm.exports}var BE=LE();const FE=Pp(BE);var j=Lp();const Wt=Pp(j);var zl={},Ib;function UE(){if(Ib)return zl;Ib=1,Object.defineProperty(zl,"__esModule",{value:!0}),zl.parse=l,zl.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,a=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function l(v,b){const w=new a,_=v.length;if(_<2)return w;const T=b?.decode||g;let S=0;do{const A=v.indexOf("=",S);if(A===-1)break;const E=v.indexOf(";",S),M=E===-1?_:E;if(A>M){S=v.lastIndexOf(";",A-1)+1;continue}const D=u(v,S,A),B=h(v,A,D),F=v.slice(D,B);if(w[F]===void 0){let L=u(v,A+1,M),V=h(v,M,L);const N=T(v.slice(L,V));w[F]=N}S=M+1}while(S<_);return w}function u(v,b,w){do{const _=v.charCodeAt(b);if(_!==32&&_!==9)return b}while(++b<w);return w}function h(v,b,w){for(;b>w;){const _=v.charCodeAt(--b);if(_!==32&&_!==9)return b+1}return w}function f(v,b,w){const _=w?.encode||encodeURIComponent;if(!n.test(v))throw new TypeError(`argument name is invalid: ${v}`);const T=_(b);if(!e.test(T))throw new TypeError(`argument val is invalid: ${b}`);let S=v+"="+T;if(!w)return S;if(w.maxAge!==void 0){if(!Number.isInteger(w.maxAge))throw new TypeError(`option maxAge is invalid: ${w.maxAge}`);S+="; Max-Age="+w.maxAge}if(w.domain){if(!t.test(w.domain))throw new TypeError(`option domain is invalid: ${w.domain}`);S+="; Domain="+w.domain}if(w.path){if(!s.test(w.path))throw new TypeError(`option path is invalid: ${w.path}`);S+="; Path="+w.path}if(w.expires){if(!x(w.expires)||!Number.isFinite(w.expires.valueOf()))throw new TypeError(`option expires is invalid: ${w.expires}`);S+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(S+="; HttpOnly"),w.secure&&(S+="; Secure"),w.partitioned&&(S+="; Partitioned"),w.priority)switch(typeof w.priority=="string"?w.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${w.priority}`)}if(w.sameSite)switch(typeof w.sameSite=="string"?w.sameSite.toLowerCase():w.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${w.sameSite}`)}return S}function g(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function x(v){return r.call(v)==="[object Date]"}return zl}UE();var Hb="popstate";function zE(n={}){function e(s,r){let{pathname:a,search:l,hash:u}=s.location;return Ig("",{pathname:a,search:l,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(s,r){return typeof r=="string"?r:fc(r)}return IE(e,t,null,n)}function _t(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ln(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VE(){return Math.random().toString(36).substring(2,10)}function $b(n,e){return{usr:n.state,key:n.key,idx:e}}function Ig(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?No(e):e,state:t,key:e&&e.key||s||VE()}}function fc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function No(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function IE(n,e,t,s={}){let{window:r=document.defaultView,v5Compat:a=!1}=s,l=r.history,u="POP",h=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function x(){u="POP";let T=g(),S=T==null?null:T-f;f=T,h&&h({action:u,location:_.location,delta:S})}function v(T,S){u="PUSH";let A=Ig(_.location,T,S);f=g()+1;let E=$b(A,f),M=_.createHref(A);try{l.pushState(E,"",M)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(M)}a&&h&&h({action:u,location:_.location,delta:1})}function b(T,S){u="REPLACE";let A=Ig(_.location,T,S);f=g();let E=$b(A,f),M=_.createHref(A);l.replaceState(E,"",M),a&&h&&h({action:u,location:_.location,delta:0})}function w(T){return HE(T)}let _={get action(){return u},get location(){return n(r,l)},listen(T){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(Hb,x),h=T,()=>{r.removeEventListener(Hb,x),h=null}},createHref(T){return e(r,T)},createURL:w,encodeLocation(T){let S=w(T);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:v,replace:b,go(T){return l.go(T)}};return _}function HE(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),_t(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:fc(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function R2(n,e,t="/"){return $E(n,e,t,!1)}function $E(n,e,t,s){let r=typeof e=="string"?No(e):e,a=Dr(r.pathname||"/",t);if(a==null)return null;let l=P2(n);GE(l);let u=null;for(let h=0;u==null&&h<l.length;++h){let f=sk(a);u=ek(l[h],f,s)}return u}function P2(n,e=[],t=[],s=""){let r=(a,l,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};h.relativePath.startsWith("/")&&(_t(h.relativePath.startsWith(s),`Absolute route path "${h.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(s.length));let f=kr([s,h.relativePath]),g=t.concat(h);a.children&&a.children.length>0&&(_t(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),P2(a.children,e,g,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:ZE(f,a.index),routesMeta:g})};return n.forEach((a,l)=>{if(a.path===""||!a.path?.includes("?"))r(a,l);else for(let u of L2(a.path))r(a,l,u)}),e}function L2(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,r=t.endsWith("?"),a=t.replace(/\?$/,"");if(s.length===0)return r?[a,""]:[a];let l=L2(s.join("/")),u=[];return u.push(...l.map(h=>h===""?a:[a,h].join("/"))),r&&u.push(...l),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function GE(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:JE(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var YE=/^:[\w-]+$/,qE=3,WE=2,XE=1,KE=10,QE=-2,Gb=n=>n==="*";function ZE(n,e){let t=n.split("/"),s=t.length;return t.some(Gb)&&(s+=QE),e&&(s+=WE),t.filter(r=>!Gb(r)).reduce((r,a)=>r+(YE.test(a)?qE:a===""?XE:KE),s)}function JE(n,e){return n.length===e.length&&n.slice(0,-1).every((s,r)=>s===e[r])?n[n.length-1]-e[e.length-1]:0}function ek(n,e,t=!1){let{routesMeta:s}=n,r={},a="/",l=[];for(let u=0;u<s.length;++u){let h=s[u],f=u===s.length-1,g=a==="/"?e:e.slice(a.length)||"/",x=Kd({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),v=h.route;if(!x&&f&&t&&!s[s.length-1].route.index&&(x=Kd({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!x)return null;Object.assign(r,x.params),l.push({params:r,pathname:kr([a,x.pathname]),pathnameBase:ak(kr([a,x.pathnameBase])),route:v}),x.pathnameBase!=="/"&&(a=kr([a,x.pathnameBase]))}return l}function Kd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=tk(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let a=r[0],l=a.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:s.reduce((f,{paramName:g,isOptional:x},v)=>{if(g==="*"){let w=u[v]||"";l=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const b=u[v];return x&&!b?f[g]=void 0:f[g]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:l,pattern:n}}function tk(n,e=!1,t=!0){Ln(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,h)=>(s.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function sk(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ln(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Dr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function nk(n,e="/"){let{pathname:t,search:s="",hash:r=""}=typeof n=="string"?No(n):n;return{pathname:t?t.startsWith("/")?t:rk(t,e):e,search:ok(s),hash:lk(r)}}function rk(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Jm(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ik(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Bp(n){let e=ik(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function Fp(n,e,t,s=!1){let r;typeof n=="string"?r=No(n):(r={...n},_t(!r.pathname||!r.pathname.includes("?"),Jm("?","pathname","search",r)),_t(!r.pathname||!r.pathname.includes("#"),Jm("#","pathname","hash",r)),_t(!r.search||!r.search.includes("#"),Jm("#","search","hash",r)));let a=n===""||r.pathname==="",l=a?"/":r.pathname,u;if(l==null)u=t;else{let x=e.length-1;if(!s&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),x-=1;r.pathname=v.join("/")}u=x>=0?e[x]:"/"}let h=nk(r,u),f=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}var kr=n=>n.join("/").replace(/\/\/+/g,"/"),ak=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ok=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,lk=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function ck(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var B2=["POST","PUT","PATCH","DELETE"];new Set(B2);var uk=["GET",...B2];new Set(uk);var Do=j.createContext(null);Do.displayName="DataRouter";var bh=j.createContext(null);bh.displayName="DataRouterState";var F2=j.createContext({isTransitioning:!1});F2.displayName="ViewTransition";var dk=j.createContext(new Map);dk.displayName="Fetchers";var hk=j.createContext(null);hk.displayName="Await";var Bn=j.createContext(null);Bn.displayName="Navigation";var kc=j.createContext(null);kc.displayName="Location";var Fn=j.createContext({outlet:null,matches:[],isDataRoute:!1});Fn.displayName="Route";var Up=j.createContext(null);Up.displayName="RouteError";function fk(n,{relative:e}={}){_t(Oo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=j.useContext(Bn),{hash:r,pathname:a,search:l}=Ac(n,{relative:e}),u=a;return t!=="/"&&(u=a==="/"?t:kr([t,a])),s.createHref({pathname:u,search:l,hash:r})}function Oo(){return j.useContext(kc)!=null}function tn(){return _t(Oo(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(kc).location}var U2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function z2(n){j.useContext(Bn).static||j.useLayoutEffect(n)}function Ci(){let{isDataRoute:n}=j.useContext(Fn);return n?kk():mk()}function mk(){_t(Oo(),"useNavigate() may be used only in the context of a <Router> component.");let n=j.useContext(Do),{basename:e,navigator:t}=j.useContext(Bn),{matches:s}=j.useContext(Fn),{pathname:r}=tn(),a=JSON.stringify(Bp(s)),l=j.useRef(!1);return z2(()=>{l.current=!0}),j.useCallback((h,f={})=>{if(Ln(l.current,U2),!l.current)return;if(typeof h=="number"){t.go(h);return}let g=Fp(h,JSON.parse(a),r,f.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:kr([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,a,r,n])}var gk=j.createContext(null);function pk(n){let e=j.useContext(Fn).outlet;return e&&j.createElement(gk.Provider,{value:n},e)}function Ac(n,{relative:e}={}){let{matches:t}=j.useContext(Fn),{pathname:s}=tn(),r=JSON.stringify(Bp(t));return j.useMemo(()=>Fp(n,JSON.parse(r),s,e==="path"),[n,r,s,e])}function xk(n,e){return V2(n,e)}function V2(n,e,t,s){_t(Oo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=j.useContext(Bn),{matches:a}=j.useContext(Fn),l=a[a.length-1],u=l?l.params:{},h=l?l.pathname:"/",f=l?l.pathnameBase:"/",g=l&&l.route;{let S=g&&g.path||"";I2(h,!g||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let x=tn(),v;if(e){let S=typeof e=="string"?No(e):e;_t(f==="/"||S.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${S.pathname}" was given in the \`location\` prop.`),v=S}else v=x;let b=v.pathname||"/",w=b;if(f!=="/"){let S=f.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(S.length).join("/")}let _=R2(n,{pathname:w});Ln(g||_!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Ln(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=_k(_&&_.map(S=>Object.assign({},S,{params:Object.assign({},u,S.params),pathname:kr([f,r.encodeLocation?r.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?f:kr([f,r.encodeLocation?r.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,t,s);return e&&T?j.createElement(kc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},T):T}function vk(){let n=Ek(),e=ck(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=j.createElement(j.Fragment,null,j.createElement("p",null,"💿 Hey developer 👋"),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:a},"ErrorBoundary")," or"," ",j.createElement("code",{style:a},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:r},t):null,l)}var yk=j.createElement(vk,null),bk=class extends j.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?j.createElement(Fn.Provider,{value:this.props.routeContext},j.createElement(Up.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function wk({routeContext:n,match:e,children:t}){let s=j.useContext(Do);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Fn.Provider,{value:n},t)}function _k(n,e=[],t=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let r=n,a=t?.errors;if(a!=null){let h=r.findIndex(f=>f.route.id&&a?.[f.route.id]!==void 0);_t(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,h+1))}let l=!1,u=-1;if(t)for(let h=0;h<r.length;h++){let f=r[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:g,errors:x}=t,v=f.route.loader&&!g.hasOwnProperty(f.route.id)&&(!x||x[f.route.id]===void 0);if(f.route.lazy||v){l=!0,u>=0?r=r.slice(0,u+1):r=[r[0]];break}}}return r.reduceRight((h,f,g)=>{let x,v=!1,b=null,w=null;t&&(x=a&&f.route.id?a[f.route.id]:void 0,b=f.route.errorElement||yk,l&&(u<0&&g===0?(I2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,w=null):u===g&&(v=!0,w=f.route.hydrateFallbackElement||null)));let _=e.concat(r.slice(0,g+1)),T=()=>{let S;return x?S=b:v?S=w:f.route.Component?S=j.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=h,j.createElement(wk,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:t!=null},children:S})};return t&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?j.createElement(bk,{location:t.location,revalidation:t.revalidation,component:b,error:x,children:T(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):T()},null)}function zp(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sk(n){let e=j.useContext(Do);return _t(e,zp(n)),e}function Ck(n){let e=j.useContext(bh);return _t(e,zp(n)),e}function jk(n){let e=j.useContext(Fn);return _t(e,zp(n)),e}function Vp(n){let e=jk(n),t=e.matches[e.matches.length-1];return _t(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Tk(){return Vp("useRouteId")}function Ek(){let n=j.useContext(Up),e=Ck("useRouteError"),t=Vp("useRouteError");return n!==void 0?n:e.errors?.[t]}function kk(){let{router:n}=Sk("useNavigate"),e=Vp("useNavigate"),t=j.useRef(!1);return z2(()=>{t.current=!0}),j.useCallback(async(r,a={})=>{Ln(t.current,U2),t.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:e,...a}))},[n,e])}var Yb={};function I2(n,e,t){!e&&!Yb[n]&&(Yb[n]=!0,Ln(!1,t))}j.memo(Ak);function Ak({routes:n,future:e,state:t}){return V2(n,void 0,t,e)}function qb({to:n,replace:e,state:t,relative:s}){_t(Oo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=j.useContext(Bn);Ln(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=j.useContext(Fn),{pathname:l}=tn(),u=Ci(),h=Fp(n,Bp(a),l,s==="path"),f=JSON.stringify(h);return j.useEffect(()=>{u(JSON.parse(f),{replace:e,state:t,relative:s})},[u,f,s,e,t]),null}function Nk(n){return pk(n.context)}function rs(n){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Dk({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:r,static:a=!1}){_t(!Oo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:l,navigator:r,static:a,future:{}}),[l,r,a]);typeof t=="string"&&(t=No(t));let{pathname:h="/",search:f="",hash:g="",state:x=null,key:v="default"}=t,b=j.useMemo(()=>{let w=Dr(h,l);return w==null?null:{location:{pathname:w,search:f,hash:g,state:x,key:v},navigationType:s}},[l,h,f,g,x,v,s]);return Ln(b!=null,`<Router basename="${l}"> is not able to match the URL "${h}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:j.createElement(Bn.Provider,{value:u},j.createElement(kc.Provider,{children:e,value:b}))}function Ok({children:n,location:e}){return xk(Hg(n),e)}function Hg(n,e=[]){let t=[];return j.Children.forEach(n,(s,r)=>{if(!j.isValidElement(s))return;let a=[...e,r];if(s.type===j.Fragment){t.push.apply(t,Hg(s.props.children,a));return}_t(s.type===rs,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_t(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=Hg(s.props.children,a)),t.push(l)}),t}var Bd="get",Fd="application/x-www-form-urlencoded";function wh(n){return n!=null&&typeof n.tagName=="string"}function Mk(n){return wh(n)&&n.tagName.toLowerCase()==="button"}function Rk(n){return wh(n)&&n.tagName.toLowerCase()==="form"}function Pk(n){return wh(n)&&n.tagName.toLowerCase()==="input"}function Lk(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Bk(n,e){return n.button===0&&(!e||e==="_self")&&!Lk(n)}var Zu=null;function Fk(){if(Zu===null)try{new FormData(document.createElement("form"),0),Zu=!1}catch{Zu=!0}return Zu}var Uk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function eg(n){return n!=null&&!Uk.has(n)?(Ln(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fd}"`),null):n}function zk(n,e){let t,s,r,a,l;if(Rk(n)){let u=n.getAttribute("action");s=u?Dr(u,e):null,t=n.getAttribute("method")||Bd,r=eg(n.getAttribute("enctype"))||Fd,a=new FormData(n)}else if(Mk(n)||Pk(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||u.getAttribute("action");if(s=h?Dr(h,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||Bd,r=eg(n.getAttribute("formenctype"))||eg(u.getAttribute("enctype"))||Fd,a=new FormData(u,n),!Fk()){let{name:f,type:g,value:x}=n;if(g==="image"){let v=f?`${f}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else f&&a.append(f,x)}}else{if(wh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Bd,s=null,r=Fd,l=n}return a&&r==="text/plain"&&(l=a,a=void 0),{action:s,method:t.toLowerCase(),encType:r,formData:a,body:l}}function Ip(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function Vk(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ik(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Hk(n,e,t){let s=await Promise.all(n.map(async r=>{let a=e.routes[r.route.id];if(a){let l=await Vk(a,t);return l.links?l.links():[]}return[]}));return qk(s.flat(1).filter(Ik).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function Wb(n,e,t,s,r,a){let l=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,u=(h,f)=>t[f].pathname!==h.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==h.params["*"];return a==="assets"?e.filter((h,f)=>l(h,f)||u(h,f)):a==="data"?e.filter((h,f)=>{let g=s.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(l(h,f)||u(h,f))return!0;if(h.route.shouldRevalidate){let x=h.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function $k(n,e,{includeHydrateFallback:t}={}){return Gk(n.map(s=>{let r=e.routes[s.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function Gk(n){return[...new Set(n)]}function Yk(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function qk(n,e){let t=new Set;return new Set(e),n.reduce((s,r)=>{let a=JSON.stringify(Yk(r));return t.has(a)||(t.add(a),s.push({key:a,link:r})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Wk=new Set([100,101,204,205]);function Xk(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Dr(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function H2(){let n=j.useContext(Do);return Ip(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Kk(){let n=j.useContext(bh);return Ip(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Hp=j.createContext(void 0);Hp.displayName="FrameworkContext";function $2(){let n=j.useContext(Hp);return Ip(n,"You must render this element inside a <HydratedRouter> element"),n}function Qk(n,e){let t=j.useContext(Hp),[s,r]=j.useState(!1),[a,l]=j.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:f,onMouseLeave:g,onTouchStart:x}=e,v=j.useRef(null);j.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let _=S=>{S.forEach(A=>{l(A.isIntersecting)})},T=new IntersectionObserver(_,{threshold:.5});return v.current&&T.observe(v.current),()=>{T.disconnect()}}},[n]),j.useEffect(()=>{if(s){let _=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(_)}}},[s]);let b=()=>{r(!0)},w=()=>{r(!1),l(!1)};return t?n!=="intent"?[a,v,{}]:[a,v,{onFocus:Vl(u,b),onBlur:Vl(h,w),onMouseEnter:Vl(f,b),onMouseLeave:Vl(g,w),onTouchStart:Vl(x,b)}]:[!1,v,{}]}function Vl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Zk({page:n,...e}){let{router:t}=H2(),s=j.useMemo(()=>R2(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?j.createElement(eA,{page:n,matches:s,...e}):null}function Jk(n){let{manifest:e,routeModules:t}=$2(),[s,r]=j.useState([]);return j.useEffect(()=>{let a=!1;return Hk(n,e,t).then(l=>{a||r(l)}),()=>{a=!0}},[n,e,t]),s}function eA({page:n,matches:e,...t}){let s=tn(),{manifest:r,routeModules:a}=$2(),{basename:l}=H2(),{loaderData:u,matches:h}=Kk(),f=j.useMemo(()=>Wb(n,e,h,r,s,"data"),[n,e,h,r,s]),g=j.useMemo(()=>Wb(n,e,h,r,s,"assets"),[n,e,h,r,s]),x=j.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let w=new Set,_=!1;if(e.forEach(S=>{let A=r.routes[S.route.id];!A||!A.hasLoader||(!f.some(E=>E.route.id===S.route.id)&&S.route.id in u&&a[S.route.id]?.shouldRevalidate||A.hasClientLoader?_=!0:w.add(S.route.id))}),w.size===0)return[];let T=Xk(n,l);return _&&w.size>0&&T.searchParams.set("_routes",e.filter(S=>w.has(S.route.id)).map(S=>S.route.id).join(",")),[T.pathname+T.search]},[l,u,s,r,f,e,n,a]),v=j.useMemo(()=>$k(g,r),[g,r]),b=Jk(g);return j.createElement(j.Fragment,null,x.map(w=>j.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),v.map(w=>j.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),b.map(({key:w,link:_})=>j.createElement("link",{key:w,..._})))}function tA(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var G2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{G2&&(window.__reactRouterVersion="7.6.3")}catch{}function sA({basename:n,children:e,window:t}){let s=j.useRef();s.current==null&&(s.current=zE({window:t,v5Compat:!0}));let r=s.current,[a,l]=j.useState({action:r.action,location:r.location}),u=j.useCallback(h=>{j.startTransition(()=>l(h))},[l]);return j.useLayoutEffect(()=>r.listen(u),[r,u]),j.createElement(Dk,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:r})}var Y2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xt=j.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:r,reloadDocument:a,replace:l,state:u,target:h,to:f,preventScrollReset:g,viewTransition:x,...v},b){let{basename:w}=j.useContext(Bn),_=typeof f=="string"&&Y2.test(f),T,S=!1;if(typeof f=="string"&&_&&(T=f,G2))try{let V=new URL(window.location.href),N=f.startsWith("//")?new URL(V.protocol+f):new URL(f),H=Dr(N.pathname,w);N.origin===V.origin&&H!=null?f=H+N.search+N.hash:S=!0}catch{Ln(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=fk(f,{relative:r}),[E,M,D]=Qk(s,v),B=aA(f,{replace:l,state:u,target:h,preventScrollReset:g,relative:r,viewTransition:x});function F(V){e&&e(V),V.defaultPrevented||B(V)}let L=j.createElement("a",{...v,...D,href:T||A,onClick:S||a?e:F,ref:tA(b,M),target:h,"data-discover":!_&&t==="render"?"true":void 0});return E&&!_?j.createElement(j.Fragment,null,L,j.createElement(Zk,{page:A})):L});Xt.displayName="Link";var nA=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:r=!1,style:a,to:l,viewTransition:u,children:h,...f},g){let x=Ac(l,{relative:f.relative}),v=tn(),b=j.useContext(bh),{navigator:w,basename:_}=j.useContext(Bn),T=b!=null&&dA(x)&&u===!0,S=w.encodeLocation?w.encodeLocation(x).pathname:x.pathname,A=v.pathname,E=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(A=A.toLowerCase(),E=E?E.toLowerCase():null,S=S.toLowerCase()),E&&_&&(E=Dr(E,_)||E);const M=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let D=A===S||!r&&A.startsWith(S)&&A.charAt(M)==="/",B=E!=null&&(E===S||!r&&E.startsWith(S)&&E.charAt(S.length)==="/"),F={isActive:D,isPending:B,isTransitioning:T},L=D?e:void 0,V;typeof s=="function"?V=s(F):V=[s,D?"active":null,B?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(F):a;return j.createElement(Xt,{...f,"aria-current":L,className:V,ref:g,style:N,to:l,viewTransition:u},typeof h=="function"?h(F):h)});nA.displayName="NavLink";var rA=j.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:r,state:a,method:l=Bd,action:u,onSubmit:h,relative:f,preventScrollReset:g,viewTransition:x,...v},b)=>{let w=cA(),_=uA(u,{relative:f}),T=l.toLowerCase()==="get"?"get":"post",S=typeof u=="string"&&Y2.test(u),A=E=>{if(h&&h(E),E.defaultPrevented)return;E.preventDefault();let M=E.nativeEvent.submitter,D=M?.getAttribute("formmethod")||l;w(M||E.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:r,state:a,relative:f,preventScrollReset:g,viewTransition:x})};return j.createElement("form",{ref:b,method:T,action:_,onSubmit:s?h:A,...v,"data-discover":!S&&n==="render"?"true":void 0})});rA.displayName="Form";function iA(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function q2(n){let e=j.useContext(Do);return _t(e,iA(n)),e}function aA(n,{target:e,replace:t,state:s,preventScrollReset:r,relative:a,viewTransition:l}={}){let u=Ci(),h=tn(),f=Ac(n,{relative:a});return j.useCallback(g=>{if(Bk(g,e)){g.preventDefault();let x=t!==void 0?t:fc(h)===fc(f);u(n,{replace:x,state:s,preventScrollReset:r,relative:a,viewTransition:l})}},[h,u,f,t,s,e,n,r,a,l])}var oA=0,lA=()=>`__${String(++oA)}__`;function cA(){let{router:n}=q2("useSubmit"),{basename:e}=j.useContext(Bn),t=Tk();return j.useCallback(async(s,r={})=>{let{action:a,method:l,encType:u,formData:h,body:f}=zk(s,e);if(r.navigate===!1){let g=r.fetcherKey||lA();await n.fetch(g,t,r.action||a,{preventScrollReset:r.preventScrollReset,formData:h,body:f,formMethod:r.method||l,formEncType:r.encType||u,flushSync:r.flushSync})}else await n.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:h,body:f,formMethod:r.method||l,formEncType:r.encType||u,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,e,t])}function uA(n,{relative:e}={}){let{basename:t}=j.useContext(Bn),s=j.useContext(Fn);_t(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),a={...Ac(n||".",{relative:e})},l=tn();if(n==null){a.search=l.search;let u=new URLSearchParams(a.search),h=u.getAll("index");if(h.some(g=>g==="")){u.delete("index"),h.filter(x=>x).forEach(x=>u.append("index",x));let g=u.toString();a.search=g?`?${g}`:""}}return(!n||n===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:kr([t,a.pathname])),fc(a)}function dA(n,e={}){let t=j.useContext(F2);_t(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=q2("useViewTransitionState"),r=Ac(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Dr(t.currentLocation.pathname,s)||t.currentLocation.pathname,l=Dr(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Kd(r.pathname,l)!=null||Kd(r.pathname,a)!=null}[...Wk];const hA="modulepreload",fA=function(n){return"/"+n},Xb={},Nc=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){let f=function(g){return Promise.all(g.map(x=>Promise.resolve(x).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var l=f;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");r=f(t.map(g=>{if(g=fA(g),g in Xb)return;Xb[g]=!0;const x=g.endsWith(".css"),v=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const b=document.createElement("link");if(b.rel=x?"stylesheet":hA,x||(b.as="script"),b.crossOrigin="",b.href=g,h&&b.setAttribute("nonce",h),document.head.appendChild(b),x)return new Promise((w,_)=>{b.addEventListener("load",w),b.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${g}`)))})}))}function a(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return r.then(u=>{for(const h of u||[])h.status==="rejected"&&a(h.reason);return e().catch(a)})},mA=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Nc(async()=>{const{default:s}=await Promise.resolve().then(()=>Mo);return{default:s}},[]).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class $p extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class gA extends $p{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Kb extends $p{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Qb extends $p{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var $g;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})($g||($g={}));var pA=function(n,e,t,s){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(g){try{f(s.next(g))}catch(x){l(x)}}function h(g){try{f(s.throw(g))}catch(x){l(x)}}function f(g){g.done?a(g.value):r(g.value).then(u,h)}f((s=s.apply(n,e||[])).next())})};class xA{constructor(e,{headers:t={},customFetch:s,region:r=$g.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=mA(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return pA(this,void 0,void 0,function*(){try{const{headers:r,method:a,body:l}=t;let u={},{region:h}=t;h||(h=this.region);const f=new URL(`${this.url}/${e}`);h&&h!=="any"&&(u["x-region"]=h,f.searchParams.set("forceFunctionRegion",h));let g;l&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",g=l):typeof l=="string"?(u["Content-Type"]="text/plain",g=l):typeof FormData<"u"&&l instanceof FormData?g=l:(u["Content-Type"]="application/json",g=JSON.stringify(l)));const x=yield this.fetch(f.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),r),body:g}).catch(_=>{throw new gA(_)}),v=x.headers.get("x-relay-error");if(v&&v==="true")throw new Kb(x);if(!x.ok)throw new Qb(x);let b=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield x.json():b==="application/octet-stream"?w=yield x.blob():b==="text/event-stream"?w=x:b==="multipart/form-data"?w=yield x.formData():w=yield x.text(),{data:w,error:null,response:x}}catch(r){return{data:null,error:r,response:r instanceof Qb||r instanceof Kb?r.context:void 0}}})}}var ns={},eo={},to={},so={},no={},ro={},vA=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},To=vA();const yA=To.fetch,W2=To.fetch.bind(To),X2=To.Headers,bA=To.Request,wA=To.Response,Mo=Object.freeze(Object.defineProperty({__proto__:null,Headers:X2,Request:bA,Response:wA,default:W2,fetch:yA},Symbol.toStringTag,{value:"Module"})),_A=EE(Mo);var Ju={},Zb;function K2(){if(Zb)return Ju;Zb=1,Object.defineProperty(Ju,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Ju.default=n,Ju}var Jb;function Q2(){if(Jb)return ro;Jb=1;var n=ro&&ro.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ro,"__esModule",{value:!0});const e=n(_A),t=n(K2());class s{constructor(a){this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=a.headers,this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=a.shouldThrowOnError,this.signal=a.signal,this.isMaybeSingle=a.isMaybeSingle,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=Object.assign({},this.headers),this.headers[a]=l,this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const u=this.fetch;let h=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var g,x,v;let b=null,w=null,_=null,T=f.status,S=f.statusText;if(f.ok){if(this.method!=="HEAD"){const D=await f.text();D===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?w=D:w=JSON.parse(D))}const E=(g=this.headers.Prefer)===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),M=(x=f.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");E&&M&&M.length>1&&(_=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(b={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,_=null,T=406,S="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const E=await f.text();try{b=JSON.parse(E),Array.isArray(b)&&f.status===404&&(w=[],b=null,T=200,S="OK")}catch{f.status===404&&E===""?(T=204,S="No Content"):b={message:E}}if(b&&this.isMaybeSingle&&(!((v=b?.details)===null||v===void 0)&&v.includes("0 rows"))&&(b=null,T=200,S="OK"),b&&this.shouldThrowOnError)throw new t.default(b)}return{error:b,data:w,count:_,status:T,statusText:S}});return this.shouldThrowOnError||(h=h.catch(f=>{var g,x,v;return{error:{message:`${(g=f?.name)!==null&&g!==void 0?g:"FetchError"}: ${f?.message}`,details:`${(x=f?.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(v=f?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),h.then(a,l)}returns(){return this}overrideTypes(){return this}}return ro.default=s,ro}var ew;function Z2(){if(ew)return no;ew=1;var n=no&&no.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(no,"__esModule",{value:!0});const e=n(Q2());class t extends e.default{select(r){let a=!1;const l=(r??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(r,{ascending:a=!0,nullsFirst:l,foreignTable:u,referencedTable:h=u}={}){const f=h?`${h}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${r}.${a?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:a,referencedTable:l=a}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${r}`),this}range(r,a,{foreignTable:l,referencedTable:u=l}={}){const h=typeof u>"u"?"offset":`${u}.offset`,f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${r}`),this.url.searchParams.set(f,`${a-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:r=!1,verbose:a=!1,settings:l=!1,buffers:u=!1,wal:h=!1,format:f="text"}={}){var g;const x=[r?"analyze":null,a?"verbose":null,l?"settings":null,u?"buffers":null,h?"wal":null].filter(Boolean).join("|"),v=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${f}; for="${v}"; options=${x};`,f==="json"?this:this}rollback(){var r;return((r=this.headers.Prefer)!==null&&r!==void 0?r:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return no.default=t,no}var tw;function Gp(){if(tw)return so;tw=1;var n=so&&so.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(so,"__esModule",{value:!0});const e=n(Z2());class t extends e.default{eq(r,a){return this.url.searchParams.append(r,`eq.${a}`),this}neq(r,a){return this.url.searchParams.append(r,`neq.${a}`),this}gt(r,a){return this.url.searchParams.append(r,`gt.${a}`),this}gte(r,a){return this.url.searchParams.append(r,`gte.${a}`),this}lt(r,a){return this.url.searchParams.append(r,`lt.${a}`),this}lte(r,a){return this.url.searchParams.append(r,`lte.${a}`),this}like(r,a){return this.url.searchParams.append(r,`like.${a}`),this}likeAllOf(r,a){return this.url.searchParams.append(r,`like(all).{${a.join(",")}}`),this}likeAnyOf(r,a){return this.url.searchParams.append(r,`like(any).{${a.join(",")}}`),this}ilike(r,a){return this.url.searchParams.append(r,`ilike.${a}`),this}ilikeAllOf(r,a){return this.url.searchParams.append(r,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(r,a){return this.url.searchParams.append(r,`ilike(any).{${a.join(",")}}`),this}is(r,a){return this.url.searchParams.append(r,`is.${a}`),this}in(r,a){const l=Array.from(new Set(a)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(r,`in.(${l})`),this}contains(r,a){return typeof a=="string"?this.url.searchParams.append(r,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(r,`cs.{${a.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(a)}`),this}containedBy(r,a){return typeof a=="string"?this.url.searchParams.append(r,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(r,`cd.{${a.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(a)}`),this}rangeGt(r,a){return this.url.searchParams.append(r,`sr.${a}`),this}rangeGte(r,a){return this.url.searchParams.append(r,`nxl.${a}`),this}rangeLt(r,a){return this.url.searchParams.append(r,`sl.${a}`),this}rangeLte(r,a){return this.url.searchParams.append(r,`nxr.${a}`),this}rangeAdjacent(r,a){return this.url.searchParams.append(r,`adj.${a}`),this}overlaps(r,a){return typeof a=="string"?this.url.searchParams.append(r,`ov.${a}`):this.url.searchParams.append(r,`ov.{${a.join(",")}}`),this}textSearch(r,a,{config:l,type:u}={}){let h="";u==="plain"?h="pl":u==="phrase"?h="ph":u==="websearch"&&(h="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(r,`${h}fts${f}.${a}`),this}match(r){return Object.entries(r).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(r,a,l){return this.url.searchParams.append(r,`not.${a}.${l}`),this}or(r,{foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${r})`),this}filter(r,a,l){return this.url.searchParams.append(r,`${a}.${l}`),this}}return so.default=t,so}var sw;function J2(){if(sw)return to;sw=1;var n=to&&to.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(to,"__esModule",{value:!0});const e=n(Gp());class t{constructor(r,{headers:a={},schema:l,fetch:u}){this.url=r,this.headers=a,this.schema=l,this.fetch=u}select(r,{head:a=!1,count:l}={}){const u=a?"HEAD":"GET";let h=!1;const f=(r??"*").split("").map(g=>/\s/.test(g)&&!h?"":(g==='"'&&(h=!h),g)).join("");return this.url.searchParams.set("select",f),l&&(this.headers.Prefer=`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(r,{count:a,defaultToNull:l=!0}={}){const u="POST",h=[];if(this.headers.Prefer&&h.push(this.headers.Prefer),a&&h.push(`count=${a}`),l||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(r)){const f=r.reduce((g,x)=>g.concat(Object.keys(x)),[]);if(f.length>0){const g=[...new Set(f)].map(x=>`"${x}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}upsert(r,{onConflict:a,ignoreDuplicates:l=!1,count:u,defaultToNull:h=!0}={}){const f="POST",g=[`resolution=${l?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&g.push(this.headers.Prefer),u&&g.push(`count=${u}`),h||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(r)){const x=r.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(x.length>0){const v=[...new Set(x)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}update(r,{count:a}={}){const l="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),a&&u.push(`count=${a}`),this.headers.Prefer=u.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}delete({count:r}={}){const a="DELETE",l=[];return r&&l.push(`count=${r}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return to.default=t,to}var Il={},Hl={},nw;function SA(){return nw||(nw=1,Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.version=void 0,Hl.version="0.0.0-automated"),Hl}var rw;function CA(){if(rw)return Il;rw=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.DEFAULT_HEADERS=void 0;const n=SA();return Il.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Il}var iw;function jA(){if(iw)return eo;iw=1;var n=eo&&eo.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(eo,"__esModule",{value:!0});const e=n(J2()),t=n(Gp()),s=CA();class r{constructor(l,{headers:u={},schema:h,fetch:f}={}){this.url=l,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),u),this.schemaName=h,this.fetch=f}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new r(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:h=!1,get:f=!1,count:g}={}){let x;const v=new URL(`${this.url}/rpc/${l}`);let b;h||f?(x=h?"HEAD":"GET",Object.entries(u).filter(([_,T])=>T!==void 0).map(([_,T])=>[_,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([_,T])=>{v.searchParams.append(_,T)})):(x="POST",b=u);const w=Object.assign({},this.headers);return g&&(w.Prefer=`count=${g}`),new t.default({method:x,url:v,headers:w,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return eo.default=r,eo}var aw;function TA(){if(aw)return ns;aw=1;var n=ns&&ns.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(ns,"__esModule",{value:!0}),ns.PostgrestError=ns.PostgrestBuilder=ns.PostgrestTransformBuilder=ns.PostgrestFilterBuilder=ns.PostgrestQueryBuilder=ns.PostgrestClient=void 0;const e=n(jA());ns.PostgrestClient=e.default;const t=n(J2());ns.PostgrestQueryBuilder=t.default;const s=n(Gp());ns.PostgrestFilterBuilder=s.default;const r=n(Z2());ns.PostgrestTransformBuilder=r.default;const a=n(Q2());ns.PostgrestBuilder=a.default;const l=n(K2());return ns.PostgrestError=l.default,ns.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:r.default,PostgrestBuilder:a.default,PostgrestError:l.default},ns}var EA=TA();const kA=Pp(EA),{PostgrestClient:AA,PostgrestQueryBuilder:W8,PostgrestFilterBuilder:X8,PostgrestTransformBuilder:K8,PostgrestBuilder:Q8,PostgrestError:Z8}=kA;function NA(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const DA=NA(),OA="2.11.15",MA=`realtime-js/${OA}`,RA="1.0.0",e_=1e4,PA=1e3;var Zl;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Zl||(Zl={}));var _s;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(_s||(_s={}));var Nn;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Nn||(Nn={}));var Gg;(function(n){n.websocket="websocket"})(Gg||(Gg={}));var Ji;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ji||(Ji={}));class LA{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),a=t.getUint8(2);let l=this.HEADER_LENGTH+2;const u=s.decode(e.slice(l,l+r));l=l+r;const h=s.decode(e.slice(l,l+a));l=l+a;const f=JSON.parse(s.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:h,payload:f}}}class t_{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var vt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(vt||(vt={}));const ow=(n,e,t={})=>{var s;const r=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((a,l)=>(a[l]=BA(l,n,e,r),a),{})},BA=(n,e,t,s)=>{const r=e.find(u=>u.name===n),a=r?.type,l=t[n];return a&&!s.includes(a)?s_(a,l):Yg(l)},s_=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return VA(e,t)}switch(n){case vt.bool:return FA(e);case vt.float4:case vt.float8:case vt.int2:case vt.int4:case vt.int8:case vt.numeric:case vt.oid:return UA(e);case vt.json:case vt.jsonb:return zA(e);case vt.timestamp:return IA(e);case vt.abstime:case vt.date:case vt.daterange:case vt.int4range:case vt.int8range:case vt.money:case vt.reltime:case vt.text:case vt.time:case vt.timestamptz:case vt.timetz:case vt.tsrange:case vt.tstzrange:return Yg(e);default:return Yg(e)}},Yg=n=>n,FA=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},UA=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},zA=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},VA=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let a;const l=n.slice(1,t);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(u=>s_(e,u))}return n},IA=n=>typeof n=="string"?n.replace(" ","T"):n,n_=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class tg{constructor(e,t,s={},r=e_){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var lw;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(lw||(lw={}));class Jl{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Jl.syncState(this.state,r,a,l),this.pendingDiffs.forEach(h=>{this.state=Jl.syncDiff(this.state,h,a,l)}),this.pendingDiffs=[],u()}),this.channel._on(s.diff,{},r=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Jl.syncDiff(this.state,r,a,l),u())}),this.onJoin((r,a,l)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:a,newPresences:l})}),this.onLeave((r,a,l)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const a=this.cloneDeep(e),l=this.transformState(t),u={},h={};return this.map(a,(f,g)=>{l[f]||(h[f]=g)}),this.map(l,(f,g)=>{const x=a[f];if(x){const v=g.map(T=>T.presence_ref),b=x.map(T=>T.presence_ref),w=g.filter(T=>b.indexOf(T.presence_ref)<0),_=x.filter(T=>v.indexOf(T.presence_ref)<0);w.length>0&&(u[f]=w),_.length>0&&(h[f]=_)}else u[f]=g}),this.syncDiff(a,{joins:u,leaves:h},s,r)}static syncDiff(e,t,s,r){const{joins:a,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(a,(u,h)=>{var f;const g=(f=e[u])!==null&&f!==void 0?f:[];if(e[u]=this.cloneDeep(h),g.length>0){const x=e[u].map(b=>b.presence_ref),v=g.filter(b=>x.indexOf(b.presence_ref)<0);e[u].unshift(...v)}s(u,g,h)}),this.map(l,(u,h)=>{let f=e[u];if(!f)return;const g=h.map(x=>x.presence_ref);f=f.filter(x=>g.indexOf(x.presence_ref)<0),e[u]=f,r(u,f,h),f.length===0&&delete e[u]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return"metas"in r?t[s]=r.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[s]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cw;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(cw||(cw={}));var uw;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(uw||(uw={}));var Sr;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Sr||(Sr={}));class Yp{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=_s.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new tg(this,Nn.join,this.params,this.timeout),this.rejoinTimer=new t_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_s.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_s.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=_s.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_s.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Nn.reply,{},(r,a)=>{this._trigger(this._replyEventName(a),r)}),this.presence=new Jl(this),this.broadcastEndpointURL=n_(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==_s.closed){const{config:{broadcast:a,presence:l,private:u}}=this.params;this._onError(g=>e?.(Sr.CHANNEL_ERROR,g)),this._onClose(()=>e?.(Sr.CLOSED));const h={},f={broadcast:a,presence:l,postgres_changes:(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(g=>g.filter))!==null&&r!==void 0?r:[],private:u};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:g})=>{var x;if(this.socket.setAuth(),g===void 0){e?.(Sr.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(x=v?.length)!==null&&x!==void 0?x:0,w=[];for(let _=0;_<b;_++){const T=v[_],{filter:{event:S,schema:A,table:E,filter:M}}=T,D=g&&g[_];if(D&&D.event===S&&D.schema===A&&D.table===E&&D.filter===M)w.push(Object.assign(Object.assign({},T),{id:D.id}));else{this.unsubscribe(),this.state=_s.errored,e?.(Sr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(Sr.SUBSCRIBED);return}}).receive("error",g=>{this.state=_s.errored,e?.(Sr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e?.(Sr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:l}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=f.body)===null||r===void 0?void 0:r.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,u,h;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||h===void 0)&&h.ack)&&a("ok"),f.receive("ok",()=>a("ok")),f.receive("error",()=>a("error")),f.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=_s.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Nn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new tg(this,Nn.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const r=new AbortController,a=setTimeout(()=>r.abort(),s),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(a),l}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new tg(this,e,t,s);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,a;const l=e.toLocaleLowerCase(),{close:u,error:h,leave:f,join:g}=Nn;if(s&&[u,h,f,g].indexOf(l)>=0&&s!==this._joinRef())return;let v=this._onMessage(l,t,s);if(t&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(b=>{var w,_,T;return((w=b.filter)===null||w===void 0?void 0:w.event)==="*"||((T=(_=b.filter)===null||_===void 0?void 0:_.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===l}).map(b=>b.callback(v,s)):(a=this.bindings[l])===null||a===void 0||a.filter(b=>{var w,_,T,S,A,E;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const M=b.id,D=(w=b.filter)===null||w===void 0?void 0:w.event;return M&&((_=t.ids)===null||_===void 0?void 0:_.includes(M))&&(D==="*"||D?.toLocaleLowerCase()===((T=t.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const M=(A=(S=b?.filter)===null||S===void 0?void 0:S.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return M==="*"||M===((E=t?.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof v=="object"&&"ids"in v){const w=v.data,{schema:_,table:T,commit_timestamp:S,type:A,errors:E}=w;v=Object.assign(Object.assign({},{schema:_,table:T,commit_timestamp:S,eventType:A,new:{},old:{},errors:E}),this._getPayloadRecords(w))}b.callback(v,s)})}_isClosed(){return this.state===_s.closed}_isJoined(){return this.state===_s.joined}_isJoining(){return this.state===_s.joining}_isLeaving(){return this.state===_s.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),a={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(r=>{var a;return!(((a=r.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&Yp.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Nn.close,{},e)}_onError(e){this._on(Nn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_s.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ow(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ow(e.columns,e.old_record)),t}}const dw=()=>{},HA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $A{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=e_,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dw,this.ref=0,this.logger=dw,this.conn=null,this.sendBuffer=[],this.serializer=new LA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...u)=>Nc(async()=>{const{default:h}=await Promise.resolve().then(()=>Mo);return{default:h}},void 0).then(({default:h})=>h(...u)):l=fetch,(...u)=>l(...u)},this.endPoint=`${e}/${Gg.websocket}`,this.httpEndpoint=n_(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(s=t?.params)===null||s===void 0?void 0:s.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=t?.encode?t.encode:(a,l)=>l(JSON.stringify(a)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new t_(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=DA),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:RA}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Zl.connecting:return Ji.Connecting;case Zl.open:return Ji.Open;case Zl.closing:return Ji.Closing;default:return Ji.Closed}}isConnected(){return this.connectionState()===Ji.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(a=>a.topic===s);if(r)return r;{const a=new Yp(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:s,payload:r,ref:a}=e,l=()=>{this.encode(e,u=>{var h;(h=this.conn)===null||h===void 0||h.send(u)})};this.log("push",`${t} ${s} (${a})`,r),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const r={access_token:t,version:MA};t&&s.updateJoinPayload(r),s.joinedOnce&&s._isJoined()&&s._push(Nn.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(PA,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:r,payload:a,ref:l}=t;s==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${s} ${r} ${l&&"("+l+")"||""}`,a),Array.from(this.channels).filter(u=>u._isMember(s)).forEach(u=>u._trigger(r,a,l)),this.stateChangeCallbacks.message.forEach(u=>u(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Nn.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${s}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([HA],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class qp extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function is(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class GA extends qp{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class qg extends qp{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var YA=function(n,e,t,s){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(g){try{f(s.next(g))}catch(x){l(x)}}function h(g){try{f(s.throw(g))}catch(x){l(x)}}function f(g){g.done?a(g.value):r(g.value).then(u,h)}f((s=s.apply(n,e||[])).next())})};const r_=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Nc(async()=>{const{default:s}=await Promise.resolve().then(()=>Mo);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},qA=()=>YA(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Nc(()=>Promise.resolve().then(()=>Mo),void 0)).Response:Response}),Wg=n=>{if(Array.isArray(n))return n.map(t=>Wg(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const r=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[r]=Wg(s)}),e};var ma=function(n,e,t,s){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(g){try{f(s.next(g))}catch(x){l(x)}}function h(g){try{f(s.throw(g))}catch(x){l(x)}}function f(g){g.done?a(g.value):r(g.value).then(u,h)}f((s=s.apply(n,e||[])).next())})};const sg=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),WA=(n,e,t)=>ma(void 0,void 0,void 0,function*(){const s=yield qA();n instanceof s&&!t?.noResolveJson?n.json().then(r=>{e(new GA(sg(r),n.status||500))}).catch(r=>{e(new qg(sg(r),r))}):e(new qg(sg(n),n))}),XA=(n,e,t,s)=>{const r={method:n,headers:e?.headers||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s&&(r.body=JSON.stringify(s)),Object.assign(Object.assign({},r),t))};function Dc(n,e,t,s,r,a){return ma(this,void 0,void 0,function*(){return new Promise((l,u)=>{n(t,XA(e,s,r,a)).then(h=>{if(!h.ok)throw h;return s?.noResolveJson?h:h.json()}).then(h=>l(h)).catch(h=>WA(h,u,s))})})}function Qd(n,e,t,s){return ma(this,void 0,void 0,function*(){return Dc(n,"GET",e,t,s)})}function pi(n,e,t,s,r){return ma(this,void 0,void 0,function*(){return Dc(n,"POST",e,s,r,t)})}function KA(n,e,t,s,r){return ma(this,void 0,void 0,function*(){return Dc(n,"PUT",e,s,r,t)})}function QA(n,e,t,s){return ma(this,void 0,void 0,function*(){return Dc(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function i_(n,e,t,s,r){return ma(this,void 0,void 0,function*(){return Dc(n,"DELETE",e,s,r,t)})}var Ls=function(n,e,t,s){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(g){try{f(s.next(g))}catch(x){l(x)}}function h(g){try{f(s.throw(g))}catch(x){l(x)}}function f(g){g.done?a(g.value):r(g.value).then(u,h)}f((s=s.apply(n,e||[])).next())})};const ZA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class JA{constructor(e,t={},s,r){this.url=e,this.headers=t,this.bucketId=s,this.fetch=r_(r)}uploadOrUpdate(e,t,s,r){return Ls(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},hw),r);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),h&&a.append("metadata",this.encodeMetadata(h)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",l.cacheControl),h&&a.append("metadata",this.encodeMetadata(h))):(a=s,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,h&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),r?.headers&&(u=Object.assign(Object.assign({},u),r.headers));const f=this._removeEmptyFolders(t),g=this._getFinalPath(f),x=yield this.fetch(`${this.url}/object/${g}`,Object.assign({method:e,body:a,headers:u},l?.duplex?{duplex:l.duplex}:{})),v=yield x.json();return x.ok?{data:{path:f,id:v.Id,fullPath:v.Key},error:null}:{data:null,error:v}}catch(a){if(is(a))return{data:null,error:a};throw a}})}upload(e,t,s){return Ls(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return Ls(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",t);try{let h;const f=Object.assign({upsert:hw.upsert},r),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&s instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),h.append("",s)):typeof FormData<"u"&&s instanceof FormData?(h=s,h.append("cacheControl",f.cacheControl)):(h=s,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType);const x=yield this.fetch(u.toString(),{method:"PUT",body:h,headers:g}),v=yield x.json();return x.ok?{data:{path:a,fullPath:v.Key},error:null}:{data:null,error:v}}catch(h){if(is(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,t){return Ls(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);t?.upsert&&(r["x-upsert"]="true");const a=yield pi(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),l=new URL(this.url+a.url),u=l.searchParams.get("token");if(!u)throw new qp("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(s){if(is(s))return{data:null,error:s};throw s}})}update(e,t,s){return Ls(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Ls(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(is(r))return{data:null,error:r};throw r}})}copy(e,t,s){return Ls(this,void 0,void 0,function*(){try{return{data:{path:(yield pi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(is(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return Ls(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),a=yield pi(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const l=s?.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(r){if(is(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return Ls(this,void 0,void 0,function*(){try{const r=yield pi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(r){if(is(r))return{data:null,error:r};throw r}})}download(e,t){return Ls(this,void 0,void 0,function*(){const r=typeof t?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(t?.transform||{}),l=a?`?${a}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield Qd(this.fetch,`${this.url}/${r}/${u}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(is(u))return{data:null,error:u};throw u}})}info(e){return Ls(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Qd(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Wg(s),error:null}}catch(s){if(is(s))return{data:null,error:s};throw s}})}exists(e){return Ls(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield QA(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(is(s)&&s instanceof qg){const r=s.originalError;if([400,404].includes(r?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],a=t?.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&r.push(a);const u=typeof t?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(t?.transform||{});h!==""&&r.push(h);let f=r.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${s}${f}`)}}}remove(e){return Ls(this,void 0,void 0,function*(){try{return{data:yield i_(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(is(t))return{data:null,error:t};throw t}})}list(e,t,s){return Ls(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},ZA),t),{prefix:e||""});return{data:yield pi(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(is(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const e4="2.7.1",t4={"X-Client-Info":`storage-js/${e4}`};var io=function(n,e,t,s){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(g){try{f(s.next(g))}catch(x){l(x)}}function h(g){try{f(s.throw(g))}catch(x){l(x)}}function f(g){g.done?a(g.value):r(g.value).then(u,h)}f((s=s.apply(n,e||[])).next())})};class s4{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},t4),t),this.fetch=r_(s)}listBuckets(){return io(this,void 0,void 0,function*(){try{return{data:yield Qd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(is(e))return{data:null,error:e};throw e}})}getBucket(e){return io(this,void 0,void 0,function*(){try{return{data:yield Qd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(is(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return io(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(is(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return io(this,void 0,void 0,function*(){try{return{data:yield KA(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(is(s))return{data:null,error:s};throw s}})}emptyBucket(e){return io(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(is(t))return{data:null,error:t};throw t}})}deleteBucket(e){return io(this,void 0,void 0,function*(){try{return{data:yield i_(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(is(t))return{data:null,error:t};throw t}})}}class n4 extends s4{constructor(e,t={},s){super(e,t,s)}from(e){return new JA(this.url,this.headers,e,this.fetch)}}const r4="2.50.5";let Wl="";typeof Deno<"u"?Wl="deno":typeof document<"u"?Wl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Wl="react-native":Wl="node";const i4={"X-Client-Info":`supabase-js-${Wl}/${r4}`},a4={headers:i4},o4={schema:"public"},l4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},c4={};var u4=function(n,e,t,s){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(g){try{f(s.next(g))}catch(x){l(x)}}function h(g){try{f(s.throw(g))}catch(x){l(x)}}function f(g){g.done?a(g.value):r(g.value).then(u,h)}f((s=s.apply(n,e||[])).next())})};const d4=n=>{let e;return n?e=n:typeof fetch>"u"?e=W2:e=fetch,(...t)=>e(...t)},h4=()=>typeof Headers>"u"?X2:Headers,f4=(n,e,t)=>{const s=d4(t),r=h4();return(a,l)=>u4(void 0,void 0,void 0,function*(){var u;const h=(u=yield e())!==null&&u!==void 0?u:n;let f=new r(l?.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${h}`),s(a,Object.assign(Object.assign({},l),{headers:f}))})};var m4=function(n,e,t,s){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(g){try{f(s.next(g))}catch(x){l(x)}}function h(g){try{f(s.throw(g))}catch(x){l(x)}}function f(g){g.done?a(g.value):r(g.value).then(u,h)}f((s=s.apply(n,e||[])).next())})};function g4(n){return n.endsWith("/")?n:n+"/"}function p4(n,e){var t,s;const{db:r,auth:a,realtime:l,global:u}=n,{db:h,auth:f,realtime:g,global:x}=e,v={db:Object.assign(Object.assign({},h),r),auth:Object.assign(Object.assign({},f),a),realtime:Object.assign(Object.assign({},g),l),global:Object.assign(Object.assign(Object.assign({},x),u),{headers:Object.assign(Object.assign({},(t=x?.headers)!==null&&t!==void 0?t:{}),(s=u?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>m4(this,void 0,void 0,function*(){return""})};return n.accessToken?v.accessToken=n.accessToken:delete v.accessToken,v}const a_="2.70.0",ho=30*1e3,Xg=3,ng=Xg*ho,x4="http://localhost:9999",v4="supabase.auth.token",y4={"X-Client-Info":`gotrue-js/${a_}`},Kg="X-Supabase-Api-Version",o_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},b4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,w4=6e5;class Wp extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Ye(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class _4 extends Wp{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function S4(n){return Ye(n)&&n.name==="AuthApiError"}class l_ extends Wp{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ji extends Wp{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class mi extends ji{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function C4(n){return Ye(n)&&n.name==="AuthSessionMissingError"}class ed extends ji{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class td extends ji{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class sd extends ji{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function j4(n){return Ye(n)&&n.name==="AuthImplicitGrantRedirectError"}class fw extends ji{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qg extends ji{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function rg(n){return Ye(n)&&n.name==="AuthRetryableFetchError"}class mw extends ji{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class ec extends ji{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gw=` 	
\r=`.split(""),T4=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<gw.length;e+=1)n[gw[e].charCodeAt(0)]=-2;for(let e=0;e<Zd.length;e+=1)n[Zd[e].charCodeAt(0)]=e;return n})();function pw(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Zd[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Zd[s]),e.queuedBits-=6}}function c_(n,e,t){const s=T4[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function xw(n){const e=[],t=l=>{e.push(String.fromCodePoint(l))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},a=l=>{A4(l,s,t)};for(let l=0;l<n.length;l+=1)c_(n.charCodeAt(l),r,a);return e.join("")}function E4(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function k4(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const r=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}E4(s,e)}}function A4(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if((n>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function N4(n){const e=[],t={queue:0,queuedBits:0},s=r=>{e.push(r)};for(let r=0;r<n.length;r+=1)c_(n.charCodeAt(r),t,s);return new Uint8Array(e)}function D4(n){const e=[];return k4(n,t=>e.push(t)),new Uint8Array(e)}function O4(n){const e=[],t={queue:0,queuedBits:0},s=r=>{e.push(r)};return n.forEach(r=>pw(r,t,s)),pw(null,t,s),e.join("")}function M4(n){return Math.round(Date.now()/1e3)+n}function R4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const En=()=>typeof window<"u"&&typeof document<"u",Xi={tested:!1,writable:!1},tc=()=>{if(!En())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xi.tested)return Xi.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Xi.tested=!0,Xi.writable=!0}catch{Xi.tested=!0,Xi.writable=!1}return Xi.writable};function P4(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,a)=>{e[a]=r})}catch{}return t.searchParams.forEach((s,r)=>{e[r]=s}),e}const u_=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Nc(async()=>{const{default:s}=await Promise.resolve().then(()=>Mo);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},L4=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",d_=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},nd=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},rd=async(n,e)=>{await n.removeItem(e)};class _h{constructor(){this.promise=new _h.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}_h.promiseConstructor=Promise;function ig(n){const e=n.split(".");if(e.length!==3)throw new ec("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!b4.test(e[s]))throw new ec("JWT not in base64url format");return{header:JSON.parse(xw(e[0])),payload:JSON.parse(xw(e[1])),signature:N4(e[2]),raw:{header:e[0],payload:e[1]}}}async function B4(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function F4(n,e){return new Promise((s,r)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await n(a);if(!e(a,null,l)){s(l);return}}catch(l){if(!e(a,l)){r(l);return}}})()})}function U4(n){return("0"+n.toString(16)).substr(-2)}function z4(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let r="";for(let a=0;a<56;a++)r+=t.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,U4).join("")}async function V4(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(a=>String.fromCharCode(a)).join("")}async function I4(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await V4(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ao(n,e,t=!1){const s=z4();let r=s;t&&(r+="/PASSWORD_RECOVERY"),await d_(n,`${e}-code-verifier`,r);const a=await I4(s);return[a,s===a?"plain":"s256"]}const H4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $4(n){const e=n.headers.get(Kg);if(!e||!e.match(H4))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function G4(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function Y4(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const q4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function oo(n){if(!q4.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var W4=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};const Qi=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),X4=[502,503,504];async function vw(n){var e;if(!L4(n))throw new Qg(Qi(n),0);if(X4.includes(n.status))throw new Qg(Qi(n),n.status);let t;try{t=await n.json()}catch(a){throw new l_(Qi(a),a)}let s;const r=$4(n);if(r&&r.getTime()>=o_["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new mw(Qi(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new mi}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new mw(Qi(t),n.status,t.weak_password.reasons);throw new _4(Qi(t),n.status||500,s)}const K4=(n,e,t,s)=>{const r={method:n,headers:e?.headers||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))};async function et(n,e,t,s){var r;const a=Object.assign({},s?.headers);a[Kg]||(a[Kg]=o_["2024-01-01"].name),s?.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const l=(r=s?.query)!==null&&r!==void 0?r:{};s?.redirectTo&&(l.redirect_to=s.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await Q4(n,e,t+u,{headers:a,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(h):{data:Object.assign({},h),error:null}}async function Q4(n,e,t,s,r,a){const l=K4(e,s,r,a);let u;try{u=await n(t,Object.assign({},l))}catch(h){throw console.error(h),new Qg(Qi(h),0)}if(u.ok||await vw(u),s?.noResolveJson)return u;try{return await u.json()}catch(h){await vw(h)}}function br(n){var e;let t=null;tN(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=M4(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function yw(n){const e=br(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function xi(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Z4(n){return{data:n,error:null}}function J4(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:a}=n,l=W4(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:a},h=Object.assign({},l);return{data:{properties:u,user:h},error:null}}function eN(n){return n}function tN(n){return n.access_token&&n.refresh_token&&n.expires_in}const ag=["global","local","others"];var sN=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};class nN{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=u_(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=ag[0]){if(ag.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ag.join(", ")}`);try{return await et(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await et(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:xi})}catch(s){if(Ye(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=sN(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=s?.newEmail,delete r.newEmail),await et(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:J4,redirectTo:t?.redirectTo})}catch(t){if(Ye(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await et(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:xi})}catch(t){if(Ye(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,a,l,u,h;try{const f={nextPage:null,lastPage:0,total:0},g=await et(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(a=(r=e?.perPage)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:""},xform:eN});if(g.error)throw g.error;const x=await g.json(),v=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(h=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(w=>{const _=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(w.split(";")[1].split("=")[1]);f[`${T}Page`]=_}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},x),f),error:null}}catch(f){if(Ye(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){oo(e);try{return await et(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:xi})}catch(t){if(Ye(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){oo(e);try{return await et(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:xi})}catch(s){if(Ye(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){oo(e);try{return await et(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:xi})}catch(s){if(Ye(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){oo(e.userId);try{const{data:t,error:s}=await et(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:s}}catch(t){if(Ye(t))return{data:null,error:t};throw t}}async _deleteFactor(e){oo(e.userId),oo(e.id);try{return{data:await et(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ye(t))return{data:null,error:t};throw t}}}const rN={getItem:n=>tc()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{tc()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{tc()&&globalThis.localStorage.removeItem(n)}};function bw(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function iN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const lo={debug:!!(globalThis&&tc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class h_ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class aN extends h_{}async function oN(n,e,t){lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),lo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return await t()}finally{lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(e===0)throw lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new aN(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(lo.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}iN();const lN={url:x4,storageKey:v4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:y4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ww(n,e,t){return await t()}class mc{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=mc.nextInstanceID,mc.nextInstanceID+=1,this.instanceID>0&&En()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},lN),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new nN({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=u_(r.fetch),this.lock=r.lock||ww,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:En()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=oN:this.lock=ww,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:tc()?this.storage=rN:(this.memoryStorage={},this.storage=bw(this.memoryStorage)):(this.memoryStorage={},this.storage=bw(this.memoryStorage)),En()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${a_}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=P4(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),En()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:a}=await this._getSessionFromURL(t,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),j4(a)){const h=(e=a.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:u}=r;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ye(t)?{error:t}:{error:new l_("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,r;try{const a=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e?.options)===null||r===void 0?void 0:r.captchaToken}},xform:br}),{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const h=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(a){if(Ye(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,s,r;try{let a;if("email"in e){const{email:g,password:x,options:v}=e;let b=null,w=null;this.flowType==="pkce"&&([b,w]=await ao(this.storage,this.storageKey)),a=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:g,password:x,data:(t=v?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:w},xform:br})}else if("phone"in e){const{phone:g,password:x,options:v}=e;a=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:x,data:(s=v?.data)!==null&&s!==void 0?s:{},channel:(r=v?.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:br})}else throw new td("You must provide either an email or phone number and a password");const{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const h=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(a){if(Ye(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:l,options:u}=e;t=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:yw})}else if("phone"in e){const{phone:a,password:l,options:u}=e;t=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:yw})}else throw new td("You must provide either an email or phone number and a password");const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new ed}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(t){if(Ye(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,r,a,l,u,h,f,g,x,v,b;let w,_;if("message"in e)w=e.message,_=e.signature;else{const{chain:T,wallet:S,statement:A,options:E}=e;let M;if(En())if(typeof S=="object")M=S;else{const B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))M=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=S}const D=new URL((t=E?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in M&&M.signIn){const B=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),A?{statement:A}:null));let F;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")F=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)F=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)w=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),_=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${D.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(r=(s=E?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((a=E?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((l=E?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((u=E?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((h=E?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((f=E?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((x=(g=E?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||x===void 0)&&x.length?["Resources",...E.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const B=await M.signMessage(new TextEncoder().encode(w),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=B}}try{const{data:T,error:S}=await et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:O4(_)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:br});if(S)throw S;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new ed}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:S})}catch(T){if(Ye(T))return{data:{user:null,session:null},error:T};throw T}}async _exchangeCodeForSession(e){const t=await nd(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(t??"").split("/");try{const{data:a,error:l}=await et(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:br});if(await rd(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new ed}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:r??null}),error:l})}catch(a){if(Ye(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:s,token:r,access_token:a,nonce:l}=e,u=await et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:br}),{data:h,error:f}=u;return f?{data:{user:null,session:null},error:f}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new ed}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:f})}catch(t){if(Ye(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,a,l;try{if("email"in e){const{email:u,options:h}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await ao(this.storage,this.storageKey));const{error:x}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(t=h?.data)!==null&&t!==void 0?t:{},create_user:(s=h?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:h?.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in e){const{phone:u,options:h}=e,{data:f,error:g}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(r=h?.data)!==null&&r!==void 0?r:{},create_user:(a=h?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(l=h?.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f?.message_id},error:g}}throw new td("You must provide either an email or phone number.")}catch(u){if(Ye(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var t,s;try{let r,a;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:l,error:u}=await et(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:br});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,f=l.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(r){if(Ye(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await ao(this.storage,this.storageKey)),await et(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e?.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Z4})}catch(a){if(Ye(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new mi;const{error:r}=await et(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Ye(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:a}=e,{error:l}=await et(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:s,type:r,options:a}=e,{data:l,error:u}=await et(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:u}}throw new td("You must provide either an email or phone number and a type")}catch(t){if(Ye(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await nd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<ng:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(h,f,g)=>(!l&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,f,g))})}return{data:{session:e},error:null}}const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:xi}):await this._useSession(async t=>{var s,r,a;const{data:l,error:u}=t;if(u)throw u;return!(!((s=l.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new mi}:await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0,xform:xi})})}catch(t){if(Ye(t))return C4(t)&&(await this._removeSession(),await rd(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:a}=s;if(a)throw a;if(!r.session)throw new mi;const l=r.session;let u=null,h=null;this.flowType==="pkce"&&e.email!=null&&([u,h]=await ao(this.storage,this.storageKey));const{data:f,error:g}=await et(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:h}),jwt:l.access_token,xform:xi});if(g)throw g;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(s){if(Ye(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new mi;const t=Date.now()/1e3;let s=t,r=!0,a=null;const{payload:l}=ig(e.access_token);if(l.exp&&(s=l.exp,r=s<=t),r){const{session:u,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:h}=await this._getUser(e.access_token);if(h)throw h;a={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(Ye(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:l,error:u}=t;if(u)throw u;e=(s=l.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new mi;const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ye(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!En())throw new sd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new sd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new fw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new sd("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new fw("No code detected.");const{data:A,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:a,refresh_token:l,expires_in:u,expires_at:h,token_type:f}=e;if(!a||!u||!l||!f)throw new sd("No session defined in URL");const g=Math.round(Date.now()/1e3),x=parseInt(u);let v=g+x;h&&(v=parseInt(h));const b=v-g;b*1e3<=ho&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${x}s`);const w=v-x;g-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,v,g):g-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,v,g);const{data:_,error:T}=await this._getUser(a);if(T)throw T;const S={provider_token:s,provider_refresh_token:r,access_token:a,expires_in:x,expires_at:v,refresh_token:l,token_type:f,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:e.type},error:null}}catch(s){if(Ye(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await nd(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:a}=t;if(a)return{error:a};const l=(s=r.session)===null||s===void 0?void 0:s.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(S4(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await rd(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=R4(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:a},error:l}=t;if(l)throw l;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await ao(this.storage,this.storageKey,!0));try{return await et(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(Ye(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Ye(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:r}=await this._useSession(async a=>{var l,u,h,f,g;const{data:x,error:v}=a;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await et(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(f=x.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(r)throw r;return En()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(Ye(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,r;const{data:a,error:l}=t;if(l)throw l;return await et(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(Ye(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await F4(async r=>(r>0&&await B4(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await et(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:br})),(r,a)=>{const l=200*Math.pow(2,r);return a&&rg(a)&&Date.now()+l-s<ho})}catch(s){if(this._debug(t,"error",s),Ye(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),En()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await nd(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const r=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<ng;if(this._debug(t,`session has${r?"":" not"} expired with margin of ${ng}s`),r){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),rg(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new mi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new _h;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new mi;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={session:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(r,"error",a),Ye(a)){const l={session:null,error:a};return rg(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,t)}catch(h){a.push(h)}});if(await Promise.all(l),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await d_(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await rd(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&En()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ho);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/ho);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${ho}ms, refresh threshold is ${Xg} ticks`),r<=Xg&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof h_)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!En()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const r=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,l]=await ao(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});r.push(u.toString())}if(s?.queryParams){const a=new URLSearchParams(s.queryParams);r.push(a.toString())}return s?.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:a}=t;return a?{data:null,error:a}:await et(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Ye(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:a,error:l}=t;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:h,error:f}=await et(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&(!((r=h?.totp)===null||r===void 0)&&r.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(t){if(Ye(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:a}=t;if(a)return{data:null,error:a};const{data:l,error:u}=await et(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=r?.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(t){if(Ye(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:a}=t;return a?{data:null,error:a}:await et(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=r?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Ye(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=e?.factors||[],r=s.filter(l=>l.factor_type==="totp"&&l.status==="verified"),a=s.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:s,totp:r,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:r},error:a}=e;if(a)return{data:null,error:a};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=ig(r.access_token);let u=null;l.aal&&(u=l.aal);let h=u;((s=(t=r.user.factors)===null||t===void 0?void 0:t.filter(x=>x.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(h="aal2");const g=l.amr||[];return{data:{currentLevel:u,nextLevel:h,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(l=>l.kid===e);if(s||(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+w4>Date.now()))return s;const{data:r,error:a}=await et(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!r.keys||r.keys.length===0)throw new ec("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),s=r.keys.find(l=>l.kid===e),!s)throw new ec("No matching signing key found in JWKS");return s}async getClaims(e,t={keys:[]}){try{let s=e;if(!s){const{data:b,error:w}=await this.getSession();if(w||!b.session)return{data:null,error:w};s=b.session.access_token}const{header:r,payload:a,signature:l,raw:{header:u,payload:h}}=ig(s);if(G4(a.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:b}=await this.getUser(s);if(b)throw b;return{data:{claims:a,header:r,signature:l},error:null}}const f=Y4(r.alg),g=await this.fetchJwk(r.kid,t),x=await crypto.subtle.importKey("jwk",g,f,!0,["verify"]);if(!await crypto.subtle.verify(f,x,l,D4(`${u}.${h}`)))throw new ec("Invalid JWT signature");return{data:{claims:a,header:r,signature:l},error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}}}mc.nextInstanceID=0;const cN=mc;class uN extends cN{constructor(e){super(e)}}var dN=function(n,e,t,s){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(g){try{f(s.next(g))}catch(x){l(x)}}function h(g){try{f(s.throw(g))}catch(x){l(x)}}function f(g){g.done?a(g.value):r(g.value).then(u,h)}f((s=s.apply(n,e||[])).next())})};class hN{constructor(e,t,s){var r,a,l;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const u=g4(e),h=new URL(u);this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const f=`sb-${h.hostname.split(".")[0]}-auth-token`,g={db:o4,realtime:c4,auth:Object.assign(Object.assign({},l4),{storageKey:f}),global:a4},x=p4(s??{},g);this.storageKey=(r=x.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(a=x.global.headers)!==null&&a!==void 0?a:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(v,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=x.auth)!==null&&l!==void 0?l:{},this.headers,x.global.fetch),this.fetch=f4(t,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new AA(new URL("rest/v1",h).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),x.accessToken||this._listenForAuthEvents()}get functions(){return new xA(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new n4(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return dN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:a,flowType:l,lock:u,debug:h},f,g){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new uN({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),f),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:l,lock:u,debug:h,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new $A(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s?.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const fN=(n,e,t)=>new hN(n,e,t),mN="https://qeknkhmmydekrjqnxooe.supabase.co",gN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFla25raG1teWRla3JqcW54b29lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIyOTIwOTYsImV4cCI6MjA2Nzg2ODA5Nn0.pGCpiP_wdpC2j1Js4v2TUZM0l8WcT6pP8dH7_DmChqI",ve=fN(mN,gN),Xp=j.createContext(),pN=({children:n})=>{const[e,t]=j.useState(null),[s,r]=j.useState(null),[a,l]=j.useState(!0),u=async(b,w,_,T,S,A)=>{const{data:E,error:M}=await ve.auth.signUp({email:b,password:w});if(M)return console.error("Sign-up error:",M),{success:!1,error:M};const D=E.user;if(console.log("Supabase signUp result:",E),!D)return l(!1),{success:!0,message:"Verification email sent. Please check your inbox."};E.session&&t(E.session);const{error:B}=await ve.from("CUSTOMER").insert([{cus_fname:_,cus_lname:T,cus_username:S,email:b,cus_celno:A?parseInt(A.replace(/\D/g,"")):0,auth_user_id:D.id}]);return B?(console.error("Error inserting into CUSTOMER:",B),{success:!1,error:B}):(r("customer"),l(!1),{success:!0,data:E,userRole:"customer"})},h=async({email:b,password:w})=>{try{const{data:_,error:T}=await ve.auth.signInWithPassword({email:b,password:w});if(T)return console.error("Sign-in error:",T),{success:!1,error:T.message};const A=_.user?.user_metadata?.role||null;return{success:!0,data:_,role:A}}catch(_){return console.error("Unexpected sign-in error:",_),{success:!1,error:"Unexpected error"}}},f=async()=>{const{error:b}=await ve.auth.signOut();b?console.error("Sign-out error:",b):r(null)},g=async()=>{try{const{data:b,error:w}=await ve.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/redirect`}});return w?(console.error("Google auth error:",w),{success:!1,error:w.message}):{success:!0,data:b}}catch(b){return console.error("Unexpected Google auth error:",b),{success:!1,error:"An unexpected error occurred"}}},x=async b=>{try{const{error:w}=await ve.auth.resetPasswordForEmail(b,{redirectTo:`${window.location.origin}/reset-password`});return w?(console.error("Password reset error:",w),{success:!1,error:w.message}):{success:!0,message:"Password reset email sent successfully!"}}catch(w){return console.error("Unexpected password reset error:",w),{success:!1,error:"An unexpected error occurred"}}},v=async b=>{if(!b){r(null);return}const{data:w}=await ve.from("CUSTOMER").select("cus_id").eq("auth_user_id",b).single();if(w){r("customer");return}const{data:_}=await ve.from("ADMIN").select("admin_id").eq("admin_uid",b).single();if(_){r("admin");return}r(null)};return j.useEffect(()=>{(async()=>{try{const{data:{session:_}}=await ve.auth.getSession();t(_),l(!1),_?.user?await v(_.user.id):r(null)}catch(_){console.error("Error fetching session:",_),l(!1)}})();const{data:w}=ve.auth.onAuthStateChange(async(_,T)=>{t(T),T?.user?v(T.user.id):r(null)});return()=>w?.subscription?.unsubscribe()},[]),d.jsx(Xp.Provider,{value:{session:e,signInUser:h,signUpNewUser:u,signInOrUpWithGoogle:g,signOut:f,resetPassword:x,userRole:s,loading:a},children:n})},Ti=()=>j.useContext(Xp);let xN={data:""},vN=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||xN,yN=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,bN=/\/\*[^]*?\*\/|  +/g,_w=/\n+/g,vi=(n,e)=>{let t="",s="",r="";for(let a in n){let l=n[a];a[0]=="@"?a[1]=="i"?t=a+" "+l+";":s+=a[1]=="f"?vi(l,a):a+"{"+vi(l,a[1]=="k"?"":e)+"}":typeof l=="object"?s+=vi(l,e?e.replace(/([^,])+/g,u=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,u):u?u+" "+h:h)):a):l!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=vi.p?vi.p(a,l):a+":"+l+";")}return t+(e&&r?e+"{"+r+"}":r)+s},vr={},f_=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+f_(n[t]);return e}return n},wN=(n,e,t,s,r)=>{let a=f_(n),l=vr[a]||(vr[a]=(h=>{let f=0,g=11;for(;f<h.length;)g=101*g+h.charCodeAt(f++)>>>0;return"go"+g})(a));if(!vr[l]){let h=a!==n?n:(f=>{let g,x,v=[{}];for(;g=yN.exec(f.replace(bN,""));)g[4]?v.shift():g[3]?(x=g[3].replace(_w," ").trim(),v.unshift(v[0][x]=v[0][x]||{})):v[0][g[1]]=g[2].replace(_w," ").trim();return v[0]})(n);vr[l]=vi(r?{["@keyframes "+l]:h}:h,t?"":"."+l)}let u=t&&vr.g?vr.g:null;return t&&(vr.g=vr[l]),((h,f,g,x)=>{x?f.data=f.data.replace(x,h):f.data.indexOf(h)===-1&&(f.data=g?h+f.data:f.data+h)})(vr[l],e,s,u),l},_N=(n,e,t)=>n.reduce((s,r,a)=>{let l=e[a];if(l&&l.call){let u=l(t),h=u&&u.props&&u.props.className||/^go/.test(u)&&u;l=h?"."+h:u&&typeof u=="object"?u.props?"":vi(u,""):u===!1?"":u}return s+r+(l??"")},"");function Sh(n){let e=this||{},t=n.call?n(e.p):n;return wN(t.unshift?t.raw?_N(t,[].slice.call(arguments,1),e.p):t.reduce((s,r)=>Object.assign(s,r&&r.call?r(e.p):r),{}):t,vN(e.target),e.g,e.o,e.k)}let m_,Zg,Jg;Sh.bind({g:1});let Or=Sh.bind({k:1});function SN(n,e,t,s){vi.p=e,m_=n,Zg=t,Jg=s}function Ei(n,e){let t=this||{};return function(){let s=arguments;function r(a,l){let u=Object.assign({},a),h=u.className||r.className;t.p=Object.assign({theme:Zg&&Zg()},u),t.o=/ *go\d+/.test(h),u.className=Sh.apply(t,s)+(h?" "+h:"");let f=n;return n[0]&&(f=u.as||n,delete u.as),Jg&&f[0]&&Jg(u),m_(f,u)}return r}}var CN=n=>typeof n=="function",Jd=(n,e)=>CN(n)?n(e):n,jN=(()=>{let n=0;return()=>(++n).toString()})(),g_=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),TN=20,p_=(n,e)=>{switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,TN)};case 1:return{...n,toasts:n.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:t}=e;return p_(n,{type:n.toasts.find(a=>a.id===t.id)?1:0,toast:t});case 3:let{toastId:s}=e;return{...n,toasts:n.toasts.map(a=>a.id===s||s===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let r=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+r}))}}},Ud=[],na={toasts:[],pausedAt:void 0},ga=n=>{na=p_(na,n),Ud.forEach(e=>{e(na)})},EN={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},kN=(n={})=>{let[e,t]=j.useState(na),s=j.useRef(na);j.useEffect(()=>(s.current!==na&&t(na),Ud.push(t),()=>{let a=Ud.indexOf(t);a>-1&&Ud.splice(a,1)}),[]);let r=e.toasts.map(a=>{var l,u,h;return{...n,...n[a.type],...a,removeDelay:a.removeDelay||((l=n[a.type])==null?void 0:l.removeDelay)||n?.removeDelay,duration:a.duration||((u=n[a.type])==null?void 0:u.duration)||n?.duration||EN[a.type],style:{...n.style,...(h=n[a.type])==null?void 0:h.style,...a.style}}});return{...e,toasts:r}},AN=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:t?.id||jN()}),Oc=n=>(e,t)=>{let s=AN(e,n,t);return ga({type:2,toast:s}),s.id},ke=(n,e)=>Oc("blank")(n,e);ke.error=Oc("error");ke.success=Oc("success");ke.loading=Oc("loading");ke.custom=Oc("custom");ke.dismiss=n=>{ga({type:3,toastId:n})};ke.remove=n=>ga({type:4,toastId:n});ke.promise=(n,e,t)=>{let s=ke.loading(e.loading,{...t,...t?.loading});return typeof n=="function"&&(n=n()),n.then(r=>{let a=e.success?Jd(e.success,r):void 0;return a?ke.success(a,{id:s,...t,...t?.success}):ke.dismiss(s),r}).catch(r=>{let a=e.error?Jd(e.error,r):void 0;a?ke.error(a,{id:s,...t,...t?.error}):ke.dismiss(s)}),n};var NN=(n,e)=>{ga({type:1,toast:{id:n,height:e}})},DN=()=>{ga({type:5,time:Date.now()})},sc=new Map,ON=1e3,MN=(n,e=ON)=>{if(sc.has(n))return;let t=setTimeout(()=>{sc.delete(n),ga({type:4,toastId:n})},e);sc.set(n,t)},RN=n=>{let{toasts:e,pausedAt:t}=kN(n);j.useEffect(()=>{if(t)return;let a=Date.now(),l=e.map(u=>{if(u.duration===1/0)return;let h=(u.duration||0)+u.pauseDuration-(a-u.createdAt);if(h<0){u.visible&&ke.dismiss(u.id);return}return setTimeout(()=>ke.dismiss(u.id),h)});return()=>{l.forEach(u=>u&&clearTimeout(u))}},[e,t]);let s=j.useCallback(()=>{t&&ga({type:6,time:Date.now()})},[t]),r=j.useCallback((a,l)=>{let{reverseOrder:u=!1,gutter:h=8,defaultPosition:f}=l||{},g=e.filter(b=>(b.position||f)===(a.position||f)&&b.height),x=g.findIndex(b=>b.id===a.id),v=g.filter((b,w)=>w<x&&b.visible).length;return g.filter(b=>b.visible).slice(...u?[v+1]:[0,v]).reduce((b,w)=>b+(w.height||0)+h,0)},[e]);return j.useEffect(()=>{e.forEach(a=>{if(a.dismissed)MN(a.id,a.removeDelay);else{let l=sc.get(a.id);l&&(clearTimeout(l),sc.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:NN,startPause:DN,endPause:s,calculateOffset:r}}},PN=Or`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,LN=Or`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,BN=Or`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,FN=Ei("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${PN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${LN} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${BN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,UN=Or`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,zN=Ei("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${UN} 1s linear infinite;
`,VN=Or`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,IN=Or`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,HN=Ei("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${VN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${IN} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,$N=Ei("div")`
  position: absolute;
`,GN=Ei("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,YN=Or`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,qN=Ei("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${YN} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,WN=({toast:n})=>{let{icon:e,type:t,iconTheme:s}=n;return e!==void 0?typeof e=="string"?j.createElement(qN,null,e):e:t==="blank"?null:j.createElement(GN,null,j.createElement(zN,{...s}),t!=="loading"&&j.createElement($N,null,t==="error"?j.createElement(FN,{...s}):j.createElement(HN,{...s})))},XN=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,KN=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,QN="0%{opacity:0;} 100%{opacity:1;}",ZN="0%{opacity:1;} 100%{opacity:0;}",JN=Ei("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,eD=Ei("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,tD=(n,e)=>{let t=n.includes("top")?1:-1,[s,r]=g_()?[QN,ZN]:[XN(t),KN(t)];return{animation:e?`${Or(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Or(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},sD=j.memo(({toast:n,position:e,style:t,children:s})=>{let r=n.height?tD(n.position||e||"top-center",n.visible):{opacity:0},a=j.createElement(WN,{toast:n}),l=j.createElement(eD,{...n.ariaProps},Jd(n.message,n));return j.createElement(JN,{className:n.className,style:{...r,...t,...n.style}},typeof s=="function"?s({icon:a,message:l}):j.createElement(j.Fragment,null,a,l))});SN(j.createElement);var nD=({id:n,className:e,style:t,onHeightUpdate:s,children:r})=>{let a=j.useCallback(l=>{if(l){let u=()=>{let h=l.getBoundingClientRect().height;s(n,h)};u(),new MutationObserver(u).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[n,s]);return j.createElement("div",{ref:a,className:e,style:t},r)},rD=(n,e)=>{let t=n.includes("top"),s=t?{top:0}:{bottom:0},r=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:g_()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...s,...r}},iD=Sh`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,id=16,aD=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:s,children:r,containerStyle:a,containerClassName:l})=>{let{toasts:u,handlers:h}=RN(t);return j.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:id,left:id,right:id,bottom:id,pointerEvents:"none",...a},className:l,onMouseEnter:h.startPause,onMouseLeave:h.endPause},u.map(f=>{let g=f.position||e,x=h.calculateOffset(f,{reverseOrder:n,gutter:s,defaultPosition:e}),v=rD(g,x);return j.createElement(nD,{id:f.id,key:f.id,onHeightUpdate:h.updateHeight,className:f.visible?iD:"",style:v},f.type==="custom"?Jd(f.message,f):r?r(f):j.createElement(sD,{toast:f,position:g}))}))},be=ke;const Kp=j.createContext({});function Qp(n){const e=j.useRef(null);return e.current===null&&(e.current=n()),e.current}const Zp=typeof window<"u",x_=Zp?j.useLayoutEffect:j.useEffect,Ch=j.createContext(null);function Jp(n,e){n.indexOf(e)===-1&&n.push(e)}function e0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Mr=(n,e,t)=>t>e?e:t<n?n:t;let t0=()=>{};const Rr={},v_=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function y_(n){return typeof n=="object"&&n!==null}const b_=n=>/^0[^.\s]+$/u.test(n);function s0(n){let e;return()=>(e===void 0&&(e=n()),e)}const xn=n=>n,oD=(n,e)=>t=>e(n(t)),Mc=(...n)=>n.reduce(oD),gc=(n,e,t)=>{const s=e-n;return s===0?1:(t-n)/s};class n0{constructor(){this.subscriptions=[]}add(e){return Jp(this.subscriptions,e),()=>e0(this.subscriptions,e)}notify(e,t,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,s);else for(let a=0;a<r;a++){const l=this.subscriptions[a];l&&l(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Qn=n=>n*1e3,Zn=n=>n/1e3;function w_(n,e){return e?n*(1e3/e):0}const __=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,lD=1e-7,cD=12;function uD(n,e,t,s,r){let a,l,u=0;do l=e+(t-e)/2,a=__(l,s,r)-n,a>0?t=l:e=l;while(Math.abs(a)>lD&&++u<cD);return l}function Rc(n,e,t,s){if(n===e&&t===s)return xn;const r=a=>uD(a,0,1,n,t);return a=>a===0||a===1?a:__(r(a),e,s)}const S_=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,C_=n=>e=>1-n(1-e),j_=Rc(.33,1.53,.69,.99),r0=C_(j_),T_=S_(r0),E_=n=>(n*=2)<1?.5*r0(n):.5*(2-Math.pow(2,-10*(n-1))),i0=n=>1-Math.sin(Math.acos(n)),k_=C_(i0),A_=S_(i0),dD=Rc(.42,0,1,1),hD=Rc(0,0,.58,1),N_=Rc(.42,0,.58,1),fD=n=>Array.isArray(n)&&typeof n[0]!="number",D_=n=>Array.isArray(n)&&typeof n[0]=="number",mD={linear:xn,easeIn:dD,easeInOut:N_,easeOut:hD,circIn:i0,circInOut:A_,circOut:k_,backIn:r0,backInOut:T_,backOut:j_,anticipate:E_},gD=n=>typeof n=="string",Sw=n=>{if(D_(n)){t0(n.length===4);const[e,t,s,r]=n;return Rc(e,t,s,r)}else if(gD(n))return mD[n];return n},ad=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Cw={value:null};function pD(n,e){let t=new Set,s=new Set,r=!1,a=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},h=0;function f(x){l.has(x)&&(g.schedule(x),n()),h++,x(u)}const g={schedule:(x,v=!1,b=!1)=>{const _=b&&r?t:s;return v&&l.add(x),_.has(x)||_.add(x),x},cancel:x=>{s.delete(x),l.delete(x)},process:x=>{if(u=x,r){a=!0;return}r=!0,[t,s]=[s,t],t.forEach(f),e&&Cw.value&&Cw.value.frameloop[e].push(h),h=0,t.clear(),r=!1,a&&(a=!1,g.process(x))}};return g}const xD=40;function O_(n,e){let t=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,l=ad.reduce((E,M)=>(E[M]=pD(a,e?M:void 0),E),{}),{setup:u,read:h,resolveKeyframes:f,preUpdate:g,update:x,preRender:v,render:b,postRender:w}=l,_=()=>{const E=Rr.useManualTiming?r.timestamp:performance.now();t=!1,Rr.useManualTiming||(r.delta=s?1e3/60:Math.max(Math.min(E-r.timestamp,xD),1)),r.timestamp=E,r.isProcessing=!0,u.process(r),h.process(r),f.process(r),g.process(r),x.process(r),v.process(r),b.process(r),w.process(r),r.isProcessing=!1,t&&e&&(s=!1,n(_))},T=()=>{t=!0,s=!0,r.isProcessing||n(_)};return{schedule:ad.reduce((E,M)=>{const D=l[M];return E[M]=(B,F=!1,L=!1)=>(t||T(),D.schedule(B,F,L)),E},{}),cancel:E=>{for(let M=0;M<ad.length;M++)l[ad[M]].cancel(E)},state:r,steps:l}}const{schedule:wt,cancel:bi,state:gs,steps:og}=O_(typeof requestAnimationFrame<"u"?requestAnimationFrame:xn,!0);let zd;function vD(){zd=void 0}const Fs={now:()=>(zd===void 0&&Fs.set(gs.isProcessing||Rr.useManualTiming?gs.timestamp:performance.now()),zd),set:n=>{zd=n,queueMicrotask(vD)}},M_=n=>e=>typeof e=="string"&&e.startsWith(n),a0=M_("--"),yD=M_("var(--"),o0=n=>yD(n)?bD.test(n.split("/*")[0].trim()):!1,bD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ro={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},pc={...Ro,transform:n=>Mr(0,1,n)},od={...Ro,default:1},nc=n=>Math.round(n*1e5)/1e5,l0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function wD(n){return n==null}const _D=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,c0=(n,e)=>t=>!!(typeof t=="string"&&_D.test(t)&&t.startsWith(n)||e&&!wD(t)&&Object.prototype.hasOwnProperty.call(t,e)),R_=(n,e,t)=>s=>{if(typeof s!="string")return s;const[r,a,l,u]=s.match(l0);return{[n]:parseFloat(r),[e]:parseFloat(a),[t]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},SD=n=>Mr(0,255,n),lg={...Ro,transform:n=>Math.round(SD(n))},ra={test:c0("rgb","red"),parse:R_("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:s=1})=>"rgba("+lg.transform(n)+", "+lg.transform(e)+", "+lg.transform(t)+", "+nc(pc.transform(s))+")"};function CD(n){let e="",t="",s="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),s=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),s=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,s+=s,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const ep={test:c0("#"),parse:CD,transform:ra.transform},Pc=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),gi=Pc("deg"),Jn=Pc("%"),He=Pc("px"),jD=Pc("vh"),TD=Pc("vw"),jw={...Jn,parse:n=>Jn.parse(n)/100,transform:n=>Jn.transform(n*100)},mo={test:c0("hsl","hue"),parse:R_("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(n)+", "+Jn.transform(nc(e))+", "+Jn.transform(nc(t))+", "+nc(pc.transform(s))+")"},Ht={test:n=>ra.test(n)||ep.test(n)||mo.test(n),parse:n=>ra.test(n)?ra.parse(n):mo.test(n)?mo.parse(n):ep.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?ra.transform(n):mo.transform(n),getAnimatableNone:n=>{const e=Ht.parse(n);return e.alpha=0,Ht.transform(e)}},ED=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function kD(n){return isNaN(n)&&typeof n=="string"&&(n.match(l0)?.length||0)+(n.match(ED)?.length||0)>0}const P_="number",L_="color",AD="var",ND="var(",Tw="${}",DD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xc(n){const e=n.toString(),t=[],s={color:[],number:[],var:[]},r=[];let a=0;const u=e.replace(DD,h=>(Ht.test(h)?(s.color.push(a),r.push(L_),t.push(Ht.parse(h))):h.startsWith(ND)?(s.var.push(a),r.push(AD),t.push(h)):(s.number.push(a),r.push(P_),t.push(parseFloat(h))),++a,Tw)).split(Tw);return{values:t,split:u,indexes:s,types:r}}function B_(n){return xc(n).values}function F_(n){const{split:e,types:t}=xc(n),s=e.length;return r=>{let a="";for(let l=0;l<s;l++)if(a+=e[l],r[l]!==void 0){const u=t[l];u===P_?a+=nc(r[l]):u===L_?a+=Ht.transform(r[l]):a+=r[l]}return a}}const OD=n=>typeof n=="number"?0:Ht.test(n)?Ht.getAnimatableNone(n):n;function MD(n){const e=B_(n);return F_(n)(e.map(OD))}const wi={test:kD,parse:B_,createTransformer:F_,getAnimatableNone:MD};function cg(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function RD({hue:n,saturation:e,lightness:t,alpha:s}){n/=360,e/=100,t/=100;let r=0,a=0,l=0;if(!e)r=a=l=t;else{const u=t<.5?t*(1+e):t+e-t*e,h=2*t-u;r=cg(h,u,n+1/3),a=cg(h,u,n),l=cg(h,u,n-1/3)}return{red:Math.round(r*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:s}}function eh(n,e){return t=>t>0?e:n}const Et=(n,e,t)=>n+(e-n)*t,ug=(n,e,t)=>{const s=n*n,r=t*(e*e-s)+s;return r<0?0:Math.sqrt(r)},PD=[ep,ra,mo],LD=n=>PD.find(e=>e.test(n));function Ew(n){const e=LD(n);if(!e)return!1;let t=e.parse(n);return e===mo&&(t=RD(t)),t}const kw=(n,e)=>{const t=Ew(n),s=Ew(e);if(!t||!s)return eh(n,e);const r={...t};return a=>(r.red=ug(t.red,s.red,a),r.green=ug(t.green,s.green,a),r.blue=ug(t.blue,s.blue,a),r.alpha=Et(t.alpha,s.alpha,a),ra.transform(r))},tp=new Set(["none","hidden"]);function BD(n,e){return tp.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function FD(n,e){return t=>Et(n,e,t)}function u0(n){return typeof n=="number"?FD:typeof n=="string"?o0(n)?eh:Ht.test(n)?kw:VD:Array.isArray(n)?U_:typeof n=="object"?Ht.test(n)?kw:UD:eh}function U_(n,e){const t=[...n],s=t.length,r=n.map((a,l)=>u0(a)(a,e[l]));return a=>{for(let l=0;l<s;l++)t[l]=r[l](a);return t}}function UD(n,e){const t={...n,...e},s={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(s[r]=u0(n[r])(n[r],e[r]));return r=>{for(const a in s)t[a]=s[a](r);return t}}function zD(n,e){const t=[],s={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const a=e.types[r],l=n.indexes[a][s[a]],u=n.values[l]??0;t[r]=u,s[a]++}return t}const VD=(n,e)=>{const t=wi.createTransformer(e),s=xc(n),r=xc(e);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?tp.has(n)&&!r.values.length||tp.has(e)&&!s.values.length?BD(n,e):Mc(U_(zD(s,r),r.values),t):eh(n,e)};function z_(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Et(n,e,t):u0(n)(n,e)}const ID=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>wt.update(e,t),stop:()=>bi(e),now:()=>gs.isProcessing?gs.timestamp:Fs.now()}},V_=(n,e,t=10)=>{let s="";const r=Math.max(Math.round(e/t),2);for(let a=0;a<r;a++)s+=Math.round(n(a/(r-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},th=2e4;function d0(n){let e=0;const t=50;let s=n.next(e);for(;!s.done&&e<th;)e+=t,s=n.next(e);return e>=th?1/0:e}function HD(n,e=100,t){const s=t({...n,keyframes:[0,e]}),r=Math.min(d0(s),th);return{type:"keyframes",ease:a=>s.next(r*a).value/e,duration:Zn(r)}}const $D=5;function I_(n,e,t){const s=Math.max(e-$D,0);return w_(t-n(s),e-s)}const Dt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},dg=.001;function GD({duration:n=Dt.duration,bounce:e=Dt.bounce,velocity:t=Dt.velocity,mass:s=Dt.mass}){let r,a,l=1-e;l=Mr(Dt.minDamping,Dt.maxDamping,l),n=Mr(Dt.minDuration,Dt.maxDuration,Zn(n)),l<1?(r=f=>{const g=f*l,x=g*n,v=g-t,b=sp(f,l),w=Math.exp(-x);return dg-v/b*w},a=f=>{const x=f*l*n,v=x*t+t,b=Math.pow(l,2)*Math.pow(f,2)*n,w=Math.exp(-x),_=sp(Math.pow(f,2),l);return(-r(f)+dg>0?-1:1)*((v-b)*w)/_}):(r=f=>{const g=Math.exp(-f*n),x=(f-t)*n+1;return-dg+g*x},a=f=>{const g=Math.exp(-f*n),x=(t-f)*(n*n);return g*x});const u=5/n,h=qD(r,a,u);if(n=Qn(n),isNaN(h))return{stiffness:Dt.stiffness,damping:Dt.damping,duration:n};{const f=Math.pow(h,2)*s;return{stiffness:f,damping:l*2*Math.sqrt(s*f),duration:n}}}const YD=12;function qD(n,e,t){let s=t;for(let r=1;r<YD;r++)s=s-n(s)/e(s);return s}function sp(n,e){return n*Math.sqrt(1-e*e)}const WD=["duration","bounce"],XD=["stiffness","damping","mass"];function Aw(n,e){return e.some(t=>n[t]!==void 0)}function KD(n){let e={velocity:Dt.velocity,stiffness:Dt.stiffness,damping:Dt.damping,mass:Dt.mass,isResolvedFromDuration:!1,...n};if(!Aw(n,XD)&&Aw(n,WD))if(n.visualDuration){const t=n.visualDuration,s=2*Math.PI/(t*1.2),r=s*s,a=2*Mr(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:Dt.mass,stiffness:r,damping:a}}else{const t=GD(n);e={...e,...t,mass:Dt.mass},e.isResolvedFromDuration=!0}return e}function sh(n=Dt.visualDuration,e=Dt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:s,restDelta:r}=t;const a=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],u={done:!1,value:a},{stiffness:h,damping:f,mass:g,duration:x,velocity:v,isResolvedFromDuration:b}=KD({...t,velocity:-Zn(t.velocity||0)}),w=v||0,_=f/(2*Math.sqrt(h*g)),T=l-a,S=Zn(Math.sqrt(h/g)),A=Math.abs(T)<5;s||(s=A?Dt.restSpeed.granular:Dt.restSpeed.default),r||(r=A?Dt.restDelta.granular:Dt.restDelta.default);let E;if(_<1){const D=sp(S,_);E=B=>{const F=Math.exp(-_*S*B);return l-F*((w+_*S*T)/D*Math.sin(D*B)+T*Math.cos(D*B))}}else if(_===1)E=D=>l-Math.exp(-S*D)*(T+(w+S*T)*D);else{const D=S*Math.sqrt(_*_-1);E=B=>{const F=Math.exp(-_*S*B),L=Math.min(D*B,300);return l-F*((w+_*S*T)*Math.sinh(L)+D*T*Math.cosh(L))/D}}const M={calculatedDuration:b&&x||null,next:D=>{const B=E(D);if(b)u.done=D>=x;else{let F=D===0?w:0;_<1&&(F=D===0?Qn(w):I_(E,D,B));const L=Math.abs(F)<=s,V=Math.abs(l-B)<=r;u.done=L&&V}return u.value=u.done?l:B,u},toString:()=>{const D=Math.min(d0(M),th),B=V_(F=>M.next(D*F).value,D,30);return D+"ms "+B},toTransition:()=>{}};return M}sh.applyToOptions=n=>{const e=HD(n,100,sh);return n.ease=e.ease,n.duration=Qn(e.duration),n.type="keyframes",n};function np({keyframes:n,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:l,min:u,max:h,restDelta:f=.5,restSpeed:g}){const x=n[0],v={done:!1,value:x},b=L=>u!==void 0&&L<u||h!==void 0&&L>h,w=L=>u===void 0?h:h===void 0||Math.abs(u-L)<Math.abs(h-L)?u:h;let _=t*e;const T=x+_,S=l===void 0?T:l(T);S!==T&&(_=S-x);const A=L=>-_*Math.exp(-L/s),E=L=>S+A(L),M=L=>{const V=A(L),N=E(L);v.done=Math.abs(V)<=f,v.value=v.done?S:N};let D,B;const F=L=>{b(v.value)&&(D=L,B=sh({keyframes:[v.value,w(v.value)],velocity:I_(E,L,v.value),damping:r,stiffness:a,restDelta:f,restSpeed:g}))};return F(0),{calculatedDuration:null,next:L=>{let V=!1;return!B&&D===void 0&&(V=!0,M(L),F(L)),D!==void 0&&L>=D?B.next(L-D):(!V&&M(L),v)}}}function QD(n,e,t){const s=[],r=t||Rr.mix||z_,a=n.length-1;for(let l=0;l<a;l++){let u=r(n[l],n[l+1]);if(e){const h=Array.isArray(e)?e[l]||xn:e;u=Mc(h,u)}s.push(u)}return s}function ZD(n,e,{clamp:t=!0,ease:s,mixer:r}={}){const a=n.length;if(t0(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=QD(e,s,r),h=u.length,f=g=>{if(l&&g<n[0])return e[0];let x=0;if(h>1)for(;x<n.length-2&&!(g<n[x+1]);x++);const v=gc(n[x],n[x+1],g);return u[x](v)};return t?g=>f(Mr(n[0],n[a-1],g)):f}function JD(n,e){const t=n[n.length-1];for(let s=1;s<=e;s++){const r=gc(0,e,s);n.push(Et(t,1,r))}}function eO(n){const e=[0];return JD(e,n.length-1),e}function tO(n,e){return n.map(t=>t*e)}function sO(n,e){return n.map(()=>e||N_).splice(0,n.length-1)}function rc({duration:n=300,keyframes:e,times:t,ease:s="easeInOut"}){const r=fD(s)?s.map(Sw):Sw(s),a={done:!1,value:e[0]},l=tO(t&&t.length===e.length?t:eO(e),n),u=ZD(l,e,{ease:Array.isArray(r)?r:sO(e,r)});return{calculatedDuration:n,next:h=>(a.value=u(h),a.done=h>=n,a)}}const nO=n=>n!==null;function h0(n,{repeat:e,repeatType:t="loop"},s,r=1){const a=n.filter(nO),u=r<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!u||s===void 0?a[u]:s}const rO={decay:np,inertia:np,tween:rc,keyframes:rc,spring:sh};function H_(n){typeof n.type=="string"&&(n.type=rO[n.type])}class f0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const iO=n=>n/100;class m0 extends f0{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Fs.now()&&this.tick(Fs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;H_(e);const{type:t=rc,repeat:s=0,repeatDelay:r=0,repeatType:a,velocity:l=0}=e;let{keyframes:u}=e;const h=t||rc;h!==rc&&typeof u[0]!="number"&&(this.mixKeyframes=Mc(iO,z_(u[0],u[1])),u=[0,100]);const f=h({...e,keyframes:u});a==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...u].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=d0(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+r,this.totalDuration=this.resolvedDuration*(s+1)-r,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:s,totalDuration:r,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:h}=this;if(this.startTime===null)return s.next(0);const{delay:f=0,keyframes:g,repeat:x,repeatType:v,repeatDelay:b,type:w,onUpdate:_,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const S=this.currentTime-f*(this.playbackSpeed>=0?1:-1),A=this.playbackSpeed>=0?S<0:S>r;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let E=this.currentTime,M=s;if(x){const L=Math.min(this.currentTime,r)/u;let V=Math.floor(L),N=L%1;!N&&L>=1&&(N=1),N===1&&V--,V=Math.min(V,x+1),!!(V%2)&&(v==="reverse"?(N=1-N,b&&(N-=b/u)):v==="mirror"&&(M=l)),E=Mr(0,1,N)*u}const D=A?{done:!1,value:g[0]}:M.next(E);a&&(D.value=a(D.value));let{done:B}=D;!A&&h!==null&&(B=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const F=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&B);return F&&w!==np&&(D.value=h0(g,this.options,T,this.speed)),_&&_(D.value),F&&this.finish(),D}then(e,t){return this.finished.then(e,t)}get duration(){return Zn(this.calculatedDuration)}get time(){return Zn(this.currentTime)}set time(e){e=Qn(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Fs.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Zn(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=ID,startTime:t}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=t??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Fs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function aO(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const ia=n=>n*180/Math.PI,rp=n=>{const e=ia(Math.atan2(n[1],n[0]));return ip(e)},oO={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:rp,rotateZ:rp,skewX:n=>ia(Math.atan(n[1])),skewY:n=>ia(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},ip=n=>(n=n%360,n<0&&(n+=360),n),Nw=rp,Dw=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Ow=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),lO={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Dw,scaleY:Ow,scale:n=>(Dw(n)+Ow(n))/2,rotateX:n=>ip(ia(Math.atan2(n[6],n[5]))),rotateY:n=>ip(ia(Math.atan2(-n[2],n[0]))),rotateZ:Nw,rotate:Nw,skewX:n=>ia(Math.atan(n[4])),skewY:n=>ia(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function ap(n){return n.includes("scale")?1:0}function op(n,e){if(!n||n==="none")return ap(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,r;if(t)s=lO,r=t;else{const u=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=oO,r=u}if(!r)return ap(e);const a=s[e],l=r[1].split(",").map(uO);return typeof a=="function"?a(l):l[a]}const cO=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return op(t,e)};function uO(n){return parseFloat(n.trim())}const Po=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Lo=new Set(Po),Mw=n=>n===Ro||n===He,dO=new Set(["x","y","z"]),hO=Po.filter(n=>!dO.has(n));function fO(n){const e=[];return hO.forEach(t=>{const s=n.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e}const ca={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>op(e,"x"),y:(n,{transform:e})=>op(e,"y")};ca.translateX=ca.x;ca.translateY=ca.y;const ua=new Set;let lp=!1,cp=!1,up=!1;function $_(){if(cp){const n=Array.from(ua).filter(s=>s.needsMeasurement),e=new Set(n.map(s=>s.element)),t=new Map;e.forEach(s=>{const r=fO(s);r.length&&(t.set(s,r),s.render())}),n.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const r=t.get(s);r&&r.forEach(([a,l])=>{s.getValue(a)?.set(l)})}),n.forEach(s=>s.measureEndState()),n.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}cp=!1,lp=!1,ua.forEach(n=>n.complete(up)),ua.clear()}function G_(){ua.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(cp=!0)})}function mO(){up=!0,G_(),$_(),up=!1}class g0{constructor(e,t,s,r,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=r,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(ua.add(this),lp||(lp=!0,wt.read(G_),wt.resolveKeyframes($_))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:r}=this;if(e[0]===null){const a=r?.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(s&&t){const u=s.readValue(t,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),r&&a===void 0&&r.set(e[0])}aO(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ua.delete(this)}cancel(){this.state==="scheduled"&&(ua.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const gO=n=>n.startsWith("--");function pO(n,e,t){gO(e)?n.style.setProperty(e,t):n.style[e]=t}const xO=s0(()=>window.ScrollTimeline!==void 0),vO={};function yO(n,e){const t=s0(n);return()=>vO[e]??t()}const Y_=yO(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Xl=([n,e,t,s])=>`cubic-bezier(${n}, ${e}, ${t}, ${s})`,Rw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xl([0,.65,.55,1]),circOut:Xl([.55,0,1,.45]),backIn:Xl([.31,.01,.66,-.59]),backOut:Xl([.33,1.53,.69,.99])};function q_(n,e){if(n)return typeof n=="function"?Y_()?V_(n,e):"ease-out":D_(n)?Xl(n):Array.isArray(n)?n.map(t=>q_(t,e)||Rw.easeOut):Rw[n]}function bO(n,e,t,{delay:s=0,duration:r=300,repeat:a=0,repeatType:l="loop",ease:u="easeOut",times:h}={},f=void 0){const g={[e]:t};h&&(g.offset=h);const x=q_(u,r);Array.isArray(x)&&(g.easing=x);const v={delay:s,duration:r,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),n.animate(g,v)}function W_(n){return typeof n=="function"&&"applyToOptions"in n}function wO({type:n,...e}){return W_(n)&&Y_()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class _O extends f0{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:s,keyframes:r,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:u,onComplete:h}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,t0(typeof e.type!="string");const f=wO(e);this.animation=bO(t,s,r,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const g=h0(r,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(g):pO(t,s,g),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Zn(Number(e))}get time(){return Zn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Qn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&xO()?(this.animation.timeline=e,xn):t(this)}}const X_={anticipate:E_,backInOut:T_,circInOut:A_};function SO(n){return n in X_}function CO(n){typeof n.ease=="string"&&SO(n.ease)&&(n.ease=X_[n.ease])}const Pw=10;class jO extends _O{constructor(e){CO(e),H_(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:s,onComplete:r,element:a,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const u=new m0({...l,autoplay:!1}),h=Qn(this.finishedTime??this.time);t.setWithVelocity(u.sample(h-Pw).value,u.sample(h).value,Pw),u.stop()}}const Lw=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(wi.test(n)||n==="0")&&!n.startsWith("url("));function TO(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function EO(n,e,t,s){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],l=Lw(r,e),u=Lw(a,e);return!l||!u?!1:TO(n)||(t==="spring"||W_(t))&&s}function p0(n){return y_(n)&&"offsetHeight"in n}const kO=new Set(["opacity","clipPath","filter","transform"]),AO=s0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function NO(n){const{motionValue:e,name:t,repeatDelay:s,repeatType:r,damping:a,type:l}=n;if(!p0(e?.owner?.current))return!1;const{onUpdate:u,transformTemplate:h}=e.owner.getProps();return AO()&&t&&kO.has(t)&&(t!=="transform"||!h)&&!u&&!s&&r!=="mirror"&&a!==0&&l!=="inertia"}const DO=40;class OO extends f0{constructor({autoplay:e=!0,delay:t=0,type:s="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:l="loop",keyframes:u,name:h,motionValue:f,element:g,...x}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Fs.now();const v={autoplay:e,delay:t,type:s,repeat:r,repeatDelay:a,repeatType:l,name:h,motionValue:f,element:g,...x},b=g?.KeyframeResolver||g0;this.keyframeResolver=new b(u,(w,_,T)=>this.onKeyframesResolved(w,_,v,!T),h,f,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,s,r){this.keyframeResolver=void 0;const{name:a,type:l,velocity:u,delay:h,isHandoff:f,onUpdate:g}=s;this.resolvedAt=Fs.now(),EO(e,a,l,u)||((Rr.instantAnimations||!h)&&g?.(h0(e,s,t)),e[0]=e[e.length-1],s.duration=0,s.repeat=0);const v={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>DO?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...s,keyframes:e},b=!f&&NO(v)?new jO({...v,element:v.motionValue.owner.current}):new m0(v);b.finished.then(()=>this.notifyFinished()).catch(xn),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),mO()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const MO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function RO(n){const e=MO.exec(n);if(!e)return[,];const[,t,s,r]=e;return[`--${t??s}`,r]}function K_(n,e,t=1){const[s,r]=RO(n);if(!s)return;const a=window.getComputedStyle(e).getPropertyValue(s);if(a){const l=a.trim();return v_(l)?parseFloat(l):l}return o0(r)?K_(r,e,t+1):r}function x0(n,e){return n?.[e]??n?.default??n}const Q_=new Set(["width","height","top","left","right","bottom",...Po]),PO={test:n=>n==="auto",parse:n=>n},Z_=n=>e=>e.test(n),J_=[Ro,He,Jn,gi,TD,jD,PO],Bw=n=>J_.find(Z_(n));function LO(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||b_(n):!0}const BO=new Set(["brightness","contrast","saturate","opacity"]);function FO(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[s]=t.match(l0)||[];if(!s)return n;const r=t.replace(s,"");let a=BO.has(e)?1:0;return s!==t&&(a*=100),e+"("+a+r+")"}const UO=/\b([a-z-]*)\(.*?\)/gu,dp={...wi,getAnimatableNone:n=>{const e=n.match(UO);return e?e.map(FO).join(" "):n}},Fw={...Ro,transform:Math.round},zO={rotate:gi,rotateX:gi,rotateY:gi,rotateZ:gi,scale:od,scaleX:od,scaleY:od,scaleZ:od,skew:gi,skewX:gi,skewY:gi,distance:He,translateX:He,translateY:He,translateZ:He,x:He,y:He,z:He,perspective:He,transformPerspective:He,opacity:pc,originX:jw,originY:jw,originZ:He},v0={borderWidth:He,borderTopWidth:He,borderRightWidth:He,borderBottomWidth:He,borderLeftWidth:He,borderRadius:He,radius:He,borderTopLeftRadius:He,borderTopRightRadius:He,borderBottomRightRadius:He,borderBottomLeftRadius:He,width:He,maxWidth:He,height:He,maxHeight:He,top:He,right:He,bottom:He,left:He,padding:He,paddingTop:He,paddingRight:He,paddingBottom:He,paddingLeft:He,margin:He,marginTop:He,marginRight:He,marginBottom:He,marginLeft:He,backgroundPositionX:He,backgroundPositionY:He,...zO,zIndex:Fw,fillOpacity:pc,strokeOpacity:pc,numOctaves:Fw},VO={...v0,color:Ht,backgroundColor:Ht,outlineColor:Ht,fill:Ht,stroke:Ht,borderColor:Ht,borderTopColor:Ht,borderRightColor:Ht,borderBottomColor:Ht,borderLeftColor:Ht,filter:dp,WebkitFilter:dp},eS=n=>VO[n];function tS(n,e){let t=eS(n);return t!==dp&&(t=wi),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const IO=new Set(["auto","none","0"]);function HO(n,e,t){let s=0,r;for(;s<n.length&&!r;){const a=n[s];typeof a=="string"&&!IO.has(a)&&xc(a).values.length&&(r=n[s]),s++}if(r&&t)for(const a of e)n[a]=tS(t,r)}class $O extends g0{constructor(e,t,s,r,a){super(e,t,s,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),o0(f))){const g=K_(f,t.current);g!==void 0&&(e[h]=g),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!Q_.has(s)||e.length!==2)return;const[r,a]=e,l=Bw(r),u=Bw(a);if(l!==u)if(Mw(l)&&Mw(u))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else ca[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let r=0;r<e.length;r++)(e[r]===null||LO(e[r]))&&s.push(r);s.length&&HO(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ca[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(s,r).jump(r,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const a=s.length-1,l=s[a];s[a]=ca[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,h])=>{e.getValue(u).set(h)}),this.resolveNoneKeyframes()}}function GO(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let s=document;const r=t?.[n]??s.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}const sS=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Uw=30,YO=n=>!isNaN(parseFloat(n));class qO{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,r=!0)=>{const a=Fs.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();r&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Fs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=YO(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new n0);const s=this.events[e].add(t);return e==="change"?()=>{s(),wt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Fs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Uw)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Uw);return w_(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Eo(n,e){return new qO(n,e)}const{schedule:y0}=O_(queueMicrotask,!1),kn={x:!1,y:!1};function nS(){return kn.x||kn.y}function WO(n){return n==="x"||n==="y"?kn[n]?null:(kn[n]=!0,()=>{kn[n]=!1}):kn.x||kn.y?null:(kn.x=kn.y=!0,()=>{kn.x=kn.y=!1})}function rS(n,e){const t=GO(n),s=new AbortController,r={passive:!0,...e,signal:s.signal};return[t,r,()=>s.abort()]}function zw(n){return!(n.pointerType==="touch"||nS())}function XO(n,e,t={}){const[s,r,a]=rS(n,t),l=u=>{if(!zw(u))return;const{target:h}=u,f=e(h,u);if(typeof f!="function"||!h)return;const g=x=>{zw(x)&&(f(x),h.removeEventListener("pointerleave",g))};h.addEventListener("pointerleave",g,r)};return s.forEach(u=>{u.addEventListener("pointerenter",l,r)}),a}const iS=(n,e)=>e?n===e?!0:iS(n,e.parentElement):!1,b0=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,KO=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function QO(n){return KO.has(n.tagName)||n.tabIndex!==-1}const Vd=new WeakSet;function Vw(n){return e=>{e.key==="Enter"&&n(e)}}function hg(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ZO=(n,e)=>{const t=n.currentTarget;if(!t)return;const s=Vw(()=>{if(Vd.has(t))return;hg(t,"down");const r=Vw(()=>{hg(t,"up")}),a=()=>hg(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",s,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",s),e)};function Iw(n){return b0(n)&&!nS()}function JO(n,e,t={}){const[s,r,a]=rS(n,t),l=u=>{const h=u.currentTarget;if(!Iw(u))return;Vd.add(h);const f=e(h,u),g=(b,w)=>{window.removeEventListener("pointerup",x),window.removeEventListener("pointercancel",v),Vd.has(h)&&Vd.delete(h),Iw(b)&&typeof f=="function"&&f(b,{success:w})},x=b=>{g(b,h===window||h===document||t.useGlobalTarget||iS(h,b.target))},v=b=>{g(b,!1)};window.addEventListener("pointerup",x,r),window.addEventListener("pointercancel",v,r)};return s.forEach(u=>{(t.useGlobalTarget?window:u).addEventListener("pointerdown",l,r),p0(u)&&(u.addEventListener("focus",f=>ZO(f,r)),!QO(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),a}function aS(n){return y_(n)&&"ownerSVGElement"in n}function e3(n){return aS(n)&&n.tagName==="svg"}const Cs=n=>!!(n&&n.getVelocity),t3=[...J_,Ht,wi],s3=n=>t3.find(Z_(n)),w0=j.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class n3 extends j.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const s=t.offsetParent,r=p0(s)&&s.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=r-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function r3({children:n,isPresent:e,anchorX:t,root:s}){const r=j.useId(),a=j.useRef(null),l=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=j.useContext(w0);return j.useInsertionEffect(()=>{const{width:h,height:f,top:g,left:x,right:v}=l.current;if(e||!a.current||!h||!f)return;const b=t==="left"?`left: ${x}`:`right: ${v}`;a.current.dataset.motionPopId=r;const w=document.createElement("style");u&&(w.nonce=u);const _=s??document.head;return _.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${f}px !important;
            ${b}px !important;
            top: ${g}px !important;
          }
        `),()=>{_.removeChild(w),_.contains(w)&&_.removeChild(w)}},[e]),d.jsx(n3,{isPresent:e,childRef:a,sizeRef:l,children:j.cloneElement(n,{ref:a})})}const i3=({children:n,initial:e,isPresent:t,onExitComplete:s,custom:r,presenceAffectsLayout:a,mode:l,anchorX:u,root:h})=>{const f=Qp(a3),g=j.useId();let x=!0,v=j.useMemo(()=>(x=!1,{id:g,initial:e,isPresent:t,custom:r,onExitComplete:b=>{f.set(b,!0);for(const w of f.values())if(!w)return;s&&s()},register:b=>(f.set(b,!1),()=>f.delete(b))}),[t,f,s]);return a&&x&&(v={...v}),j.useMemo(()=>{f.forEach((b,w)=>f.set(w,!1))},[t]),j.useEffect(()=>{!t&&!f.size&&s&&s()},[t]),l==="popLayout"&&(n=d.jsx(r3,{isPresent:t,anchorX:u,root:h,children:n})),d.jsx(Ch.Provider,{value:v,children:n})};function a3(){return new Map}function oS(n=!0){const e=j.useContext(Ch);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:r}=e,a=j.useId();j.useEffect(()=>{if(n)return r(a)},[n]);const l=j.useCallback(()=>n&&s&&s(a),[a,s,n]);return!t&&s?[!1,l]:[!0]}const ld=n=>n.key||"";function Hw(n){const e=[];return j.Children.forEach(n,t=>{j.isValidElement(t)&&e.push(t)}),e}const o3=({children:n,custom:e,initial:t=!0,onExitComplete:s,presenceAffectsLayout:r=!0,mode:a="sync",propagate:l=!1,anchorX:u="left",root:h})=>{const[f,g]=oS(l),x=j.useMemo(()=>Hw(n),[n]),v=l&&!f?[]:x.map(ld),b=j.useRef(!0),w=j.useRef(x),_=Qp(()=>new Map),[T,S]=j.useState(x),[A,E]=j.useState(x);x_(()=>{b.current=!1,w.current=x;for(let B=0;B<A.length;B++){const F=ld(A[B]);v.includes(F)?_.delete(F):_.get(F)!==!0&&_.set(F,!1)}},[A,v.length,v.join("-")]);const M=[];if(x!==T){let B=[...x];for(let F=0;F<A.length;F++){const L=A[F],V=ld(L);v.includes(V)||(B.splice(F,0,L),M.push(L))}return a==="wait"&&M.length&&(B=M),E(Hw(B)),S(x),null}const{forceRender:D}=j.useContext(Kp);return d.jsx(d.Fragment,{children:A.map(B=>{const F=ld(B),L=l&&!f?!1:x===A||v.includes(F),V=()=>{if(_.has(F))_.set(F,!0);else return;let N=!0;_.forEach(H=>{H||(N=!1)}),N&&(D?.(),E(w.current),l&&g?.(),s&&s())};return d.jsx(i3,{isPresent:L,initial:!b.current||t?void 0:!1,custom:e,presenceAffectsLayout:r,mode:a,root:h,onExitComplete:L?void 0:V,anchorX:u,children:B},F)})})},lS=j.createContext({strict:!1}),$w={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ko={};for(const n in $w)ko[n]={isEnabled:e=>$w[n].some(t=>!!e[t])};function l3(n){for(const e in n)ko[e]={...ko[e],...n[e]}}const c3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function nh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||c3.has(n)}let cS=n=>!nh(n);function u3(n){typeof n=="function"&&(cS=e=>e.startsWith("on")?!nh(e):n(e))}try{u3(require("@emotion/is-prop-valid").default)}catch{}function d3(n,e,t){const s={};for(const r in n)r==="values"&&typeof n.values=="object"||(cS(r)||t===!0&&nh(r)||!e&&!nh(r)||n.draggable&&r.startsWith("onDrag"))&&(s[r]=n[r]);return s}function h3(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...s)=>n(...s);return new Proxy(t,{get:(s,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const jh=j.createContext({});function Th(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function vc(n){return typeof n=="string"||Array.isArray(n)}const _0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],S0=["initial",..._0];function Eh(n){return Th(n.animate)||S0.some(e=>vc(n[e]))}function uS(n){return!!(Eh(n)||n.variants)}function f3(n,e){if(Eh(n)){const{initial:t,animate:s}=n;return{initial:t===!1||vc(t)?t:void 0,animate:vc(s)?s:void 0}}return n.inherit!==!1?e:{}}function m3(n){const{initial:e,animate:t}=f3(n,j.useContext(jh));return j.useMemo(()=>({initial:e,animate:t}),[Gw(e),Gw(t)])}function Gw(n){return Array.isArray(n)?n.join(" "):n}const g3=Symbol.for("motionComponentSymbol");function go(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function p3(n,e,t){return j.useCallback(s=>{s&&n.onMount&&n.onMount(s),e&&(s?e.mount(s):e.unmount()),t&&(typeof t=="function"?t(s):go(t)&&(t.current=s))},[e])}const C0=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),x3="framerAppearId",dS="data-"+C0(x3),hS=j.createContext({});function v3(n,e,t,s,r){const{visualElement:a}=j.useContext(jh),l=j.useContext(lS),u=j.useContext(Ch),h=j.useContext(w0).reducedMotion,f=j.useRef(null);s=s||l.renderer,!f.current&&s&&(f.current=s(n,{visualState:e,parent:a,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const g=f.current,x=j.useContext(hS);g&&!g.projection&&r&&(g.type==="html"||g.type==="svg")&&y3(f.current,t,r,x);const v=j.useRef(!1);j.useInsertionEffect(()=>{g&&v.current&&g.update(t,u)});const b=t[dS],w=j.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return x_(()=>{g&&(v.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),y0.render(g.render),w.current&&g.animationState&&g.animationState.animateChanges())}),j.useEffect(()=>{g&&(!w.current&&g.animationState&&g.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),w.current=!1))}),g}function y3(n,e,t,s){const{layoutId:r,layout:a,drag:l,dragConstraints:u,layoutScroll:h,layoutRoot:f,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:fS(n.parent)),n.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:!!l||u&&go(u),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:s,crossfade:g,layoutScroll:h,layoutRoot:f})}function fS(n){if(n)return n.options.allowProjection!==!1?n.projection:fS(n.parent)}function b3({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:s,Component:r}){n&&l3(n);function a(u,h){let f;const g={...j.useContext(w0),...u,layoutId:w3(u)},{isStatic:x}=g,v=m3(u),b=s(u,x);if(!x&&Zp){_3();const w=S3(g);f=w.MeasureLayout,v.visualElement=v3(r,b,g,e,w.ProjectionNode)}return d.jsxs(jh.Provider,{value:v,children:[f&&v.visualElement?d.jsx(f,{visualElement:v.visualElement,...g}):null,t(r,u,p3(b,v.visualElement,h),b,x,v.visualElement)]})}a.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const l=j.forwardRef(a);return l[g3]=r,l}function w3({layoutId:n}){const e=j.useContext(Kp).id;return e&&n!==void 0?e+"-"+n:n}function _3(n,e){j.useContext(lS).strict}function S3(n){const{drag:e,layout:t}=ko;if(!e&&!t)return{};const s={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const yc={};function C3(n){for(const e in n)yc[e]=n[e],a0(e)&&(yc[e].isCSSVariable=!0)}function mS(n,{layout:e,layoutId:t}){return Lo.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!yc[n]||n==="opacity")}const j3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},T3=Po.length;function E3(n,e,t){let s="",r=!0;for(let a=0;a<T3;a++){const l=Po[a],u=n[l];if(u===void 0)continue;let h=!0;if(typeof u=="number"?h=u===(l.startsWith("scale")?1:0):h=parseFloat(u)===0,!h||t){const f=sS(u,v0[l]);if(!h){r=!1;const g=j3[l]||l;s+=`${g}(${f}) `}t&&(e[l]=f)}}return s=s.trim(),t?s=t(e,r?"":s):r&&(s="none"),s}function j0(n,e,t){const{style:s,vars:r,transformOrigin:a}=n;let l=!1,u=!1;for(const h in e){const f=e[h];if(Lo.has(h)){l=!0;continue}else if(a0(h)){r[h]=f;continue}else{const g=sS(f,v0[h]);h.startsWith("origin")?(u=!0,a[h]=g):s[h]=g}}if(e.transform||(l||t?s.transform=E3(e,n.transform,t):s.transform&&(s.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:g=0}=a;s.transformOrigin=`${h} ${f} ${g}`}}const T0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function gS(n,e,t){for(const s in e)!Cs(e[s])&&!mS(s,t)&&(n[s]=e[s])}function k3({transformTemplate:n},e){return j.useMemo(()=>{const t=T0();return j0(t,e,n),Object.assign({},t.vars,t.style)},[e])}function A3(n,e){const t=n.style||{},s={};return gS(s,t,n),Object.assign(s,k3(n,e)),s}function N3(n,e){const t={},s=A3(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=s,t}const D3={offset:"stroke-dashoffset",array:"stroke-dasharray"},O3={offset:"strokeDashoffset",array:"strokeDasharray"};function M3(n,e,t=1,s=0,r=!0){n.pathLength=1;const a=r?D3:O3;n[a.offset]=He.transform(-s);const l=He.transform(e),u=He.transform(t);n[a.array]=`${l} ${u}`}function pS(n,{attrX:e,attrY:t,attrScale:s,pathLength:r,pathSpacing:a=1,pathOffset:l=0,...u},h,f,g){if(j0(n,u,f),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:x,style:v}=n;x.transform&&(v.transform=x.transform,delete x.transform),(v.transform||x.transformOrigin)&&(v.transformOrigin=x.transformOrigin??"50% 50%",delete x.transformOrigin),v.transform&&(v.transformBox=g?.transformBox??"fill-box",delete x.transformBox),e!==void 0&&(x.x=e),t!==void 0&&(x.y=t),s!==void 0&&(x.scale=s),r!==void 0&&M3(x,r,a,l,!1)}const xS=()=>({...T0(),attrs:{}}),vS=n=>typeof n=="string"&&n.toLowerCase()==="svg";function R3(n,e,t,s){const r=j.useMemo(()=>{const a=xS();return pS(a,e,vS(s),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};gS(a,n.style,n),r.style={...a,...r.style}}return r}const P3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function E0(n){return typeof n!="string"||n.includes("-")?!1:!!(P3.indexOf(n)>-1||/[A-Z]/u.test(n))}function L3(n=!1){return(t,s,r,{latestValues:a},l)=>{const h=(E0(t)?R3:N3)(s,a,l,t),f=d3(s,typeof t=="string",n),g=t!==j.Fragment?{...f,...h,ref:r}:{},{children:x}=s,v=j.useMemo(()=>Cs(x)?x.get():x,[x]);return j.createElement(t,{...g,children:v})}}function Yw(n){const e=[{},{}];return n?.values.forEach((t,s)=>{e[0][s]=t.get(),e[1][s]=t.getVelocity()}),e}function k0(n,e,t,s){if(typeof e=="function"){const[r,a]=Yw(s);e=e(t!==void 0?t:n.custom,r,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,a]=Yw(s);e=e(t!==void 0?t:n.custom,r,a)}return e}function Id(n){return Cs(n)?n.get():n}function B3({scrapeMotionValuesFromProps:n,createRenderState:e},t,s,r){return{latestValues:F3(t,s,r,n),renderState:e()}}const yS=n=>(e,t)=>{const s=j.useContext(jh),r=j.useContext(Ch),a=()=>B3(n,e,s,r);return t?a():Qp(a)};function F3(n,e,t,s){const r={},a=s(n,{});for(const v in a)r[v]=Id(a[v]);let{initial:l,animate:u}=n;const h=Eh(n),f=uS(n);e&&f&&!h&&n.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const x=g?u:l;if(x&&typeof x!="boolean"&&!Th(x)){const v=Array.isArray(x)?x:[x];for(let b=0;b<v.length;b++){const w=k0(n,v[b]);if(w){const{transitionEnd:_,transition:T,...S}=w;for(const A in S){let E=S[A];if(Array.isArray(E)){const M=g?E.length-1:0;E=E[M]}E!==null&&(r[A]=E)}for(const A in _)r[A]=_[A]}}}return r}function A0(n,e,t){const{style:s}=n,r={};for(const a in s)(Cs(s[a])||e.style&&Cs(e.style[a])||mS(a,n)||t?.getValue(a)?.liveStyle!==void 0)&&(r[a]=s[a]);return r}const U3={useVisualState:yS({scrapeMotionValuesFromProps:A0,createRenderState:T0})};function bS(n,e,t){const s=A0(n,e,t);for(const r in n)if(Cs(n[r])||Cs(e[r])){const a=Po.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[a]=n[r]}return s}const z3={useVisualState:yS({scrapeMotionValuesFromProps:bS,createRenderState:xS})};function V3(n,e){return function(s,{forwardMotionProps:r}={forwardMotionProps:!1}){const l={...E0(s)?z3:U3,preloadedFeatures:n,useRender:L3(r),createVisualElement:e,Component:s};return b3(l)}}function bc(n,e,t){const s=n.getProps();return k0(s,e,t!==void 0?t:s.custom,n)}const hp=n=>Array.isArray(n);function I3(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Eo(t))}function H3(n){return hp(n)?n[n.length-1]||0:n}function $3(n,e){const t=bc(n,e);let{transitionEnd:s={},transition:r={},...a}=t||{};a={...a,...s};for(const l in a){const u=H3(a[l]);I3(n,l,u)}}function G3(n){return!!(Cs(n)&&n.add)}function fp(n,e){const t=n.getValue("willChange");if(G3(t))return t.add(e);if(!t&&Rr.WillChange){const s=new Rr.WillChange("auto");n.addValue("willChange",s),s.add(e)}}function wS(n){return n.props[dS]}const Y3=n=>n!==null;function q3(n,{repeat:e,repeatType:t="loop"},s){const r=n.filter(Y3),a=e&&t!=="loop"&&e%2===1?0:r.length-1;return r[a]}const W3={type:"spring",stiffness:500,damping:25,restSpeed:10},X3=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),K3={type:"keyframes",duration:.8},Q3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Z3=(n,{keyframes:e})=>e.length>2?K3:Lo.has(n)?n.startsWith("scale")?X3(e[1]):W3:Q3;function J3({when:n,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:r,repeat:a,repeatType:l,repeatDelay:u,from:h,elapsed:f,...g}){return!!Object.keys(g).length}const N0=(n,e,t,s={},r,a)=>l=>{const u=x0(s,n)||{},h=u.delay||s.delay||0;let{elapsed:f=0}=s;f=f-Qn(h);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:v=>{e.set(v),u.onUpdate&&u.onUpdate(v)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:n,motionValue:e,element:a?void 0:r};J3(u)||Object.assign(g,Z3(n,g)),g.duration&&(g.duration=Qn(g.duration)),g.repeatDelay&&(g.repeatDelay=Qn(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let x=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(x=!0)),(Rr.instantAnimations||Rr.skipAnimations)&&(x=!0,g.duration=0,g.delay=0),g.allowFlatten=!u.type&&!u.ease,x&&!a&&e.get()!==void 0){const v=q3(g.keyframes,u);if(v!==void 0){wt.update(()=>{g.onUpdate(v),g.onComplete()});return}}return u.isSync?new m0(g):new OO(g)};function e5({protectedKeys:n,needsAnimating:e},t){const s=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function _S(n,e,{delay:t=0,transitionOverride:s,type:r}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:l,...u}=e;s&&(a=s);const h=[],f=r&&n.animationState&&n.animationState.getState()[r];for(const g in u){const x=n.getValue(g,n.latestValues[g]??null),v=u[g];if(v===void 0||f&&e5(f,g))continue;const b={delay:t,...x0(a||{},g)},w=x.get();if(w!==void 0&&!x.isAnimating&&!Array.isArray(v)&&v===w&&!b.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const S=wS(n);if(S){const A=window.MotionHandoffAnimation(S,g,wt);A!==null&&(b.startTime=A,_=!0)}}fp(n,g),x.start(N0(g,x,v,n.shouldReduceMotion&&Q_.has(g)?{type:!1}:b,n,_));const T=x.animation;T&&h.push(T)}return l&&Promise.all(h).then(()=>{wt.update(()=>{l&&$3(n,l)})}),h}function mp(n,e,t={}){const s=bc(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(r=t.transitionOverride);const a=s?()=>Promise.all(_S(n,s,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:g,staggerDirection:x}=r;return t5(n,e,h,f,g,x,t)}:()=>Promise.resolve(),{when:u}=r;if(u){const[h,f]=u==="beforeChildren"?[a,l]:[l,a];return h().then(()=>f())}else return Promise.all([a(),l(t.delay)])}function t5(n,e,t=0,s=0,r=0,a=1,l){const u=[],h=n.variantChildren.size,f=(h-1)*r,g=typeof s=="function",x=g?v=>s(v,h):a===1?(v=0)=>v*r:(v=0)=>f-v*r;return Array.from(n.variantChildren).sort(s5).forEach((v,b)=>{v.notify("AnimationStart",e),u.push(mp(v,e,{...l,delay:t+(g?0:s)+x(b)}).then(()=>v.notify("AnimationComplete",e)))}),Promise.all(u)}function s5(n,e){return n.sortNodePosition(e)}function n5(n,e,t={}){n.notify("AnimationStart",e);let s;if(Array.isArray(e)){const r=e.map(a=>mp(n,a,t));s=Promise.all(r)}else if(typeof e=="string")s=mp(n,e,t);else{const r=typeof e=="function"?bc(n,e,t.custom):e;s=Promise.all(_S(n,r,t))}return s.then(()=>{n.notify("AnimationComplete",e)})}function SS(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let s=0;s<t;s++)if(e[s]!==n[s])return!1;return!0}const r5=S0.length;function CS(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?CS(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<r5;t++){const s=S0[t],r=n.props[s];(vc(r)||r===!1)&&(e[s]=r)}return e}const i5=[..._0].reverse(),a5=_0.length;function o5(n){return e=>Promise.all(e.map(({animation:t,options:s})=>n5(n,t,s)))}function l5(n){let e=o5(n),t=qw(),s=!0;const r=h=>(f,g)=>{const x=bc(n,g,h==="exit"?n.presenceContext?.custom:void 0);if(x){const{transition:v,transitionEnd:b,...w}=x;f={...f,...w,...b}}return f};function a(h){e=h(n)}function l(h){const{props:f}=n,g=CS(n.parent)||{},x=[],v=new Set;let b={},w=1/0;for(let T=0;T<a5;T++){const S=i5[T],A=t[S],E=f[S]!==void 0?f[S]:g[S],M=vc(E),D=S===h?A.isActive:null;D===!1&&(w=T);let B=E===g[S]&&E!==f[S]&&M;if(B&&s&&n.manuallyAnimateOnMount&&(B=!1),A.protectedKeys={...b},!A.isActive&&D===null||!E&&!A.prevProp||Th(E)||typeof E=="boolean")continue;const F=c5(A.prevProp,E);let L=F||S===h&&A.isActive&&!B&&M||T>w&&M,V=!1;const N=Array.isArray(E)?E:[E];let H=N.reduce(r(S),{});D===!1&&(H={});const{prevResolvedValues:Y={}}=A,se={...Y,...H},te=$=>{L=!0,v.has($)&&(V=!0,v.delete($)),A.needsAnimating[$]=!0;const Q=n.getValue($);Q&&(Q.liveStyle=!1)};for(const $ in se){const Q=H[$],pe=Y[$];if(b.hasOwnProperty($))continue;let O=!1;hp(Q)&&hp(pe)?O=!SS(Q,pe):O=Q!==pe,O?Q!=null?te($):v.add($):Q!==void 0&&v.has($)?te($):A.protectedKeys[$]=!0}A.prevProp=E,A.prevResolvedValues=H,A.isActive&&(b={...b,...H}),s&&n.blockInitialAnimation&&(L=!1),L&&(!(B&&F)||V)&&x.push(...N.map($=>({animation:$,options:{type:S}})))}if(v.size){const T={};if(typeof f.initial!="boolean"){const S=bc(n,Array.isArray(f.initial)?f.initial[0]:f.initial);S&&S.transition&&(T.transition=S.transition)}v.forEach(S=>{const A=n.getBaseTarget(S),E=n.getValue(S);E&&(E.liveStyle=!0),T[S]=A??null}),x.push({animation:T})}let _=!!x.length;return s&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(_=!1),s=!1,_?e(x):Promise.resolve()}function u(h,f){if(t[h].isActive===f)return Promise.resolve();n.variantChildren?.forEach(x=>x.animationState?.setActive(h,f)),t[h].isActive=f;const g=l(h);for(const x in t)t[x].protectedKeys={};return g}return{animateChanges:l,setActive:u,setAnimateFunction:a,getState:()=>t,reset:()=>{t=qw(),s=!0}}}function c5(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!SS(e,n):!1}function Ki(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function qw(){return{animate:Ki(!0),whileInView:Ki(),whileHover:Ki(),whileTap:Ki(),whileDrag:Ki(),whileFocus:Ki(),exit:Ki()}}class ki{constructor(e){this.isMounted=!1,this.node=e}update(){}}class u5 extends ki{constructor(e){super(e),e.animationState||(e.animationState=l5(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Th(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let d5=0;class h5 extends ki{constructor(){super(...arguments),this.id=d5++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const f5={animation:{Feature:u5},exit:{Feature:h5}};function wc(n,e,t,s={passive:!0}){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t)}function Lc(n){return{point:{x:n.pageX,y:n.pageY}}}const m5=n=>e=>b0(e)&&n(e,Lc(e));function ic(n,e,t,s){return wc(n,e,m5(t),s)}function jS({top:n,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:n,max:s}}}function g5({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function p5(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),s=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}const TS=1e-4,x5=1-TS,v5=1+TS,ES=.01,y5=0-ES,b5=0+ES;function ks(n){return n.max-n.min}function w5(n,e,t){return Math.abs(n-e)<=t}function Ww(n,e,t,s=.5){n.origin=s,n.originPoint=Et(e.min,e.max,n.origin),n.scale=ks(t)/ks(e),n.translate=Et(t.min,t.max,n.origin)-n.originPoint,(n.scale>=x5&&n.scale<=v5||isNaN(n.scale))&&(n.scale=1),(n.translate>=y5&&n.translate<=b5||isNaN(n.translate))&&(n.translate=0)}function ac(n,e,t,s){Ww(n.x,e.x,t.x,s?s.originX:void 0),Ww(n.y,e.y,t.y,s?s.originY:void 0)}function Xw(n,e,t){n.min=t.min+e.min,n.max=n.min+ks(e)}function _5(n,e,t){Xw(n.x,e.x,t.x),Xw(n.y,e.y,t.y)}function Kw(n,e,t){n.min=e.min-t.min,n.max=n.min+ks(e)}function oc(n,e,t){Kw(n.x,e.x,t.x),Kw(n.y,e.y,t.y)}const Qw=()=>({translate:0,scale:1,origin:0,originPoint:0}),po=()=>({x:Qw(),y:Qw()}),Zw=()=>({min:0,max:0}),Pt=()=>({x:Zw(),y:Zw()});function gn(n){return[n("x"),n("y")]}function fg(n){return n===void 0||n===1}function gp({scale:n,scaleX:e,scaleY:t}){return!fg(n)||!fg(e)||!fg(t)}function Zi(n){return gp(n)||kS(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function kS(n){return Jw(n.x)||Jw(n.y)}function Jw(n){return n&&n!=="0%"}function rh(n,e,t){const s=n-t,r=e*s;return t+r}function e1(n,e,t,s,r){return r!==void 0&&(n=rh(n,r,s)),rh(n,t,s)+e}function pp(n,e=0,t=1,s,r){n.min=e1(n.min,e,t,s,r),n.max=e1(n.max,e,t,s,r)}function AS(n,{x:e,y:t}){pp(n.x,e.translate,e.scale,e.originPoint),pp(n.y,t.translate,t.scale,t.originPoint)}const t1=.999999999999,s1=1.0000000000001;function S5(n,e,t,s=!1){const r=t.length;if(!r)return;e.x=e.y=1;let a,l;for(let u=0;u<r;u++){a=t[u],l=a.projectionDelta;const{visualElement:h}=a.options;h&&h.props.style&&h.props.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&vo(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,AS(n,l)),s&&Zi(a.latestValues)&&vo(n,a.latestValues))}e.x<s1&&e.x>t1&&(e.x=1),e.y<s1&&e.y>t1&&(e.y=1)}function xo(n,e){n.min=n.min+e,n.max=n.max+e}function n1(n,e,t,s,r=.5){const a=Et(n.min,n.max,r);pp(n,e,t,a,s)}function vo(n,e){n1(n.x,e.x,e.scaleX,e.scale,e.originX),n1(n.y,e.y,e.scaleY,e.scale,e.originY)}function NS(n,e){return jS(p5(n.getBoundingClientRect(),e))}function C5(n,e,t){const s=NS(n,t),{scroll:r}=e;return r&&(xo(s.x,r.offset.x),xo(s.y,r.offset.y)),s}const DS=({current:n})=>n?n.ownerDocument.defaultView:null,r1=(n,e)=>Math.abs(n-e);function j5(n,e){const t=r1(n.x,e.x),s=r1(n.y,e.y);return Math.sqrt(t**2+s**2)}class OS{constructor(e,t,{transformPagePoint:s,contextWindow:r=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=gg(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,w=j5(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!w)return;const{point:_}=v,{timestamp:T}=gs;this.history.push({..._,timestamp:T});const{onStart:S,onMove:A}=this.handlers;b||(S&&S(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,v)},this.handlePointerMove=(v,b)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=mg(b,this.transformPagePoint),wt.update(this.updatePoint,!0)},this.handlePointerUp=(v,b)=>{this.end();const{onEnd:w,onSessionEnd:_,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=gg(v.type==="pointercancel"?this.lastMoveEventInfo:mg(b,this.transformPagePoint),this.history);this.startEvent&&w&&w(v,S),_&&_(v,S)},!b0(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=s,this.distanceThreshold=l,this.contextWindow=r||window;const u=Lc(e),h=mg(u,this.transformPagePoint),{point:f}=h,{timestamp:g}=gs;this.history=[{...f,timestamp:g}];const{onSessionStart:x}=t;x&&x(e,gg(h,this.history)),this.removeListeners=Mc(ic(this.contextWindow,"pointermove",this.handlePointerMove),ic(this.contextWindow,"pointerup",this.handlePointerUp),ic(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),bi(this.updatePoint)}}function mg(n,e){return e?{point:e(n.point)}:n}function i1(n,e){return{x:n.x-e.x,y:n.y-e.y}}function gg({point:n},e){return{point:n,delta:i1(n,MS(e)),offset:i1(n,T5(e)),velocity:E5(e,.1)}}function T5(n){return n[0]}function MS(n){return n[n.length-1]}function E5(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,s=null;const r=MS(n);for(;t>=0&&(s=n[t],!(r.timestamp-s.timestamp>Qn(e)));)t--;if(!s)return{x:0,y:0};const a=Zn(r.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const l={x:(r.x-s.x)/a,y:(r.y-s.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function k5(n,{min:e,max:t},s){return e!==void 0&&n<e?n=s?Et(e,n,s.min):Math.max(n,e):t!==void 0&&n>t&&(n=s?Et(t,n,s.max):Math.min(n,t)),n}function a1(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function A5(n,{top:e,left:t,bottom:s,right:r}){return{x:a1(n.x,t,r),y:a1(n.y,e,s)}}function o1(n,e){let t=e.min-n.min,s=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,s]=[s,t]),{min:t,max:s}}function N5(n,e){return{x:o1(n.x,e.x),y:o1(n.y,e.y)}}function D5(n,e){let t=.5;const s=ks(n),r=ks(e);return r>s?t=gc(e.min,e.max-s,n.min):s>r&&(t=gc(n.min,n.max-r,e.min)),Mr(0,1,t)}function O5(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const xp=.35;function M5(n=xp){return n===!1?n=0:n===!0&&(n=xp),{x:l1(n,"left","right"),y:l1(n,"top","bottom")}}function l1(n,e,t){return{min:c1(n,e),max:c1(n,t)}}function c1(n,e){return typeof n=="number"?n:n[e]||0}const R5=new WeakMap;class P5{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:s}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=x=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Lc(x).point)},l=(x,v)=>{const{drag:b,dragPropagation:w,onDragStart:_}=this.getProps();if(b&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=WO(b),!this.openDragLock))return;this.latestPointerEvent=x,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gn(S=>{let A=this.getAxisMotionValue(S).get()||0;if(Jn.test(A)){const{projection:E}=this.visualElement;if(E&&E.layout){const M=E.layout.layoutBox[S];M&&(A=ks(M)*(parseFloat(A)/100))}}this.originPoint[S]=A}),_&&wt.postRender(()=>_(x,v)),fp(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},u=(x,v)=>{this.latestPointerEvent=x,this.latestPanInfo=v;const{dragPropagation:b,dragDirectionLock:w,onDirectionLock:_,onDrag:T}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:S}=v;if(w&&this.currentDirection===null){this.currentDirection=L5(S),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",v.point,S),this.updateAxis("y",v.point,S),this.visualElement.render(),T&&T(x,v)},h=(x,v)=>{this.latestPointerEvent=x,this.latestPanInfo=v,this.stop(x,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>gn(x=>this.getAnimationState(x)==="paused"&&this.getAxisMotionValue(x).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new OS(e,{onSessionStart:a,onStart:l,onMove:u,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:s,contextWindow:DS(this.visualElement)})}stop(e,t){const s=e||this.latestPointerEvent,r=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!r||!s)return;const{velocity:l}=r;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&wt.postRender(()=>u(s,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:r}=this.getProps();if(!s||!cd(e,r,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(l=k5(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&go(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=A5(s.layoutBox,e):this.constraints=!1,this.elastic=M5(t),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&gn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=O5(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!go(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=C5(s,r.root,this.visualElement.getTransformPagePoint());let l=N5(r.layout.layoutBox,a);if(t){const u=t(g5(l));this.hasMutatedConstraints=!!u,u&&(l=jS(u))}return l}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:r,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=gn(g=>{if(!cd(g,t,this.currentDirection))return;let x=h&&h[g]||{};l&&(x={min:0,max:0});const v=r?200:1e6,b=r?40:1e7,w={type:"inertia",velocity:s?e[g]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...x};return this.startAxisValueAnimation(g,w)});return Promise.all(f).then(u)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return fp(this.visualElement,e),s.start(N0(e,s,0,t,this.visualElement,!1))}stopAnimation(){gn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){gn(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),r=s[t];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){gn(t=>{const{drag:s}=this.getProps();if(!cd(t,s,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(t);if(r&&r.layout){const{min:l,max:u}=r.layout.layoutBox[t];a.set(e[t]-Et(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!go(t)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};gn(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const h=u.get();r[l]=D5({min:h,max:h},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),gn(l=>{if(!cd(l,e,null))return;const u=this.getAxisMotionValue(l),{min:h,max:f}=this.constraints[l];u.set(Et(h,f,r[l]))})}addListeners(){if(!this.visualElement.current)return;R5.set(this.visualElement,this);const e=this.visualElement.current,t=ic(e,"pointerdown",h=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(h)}),s=()=>{const{dragConstraints:h}=this.getProps();go(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,a=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),wt.read(s);const l=wc(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(gn(g=>{const x=this.getAxisMotionValue(g);x&&(this.originPoint[g]+=h[g].translate,x.set(x.get()+h[g].translate))}),this.visualElement.render())});return()=>{l(),t(),a(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:l=xp,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:r,dragConstraints:a,dragElastic:l,dragMomentum:u}}}function cd(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function L5(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class B5 extends ki{constructor(e){super(e),this.removeGroupControls=xn,this.removeListeners=xn,this.controls=new P5(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xn}unmount(){this.removeGroupControls(),this.removeListeners()}}const u1=n=>(e,t)=>{n&&wt.postRender(()=>n(e,t))};class F5 extends ki{constructor(){super(...arguments),this.removePointerDownListener=xn}onPointerDown(e){this.session=new OS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:DS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:u1(e),onStart:u1(t),onMove:s,onEnd:(a,l)=>{delete this.session,r&&wt.postRender(()=>r(a,l))}}}mount(){this.removePointerDownListener=ic(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Hd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function d1(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const $l={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(He.test(n))n=parseFloat(n);else return n;const t=d1(n,e.target.x),s=d1(n,e.target.y);return`${t}% ${s}%`}},U5={correct:(n,{treeScale:e,projectionDelta:t})=>{const s=n,r=wi.parse(n);if(r.length>5)return s;const a=wi.createTransformer(n),l=typeof r[0]!="number"?1:0,u=t.x.scale*e.x,h=t.y.scale*e.y;r[0+l]/=u,r[1+l]/=h;const f=Et(u,h,.5);return typeof r[2+l]=="number"&&(r[2+l]/=f),typeof r[3+l]=="number"&&(r[3+l]/=f),a(r)}};let h1=!1;class z5 extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:r}=this.props,{projection:a}=e;C3(V5),a&&(t.group&&t.group.add(a),s&&s.register&&r&&s.register(a),h1&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Hd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:r,isPresent:a}=this.props,{projection:l}=s;return l&&(l.isPresent=a,h1=!0,r||e.layoutDependency!==t||t===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||wt.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),y0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function RS(n){const[e,t]=oS(),s=j.useContext(Kp);return d.jsx(z5,{...n,layoutGroup:s,switchLayoutGroup:j.useContext(hS),isPresent:e,safeToRemove:t})}const V5={borderRadius:{...$l,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$l,borderTopRightRadius:$l,borderBottomLeftRadius:$l,borderBottomRightRadius:$l,boxShadow:U5};function I5(n,e,t){const s=Cs(n)?n:Eo(n);return s.start(N0("",s,e,t)),s.animation}const H5=(n,e)=>n.depth-e.depth;class $5{constructor(){this.children=[],this.isDirty=!1}add(e){Jp(this.children,e),this.isDirty=!0}remove(e){e0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(H5),this.isDirty=!1,this.children.forEach(e)}}function G5(n,e){const t=Fs.now(),s=({timestamp:r})=>{const a=r-t;a>=e&&(bi(s),n(a-e))};return wt.setup(s,!0),()=>bi(s)}const PS=["TopLeft","TopRight","BottomLeft","BottomRight"],Y5=PS.length,f1=n=>typeof n=="string"?parseFloat(n):n,m1=n=>typeof n=="number"||He.test(n);function q5(n,e,t,s,r,a){r?(n.opacity=Et(0,t.opacity??1,W5(s)),n.opacityExit=Et(e.opacity??1,0,X5(s))):a&&(n.opacity=Et(e.opacity??1,t.opacity??1,s));for(let l=0;l<Y5;l++){const u=`border${PS[l]}Radius`;let h=g1(e,u),f=g1(t,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||m1(h)===m1(f)?(n[u]=Math.max(Et(f1(h),f1(f),s),0),(Jn.test(f)||Jn.test(h))&&(n[u]+="%")):n[u]=f}(e.rotate||t.rotate)&&(n.rotate=Et(e.rotate||0,t.rotate||0,s))}function g1(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const W5=LS(0,.5,k_),X5=LS(.5,.95,xn);function LS(n,e,t){return s=>s<n?0:s>e?1:t(gc(n,e,s))}function p1(n,e){n.min=e.min,n.max=e.max}function fn(n,e){p1(n.x,e.x),p1(n.y,e.y)}function x1(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function v1(n,e,t,s,r){return n-=e,n=rh(n,1/t,s),r!==void 0&&(n=rh(n,1/r,s)),n}function K5(n,e=0,t=1,s=.5,r,a=n,l=n){if(Jn.test(e)&&(e=parseFloat(e),e=Et(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=Et(a.min,a.max,s);n===a&&(u-=e),n.min=v1(n.min,e,t,u,r),n.max=v1(n.max,e,t,u,r)}function y1(n,e,[t,s,r],a,l){K5(n,e[t],e[s],e[r],e.scale,a,l)}const Q5=["x","scaleX","originX"],Z5=["y","scaleY","originY"];function b1(n,e,t,s){y1(n.x,e,Q5,t?t.x:void 0,s?s.x:void 0),y1(n.y,e,Z5,t?t.y:void 0,s?s.y:void 0)}function w1(n){return n.translate===0&&n.scale===1}function BS(n){return w1(n.x)&&w1(n.y)}function _1(n,e){return n.min===e.min&&n.max===e.max}function J5(n,e){return _1(n.x,e.x)&&_1(n.y,e.y)}function S1(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function FS(n,e){return S1(n.x,e.x)&&S1(n.y,e.y)}function C1(n){return ks(n.x)/ks(n.y)}function j1(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class eM{constructor(){this.members=[]}add(e){Jp(this.members,e),e.scheduleRender()}remove(e){if(e0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let s;for(let r=t;r>=0;r--){const a=this.members[r];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function tM(n,e,t){let s="";const r=n.x.translate/e.x,a=n.y.translate/e.y,l=t?.z||0;if((r||a||l)&&(s=`translate3d(${r}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:g,rotateX:x,rotateY:v,skewX:b,skewY:w}=t;f&&(s=`perspective(${f}px) ${s}`),g&&(s+=`rotate(${g}deg) `),x&&(s+=`rotateX(${x}deg) `),v&&(s+=`rotateY(${v}deg) `),b&&(s+=`skewX(${b}deg) `),w&&(s+=`skewY(${w}deg) `)}const u=n.x.scale*e.x,h=n.y.scale*e.y;return(u!==1||h!==1)&&(s+=`scale(${u}, ${h})`),s||"none"}const pg=["","X","Y","Z"],sM=1e3;let nM=0;function xg(n,e,t,s){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),s&&(s[n]=0))}function US(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=wS(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",wt,!(r||a))}const{parent:s}=n;s&&!s.hasCheckedOptimisedAppear&&US(s)}function zS({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(l={},u=e?.()){this.id=nM++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(aM),this.nodes.forEach(uM),this.nodes.forEach(dM),this.nodes.forEach(oM)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new $5)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new n0),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const h=this.eventHandlers.get(l);h&&h.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=aS(l)&&!e3(l),this.instance=l;const{layoutId:u,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||u)&&(this.isLayoutDirty=!0),n){let g,x=0;const v=()=>this.root.updateBlockedByResize=!1;wt.read(()=>{x=window.innerWidth}),n(l,()=>{const b=window.innerWidth;b!==x&&(x=b,this.root.updateBlockedByResize=!0,g&&g(),g=G5(v,250),Hd.hasAnimatedSinceResize&&(Hd.hasAnimatedSinceResize=!1,this.nodes.forEach(k1)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:x,hasRelativeLayoutChanged:v,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||f.getDefaultTransition()||pM,{onLayoutAnimationStart:_,onLayoutAnimationComplete:T}=f.getProps(),S=!this.targetLayout||!FS(this.targetLayout,b),A=!x&&v;if(this.options.layoutRoot||this.resumeFrom||A||x&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...x0(w,"layout"),onPlay:_,onComplete:T};(f.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(g,A)}else x||k1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),bi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(hM),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&US(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const x=this.path[g];x.shouldResetTransform=!0,x.updateScroll("snapshot"),x.options.layoutRoot&&x.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(T1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(E1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(cM),this.nodes.forEach(rM),this.nodes.forEach(iM)):this.nodes.forEach(E1),this.clearAllSnapshots();const u=Fs.now();gs.delta=Mr(0,1e3/60,u-gs.timestamp),gs.timestamp=u,gs.isProcessing=!0,og.update.process(gs),og.preRender.process(gs),og.render.process(gs),gs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,y0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(lM),this.sharedNodes.forEach(fM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ks(this.snapshot.measuredBox.x)&&!ks(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const h=s(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!BS(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;l&&this.instance&&(u||Zi(this.latestValues)||g)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return l&&(h=this.removeTransform(h)),xM(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Pt();const u=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(vM))){const{scroll:f}=this.root;f&&(xo(u.x,f.offset.x),xo(u.y,f.offset.y))}return u}removeElementScroll(l){const u=Pt();if(fn(u,l),this.scroll?.wasRoot)return u;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:g,options:x}=f;f!==this.root&&g&&x.layoutScroll&&(g.wasRoot&&fn(u,l),xo(u.x,g.offset.x),xo(u.y,g.offset.y))}return u}applyTransform(l,u=!1){const h=Pt();fn(h,l);for(let f=0;f<this.path.length;f++){const g=this.path[f];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&vo(h,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Zi(g.latestValues)&&vo(h,g.latestValues)}return Zi(this.latestValues)&&vo(h,this.latestValues),h}removeTransform(l){const u=Pt();fn(u,l);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Zi(f.latestValues))continue;gp(f.latestValues)&&f.updateSnapshot();const g=Pt(),x=f.measurePageBox();fn(g,x),b1(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return Zi(this.latestValues)&&b1(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:x}=this.options;if(!(!this.layout||!(g||x))){if(this.resolvedRelativeTargetAt=gs.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),oc(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Pt(),this.targetWithTransforms=Pt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_5(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):fn(this.target,this.layout.layoutBox),AS(this.target,this.targetDelta)):fn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),oc(this.relativeTargetOrigin,this.target,v.target),fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||gp(this.parent.latestValues)||kS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),u=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===gs.timestamp&&(h=!1),h)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;fn(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,v=this.treeScale.y;S5(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Pt());const{target:b}=l;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(x1(this.prevProjectionDelta.x,this.projectionDelta.x),x1(this.prevProjectionDelta.y,this.projectionDelta.y)),ac(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==v||!j1(this.projectionDelta.x,this.prevProjectionDelta.x)||!j1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=po(),this.projectionDelta=po(),this.projectionDeltaWithTransform=po()}setAnimationOrigin(l,u=!1){const h=this.snapshot,f=h?h.latestValues:{},g={...this.latestValues},x=po();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=Pt(),b=h?h.source:void 0,w=this.layout?this.layout.source:void 0,_=b!==w,T=this.getStack(),S=!T||T.members.length<=1,A=!!(_&&!S&&this.options.crossfade===!0&&!this.path.some(gM));this.animationProgress=0;let E;this.mixTargetDelta=M=>{const D=M/1e3;A1(x.x,l.x,D),A1(x.y,l.y,D),this.setTargetDelta(x),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(oc(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mM(this.relativeTarget,this.relativeTargetOrigin,v,D),E&&J5(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=Pt()),fn(E,this.relativeTarget)),_&&(this.animationValues=g,q5(g,f,this.latestValues,D,A,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(bi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wt.update(()=>{Hd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Eo(0)),this.currentAnimation=I5(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(sM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:g}=l;if(!(!u||!h||!f)){if(this!==l&&this.layout&&f&&VS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||Pt();const x=ks(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+x;const v=ks(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+v}fn(u,h),vo(u,g),ac(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new eM),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const f={};h.z&&xg("z",l,f,this.animationValues);for(let g=0;g<pg.length;g++)xg(`rotate${pg[g]}`,l,f,this.animationValues),xg(`skew${pg[g]}`,l,f,this.animationValues);l.render();for(const g in f)l.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Id(u?.pointerEvents)||"",l.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Id(u?.pointerEvents)||""),this.hasProjected&&!Zi(this.latestValues)&&(l.transform=h?h({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let x=tM(this.projectionDeltaWithTransform,this.treeScale,g);h&&(x=h(g,x)),l.transform=x;const{x:v,y:b}=this.projectionDelta;l.transformOrigin=`${v.origin*100}% ${b.origin*100}% 0`,f.animationValues?l.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const w in yc){if(g[w]===void 0)continue;const{correct:_,applyTo:T,isCSSVariable:S}=yc[w],A=x==="none"?g[w]:_(g[w],f);if(T){const E=T.length;for(let M=0;M<E;M++)l[T[M]]=A}else S?this.options.visualElement.renderState.vars[w]=A:l[w]=A}this.options.layoutId&&(l.pointerEvents=f===this?Id(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(T1),this.root.sharedNodes.clear()}}}function rM(n){n.updateLayout()}function iM(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:s}=n.layout,{animationType:r}=n.options,a=e.source!==n.layout.source;r==="size"?gn(g=>{const x=a?e.measuredBox[g]:e.layoutBox[g],v=ks(x);x.min=t[g].min,x.max=x.min+v}):VS(r,e.layoutBox,t)&&gn(g=>{const x=a?e.measuredBox[g]:e.layoutBox[g],v=ks(t[g]);x.max=x.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+v)});const l=po();ac(l,t,e.layoutBox);const u=po();a?ac(u,n.applyTransform(s,!0),e.measuredBox):ac(u,t,e.layoutBox);const h=!BS(l);let f=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:x,layout:v}=g;if(x&&v){const b=Pt();oc(b,e.layoutBox,x.layoutBox);const w=Pt();oc(w,t,v.layoutBox),FS(b,w)||(f=!0),g.options.layoutRoot&&(n.relativeTarget=w,n.relativeTargetOrigin=b,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:h,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function aM(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function oM(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function lM(n){n.clearSnapshot()}function T1(n){n.clearMeasurements()}function E1(n){n.isLayoutDirty=!1}function cM(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function k1(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function uM(n){n.resolveTargetDelta()}function dM(n){n.calcProjection()}function hM(n){n.resetSkewAndRotation()}function fM(n){n.removeLeadSnapshot()}function A1(n,e,t){n.translate=Et(e.translate,0,t),n.scale=Et(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function N1(n,e,t,s){n.min=Et(e.min,t.min,s),n.max=Et(e.max,t.max,s)}function mM(n,e,t,s){N1(n.x,e.x,t.x,s),N1(n.y,e.y,t.y,s)}function gM(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const pM={duration:.45,ease:[.4,0,.1,1]},D1=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),O1=D1("applewebkit/")&&!D1("chrome/")?Math.round:xn;function M1(n){n.min=O1(n.min),n.max=O1(n.max)}function xM(n){M1(n.x),M1(n.y)}function VS(n,e,t){return n==="position"||n==="preserve-aspect"&&!w5(C1(e),C1(t),.2)}function vM(n){return n!==n.root&&n.scroll?.wasRoot}const yM=zS({attachResizeListener:(n,e)=>wc(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vg={current:void 0},IS=zS({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!vg.current){const n=new yM({});n.mount(window),n.setOptions({layoutScroll:!0}),vg.current=n}return vg.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),bM={pan:{Feature:F5},drag:{Feature:B5,ProjectionNode:IS,MeasureLayout:RS}};function R1(n,e,t){const{props:s}=n;n.animationState&&s.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,a=s[r];a&&wt.postRender(()=>a(e,Lc(e)))}class wM extends ki{mount(){const{current:e}=this.node;e&&(this.unmount=XO(e,(t,s)=>(R1(this.node,s,"Start"),r=>R1(this.node,r,"End"))))}unmount(){}}class _M extends ki{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Mc(wc(this.node.current,"focus",()=>this.onFocus()),wc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function P1(n,e,t){const{props:s}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&s.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),a=s[r];a&&wt.postRender(()=>a(e,Lc(e)))}class SM extends ki{mount(){const{current:e}=this.node;e&&(this.unmount=JO(e,(t,s)=>(P1(this.node,s,"Start"),(r,{success:a})=>P1(this.node,r,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const vp=new WeakMap,yg=new WeakMap,CM=n=>{const e=vp.get(n.target);e&&e(n)},jM=n=>{n.forEach(CM)};function TM({root:n,...e}){const t=n||document;yg.has(t)||yg.set(t,{});const s=yg.get(t),r=JSON.stringify(e);return s[r]||(s[r]=new IntersectionObserver(jM,{root:n,...e})),s[r]}function EM(n,e,t){const s=TM(e);return vp.set(n,t),s.observe(n),()=>{vp.delete(n),s.unobserve(n)}}const kM={some:0,all:1};class AM extends ki{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:r="some",once:a}=e,l={root:t?t.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:kM[r]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:x}=this.node.getProps(),v=f?g:x;v&&v(h)};return EM(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(NM(e,t))&&this.startObserver()}unmount(){}}function NM({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const DM={inView:{Feature:AM},tap:{Feature:SM},focus:{Feature:_M},hover:{Feature:wM}},OM={layout:{ProjectionNode:IS,MeasureLayout:RS}},yp={current:null},HS={current:!1};function MM(){if(HS.current=!0,!!Zp)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>yp.current=n.matches;n.addEventListener("change",e),e()}else yp.current=!1}const RM=new WeakMap;function PM(n,e,t){for(const s in e){const r=e[s],a=t[s];if(Cs(r))n.addValue(s,r);else if(Cs(a))n.addValue(s,Eo(r,{owner:n}));else if(a!==r)if(n.hasValue(s)){const l=n.getValue(s);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=n.getStaticValue(s);n.addValue(s,Eo(l!==void 0?l:r,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const L1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class LM{scrapeMotionValuesFromProps(e,t,s){return{}}constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:r,blockInitialAnimation:a,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=g0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Fs.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,wt.render(this.render,!1,!0))};const{latestValues:h,renderState:f}=l;this.latestValues=h,this.baseTarget={...h},this.initialValues=t.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=u,this.blockInitialAnimation=!!a,this.isControllingVariants=Eh(t),this.isVariantNode=uS(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...x}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in x){const b=x[v];h[v]!==void 0&&Cs(b)&&b.set(h[v],!1)}}mount(e){this.current=e,RM.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,s)=>this.bindToMotionValue(s,t)),HS.current||MM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:yp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),bi(this.notifyUpdate),bi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Lo.has(e);s&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&wt.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),a(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ko){const t=ko[e];if(!t)continue;const{isEnabled:s,Feature:r}=t;if(!this.features[e]&&r&&s(this.props)&&(this.features[e]=new r(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<L1.length;s++){const r=L1[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const a="on"+r,l=e[a];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=PM(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=Eo(t===null?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(v_(s)||b_(s))?s=parseFloat(s):!s3(s)&&wi.test(t)&&(s=tS(e,t)),this.setBaseTarget(e,Cs(s)?s.get():s)),Cs(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let s;if(typeof t=="string"||typeof t=="object"){const a=k0(this.props,t,this.presenceContext?.custom);a&&(s=a[e])}if(t&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Cs(r)?r:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new n0),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class $S extends LM{constructor(){super(...arguments),this.KeyframeResolver=$O}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Cs(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function GS(n,{style:e,vars:t},s,r){const a=n.style;let l;for(l in e)a[l]=e[l];r?.applyProjectionStyles(a,s);for(l in t)a.setProperty(l,t[l])}function BM(n){return window.getComputedStyle(n)}class FM extends $S{constructor(){super(...arguments),this.type="html",this.renderInstance=GS}readValueFromInstance(e,t){if(Lo.has(t))return this.projection?.isProjecting?ap(t):cO(e,t);{const s=BM(e),r=(a0(t)?s.getPropertyValue(t):s[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return NS(e,t)}build(e,t,s){j0(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return A0(e,t,s)}}const YS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function UM(n,e,t,s){GS(n,e,void 0,s);for(const r in e.attrs)n.setAttribute(YS.has(r)?r:C0(r),e.attrs[r])}class zM extends $S{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Pt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Lo.has(t)){const s=eS(t);return s&&s.default||0}return t=YS.has(t)?t:C0(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return bS(e,t,s)}build(e,t,s){pS(e,t,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,t,s,r){UM(e,t,s,r)}mount(e){this.isSVGTag=vS(e.tagName),super.mount(e)}}const VM=(n,e)=>E0(n)?new zM(e):new FM(e,{allowProjection:n!==j.Fragment}),IM=V3({...f5,...DM,...bM,...OM},VM),as=h3(IM),HM=()=>{const n=tn(),{session:e,userRole:t}=Ti(),[s,r]=j.useState(!1);return d.jsxs("header",{className:`flex items-center justify-between px-4 md:px-8 w-full h-[14vh] ${t==="admin"?"bg-[#E2D2A2]":"bg-[#AF524D]"}`,children:[d.jsx(Xt,{to:"/#home",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("div",{className:"w-8 h-8 bg-white rounded-t-lg relative",children:[d.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/3 bg-[#DFAD56]"}),d.jsx("div",{className:"absolute bottom-1/3 left-0 right-0 h-1/3 bg-[#E2D2A2]"}),d.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-0.5 h-3 bg-yellow-400",children:d.jsx("div",{className:"absolute -top-0.5 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-orange-400 rounded-full"})})]}),d.jsxs("div",{className:"text-white font-bold text-xl",children:[d.jsx("span",{className:"text-[#F8E6B4]",children:"Bakery"}),d.jsx("span",{className:"text-white",children:"Bliss"})]})]})}),d.jsx("nav",{className:"hidden md:block",children:d.jsx("ul",{className:"flex space-x-8 font-semibold text-base",children:[...t==="admin"?[{to:"/adminpage",label:"Dashboard"},{to:"/temp",label:"Temp"}]:[{to:"/",label:"Home"},{to:"/cakecustomization",label:"Cake Customization"},{to:"/cakecatalog",label:"Cake Catalog"},{to:"/aboutus",label:"About Us"},{to:"/contactus",label:"Contact Us"}]].map(a=>d.jsxs("li",{className:"relative group",children:[d.jsx(Xt,{to:a.to,className:`transition-colors duration-300 ${n.pathname===a.to?t==="admin"?"text-[#613C2A]":"text-[#EBD187]":"text-white"}`,children:a.label}),d.jsx("span",{className:"absolute left-0 -bottom-1 h-[2px] w-0 bg-white transition-all duration-300 group-hover:w-full"})]},a.to))})}),d.jsx("button",{className:"md:hidden p-2",onClick:()=>r(!s),"aria-label":"Toggle mobile menu",children:d.jsxs("div",{className:"w-6 h-6 flex flex-col justify-center items-center",children:[d.jsx("span",{className:`block w-5 h-0.5 bg-white transition-all duration-300 ${s?"rotate-45 translate-y-1":"-translate-y-1"}`}),d.jsx("span",{className:`block w-5 h-0.5 bg-white transition-all duration-300 ${s?"opacity-0":"opacity-100"}`}),d.jsx("span",{className:`block w-5 h-0.5 bg-white transition-all duration-300 ${s?"-rotate-45 -translate-y-1":"translate-y-1"}`})]})}),d.jsx("div",{className:`absolute top-full left-0 w-full ${t==="admin"?"bg-[#E2D2A2]":"bg-[#AF524D]"} shadow-lg transition-all duration-300 md:hidden ${s?"opacity-100 visible":"opacity-0 invisible"}`,children:d.jsx("nav",{className:"px-4 py-4",children:d.jsx("ul",{className:"space-y-4 font-semibold text-base",children:[...t==="admin"?[{to:"/adminpage",label:"Dashboard"},{to:"/temp",label:"Temp"}]:[{to:"/",label:"Home"},{to:"/cakecustomization",label:"Cake Customization"},{to:"/cakecatalog",label:"Cake Catalog"},{to:"/aboutus",label:"About Us"},{to:"/contactus",label:"Contact Us"}]].map(a=>d.jsx("li",{children:d.jsx(Xt,{to:a.to,className:`block py-2 transition-colors duration-300 ${n.pathname===a.to?t==="admin"?"text-[#613C2A]":"text-[#EBD187]":"text-white"}`,onClick:()=>r(!1),children:a.label})},a.to))})})}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx(Xt,{to:t==="admin"?"/admin/profile":"/profile",className:"h-12 w-12",children:d.jsx("img",{src:"/Profile Icon.png",alt:"Profile",className:"w-full h-full"})}),t!=="admin"&&d.jsx(Xt,{to:"/cart",className:"h-12 w-12",children:d.jsx("img",{src:"/Cart.png",alt:"Cart",className:"w-full h-full"})})]})]})},$M=()=>d.jsxs("footer",{className:"bg-[#381914] h-fit p-8 flex justify-between flex-wrap text-[#F8E6B4]",children:[d.jsx("div",{className:"w-full sm:w-auto mb-6 sm:mb-0",children:d.jsx(Xt,{to:"/#home",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("div",{className:"w-8 h-8 bg-[#F8E6B4] rounded-full relative",children:[d.jsx("div",{className:"absolute inset-1 bg-[#8B4513] rounded-full"}),d.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-2 h-1 bg-[#8B4513] rounded-t-full"}),d.jsx("div",{className:"absolute top-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-[#F8E6B4] rounded-full"})]}),d.jsxs("div",{className:"text-[#F8E6B4] font-bold text-xl",children:[d.jsx("span",{className:"text-[#AF524D]",children:"Connie"}),d.jsx("span",{className:"text-[#F8E6B4]",children:" de Cafe"})]})]})})}),d.jsxs("div",{className:"w-full sm:w-auto mb-6 sm:mb-0",children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Contact Us"}),d.jsx("p",{children:"📞 +63 912 345 6789"}),d.jsx("p",{children:"✉️ conniescakemall@gmail.com"}),d.jsx("p",{children:"📍 Dumaguete City, Philippines"}),d.jsx("p",{className:"mt-4 font-semibold",children:"Follow Us:"}),d.jsxs("div",{className:"flex gap-3 mt-2",children:[d.jsx("a",{href:"https://www.facebook.com/connies.cakemall",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",children:d.jsx("img",{src:"/fb_icon.png",alt:"Facebook",className:"w-6 h-6"})}),d.jsx("a",{href:"https://www.instagram.com/conniescakemall?igsh=MXNiNjUwdjVlNW5uaA==",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",children:d.jsx("img",{src:"/ig_icon.png",alt:"Instagram",className:"w-6 h-6"})})]})]}),d.jsxs("div",{className:"w-full sm:w-auto mb-6 sm:mb-0",children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Quick Links"}),d.jsxs("ul",{className:"space-y-1",children:[d.jsx("li",{children:d.jsx(Xt,{to:"/cakes",className:"hover:text-[#AF524D] transition-colors",children:"Our Cakes"})}),d.jsx("li",{children:d.jsx(Xt,{to:"/aboutus",className:"hover:text-[#AF524D] transition-colors",children:"About Us"})}),d.jsx("li",{children:d.jsx(Xt,{to:"/contact",className:"hover:text-[#AF524D] transition-colors",children:"Contact"})})]})]}),d.jsxs("div",{className:"w-full sm:w-auto",children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Legal"}),d.jsxs("ul",{className:"space-y-1",children:[d.jsx("li",{children:d.jsx(Xt,{to:"/terms",className:"hover:text-[#AF524D] transition-colors",children:"Terms & Conditions"})}),d.jsx("li",{children:d.jsx(Xt,{to:"/privacy",className:"hover:text-[#AF524D] transition-colors",children:"Privacy Policy"})}),d.jsx("li",{children:d.jsx(Xt,{to:"/aboutus",className:"hover:text-[#AF524D] transition-colors",children:"Location"})})]})]})]}),ws=({children:n})=>d.jsx(as.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5,ease:"easeInOut"},children:n}),GM=()=>{const[n,e]=j.useState(""),[t,s]=j.useState(""),[r,a]=j.useState(""),[l,u]=j.useState(""),[h,f]=j.useState(""),[g,x]=j.useState(""),[v,b]=j.useState(!1),[w,_]=j.useState(""),[T,S]=j.useState(!1),[A,E]=j.useState(!1),{signUpNewUser:M,signInOrUpWithGoogle:D}=Ti(),B=Ci(),F={length:g.length>=6,uppercase:/[A-Z]/.test(g),lowercase:/[a-z]/.test(g),number:/[0-9]/.test(g),special:/[!@#$%^&*(),.?":{}|<>]/.test(g)},L=H=>{const Y=H.target.value;x(Y),S(Y.length>0)},V=async()=>{if(!v){b(!0),_("");try{const H=await D();if(H.success)be.success("Redirecting to Google...");else{const Y=H?.error?.message||H?.error||"Google sign-in failed. Please try again.";_(Y),be.error(Y)}}catch(H){_("An unexpected error occurred"),be.error("An unexpected error occurred"),console.error(H)}finally{b(!1)}}},N=async H=>{if(console.log("handleSignUp called",l,g),H.preventDefault(),v)return;b(!0),_("");const Y=/[A-Z]/.test(g),se=/[a-z]/.test(g),te=/[0-9]/.test(g),ne=/[!@#$%^&*(),.?":{}|<>]/.test(g);if(!(g.length>=6)){_("Password must be at least 6 characters long"),be.error("Password too short. Please use at least 6 characters."),b(!1);return}if(!Y){_("Password must contain at least one capital letter"),be.error("Password must contain at least one capital letter."),b(!1);return}if(!se){_("Password must contain at least one lowercase letter"),be.error("Password must contain at least one lowercase letter."),b(!1);return}if(!te){_("Password must contain at least one number"),be.error("Password must contain at least one number."),b(!1);return}if(!ne){_('Password must contain at least one special character (!@#$%^&*(),.?":{}|<>)'),be.error("Password must contain at least one special character."),b(!1);return}try{const $=await M(l,g,n,t,r,h);if($.success)be.success("Account created successfully! Welcome to Bakery Bliss!"),$.userRole==="admin"?(B("/adminpage"),setTimeout(()=>window.scrollTo(0,0),100)):(B("/"),window.scrollTo(0,0));else{const Q=$?.error?.message||"Sign-up failed. Please try again.";_(Q),be.error(Q)}}catch($){_("An unexpected error occurred"),be.error("An unexpected error occurred"),console.error($)}finally{b(!1)}};return d.jsx("div",{className:"bg-[url('/Background.png')] bg-cover bg-top min-h-screen w-full flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#52514B_100%)] flex items-center justify-center gap-6 md:gap-10 flex-col w-full max-w-lg sm:max-w-xl md:max-w-2xl lg:max-w-3xl h-auto py-8 md:py-12 px-6 md:px-10 rounded-3xl md:rounded-[2rem] shadow-2xl",children:[d.jsxs("div",{className:"text-center mb-2",children:[d.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-2",children:"Register Now!"}),d.jsx("p",{className:"text-sm md:text-base text-gray-600",children:"Please enter your details below"})]}),d.jsxs("form",{onSubmit:N,className:"flex flex-col space-y-8 w-full",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Personal Information"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:["First Name ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{className:"w-full bg-white text-gray-900 rounded-lg px-4 py-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-all duration-200",type:"text",id:"firstName",required:!0,value:n,onChange:H=>e(H.target.value),placeholder:"Enter your first name"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:["Last Name ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{className:"w-full bg-white text-gray-900 rounded-lg px-4 py-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-all duration-200",type:"text",id:"lastName",required:!0,value:t,onChange:H=>s(H.target.value),placeholder:"Enter your last name"})]})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Account Information"}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:["Email Address ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{className:"w-full bg-white text-gray-900 rounded-lg px-4 py-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-all duration-200",type:"email",id:"email",required:!0,value:l,onChange:H=>u(H.target.value),placeholder:"Enter your email address"}),d.jsx("p",{className:"text-xs text-gray-600",children:"We'll use this to send you order confirmations and updates"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:["Username ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{className:"w-full bg-white text-gray-900 rounded-lg px-4 py-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-all duration-200",type:"text",id:"username",required:!0,value:r,onChange:H=>a(H.target.value),placeholder:"Choose a unique username"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),d.jsx("input",{className:"w-full bg-white text-gray-900 rounded-lg px-4 py-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-all duration-200",type:"tel",id:"phoneNumber",placeholder:"Enter your phone number",value:h,onChange:H=>f(H.target.value)}),d.jsx("p",{className:"text-xs text-gray-600",children:"Optional - for delivery updates and order notifications"})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Security"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:["Password ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsxs("div",{className:"relative mb-4",children:[d.jsx("input",{className:"w-full bg-white text-gray-900 rounded-lg px-4 py-3 pr-12 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent transition-all duration-200",type:A?"text":"password",id:"password",required:!0,minLength:6,value:g,onChange:L,onFocus:()=>S(g.length>0),onBlur:()=>S(!1),placeholder:"Create a strong password"}),d.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-500 hover:text-gray-700 transition-colors duration-200",onClick:()=>E(!A),children:A?d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):d.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),T&&d.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-xl p-4 z-20 w-fit",children:[d.jsx("div",{className:"text-sm font-medium text-gray-800 mb-3",children:"Password Requirements:"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:`flex items-center text-sm ${F.length?"text-green-600":"text-red-500"}`,children:[d.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${F.length?"bg-green-500":"bg-red-500"}`}),"At least 6 characters"]}),d.jsxs("div",{className:`flex items-center text-sm ${F.uppercase?"text-green-600":"text-red-500"}`,children:[d.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${F.uppercase?"bg-green-500":"bg-red-500"}`}),"One capital letter (A-Z)"]}),d.jsxs("div",{className:`flex items-center text-sm ${F.lowercase?"text-green-600":"text-red-500"}`,children:[d.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${F.lowercase?"bg-green-500":"bg-red-500"}`}),"One lowercase letter (a-z)"]}),d.jsxs("div",{className:`flex items-center text-sm ${F.number?"text-green-600":"text-red-500"}`,children:[d.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${F.number?"bg-green-500":"bg-red-500"}`}),"One number (0-9)"]}),d.jsxs("div",{className:`flex items-center text-sm ${F.special?"text-green-600":"text-red-500"}`,children:[d.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${F.special?"bg-green-500":"bg-red-500"}`}),"One special character (!@#$%^&*)"]})]})]})]}),d.jsx("p",{className:"text-xs text-gray-900",children:"Password must be at least 6 characters with uppercase, lowercase, number, and special character"})]})]}),d.jsxs("div",{className:"pt-6 space-y-4",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-gray-300"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-2 bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#52514B_100%)] text-gray-500",children:"Or continue with"})})]}),d.jsxs("button",{type:"button",onClick:V,disabled:v,className:"w-full flex items-center justify-center gap-3 bg-white text-gray-700 font-semibold py-4 px-6 rounded-xl cursor-pointer transition-all duration-300 hover:bg-gray-50 border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed text-base shadow-lg",children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),v?"Connecting...":"Continue with Google"]}),d.jsx("button",{type:"submit",disabled:v,className:"w-full bg-[#AF524D] text-white font-semibold py-4 px-6 rounded-xl cursor-pointer transition-all duration-300 hover:bg-[#8B3D3A] focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed text-base shadow-lg hover:shadow-xl",children:v?d.jsxs("div",{className:"flex items-center justify-center",children:[d.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):"Create Account"})]})]})]})})},YM=()=>d.jsx("section",{className:"bg-[url('/Hero.png')] bg-cover bg-center w-full h-[120vh] flex items-center justify-start",id:"home",children:d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-15 max-w-2xl w-full px-8",children:[d.jsx("h1",{className:"text-[#EBD187] text-8xl font-abhaya ",children:"Connie de Café"}),d.jsx("p",{className:"font-bold text-white/76 text-3xl",children:"Where every slice begins with your imagination"}),d.jsx("div",{className:"flex items-center justify-center mt-20",children:d.jsxs("div",{className:"group relative flex items-center space-x-4",children:[d.jsx(as.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.3,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"bg-gradient-to-r from-white/60 to-transparent text-white px-6 py-4 rounded-full hover:bg-[#FFECB5] hover:text-gray-800 transition duration-300 tracking-widest text-2xl font-bold shadow-md",children:"Customize Now"}),d.jsx("img",{src:"/g_arrow.png",alt:"arrow",className:`
                absolute 
                left-full 
                top-[120%]
                translate-y-0
                opacity-0 
                group-hover:top-1/2 
                group-hover:-translate-y-1/2
                group-hover:opacity-100 
                transition-all 
                duration-500 
                ease-in-out 
                ml-2
              `})]})})]})}),qM=()=>d.jsx("div",{className:"bg-[linear-gradient(to_bottom,_#F2EFE8_0%,_#DFDAC7_51%,_#A8A599_100%)] h-auto py-20",children:d.jsxs("section",{className:"flex flex-col items-center text-center px-4 py-16",children:[d.jsx("h2",{className:"text-2xl md:text-5xl font-bold tracking-widest py-10 pb-30",children:"How to create your cake?"}),d.jsxs("p",{className:"max-w-2xl text-gray-700 mb-12 text-base md:text-3xl text-left",children:["Connie de Cafe's got you covered! With our drag-and-drop customization tool, you can bring your cake ideas to life — and see the magic happen in ",d.jsx("span",{className:"font-bold",children:"REAL TIME!"})]}),d.jsxs("div",{className:"relative w-full max-w-4xl p-11",children:[d.jsx("img",{src:"/Section 3.png",alt:"Cake",className:"w-full mx-auto"}),d.jsxs(as.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute top-[18%] left-[0%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-xs w-auto text-left bg-gradient-to-r from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#82171C] backdrop-filter backdrop-blur-[2px] font-semibold",children:["Add Frosting ",d.jsx("br",{}),"& Fillings"]}),d.jsxs(as.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute top-[10%] right-[5%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-xs w-auto text-left bg-gradient-to-l from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#82171C] backdrop-filter backdrop-blur-[2px] font-semibold",children:["Add Decorations ",d.jsx("br",{}),"& Toppings"]}),d.jsxs(as.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute top-[42%] left-[-8%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-fit w-auto text-left bg-gradient-to-r from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#DFAD56]/53 backdrop-filter backdrop-blur-[2px] font-semibold",children:["Choose Cake ",d.jsx("br",{}),"Flavor"]}),d.jsxs(as.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute top-[42%] right-[-8%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-fit w-auto text-left bg-gradient-to-l from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#DFAD56]/53 transition-transform hover:scale-115 duration-600 delay-100 backdrop-filter backdrop-blur-[2px] font-semibold",children:["Choose Cake ",d.jsx("br",{}),"Layers"]}),d.jsxs(as.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute bottom-[20%] left-[-7%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-fit w-auto text-left bg-gradient-to-r from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#DFAD56]/53 transition-transform hover:scale-115 duration-600 delay-100 backdrop-filter backdrop-blur-[2px] font-semibold",children:["Choose Cake ",d.jsx("br",{}),"Shape"]}),d.jsxs(as.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},whileHover:{scale:1.1,transition:{duration:.3}},transition:{duration:1.5,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"absolute bottom-[20%] right-[-12%] text-gray-800 px-8 py-1.5 rounded-full text-2xl shadow-md tracking-[0.15em] max-w-fit w-auto text-left bg-gradient-to-l from-white/60 to-transparent text-[#3A3A3A] border-4 border-[#DFAD56]/53 transition-transform hover:scale-115 duration-600 delay-100 backdrop-filter backdrop-blur-[2px] font-semibold",children:["Choose Cake ",d.jsx("br",{}),"Size"]})]})]})}),WM=()=>d.jsx("section",{className:"bg-[url('/Section3.png')] bg-cover bg-center w-full h-[120vh] py-20 flex items-center justify-end",children:d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-15 max-w-4xl w-full px-8",children:[d.jsx("h1",{className:"text-[#381914] text-8xl font-abhaya",children:"Our Cake Collection"}),d.jsx("p",{className:"font-bold text-white/76 text-3xl",children:"Not in the Mood to Customize? Choose from our pre-designed cake collection."}),d.jsx("div",{className:"flex items-center justify-center mt-20",children:d.jsxs("div",{className:"group relative flex items-center space-x-4",children:[d.jsx(Xt,{to:"/cakecatalog",className:"block",children:d.jsx(as.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.3,ease:"easeInOut"},viewport:{once:!0,amount:.5},className:"bg-gradient-to-r from-white/60 to-transparent text-white px-6 py-4 rounded-full hover:bg-[#82171C] hover:text-gray-600 transition duration-300 tracking-widest text-2xl font-bold shadow-md cursor-pointer",children:"Explore"})}),d.jsx("img",{src:"/r_arrow.png",alt:"arrow",className:`
                absolute 
                right-full 
                top-[120%]
                translate-y-0
                opacity-0 
                group-hover:top-1/2 
                group-hover:-translate-y-1/2
                group-hover:opacity-100 
                transition-all 
                duration-500 
                ease-in-out 
                ml-2
              `})]})})]})}),XM=()=>d.jsxs(d.Fragment,{children:[d.jsx(YM,{}),d.jsx(qM,{}),d.jsx(WM,{})]}),KM=()=>{const[n,e]=j.useState(""),[t,s]=j.useState(""),[r,a]=j.useState(!1),[l,u]=j.useState(""),[h,f]=j.useState(!1),[g,x]=j.useState(!1),[v,b]=j.useState(""),[w,_]=j.useState(!1),[T,S]=j.useState(""),{session:A,signInUser:E,signInOrUpWithGoogle:M,resetPassword:D}=Ti(),B=Ci(),F=async()=>{if(!r){a(!0),u("");try{const N=await M();N.success?be.success("Redirecting to Google..."):(u(N.error),be.error(N.error))}catch(N){u("An unexpected error occurred"),be.error("An unexpected error occurred"),console.error(N)}finally{a(!1)}}},L=async N=>{if(N.preventDefault(),!r){a(!0),u("");try{const H=await E({email:n,password:t});H.success?(be.success("Login successful!"),H.role==="admin"?B("/adminpage"):(H.role,B("/")),setTimeout(()=>window.scrollTo(0,0),100)):(u(H.error),be.error(H.error))}catch(H){u("An unexpected error occurred"),be.error("An unexpected error occurred"),console.error(H)}finally{a(!1)}}},V=async N=>{N.preventDefault(),_(!0),S(""),u("");try{const H=await D(v);H.success?(S(H.message),be.success(H.message),b(""),setTimeout(()=>{x(!1),S("")},3e3)):(u(H.error),be.error(H.error))}catch(H){u("An unexpected error occurred"),be.error("An unexpected error occurred"),console.error(H)}finally{_(!1)}};return d.jsxs("div",{className:"bg-[url('/Background.png')] bg-cover bg-center min-h-screen w-full flex items-center justify-center p-4",children:[d.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#A8A599_100%)] flex items-center justify-center gap-6 md:gap-10 flex-col w-full max-w-sm sm:max-w-md md:max-w-lg h-auto py-6 md:py-10 px-4 md:px-8 rounded-2xl md:rounded-3xl shadow-2xl border-2 border-[#AF524D]",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-2xl md:text-3xl font-bold font-jost text-[#492220]",children:"Welcome back!"}),d.jsx("p",{className:"text-xs md:text-sm mt-1 text-[#492220]/80",children:"Please enter your details below"})]}),d.jsxs("form",{onSubmit:L,className:"flex flex-col space-y-3 md:space-y-4 w-full",children:[d.jsxs("div",{children:[d.jsxs("label",{htmlFor:"email",className:"text-sm md:text-base text-[#492220] font-medium",children:["Email: ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{className:"w-full bg-white/90 text-[#492220] rounded-lg px-3 py-2 md:py-3 border-2 border-[#AF524D]/30 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] text-sm md:text-base shadow-sm",type:"email",id:"email",required:!0,value:n,onChange:N=>e(N.target.value)})]}),d.jsxs("div",{children:[d.jsxs("label",{htmlFor:"password",className:"text-sm md:text-base text-[#492220] font-medium",children:["Password: ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{className:"w-full bg-white/90 text-[#492220] rounded-lg px-3 py-2 md:py-3 pr-10 border-2 border-[#AF524D]/30 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] text-sm md:text-base shadow-sm",type:h?"text":"password",id:"password",required:!0,value:t,onChange:N=>s(N.target.value)}),d.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>f(!h),children:h?d.jsx("svg",{className:"h-4 w-4 md:h-5 md:w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):d.jsxs("svg",{className:"h-4 w-4 md:h-5 md:w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("input",{className:"w-auto bg-white text-black rounded-3xl px-1 py-1/2 border border-black-300 focus:outline-none",type:"checkbox",id:"rememberMe"}),d.jsx("label",{className:"cursor-pointer text-sm md:text-base text-[#492220] font-medium",htmlFor:"rememberMe",children:"Remember me"})]}),d.jsx("button",{type:"button",onClick:()=>x(!0),className:"cursor-pointer hover:underline hover:text-[#AF524D] text-xs md:text-sm transition ease-in-out hover:font-semibold self-start sm:self-auto text-[#492220]",children:"Forgot password?"})]}),d.jsxs("div",{className:"flex flex-col space-y-3 md:space-y-4",children:[d.jsx("button",{type:"submit",disabled:r,className:"bg-[#AF524D] text-white font-bold px-4 md:px-6 py-2 md:py-3 rounded-lg cursor-pointer transition ease-in-out delay-100 hover:bg-[#8B3A3A] duration-300 tracking-wide w-full disabled:opacity-50 disabled:cursor-not-allowed text-sm md:text-base shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:r?"Logging in...":"LOGIN"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-gray-300"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-2 bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#A8A599_100%)] text-[#492220]/70",children:"Or continue with"})})]}),d.jsxs("button",{type:"button",onClick:F,disabled:r,className:"flex items-center justify-center gap-3 bg-white/90 text-[#492220] font-semibold px-4 md:px-6 py-2 md:py-3 rounded-lg cursor-pointer transition ease-in-out delay-100 hover:bg-white border-2 border-[#AF524D]/30 hover:border-[#AF524D] duration-300 tracking-wide w-full disabled:opacity-50 disabled:cursor-not-allowed text-sm md:text-base shadow-sm hover:shadow-md",children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),r?"Connecting...":"Continue with Google"]}),d.jsx("hr",{}),d.jsx(Xt,{className:"bg-[#DFAD56] text-white font-bold px-4 md:px-6 py-2 md:py-3 rounded-lg cursor-pointer transition ease-in-out delay-100 hover:bg-[#C49A4A] duration-300 tracking-wide w-full text-center text-sm md:text-base shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",to:"/signup",children:"SIGN UP"})]})]})]}),g&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-lg p-4 md:p-6 w-full max-w-sm md:w-96 md:max-w-md border-4 border-[#AF524D] shadow-2xl",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-base md:text-lg font-semibold text-[#381914]",children:"Reset Password"}),d.jsx("button",{onClick:()=>{x(!1),b(""),S(""),u("")},className:"text-gray-500 hover:text-gray-700 text-xl font-bold cursor-pointer",children:"×"})]}),d.jsx("p",{className:"text-xs md:text-sm text-gray-600 mb-4",children:"Enter your email address and we'll send you a link to reset your password."}),d.jsxs("form",{onSubmit:V,className:"space-y-3 md:space-y-4",children:[d.jsxs("div",{children:[d.jsxs("label",{htmlFor:"resetEmail",className:"block text-xs md:text-sm font-medium text-gray-700",children:["Email: ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{type:"email",id:"resetEmail",required:!0,value:v,onChange:N=>b(N.target.value),className:"w-full bg-white text-black rounded-md px-2 md:px-3 py-1 md:py-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent text-sm md:text-base",placeholder:"Enter your email"})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:gap-3",children:[d.jsx("button",{type:"button",onClick:()=>{x(!1),b(""),S(""),u("")},className:"px-3 md:px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm md:text-base",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:w,className:"px-3 md:px-4 py-2 bg-[#AF524D] text-white rounded-lg hover:bg-[#8B3D3A] transition-colors disabled:opacity-50 text-sm md:text-base",children:w?"Sending...":"Send Reset Link"})]})]})]})})]})},QM=()=>{const[n,e]=j.useState(""),[t,s]=j.useState(""),[r,a]=j.useState(!1),[l,u]=j.useState(""),[h,f]=j.useState(""),[g,x]=j.useState(!1),[v,b]=j.useState(!1),[w,_]=j.useState(!1),[T,S]=j.useState(!1),A=Ci(),E={length:n.length>=6,uppercase:/[A-Z]/.test(n),lowercase:/[a-z]/.test(n),number:/[0-9]/.test(n),special:/[!@#$%^&*(),.?":{}|<>]/.test(n)},M=F=>{const L=F.target.value;e(L),S(L.length>0)};j.useEffect(()=>{(async()=>{try{const V=window.location.hash,N=new URLSearchParams(window.location.search);console.log("ResetPassword: Checking session and URL params"),console.log("Hash:",V),console.log("Search params:",N.toString()),console.log("Full URL:",window.location.href);const{data:{session:H}}=await ve.auth.getSession();console.log("Session found:",!!H);const Y=H?.user?.recovery||V?.includes("type=recovery")||N.get("type")==="recovery"||V?.includes("access_token")||N.has("access_token");if(H&&Y)console.log("Valid password recovery session found, user can reset password"),x(!0),u("Please enter your new password");else if(H&&!Y){console.log("Regular session found, redirecting away from reset page");const{data:se}=await ve.from("CUSTOMER").select("cus_id").eq("auth_user_id",H.user.id).single(),{data:te}=await ve.from("ADMIN").select("admin_id").eq("admin_uid",H.user.id).single();A(te?"/adminpage":se?"/":"/login");return}else if(V&&(V.includes("access_token")||V.includes("refresh_token"))){console.log("Tokens found in URL hash, attempting to get session");try{const{data:se,error:te}=await ve.auth.getSession();if(se.session)console.log("Session created from URL tokens"),x(!0),u("Please enter your new password");else{console.error("Failed to create session from tokens:",te),console.log("Attempting manual session recovery...");try{const ne=new URLSearchParams(V.substring(1)),R=ne.get("access_token"),$=ne.get("refresh_token");if(R){console.log("Found access token, attempting to set session");const{data:Q,error:pe}=await ve.auth.setSession({access_token:R,refresh_token:$});Q.session?(console.log("Manual session recovery successful"),x(!0),u("Please enter your new password")):(console.error("Manual session recovery failed:",pe),f("Failed to validate reset link. Please try again."),be.error("Invalid reset link. Please try again."))}else f("Failed to validate reset link. Please try again."),be.error("Invalid reset link. Please try again.")}catch(ne){console.error("Manual recovery error:",ne),f("Failed to validate reset link. Please try again."),be.error("Invalid reset link. Please try again.")}}}catch(se){console.error("Error recovering session:",se),f("Failed to validate reset link. Please try again."),be.error("Invalid reset link. Please try again.")}}else if(N.has("access_token")||N.has("refresh_token")){console.log("Tokens found in search params, attempting to get session");const{data:se,error:te}=await ve.auth.getSession();if(se.session)console.log("Session created from search params"),x(!0),u("Please enter your new password");else{console.error("Failed to create session from search params:",te),console.log("Attempting manual session recovery from search params...");try{const ne=N.get("access_token"),R=N.get("refresh_token");if(ne){console.log("Found access token in search params, attempting to set session");const{data:$,error:Q}=await ve.auth.setSession({access_token:ne,refresh_token:R});$.session?(console.log("Manual session recovery from search params successful"),x(!0),u("Please enter your new password")):(console.error("Manual session recovery from search params failed:",Q),f("Failed to validate reset link. Please try again."),be.error("Invalid reset link. Please try again."))}else f("Failed to validate reset link. Please try again."),be.error("Invalid reset link. Please try again.")}catch(ne){console.error("Manual recovery from search params error:",ne),f("Failed to validate reset link. Please try again."),be.error("Invalid reset link. Please try again.")}}}else console.log("No valid session or tokens found"),f("This reset link is invalid or has expired. Please request a new password reset from the login page."),be.error("Invalid reset link. Please try again.")}catch(V){console.error("Error checking session:",V),f("An error occurred while validating the reset link. Please try again."),be.error("Error validating reset link. Please try again.")}})();const{data:{subscription:L}}=ve.auth.onAuthStateChange((V,N)=>{console.log("Auth state change:",V,!!N),V==="PASSWORD_RECOVERY"||V==="SIGNED_IN"&&N?.user?.recovery?N&&(console.log("Password recovery session established from auth state change"),x(!0),u("Please enter your new password"),f("")):V==="SIGNED_IN"&&N&&!N?.user?.recovery&&(console.log("Regular sign in detected, redirecting away from reset page"),(async()=>{const{data:Y}=await ve.from("CUSTOMER").select("cus_id").eq("auth_user_id",N.user.id).single(),{data:se}=await ve.from("ADMIN").select("admin_id").eq("admin_uid",N.user.id).single();A(se?"/adminpage":Y?"/":"/login")})())});return()=>L?.unsubscribe()},[]);const D=async F=>{F.preventDefault(),a(!0),f(""),u("");const L=/[A-Z]/.test(n),V=/[a-z]/.test(n),N=/[!@#$%^&*(),.?":{}|<>]/.test(n);if(!(n.length>=6)){f("Password must be at least 6 characters long"),be.error("Password too short. Please use at least 6 characters."),a(!1);return}if(!L){f("Password must contain at least one capital letter"),be.error("Password must contain at least one capital letter."),a(!1);return}if(!V){f("Password must contain at least one lowercase letter"),be.error("Password must contain at least one lowercase letter."),a(!1);return}if(!N){f('Password must contain at least one special character (!@#$%^&*(),.?":{}|<>)'),be.error("Password must contain at least one special character."),a(!1);return}if(n!==t){f("Passwords do not match"),be.error("Passwords do not match. Please try again."),a(!1);return}try{const{data:Y,error:se}=await ve.auth.updateUser({password:n});if(se){const te=se.message.includes("JWT")?"This reset link has expired. Please request a new password reset.":se.message;f(te),be.error("Failed to update password. Please try again.")}else u("Password updated successfully! Redirecting to login..."),be.success("Password updated successfully!"),e(""),s(""),await ve.auth.signOut(),setTimeout(()=>{A("/login"),setTimeout(()=>window.scrollTo(0,0),100)},2e3)}catch(Y){f("An unexpected error occurred. Please try again."),be.error("Something went wrong. Please try again."),console.error(Y)}finally{a(!1)}},B=()=>{A("/login"),setTimeout(()=>window.scrollTo(0,0),100)};return g?d.jsx("div",{className:"bg-[url('/Background.png')] bg-cover bg-center min-h-screen w-full flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#A8A599_100%)] flex items-center justify-center gap-6 md:gap-10 flex-col w-full max-w-sm sm:max-w-md md:max-w-lg h-auto py-6 md:py-10 px-4 md:px-8 rounded-2xl md:rounded-3xl shadow-2xl border-2 border-[#AF524D]",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"mb-4",children:d.jsx("svg",{className:"w-16 h-16 md:w-20 md:h-20 text-[#AF524D] mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),d.jsx("h1",{className:"text-2xl md:text-3xl font-bold font-jost text-[#492220] mb-2",children:"Reset Your Password"}),d.jsx("p",{className:"text-xs md:text-sm text-[#492220]/80",children:"Enter your new password below"})]}),l&&d.jsx("div",{className:"w-full p-3 bg-green-100 border border-green-400 text-green-700 rounded-lg text-sm",children:l}),h&&d.jsx("div",{className:"w-full p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg text-sm",children:h}),d.jsxs("form",{onSubmit:D,className:"flex flex-col space-y-3 md:space-y-4 w-full",children:[d.jsxs("div",{children:[d.jsxs("label",{htmlFor:"newPassword",className:"text-sm md:text-base text-[#492220] font-medium",children:["New Password: ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:v?"text":"password",id:"newPassword",required:!0,minLength:6,value:n,onChange:M,onFocus:()=>S(n.length>0),onBlur:()=>S(!1),className:"w-full bg-white/90 text-[#492220] rounded-lg px-3 py-2 md:py-3 pr-12 border-2 border-[#AF524D]/30 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] text-sm md:text-base shadow-sm",placeholder:"Enter new password"}),d.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 transition-colors duration-200",onClick:()=>b(!v),children:v?d.jsx("svg",{className:"h-4 w-4 md:h-5 md:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):d.jsxs("svg",{className:"h-4 w-4 md:h-5 md:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),T&&d.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-xl p-4 z-20 w-fit",children:[d.jsx("div",{className:"text-sm font-medium text-gray-800 mb-3",children:"Password Requirements:"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:`flex items-center text-sm ${E.length?"text-green-600":"text-red-500"}`,children:[d.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${E.length?"bg-green-500":"bg-red-500"}`}),"At least 6 characters"]}),d.jsxs("div",{className:`flex items-center text-sm ${E.uppercase?"text-green-600":"text-red-500"}`,children:[d.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${E.uppercase?"bg-green-500":"bg-red-500"}`}),"One capital letter (A-Z)"]}),d.jsxs("div",{className:`flex items-center text-sm ${E.lowercase?"text-green-600":"text-red-500"}`,children:[d.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${E.lowercase?"bg-green-500":"bg-red-500"}`}),"One lowercase letter (a-z)"]}),d.jsxs("div",{className:`flex items-center text-sm ${E.number?"text-green-600":"text-red-500"}`,children:[d.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${E.number?"bg-green-500":"bg-red-500"}`}),"One number (0-9)"]}),d.jsxs("div",{className:`flex items-center text-sm ${E.special?"text-green-600":"text-red-500"}`,children:[d.jsx("span",{className:`w-2 h-2 rounded-full mr-3 ${E.special?"bg-green-500":"bg-red-500"}`}),"One special character (!@#$%^&*)"]})]})]})]})]}),d.jsxs("div",{children:[d.jsxs("label",{htmlFor:"confirmPassword",className:"text-sm md:text-base text-[#492220] font-medium",children:["Confirm Password: ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:w?"text":"password",id:"confirmPassword",required:!0,value:t,onChange:F=>s(F.target.value),className:"w-full bg-white/90 text-[#492220] rounded-lg px-3 py-2 md:py-3 pr-12 border-2 border-[#AF524D]/30 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] text-sm md:text-base shadow-sm",placeholder:"Confirm new password"}),d.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 transition-colors duration-200",onClick:()=>_(!w),children:w?d.jsx("svg",{className:"h-4 w-4 md:h-5 md:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):d.jsxs("svg",{className:"h-4 w-4 md:h-5 md:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),d.jsxs("div",{className:"flex flex-col space-y-3 pt-2",children:[d.jsx("button",{type:"submit",disabled:r,className:"bg-[#AF524D] hover:bg-[#8B3F3A] text-white font-bold px-6 py-3 md:px-8 md:py-4 rounded-lg cursor-pointer transition ease-in-out delay-100 duration-300 tracking-wide w-full disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center text-sm md:text-base shadow-lg hover:shadow-xl",children:r?d.jsxs(d.Fragment,{children:[d.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 md:h-5 md:w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating Password..."]}):"Update Password"}),d.jsx("button",{type:"button",onClick:B,className:"bg-[#6B7280] hover:bg-[#4B5563] text-white font-bold px-6 py-3 md:px-8 md:py-4 rounded-lg cursor-pointer transition ease-in-out delay-100 duration-300 tracking-wide w-full text-sm md:text-base shadow-lg hover:shadow-xl",children:"Back to Login"})]})]})]})}):d.jsx("div",{className:"bg-[url('/Background.png')] bg-cover bg-center min-h-screen w-full flex items-center justify-center p-4",children:d.jsx("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#A8A599_100%)] flex items-center justify-center gap-6 md:gap-10 flex-col w-full max-w-sm sm:max-w-md md:max-w-lg h-auto py-6 md:py-10 px-4 md:px-8 rounded-2xl md:rounded-3xl shadow-2xl border-2 border-[#AF524D]",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"mb-6",children:d.jsx("svg",{className:"w-16 h-16 md:w-20 md:h-20 text-[#AF524D] mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),d.jsx("h1",{className:"text-2xl md:text-3xl font-bold font-jost text-[#492220] mb-4",children:"Invalid Reset Link"}),d.jsx("p",{className:"text-sm md:text-base text-[#492220]/80 mb-8 leading-relaxed",children:h}),d.jsx("button",{onClick:B,className:"bg-[#AF524D] hover:bg-[#8B3F3A] text-white font-bold px-6 py-3 md:px-8 md:py-4 rounded-lg cursor-pointer transition ease-in-out delay-100 duration-300 tracking-wide w-full text-sm md:text-base shadow-lg hover:shadow-xl",children:"Back to Login"})]})})})},Bo=({message:n="Loading...",size:e="large"})=>e==="small"?d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx("div",{className:"w-4 h-4 border-2 border-[#AF524D] border-t-transparent rounded-full animate-spin"}),d.jsx("span",{className:"text-sm text-gray-600",children:n})]}):d.jsx("div",{className:"min-h-screen bg-[url('/Background.png')] bg-cover bg-center flex items-center justify-center",children:d.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_11%,_#52514B_100%)] rounded-3xl shadow-2xl p-8 flex flex-col items-center space-y-6",children:[d.jsxs("div",{className:"relative",children:[d.jsxs("div",{className:"w-16 h-16 bg-[#AF524D] rounded-t-lg relative overflow-hidden",children:[d.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/3 bg-[#DFAD56]"}),d.jsx("div",{className:"absolute bottom-1/3 left-0 right-0 h-1/3 bg-[#E2D2A2]"}),d.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-1 h-4 bg-yellow-400",children:d.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-orange-400 rounded-full animate-pulse"})})]}),d.jsx("div",{className:"absolute inset-0 border-4 border-transparent border-t-[#AF524D] border-r-[#DFAD56] rounded-full animate-spin"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-[#381914] mb-2",children:"Bakery Bliss"}),d.jsx("p",{className:"text-gray-600 text-lg",children:n})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("div",{className:"w-3 h-3 bg-[#AF524D] rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-3 h-3 bg-[#DFAD56] rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-3 h-3 bg-[#E2D2A2] rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})}),ZM=()=>{const[n,e]=j.useState(!0);return j.useEffect(()=>{const t=setTimeout(()=>{e(!1)},5e3);return()=>clearTimeout(t)},[]),d.jsxs("section",{className:"bg-[linear-gradient(to_bottom,_#AF524D_0%,_#AF524D_20%,_#381914_83%)] bg-cover bg-center w-full min-h-screen py-20 px-4 md:px-8 lg:px-16 xl:px-32 relative overflow-hidden",children:[d.jsxs(as.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-8 md:px-16 py-16 flex flex-col items-center justify-center rounded-3xl space-y-8 w-full shadow-2xl mb-16 relative z-10",children:[d.jsx("h1",{className:"text-5xl md:text-7xl font-bold font-jost text-center text-[#492220]",children:"About Connie de Café"}),d.jsx("p",{className:"text-xl md:text-2xl text-center max-w-4xl text-[#492220]/80 leading-relaxed",children:"Where every slice begins with your imagination and every bite tells a story of passion, creativity, and love for the art of baking."})]}),d.jsxs("div",{className:"relative mb-20",children:[d.jsx(as.div,{initial:{opacity:0,x:-100},whileInView:{opacity:1,x:0},transition:{duration:.8},viewport:{once:!0},className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-8 md:px-12 py-12 rounded-3xl shadow-2xl w-3/4 ml-0 relative z-20",children:d.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-8",children:[d.jsx("div",{className:"w-full lg:w-2/5",children:d.jsx("img",{src:"/client.png",alt:"Connie de Café Bakery",className:"w-full rounded-2xl shadow-xl transform rotate-2 hover:rotate-0 transition-transform duration-500"})}),d.jsxs("div",{className:"w-full lg:w-3/5 space-y-6",children:[d.jsx("h2",{className:"text-4xl md:text-5xl font-bold font-jost text-[#492220]",children:"Our Story"}),d.jsxs("div",{className:"space-y-4 text-[#492220]/90",children:[d.jsx("p",{className:"text-lg md:text-xl leading-relaxed",children:"Founded with a dream and a passion for creating extraordinary cakes, Connie de Café began as a small home-based bakery with big aspirations."}),d.jsx("p",{className:"text-lg md:text-xl leading-relaxed",children:"Our founder, Connie June B. De Jesus, started this journey with a simple belief: every celebration deserves a cake that's as unique as the moment itself."}),d.jsx("p",{className:"text-lg md:text-xl leading-relaxed",children:"From intimate birthday celebrations to grand wedding receptions, we've had the privilege of being part of countless memorable moments."})]})]})]})}),d.jsx(as.div,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.6,delay:.3},viewport:{once:!0},className:"absolute -top-8 -right-8 w-32 h-32 bg-[#EBD187] rounded-full opacity-20 z-10"})]}),d.jsxs(as.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"mb-20",children:[d.jsx("h2",{className:"text-4xl md:text-5xl font-bold font-jost text-center mb-16 text-white",children:"What Makes Us Special"}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 relative",children:[d.jsxs(as.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},transition:{duration:.6,delay:.1},viewport:{once:!0},className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-8 py-10 rounded-2xl shadow-2xl text-center space-y-6 transform -rotate-1 hover:rotate-0 transition-transform duration-300",children:[d.jsx("div",{className:"w-20 h-20 bg-[#EBD187] rounded-full flex items-center justify-center mx-auto shadow-lg",children:d.jsx("span",{className:"text-3xl",children:"🎨"})}),d.jsx("h3",{className:"text-2xl font-bold font-jost text-[#492220]",children:"Creative Design"}),d.jsx("p",{className:"text-[#492220]/80 text-lg leading-relaxed",children:"Every cake is a canvas for creativity. We bring your wildest cake dreams to life with our innovative designs and artistic flair."})]}),d.jsxs(as.div,{initial:{opacity:0,y:-50},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},viewport:{once:!0},className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-8 py-12 rounded-2xl shadow-2xl text-center space-y-6 transform scale-105 relative z-10",children:[d.jsx("div",{className:"w-24 h-24 bg-[#EBD187] rounded-full flex items-center justify-center mx-auto shadow-lg",children:d.jsx("span",{className:"text-4xl",children:"🌾"})}),d.jsx("h3",{className:"text-2xl font-bold font-jost text-[#492220]",children:"Premium Ingredients"}),d.jsx("p",{className:"text-[#492220]/80 text-lg leading-relaxed",children:"We use only the finest, freshest ingredients to ensure every bite is a moment of pure indulgence and quality."})]}),d.jsxs(as.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},transition:{duration:.6,delay:.3},viewport:{once:!0},className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-8 py-10 rounded-2xl shadow-2xl text-center space-y-6 transform rotate-1 hover:rotate-0 transition-transform duration-300",children:[d.jsx("div",{className:"w-20 h-20 bg-[#EBD187] rounded-full flex items-center justify-center mx-auto shadow-lg",children:d.jsx("span",{className:"text-3xl",children:"❤️"})}),d.jsx("h3",{className:"text-2xl font-bold font-jost text-[#492220]",children:"Personal Touch"}),d.jsx("p",{className:"text-[#492220]/80 text-lg leading-relaxed",children:"Every cake is made with love and attention to detail, ensuring your special moments are celebrated with perfection."})]})]})]}),d.jsxs(as.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.8},viewport:{once:!0},className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-8 md:px-16 py-16 rounded-3xl shadow-2xl w-4/5 mx-auto text-center relative z-10",children:[d.jsx("h2",{className:"text-4xl md:text-5xl font-bold font-jost mb-8 text-[#492220]",children:"Ready to Create Your Dream Cake?"}),d.jsx("p",{className:"text-xl md:text-2xl mb-10 text-[#492220]/80 max-w-3xl mx-auto leading-relaxed",children:"Let's work together to bring your vision to life. Whether it's a birthday, wedding, or any special celebration, we're here to make it unforgettable."}),d.jsx(Xt,{to:"/cakecustomization",children:d.jsx(as.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},className:"bg-gradient-to-r from-[#AF524D] to-[#381914] text-white px-12 py-6 rounded-full text-xl font-semibold shadow-xl ",children:"Start Customizing"})})]})]})};class Bc{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const JM=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},ps={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:JM()},D0=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},eR=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=D0(n);ps.publicKey=t.publicKey,ps.blockHeadless=t.blockHeadless,ps.storageProvider=t.storageProvider,ps.blockList=t.blockList,ps.limitRate=t.limitRate,ps.origin=t.origin||e},qS=async(n,e,t={})=>{const s=await fetch(ps.origin+n,{method:"POST",headers:t,body:e}),r=await s.text(),a=new Bc(s.status,r);if(s.ok)return a;throw a},WS=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},tR=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},XS=n=>n.webdriver||!n.languages||n.languages.length===0,KS=()=>new Bc(451,"Unavailable For Headless Browser"),sR=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},nR=n=>!n.list?.length||!n.watchVariable,rR=(n,e)=>n instanceof FormData?n.get(e):n[e],QS=(n,e)=>{if(nR(n))return!1;sR(n.list,n.watchVariable);const t=rR(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},ZS=()=>new Bc(403,"Forbidden"),iR=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},aR=async(n,e,t)=>{const s=Number(await t.get(n)||0);return e-Date.now()+s},JS=async(n,e,t)=>{if(!e.throttle||!t)return!1;iR(e.throttle,e.id);const s=e.id||n;return await aR(s,e.throttle,t)>0?!0:(await t.set(s,Date.now().toString()),!1)},eC=()=>new Bc(429,"Too Many Requests"),oR=async(n,e,t,s)=>{const r=D0(s),a=r.publicKey||ps.publicKey,l=r.blockHeadless||ps.blockHeadless,u=r.storageProvider||ps.storageProvider,h={...ps.blockList,...r.blockList},f={...ps.limitRate,...r.limitRate};return l&&XS(navigator)?Promise.reject(KS()):(WS(a,n,e),tR(t),t&&QS(h,t)?Promise.reject(ZS()):await JS(location.pathname,f,u)?Promise.reject(eC()):qS("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:a,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},lR=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},cR=n=>typeof n=="string"?document.querySelector(n):n,uR=async(n,e,t,s)=>{const r=D0(s),a=r.publicKey||ps.publicKey,l=r.blockHeadless||ps.blockHeadless,u=ps.storageProvider||r.storageProvider,h={...ps.blockList,...r.blockList},f={...ps.limitRate,...r.limitRate};if(l&&XS(navigator))return Promise.reject(KS());const g=cR(t);WS(a,n,e),lR(g);const x=new FormData(g);return QS(h,x)?Promise.reject(ZS()):await JS(location.pathname,f,u)?Promise.reject(eC()):(x.append("lib_version","4.4.1"),x.append("service_id",n),x.append("template_id",e),x.append("user_id",a),qS("/api/v1.0/email/send-form",x))},dR={init:eR,send:oR,sendForm:uR,EmailJSResponseStatus:Bc},hR=()=>{const[n,e]=j.useState({name:"",email:"",subject:"",message:""}),[t,s]=j.useState(!1),r=l=>{const{id:u,value:h}=l.target;e(f=>({...f,[u]:h}))},a=async l=>{if(l.preventDefault(),!n.name||!n.email||!n.subject||!n.message){be.error("Please fill in all fields",{duration:4e3,position:"top-center"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)){be.error("Please enter a valid email address",{duration:4e3,position:"top-center"});return}s(!0);try{if((await dR.send("YOUR_SERVICE_ID","YOUR_TEMPLATE_ID",{from_name:n.name,from_email:n.email,subject:n.subject,message:n.message,to_email:"conniedecafe@gmail.com"},"YOUR_PUBLIC_KEY")).status===200)be.success("Message sent successfully! We will get back to you soon.",{duration:5e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}),e({name:"",email:"",subject:"",message:""});else throw new Error("Failed to send email")}catch(h){console.error("Error sending email:",h),be.error("Failed to send message. Please try again.",{duration:4e3,position:"top-center"})}finally{s(!1)}};return d.jsxs("section",{className:"bg-[url('/AboutUs.png')] bg-cover bg-center w-full min-h-screen px-8 py-12 flex flex-col items-end justify-center space-y-6",children:[d.jsxs("form",{onSubmit:a,className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-8 py-8 flex flex-col items-center justify-center rounded-2xl space-y-6 w-full max-w-lg shadow-2xl",children:[d.jsx("h1",{className:"font-bold text-3xl text-center text-[#381914]",children:"Contact Us Today!"}),d.jsxs("div",{className:"flex flex-col space-y-4 w-full",children:[d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsx("label",{className:"text-lg font-semibold text-[#381914]",htmlFor:"name",children:"Name:"}),d.jsx("input",{type:"text",id:"name",value:n.name,onChange:r,className:"w-full bg-white text-black rounded-lg px-3 py-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent"})]}),d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsx("label",{className:"text-lg font-semibold text-[#381914]",htmlFor:"email",children:"Email:"}),d.jsx("input",{type:"email",id:"email",value:n.email,onChange:r,className:"w-full bg-white text-black rounded-lg px-3 py-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent"})]}),d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsx("label",{className:"text-lg font-semibold text-[#381914]",htmlFor:"subject",children:"Subject:"}),d.jsx("input",{type:"text",id:"subject",value:n.subject,onChange:r,className:"w-full bg-white text-black rounded-lg px-3 py-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent"})]}),d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsx("label",{className:"text-lg font-semibold text-[#381914]",htmlFor:"message",children:"Message:"}),d.jsx("textarea",{id:"message",value:n.message,onChange:r,className:"w-full h-24 bg-white text-black rounded-lg px-3 py-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent resize-none"})]})]}),d.jsx("div",{className:"w-full",children:d.jsx("button",{type:"submit",disabled:t,className:`bg-[#82171C] text-white font-bold px-6 py-2 rounded-lg cursor-pointer transition ease-in-out delay-100 hover:bg-[#FFECB5] hover:text-gray-800 duration-300 tracking-wide w-full ${t?"opacity-50 cursor-not-allowed":""}`,children:t?"Sending...":"Send Message"})})]}),d.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] h-fit px-8 py-6 flex flex-col items-center justify-center rounded-2xl space-y-4 w-full max-w-lg shadow-2xl",children:[d.jsx("h2",{className:"font-bold text-2xl text-[#381914] mb-2",children:"Get In Touch"}),d.jsxs("a",{href:"mailto:conniedecafe@gmail.com",className:"flex items-center w-full space-x-4 hover:opacity-80 transition-opacity",children:[d.jsx("img",{src:"/mail_icon.png",alt:"Mail Icon",className:"w-6 h-6"}),d.jsx("p",{className:"text-lg text-[#381914]",children:"conniedecafe@gmail.com"})]}),d.jsxs("a",{href:"tel:+639176292377",className:"flex items-center w-full space-x-4 hover:opacity-80 transition-opacity",children:[d.jsx("img",{src:"/phone_icon.png",alt:"Phone Icon",className:"w-6 h-6"}),d.jsx("p",{className:"text-lg text-[#381914]",children:"+63 917 629 2377"})]}),d.jsxs("div",{className:"flex items-center justify-center space-x-8 w-full pt-2",children:[d.jsx("a",{href:"https://www.facebook.com/connies.cakemall",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",children:d.jsx("img",{src:"/fb_icon.png",alt:"Facebook Icon",className:"w-8 h-8"})}),d.jsx("a",{href:"https://www.instagram.com/conniescakemall?igsh=MXNiNjUwdjVlNW5uaA==",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",children:d.jsx("img",{src:"/ig_icon.png",alt:"Instagram Icon",className:"w-8 h-8"})})]})]})]})};function fR(){const n=tn();return j.useEffect(()=>{if(n.hash){const e=document.getElementById(n.hash.substring(1));e&&e.scrollIntoView({behavior:"smooth"})}},[n]),null}function B1(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function O0(n,e){n===void 0&&(n={}),e===void 0&&(e={});const t=["__proto__","constructor","prototype"];Object.keys(e).filter(s=>t.indexOf(s)<0).forEach(s=>{typeof n[s]>"u"?n[s]=e[s]:B1(e[s])&&B1(n[s])&&Object.keys(e[s]).length>0&&O0(n[s],e[s])})}const tC={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function pa(){const n=typeof document<"u"?document:{};return O0(n,tC),n}const mR={document:tC,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function Ns(){const n=typeof window<"u"?window:{};return O0(n,mR),n}function gR(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function pR(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function sC(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function ih(){return Date.now()}function xR(n){const e=Ns();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function vR(n,e){e===void 0&&(e="x");const t=Ns();let s,r,a;const l=xR(n);return t.WebKitCSSMatrix?(r=l.transform||l.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(u=>u.replace(",",".")).join(", ")),a=new t.WebKitCSSMatrix(r==="none"?"":r)):(a=l.MozTransform||l.OTransform||l.MsTransform||l.msTransform||l.transform||l.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),s=a.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?r=a.m41:s.length===16?r=parseFloat(s[12]):r=parseFloat(s[4])),e==="y"&&(t.WebKitCSSMatrix?r=a.m42:s.length===16?r=parseFloat(s[13]):r=parseFloat(s[5])),r||0}function ud(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function yR(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function en(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const s=t<0||arguments.length<=t?void 0:arguments[t];if(s!=null&&!yR(s)){const r=Object.keys(Object(s)).filter(a=>e.indexOf(a)<0);for(let a=0,l=r.length;a<l;a+=1){const u=r[a],h=Object.getOwnPropertyDescriptor(s,u);h!==void 0&&h.enumerable&&(ud(n[u])&&ud(s[u])?s[u].__swiper__?n[u]=s[u]:en(n[u],s[u]):!ud(n[u])&&ud(s[u])?(n[u]={},s[u].__swiper__?n[u]=s[u]:en(n[u],s[u])):n[u]=s[u])}}}return n}function dd(n,e,t){n.style.setProperty(e,t)}function nC(n){let{swiper:e,targetPosition:t,side:s}=n;const r=Ns(),a=-e.translate;let l=null,u;const h=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const f=t>a?"next":"prev",g=(v,b)=>f==="next"&&v>=b||f==="prev"&&v<=b,x=()=>{u=new Date().getTime(),l===null&&(l=u);const v=Math.max(Math.min((u-l)/h,1),0),b=.5-Math.cos(v*Math.PI)/2;let w=a+b*(t-a);if(g(w,t)&&(w=t),e.wrapperEl.scrollTo({[s]:w}),g(w,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[s]:w})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(x)};x()}function Xn(n,e){e===void 0&&(e="");const t=Ns(),s=[...n.children];return t.HTMLSlotElement&&n instanceof HTMLSlotElement&&s.push(...n.assignedElements()),e?s.filter(r=>r.matches(e)):s}function bR(n,e){const t=[e];for(;t.length>0;){const s=t.shift();if(n===s)return!0;t.push(...s.children,...s.shadowRoot?s.shadowRoot.children:[],...s.assignedElements?s.assignedElements():[])}}function wR(n,e){const t=Ns();let s=e.contains(n);return!s&&t.HTMLSlotElement&&e instanceof HTMLSlotElement&&(s=[...e.assignedElements()].includes(n),s||(s=bR(n,e))),s}function ah(n){try{console.warn(n);return}catch{}}function oh(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:gR(e)),t}function _R(n,e){const t=[];for(;n.previousElementSibling;){const s=n.previousElementSibling;e?s.matches(e)&&t.push(s):t.push(s),n=s}return t}function SR(n,e){const t=[];for(;n.nextElementSibling;){const s=n.nextElementSibling;e?s.matches(e)&&t.push(s):t.push(s),n=s}return t}function yi(n,e){return Ns().getComputedStyle(n,null).getPropertyValue(e)}function F1(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function CR(n,e){const t=[];let s=n.parentElement;for(;s;)t.push(s),s=s.parentElement;return t}function U1(n,e,t){const s=Ns();return n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(s.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(s.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function yr(n){return(Array.isArray(n)?n:[n]).filter(e=>!!e)}function z1(n,e){e===void 0&&(e=""),typeof trustedTypes<"u"?n.innerHTML=trustedTypes.createPolicy("html",{createHTML:t=>t}).createHTML(e):n.innerHTML=e}let bg;function jR(){const n=Ns(),e=pa();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function rC(){return bg||(bg=jR()),bg}let wg;function TR(n){let{userAgent:e}=n===void 0?{}:n;const t=rC(),s=Ns(),r=s.navigator.platform,a=e||s.navigator.userAgent,l={ios:!1,android:!1},u=s.screen.width,h=s.screen.height,f=a.match(/(Android);?[\s\/]+([\d.]+)?/);let g=a.match(/(iPad).*OS\s([\d_]+)/);const x=a.match(/(iPod)(.*OS\s([\d_]+))?/),v=!g&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),b=r==="Win32";let w=r==="MacIntel";const _=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!g&&w&&t.touch&&_.indexOf(`${u}x${h}`)>=0&&(g=a.match(/(Version)\/([\d.]+)/),g||(g=[0,1,"13_0_0"]),w=!1),f&&!b&&(l.os="android",l.android=!0),(g||v||x)&&(l.os="ios",l.ios=!0),l}function iC(n){return n===void 0&&(n={}),wg||(wg=TR(n)),wg}let _g;function ER(){const n=Ns(),e=iC();let t=!1;function s(){const u=n.navigator.userAgent.toLowerCase();return u.indexOf("safari")>=0&&u.indexOf("chrome")<0&&u.indexOf("android")<0}if(s()){const u=String(n.navigator.userAgent);if(u.includes("Version/")){const[h,f]=u.split("Version/")[1].split(" ")[0].split(".").map(g=>Number(g));t=h<16||h===16&&f<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),a=s(),l=a||r&&e.ios;return{isSafari:t||a,needPerspectiveFix:t,need3dFix:l,isWebView:r}}function aC(){return _g||(_g=ER()),_g}function kR(n){let{swiper:e,on:t,emit:s}=n;const r=Ns();let a=null,l=null;const u=()=>{!e||e.destroyed||!e.initialized||(s("beforeResize"),s("resize"))},h=()=>{!e||e.destroyed||!e.initialized||(a=new ResizeObserver(x=>{l=r.requestAnimationFrame(()=>{const{width:v,height:b}=e;let w=v,_=b;x.forEach(T=>{let{contentBoxSize:S,contentRect:A,target:E}=T;E&&E!==e.el||(w=A?A.width:(S[0]||S).inlineSize,_=A?A.height:(S[0]||S).blockSize)}),(w!==v||_!==b)&&u()})}),a.observe(e.el))},f=()=>{l&&r.cancelAnimationFrame(l),a&&a.unobserve&&e.el&&(a.unobserve(e.el),a=null)},g=()=>{!e||e.destroyed||!e.initialized||s("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){h();return}r.addEventListener("resize",u),r.addEventListener("orientationchange",g)}),t("destroy",()=>{f(),r.removeEventListener("resize",u),r.removeEventListener("orientationchange",g)})}function AR(n){let{swiper:e,extendParams:t,on:s,emit:r}=n;const a=[],l=Ns(),u=function(g,x){x===void 0&&(x={});const v=l.MutationObserver||l.WebkitMutationObserver,b=new v(w=>{if(e.__preventObserver__)return;if(w.length===1){r("observerUpdate",w[0]);return}const _=function(){r("observerUpdate",w[0])};l.requestAnimationFrame?l.requestAnimationFrame(_):l.setTimeout(_,0)});b.observe(g,{attributes:typeof x.attributes>"u"?!0:x.attributes,childList:e.isElement||(typeof x.childList>"u"?!0:x).childList,characterData:typeof x.characterData>"u"?!0:x.characterData}),a.push(b)},h=()=>{if(e.params.observer){if(e.params.observeParents){const g=CR(e.hostEl);for(let x=0;x<g.length;x+=1)u(g[x])}u(e.hostEl,{childList:e.params.observeSlideChildren}),u(e.wrapperEl,{attributes:!1})}},f=()=>{a.forEach(g=>{g.disconnect()}),a.splice(0,a.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),s("init",h),s("destroy",f)}var NR={on(n,e,t){const s=this;if(!s.eventsListeners||s.destroyed||typeof e!="function")return s;const r=t?"unshift":"push";return n.split(" ").forEach(a=>{s.eventsListeners[a]||(s.eventsListeners[a]=[]),s.eventsListeners[a][r](e)}),s},once(n,e,t){const s=this;if(!s.eventsListeners||s.destroyed||typeof e!="function")return s;function r(){s.off(n,r),r.__emitterProxy&&delete r.__emitterProxy;for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];e.apply(s,l)}return r.__emitterProxy=e,s.on(n,r,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const s=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[s](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(s=>{typeof e>"u"?t.eventsListeners[s]=[]:t.eventsListeners[s]&&t.eventsListeners[s].forEach((r,a)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&t.eventsListeners[s].splice(a,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,s;for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return typeof a[0]=="string"||Array.isArray(a[0])?(e=a[0],t=a.slice(1,a.length),s=n):(e=a[0].events,t=a[0].data,s=a[0].context||n),t.unshift(s),(Array.isArray(e)?e:e.split(" ")).forEach(h=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(f=>{f.apply(s,[h,...t])}),n.eventsListeners&&n.eventsListeners[h]&&n.eventsListeners[h].forEach(f=>{f.apply(s,t)})}),n}};function DR(){const n=this;let e,t;const s=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=s.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=s.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(yi(s,"padding-left")||0,10)-parseInt(yi(s,"padding-right")||0,10),t=t-parseInt(yi(s,"padding-top")||0,10)-parseInt(yi(s,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function OR(){const n=this;function e(N,H){return parseFloat(N.getPropertyValue(n.getDirectionLabel(H))||0)}const t=n.params,{wrapperEl:s,slidesEl:r,size:a,rtlTranslate:l,wrongRTL:u}=n,h=n.virtual&&t.virtual.enabled,f=h?n.virtual.slides.length:n.slides.length,g=Xn(r,`.${n.params.slideClass}, swiper-slide`),x=h?n.virtual.slides.length:g.length;let v=[];const b=[],w=[];let _=t.slidesOffsetBefore;typeof _=="function"&&(_=t.slidesOffsetBefore.call(n));let T=t.slidesOffsetAfter;typeof T=="function"&&(T=t.slidesOffsetAfter.call(n));const S=n.snapGrid.length,A=n.slidesGrid.length;let E=t.spaceBetween,M=-_,D=0,B=0;if(typeof a>"u")return;typeof E=="string"&&E.indexOf("%")>=0?E=parseFloat(E.replace("%",""))/100*a:typeof E=="string"&&(E=parseFloat(E)),n.virtualSize=-E,g.forEach(N=>{l?N.style.marginLeft="":N.style.marginRight="",N.style.marginBottom="",N.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(dd(s,"--swiper-centered-offset-before",""),dd(s,"--swiper-centered-offset-after",""));const F=t.grid&&t.grid.rows>1&&n.grid;F?n.grid.initSlides(g):n.grid&&n.grid.unsetSlides();let L;const V=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(N=>typeof t.breakpoints[N].slidesPerView<"u").length>0;for(let N=0;N<x;N+=1){L=0;let H;if(g[N]&&(H=g[N]),F&&n.grid.updateSlide(N,H,g),!(g[N]&&yi(H,"display")==="none")){if(t.slidesPerView==="auto"){V&&(g[N].style[n.getDirectionLabel("width")]="");const Y=getComputedStyle(H),se=H.style.transform,te=H.style.webkitTransform;if(se&&(H.style.transform="none"),te&&(H.style.webkitTransform="none"),t.roundLengths)L=n.isHorizontal()?U1(H,"width"):U1(H,"height");else{const ne=e(Y,"width"),R=e(Y,"padding-left"),$=e(Y,"padding-right"),Q=e(Y,"margin-left"),pe=e(Y,"margin-right"),O=Y.getPropertyValue("box-sizing");if(O&&O==="border-box")L=ne+Q+pe;else{const{clientWidth:q,offsetWidth:fe}=H;L=ne+R+$+Q+pe+(fe-q)}}se&&(H.style.transform=se),te&&(H.style.webkitTransform=te),t.roundLengths&&(L=Math.floor(L))}else L=(a-(t.slidesPerView-1)*E)/t.slidesPerView,t.roundLengths&&(L=Math.floor(L)),g[N]&&(g[N].style[n.getDirectionLabel("width")]=`${L}px`);g[N]&&(g[N].swiperSlideSize=L),w.push(L),t.centeredSlides?(M=M+L/2+D/2+E,D===0&&N!==0&&(M=M-a/2-E),N===0&&(M=M-a/2-E),Math.abs(M)<1/1e3&&(M=0),t.roundLengths&&(M=Math.floor(M)),B%t.slidesPerGroup===0&&v.push(M),b.push(M)):(t.roundLengths&&(M=Math.floor(M)),(B-Math.min(n.params.slidesPerGroupSkip,B))%n.params.slidesPerGroup===0&&v.push(M),b.push(M),M=M+L+E),n.virtualSize+=L+E,D=L,B+=1}}if(n.virtualSize=Math.max(n.virtualSize,a)+T,l&&u&&(t.effect==="slide"||t.effect==="coverflow")&&(s.style.width=`${n.virtualSize+E}px`),t.setWrapperSize&&(s.style[n.getDirectionLabel("width")]=`${n.virtualSize+E}px`),F&&n.grid.updateWrapperSize(L,v),!t.centeredSlides){const N=[];for(let H=0;H<v.length;H+=1){let Y=v[H];t.roundLengths&&(Y=Math.floor(Y)),v[H]<=n.virtualSize-a&&N.push(Y)}v=N,Math.floor(n.virtualSize-a)-Math.floor(v[v.length-1])>1&&v.push(n.virtualSize-a)}if(h&&t.loop){const N=w[0]+E;if(t.slidesPerGroup>1){const H=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),Y=N*t.slidesPerGroup;for(let se=0;se<H;se+=1)v.push(v[v.length-1]+Y)}for(let H=0;H<n.virtual.slidesBefore+n.virtual.slidesAfter;H+=1)t.slidesPerGroup===1&&v.push(v[v.length-1]+N),b.push(b[b.length-1]+N),n.virtualSize+=N}if(v.length===0&&(v=[0]),E!==0){const N=n.isHorizontal()&&l?"marginLeft":n.getDirectionLabel("marginRight");g.filter((H,Y)=>!t.cssMode||t.loop?!0:Y!==g.length-1).forEach(H=>{H.style[N]=`${E}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let N=0;w.forEach(Y=>{N+=Y+(E||0)}),N-=E;const H=N>a?N-a:0;v=v.map(Y=>Y<=0?-_:Y>H?H+T:Y)}if(t.centerInsufficientSlides){let N=0;w.forEach(Y=>{N+=Y+(E||0)}),N-=E;const H=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(N+H<a){const Y=(a-N-H)/2;v.forEach((se,te)=>{v[te]=se-Y}),b.forEach((se,te)=>{b[te]=se+Y})}}if(Object.assign(n,{slides:g,snapGrid:v,slidesGrid:b,slidesSizesGrid:w}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){dd(s,"--swiper-centered-offset-before",`${-v[0]}px`),dd(s,"--swiper-centered-offset-after",`${n.size/2-w[w.length-1]/2}px`);const N=-n.snapGrid[0],H=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(Y=>Y+N),n.slidesGrid=n.slidesGrid.map(Y=>Y+H)}if(x!==f&&n.emit("slidesLengthChange"),v.length!==S&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),b.length!==A&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!h&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const N=`${t.containerModifierClass}backface-hidden`,H=n.el.classList.contains(N);x<=t.maxBackfaceHiddenSlides?H||n.el.classList.add(N):H&&n.el.classList.remove(N)}}function MR(n){const e=this,t=[],s=e.virtual&&e.params.virtual.enabled;let r=0,a;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const l=u=>s?e.slides[e.getSlideIndexByData(u)]:e.slides[u];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(u=>{t.push(u)});else for(a=0;a<Math.ceil(e.params.slidesPerView);a+=1){const u=e.activeIndex+a;if(u>e.slides.length&&!s)break;t.push(l(u))}else t.push(l(e.activeIndex));for(a=0;a<t.length;a+=1)if(typeof t[a]<"u"){const u=t[a].offsetHeight;r=u>r?u:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function RR(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let s=0;s<e.length;s+=1)e[s].swiperSlideOffset=(n.isHorizontal()?e[s].offsetLeft:e[s].offsetTop)-t-n.cssOverflowAdjustment()}const V1=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function PR(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:s,rtlTranslate:r,snapGrid:a}=e;if(s.length===0)return;typeof s[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let l=-n;r&&(l=n),e.visibleSlidesIndexes=[],e.visibleSlides=[];let u=t.spaceBetween;typeof u=="string"&&u.indexOf("%")>=0?u=parseFloat(u.replace("%",""))/100*e.size:typeof u=="string"&&(u=parseFloat(u));for(let h=0;h<s.length;h+=1){const f=s[h];let g=f.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(g-=s[0].swiperSlideOffset);const x=(l+(t.centeredSlides?e.minTranslate():0)-g)/(f.swiperSlideSize+u),v=(l-a[0]+(t.centeredSlides?e.minTranslate():0)-g)/(f.swiperSlideSize+u),b=-(l-g),w=b+e.slidesSizesGrid[h],_=b>=0&&b<=e.size-e.slidesSizesGrid[h],T=b>=0&&b<e.size-1||w>1&&w<=e.size||b<=0&&w>=e.size;T&&(e.visibleSlides.push(f),e.visibleSlidesIndexes.push(h)),V1(f,T,t.slideVisibleClass),V1(f,_,t.slideFullyVisibleClass),f.progress=r?-x:x,f.originalProgress=r?-v:v}}function LR(n){const e=this;if(typeof n>"u"){const g=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*g||0}const t=e.params,s=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:a,isEnd:l,progressLoop:u}=e;const h=a,f=l;if(s===0)r=0,a=!0,l=!0;else{r=(n-e.minTranslate())/s;const g=Math.abs(n-e.minTranslate())<1,x=Math.abs(n-e.maxTranslate())<1;a=g||r<=0,l=x||r>=1,g&&(r=0),x&&(r=1)}if(t.loop){const g=e.getSlideIndexByData(0),x=e.getSlideIndexByData(e.slides.length-1),v=e.slidesGrid[g],b=e.slidesGrid[x],w=e.slidesGrid[e.slidesGrid.length-1],_=Math.abs(n);_>=v?u=(_-v)/w:u=(_+w-b)/w,u>1&&(u-=1)}Object.assign(e,{progress:r,progressLoop:u,isBeginning:a,isEnd:l}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),a&&!h&&e.emit("reachBeginning toEdge"),l&&!f&&e.emit("reachEnd toEdge"),(h&&!a||f&&!l)&&e.emit("fromEdge"),e.emit("progress",r)}const Sg=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function BR(){const n=this,{slides:e,params:t,slidesEl:s,activeIndex:r}=n,a=n.virtual&&t.virtual.enabled,l=n.grid&&t.grid&&t.grid.rows>1,u=x=>Xn(s,`.${t.slideClass}${x}, swiper-slide${x}`)[0];let h,f,g;if(a)if(t.loop){let x=r-n.virtual.slidesBefore;x<0&&(x=n.virtual.slides.length+x),x>=n.virtual.slides.length&&(x-=n.virtual.slides.length),h=u(`[data-swiper-slide-index="${x}"]`)}else h=u(`[data-swiper-slide-index="${r}"]`);else l?(h=e.find(x=>x.column===r),g=e.find(x=>x.column===r+1),f=e.find(x=>x.column===r-1)):h=e[r];h&&(l||(g=SR(h,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!g&&(g=e[0]),f=_R(h,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!f===0&&(f=e[e.length-1]))),e.forEach(x=>{Sg(x,x===h,t.slideActiveClass),Sg(x,x===g,t.slideNextClass),Sg(x,x===f,t.slidePrevClass)}),n.emitSlidesClasses()}const $d=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,s=e.closest(t());if(s){let r=s.querySelector(`.${n.params.lazyPreloaderClass}`);!r&&n.isElement&&(s.shadowRoot?r=s.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{s.shadowRoot&&(r=s.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},Cg=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},bp=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const s=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),r=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const l=r,u=[l-e];u.push(...Array.from({length:e}).map((h,f)=>l+s+f)),n.slides.forEach((h,f)=>{u.includes(h.column)&&Cg(n,f)});return}const a=r+s-1;if(n.params.rewind||n.params.loop)for(let l=r-e;l<=a+e;l+=1){const u=(l%t+t)%t;(u<r||u>a)&&Cg(n,u)}else for(let l=Math.max(r-e,0);l<=Math.min(a+e,t-1);l+=1)l!==r&&(l>a||l<r)&&Cg(n,l)};function FR(n){const{slidesGrid:e,params:t}=n,s=n.rtlTranslate?n.translate:-n.translate;let r;for(let a=0;a<e.length;a+=1)typeof e[a+1]<"u"?s>=e[a]&&s<e[a+1]-(e[a+1]-e[a])/2?r=a:s>=e[a]&&s<e[a+1]&&(r=a+1):s>=e[a]&&(r=a);return t.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function UR(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:s,params:r,activeIndex:a,realIndex:l,snapIndex:u}=e;let h=n,f;const g=b=>{let w=b-e.virtual.slidesBefore;return w<0&&(w=e.virtual.slides.length+w),w>=e.virtual.slides.length&&(w-=e.virtual.slides.length),w};if(typeof h>"u"&&(h=FR(e)),s.indexOf(t)>=0)f=s.indexOf(t);else{const b=Math.min(r.slidesPerGroupSkip,h);f=b+Math.floor((h-b)/r.slidesPerGroup)}if(f>=s.length&&(f=s.length-1),h===a&&!e.params.loop){f!==u&&(e.snapIndex=f,e.emit("snapIndexChange"));return}if(h===a&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=g(h);return}const x=e.grid&&r.grid&&r.grid.rows>1;let v;if(e.virtual&&r.virtual.enabled&&r.loop)v=g(h);else if(x){const b=e.slides.find(_=>_.column===h);let w=parseInt(b.getAttribute("data-swiper-slide-index"),10);Number.isNaN(w)&&(w=Math.max(e.slides.indexOf(b),0)),v=Math.floor(w/r.grid.rows)}else if(e.slides[h]){const b=e.slides[h].getAttribute("data-swiper-slide-index");b?v=parseInt(b,10):v=h}else v=h;Object.assign(e,{previousSnapIndex:u,snapIndex:f,previousRealIndex:l,realIndex:v,previousIndex:a,activeIndex:h}),e.initialized&&bp(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(l!==v&&e.emit("realIndexChange"),e.emit("slideChange"))}function zR(n,e){const t=this,s=t.params;let r=n.closest(`.${s.slideClass}, swiper-slide`);!r&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(u=>{!r&&u.matches&&u.matches(`.${s.slideClass}, swiper-slide`)&&(r=u)});let a=!1,l;if(r){for(let u=0;u<t.slides.length;u+=1)if(t.slides[u]===r){a=!0,l=u;break}}if(r&&a)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=l;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}s.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var VR={updateSize:DR,updateSlides:OR,updateAutoHeight:MR,updateSlidesOffset:RR,updateSlidesProgress:PR,updateProgress:LR,updateSlidesClasses:BR,updateActiveIndex:UR,updateClickedSlide:zR};function IR(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:s,translate:r,wrapperEl:a}=e;if(t.virtualTranslate)return s?-r:r;if(t.cssMode)return r;let l=vR(a,n);return l+=e.cssOverflowAdjustment(),s&&(l=-l),l||0}function HR(n,e){const t=this,{rtlTranslate:s,params:r,wrapperEl:a,progress:l}=t;let u=0,h=0;const f=0;t.isHorizontal()?u=s?-n:n:h=n,r.roundLengths&&(u=Math.floor(u),h=Math.floor(h)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?u:h,r.cssMode?a[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-u:-h:r.virtualTranslate||(t.isHorizontal()?u-=t.cssOverflowAdjustment():h-=t.cssOverflowAdjustment(),a.style.transform=`translate3d(${u}px, ${h}px, ${f}px)`);let g;const x=t.maxTranslate()-t.minTranslate();x===0?g=0:g=(n-t.minTranslate())/x,g!==l&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function $R(){return-this.snapGrid[0]}function GR(){return-this.snapGrid[this.snapGrid.length-1]}function YR(n,e,t,s,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),s===void 0&&(s=!0);const a=this,{params:l,wrapperEl:u}=a;if(a.animating&&l.preventInteractionOnTransition)return!1;const h=a.minTranslate(),f=a.maxTranslate();let g;if(s&&n>h?g=h:s&&n<f?g=f:g=n,a.updateProgress(g),l.cssMode){const x=a.isHorizontal();if(e===0)u[x?"scrollLeft":"scrollTop"]=-g;else{if(!a.support.smoothScroll)return nC({swiper:a,targetPosition:-g,side:x?"left":"top"}),!0;u.scrollTo({[x?"left":"top"]:-g,behavior:"smooth"})}return!0}return e===0?(a.setTransition(0),a.setTranslate(g),t&&(a.emit("beforeTransitionStart",e,r),a.emit("transitionEnd"))):(a.setTransition(e),a.setTranslate(g),t&&(a.emit("beforeTransitionStart",e,r),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(v){!a||a.destroyed||v.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,a.animating=!1,t&&a.emit("transitionEnd"))}),a.wrapperEl.addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd))),!0}var qR={getTranslate:IR,setTranslate:HR,minTranslate:$R,maxTranslate:GR,translateTo:YR};function WR(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function oC(n){let{swiper:e,runCallbacks:t,direction:s,step:r}=n;const{activeIndex:a,previousIndex:l}=e;let u=s;u||(a>l?u="next":a<l?u="prev":u="reset"),e.emit(`transition${r}`),t&&u==="reset"?e.emit(`slideResetTransition${r}`):t&&a!==l&&(e.emit(`slideChangeTransition${r}`),u==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`))}function XR(n,e){n===void 0&&(n=!0);const t=this,{params:s}=t;s.cssMode||(s.autoHeight&&t.updateAutoHeight(),oC({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function KR(n,e){n===void 0&&(n=!0);const t=this,{params:s}=t;t.animating=!1,!s.cssMode&&(t.setTransition(0),oC({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var QR={setTransition:WR,transitionStart:XR,transitionEnd:KR};function ZR(n,e,t,s,r){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const a=this;let l=n;l<0&&(l=0);const{params:u,snapGrid:h,slidesGrid:f,previousIndex:g,activeIndex:x,rtlTranslate:v,wrapperEl:b,enabled:w}=a;if(!w&&!s&&!r||a.destroyed||a.animating&&u.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=a.params.speed);const _=Math.min(a.params.slidesPerGroupSkip,l);let T=_+Math.floor((l-_)/a.params.slidesPerGroup);T>=h.length&&(T=h.length-1);const S=-h[T];if(u.normalizeSlideIndex)for(let F=0;F<f.length;F+=1){const L=-Math.floor(S*100),V=Math.floor(f[F]*100),N=Math.floor(f[F+1]*100);typeof f[F+1]<"u"?L>=V&&L<N-(N-V)/2?l=F:L>=V&&L<N&&(l=F+1):L>=V&&(l=F)}if(a.initialized&&l!==x&&(!a.allowSlideNext&&(v?S>a.translate&&S>a.minTranslate():S<a.translate&&S<a.minTranslate())||!a.allowSlidePrev&&S>a.translate&&S>a.maxTranslate()&&(x||0)!==l))return!1;l!==(g||0)&&t&&a.emit("beforeSlideChangeStart"),a.updateProgress(S);let A;l>x?A="next":l<x?A="prev":A="reset";const E=a.virtual&&a.params.virtual.enabled;if(!(E&&r)&&(v&&-S===a.translate||!v&&S===a.translate))return a.updateActiveIndex(l),u.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),u.effect!=="slide"&&a.setTranslate(S),A!=="reset"&&(a.transitionStart(t,A),a.transitionEnd(t,A)),!1;if(u.cssMode){const F=a.isHorizontal(),L=v?S:-S;if(e===0)E&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),E&&!a._cssModeVirtualInitialSet&&a.params.initialSlide>0?(a._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{b[F?"scrollLeft":"scrollTop"]=L})):b[F?"scrollLeft":"scrollTop"]=L,E&&requestAnimationFrame(()=>{a.wrapperEl.style.scrollSnapType="",a._immediateVirtual=!1});else{if(!a.support.smoothScroll)return nC({swiper:a,targetPosition:L,side:F?"left":"top"}),!0;b.scrollTo({[F?"left":"top"]:L,behavior:"smooth"})}return!0}const B=aC().isSafari;return E&&!r&&B&&a.isElement&&a.virtual.update(!1,!1,l),a.setTransition(e),a.setTranslate(S),a.updateActiveIndex(l),a.updateSlidesClasses(),a.emit("beforeTransitionStart",e,s),a.transitionStart(t,A),e===0?a.transitionEnd(t,A):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(L){!a||a.destroyed||L.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(t,A))}),a.wrapperEl.addEventListener("transitionend",a.onSlideToWrapperTransitionEnd)),!0}function JR(n,e,t,s){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const r=this;if(r.destroyed)return;typeof e>"u"&&(e=r.params.speed);const a=r.grid&&r.params.grid&&r.params.grid.rows>1;let l=n;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)l=l+r.virtual.slidesBefore;else{let u;if(a){const v=l*r.params.grid.rows;u=r.slides.find(b=>b.getAttribute("data-swiper-slide-index")*1===v).column}else u=r.getSlideIndexByData(l);const h=a?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:f}=r.params;let g=r.params.slidesPerView;g==="auto"?g=r.slidesPerViewDynamic():(g=Math.ceil(parseFloat(r.params.slidesPerView,10)),f&&g%2===0&&(g=g+1));let x=h-u<g;if(f&&(x=x||u<Math.ceil(g/2)),s&&f&&r.params.slidesPerView!=="auto"&&!a&&(x=!1),x){const v=f?u<r.activeIndex?"prev":"next":u-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:v,slideTo:!0,activeSlideIndex:v==="next"?u+1:u-h+1,slideRealIndex:v==="next"?r.realIndex:void 0})}if(a){const v=l*r.params.grid.rows;l=r.slides.find(b=>b.getAttribute("data-swiper-slide-index")*1===v).column}else l=r.getSlideIndexByData(l)}return requestAnimationFrame(()=>{r.slideTo(l,e,t,s)}),r}function eP(n,e,t){e===void 0&&(e=!0);const s=this,{enabled:r,params:a,animating:l}=s;if(!r||s.destroyed)return s;typeof n>"u"&&(n=s.params.speed);let u=a.slidesPerGroup;a.slidesPerView==="auto"&&a.slidesPerGroup===1&&a.slidesPerGroupAuto&&(u=Math.max(s.slidesPerViewDynamic("current",!0),1));const h=s.activeIndex<a.slidesPerGroupSkip?1:u,f=s.virtual&&a.virtual.enabled;if(a.loop){if(l&&!f&&a.loopPreventsSliding)return!1;if(s.loopFix({direction:"next"}),s._clientLeft=s.wrapperEl.clientLeft,s.activeIndex===s.slides.length-1&&a.cssMode)return requestAnimationFrame(()=>{s.slideTo(s.activeIndex+h,n,e,t)}),!0}return a.rewind&&s.isEnd?s.slideTo(0,n,e,t):s.slideTo(s.activeIndex+h,n,e,t)}function tP(n,e,t){e===void 0&&(e=!0);const s=this,{params:r,snapGrid:a,slidesGrid:l,rtlTranslate:u,enabled:h,animating:f}=s;if(!h||s.destroyed)return s;typeof n>"u"&&(n=s.params.speed);const g=s.virtual&&r.virtual.enabled;if(r.loop){if(f&&!g&&r.loopPreventsSliding)return!1;s.loopFix({direction:"prev"}),s._clientLeft=s.wrapperEl.clientLeft}const x=u?s.translate:-s.translate;function v(A){return A<0?-Math.floor(Math.abs(A)):Math.floor(A)}const b=v(x),w=a.map(A=>v(A)),_=r.freeMode&&r.freeMode.enabled;let T=a[w.indexOf(b)-1];if(typeof T>"u"&&(r.cssMode||_)){let A;a.forEach((E,M)=>{b>=E&&(A=M)}),typeof A<"u"&&(T=_?a[A]:a[A>0?A-1:A])}let S=0;if(typeof T<"u"&&(S=l.indexOf(T),S<0&&(S=s.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(S=S-s.slidesPerViewDynamic("previous",!0)+1,S=Math.max(S,0))),r.rewind&&s.isBeginning){const A=s.params.virtual&&s.params.virtual.enabled&&s.virtual?s.virtual.slides.length-1:s.slides.length-1;return s.slideTo(A,n,e,t)}else if(r.loop&&s.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{s.slideTo(S,n,e,t)}),!0;return s.slideTo(S,n,e,t)}function sP(n,e,t){e===void 0&&(e=!0);const s=this;if(!s.destroyed)return typeof n>"u"&&(n=s.params.speed),s.slideTo(s.activeIndex,n,e,t)}function nP(n,e,t,s){e===void 0&&(e=!0),s===void 0&&(s=.5);const r=this;if(r.destroyed)return;typeof n>"u"&&(n=r.params.speed);let a=r.activeIndex;const l=Math.min(r.params.slidesPerGroupSkip,a),u=l+Math.floor((a-l)/r.params.slidesPerGroup),h=r.rtlTranslate?r.translate:-r.translate;if(h>=r.snapGrid[u]){const f=r.snapGrid[u],g=r.snapGrid[u+1];h-f>(g-f)*s&&(a+=r.params.slidesPerGroup)}else{const f=r.snapGrid[u-1],g=r.snapGrid[u];h-f<=(g-f)*s&&(a-=r.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,r.slidesGrid.length-1),r.slideTo(a,n,e,t)}function rP(){const n=this;if(n.destroyed)return;const{params:e,slidesEl:t}=n,s=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let r=n.getSlideIndexWhenGrid(n.clickedIndex),a;const l=n.isElement?"swiper-slide":`.${e.slideClass}`,u=n.grid&&n.params.grid&&n.params.grid.rows>1;if(e.loop){if(n.animating)return;a=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?n.slideToLoop(a):r>(u?(n.slides.length-s)/2-(n.params.grid.rows-1):n.slides.length-s)?(n.loopFix(),r=n.getSlideIndex(Xn(t,`${l}[data-swiper-slide-index="${a}"]`)[0]),sC(()=>{n.slideTo(r)})):n.slideTo(r)}else n.slideTo(r)}var iP={slideTo:ZR,slideToLoop:JR,slideNext:eP,slidePrev:tP,slideReset:sP,slideToClosest:nP,slideToClickedSlide:rP};function aP(n,e){const t=this,{params:s,slidesEl:r}=t;if(!s.loop||t.virtual&&t.params.virtual.enabled)return;const a=()=>{Xn(r,`.${s.slideClass}, swiper-slide`).forEach((b,w)=>{b.setAttribute("data-swiper-slide-index",w)})},l=()=>{const v=Xn(r,`.${s.slideBlankClass}`);v.forEach(b=>{b.remove()}),v.length>0&&(t.recalcSlides(),t.updateSlides())},u=t.grid&&s.grid&&s.grid.rows>1;s.loopAddBlankSlides&&(s.slidesPerGroup>1||u)&&l();const h=s.slidesPerGroup*(u?s.grid.rows:1),f=t.slides.length%h!==0,g=u&&t.slides.length%s.grid.rows!==0,x=v=>{for(let b=0;b<v;b+=1){const w=t.isElement?oh("swiper-slide",[s.slideBlankClass]):oh("div",[s.slideClass,s.slideBlankClass]);t.slidesEl.append(w)}};if(f){if(s.loopAddBlankSlides){const v=h-t.slides.length%h;x(v),t.recalcSlides(),t.updateSlides()}else ah("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");a()}else if(g){if(s.loopAddBlankSlides){const v=s.grid.rows-t.slides.length%s.grid.rows;x(v),t.recalcSlides(),t.updateSlides()}else ah("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");a()}else a();t.loopFix({slideRealIndex:n,direction:s.centeredSlides?void 0:"next",initial:e})}function oP(n){let{slideRealIndex:e,slideTo:t=!0,direction:s,setTranslate:r,activeSlideIndex:a,initial:l,byController:u,byMousewheel:h}=n===void 0?{}:n;const f=this;if(!f.params.loop)return;f.emit("beforeLoopFix");const{slides:g,allowSlidePrev:x,allowSlideNext:v,slidesEl:b,params:w}=f,{centeredSlides:_,initialSlide:T}=w;if(f.allowSlidePrev=!0,f.allowSlideNext=!0,f.virtual&&w.virtual.enabled){t&&(!w.centeredSlides&&f.snapIndex===0?f.slideTo(f.virtual.slides.length,0,!1,!0):w.centeredSlides&&f.snapIndex<w.slidesPerView?f.slideTo(f.virtual.slides.length+f.snapIndex,0,!1,!0):f.snapIndex===f.snapGrid.length-1&&f.slideTo(f.virtual.slidesBefore,0,!1,!0)),f.allowSlidePrev=x,f.allowSlideNext=v,f.emit("loopFix");return}let S=w.slidesPerView;S==="auto"?S=f.slidesPerViewDynamic():(S=Math.ceil(parseFloat(w.slidesPerView,10)),_&&S%2===0&&(S=S+1));const A=w.slidesPerGroupAuto?S:w.slidesPerGroup;let E=_?Math.max(A,Math.ceil(S/2)):A;E%A!==0&&(E+=A-E%A),E+=w.loopAdditionalSlides,f.loopedSlides=E;const M=f.grid&&w.grid&&w.grid.rows>1;g.length<S+E||f.params.effect==="cards"&&g.length<S+E*2?ah("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):M&&w.grid.fill==="row"&&ah("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const D=[],B=[],F=M?Math.ceil(g.length/w.grid.rows):g.length,L=l&&F-T<S&&!_;let V=L?T:f.activeIndex;typeof a>"u"?a=f.getSlideIndex(g.find(R=>R.classList.contains(w.slideActiveClass))):V=a;const N=s==="next"||!s,H=s==="prev"||!s;let Y=0,se=0;const ne=(M?g[a].column:a)+(_&&typeof r>"u"?-S/2+.5:0);if(ne<E){Y=Math.max(E-ne,A);for(let R=0;R<E-ne;R+=1){const $=R-Math.floor(R/F)*F;if(M){const Q=F-$-1;for(let pe=g.length-1;pe>=0;pe-=1)g[pe].column===Q&&D.push(pe)}else D.push(F-$-1)}}else if(ne+S>F-E){se=Math.max(ne-(F-E*2),A),L&&(se=Math.max(se,S-F+T+1));for(let R=0;R<se;R+=1){const $=R-Math.floor(R/F)*F;M?g.forEach((Q,pe)=>{Q.column===$&&B.push(pe)}):B.push($)}}if(f.__preventObserver__=!0,requestAnimationFrame(()=>{f.__preventObserver__=!1}),f.params.effect==="cards"&&g.length<S+E*2&&(B.includes(a)&&B.splice(B.indexOf(a),1),D.includes(a)&&D.splice(D.indexOf(a),1)),H&&D.forEach(R=>{g[R].swiperLoopMoveDOM=!0,b.prepend(g[R]),g[R].swiperLoopMoveDOM=!1}),N&&B.forEach(R=>{g[R].swiperLoopMoveDOM=!0,b.append(g[R]),g[R].swiperLoopMoveDOM=!1}),f.recalcSlides(),w.slidesPerView==="auto"?f.updateSlides():M&&(D.length>0&&H||B.length>0&&N)&&f.slides.forEach((R,$)=>{f.grid.updateSlide($,R,f.slides)}),w.watchSlidesProgress&&f.updateSlidesOffset(),t){if(D.length>0&&H){if(typeof e>"u"){const R=f.slidesGrid[V],Q=f.slidesGrid[V+Y]-R;h?f.setTranslate(f.translate-Q):(f.slideTo(V+Math.ceil(Y),0,!1,!0),r&&(f.touchEventsData.startTranslate=f.touchEventsData.startTranslate-Q,f.touchEventsData.currentTranslate=f.touchEventsData.currentTranslate-Q))}else if(r){const R=M?D.length/w.grid.rows:D.length;f.slideTo(f.activeIndex+R,0,!1,!0),f.touchEventsData.currentTranslate=f.translate}}else if(B.length>0&&N)if(typeof e>"u"){const R=f.slidesGrid[V],Q=f.slidesGrid[V-se]-R;h?f.setTranslate(f.translate-Q):(f.slideTo(V-se,0,!1,!0),r&&(f.touchEventsData.startTranslate=f.touchEventsData.startTranslate-Q,f.touchEventsData.currentTranslate=f.touchEventsData.currentTranslate-Q))}else{const R=M?B.length/w.grid.rows:B.length;f.slideTo(f.activeIndex-R,0,!1,!0)}}if(f.allowSlidePrev=x,f.allowSlideNext=v,f.controller&&f.controller.control&&!u){const R={slideRealIndex:e,direction:s,setTranslate:r,activeSlideIndex:a,byController:!0};Array.isArray(f.controller.control)?f.controller.control.forEach($=>{!$.destroyed&&$.params.loop&&$.loopFix({...R,slideTo:$.params.slidesPerView===w.slidesPerView?t:!1})}):f.controller.control instanceof f.constructor&&f.controller.control.params.loop&&f.controller.control.loopFix({...R,slideTo:f.controller.control.params.slidesPerView===w.slidesPerView?t:!1})}f.emit("loopFix")}function lP(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||!t||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const s=[];n.slides.forEach(r=>{const a=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;s[a]=r}),n.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),s.forEach(r=>{t.append(r)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var cP={loopCreate:aP,loopFix:oP,loopDestroy:lP};function uP(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function dP(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var hP={setGrabCursor:uP,unsetGrabCursor:dP};function fP(n,e){e===void 0&&(e=this);function t(s){if(!s||s===pa()||s===Ns())return null;s.assignedSlot&&(s=s.assignedSlot);const r=s.closest(n);return!r&&!s.getRootNode?null:r||t(s.getRootNode().host)}return t(e)}function I1(n,e,t){const s=Ns(),{params:r}=n,a=r.edgeSwipeDetection,l=r.edgeSwipeThreshold;return a&&(t<=l||t>=s.innerWidth-l)?a==="prevent"?(e.preventDefault(),!0):!1:!0}function mP(n){const e=this,t=pa();let s=n;s.originalEvent&&(s=s.originalEvent);const r=e.touchEventsData;if(s.type==="pointerdown"){if(r.pointerId!==null&&r.pointerId!==s.pointerId)return;r.pointerId=s.pointerId}else s.type==="touchstart"&&s.targetTouches.length===1&&(r.touchId=s.targetTouches[0].identifier);if(s.type==="touchstart"){I1(e,s,s.targetTouches[0].pageX);return}const{params:a,touches:l,enabled:u}=e;if(!u||!a.simulateTouch&&s.pointerType==="mouse"||e.animating&&a.preventInteractionOnTransition)return;!e.animating&&a.cssMode&&a.loop&&e.loopFix();let h=s.target;if(a.touchEventsTarget==="wrapper"&&!wR(h,e.wrapperEl)||"which"in s&&s.which===3||"button"in s&&s.button>0||r.isTouched&&r.isMoved)return;const f=!!a.noSwipingClass&&a.noSwipingClass!=="",g=s.composedPath?s.composedPath():s.path;f&&s.target&&s.target.shadowRoot&&g&&(h=g[0]);const x=a.noSwipingSelector?a.noSwipingSelector:`.${a.noSwipingClass}`,v=!!(s.target&&s.target.shadowRoot);if(a.noSwiping&&(v?fP(x,h):h.closest(x))){e.allowClick=!0;return}if(a.swipeHandler&&!h.closest(a.swipeHandler))return;l.currentX=s.pageX,l.currentY=s.pageY;const b=l.currentX,w=l.currentY;if(!I1(e,s,b))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),l.startX=b,l.startY=w,r.touchStartTime=ih(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,a.threshold>0&&(r.allowThresholdMove=!1);let _=!0;h.matches(r.focusableElements)&&(_=!1,h.nodeName==="SELECT"&&(r.isTouched=!1)),t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==h&&(s.pointerType==="mouse"||s.pointerType!=="mouse"&&!h.matches(r.focusableElements))&&t.activeElement.blur();const T=_&&e.allowTouchMove&&a.touchStartPreventDefault;(a.touchStartForcePreventDefault||T)&&!h.isContentEditable&&s.preventDefault(),a.freeMode&&a.freeMode.enabled&&e.freeMode&&e.animating&&!a.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",s)}function gP(n){const e=pa(),t=this,s=t.touchEventsData,{params:r,touches:a,rtlTranslate:l,enabled:u}=t;if(!u||!r.simulateTouch&&n.pointerType==="mouse")return;let h=n;if(h.originalEvent&&(h=h.originalEvent),h.type==="pointermove"&&(s.touchId!==null||h.pointerId!==s.pointerId))return;let f;if(h.type==="touchmove"){if(f=[...h.changedTouches].find(D=>D.identifier===s.touchId),!f||f.identifier!==s.touchId)return}else f=h;if(!s.isTouched){s.startMoving&&s.isScrolling&&t.emit("touchMoveOpposite",h);return}const g=f.pageX,x=f.pageY;if(h.preventedByNestedSwiper){a.startX=g,a.startY=x;return}if(!t.allowTouchMove){h.target.matches(s.focusableElements)||(t.allowClick=!1),s.isTouched&&(Object.assign(a,{startX:g,startY:x,currentX:g,currentY:x}),s.touchStartTime=ih());return}if(r.touchReleaseOnEdges&&!r.loop)if(t.isVertical()){if(x<a.startY&&t.translate<=t.maxTranslate()||x>a.startY&&t.translate>=t.minTranslate()){s.isTouched=!1,s.isMoved=!1;return}}else{if(l&&(g>a.startX&&-t.translate<=t.maxTranslate()||g<a.startX&&-t.translate>=t.minTranslate()))return;if(!l&&(g<a.startX&&t.translate<=t.maxTranslate()||g>a.startX&&t.translate>=t.minTranslate()))return}if(e.activeElement&&e.activeElement.matches(s.focusableElements)&&e.activeElement!==h.target&&h.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&h.target===e.activeElement&&h.target.matches(s.focusableElements)){s.isMoved=!0,t.allowClick=!1;return}s.allowTouchCallbacks&&t.emit("touchMove",h),a.previousX=a.currentX,a.previousY=a.currentY,a.currentX=g,a.currentY=x;const v=a.currentX-a.startX,b=a.currentY-a.startY;if(t.params.threshold&&Math.sqrt(v**2+b**2)<t.params.threshold)return;if(typeof s.isScrolling>"u"){let D;t.isHorizontal()&&a.currentY===a.startY||t.isVertical()&&a.currentX===a.startX?s.isScrolling=!1:v*v+b*b>=25&&(D=Math.atan2(Math.abs(b),Math.abs(v))*180/Math.PI,s.isScrolling=t.isHorizontal()?D>r.touchAngle:90-D>r.touchAngle)}if(s.isScrolling&&t.emit("touchMoveOpposite",h),typeof s.startMoving>"u"&&(a.currentX!==a.startX||a.currentY!==a.startY)&&(s.startMoving=!0),s.isScrolling||h.type==="touchmove"&&s.preventTouchMoveFromPointerMove){s.isTouched=!1;return}if(!s.startMoving)return;t.allowClick=!1,!r.cssMode&&h.cancelable&&h.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&h.stopPropagation();let w=t.isHorizontal()?v:b,_=t.isHorizontal()?a.currentX-a.previousX:a.currentY-a.previousY;r.oneWayMovement&&(w=Math.abs(w)*(l?1:-1),_=Math.abs(_)*(l?1:-1)),a.diff=w,w*=r.touchRatio,l&&(w=-w,_=-_);const T=t.touchesDirection;t.swipeDirection=w>0?"prev":"next",t.touchesDirection=_>0?"prev":"next";const S=t.params.loop&&!r.cssMode,A=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!s.isMoved){if(S&&A&&t.loopFix({direction:t.swipeDirection}),s.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const D=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(D)}s.allowMomentumBounce=!1,r.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",h)}if(new Date().getTime(),r._loopSwapReset!==!1&&s.isMoved&&s.allowThresholdMove&&T!==t.touchesDirection&&S&&A&&Math.abs(w)>=1){Object.assign(a,{startX:g,startY:x,currentX:g,currentY:x,startTranslate:s.currentTranslate}),s.loopSwapReset=!0,s.startTranslate=s.currentTranslate;return}t.emit("sliderMove",h),s.isMoved=!0,s.currentTranslate=w+s.startTranslate;let E=!0,M=r.resistanceRatio;if(r.touchReleaseOnEdges&&(M=0),w>0?(S&&A&&s.allowThresholdMove&&s.currentTranslate>(r.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(r.slidesPerView!=="auto"&&t.slides.length-r.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),s.currentTranslate>t.minTranslate()&&(E=!1,r.resistance&&(s.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+s.startTranslate+w)**M))):w<0&&(S&&A&&s.allowThresholdMove&&s.currentTranslate<(r.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(r.slidesPerView!=="auto"&&t.slides.length-r.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(r.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),s.currentTranslate<t.maxTranslate()&&(E=!1,r.resistance&&(s.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-s.startTranslate-w)**M))),E&&(h.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&s.currentTranslate<s.startTranslate&&(s.currentTranslate=s.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&s.currentTranslate>s.startTranslate&&(s.currentTranslate=s.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(s.currentTranslate=s.startTranslate),r.threshold>0)if(Math.abs(w)>r.threshold||s.allowThresholdMove){if(!s.allowThresholdMove){s.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,s.currentTranslate=s.startTranslate,a.diff=t.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY;return}}else{s.currentTranslate=s.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&t.freeMode||r.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(s.currentTranslate),t.setTranslate(s.currentTranslate))}function pP(n){const e=this,t=e.touchEventsData;let s=n;s.originalEvent&&(s=s.originalEvent);let r;if(s.type==="touchend"||s.type==="touchcancel"){if(r=[...s.changedTouches].find(D=>D.identifier===t.touchId),!r||r.identifier!==t.touchId)return}else{if(t.touchId!==null||s.pointerId!==t.pointerId)return;r=s}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(s.type)&&!(["pointercancel","contextmenu"].includes(s.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:l,touches:u,rtlTranslate:h,slidesGrid:f,enabled:g}=e;if(!g||!l.simulateTouch&&s.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",s),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&l.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}l.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const x=ih(),v=x-t.touchStartTime;if(e.allowClick){const D=s.path||s.composedPath&&s.composedPath();e.updateClickedSlide(D&&D[0]||s.target,D),e.emit("tap click",s),v<300&&x-t.lastClickTime<300&&e.emit("doubleTap doubleClick",s)}if(t.lastClickTime=ih(),sC(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||u.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let b;if(l.followFinger?b=h?e.translate:-e.translate:b=-t.currentTranslate,l.cssMode)return;if(l.freeMode&&l.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:b});return}const w=b>=-e.maxTranslate()&&!e.params.loop;let _=0,T=e.slidesSizesGrid[0];for(let D=0;D<f.length;D+=D<l.slidesPerGroupSkip?1:l.slidesPerGroup){const B=D<l.slidesPerGroupSkip-1?1:l.slidesPerGroup;typeof f[D+B]<"u"?(w||b>=f[D]&&b<f[D+B])&&(_=D,T=f[D+B]-f[D]):(w||b>=f[D])&&(_=D,T=f[f.length-1]-f[f.length-2])}let S=null,A=null;l.rewind&&(e.isBeginning?A=l.virtual&&l.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(S=0));const E=(b-f[_])/T,M=_<l.slidesPerGroupSkip-1?1:l.slidesPerGroup;if(v>l.longSwipesMs){if(!l.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(E>=l.longSwipesRatio?e.slideTo(l.rewind&&e.isEnd?S:_+M):e.slideTo(_)),e.swipeDirection==="prev"&&(E>1-l.longSwipesRatio?e.slideTo(_+M):A!==null&&E<0&&Math.abs(E)>l.longSwipesRatio?e.slideTo(A):e.slideTo(_))}else{if(!l.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(s.target===e.navigation.nextEl||s.target===e.navigation.prevEl)?s.target===e.navigation.nextEl?e.slideTo(_+M):e.slideTo(_):(e.swipeDirection==="next"&&e.slideTo(S!==null?S:_+M),e.swipeDirection==="prev"&&e.slideTo(A!==null?A:_))}}function H1(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:s,allowSlidePrev:r,snapGrid:a}=n,l=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const u=l&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!u?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!l?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=r,n.allowSlideNext=s,n.params.watchOverflow&&a!==n.snapGrid&&n.checkOverflow()}function xP(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function vP(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:s}=n;if(!s)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let r;const a=n.maxTranslate()-n.minTranslate();a===0?r=0:r=(n.translate-n.minTranslate())/a,r!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function yP(n){const e=this;$d(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function bP(){const n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}const lC=(n,e)=>{const t=pa(),{params:s,el:r,wrapperEl:a,device:l}=n,u=!!s.nested,h=e==="on"?"addEventListener":"removeEventListener",f=e;!r||typeof r=="string"||(t[h]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:u}),r[h]("touchstart",n.onTouchStart,{passive:!1}),r[h]("pointerdown",n.onTouchStart,{passive:!1}),t[h]("touchmove",n.onTouchMove,{passive:!1,capture:u}),t[h]("pointermove",n.onTouchMove,{passive:!1,capture:u}),t[h]("touchend",n.onTouchEnd,{passive:!0}),t[h]("pointerup",n.onTouchEnd,{passive:!0}),t[h]("pointercancel",n.onTouchEnd,{passive:!0}),t[h]("touchcancel",n.onTouchEnd,{passive:!0}),t[h]("pointerout",n.onTouchEnd,{passive:!0}),t[h]("pointerleave",n.onTouchEnd,{passive:!0}),t[h]("contextmenu",n.onTouchEnd,{passive:!0}),(s.preventClicks||s.preventClicksPropagation)&&r[h]("click",n.onClick,!0),s.cssMode&&a[h]("scroll",n.onScroll),s.updateOnWindowResize?n[f](l.ios||l.android?"resize orientationchange observerUpdate":"resize observerUpdate",H1,!0):n[f]("observerUpdate",H1,!0),r[h]("load",n.onLoad,{capture:!0}))};function wP(){const n=this,{params:e}=n;n.onTouchStart=mP.bind(n),n.onTouchMove=gP.bind(n),n.onTouchEnd=pP.bind(n),n.onDocumentTouchStart=bP.bind(n),e.cssMode&&(n.onScroll=vP.bind(n)),n.onClick=xP.bind(n),n.onLoad=yP.bind(n),lC(n,"on")}function _P(){lC(this,"off")}var SP={attachEvents:wP,detachEvents:_P};const $1=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function CP(){const n=this,{realIndex:e,initialized:t,params:s,el:r}=n,a=s.breakpoints;if(!a||a&&Object.keys(a).length===0)return;const l=pa(),u=s.breakpointsBase==="window"||!s.breakpointsBase?s.breakpointsBase:"container",h=["window","container"].includes(s.breakpointsBase)||!s.breakpointsBase?n.el:l.querySelector(s.breakpointsBase),f=n.getBreakpoint(a,u,h);if(!f||n.currentBreakpoint===f)return;const x=(f in a?a[f]:void 0)||n.originalParams,v=$1(n,s),b=$1(n,x),w=n.params.grabCursor,_=x.grabCursor,T=s.enabled;v&&!b?(r.classList.remove(`${s.containerModifierClass}grid`,`${s.containerModifierClass}grid-column`),n.emitContainerClasses()):!v&&b&&(r.classList.add(`${s.containerModifierClass}grid`),(x.grid.fill&&x.grid.fill==="column"||!x.grid.fill&&s.grid.fill==="column")&&r.classList.add(`${s.containerModifierClass}grid-column`),n.emitContainerClasses()),w&&!_?n.unsetGrabCursor():!w&&_&&n.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(B=>{if(typeof x[B]>"u")return;const F=s[B]&&s[B].enabled,L=x[B]&&x[B].enabled;F&&!L&&n[B].disable(),!F&&L&&n[B].enable()});const S=x.direction&&x.direction!==s.direction,A=s.loop&&(x.slidesPerView!==s.slidesPerView||S),E=s.loop;S&&t&&n.changeDirection(),en(n.params,x);const M=n.params.enabled,D=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),T&&!M?n.disable():!T&&M&&n.enable(),n.currentBreakpoint=f,n.emit("_beforeBreakpoint",x),t&&(A?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!E&&D?(n.loopCreate(e),n.updateSlides()):E&&!D&&n.loopDestroy()),n.emit("breakpoint",x)}function jP(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let s=!1;const r=Ns(),a=e==="window"?r.innerHeight:t.clientHeight,l=Object.keys(n).map(u=>{if(typeof u=="string"&&u.indexOf("@")===0){const h=parseFloat(u.substr(1));return{value:a*h,point:u}}return{value:u,point:u}});l.sort((u,h)=>parseInt(u.value,10)-parseInt(h.value,10));for(let u=0;u<l.length;u+=1){const{point:h,value:f}=l[u];e==="window"?r.matchMedia(`(min-width: ${f}px)`).matches&&(s=h):f<=t.clientWidth&&(s=h)}return s||"max"}var TP={setBreakpoint:CP,getBreakpoint:jP};function EP(n,e){const t=[];return n.forEach(s=>{typeof s=="object"?Object.keys(s).forEach(r=>{s[r]&&t.push(e+r)}):typeof s=="string"&&t.push(e+s)}),t}function kP(){const n=this,{classNames:e,params:t,rtl:s,el:r,device:a}=n,l=EP(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:s},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:a.android},{ios:a.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...l),r.classList.add(...e),n.emitContainerClasses()}function AP(){const n=this,{el:e,classNames:t}=n;!e||typeof e=="string"||(e.classList.remove(...t),n.emitContainerClasses())}var NP={addClasses:kP,removeClasses:AP};function DP(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:s}=t;if(s){const r=n.slides.length-1,a=n.slidesGrid[r]+n.slidesSizesGrid[r]+s*2;n.isLocked=n.size>a}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var OP={checkOverflow:DP},wp={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function MP(n,e){return function(s){s===void 0&&(s={});const r=Object.keys(s)[0],a=s[r];if(typeof a!="object"||a===null){en(e,s);return}if(n[r]===!0&&(n[r]={enabled:!0}),r==="navigation"&&n[r]&&n[r].enabled&&!n[r].prevEl&&!n[r].nextEl&&(n[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&n[r]&&n[r].enabled&&!n[r].el&&(n[r].auto=!0),!(r in n&&"enabled"in a)){en(e,s);return}typeof n[r]=="object"&&!("enabled"in n[r])&&(n[r].enabled=!0),n[r]||(n[r]={enabled:!1}),en(e,s)}}const jg={eventsEmitter:NR,update:VR,translate:qR,transition:QR,slide:iP,loop:cP,grabCursor:hP,events:SP,breakpoints:TP,checkOverflow:OP,classes:NP},Tg={};let M0=class wr{constructor(){let e,t;for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?t=r[0]:[e,t]=r,t||(t={}),t=en({},t),e&&!t.el&&(t.el=e);const l=pa();if(t.el&&typeof t.el=="string"&&l.querySelectorAll(t.el).length>1){const g=[];return l.querySelectorAll(t.el).forEach(x=>{const v=en({},t,{el:x});g.push(new wr(v))}),g}const u=this;u.__swiper__=!0,u.support=rC(),u.device=iC({userAgent:t.userAgent}),u.browser=aC(),u.eventsListeners={},u.eventsAnyListeners=[],u.modules=[...u.__modules__],t.modules&&Array.isArray(t.modules)&&u.modules.push(...t.modules);const h={};u.modules.forEach(g=>{g({params:t,swiper:u,extendParams:MP(t,h),on:u.on.bind(u),once:u.once.bind(u),off:u.off.bind(u),emit:u.emit.bind(u)})});const f=en({},wp,h);return u.params=en({},f,Tg,t),u.originalParams=en({},u.params),u.passedParams=en({},t),u.params&&u.params.on&&Object.keys(u.params.on).forEach(g=>{u.on(g,u.params.on[g])}),u.params&&u.params.onAny&&u.onAny(u.params.onAny),Object.assign(u,{enabled:u.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return u.params.direction==="horizontal"},isVertical(){return u.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:u.params.allowSlideNext,allowSlidePrev:u.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:u.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:u.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),u.emit("_swiper"),u.params.init&&u.init(),u}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:s}=this,r=Xn(t,`.${s.slideClass}, swiper-slide`),a=F1(r[0]);return F1(e)-a}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>t.getAttribute("data-swiper-slide-index")*1===e))}getSlideIndexWhenGrid(e){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?e=Math.floor(e/this.params.grid.rows):this.params.grid.fill==="row"&&(e=e%Math.ceil(this.slides.length/this.params.grid.rows))),e}recalcSlides(){const e=this,{slidesEl:t,params:s}=e;e.slides=Xn(t,`.${s.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const s=this;e=Math.min(Math.max(e,0),1);const r=s.minTranslate(),l=(s.maxTranslate()-r)*e+r;s.translateTo(l,typeof t>"u"?0:t),s.updateActiveIndex(),s.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(s=>s.indexOf("swiper")===0||s.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(s=>s.indexOf("swiper-slide")===0||s.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(s=>{const r=e.getSlideClasses(s);t.push({slideEl:s,classNames:r}),e.emit("_slideClass",s,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const s=this,{params:r,slides:a,slidesGrid:l,slidesSizesGrid:u,size:h,activeIndex:f}=s;let g=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let x=a[f]?Math.ceil(a[f].swiperSlideSize):0,v;for(let b=f+1;b<a.length;b+=1)a[b]&&!v&&(x+=Math.ceil(a[b].swiperSlideSize),g+=1,x>h&&(v=!0));for(let b=f-1;b>=0;b-=1)a[b]&&!v&&(x+=a[b].swiperSlideSize,g+=1,x>h&&(v=!0))}else if(e==="current")for(let x=f+1;x<a.length;x+=1)(t?l[x]+u[x]-l[f]<h:l[x]-l[f]<h)&&(g+=1);else for(let x=f-1;x>=0;x-=1)l[f]-l[x]<h&&(g+=1);return g}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:s}=e;s.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(l=>{l.complete&&$d(e,l)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const l=e.rtlTranslate?e.translate*-1:e.translate,u=Math.min(Math.max(l,e.maxTranslate()),e.minTranslate());e.setTranslate(u),e.updateActiveIndex(),e.updateSlidesClasses()}let a;if(s.freeMode&&s.freeMode.enabled&&!s.cssMode)r(),s.autoHeight&&e.updateAutoHeight();else{if((s.slidesPerView==="auto"||s.slidesPerView>1)&&e.isEnd&&!s.centeredSlides){const l=e.virtual&&s.virtual.enabled?e.virtual.slides:e.slides;a=e.slideTo(l.length-1,0,!1,!0)}else a=e.slideTo(e.activeIndex,0,!1,!0);a||r()}s.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const s=this,r=s.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(s.el.classList.remove(`${s.params.containerModifierClass}${r}`),s.el.classList.add(`${s.params.containerModifierClass}${e}`),s.emitContainerClasses(),s.params.direction=e,s.slides.forEach(a=>{e==="vertical"?a.style.width="":a.style.height=""}),s.emit("changeDirection"),t&&s.update()),s}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let s=e||t.params.el;if(typeof s=="string"&&(s=document.querySelector(s)),!s)return!1;s.swiper=t,s.parentNode&&s.parentNode.host&&s.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let l=s&&s.shadowRoot&&s.shadowRoot.querySelector?s.shadowRoot.querySelector(r()):Xn(s,r())[0];return!l&&t.params.createElements&&(l=oh("div",t.params.wrapperClass),s.append(l),Xn(s,`.${t.params.slideClass}`).forEach(u=>{l.append(u)})),Object.assign(t,{el:s,wrapperEl:l,slidesEl:t.isElement&&!s.parentNode.host.slideSlots?s.parentNode.host:l,hostEl:t.isElement?s.parentNode.host:s,mounted:!0,rtl:s.dir.toLowerCase()==="rtl"||yi(s,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(s.dir.toLowerCase()==="rtl"||yi(s,"direction")==="rtl"),wrongRTL:yi(l,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const r=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&r.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(a=>{a.complete?$d(t,a):a.addEventListener("load",l=>{$d(t,l.target)})}),bp(t),t.initialized=!0,bp(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const s=this,{params:r,el:a,wrapperEl:l,slides:u}=s;return typeof s.params>"u"||s.destroyed||(s.emit("beforeDestroy"),s.initialized=!1,s.detachEvents(),r.loop&&s.loopDestroy(),t&&(s.removeClasses(),a&&typeof a!="string"&&a.removeAttribute("style"),l&&l.removeAttribute("style"),u&&u.length&&u.forEach(h=>{h.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),h.removeAttribute("style"),h.removeAttribute("data-swiper-slide-index")})),s.emit("destroy"),Object.keys(s.eventsListeners).forEach(h=>{s.off(h)}),e!==!1&&(s.el&&typeof s.el!="string"&&(s.el.swiper=null),pR(s)),s.destroyed=!0),null}static extendDefaults(e){en(Tg,e)}static get extendedDefaults(){return Tg}static get defaults(){return wp}static installModule(e){wr.prototype.__modules__||(wr.prototype.__modules__=[]);const t=wr.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>wr.installModule(t)),wr):(wr.installModule(e),wr)}};Object.keys(jg).forEach(n=>{Object.keys(jg[n]).forEach(e=>{M0.prototype[e]=jg[n][e]})});M0.use([kR,AR]);const cC=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function ha(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function _o(n,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(s=>t.indexOf(s)<0).forEach(s=>{typeof n[s]>"u"?n[s]=e[s]:ha(e[s])&&ha(n[s])&&Object.keys(e[s]).length>0?e[s].__swiper__?n[s]=e[s]:_o(n[s],e[s]):n[s]=e[s]})}function uC(n){return n===void 0&&(n={}),n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function dC(n){return n===void 0&&(n={}),n.pagination&&typeof n.pagination.el>"u"}function hC(n){return n===void 0&&(n={}),n.scrollbar&&typeof n.scrollbar.el>"u"}function fC(n){n===void 0&&(n="");const e=n.split(" ").map(s=>s.trim()).filter(s=>!!s),t=[];return e.forEach(s=>{t.indexOf(s)<0&&t.push(s)}),t.join(" ")}function RP(n){return n===void 0&&(n=""),n?n.includes("swiper-wrapper")?n:`swiper-wrapper ${n}`:"swiper-wrapper"}function PP(n){let{swiper:e,slides:t,passedParams:s,changedParams:r,nextEl:a,prevEl:l,scrollbarEl:u,paginationEl:h}=n;const f=r.filter(V=>V!=="children"&&V!=="direction"&&V!=="wrapperClass"),{params:g,pagination:x,navigation:v,scrollbar:b,virtual:w,thumbs:_}=e;let T,S,A,E,M,D,B,F;r.includes("thumbs")&&s.thumbs&&s.thumbs.swiper&&!s.thumbs.swiper.destroyed&&g.thumbs&&(!g.thumbs.swiper||g.thumbs.swiper.destroyed)&&(T=!0),r.includes("controller")&&s.controller&&s.controller.control&&g.controller&&!g.controller.control&&(S=!0),r.includes("pagination")&&s.pagination&&(s.pagination.el||h)&&(g.pagination||g.pagination===!1)&&x&&!x.el&&(A=!0),r.includes("scrollbar")&&s.scrollbar&&(s.scrollbar.el||u)&&(g.scrollbar||g.scrollbar===!1)&&b&&!b.el&&(E=!0),r.includes("navigation")&&s.navigation&&(s.navigation.prevEl||l)&&(s.navigation.nextEl||a)&&(g.navigation||g.navigation===!1)&&v&&!v.prevEl&&!v.nextEl&&(M=!0);const L=V=>{e[V]&&(e[V].destroy(),V==="navigation"?(e.isElement&&(e[V].prevEl.remove(),e[V].nextEl.remove()),g[V].prevEl=void 0,g[V].nextEl=void 0,e[V].prevEl=void 0,e[V].nextEl=void 0):(e.isElement&&e[V].el.remove(),g[V].el=void 0,e[V].el=void 0))};r.includes("loop")&&e.isElement&&(g.loop&&!s.loop?D=!0:!g.loop&&s.loop?B=!0:F=!0),f.forEach(V=>{if(ha(g[V])&&ha(s[V]))Object.assign(g[V],s[V]),(V==="navigation"||V==="pagination"||V==="scrollbar")&&"enabled"in s[V]&&!s[V].enabled&&L(V);else{const N=s[V];(N===!0||N===!1)&&(V==="navigation"||V==="pagination"||V==="scrollbar")?N===!1&&L(V):g[V]=s[V]}}),f.includes("controller")&&!S&&e.controller&&e.controller.control&&g.controller&&g.controller.control&&(e.controller.control=g.controller.control),r.includes("children")&&t&&w&&g.virtual.enabled?(w.slides=t,w.update(!0)):r.includes("virtual")&&w&&g.virtual.enabled&&(t&&(w.slides=t),w.update(!0)),r.includes("children")&&t&&g.loop&&(F=!0),T&&_.init()&&_.update(!0),S&&(e.controller.control=g.controller.control),A&&(e.isElement&&(!h||typeof h=="string")&&(h=document.createElement("div"),h.classList.add("swiper-pagination"),h.part.add("pagination"),e.el.appendChild(h)),h&&(g.pagination.el=h),x.init(),x.render(),x.update()),E&&(e.isElement&&(!u||typeof u=="string")&&(u=document.createElement("div"),u.classList.add("swiper-scrollbar"),u.part.add("scrollbar"),e.el.appendChild(u)),u&&(g.scrollbar.el=u),b.init(),b.updateSize(),b.setTranslate()),M&&(e.isElement&&((!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-next"),z1(a,e.hostEl.constructor.nextButtonSvg),a.part.add("button-next"),e.el.appendChild(a)),(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-button-prev"),z1(l,e.hostEl.constructor.prevButtonSvg),l.part.add("button-prev"),e.el.appendChild(l))),a&&(g.navigation.nextEl=a),l&&(g.navigation.prevEl=l),v.init(),v.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=s.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=s.allowSlidePrev),r.includes("direction")&&e.changeDirection(s.direction,!1),(D||F)&&e.loopDestroy(),(B||F)&&e.loopCreate(),e.update()}function LP(n,e){n===void 0&&(n={}),e===void 0&&(e=!0);const t={on:{}},s={},r={};_o(t,wp),t._emitClasses=!0,t.init=!1;const a={},l=cC.map(h=>h.replace(/_/,"")),u=Object.assign({},n);return Object.keys(u).forEach(h=>{typeof n[h]>"u"||(l.indexOf(h)>=0?ha(n[h])?(t[h]={},r[h]={},_o(t[h],n[h]),_o(r[h],n[h])):(t[h]=n[h],r[h]=n[h]):h.search(/on[A-Z]/)===0&&typeof n[h]=="function"?e?s[`${h[2].toLowerCase()}${h.substr(3)}`]=n[h]:t.on[`${h[2].toLowerCase()}${h.substr(3)}`]=n[h]:a[h]=n[h])}),["navigation","pagination","scrollbar"].forEach(h=>{t[h]===!0&&(t[h]={}),t[h]===!1&&delete t[h]}),{params:t,passedParams:r,rest:a,events:s}}function BP(n,e){let{el:t,nextEl:s,prevEl:r,paginationEl:a,scrollbarEl:l,swiper:u}=n;uC(e)&&s&&r&&(u.params.navigation.nextEl=s,u.originalParams.navigation.nextEl=s,u.params.navigation.prevEl=r,u.originalParams.navigation.prevEl=r),dC(e)&&a&&(u.params.pagination.el=a,u.originalParams.pagination.el=a),hC(e)&&l&&(u.params.scrollbar.el=l,u.originalParams.scrollbar.el=l),u.init(t)}function FP(n,e,t,s,r){const a=[];if(!e)return a;const l=h=>{a.indexOf(h)<0&&a.push(h)};if(t&&s){const h=s.map(r),f=t.map(r);h.join("")!==f.join("")&&l("children"),s.length!==t.length&&l("children")}return cC.filter(h=>h[0]==="_").map(h=>h.replace(/_/,"")).forEach(h=>{if(h in n&&h in e)if(ha(n[h])&&ha(e[h])){const f=Object.keys(n[h]),g=Object.keys(e[h]);f.length!==g.length?l(h):(f.forEach(x=>{n[h][x]!==e[h][x]&&l(h)}),g.forEach(x=>{n[h][x]!==e[h][x]&&l(h)}))}else n[h]!==e[h]&&l(h)}),a}const UP=n=>{!n||n.destroyed||!n.params.virtual||n.params.virtual&&!n.params.virtual.enabled||(n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.emit("_virtualUpdated"),n.parallax&&n.params.parallax&&n.params.parallax.enabled&&n.parallax.setTranslate())};function lh(){return lh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},lh.apply(this,arguments)}function mC(n){return n.type&&n.type.displayName&&n.type.displayName.includes("SwiperSlide")}function gC(n){const e=[];return Wt.Children.toArray(n).forEach(t=>{mC(t)?e.push(t):t.props&&t.props.children&&gC(t.props.children).forEach(s=>e.push(s))}),e}function zP(n){const e=[],t={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Wt.Children.toArray(n).forEach(s=>{if(mC(s))e.push(s);else if(s.props&&s.props.slot&&t[s.props.slot])t[s.props.slot].push(s);else if(s.props&&s.props.children){const r=gC(s.props.children);r.length>0?r.forEach(a=>e.push(a)):t["container-end"].push(s)}else t["container-end"].push(s)}),{slides:e,slots:t}}function VP(n,e,t){if(!t)return null;const s=g=>{let x=g;return g<0?x=e.length+g:x>=e.length&&(x=x-e.length),x},r=n.isHorizontal()?{[n.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:a,to:l}=t,u=n.params.loop?-e.length:0,h=n.params.loop?e.length*2:e.length,f=[];for(let g=u;g<h;g+=1)g>=a&&g<=l&&f.push(e[s(g)]);return f.map((g,x)=>Wt.cloneElement(g,{swiper:n,style:r,key:g.props.virtualIndex||g.key||`slide-${x}`}))}function lc(n,e){return typeof window>"u"?j.useEffect(n,e):j.useLayoutEffect(n,e)}const G1=j.createContext(null),IP=j.createContext(null),pC=j.forwardRef(function(n,e){let{className:t,tag:s="div",wrapperTag:r="div",children:a,onSwiper:l,...u}=n===void 0?{}:n,h=!1;const[f,g]=j.useState("swiper"),[x,v]=j.useState(null),[b,w]=j.useState(!1),_=j.useRef(!1),T=j.useRef(null),S=j.useRef(null),A=j.useRef(null),E=j.useRef(null),M=j.useRef(null),D=j.useRef(null),B=j.useRef(null),F=j.useRef(null),{params:L,passedParams:V,rest:N,events:H}=LP(u),{slides:Y,slots:se}=zP(a),te=()=>{w(!b)};Object.assign(L.on,{_containerClasses(pe,O){g(O)}});const ne=()=>{Object.assign(L.on,H),h=!0;const pe={...L};if(delete pe.wrapperClass,S.current=new M0(pe),S.current.virtual&&S.current.params.virtual.enabled){S.current.virtual.slides=Y;const O={cache:!1,slides:Y,renderExternal:v,renderExternalUpdate:!1};_o(S.current.params.virtual,O),_o(S.current.originalParams.virtual,O)}};T.current||ne(),S.current&&S.current.on("_beforeBreakpoint",te);const R=()=>{h||!H||!S.current||Object.keys(H).forEach(pe=>{S.current.on(pe,H[pe])})},$=()=>{!H||!S.current||Object.keys(H).forEach(pe=>{S.current.off(pe,H[pe])})};j.useEffect(()=>()=>{S.current&&S.current.off("_beforeBreakpoint",te)}),j.useEffect(()=>{!_.current&&S.current&&(S.current.emitSlidesClasses(),_.current=!0)}),lc(()=>{if(e&&(e.current=T.current),!!T.current)return S.current.destroyed&&ne(),BP({el:T.current,nextEl:M.current,prevEl:D.current,paginationEl:B.current,scrollbarEl:F.current,swiper:S.current},L),l&&!S.current.destroyed&&l(S.current),()=>{S.current&&!S.current.destroyed&&S.current.destroy(!0,!1)}},[]),lc(()=>{R();const pe=FP(V,A.current,Y,E.current,O=>O.key);return A.current=V,E.current=Y,pe.length&&S.current&&!S.current.destroyed&&PP({swiper:S.current,slides:Y,passedParams:V,changedParams:pe,nextEl:M.current,prevEl:D.current,scrollbarEl:F.current,paginationEl:B.current}),()=>{$()}}),lc(()=>{UP(S.current)},[x]);function Q(){return L.virtual?VP(S.current,Y,x):Y.map((pe,O)=>Wt.cloneElement(pe,{swiper:S.current,swiperSlideIndex:O}))}return Wt.createElement(s,lh({ref:T,className:fC(`${f}${t?` ${t}`:""}`)},N),Wt.createElement(IP.Provider,{value:S.current},se["container-start"],Wt.createElement(r,{className:RP(L.wrapperClass)},se["wrapper-start"],Q(),se["wrapper-end"]),uC(L)&&Wt.createElement(Wt.Fragment,null,Wt.createElement("div",{ref:D,className:"swiper-button-prev"}),Wt.createElement("div",{ref:M,className:"swiper-button-next"})),hC(L)&&Wt.createElement("div",{ref:F,className:"swiper-scrollbar"}),dC(L)&&Wt.createElement("div",{ref:B,className:"swiper-pagination"}),se["container-end"]))});pC.displayName="Swiper";const xC=j.forwardRef(function(n,e){let{tag:t="div",children:s,className:r="",swiper:a,zoom:l,lazy:u,virtualIndex:h,swiperSlideIndex:f,...g}=n===void 0?{}:n;const x=j.useRef(null),[v,b]=j.useState("swiper-slide"),[w,_]=j.useState(!1);function T(M,D,B){D===x.current&&b(B)}lc(()=>{if(typeof f<"u"&&(x.current.swiperSlideIndex=f),e&&(e.current=x.current),!(!x.current||!a)){if(a.destroyed){v!=="swiper-slide"&&b("swiper-slide");return}return a.on("_slideClass",T),()=>{a&&a.off("_slideClass",T)}}}),lc(()=>{a&&x.current&&!a.destroyed&&b(a.getSlideClasses(x.current))},[a]);const S={isActive:v.indexOf("swiper-slide-active")>=0,isVisible:v.indexOf("swiper-slide-visible")>=0,isPrev:v.indexOf("swiper-slide-prev")>=0,isNext:v.indexOf("swiper-slide-next")>=0},A=()=>typeof s=="function"?s(S):s,E=()=>{_(!0)};return Wt.createElement(t,lh({ref:x,className:fC(`${v}${r?` ${r}`:""}`),"data-swiper-slide-index":h,onLoad:E},g),l&&Wt.createElement(G1.Provider,{value:S},Wt.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof l=="number"?l:void 0},A(),u&&!w&&Wt.createElement("div",{className:"swiper-lazy-preloader"}))),!l&&Wt.createElement(G1.Provider,{value:S},A(),u&&!w&&Wt.createElement("div",{className:"swiper-lazy-preloader"})))});xC.displayName="SwiperSlide";function HP(n,e,t,s){return n.params.createElements&&Object.keys(s).forEach(r=>{if(!t[r]&&t.auto===!0){let a=Xn(n.el,`.${s[r]}`)[0];a||(a=oh("div",s[r]),a.className=s[r],n.el.append(a)),t[r]=a,e[r]=a}}),t}function $P(n){let{swiper:e,extendParams:t,on:s,emit:r}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function a(w){let _;return w&&typeof w=="string"&&e.isElement&&(_=e.el.querySelector(w)||e.hostEl.querySelector(w),_)?_:(w&&(typeof w=="string"&&(_=[...document.querySelectorAll(w)]),e.params.uniqueNavElements&&typeof w=="string"&&_&&_.length>1&&e.el.querySelectorAll(w).length===1?_=e.el.querySelector(w):_&&_.length===1&&(_=_[0])),w&&!_?w:_)}function l(w,_){const T=e.params.navigation;w=yr(w),w.forEach(S=>{S&&(S.classList[_?"add":"remove"](...T.disabledClass.split(" ")),S.tagName==="BUTTON"&&(S.disabled=_),e.params.watchOverflow&&e.enabled&&S.classList[e.isLocked?"add":"remove"](T.lockClass))})}function u(){const{nextEl:w,prevEl:_}=e.navigation;if(e.params.loop){l(_,!1),l(w,!1);return}l(_,e.isBeginning&&!e.params.rewind),l(w,e.isEnd&&!e.params.rewind)}function h(w){w.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function f(w){w.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function g(){const w=e.params.navigation;if(e.params.navigation=HP(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(w.nextEl||w.prevEl))return;let _=a(w.nextEl),T=a(w.prevEl);Object.assign(e.navigation,{nextEl:_,prevEl:T}),_=yr(_),T=yr(T);const S=(A,E)=>{A&&A.addEventListener("click",E==="next"?f:h),!e.enabled&&A&&A.classList.add(...w.lockClass.split(" "))};_.forEach(A=>S(A,"next")),T.forEach(A=>S(A,"prev"))}function x(){let{nextEl:w,prevEl:_}=e.navigation;w=yr(w),_=yr(_);const T=(S,A)=>{S.removeEventListener("click",A==="next"?f:h),S.classList.remove(...e.params.navigation.disabledClass.split(" "))};w.forEach(S=>T(S,"next")),_.forEach(S=>T(S,"prev"))}s("init",()=>{e.params.navigation.enabled===!1?b():(g(),u())}),s("toEdge fromEdge lock unlock",()=>{u()}),s("destroy",()=>{x()}),s("enable disable",()=>{let{nextEl:w,prevEl:_}=e.navigation;if(w=yr(w),_=yr(_),e.enabled){u();return}[...w,..._].filter(T=>!!T).forEach(T=>T.classList.add(e.params.navigation.lockClass))}),s("click",(w,_)=>{let{nextEl:T,prevEl:S}=e.navigation;T=yr(T),S=yr(S);const A=_.target;let E=S.includes(A)||T.includes(A);if(e.isElement&&!E){const M=_.path||_.composedPath&&_.composedPath();M&&(E=M.find(D=>T.includes(D)||S.includes(D)))}if(e.params.navigation.hideOnClick&&!E){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===A||e.pagination.el.contains(A)))return;let M;T.length?M=T[0].classList.contains(e.params.navigation.hiddenClass):S.length&&(M=S[0].classList.contains(e.params.navigation.hiddenClass)),r(M===!0?"navigationShow":"navigationHide"),[...T,...S].filter(D=>!!D).forEach(D=>D.classList.toggle(e.params.navigation.hiddenClass))}});const v=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),g(),u()},b=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),x()};Object.assign(e.navigation,{enable:v,disable:b,update:u,init:g,destroy:x})}const GP=()=>{const[n,e]=j.useState(""),[t,s]=j.useState(""),[r,a]=j.useState(""),[l,u]=j.useState(""),[h,f]=j.useState(!1),[g,x]=j.useState(l),{session:v,signOut:b}=Ti(),[w,_]=j.useState(null),[T,S]=j.useState(!0),[A,E]=j.useState([]),[M,D]=j.useState(!1),[B,F]=j.useState(null),L=Ci(),V=15551234567,N=()=>!l||l===V?V:l,H=()=>!l||l===V,Y=async()=>{try{await b(),L("/login"),setTimeout(()=>window.scrollTo(0,0),100)}catch(O){console.error("Error signing out:",O)}};j.useEffect(()=>{(async()=>{try{if(!v||!v.user){console.log("No session or user found.");return}const{data:q,error:fe}=await ve.from("CUSTOMER").select("*").eq("auth_user_id",v.user.id).single();fe||!q?console.log("No profile data found for this user."):(e(q.cus_username||""),s(q.cus_fname||""),a(q.cus_lname||""),u(q.cus_celno||""),_(q))}catch(q){console.error("Error fetching profile:",q.message)}finally{S(!1)}})()},[v]),j.useEffect(()=>{w&&(async()=>{try{if(!w?.cus_id)return;const{data:q,error:fe}=await ve.from("CUSTOM-CAKE").select("*").eq("cus_id",w.cus_id);if(fe)throw fe;const me=q.map(_e=>({..._e,publicUrl:_e.cc_img?ve.storage.from("cust.cakes").getPublicUrl(_e.cc_img).data.publicUrl:null}));E(me)}catch(q){console.error("Error fetching custom cakes:",q.message)}})()},[w]);const se=()=>{const O=H()?"":l;x(O),f(!0)},te=O=>{const q=O.target.value;(/^[\d]*$/.test(q)||q==="")&&x(q)},ne=()=>{if(g&&!/^[\d]+$/.test(g)){be.error("Phone number can only contain numbers",{duration:3e3,position:"top-center"});return}if(g&&(g.length<7||g.length>15)){be.error("Phone number must be between 7 and 15 digits",{duration:3e3,position:"top-center"});return}u(g||""),f(!1)},R=()=>{x(l),f(!1)},$=O=>{O.key==="Enter"?ne():O.key==="Escape"&&R()},Q=()=>{setTimeout(()=>{f(!1)},100)},pe=async()=>{if(!M){D(!0);try{if(!n.trim()){be.error("Username is required",{duration:3e3,position:"top-center"});return}if(!t.trim()){be.error("First name is required",{duration:3e3,position:"top-center"});return}if(!r.trim()){be.error("Last name is required",{duration:3e3,position:"top-center"});return}const O=w?.cus_celno,q=g&&g.trim()!==""?g:V,fe={cus_username:n.trim(),cus_fname:t.trim(),cus_lname:r.trim(),cus_celno:q},{error:me}=await ve.from("CUSTOMER").update(fe).eq("auth_user_id",v.user.id);me?(console.error("Error updating profile:",me.message),be.error(`Failed to update profile: ${me.message}`,{duration:4e3,position:"top-center"})):(console.log("Profile updated successfully."),_(_e=>({..._e,...fe})),u(q||""),f(!1),be.success("Profile updated successfully!",{duration:3e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}))}catch(O){console.error("Unexpected error:",O),be.error("An unexpected error occurred. Please try again.",{duration:4e3,position:"top-center"})}finally{D(!1)}}};return T?d.jsx(Bo,{message:"Loading profile..."}):d.jsxs("section",{className:"bg-gradient-to-t from-[#424220] to-[#F8E6B4] min-h-screen flex flex-col items-center justify-center py-20 px-10",children:[d.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] w-full p-10 rounded-2xl shadow-2xl",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h1",{className:"text-3xl font-bold text-black",children:"My Profile"}),d.jsx("button",{onClick:Y,className:"bg-red-500 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded",children:"Sign Out"})]}),d.jsx("div",{className:"flex justify-end mb-4"}),d.jsx("p",{className:"text-lg text-gray-500",children:"Manage and protect your account"}),d.jsx("hr",{className:"my-6 border-gray-400"}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-gray-500 font-semibold mb-2",children:"Username"}),d.jsx("input",{type:"text",value:n,onChange:O=>e(O.target.value),className:"bg-white border border-gray-300 px-4 py-2 rounded w-full"})]}),d.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-6",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("label",{className:"block text-gray-500 font-semibold mb-2",children:"First Name"}),d.jsx("input",{type:"text",value:t,onChange:O=>s(O.target.value),className:"bg-white border border-gray-300 px-4 py-2 rounded w-full"})]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("label",{className:"block text-gray-500 font-semibold mb-2",children:"Last Name"}),d.jsx("input",{type:"text",value:r,onChange:O=>a(O.target.value),className:"bg-white border border-gray-300 px-4 py-2 rounded w-full"})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-gray-500 font-semibold mb-1",children:"Email"}),d.jsx("p",{className:"text-black text-lg font-medium",children:w?.email||""})]}),d.jsxs("div",{className:"mb-10 gap-3",children:[d.jsx("label",{className:"block text-gray-500 font-semibold mb-1",children:"Phone Number"}),d.jsx("div",{className:"flex items-center gap-5",children:h?d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"text",value:g||"",onChange:te,onKeyPress:$,onBlur:Q,className:"text-black text-lg font-medium border border-black rounded p-2",placeholder:"Enter your phone number",autoFocus:!0}),d.jsx("button",{onClick:ne,className:"text-green-600 hover:text-green-800 cursor-pointer px-2 py-1 rounded",title:"Save",children:"✓"}),d.jsx("button",{onClick:R,className:"text-red-600 hover:text-red-800 cursor-pointer px-2 py-1 rounded",title:"Cancel",children:"✕"})]}):d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("p",{className:`text-lg font-medium ${H()?"text-gray-500 italic":"text-black"}`,children:N()}),H()&&d.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full border border-yellow-300",children:"Default Number"}),d.jsx("button",{className:"text-blue-600 hover:text-blue-800 cursor-pointer",onClick:se,children:d.jsx("img",{className:"w-7 h-7 hover:color-red-500 ",src:"/edit.svg",alt:"Edit Icon"})})]})})]}),d.jsx("div",{className:"text-center",children:d.jsx("button",{className:`font-semibold py-2 px-10 rounded-lg text-lg cursor-pointer transition-colors ${M?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"}`,onClick:pe,disabled:M,children:M?"Saving...":"Save"})})]}),d.jsxs("div",{className:"bg-gradient-to-t from-[#613C2A] to-[#EAD0C4] w-full p-10 rounded-2xl shadow-2xl mt-10",children:[d.jsx("div",{className:"bg-[#F2EFE8] p-2 rounded-full",children:d.jsx("p",{className:"text-2xl font-bold cursor-default",children:"Saved Custom Cakes:"})}),d.jsx("div",{className:"relative w-full min-h-[50vh] mt-10 bg-[#F3F0EA] rounded-r-3xl rounded-l-3xl py-8 px-6",children:A.length>0?A.length>5?d.jsxs(pC,{modules:[$P],navigation:{nextEl:".custom-next",prevEl:".custom-prev"},spaceBetween:24,slidesPerView:"auto",centeredSlides:!1,loop:!1,className:"w-full h-full",breakpoints:{1024:{slidesPerView:4,spaceBetween:24},768:{slidesPerView:3,spaceBetween:20},640:{slidesPerView:2,spaceBetween:16},480:{slidesPerView:1,spaceBetween:12}},children:[A.map((O,q)=>d.jsx(xC,{className:"!w-auto",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden w-64 h-80 text-center hover:shadow-xl transition-shadow duration-300 cursor-pointer",children:[d.jsxs("div",{className:"relative h-56 overflow-hidden",onClick:()=>F(O.publicUrl),children:[d.jsx("img",{src:O.publicUrl||"/placeholder.jpg",alt:`Custom Cake ${O.cc_id}`,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",onError:fe=>{fe.target.src="/placeholder.jpg"}}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:d.jsx("div",{className:"bg-white bg-opacity-90 rounded-full p-2 opacity-0 hover:opacity-100 transition-opacity duration-300",children:d.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})})]}),d.jsx("div",{className:"bg-[#3B3B3B] text-white py-4 px-4 h-24 flex items-center justify-center",children:d.jsxs("h3",{className:"font-bold text-lg",children:["Custom Cake #",O.cc_id]})})]})},q)),d.jsx("div",{className:"custom-prev absolute top-1/2 left-2 -translate-y-1/2 bg-gray-600 hover:bg-gray-700 rounded-full w-12 h-12 flex items-center justify-center cursor-pointer z-10 text-white text-xl transition-colors duration-200 shadow-lg",children:"<"}),d.jsx("div",{className:"custom-next absolute top-1/2 right-2 -translate-y-1/2 bg-gray-600 hover:bg-gray-700 rounded-full w-12 h-12 flex items-center justify-center cursor-pointer z-10 text-white text-xl transition-colors duration-200 shadow-lg",children:">"})]}):d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 justify-items-center",children:A.map((O,q)=>d.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden w-64 h-80 text-center hover:shadow-xl transition-shadow duration-300 cursor-pointer",children:[d.jsxs("div",{className:"relative h-56 overflow-hidden",onClick:()=>F(O.publicUrl),children:[d.jsx("img",{src:O.publicUrl||"/placeholder.jpg",alt:`Custom Cake ${O.cc_id}`,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",onError:fe=>{fe.target.src="/placeholder.jpg"}}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:d.jsx("div",{className:"bg-white bg-opacity-90 rounded-full p-2 opacity-0 hover:opacity-100 transition-opacity duration-300",children:d.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})})]}),d.jsx("div",{className:"bg-[#3B3B3B] text-white py-4 px-4 h-24 flex items-center justify-center",children:d.jsxs("h3",{className:"font-bold text-lg",children:["Custom Cake #",O.cc_id]})})]},q))}):d.jsx("div",{className:"flex flex-col items-center justify-center h-full py-12",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"mb-4",children:d.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),d.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No Custom Cakes Yet"}),d.jsx("p",{className:"text-gray-500 mb-4",children:"You haven't created any custom cakes yet."}),d.jsx("p",{className:"text-sm text-gray-400",children:"Your custom cake designs will appear here once you create them."})]})})})]}),B&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>F(null),children:d.jsxs("div",{className:"relative w-full h-full max-w-7xl max-h-full flex items-center justify-center",children:[d.jsx("img",{src:B,alt:"Custom Cake Design",className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl"}),d.jsx("button",{onClick:()=>F(null),className:"absolute top-4 right-4 bg-white bg-opacity-90 hover:bg-opacity-100 rounded-full p-3 transition-all duration-200 shadow-lg",children:d.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})},YP=n=>n?n.startsWith("http://")||n.startsWith("https://")?n:ve.storage.from("cake").getPublicUrl(n).data.publicUrl:null,qP=()=>{const[n,e]=j.useState([]),[t,s]=j.useState(16e3),[r,a]=j.useState(!1),[l,u]=j.useState("default"),[h,f]=j.useState("all"),[g,x]=j.useState([]),[v,b]=j.useState(null),[w,_]=j.useState(!1),[T,S]=j.useState(1),[A,E]=j.useState(!0),M=21,[D,B]=j.useState(""),[F,L]=j.useState(""),[V,N]=j.useState("Pickup"),[H,Y]=j.useState(""),[se,te]=j.useState(1),[ne,R]=j.useState(!1),[$,Q]=j.useState(1),[pe,O]=j.useState(!1),[q,fe]=j.useState(""),[me,_e]=j.useState(!1);j.useEffect(()=>{(async()=>{try{E(!0);const{data:it,error:Gt}=await ve.from("CAKE").select("*");if(Gt){console.error("Error fetching cakes:",Gt.message),be.error("Failed to load cakes. Please try again.");return}const Zt=it.map(Jt=>{const bn=YP(Jt.cake_img);return console.log(`Cake: ${Jt.name}, cake_img: ${Jt.cake_img}, publicUrl: ${bn}`),{...Jt,publicUrl:bn}});e(Zt)}catch(it){console.error("Error fetching cakes:",it),be.error("Failed to load cakes. Please try again.")}finally{E(!1)}})()},[]),j.useEffect(()=>{const Se=()=>{const it=window.scrollY,Gt=window.innerHeight,Zt=document.documentElement.scrollHeight,Jt=it+Gt>=Zt-200;it>100&&!Jt?a(!0):a(!1)};return window.addEventListener("scroll",Se),()=>window.removeEventListener("scroll",Se)},[]);const re=Se=>{b(Se),_(!0)},xe=()=>{_(!1),b(null)},de=()=>{if(!v)return;const Se=new Date;Se.setDate(Se.getDate()+1),B(Se.toISOString().split("T")[0]),L("14:00"),te(1),Q(1),R(!0)},je=async()=>{if(!me){if(console.log("handlePlaceOrder called"),console.log("selectedCake:",v),console.log("orderDate:",D),console.log("orderTime:",F),console.log("orderType:",V),console.log("deliveryAddress:",H),!v||!D||!F||V==="Delivery"&&!H){console.log("Validation failed - missing required fields"),be.error("Please fill in all required fields");return}_e(!0);try{console.log("Starting order placement...");const{data:{session:Se}}=await ve.auth.getSession();if(!Se){console.log("No user session found"),be.error("Please log in to place an order");return}const{data:it,error:Gt}=await ve.from("CUSTOMER").select("cus_id").eq("auth_user_id",Se.user.id).single();if(Gt||!it){be.error("Customer information not found. Please try again.");return}const Zt=v.price*se,Jt=new Date(`${D}T${F}`),bn={order_date:new Date().toISOString().split("T")[0],delivery_method:V,order_schedule:Jt.toISOString().split("T")[0],delivery_address:V==="Delivery"?H:null,cus_id:it.cus_id,order_status:"Pending"};console.log("Attempting to create order with data:",bn);const{data:Hs,error:$s}=await ve.from("ORDER").insert([bn]).select().single();if($s){console.error("Error creating order:",$s),console.error("Order error details:",{message:$s.message,details:$s.details,hint:$s.hint,code:$s.code}),be.error("Failed to create order. Please try again.");return}console.log("Order created successfully:",Hs),console.log("Order ID from database:",Hs.order_id),console.log("Selected cake ID:",v.cake_id),console.log("Cake quantity:",se);const ie={quantity:se,order_id:Hs.order_id,cake_id:v.cake_id};console.log("Attempting to create cake order with data:",ie),console.log("Attempting to insert into CAKE-ORDERS table...");const{data:Me,error:ye}=await ve.from("CAKE-ORDERS").insert([ie]).select();if(ye){console.error("Error creating cake order:",ye),console.error("Full error object:",JSON.stringify(ye,null,2)),console.error("Error details:",{message:ye.message,details:ye.details,hint:ye.hint,code:ye.code}),be.error("Failed to create cake order. Please try again.");return}console.log("Cake order created successfully:",Me);const{error:ce}=await ve.from("PAYMENT").insert([{payment_method:"Cash",amount_paid:Zt,payment_date:new Date().toISOString().split("T")[0],payment_status:"Unpaid",receipt:null,order_id:Hs.order_id}]);if(ce){console.error("Error creating payment:",ce),be.error("Failed to create payment record. Please try again.");return}const le=`ORD-${Hs.order_id}`;fe(le),be.success(`Order successfully placed for ${v.name}!`,{duration:4e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}),console.log("Advancing to step 3..."),Q(3)}catch(Se){console.error("Error placing order:",Se),be.error("Failed to place order. Please try again.",{duration:4e3,position:"top-center"})}finally{_e(!1)}}},Oe=()=>{R(!1),B(""),L(""),N("Pickup"),Y(""),te(1),Q(1),O(!1),fe(""),_e(!1)},oe=()=>{console.log("nextStep called, current step:",$),$<3&&(console.log("Advancing to step:",$+1),Q($+1))},Ce=()=>{$>1&&Q($-1)},Te=n.filter(Se=>Se.price<=t).filter(Se=>h==="all"||Se.tier===parseInt(h)).filter(Se=>g.length===0||g.includes(Se.theme)).sort((Se,it)=>{switch(l){case"priceLowToHigh":return Se.price-it.price;case"priceHighToLow":return it.price-Se.price;case"alphabeticalAsc":return Se.name.localeCompare(it.name);case"alphabeticalDesc":return it.name.localeCompare(Se.name);default:return 0}}),we=Math.ceil(Te.length/M),Ve=T*M,Ee=Ve-M,Ge=Te.slice(Ee,Ve);return j.useEffect(()=>{S(1)},[t,h,g,l]),A?d.jsx(Bo,{message:"Loading cake catalog..."}):d.jsxs("section",{className:"flex min-h-[120vh] bg-gradient-to-b from-[#f7f0e7] to-[#e5d6c4]",children:[d.jsx("div",{className:"w-1/3 flex items-center justify-start",children:d.jsxs("aside",{className:`${r?"fixed top-1/2 left-0 -translate-y-1/2 w-[20%]":"relative w-[80%]"} bg-white rounded-br-2xl rounded-tr-2xl shadow-lg p-4 text-[#381914]`,children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Filters"}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block mb-1 font-semibold",htmlFor:"sortBy",children:"Sort by"}),d.jsxs("select",{id:"sortBy",className:"w-full text-sm text-[#381914] border border-[#381914] rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#381914] cursor-pointer",value:l,onChange:Se=>u(Se.target.value),children:[d.jsx("option",{value:"default",children:"Default"}),d.jsx("option",{value:"priceLowToHigh",children:"Price: Low to High"}),d.jsx("option",{value:"priceHighToLow",children:"Price: High to Low"}),d.jsx("option",{value:"alphabeticalAsc",children:"Alphabetical: A → Z"}),d.jsx("option",{value:"alphabeticalDesc",children:"Alphabetical: Z → A"})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Price"}),d.jsx("input",{type:"range",min:"0",max:"16000",value:t,onChange:Se=>s(Se.target.value),className:"w-full cursor-pointer slider-design appearance-none bg-[#6a2e2e] rounded-lg h-2"}),d.jsxs("p",{className:"text-sm mt-1",children:["₱0 - ₱",t]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Theme"}),["Plain","Birthday","Wedding","Christmas","Graduation","Anniversary","New Years"].map(Se=>d.jsxs("label",{className:"block text-sm flex items-center",children:[d.jsx("input",{type:"checkbox",className:"mr-2 appearance-none w-4 h-4 border-2 border-[#381914] checked:bg-[#381914] checked:border-transparent focus:outline-none cursor-pointer",checked:g.includes(Se),onChange:it=>{it.target.checked?x([...g,Se]):x(g.filter(Gt=>Gt!==Se))}}),Se]},Se))]}),d.jsxs("div",{children:[d.jsx("label",{className:"block mb-1 font-semibold",htmlFor:"tier",children:"Tiers"}),d.jsxs("select",{id:"tier",className:"w-full text-sm text-[#381914] border border-[#381914] rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#381914]",value:h,onChange:Se=>f(Se.target.value),children:[d.jsx("option",{value:"all",children:"All Tiers"}),[1,2,3,4,5].map(Se=>d.jsxs("option",{value:Se,children:[Se," Tier"]},Se))]})]})]})}),d.jsxs("main",{className:`p-8 w-full ${r?"ml-1/5":""}`,children:[d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:Ge.map(Se=>d.jsxs("div",{className:"bg-[#FAF6F1] rounded shadow-sm p-4 text-center cursor-pointer hover:shadow-lg transition-shadow duration-200 hover:scale-105 transform transition-transform",onClick:()=>re(Se),children:[d.jsx("img",{src:Se.publicUrl||"/saved-cake.png",alt:Se.name,className:"w-full h-48 object-contain mb-4",onError:it=>{console.error(`Failed to load image for cake: ${Se.name}, URL: ${Se.publicUrl}`),it.target.src="/saved-cake.png"}}),d.jsx("h3",{className:"text-md font-semibold",children:Se.name}),d.jsxs("p",{className:"text-sm",children:["₱",Se.price]})]},Se.cake_id))}),we>1&&d.jsxs("div",{className:"flex justify-center items-center mt-8 space-x-2",children:[d.jsx("button",{onClick:()=>S(Se=>Math.max(Se-1,1)),disabled:T===1,className:"px-4 py-2 bg-[#AF524D] text-white rounded-lg hover:bg-[#8B3D3A] disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Previous"}),d.jsx("div",{className:"flex space-x-1",children:Array.from({length:we},(Se,it)=>it+1).map(Se=>d.jsx("button",{onClick:()=>S(Se),className:`px-3 py-2 rounded-lg transition-colors ${T===Se?"bg-[#AF524D] text-white":"bg-white text-[#381914] hover:bg-[#f0f0f0] border border-[#381914]"}`,children:Se},Se))}),d.jsx("button",{onClick:()=>S(Se=>Math.min(Se+1,we)),disabled:T===we,className:"px-4 py-2 bg-[#AF524D] text-white rounded-lg hover:bg-[#8B3D3A] disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Next"})]}),d.jsxs("div",{className:"text-center mt-4 text-sm text-[#381914]",children:["Showing ",Ee+1," to ",Math.min(Ve,Te.length)," of ",Te.length," cakes"]})]}),w&&v&&d.jsx("div",{className:"fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[d.jsx("h2",{className:"text-2xl font-bold text-[#381914]",children:v.name}),d.jsx("button",{onClick:xe,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold cursor-pointer",children:"×"})]}),d.jsxs("div",{className:"p-6",children:[d.jsx("div",{className:"mb-6",children:d.jsx("img",{src:v.publicUrl||"/saved-cake.png",alt:v.name,className:"w-full h-64 object-contain rounded-lg",onError:Se=>{Se.target.src="/saved-cake.png"}})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-[#381914] mb-4",children:"Cake Details"}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-600",children:"Theme:"}),d.jsx("span",{className:"ml-2 text-[#381914]",children:v.theme})]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-600",children:"Tiers:"}),d.jsx("span",{className:"ml-2 text-[#381914]",children:v.tier})]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-600",children:"Price:"}),d.jsxs("span",{className:"ml-2 text-[#381914] font-bold",children:["₱",v.price]})]})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-[#381914] mb-4",children:"Description"}),d.jsx("p",{className:"text-gray-700 leading-relaxed",children:v.description||"No description available for this cake."})]})]}),d.jsx("div",{className:"mt-8 flex justify-center",children:d.jsx("button",{onClick:de,className:"px-6 py-2 bg-[#AF524D] text-white rounded-full hover:bg-[#8B3D3A] transition-colors",children:"Order This Cake"})})]})]})}),ne&&v&&d.jsx("div",{className:"fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[d.jsx("h2",{className:"text-2xl font-bold text-[#381914]",children:"Complete Your Order"}),d.jsx("button",{onClick:Oe,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold cursor-pointer",children:"×"})]}),d.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:d.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[d.jsxs("div",{className:`flex items-center ${$>=1?"text-[#AF524D]":"text-gray-400"}`,children:[d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${$>=1?"bg-[#AF524D] text-white":"bg-gray-200 text-gray-500"}`,children:"1"}),d.jsx("span",{className:"ml-2 text-sm font-medium",children:"Order Details"})]}),d.jsx("div",{className:`w-8 h-1 ${$>=2?"bg-[#AF524D]":"bg-gray-200"}`}),d.jsxs("div",{className:`flex items-center ${$>=2?"text-[#AF524D]":"text-gray-400"}`,children:[d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${$>=2?"bg-[#AF524D] text-white":"bg-gray-200 text-gray-500"}`,children:"2"}),d.jsx("span",{className:"ml-2 text-sm font-medium",children:"Review"})]}),d.jsx("div",{className:`w-8 h-1 ${$>=3?"bg-[#AF524D]":"bg-gray-200"}`}),d.jsxs("div",{className:`flex items-center ${$>=3?"text-[#AF524D]":"text-gray-400"}`,children:[d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${$>=3?"bg-[#AF524D] text-white":"bg-gray-200 text-gray-500"}`,children:"3"}),d.jsx("span",{className:"ml-2 text-sm font-medium",children:"Success"})]})]})}),d.jsxs("div",{className:"p-6",children:[d.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("img",{src:v.publicUrl||"/saved-cake.png",alt:v.name,className:"w-16 h-16 object-contain rounded-lg",onError:Se=>{Se.target.src="/saved-cake.png"}}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-[#381914]",children:v.name}),d.jsxs("p",{className:"text-sm text-gray-600",children:["₱",v.price]})]})]})}),$===1&&d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Quantity *"}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{type:"button",onClick:()=>te(Math.max(1,se-1)),className:"w-10 h-10 rounded-full border-2 border-[#AF524D] text-[#AF524D] hover:bg-[#AF524D] hover:text-white transition-colors flex items-center justify-center font-bold text-lg",children:"-"}),d.jsx("span",{className:"w-16 text-center font-semibold text-[#381914] text-lg",children:se}),d.jsx("button",{type:"button",onClick:()=>te(se+1),className:"w-10 h-10 rounded-full border-2 border-[#AF524D] text-[#AF524D] hover:bg-[#AF524D] hover:text-white transition-colors flex items-center justify-center font-bold text-lg",children:"+"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Pickup/Delivery Date *"}),d.jsxs("div",{className:"relative",children:[d.jsxs("div",{className:"flex items-center gap-3 p-3 border-2 border-[#AF524D] rounded-lg bg-white",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("svg",{className:"w-6 h-6 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),d.jsx("div",{className:"flex-1",children:d.jsx("input",{type:"date",value:D,onChange:Se=>B(Se.target.value),min:new Date().toISOString().split("T")[0],className:"w-full bg-transparent border-none outline-none text-[#381914] font-medium cursor-pointer",required:!0})})]}),D&&d.jsx("div",{className:"mt-2 p-2 bg-[#AF524D] bg-opacity-10 rounded-lg border border-[#AF524D] border-opacity-30",children:d.jsxs("p",{className:"text-sm text-[#381914] font-medium",children:["Selected: ",new Date(D).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Pickup/Delivery Time *"}),d.jsxs("div",{className:"relative",children:[d.jsxs("div",{className:"flex items-center gap-3 p-3 border-2 border-[#AF524D] rounded-lg bg-white",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("svg",{className:"w-6 h-6 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),d.jsx("div",{className:"flex-1",children:d.jsx("input",{type:"time",value:F,onChange:Se=>L(Se.target.value),className:"w-full bg-transparent border-none outline-none text-[#381914] font-medium cursor-pointer",required:!0})})]}),F&&d.jsx("div",{className:"mt-2 p-2 bg-[#AF524D] bg-opacity-10 rounded-lg border border-[#AF524D] border-opacity-30",children:d.jsxs("p",{className:"text-sm text-[#381914] font-medium",children:["Selected: ",new Date(`2000-01-01T${F}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]})})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Order Type"}),d.jsxs("div",{className:"relative",children:[d.jsxs("div",{className:"flex items-center gap-3 p-3 border-2 border-[#AF524D] rounded-lg bg-white cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>O(!pe),children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("svg",{className:"w-6 h-6 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),d.jsx("div",{className:"flex-1",children:d.jsx("span",{className:"text-[#381914] font-medium",children:V})}),d.jsx("div",{className:"flex-shrink-0",children:d.jsx("svg",{className:`w-5 h-5 text-[#AF524D] transition-transform ${pe?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),pe&&d.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border-2 border-[#AF524D] rounded-lg shadow-lg z-10",children:[d.jsx("div",{className:"p-3 hover:bg-[#AF524D] hover:text-white cursor-pointer transition-colors border-b border-gray-100",onClick:()=>{N("Pickup"),O(!1)},children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),d.jsx("span",{className:"font-medium",children:"Pickup"})]})}),d.jsx("div",{className:"p-3 hover:bg-[#AF524D] hover:text-white cursor-pointer transition-colors",onClick:()=>{N("Delivery"),O(!1)},children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),d.jsx("span",{className:"font-medium",children:"Delivery"})]})})]}),V&&d.jsx("div",{className:"mt-2 p-2 bg-[#AF524D] bg-opacity-10 rounded-lg border border-[#AF524D] border-opacity-30",children:d.jsxs("p",{className:"text-sm text-[#381914] font-medium",children:["Selected: ",V]})})]})]}),V==="Delivery"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Delivery Address"}),d.jsx("textarea",{value:H,onChange:Se=>Y(Se.target.value),placeholder:"Enter your complete delivery address...",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent resize-none"})]}),d.jsxs("div",{className:"flex gap-4 justify-end",children:[d.jsx("button",{onClick:Oe,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-full hover:bg-gray-400 transition-colors",children:"Cancel"}),d.jsx("button",{onClick:oe,disabled:!D||!F||V==="Delivery"&&!H,className:`px-6 py-2 rounded-full transition-colors ${!D||!F||V==="Delivery"&&!H?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-[#AF524D] text-white hover:bg-[#8B3D3A]"}`,children:"Next"})]})]}),$===2&&d.jsxs("div",{className:"space-y-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-[#381914] mb-4",children:"Review Your Order"}),d.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[d.jsx("h4",{className:"font-semibold text-[#381914] mb-4",children:"Order Summary"}),d.jsxs("div",{className:"space-y-3 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Cake:"}),d.jsx("span",{children:v.name})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Quantity:"}),d.jsx("span",{children:se})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Price per cake:"}),d.jsxs("span",{children:["₱",v.price]})]}),d.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-2",children:[d.jsx("span",{className:"font-semibold",children:"Total Price:"}),d.jsxs("span",{className:"font-semibold",children:["₱",v.price*se]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Date:"}),d.jsx("span",{children:D?new Date(D).toLocaleDateString():"Not selected"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Time:"}),d.jsx("span",{children:F?new Date(`2000-01-01T${F}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"Not selected"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Type:"}),d.jsx("span",{children:V})]}),V==="Delivery"&&H&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Address:"}),d.jsx("span",{className:"text-right max-w-xs truncate",children:H})]})]})]}),d.jsxs("div",{className:"flex gap-4 justify-between items-center pt-4 border-t border-gray-200",children:[d.jsx("button",{onClick:Ce,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-full hover:bg-gray-400 transition-colors",children:"Back"}),d.jsx("button",{onClick:je,disabled:me,className:`px-6 py-2 rounded-full transition-colors ${me?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-[#AF524D] text-white hover:bg-[#8B3D3A]"}`,children:me?"Placing Order...":"Place Order"})]})]}),$===3&&d.jsxs("div",{className:"space-y-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-[#381914] mb-4",children:"Order Successfully Placed!"}),d.jsxs("div",{className:"p-6 bg-green-50 border border-green-200 rounded-lg text-center",children:[d.jsx("div",{className:"flex items-center justify-center gap-3 mb-4",children:d.jsx("svg",{className:"w-12 h-12 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),d.jsx("h4",{className:"font-semibold text-green-800 text-xl mb-2",children:"Thank you for your order!"}),d.jsx("p",{className:"text-green-700 text-sm mb-4",children:"Your order has been successfully placed."})]}),d.jsx("div",{className:"flex gap-4 justify-center",children:d.jsx("button",{onClick:()=>{Oe(),xe()},className:"px-6 py-2 bg-[#AF524D] text-white rounded-full hover:bg-[#8B3D3A] transition-colors",children:"Done"})})]})]})]})})]})},WP=()=>{const{session:n}=Ti(),[e,t]=j.useState("toPay"),[s,r]=j.useState([]),[a,l]=j.useState(!0),[u,h]=j.useState(!1),[f,g]=j.useState(!1),[x,v]=j.useState(null),[b,w]=j.useState(null),[_,T]=j.useState(!1),[S,A]=j.useState(!1),E=N=>N?ve.storage.from("cake").getPublicUrl(N).data.publicUrl:null,M=async()=>{if(n?.user)try{l(!0);const{data:N,error:H}=await ve.from("CUSTOMER").select("cus_id").eq("auth_user_id",n.user.id).single();if(H){console.error("Error fetching customer:",H),ke.error("Failed to load customer information");return}const{data:Y,error:se}=await ve.from("ORDER").select(`
                     *,
                     CAKE-ORDERS (
                         co_id,
                         quantity,
                         cake_id,
                         CAKE (
                             cake_id,
                             name,
                             price,
                             cake_img
                         )
                     ),
                     CUSTOM-CAKE (
                         cc_id,
                         cc_img,
                         order_id,
                         cus_id
                     ),
                     PAYMENT (
                         payment_id,
                         payment_method,
                         amount_paid,
                         payment_status,
                         payment_date
                     )
                 `).eq("cus_id",N.cus_id).order("order_id",{ascending:!1});if(se){console.error("Error fetching orders:",se),ke.error("Failed to load orders");return}const te=[];Y.forEach(ne=>{ne["CAKE-ORDERS"]&&ne["CAKE-ORDERS"].length>0&&ne["CAKE-ORDERS"].forEach(R=>{te.push({order_id:ne.order_id,order_date:ne.order_date,delivery_method:ne.delivery_method,order_schedule:ne.order_schedule,delivery_address:ne.delivery_address,order_status:ne.order_status||"Pending",quantity:R.quantity,cake_id:R.cake_id,order_type:"regular",CAKE:R.CAKE?{...R.CAKE,publicUrl:E(R.CAKE.cake_img)}:null,payment:ne.PAYMENT?.[0]||null,total_price:R.CAKE?R.CAKE.price*R.quantity:0})}),ne["CUSTOM-CAKE"]&&ne["CUSTOM-CAKE"].length>0&&ne["CUSTOM-CAKE"].forEach(R=>{const $=ve.storage.from("cust.cakes").getPublicUrl(R.cc_img).data.publicUrl;te.push({order_id:ne.order_id,order_date:ne.order_date,delivery_method:ne.delivery_method,order_schedule:ne.order_schedule,delivery_address:ne.delivery_address,order_status:ne.order_status||"Pending",quantity:1,cc_id:R.cc_id,order_type:"custom",CAKE:{name:"Custom Cake Design",price:5e3,publicUrl:$},payment:ne.PAYMENT?.[0]||null,total_price:5e3})})}),r(te)}catch(N){console.error("Error fetching orders:",N),ke.error("Failed to load orders")}finally{l(!1)}},D=N=>{v(N),g(!0),w(null)},B=N=>{const H=N.target.files[0];if(H){if(!H.type.startsWith("image/")){ke.error("Please select an image file");return}if(H.size>5*1024*1024){ke.error("File size must be less than 5MB");return}w(H)}},F=async N=>{if(!(S||!window.confirm(`Are you sure you want to cancel order #${N.order_id}? This action cannot be undone.`))){A(!0);try{const{error:Y}=await ve.from("ORDER").update({order_status:"Cancelled"}).eq("order_id",N.order_id);if(Y){console.error("Error cancelling order:",Y),ke.error("Failed to cancel order. Please try again.");return}const{error:se}=await ve.from("PAYMENT").update({payment_status:"Cancelled"}).eq("order_id",N.order_id);se&&console.error("Error updating payment status:",se),ke.success("Order cancelled successfully!"),M()}catch(Y){console.error("Error cancelling order:",Y),ke.error("Failed to cancel order. Please try again.")}finally{A(!1)}}},L=async()=>{if(!b){ke.error("Please select a receipt image");return}if(!x){ke.error("No order selected");return}T(!0);try{const N=`receipts/${x.order_id}_${Date.now()}.${b.name.split(".").pop()}`,{data:H,error:Y}=await ve.storage.from("receipts").upload(N,b);if(Y){console.error("Error uploading file:",Y),ke.error("Failed to upload receipt");return}const{data:se}=ve.storage.from("receipts").getPublicUrl(N),{error:te}=await ve.from("PAYMENT").update({receipt:se.publicUrl,payment_status:"Paid",payment_date:new Date().toISOString().split("T")[0]}).eq("order_id",x.order_id);if(te){console.error("Error updating payment:",te),ke.error("Failed to update payment status");return}ke.success("Receipt uploaded successfully!"),g(!1),v(null),w(null),M()}catch(N){console.error("Error processing payment:",N),ke.error("Failed to process payment")}finally{T(!1)}},V=N=>{switch(N?.toLowerCase()){case"approved":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"cancelled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return j.useEffect(()=>{M()},[n?.user]),n?.user?a?d.jsx(Bo,{message:"Loading..."}):d.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#f7f0e7] to-[#e5d6c4] py-8",children:[d.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"My Account"}),d.jsx("p",{className:"text-[#381914] opacity-80",children:"Manage your cart and view your orders"})]}),d.jsx("div",{className:"flex justify-center mb-8",children:d.jsxs("div",{className:"bg-white rounded-lg p-1 shadow-lg",children:[d.jsxs("button",{onClick:()=>t("toPay"),className:`px-6 py-3 rounded-md font-medium transition-colors ${e==="toPay"?"bg-[#AF524D] text-white":"text-[#381914] hover:bg-gray-100"}`,children:["To Pay (",s.filter(N=>N.order_status==="Pending").length,")"]}),d.jsxs("button",{onClick:()=>t("toReceive"),className:`px-6 py-3 rounded-md font-medium transition-colors ${e==="toReceive"?"bg-[#AF524D] text-white":"text-[#381914] hover:bg-gray-100"}`,children:["To Receive (",s.filter(N=>N.order_status==="Approved").length,")"]}),d.jsxs("button",{onClick:()=>t("completed"),className:`px-6 py-3 rounded-md font-medium transition-colors ${e==="completed"?"bg-[#AF524D] text-white":"text-[#381914] hover:bg-gray-100"}`,children:["Completed (",s.filter(N=>N.order_status==="Delivered").length,")"]}),d.jsxs("button",{onClick:()=>t("cancelled"),className:`px-6 py-3 rounded-md font-medium transition-colors ${e==="cancelled"?"bg-[#AF524D] text-white":"text-[#381914] hover:bg-gray-100"}`,children:["Cancelled (",s.filter(N=>N.order_status==="Cancelled").length,")"]})]})}),e==="toPay"&&d.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-[#381914] mb-6",children:"Orders to Pay"}),s.filter(N=>N.order_status==="Pending").length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m6 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})}),d.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No pending orders"}),d.jsx("p",{className:"text-gray-500",children:"Your pending orders will appear here"})]}):d.jsx("div",{className:"space-y-4",children:s.filter(N=>N.order_status==="Pending").map(N=>d.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:d.jsxs("div",{className:"flex items-start gap-4",children:[N.CAKE&&d.jsx("img",{src:N.CAKE.publicUrl||"/saved-cake.png",alt:N.CAKE.name,className:"w-16 h-16 object-cover rounded-lg",onError:H=>{H.target.src="/saved-cake.png"}}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"font-semibold text-[#381914]",children:[N.CAKE?N.CAKE.name:"Cake",N.order_type==="custom"&&d.jsx("span",{className:"ml-2 inline-block px-2 py-1 bg-[#AF524D] text-white text-xs rounded-full",children:"Custom"})]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID: ",N.order_id]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",N.quantity]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(N.order_date).toLocaleDateString()]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Method: ",N.delivery_method]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",N.order_status]}),N.payment&&d.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",N.payment.payment_status]})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("p",{className:"font-semibold text-[#381914]",children:["₱",N.total_price]}),d.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${V(N.order_status)}`,children:N.order_status})]})]}),d.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[d.jsx("button",{onClick:()=>F(N),disabled:S,className:`py-2 px-6 rounded-lg font-semibold text-sm transition-all duration-200 ${S?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-red-500 text-white hover:bg-red-600 shadow-md hover:shadow-lg transform hover:scale-105"}`,children:S?"Cancelling...":"Cancel Order"}),d.jsx("button",{onClick:()=>D(N),disabled:u,className:`py-2 px-6 rounded-lg font-semibold text-sm transition-all duration-200 ${u?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-[#AF524D] text-white hover:bg-[#8B3D3A] shadow-md hover:shadow-lg transform hover:scale-105"}`,children:"Pay Now"})]})]})]})},N.order_id))})]}),e==="toReceive"&&d.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-[#381914] mb-6",children:"Orders to Receive"}),s.filter(N=>N.order_status==="Approved").length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),d.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No orders to receive"}),d.jsx("p",{className:"text-gray-500",children:"Your approved and paid orders will appear here"})]}):d.jsx("div",{className:"space-y-4",children:s.filter(N=>N.order_status==="Approved").map(N=>d.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:d.jsxs("div",{className:"flex items-start gap-4",children:[N.CAKE&&d.jsx("img",{src:N.CAKE.publicUrl||"/saved-cake.png",alt:N.CAKE.name,className:"w-16 h-16 object-cover rounded-lg",onError:H=>{H.target.src="/saved-cake.png"}}),d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"font-semibold text-[#381914]",children:[N.CAKE?N.CAKE.name:"Cake",N.order_type==="custom"&&d.jsx("span",{className:"ml-2 inline-block px-2 py-1 bg-[#AF524D] text-white text-xs rounded-full",children:"Custom"})]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID: ",N.order_id]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",N.quantity]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(N.order_date).toLocaleDateString()]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Method: ",N.delivery_method]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",N.order_status]}),N.payment&&d.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",N.payment.payment_status]})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("p",{className:"font-semibold text-[#381914]",children:["₱",N.total_price]}),d.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${V(N.order_status)}`,children:N.order_status})]})]})})]})},N.order_id))})]}),e==="completed"&&d.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-[#381914] mb-6",children:"Delivered Orders"}),s.filter(N=>N.order_status==="Delivered").length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),d.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No delivered orders"}),d.jsx("p",{className:"text-gray-500",children:"Your delivered orders will appear here"})]}):d.jsx("div",{className:"space-y-4",children:s.filter(N=>N.order_status==="Delivered").map(N=>d.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:d.jsxs("div",{className:"flex items-start gap-4",children:[N.CAKE&&d.jsx("img",{src:N.CAKE.publicUrl||"/saved-cake.png",alt:N.CAKE.name,className:"w-16 h-16 object-cover rounded-lg",onError:H=>{H.target.src="/saved-cake.png"}}),d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"font-semibold text-[#381914]",children:[N.CAKE?N.CAKE.name:"Cake",N.order_type==="custom"&&d.jsx("span",{className:"ml-2 inline-block px-2 py-1 bg-[#AF524D] text-white text-xs rounded-full",children:"Custom"})]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID: ",N.order_id]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",N.quantity]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(N.order_date).toLocaleDateString()]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Method: ",N.delivery_method]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",N.order_status]}),N.payment&&d.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",N.payment.payment_status]})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("p",{className:"font-semibold text-[#381914]",children:["₱",N.total_price]}),d.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${V(N.order_status)}`,children:N.order_status})]})]})})]})},N.order_id))})]}),e==="cancelled"&&d.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-[#381914] mb-6",children:"Cancelled Orders"}),s.filter(N=>N.order_status==="Cancelled").length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),d.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No cancelled orders"}),d.jsx("p",{className:"text-gray-500",children:"Your cancelled orders will appear here"})]}):d.jsx("div",{className:"space-y-4",children:s.filter(N=>N.order_status==="Cancelled").map(N=>d.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:d.jsxs("div",{className:"flex items-start gap-4",children:[N.CAKE&&d.jsx("img",{src:N.CAKE.publicUrl||"/saved-cake.png",alt:N.CAKE.name,className:"w-16 h-16 object-cover rounded-lg",onError:H=>{H.target.src="/saved-cake.png"}}),d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"font-semibold text-[#381914]",children:[N.CAKE?N.CAKE.name:"Cake",N.order_type==="custom"&&d.jsx("span",{className:"ml-2 inline-block px-2 py-1 bg-[#AF524D] text-white text-xs rounded-full",children:"Custom"})]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID: ",N.order_id]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",N.quantity]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(N.order_date).toLocaleDateString()]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Method: ",N.delivery_method]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",N.order_status]}),N.payment&&d.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",N.payment.payment_status]})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("p",{className:"font-semibold text-[#381914]",children:["₱",N.total_price]}),d.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${V(N.order_status)}`,children:N.order_status})]})]})})]})},N.order_id))})]})]}),f&&x&&d.jsx("div",{className:"fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-xl font-bold text-[#381914]",children:"Upload Receipt"}),d.jsx("button",{onClick:()=>{g(!1),v(null),w(null)},className:"text-gray-500 hover:text-gray-700 text-2xl font-bold cursor-pointer",children:"×"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("p",{className:"text-gray-600 mb-2",children:"Order Details:"}),d.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[d.jsxs("p",{className:"text-sm text-gray-700",children:[d.jsx("span",{className:"font-semibold",children:"Order ID:"})," ",x.order_id]}),d.jsxs("p",{className:"text-sm text-gray-700",children:[d.jsx("span",{className:"font-semibold",children:"Item:"})," ",x.CAKE?x.CAKE.name:"Cake"]}),d.jsxs("p",{className:"text-sm text-gray-700",children:[d.jsx("span",{className:"font-semibold",children:"Total Amount:"})," ₱",x.total_price]}),d.jsxs("p",{className:"text-sm text-gray-700",children:[d.jsx("span",{className:"font-semibold",children:"Minimum Payment (50%):"})," ₱",(x.total_price*.5).toFixed(2)]})]}),d.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:d.jsxs("div",{className:"flex items-start",children:[d.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"Payment Instructions"}),d.jsxs("p",{className:"text-xs text-blue-700",children:["Please pay at least ",d.jsxs("span",{className:"font-semibold",children:["₱",(x.total_price*.5).toFixed(2)]})," to confirm your order. The remaining balance of ",d.jsxs("span",{className:"font-semibold",children:["₱",(x.total_price*.5).toFixed(2)]})," can be paid upon pickup or delivery."]})]})]})})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Receipt Image"}),d.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-[#AF524D] transition-colors",children:[d.jsx("input",{type:"file",accept:"image/*",onChange:B,className:"hidden",id:"receipt-upload"}),d.jsx("label",{htmlFor:"receipt-upload",className:"cursor-pointer",children:b?d.jsxs("div",{children:[d.jsx("svg",{className:"w-12 h-12 text-green-500 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsx("p",{className:"text-sm text-gray-600",children:b.name}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click to change file"})]}):d.jsxs("div",{children:[d.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),d.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload receipt"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, JPEG up to 5MB"})]})})]})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:()=>{g(!1),v(null),w(null)},className:"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),d.jsx("button",{onClick:L,disabled:!b||_,className:`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${!b||_?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-[#AF524D] text-white hover:bg-[#8B3D3A]"}`,children:_?"Uploading...":"Upload Receipt"})]})]})})]}):d.jsx("div",{className:"min-h-screen bg-gradient-to-b from-[#f7f0e7] to-[#e5d6c4] py-8",children:d.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"My Account"}),d.jsx("p",{className:"text-[#381914] opacity-80",children:"Manage your cart and view your orders"})]}),d.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[d.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),d.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Please Log In First"}),d.jsx("p",{className:"text-gray-500 mb-6",children:"You need to be logged in to access your cart and orders."}),d.jsx(Xt,{to:"/login",className:"inline-block bg-[#AF524D] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#8B3D3A] transition-colors",children:"Go to Login"})]})]})})};function z(n,e,t){return(e=function(s){var r=function(a,l){if(typeof a!="object"||!a)return a;var u=a[Symbol.toPrimitive];if(u!==void 0){var h=u.call(a,l);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(a)}(s,"string");return typeof r=="symbol"?r:r+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Y1(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,s)}return t}function I(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Y1(Object(t),!0).forEach(function(s){z(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Y1(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function St(n,e){if(n==null)return{};var t,s,r=function(l,u){if(l==null)return{};var h={};for(var f in l)if({}.hasOwnProperty.call(l,f)){if(u.indexOf(f)>=0)continue;h[f]=l[f]}return h}(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(s=0;s<a.length;s++)t=a[s],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function tr(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}class q1{constructor(){z(this,"browserShadowBlurConstant",1),z(this,"DPI",96),z(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),z(this,"perfLimitSizeTotal",2097152),z(this,"maxCacheSideLimit",4096),z(this,"minCacheSideLimit",256),z(this,"disableStyleCopyPaste",!1),z(this,"enableGLFiltering",!0),z(this,"textureSize",4096),z(this,"forceGLPutImageData",!1),z(this,"cachesBoundsOfCurve",!1),z(this,"fontPaths",{}),z(this,"NUM_FRACTION_DIGITS",4)}}const st=new class extends q1{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=I(I({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const e=new q1,t=n?.reduce((s,r)=>(s[r]=e[r],s),{})||e;this.configure(t)}},_i=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];return console[n]("fabric",...t)};class Kn extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class XP extends Kn{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class KP{}class QP extends KP{testPrecision(e,t){const s="precision ".concat(t,` float;
void main(){}`),r=e.createShader(e.FRAGMENT_SHADER);return!!r&&(e.shaderSource(r,s),e.compileShader(r),!!e.getShaderParameter(r,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(s=>this.testPrecision(t,s)),t.getExtension("WEBGL_lose_context").loseContext(),_i("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const ZP={};let W1;const er=()=>W1||(W1={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new QP,dispose(){},copyPasteData:ZP}),Fo=()=>er().document,kh=()=>er().window,vC=()=>{var n;return Math.max((n=st.devicePixelRatio)!==null&&n!==void 0?n:kh().devicePixelRatio,1)},cc=new class{constructor(){z(this,"charWidthsCache",{}),z(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:e,fontStyle:t,fontWeight:s}=n;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const r=this.charWidthsCache[e],a="".concat(t.toLowerCase(),"_").concat((s+"").toLowerCase());return r[a]||(r[a]={}),r[a]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:e}=st,t=Math.sqrt(e*n);return[Math.floor(t),Math.floor(e/t)]}},_p="6.7.1";function Gd(){}const Fc=Math.PI/2,ch=2*Math.PI,R0=Math.PI/180,As=Object.freeze([1,0,0,1,0,0]),P0=16,hi=.4477152502,Xe="center",lt="left",Us="top",Sp="bottom",Lt="right",zs="none",L0=/\r?\n/,yC="moving",Ah="scaling",bC="rotating",B0="rotate",wC="skewing",_c="resizing",JP="modifyPoly",e6="modifyPath",uh="changed",Nh="scale",Is="scaleX",vn="scaleY",Uo="skewX",zo="skewY",Kt="fill",Vs="stroke",dh="modified",co="json",Eg="svg",Ae=new class{constructor(){this[co]=new Map,this[Eg]=new Map}has(n){return this[co].has(n)}getClass(n){const e=this[co].get(n);if(!e)throw new Kn("No class registered for ".concat(n));return e}setClass(n,e){e?this[co].set(e,n):(this[co].set(n.type,n),this[co].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[Eg].get(n)}setSVGClass(n,e){this[Eg].set(e??n.type.toLowerCase(),n)}},hh=new class extends Array{remove(n){const e=this.indexOf(n);e>-1&&this.splice(e,1)}cancelAll(){const n=this.splice(0);return n.forEach(e=>e.abort()),n}cancelByCanvas(n){if(!n)return[];const e=this.filter(t=>{var s;return t.target===n||typeof t.target=="object"&&((s=t.target)===null||s===void 0?void 0:s.canvas)===n});return e.forEach(t=>t.abort()),e}cancelByTarget(n){if(!n)return[];const e=this.filter(t=>t.target===n);return e.forEach(t=>t.abort()),e}};class t6{constructor(){z(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(s=>{let[r,a]=s;this.on(r,a)}),()=>this.off(e);if(t){const s=e;return this.__eventListeners[s]||(this.__eventListeners[s]=[]),this.__eventListeners[s].push(t),()=>this.off(s,t)}return()=>!1}once(e,t){if(typeof e=="object"){const s=[];return Object.entries(e).forEach(r=>{let[a,l]=r;s.push(this.once(a,l))}),()=>s.forEach(r=>r())}if(t){const s=this.on(e,function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];t.call(this,...a),s()});return s}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const s=this.__eventListeners[e],r=s.indexOf(t);r>-1&&s.splice(r,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const s in this.__eventListeners)this._removeEventListener(s);else typeof e=="object"?Object.entries(e).forEach(s=>{let[r,a]=s;this._removeEventListener(r,a)}):this._removeEventListener(e,t)}fire(e,t){var s;if(!this.__eventListeners)return;const r=(s=this.__eventListeners[e])===null||s===void 0?void 0:s.concat();if(r)for(let a=0;a<r.length;a++)r[a].call(this,t||{})}}const fo=(n,e)=>{const t=n.indexOf(e);return t!==-1&&n.splice(t,1),n},Pr=n=>{if(n===0)return 1;switch(Math.abs(n)/Fc){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},Lr=n=>{if(n===0)return 0;const e=n/Fc,t=Math.sign(n);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(n)};class ee{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new ee(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new ee(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new ee(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new ee(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new ee(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new ee(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new ee(this.x/e.x,this.y/e.y)}scalarDivide(e){return new ee(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new ee(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,s=this.y-e.y;return Math.sqrt(t*t+s*s)}midPointFrom(e){return this.lerp(e)}min(e){return new ee(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new ee(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,s=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=s}clone(){return new ee(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:F0;const s=Lr(e),r=Pr(e),a=this.subtract(t);return new ee(a.x*r-a.y*s,a.x*s+a.y*r).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new ee(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const F0=new ee(0,0),Yd=n=>!!n&&Array.isArray(n._objects);function _C(n){class e extends n{constructor(){super(...arguments),z(this,"_objects",[])}_onObjectAdded(s){}_onObjectRemoved(s){}_onStackOrderChanged(s){}add(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];const l=this._objects.push(...r);return r.forEach(u=>this._onObjectAdded(u)),l}insertAt(s){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return this._objects.splice(s,0,...a),a.forEach(u=>this._onObjectAdded(u)),this._objects.length}remove(){const s=this._objects,r=[];for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return l.forEach(h=>{const f=s.indexOf(h);f!==-1&&(s.splice(f,1),r.push(h),this._onObjectRemoved(h))}),r}forEachObject(s){this.getObjects().forEach((r,a,l)=>s(r,a,l))}getObjects(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return r.length===0?[...this._objects]:this._objects.filter(l=>l.isType(...r))}item(s){return this._objects[s]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(s,r){return!!this._objects.includes(s)||!!r&&this._objects.some(a=>a instanceof e&&a.contains(s,!0))}complexity(){return this._objects.reduce((s,r)=>s+=r.complexity?r.complexity():0,0)}sendObjectToBack(s){return!(!s||s===this._objects[0])&&(fo(this._objects,s),this._objects.unshift(s),this._onStackOrderChanged(s),!0)}bringObjectToFront(s){return!(!s||s===this._objects[this._objects.length-1])&&(fo(this._objects,s),this._objects.push(s),this._onStackOrderChanged(s),!0)}sendObjectBackwards(s,r){if(!s)return!1;const a=this._objects.indexOf(s);if(a!==0){const l=this.findNewLowerIndex(s,a,r);return fo(this._objects,s),this._objects.splice(l,0,s),this._onStackOrderChanged(s),!0}return!1}bringObjectForward(s,r){if(!s)return!1;const a=this._objects.indexOf(s);if(a!==this._objects.length-1){const l=this.findNewUpperIndex(s,a,r);return fo(this._objects,s),this._objects.splice(l,0,s),this._onStackOrderChanged(s),!0}return!1}moveObjectTo(s,r){return s!==this._objects[r]&&(fo(this._objects,s),this._objects.splice(r,0,s),this._onStackOrderChanged(s),!0)}findNewLowerIndex(s,r,a){let l;if(a){l=r;for(let u=r-1;u>=0;--u)if(s.isOverlapping(this._objects[u])){l=u;break}}else l=r-1;return l}findNewUpperIndex(s,r,a){let l;if(a){l=r;for(let u=r+1;u<this._objects.length;++u)if(s.isOverlapping(this._objects[u])){l=u;break}}else l=r+1;return l}collectObjects(s){let{left:r,top:a,width:l,height:u}=s,{includeIntersecting:h=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const f=[],g=new ee(r,a),x=g.add(new ee(l,u));for(let v=this._objects.length-1;v>=0;v--){const b=this._objects[v];b.selectable&&b.visible&&(h&&b.intersectsWithRect(g,x)||b.isContainedWithinRect(g,x)||h&&b.containsPoint(g)||h&&b.containsPoint(x))&&f.push(b)}return f}}return e}class SC extends t6{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function qd(n){return kh().requestAnimationFrame(n)}function s6(n){return kh().cancelAnimationFrame(n)}let n6=0;const Si=()=>n6++,Br=()=>{const n=Fo().createElement("canvas");if(!n||n.getContext===void 0)throw new Kn("Failed to create `canvas` element");return n},r6=()=>Fo().createElement("img"),yn=n=>{const e=Br();return e.width=n.width,e.height=n.height,e},CC=(n,e,t)=>n.toDataURL("image/".concat(e),t),jC=(n,e,t)=>new Promise((s,r)=>{n.toBlob(s,"image/".concat(e),t)}),Bt=n=>n*R0,Fr=n=>n/R0,i6=n=>n.every((e,t)=>e===As[t]),Bs=(n,e,t)=>new ee(n).transform(e,t),Mn=n=>{const e=1/(n[0]*n[3]-n[1]*n[2]),t=[e*n[3],-e*n[1],-e*n[2],e*n[0],0,0],{x:s,y:r}=new ee(n[4],n[5]).transform(t,!0);return t[4]=-s,t[5]=-r,t},xs=(n,e,t)=>[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],t?0:n[0]*e[4]+n[2]*e[5]+n[4],t?0:n[1]*e[4]+n[3]*e[5]+n[5]],U0=(n,e)=>n.reduceRight((t,s)=>s&&t?xs(s,t,e):s||t,void 0)||As.concat(),TC=n=>{let[e,t]=n;return Math.atan2(t,e)},fh=n=>{const e=TC(n),t=Math.pow(n[0],2)+Math.pow(n[1],2),s=Math.sqrt(t),r=(n[0]*n[3]-n[2]*n[1])/s,a=Math.atan2(n[0]*n[2]+n[1]*n[3],t);return{angle:Fr(e),scaleX:s,scaleY:r,skewX:Fr(a),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},Uc=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Vo(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=Bt(n),r=Pr(s),a=Lr(s);return[r,a,-a,r,e?e-(r*e-a*t):0,t?t-(a*e+r*t):0]}const z0=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},EC=n=>Math.tan(Bt(n)),kC=n=>[1,0,EC(n),1,0,0],AC=n=>[1,EC(n),0,1,0,0],Dh=n=>{let{scaleX:e=1,scaleY:t=1,flipX:s=!1,flipY:r=!1,skewX:a=0,skewY:l=0}=n,u=z0(s?-e:e,r?-t:t);return a&&(u=xs(u,kC(a),!0)),l&&(u=xs(u,AC(l),!0)),u},a6=n=>{const{translateX:e=0,translateY:t=0,angle:s=0}=n;let r=Uc(e,t);s&&(r=xs(r,Vo({angle:s})));const a=Dh(n);return i6(a)||(r=xs(r,a)),r},Wd=function(n){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(s,r){if(e&&e.aborted)return r(new XP("loadImage"));const a=r6();let l;e&&(l=function(h){a.src="",r(h)},e.addEventListener("abort",l,{once:!0}));const u=function(){a.onload=a.onerror=null,l&&e?.removeEventListener("abort",l),s(a)};n?(a.onload=u,a.onerror=function(){l&&e?.removeEventListener("abort",l),r(new Kn("Error loading ".concat(a.src)))},t&&(a.crossOrigin=t),a.src=n):u()})},Sc=function(n){let{signal:e,reviver:t=Gd}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((s,r)=>{const a=[];e&&e.addEventListener("abort",r,{once:!0}),Promise.all(n.map(l=>Ae.getClass(l.type).fromObject(l,{signal:e}).then(u=>(t(l,u),a.push(u),u)))).then(s).catch(l=>{a.forEach(u=>{u.dispose&&u.dispose()}),r(l)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},Oh=function(n){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,s)=>{const r=[];e&&e.addEventListener("abort",s,{once:!0});const a=Object.values(n).map(u=>u&&u.type&&Ae.has(u.type)?Sc([u],{signal:e}).then(h=>{let[f]=h;return r.push(f),f}):u),l=Object.keys(n);Promise.all(a).then(u=>u.reduce((h,f,g)=>(h[l[g]]=f,h),{})).then(t).catch(u=>{r.forEach(h=>{h.dispose&&h.dispose()}),s(u)}).finally(()=>{e&&e.removeEventListener("abort",s)})})},Io=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in n&&(e[t]=n[t]),e),{})},V0=(n,e)=>Object.keys(n).reduce((t,s)=>(e(n[s],s,n)&&(t[s]=n[s]),t),{}),yt=(n,e)=>parseFloat(Number(n).toFixed(e)),Cc=n=>"matrix("+n.map(e=>yt(e,st.NUM_FRACTION_DIGITS)).join(" ")+")",pn=n=>!!n&&n.toLive!==void 0,X1=n=>!!n&&typeof n.toObject=="function",K1=n=>!!n&&n.offsetX!==void 0&&"source"in n,ea=n=>!!n&&"multiSelectionStacking"in n;function NC(n){const e=n&&On(n);let t=0,s=0;if(!n||!e)return{left:t,top:s};let r=n;const a=e.documentElement,l=e.body||{scrollLeft:0,scrollTop:0};for(;r&&(r.parentNode||r.host)&&(r=r.parentNode||r.host,r===e?(t=l.scrollLeft||a.scrollLeft||0,s=l.scrollTop||a.scrollTop||0):(t+=r.scrollLeft||0,s+=r.scrollTop||0),r.nodeType!==1||r.style.position!=="fixed"););return{left:t,top:s}}const On=n=>n.ownerDocument||null,DC=n=>{var e;return((e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},OC=function(n,e,t){let{width:s,height:r}=t,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=s,n.height=r,a>1&&(n.setAttribute("width",(s*a).toString()),n.setAttribute("height",(r*a).toString()),e.scale(a,a))},Cp=(n,e)=>{let{width:t,height:s}=e;t&&(n.style.width=typeof t=="number"?"".concat(t,"px"):t),s&&(n.style.height=typeof s=="number"?"".concat(s,"px"):s)};function Q1(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=zs,n}class MC{constructor(e){z(this,"_originalCanvasStyle",void 0),z(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(s=e)&&s.getContext!==void 0?e:e&&Fo().getElementById(e)||Br();var s;if(t.hasAttribute("data-fabric"))throw new Kn("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:s}=e;const{el:r}=this.lower;r.classList.remove("lower-canvas"),r.removeAttribute("data-fabric"),r.setAttribute("width","".concat(t)),r.setAttribute("height","".concat(s)),r.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:s,ctx:r}=this.lower;OC(s,r,e,t)}setCSSDimensions(e){Cp(this.lower.el,e)}calcOffset(){return function(e){var t;const s=e&&On(e),r={left:0,top:0};if(!s)return r;const a=((t=DC(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};r.left+=parseInt(a.borderLeftWidth,10)||0,r.top+=parseInt(a.borderTopWidth,10)||0,r.left+=parseInt(a.paddingLeft,10)||0,r.top+=parseInt(a.paddingTop,10)||0;let l={left:0,top:0};const u=s.documentElement;e.getBoundingClientRect!==void 0&&(l=e.getBoundingClientRect());const h=NC(e);return{left:l.left+h.left-(u.clientLeft||0)+r.left,top:l.top+h.top-(u.clientTop||0)+r.top}}(this.lower.el)}dispose(){er().dispose(this.lower.el),delete this.lower}}const o6={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...As]};class zc extends _C(SC){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return zc.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new MC(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];const a=super.insertAt(e,...s);return s.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),a}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(_i("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?vC():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:s=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const r=I({width:this.width,height:this.height},e);this.elements.setDimensions(r,this.getRetinaScaling()),this.hasLostContext=!0,this.width=r.width,this.height=r.height}s||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const s=e,r=[...this.viewportTransform],a=Bs(e,Mn(r));r[0]=t,r[3]=t;const l=Bs(a,r);r[4]+=s.x-l.x,r[5]+=s.y-l.y,this.setViewportTransform(r)}setZoom(e){this.zoomToPoint(new ee(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new ee(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=qd(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,s=Mn(this.viewportTransform),r=Bs({x:0,y:0},s),a=Bs({x:e,y:t},s),l=r.min(a),u=r.max(a);return this.vptCoords={tl:l,tr:new ee(u.x,l.y),bl:new ee(l.x,u.y),br:u}}cancelRequestedRender(){this.nextRenderHandle&&(s6(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const s=this.viewportTransform,r=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(s[0],s[1],s[2],s[3],s[4],s[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),r&&(r._set("canvas",this),r.shouldCache(),r._transformDone=!0,r.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,r)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const s=this.viewportTransform;e.save(),e.transform(...s),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let s=0,r=t.length;s<r;++s)t[s]&&t[s].render(e)}_renderBackgroundOrOverlay(e,t){const s=this["".concat(t,"Color")],r=this["".concat(t,"Image")],a=this.viewportTransform,l=this["".concat(t,"Vpt")];if(!s&&!r)return;const u=pn(s);if(s){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=u?s.toLive(e):s,l&&e.transform(...a),u){e.transform(1,0,0,1,s.offsetX||0,s.offsetY||0);const h=s.gradientTransform||s.patternTransform;h&&e.transform(...h)}e.fill(),e.restore()}if(r){e.save();const{skipOffscreen:h}=this;this.skipOffscreen=l,l&&e.transform(...a),r.render(e),this.skipOffscreen=h,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new ee(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new ee(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new ee(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new ee(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new ee(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Bs(this.getCenterPoint(),Mn(this.viewportTransform))}_centerObject(e,t){e.setXY(t,Xe,Xe),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const s=this.clipPath,r=s&&!s.excludeFromExport?this._toObject(s,e,t):null;return I(I(I({version:_p},Io(this,t)),{},{objects:this._objects.filter(a=>!a.excludeFromExport).map(a=>this._toObject(a,e,t))},this.__serializeBgOverlay(e,t)),r?{clipPath:r}:null)}_toObject(e,t,s){let r;this.includeDefaultValues||(r=e.includeDefaultValues,e.includeDefaultValues=!1);const a=e[t](s);return this.includeDefaultValues||(e.includeDefaultValues=!!r),a}__serializeBgOverlay(e,t){const s={},r=this.backgroundImage,a=this.overlayImage,l=this.backgroundColor,u=this.overlayColor;return pn(l)?l.excludeFromExport||(s.background=l.toObject(t)):l&&(s.background=l),pn(u)?u.excludeFromExport||(s.overlay=u.toObject(t)):u&&(s.overlay=u),r&&!r.excludeFromExport&&(s.backgroundImage=this._toObject(r,e,t)),a&&!a.excludeFromExport&&(s.overlayImage=this._toObject(a,e,t)),s}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const s=[];return this._setSVGPreamble(s,e),this._setSVGHeader(s,e),this.clipPath&&s.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(s,"background"),this._setSVGBgOverlayImage(s,"backgroundImage",t),this._setSVGObjects(s,t),this.clipPath&&s.push(`</g>
`),this._setSVGBgOverlayColor(s,"overlay"),this._setSVGBgOverlayImage(s,"overlayImage",t),s.push("</svg>"),s.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const s=t.width||"".concat(this.width),r=t.height||"".concat(this.height),a=st.NUM_FRACTION_DIGITS,l=t.viewBox;let u;if(l)u='viewBox="'.concat(l.x," ").concat(l.y," ").concat(l.width," ").concat(l.height,'" ');else if(this.svgViewportTransformation){const h=this.viewportTransform;u='viewBox="'.concat(yt(-h[4]/h[0],a)," ").concat(yt(-h[5]/h[3],a)," ").concat(yt(this.width/h[0],a)," ").concat(yt(this.height/h[3],a),'" ')}else u='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',s,'" ','height="',r,'" ',u,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",_p,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(Si()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(pn(t)){const s=this["".concat(e,"Vpt")],r=this.viewportTransform,a={isType:()=>!1,width:this.width/(s?r[0]:1),height:this.height/(s?r[3]:1)};return t.toSVG(a,{additionalTransform:s?Cc(r):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},s=st.fontPaths;this._objects.forEach(function a(l){e.push(l),Yd(l)&&l._objects.forEach(a)}),e.forEach(a=>{if(!(l=a)||typeof l._renderText!="function")return;var l;const{styles:u,fontFamily:h}=a;!t[h]&&s[h]&&(t[h]=!0,u&&Object.values(u).forEach(f=>{Object.values(f).forEach(g=>{let{fontFamily:x=""}=g;!t[x]&&s[x]&&(t[x]=!0)})}))});const r=Object.keys(t).map(a=>`		@font-face {
			font-family: '`.concat(a,`';
			src: url('`).concat(s[a],`');
		}
`)).join("");return r?`	<style type="text/css"><![CDATA[
`.concat(r,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(s=>{s.excludeFromExport||this._setSVGObject(e,s,t)})}_setSVGObject(e,t,s){e.push(t.toSVG(s))}_setSVGBgOverlayImage(e,t,s){const r=this[t];r&&!r.excludeFromExport&&r.toSVG&&e.push(r.toSVG(s))}_setSVGBgOverlayColor(e,t){const s=this["".concat(t,"Color")];if(s)if(pn(s)){const r=s.repeat||"",a=this.width,l=this.height,u=this["".concat(t,"Vpt")]?Cc(Mn(this.viewportTransform)):"";e.push('<rect transform="'.concat(u," translate(").concat(a/2,",").concat(l/2,')" x="').concat(s.offsetX-a/2,'" y="').concat(s.offsetY-l/2,'" width="').concat(r!=="repeat-y"&&r!=="no-repeat"||!K1(s)?a:s.source.width,'" height="').concat(r!=="repeat-x"&&r!=="no-repeat"||!K1(s)?l:s.source.height,'" fill="url(#SVGID_').concat(s.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',s,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:s}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Kn("`json` is undefined"));const r=typeof e=="string"?JSON.parse(e):e,{objects:a=[],backgroundImage:l,background:u,overlayImage:h,overlay:f,clipPath:g}=r,x=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Sc(a,{reviver:t,signal:s}),Oh({backgroundImage:l,backgroundColor:u,overlayImage:h,overlayColor:f,clipPath:g},{signal:s})]).then(v=>{let[b,w]=v;return this.clear(),this.add(...b),this.set(r),this.set(w),this.renderOnAddRemove=x,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=yn(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:s=1,multiplier:r=1,enableRetinaScaling:a=!1}=e,l=r*(a?this.getRetinaScaling():1);return CC(this.toCanvasElement(l,e),t,s)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:s=1,multiplier:r=1,enableRetinaScaling:a=!1}=e,l=r*(a?this.getRetinaScaling():1);return jC(this.toCanvasElement(l,e),t,s)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:s,left:r,top:a,filter:l}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const u=(t||this.width)*e,h=(s||this.height)*e,f=this.getZoom(),g=this.width,x=this.height,v=this.skipControlsDrawing,b=f*e,w=this.viewportTransform,_=[b,0,0,b,(w[4]-(r||0))*e,(w[5]-(a||0))*e],T=this.enableRetinaScaling,S=yn({width:u,height:h}),A=l?this._objects.filter(E=>l(E)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=_,this.width=u,this.height=h,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(S.getContext("2d"),A),this.viewportTransform=w,this.width=g,this.height=x,this.calcViewportBoundaries(),this.enableRetinaScaling=T,this.skipControlsDrawing=v,S}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),hh.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const s=()=>{this.destroy(),e(!0)};s.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=s:s()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}z(zc,"ownDefaults",o6);const l6=["touchstart","touchmove","touchend"],c6=n=>{const e=NC(n.target),t=function(s){const r=s.changedTouches;return r&&r[0]?r[0]:s}(n);return new ee(t.clientX+e.left,t.clientY+e.top)},jp=n=>l6.includes(n.type)||n.pointerType==="touch",Z1=n=>{n.preventDefault(),n.stopPropagation()},Ar=n=>{let e=0,t=0,s=0,r=0;for(let a=0,l=n.length;a<l;a++){const{x:u,y:h}=n[a];(u>s||!a)&&(s=u),(u<e||!a)&&(e=u),(h>r||!a)&&(r=h),(h<t||!a)&&(t=h)}return{left:e,top:t,width:s-e,height:r-t}},u6=["translateX","translateY","scaleX","scaleY"],d6=(n,e)=>mh(n,xs(e,n.calcOwnMatrix())),mh=(n,e)=>{const t=fh(e),{translateX:s,translateY:r,scaleX:a,scaleY:l}=t,u=St(t,u6),h=new ee(s,r);n.flipX=!1,n.flipY=!1,Object.assign(n,u),n.set({scaleX:a,scaleY:l}),n.setPositionByOrigin(h,Xe,Xe)},h6=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},RC=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),I0=(n,e,t)=>{const s=n/2,r=e/2,a=[new ee(-s,-r),new ee(s,-r),new ee(-s,r),new ee(s,r)].map(u=>u.transform(t)),l=Ar(a);return new ee(l.width,l.height)},Mh=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:As;return xs(Mn(arguments.length>1&&arguments[1]!==void 0?arguments[1]:As),n)},So=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:As,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:As;return n.transform(Mh(e,t))},f6=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:As,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:As;return n.transform(Mh(e,t),!0)},m6=(n,e,t)=>{const s=Mh(e,t);return mh(n,xs(s,n.calcOwnMatrix())),s},PC=(n,e)=>{var t;const{transform:{target:s}}=e;(t=s.canvas)===null||t===void 0||t.fire("object:".concat(n),I(I({},e),{},{target:s})),s.fire(n,e)},g6={left:-.5,top:-.5,center:0,bottom:.5,right:.5},$t=n=>typeof n=="string"?g6[n]:n-.5,gh="not-allowed";function LC(n){return $t(n.originX)===$t(Xe)&&$t(n.originY)===$t(Xe)}function J1(n){return .5-$t(n)}const Pn=(n,e)=>n[e],BC=(n,e,t,s)=>({e:n,transform:e,pointer:new ee(t,s)});function FC(n,e){const t=n.getTotalAngle()+Fr(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function H0(n,e,t,s,r){var a;let{target:l,corner:u}=n;const h=l.controls[u],f=((a=l.canvas)===null||a===void 0?void 0:a.getZoom())||1,g=l.padding/f,x=function(v,b,w,_){const T=v.getRelativeCenterPoint(),S=w!==void 0&&_!==void 0?v.translateToGivenOrigin(T,Xe,Xe,w,_):new ee(v.left,v.top);return(v.angle?b.rotate(-Bt(v.angle),T):b).subtract(S)}(l,new ee(s,r),e,t);return x.x>=g&&(x.x-=g),x.x<=-g&&(x.x+=g),x.y>=g&&(x.y-=g),x.y<=g&&(x.y+=g),x.x-=h.offsetX,x.y-=h.offsetY,x}const p6=(n,e,t,s)=>{const{target:r,offsetX:a,offsetY:l}=e,u=t-a,h=s-l,f=!Pn(r,"lockMovementX")&&r.left!==u,g=!Pn(r,"lockMovementY")&&r.top!==h;return f&&r.set(lt,u),g&&r.set(Us,h),(f||g)&&PC(yC,BC(n,e,t,s)),f||g},e2={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},kg=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n),t2=(n,e,t,s)=>{n/=255,e/=255,t/=255;const r=Math.max(n,e,t),a=Math.min(n,e,t);let l,u;const h=(r+a)/2;if(r===a)l=u=0;else{const f=r-a;switch(u=h>.5?f/(2-r-a):f/(r+a),r){case n:l=(e-t)/f+(e<t?6:0);break;case e:l=(t-n)/f+2;break;case t:l=(n-e)/f+4}l/=6}return[Math.round(360*l),Math.round(100*u),Math.round(100*h),s]},s2=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},hd=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),n2=n=>{let[e,t,s,r=1]=n;const a=Math.round(.3*e+.59*t+.11*s);return[a,a,a,r]};class dt{constructor(e){if(z(this,"isUnrecognised",!1),e)if(e instanceof dt)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,s,r,a=1]=e;this.setSource([t,s,r,a])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in e2&&(e=e2[e]),e==="transparent"?[255,255,255,0]:dt.sourceFromHex(e)||dt.sourceFromRgb(e)||dt.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,s]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(s,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,s]=t2(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(s,"%)")}toHsla(){const[e,t,s,r]=t2(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(s,"%,").concat(r,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,s,r]=this.getSource();return"".concat(hd(e)).concat(hd(t)).concat(hd(s)).concat(hd(Math.round(255*r)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(n2(this.getSource())),this}toBlackWhite(e){const[t,,,s]=n2(this.getSource()),r=t<(e||127)?0:255;return this.setSource([r,r,r,s]),this}overlayWith(e){e instanceof dt||(e=new dt(e));const t=this.getSource(),s=e.getSource(),[r,a,l]=t.map((u,h)=>Math.round(.5*u+.5*s[h]));return this.setSource([r,a,l,t[3]]),this}static fromRgb(e){return dt.fromRgba(e)}static fromRgba(e){return new dt(dt.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[s,r,a]=t.slice(1,4).map(l=>{const u=parseFloat(l);return l.endsWith("%")?Math.round(2.55*u):u});return[s,r,a,s2(t[4])]}}static fromHsl(e){return dt.fromHsla(e)}static fromHsla(e){return new dt(dt.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const s=(dt.parseAngletoDegrees(t[1])%360+360)%360/360,r=parseFloat(t[2])/100,a=parseFloat(t[3])/100;let l,u,h;if(r===0)l=u=h=a;else{const f=a<=.5?a*(r+1):a+r-a*r,g=2*a-f;l=kg(g,f,s+1/3),u=kg(g,f,s),h=kg(g,f,s-1/3)}return[Math.round(255*l),Math.round(255*u),Math.round(255*h),s2(t[4])]}static fromHex(e){return new dt(dt.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let s;s=t.length<=4?t.split("").map(h=>h+h):t.match(/.{2}/g);const[r,a,l,u=255]=s.map(h=>parseInt(h,16));return[r,a,l,u/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),s=parseFloat(t);return t.includes("rad")?Fr(s):t.includes("turn")?360*s:s}}const Co=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:P0;const t=/\D{0,2}$/.exec(n),s=parseFloat(n),r=st.DPI;switch(t?.[0]){case"mm":return s*r/25.4;case"cm":return s*r/2.54;case"in":return s*r;case"pt":return s*r/72;case"pc":return s*r/72*12;case"em":return s*e;default:return s}},x6=n=>{const[e,t]=n.trim().split(" "),[s,r]=(a=e)&&a!==zs?[a.slice(1,4),a.slice(5,8)]:a===zs?[a,a]:["Mid","Mid"];var a;return{meetOrSlice:t||"meet",alignX:s,alignY:r}},jc=function(n,e){let t,s,r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const a=new dt(e),l=a.getAlpha();t=a.toRgb(),l!==1&&(s=l.toString())}else t="none";return r?"".concat(n,": ").concat(t,"; ").concat(s?"".concat(n,"-opacity: ").concat(s,"; "):""):"".concat(n,'="').concat(t,'" ').concat(s?"".concat(n,'-opacity="').concat(s,'" '):"")};class UC{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",s=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):zs,a=this.strokeDashOffset?this.strokeDashOffset:"0",l=this.strokeLineCap?this.strokeLineCap:"butt",u=this.strokeLineJoin?this.strokeLineJoin:"miter",h=this.strokeMiterLimit?this.strokeMiterLimit:"4",f=this.opacity!==void 0?this.opacity:"1",g=this.visible?"":" visibility: hidden;",x=e?"":this.getSvgFilter(),v=jc(Kt,this.fill);return[jc(Vs,this.stroke),"stroke-width: ",s,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",l,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",u,"; ","stroke-miterlimit: ",h,"; ",v,"fill-rule: ",t,"; ","opacity: ",f,";",x,g].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const s=e?this.calcTransformMatrix():this.calcOwnMatrix(),r='transform="'.concat(Cc(s));return"".concat(r).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:s=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[this.getSvgTransform(!0,s),this.getSvgCommons()].join(""),a=e.indexOf("COMMON_PARTS");return e[a]=r,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:s,withShadow:r,additionalTransform:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l=t?"":'style="'.concat(this.getSvgStyles(),'" '),u=r?'style="'.concat(this.getSvgFilter(),'" '):"",h=this.clipPath,f=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",g=h&&h.absolutePositioned,x=this.stroke,v=this.fill,b=this.shadow,w=[],_=e.indexOf("COMMON_PARTS");let T;h&&(h.clipPathId="CLIPPATH_".concat(Si()),T='<clipPath id="'.concat(h.clipPathId,`" >
`).concat(h.toClipPathSVG(s),`</clipPath>
`)),g&&w.push("<g ",u,this.getSvgCommons(),` >
`),w.push("<g ",this.getSvgTransform(!1),g?"":u+this.getSvgCommons(),` >
`);const S=[l,f,t?"":this.addPaintOrder()," ",a?'transform="'.concat(a,'" '):""].join("");return e[_]=S,pn(v)&&w.push(v.toSVG(this)),pn(x)&&w.push(x.toSVG(this)),b&&w.push(b.toSVG(this)),h&&w.push(T),w.push(e.join("")),w.push(`</g>
`),g&&w.push(`</g>
`),s?s(w.join("")):w.join("")}addPaintOrder(){return this.paintFirst!==Kt?' paint-order="'.concat(this.paintFirst,'" '):""}}function Rh(n){return new RegExp("^("+n.join("|")+")\\b","i")}const fa="textDecorationThickness",zC=["fontSize","fontWeight","fontFamily","fontStyle"],VC=["underline","overline","linethrough"],IC=[...zC,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],HC=[...IC,...VC,"textBackgroundColor","direction",fa],v6=[...zC,...VC,Vs,"strokeWidth",Kt,"deltaY","textBackgroundColor",fa],y6={_reNewline:L0,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:lt,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:lt,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[fa]:66.667},Wn="justify",ph="justify-left",uc="justify-right",dc="justify-center";var r2,i2,a2;const Rn=String.raw(r2||(r2=tr(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),Ag=String.raw(i2||(i2=tr(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),b6=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Rn+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Rn+"))?\\s+(.*)"),w6={cx:lt,x:lt,r:"radius",cy:Us,y:Us,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":fa},Ng="font-size",Dg="clip-path";Rh(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);Rh(["symbol","image","marker","pattern","view","svg"]);const o2=Rh(["symbol","g","a","svg","clipPath","defs"]);new RegExp(String.raw(a2||(a2=tr(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),Rn,Ag,Rn,Ag,Rn,Ag,Rn));const _6=new ee(1,0),$C=new ee,GC=(n,e)=>n.rotate(e),Tp=(n,e)=>new ee(e).subtract(n),Ep=n=>n.distanceFrom($C),kp=(n,e)=>Math.atan2(hc(n,e),C6(n,e)),S6=n=>kp(_6,n),$0=n=>n.eq($C)?n:n.scalarDivide(Ep(n)),YC=function(n){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return $0(new ee(-n.y,n.x).scalarMultiply(e?1:-1))},hc=(n,e)=>n.x*e.y-n.y*e.x,C6=(n,e)=>n.x*e.x+n.y*e.y,l2=(n,e,t)=>{if(n.eq(e)||n.eq(t))return!0;const s=hc(e,t),r=hc(e,n),a=hc(t,n);return s>=0?r>=0&&a<=0:!(r<=0&&a>=0)},c2="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",u2=new RegExp("(?:\\s|^)"+c2+c2+"("+Rn+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Nr{constructor(e){const t=typeof e=="string"?Nr.parseShadow(e):e;Object.assign(this,Nr.ownDefaults,t),this.id=Si()}static parseShadow(e){const t=e.trim(),[,s=0,r=0,a=0]=(u2.exec(t)||[]).map(l=>parseFloat(l)||0);return{color:(t.replace(u2,"")||"rgb(0,0,0)").trim(),offsetX:s,offsetY:r,blur:a}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=GC(new ee(this.offsetX,this.offsetY),Bt(-e.angle)),s=new dt(this.color);let r=40,a=40;return e.width&&e.height&&(r=100*yt((Math.abs(t.x)+this.blur)/e.width,st.NUM_FRACTION_DIGITS)+20,a=100*yt((Math.abs(t.y)+this.blur)/e.height,st.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(a,'%" height="').concat(100+2*a,'%" x="-').concat(r,'%" width="').concat(100+2*r,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(yt(this.blur?this.blur/2:0,st.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(yt(t.x,st.NUM_FRACTION_DIGITS),'" dy="').concat(yt(t.y,st.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(s.toRgb(),'" flood-opacity="').concat(s.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=Nr.ownDefaults;return this.includeDefaultValues?e:V0(e,(s,r)=>s!==t[r])}static async fromObject(e){return new this(e)}}z(Nr,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),z(Nr,"type","shadow"),Ae.setClass(Nr,"shadow");const Ao=(n,e,t)=>Math.max(n,Math.min(e,t)),j6=[Us,lt,Is,vn,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Uo,zo],Ur=[Kt,Vs,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],T6={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:lt,originY:Us,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Kt,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},E6=(n,e,t,s)=>-t*Math.cos(n/s*Fc)+t+e,k6=()=>!1;class G0{constructor(e){let{startValue:t,byValue:s,duration:r=500,delay:a=0,easing:l=E6,onStart:u=Gd,onChange:h=Gd,onComplete:f=Gd,abort:g=k6,target:x}=e;z(this,"_state","pending"),z(this,"durationProgress",0),z(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=r,this.delay=a,this.easing=l,this._onStart=u,this._onChange=h,this._onComplete=f,this._abort=g,this.target=x,this.startValue=t,this.byValue=s,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>qd(e),this.delay):qd(e)}tick(e){const t=(e||+new Date)-this.startTime,s=Math.min(t,this.duration);this.durationProgress=s/this.duration;const{value:r,valueProgress:a}=this.calculate(s);this.value=Object.freeze(r),this.valueProgress=a,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),qd(this.tick)))}register(){hh.push(this)}unregister(){hh.remove(this)}abort(){this._state="aborted",this.unregister()}}const A6=["startValue","endValue"];class N6 extends G0{constructor(e){let{startValue:t=0,endValue:s=100}=e;super(I(I({},St(e,A6)),{},{startValue:t,byValue:s-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const D6=["startValue","endValue"];class O6 extends G0{constructor(e){let{startValue:t=[0],endValue:s=[100]}=e;super(I(I({},St(e,D6)),{},{startValue:t,byValue:s.map((r,a)=>r-t[a])}))}calculate(e){const t=this.startValue.map((s,r)=>this.easing(e,s,this.byValue[r],this.duration,r));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const M6=["startValue","endValue","easing","onChange","onComplete","abort"],R6=(n,e,t,s)=>e+t*(1-Math.cos(n/s*Fc)),Og=n=>n&&((e,t,s)=>n(new dt(e).toRgba(),t,s));class P6 extends G0{constructor(e){let{startValue:t,endValue:s,easing:r=R6,onChange:a,onComplete:l,abort:u}=e,h=St(e,M6);const f=new dt(t).getSource(),g=new dt(s).getSource();super(I(I({},h),{},{startValue:f,byValue:g.map((x,v)=>x-f[v]),easing:r,onChange:Og(a),onComplete:Og(l),abort:Og(u)}))}calculate(e){const[t,s,r,a]=this.startValue.map((u,h)=>this.easing(e,u,this.byValue[h],this.duration,h)),l=[...[t,s,r].map(Math.round),Ao(0,a,1)];return{value:l,valueProgress:l.map((u,h)=>this.byValue[h]!==0?Math.abs((u-this.startValue[h])/this.byValue[h]):0).find(u=>u!==0)||0}}}function qC(n){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(n)?new O6(n):new N6(n);return e.start(),e}function L6(n){const e=new P6(n);return e.start(),e}class Tt{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.points=this.points.concat(t.filter(r=>!this.includes(r))),this}static isPointContained(e,t,s){let r=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(s))return e.eq(t);if(t.x===s.x)return e.x===t.x&&(r||e.y>=Math.min(t.y,s.y)&&e.y<=Math.max(t.y,s.y));if(t.y===s.y)return e.y===t.y&&(r||e.x>=Math.min(t.x,s.x)&&e.x<=Math.max(t.x,s.x));{const a=Tp(t,s),l=Tp(t,e).divide(a);return r?Math.abs(l.x)===Math.abs(l.y):l.x===l.y&&l.x>=0&&l.x<=1}}static isPointInPolygon(e,t){const s=new ee(e).setX(Math.min(e.x-1,...t.map(a=>a.x)));let r=0;for(let a=0;a<t.length;a++){const l=this.intersectSegmentSegment(t[a],t[(a+1)%t.length],e,s);if(l.includes(e))return!0;r+=+(l.status==="Intersection")}return r%2==1}static intersectLineLine(e,t,s,r){let a=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],l=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const u=t.x-e.x,h=t.y-e.y,f=r.x-s.x,g=r.y-s.y,x=e.x-s.x,v=e.y-s.y,b=f*v-g*x,w=u*v-h*x,_=g*u-f*h;if(_!==0){const T=b/_,S=w/_;return(a||0<=T&&T<=1)&&(l||0<=S&&S<=1)?new Tt("Intersection").append(new ee(e.x+T*u,e.y+T*h)):new Tt}if(b===0||w===0){const T=a||l||Tt.isPointContained(e,s,r)||Tt.isPointContained(t,s,r)||Tt.isPointContained(s,e,t)||Tt.isPointContained(r,e,t);return new Tt(T?"Coincident":void 0)}return new Tt("Parallel")}static intersectSegmentLine(e,t,s,r){return Tt.intersectLineLine(e,t,s,r,!1,!0)}static intersectSegmentSegment(e,t,s,r){return Tt.intersectLineLine(e,t,s,r,!1,!1)}static intersectLinePolygon(e,t,s){let r=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const a=new Tt,l=s.length;for(let u,h,f,g=0;g<l;g++){if(u=s[g],h=s[(g+1)%l],f=Tt.intersectLineLine(e,t,u,h,r,!1),f.status==="Coincident")return f;a.append(...f.points)}return a.points.length>0&&(a.status="Intersection"),a}static intersectSegmentPolygon(e,t,s){return Tt.intersectLinePolygon(e,t,s,!1)}static intersectPolygonPolygon(e,t){const s=new Tt,r=e.length,a=[];for(let l=0;l<r;l++){const u=e[l],h=e[(l+1)%r],f=Tt.intersectSegmentPolygon(u,h,t);f.status==="Coincident"?(a.push(f),s.append(u,h)):s.append(...f.points)}return a.length>0&&a.length===e.length?new Tt("Coincident"):(s.points.length>0&&(s.status="Intersection"),s)}static intersectPolygonRectangle(e,t,s){const r=t.min(s),a=t.max(s),l=new ee(a.x,r.y),u=new ee(r.x,a.y);return Tt.intersectPolygonPolygon(e,[r,l,a,u])}}class B6 extends SC{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?Bs(e,this.group.calcTransformMatrix()):e}setXY(e,t,s){this.group&&(e=Bs(e,Mn(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,s)}getRelativeXY(){return new ee(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,s)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:s,bl:r}=this.aCoords||(this.aCoords=this.calcACoords()),a=[e,t,s,r];if(this.group){const l=this.group.calcTransformMatrix();return a.map(u=>Bs(u,l))}return a}intersectsWithRect(e,t){return Tt.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=Tt.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:s,top:r,width:a,height:l}=this.getBoundingRect();return s>=e.x&&s+a<=t.x&&r>=e.y&&r+l<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Tt.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(s=>s.x<=t.x&&s.x>=e.x&&s.y<=t.y&&s.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(s=>(s.x>=t.x||s.x<=e.x)&&(s.y>=t.y||s.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return Ar(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(Is,e),this._set(vn,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?Fr(TC(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||As.concat()}calcACoords(){const e=Vo({angle:this.angle}),{x:t,y:s}=this.getRelativeCenterPoint(),r=Uc(t,s),a=xs(r,e),l=this._getTransformedDimensions(),u=l.x/2,h=l.y/2;return{tl:Bs({x:-u,y:-h},a),tr:Bs({x:u,y:-h},a),bl:Bs({x:-u,y:h},a),br:Bs({x:u,y:h},a)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,$t(this.originX),$t(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const s=this.transformMatrixKey(e),r=this.matrixCache;return r&&r.key.every((a,l)=>a===s[l])?r.value:(this.group&&(t=xs(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:s,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const s=this.getRelativeCenterPoint(),r={angle:this.angle,translateX:s.x,translateY:s.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},a=a6(r);return this.ownMatrixCache={key:e,value:a},a}_getNonTransformedDimensions(){return new ee(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=I({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),s=t.strokeWidth;let r=s,a=0;this.strokeUniform&&(r=0,a=s);const l=t.width+r,u=t.height+r;let h;return h=t.skewX===0&&t.skewY===0?new ee(l*t.scaleX,u*t.scaleY):I0(l,u,Dh(t)),h.scalarAdd(a)}translateToGivenOrigin(e,t,s,r,a){let l=e.x,u=e.y;const h=$t(r)-$t(t),f=$t(a)-$t(s);if(h||f){const g=this._getTransformedDimensions();l+=h*g.x,u+=f*g.y}return new ee(l,u)}translateToCenterPoint(e,t,s){if(t===Xe&&s===Xe)return e;const r=this.translateToGivenOrigin(e,t,s,Xe,Xe);return this.angle?r.rotate(Bt(this.angle),e):r}translateToOriginPoint(e,t,s){const r=this.translateToGivenOrigin(e,Xe,Xe,t,s);return this.angle?r.rotate(Bt(this.angle),e):r}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?Bs(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new ee(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,s){const r=this.translateToCenterPoint(e,t,s),a=this.translateToOriginPoint(r,this.originX,this.originY);this.set({left:a.x,top:a.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),lt,Us)}}const F6=["type"],U6=["extraParam"];let _r=class Xd extends B6{static getDefaults(){return Xd.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){_i("warn","Setting type has no effect",e)}constructor(e){super(),z(this,"_cacheContext",null),Object.assign(this,Xd.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=Br(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,s=e.height,r=st.maxCacheSideLimit,a=st.minCacheSideLimit;if(t<=r&&s<=r&&t*s<=st.perfLimitSizeTotal)return t<a&&(e.width=a),s<a&&(e.height=a),e;const l=t/s,[u,h]=cc.limitDimsByArea(l),f=Ao(a,u,r),g=Ao(a,h,r);return t>f&&(e.zoomX/=t/f,e.width=f,e.capped=!0),s>g&&(e.zoomY/=s/g,e.height=g,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),s=t.x*e.x/this.scaleX,r=t.y*e.y/this.scaleY;return{width:Math.ceil(s+2),height:Math.ceil(r+2),zoomX:e.x,zoomY:e.y,x:s,y:r}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:s,height:r,zoomX:a,zoomY:l,x:u,y:h}=this._limitCacheSize(this._getCacheCanvasDimensions()),f=s!==e.width||r!==e.height,g=this.zoomX!==a||this.zoomY!==l;if(!e||!t)return!1;if(f||g){s!==e.width||r!==e.height?(e.width=s,e.height=r):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const x=u/2,v=h/2;return this.cacheTranslationX=Math.round(e.width/2-x)+x,this.cacheTranslationY=Math.round(e.height/2-v)+v,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(a,l),this.zoomX=a,this.zoomY=l,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,s=this.calcTransformMatrix(!t);e.transform(s[0],s[1],s[2],s[3],s[4],s[5])}getObjectScaling(){if(!this.group)return new ee(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=fh(this.calcTransformMatrix());return new ee(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),s=this.getCanvasRetinaScaling();return e.scalarMultiply(t*s)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==Is&&e!==vn||(t=this._constrainScale(t)),e===Is&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof Nr||(t=new Nr(t));const s=this[e]!==t;return this[e]=t,s&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||s&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:s,cacheTranslationX:r,cacheTranslationY:a}=this,{width:l,height:u}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:s,cacheTranslationX:r,cacheTranslationY:a,width:l,height:u,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Vs&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,s){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(s,0,0),e.restore()}drawObject(e,t,s){const r=this.fill,a=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,s),this.fill=r,this.stroke=a}createClipPathLayer(e,t){const s=yn(t),r=s.getContext("2d");if(r.translate(t.cacheTranslationX,t.cacheTranslationY),r.scale(t.zoomX,t.zoomY),e._cacheCanvas=s,t.parentClipPaths.forEach(a=>{a.transform(r)}),t.parentClipPaths.push(e),e.absolutePositioned){const a=Mn(this.calcTransformMatrix());r.transform(a[0],a[1],a[2],a[3],a[4],a[5])}return e.transform(r),e.drawObject(r,!0,t),s}_drawClipPath(e,t,s){if(!t)return;t._transformDone=!0;const r=this.createClipPathLayer(t,s);this.drawClipPathOnCache(e,t,r)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,s=this._cacheContext;return!(!t||!s||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&s&&!e&&(s.save(),s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,t.width,t.height),s.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const s=t.stroke;s&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,pn(s)?s.gradientUnits==="percentage"||s.gradientTransform||s.patternTransform?this._applyPatternForTransformedGradient(e,s):(e.strokeStyle=s.toLive(e),this._applyPatternGradientTransform(e,s)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:s}=t;s&&(pn(s)?(e.fillStyle=s.toLive(e),this._applyPatternGradientTransform(e,s)):e.fillStyle=s)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,s=this.canvas,r=this.getCanvasRetinaScaling(),[a,,,l]=s?.viewportTransform||As,u=a*r,h=l*r,f=t.nonScaling?new ee(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*st.browserShadowBlurConstant*(u+h)*(f.x+f.y)/4,e.shadowOffsetX=t.offsetX*u*f.x,e.shadowOffsetY=t.offsetY*h*f.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!pn(t))return{offsetX:0,offsetY:0};const s=t.gradientTransform||t.patternTransform,r=-this.width/2+t.offsetX||0,a=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,r,a):e.transform(1,0,0,1,r,a),s&&e.transform(s[0],s[1],s[2],s[3],s[4],s[5]),{offsetX:r,offsetY:a}}_renderPaintInOrder(e){this.paintFirst===Vs?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var s;const r=this._limitCacheSize(this._getCacheCanvasDimensions()),a=this.getCanvasRetinaScaling(),l=r.x/this.scaleX/a,u=r.y/this.scaleY/a,h=yn({width:Math.ceil(l),height:Math.ceil(u)}),f=h.getContext("2d");f&&(f.beginPath(),f.moveTo(0,0),f.lineTo(l,0),f.lineTo(l,u),f.lineTo(0,u),f.closePath(),f.translate(l/2,u/2),f.scale(r.zoomX/this.scaleX/a,r.zoomY/this.scaleY/a),this._applyPatternGradientTransform(f,t),f.fillStyle=t.toLive(e),f.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(a*this.scaleX/r.zoomX,a*this.scaleY/r.zoomY),e.strokeStyle=(s=f.createPattern(h,"no-repeat"))!==null&&s!==void 0?s:"")}_findCenterFromElement(){return new ee(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(Ae.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=RC(this),s=this.group,r=this.shadow,a=Math.abs,l=e.enableRetinaScaling?vC():1,u=(e.multiplier||1)*l,h=e.canvasProvider||(A=>new zc(A,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&h6(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&m6(this,this.getViewportTransform()),this.setCoords();const f=Br(),g=this.getBoundingRect(),x=this.shadow,v=new ee;if(x){const A=x.blur,E=x.nonScaling?new ee(1,1):this.getObjectScaling();v.x=2*Math.round(a(x.offsetX)+A)*a(E.x),v.y=2*Math.round(a(x.offsetY)+A)*a(E.y)}const b=g.width+v.x,w=g.height+v.y;f.width=Math.ceil(b),f.height=Math.ceil(w);const _=h(f);e.format==="jpeg"&&(_.backgroundColor="#fff"),this.setPositionByOrigin(new ee(_.width/2,_.height/2),Xe,Xe);const T=this.canvas;_._objects=[this],this.set("canvas",_),this.setCoords();const S=_.toCanvasElement(u||1,e);return this.set("canvas",T),this.shadow=r,s&&(this.group=s),this.set(t),this.setCoords(),_._objects=[],_.destroy(),S}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return CC(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return jC(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:s,originY:r}=this;if(t){const{x:a,y:l}=this.getRelativeCenterPoint();this.originX=Xe,this.originY=Xe,this.left=a,this.top=l}if(this.set("angle",e),t){const{x:a,y:l}=this.translateToOriginPoint(this.getRelativeCenterPoint(),s,r);this.left=a,this.top=l,this.originX=s,this.originY=r}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){hh.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&er().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((s,r)=>{let[a,l]=r;return s[a]=this._animate(a,l,t),s},{})}_animate(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.split("."),a=this.constructor.colorProperties.includes(r[r.length-1]),{abort:l,startValue:u,onChange:h,onComplete:f}=s,g=I(I({},s),{},{target:this,startValue:u??r.reduce((x,v)=>x[v],this),endValue:t,abort:l?.bind(this),onChange:(x,v,b)=>{r.reduce((w,_,T)=>(T===r.length-1&&(w[_]=x),w[_]),this),h&&h(x,v,b)},onComplete:(x,v,b)=>{this.setCoords(),f&&f(x,v,b)}});return a?L6(g):qC(g)}isDescendantOf(e){const{parent:t,group:s}=this;return t===e||s===e||!!t&&t.isDescendantOf(e)||!!s&&s!==t&&s.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),s=e.getAncestors();if(t.length===0&&s.length>0&&this===s[s.length-1])return{fork:[],otherFork:[e,...s.slice(0,s.length-1)],common:[this]};for(let r,a=0;a<t.length;a++){if(r=t[a],r===e)return{fork:[this,...t.slice(0,a)],otherFork:[],common:t.slice(a)};for(let l=0;l<s.length;l++){if(this===s[l])return{fork:[],otherFork:[e,...s.slice(0,l)],common:[this,...t]};if(r===s[l])return{fork:[this,...t.slice(0,a)],otherFork:[e,...s.slice(0,l)],common:t.slice(a)}}}return{fork:[this,...t],otherFork:[e,...s],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const s=t.common[0]||this.canvas;if(!s)return;const r=t.fork.pop(),a=t.otherFork.pop(),l=s._objects.indexOf(r),u=s._objects.indexOf(a);return l>-1&&l>u}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Xd.customProperties,this.constructor.customProperties||[]);let t;const s=st.NUM_FRACTION_DIGITS,{clipPath:r,fill:a,stroke:l,shadow:u,strokeDashArray:h,left:f,top:g,originX:x,originY:v,width:b,height:w,strokeWidth:_,strokeLineCap:T,strokeDashOffset:S,strokeLineJoin:A,strokeUniform:E,strokeMiterLimit:M,scaleX:D,scaleY:B,angle:F,flipX:L,flipY:V,opacity:N,visible:H,backgroundColor:Y,fillRule:se,paintFirst:te,globalCompositeOperation:ne,skewX:R,skewY:$}=this;r&&!r.excludeFromExport&&(t=r.toObject(e.concat("inverted","absolutePositioned")));const Q=O=>yt(O,s),pe=I(I({},Io(this,e)),{},{type:this.constructor.type,version:_p,originX:x,originY:v,left:Q(f),top:Q(g),width:Q(b),height:Q(w),fill:X1(a)?a.toObject():a,stroke:X1(l)?l.toObject():l,strokeWidth:Q(_),strokeDashArray:h&&h.concat(),strokeLineCap:T,strokeDashOffset:S,strokeLineJoin:A,strokeUniform:E,strokeMiterLimit:Q(M),scaleX:Q(D),scaleY:Q(B),angle:Q(F),flipX:L,flipY:V,opacity:Q(N),shadow:u&&u.toObject(),visible:H,backgroundColor:Y,fillRule:se,paintFirst:te,globalCompositeOperation:ne,skewX:Q(R),skewY:Q($)},t?{clipPath:t}:null);return this.includeDefaultValues?pe:this._removeDefaultValues(pe)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),s=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return V0(e,(r,a)=>{if(a===lt||a===Us||a==="type")return!0;const l=s[a];return r!==l&&!(Array.isArray(r)&&Array.isArray(l)&&r.length===0&&l.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=St(e,F6),s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:r}=s,a=St(s,U6);return Oh(t,a).then(l=>r?(delete l[r],new this(t[r],l)):new this(l))}static fromObject(e,t){return this._fromObject(e,t)}};z(_r,"stateProperties",j6),z(_r,"cacheProperties",Ur),z(_r,"ownDefaults",T6),z(_r,"type","FabricObject"),z(_r,"colorProperties",[Kt,Vs,"backgroundColor"]),z(_r,"customProperties",[]),Ae.setClass(_r),Ae.setClass(_r,"object");const Ho=(n,e,t)=>(s,r,a,l)=>{const u=e(s,r,a,l);return u&&PC(n,I(I({},BC(s,r,a,l)),t)),u};function $o(n){return(e,t,s,r)=>{const{target:a,originX:l,originY:u}=t,h=a.getRelativeCenterPoint(),f=a.translateToOriginPoint(h,l,u),g=n(e,t,s,r);return a.setPositionByOrigin(f,t.originX,t.originY),g}}const d2=Ho(_c,$o((n,e,t,s)=>{const r=H0(e,e.originX,e.originY,t,s);if($t(e.originX)===$t(Xe)||$t(e.originX)===$t(Lt)&&r.x<0||$t(e.originX)===$t(lt)&&r.x>0){const{target:a}=e,l=a.strokeWidth/(a.strokeUniform?a.scaleX:1),u=LC(e)?2:1,h=a.width,f=Math.abs(r.x*u/a.scaleX)-l;return a.set("width",Math.max(f,1)),h!==a.width}return!1}));function z6(n,e,t,s,r){s=s||{};const a=this.sizeX||s.cornerSize||r.cornerSize,l=this.sizeY||s.cornerSize||r.cornerSize,u=s.transparentCorners!==void 0?s.transparentCorners:r.transparentCorners,h=u?Vs:Kt,f=!u&&(s.cornerStrokeColor||r.cornerStrokeColor);let g,x=e,v=t;n.save(),n.fillStyle=s.cornerColor||r.cornerColor||"",n.strokeStyle=s.cornerStrokeColor||r.cornerStrokeColor||"",a>l?(g=a,n.scale(1,l/a),v=t*a/l):l>a?(g=l,n.scale(a/l,1),x=e*l/a):g=a,n.beginPath(),n.arc(x,v,g/2,0,ch,!1),n[h](),f&&n.stroke(),n.restore()}function V6(n,e,t,s,r){s=s||{};const a=this.sizeX||s.cornerSize||r.cornerSize,l=this.sizeY||s.cornerSize||r.cornerSize,u=s.transparentCorners!==void 0?s.transparentCorners:r.transparentCorners,h=u?Vs:Kt,f=!u&&(s.cornerStrokeColor||r.cornerStrokeColor),g=a/2,x=l/2;n.save(),n.fillStyle=s.cornerColor||r.cornerColor||"",n.strokeStyle=s.cornerStrokeColor||r.cornerStrokeColor||"",n.translate(e,t);const v=r.getTotalAngle();n.rotate(Bt(v)),n["".concat(h,"Rect")](-g,-x,a,l),f&&n.strokeRect(-g,-x,a,l),n.restore()}class An{constructor(e){z(this,"visible",!0),z(this,"actionName",Nh),z(this,"angle",0),z(this,"x",0),z(this,"y",0),z(this,"offsetX",0),z(this,"offsetY",0),z(this,"sizeX",0),z(this,"sizeY",0),z(this,"touchSizeX",0),z(this,"touchSizeY",0),z(this,"cursorStyle","crosshair"),z(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,s,r){var a;let{tl:l,tr:u,br:h,bl:f}=r;return((a=t.canvas)===null||a===void 0?void 0:a.getActiveObject())===t&&t.isControlVisible(e)&&Tt.isPointInPolygon(s,[l,u,h,f])}getActionHandler(e,t,s){return this.actionHandler}getMouseDownHandler(e,t,s){return this.mouseDownHandler}getMouseUpHandler(e,t,s){return this.mouseUpHandler}cursorStyleHandler(e,t,s){return t.cursorStyle}getActionName(e,t,s){return t.actionName}getVisibility(e,t){var s,r;return(s=(r=e._controlsVisibility)===null||r===void 0?void 0:r[t])!==null&&s!==void 0?s:this.visible}setVisibility(e,t,s){this.visible=e}positionHandler(e,t,s,r){return new ee(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,s,r,a,l){const u=U0([Uc(s,r),Vo({angle:e}),z0((a?this.touchSizeX:this.sizeX)||t,(a?this.touchSizeY:this.sizeY)||t)]);return{tl:new ee(-.5,-.5).transform(u),tr:new ee(.5,-.5).transform(u),br:new ee(.5,.5).transform(u),bl:new ee(-.5,.5).transform(u)}}render(e,t,s,r,a){((r=r||{}).cornerStyle||a.cornerStyle)==="circle"?z6.call(this,e,t,s,r,a):V6.call(this,e,t,s,r,a)}}const I6=(n,e,t)=>t.lockRotation?gh:e.cursorStyle,H6=Ho(bC,$o((n,e,t,s)=>{let{target:r,ex:a,ey:l,theta:u,originX:h,originY:f}=e;const g=r.translateToOriginPoint(r.getRelativeCenterPoint(),h,f);if(Pn(r,"lockRotation"))return!1;const x=Math.atan2(l-g.y,a-g.x),v=Math.atan2(s-g.y,t-g.x);let b=Fr(v-x+u);if(r.snapAngle&&r.snapAngle>0){const _=r.snapAngle,T=r.snapThreshold||_,S=Math.ceil(b/_)*_,A=Math.floor(b/_)*_;Math.abs(b-A)<T?b=A:Math.abs(b-S)<T&&(b=S)}b<0&&(b=360+b),b%=360;const w=r.angle!==b;return r.angle=b,w}));function WC(n,e){const t=e.canvas,s=n[t.uniScaleKey];return t.uniformScaling&&!s||!t.uniformScaling&&s}function XC(n,e,t){const s=Pn(n,"lockScalingX"),r=Pn(n,"lockScalingY");if(s&&r||!e&&(s||r)&&t||s&&e==="x"||r&&e==="y")return!0;const{width:a,height:l,strokeWidth:u}=n;return a===0&&u===0&&e!=="y"||l===0&&u===0&&e!=="x"}const $6=["e","se","s","sw","w","nw","n","ne","e"],Kl=(n,e,t)=>{const s=WC(n,t);if(XC(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",s))return gh;const r=FC(t,e);return"".concat($6[r],"-resize")};function Y0(n,e,t,s){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const a=e.target,l=r.by,u=WC(n,a);let h,f,g,x,v,b;if(XC(a,l,u))return!1;if(e.gestureScale)f=e.scaleX*e.gestureScale,g=e.scaleY*e.gestureScale;else{if(h=H0(e,e.originX,e.originY,t,s),v=l!=="y"?Math.sign(h.x||e.signX||1):1,b=l!=="x"?Math.sign(h.y||e.signY||1):1,e.signX||(e.signX=v),e.signY||(e.signY=b),Pn(a,"lockScalingFlip")&&(e.signX!==v||e.signY!==b))return!1;if(x=a._getTransformedDimensions(),u&&!l){const T=Math.abs(h.x)+Math.abs(h.y),{original:S}=e,A=T/(Math.abs(x.x*S.scaleX/a.scaleX)+Math.abs(x.y*S.scaleY/a.scaleY));f=S.scaleX*A,g=S.scaleY*A}else f=Math.abs(h.x*a.scaleX/x.x),g=Math.abs(h.y*a.scaleY/x.y);LC(e)&&(f*=2,g*=2),e.signX!==v&&l!=="y"&&(e.originX=J1(e.originX),f*=-1,e.signX=v),e.signY!==b&&l!=="x"&&(e.originY=J1(e.originY),g*=-1,e.signY=b)}const w=a.scaleX,_=a.scaleY;return l?(l==="x"&&a.set(Is,f),l==="y"&&a.set(vn,g)):(!Pn(a,"lockScalingX")&&a.set(Is,f),!Pn(a,"lockScalingY")&&a.set(vn,g)),w!==a.scaleX||_!==a.scaleY}const fd=Ho(Ah,$o((n,e,t,s)=>Y0(n,e,t,s))),G6=Ho(Ah,$o((n,e,t,s)=>Y0(n,e,t,s,{by:"x"}))),Y6=Ho(Ah,$o((n,e,t,s)=>Y0(n,e,t,s,{by:"y"}))),q6=["target","ex","ey","skewingSide"],Mg={x:{counterAxis:"y",scale:Is,skew:Uo,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:vn,skew:zo,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},W6=["ns","nesw","ew","nwse"],X6=(n,e,t)=>{if(e.x!==0&&Pn(t,"lockSkewingY")||e.y!==0&&Pn(t,"lockSkewingX"))return gh;const s=FC(t,e)%4;return"".concat(W6[s],"-resize")};function KC(n,e,t,s,r){const{target:a}=t,{counterAxis:l,origin:u,lockSkewing:h,skew:f,flip:g}=Mg[n];if(Pn(a,h))return!1;const{origin:x,flip:v}=Mg[l],b=$t(t[x])*(a[v]?-1:1),w=-Math.sign(b)*(a[g]?-1:1),_=.5*-((a[f]===0&&H0(t,Xe,Xe,s,r)[n]>0||a[f]>0?1:-1)*w)+.5;return Ho(wC,$o((S,A,E,M)=>function(D,B,F){let{target:L,ex:V,ey:N,skewingSide:H}=B,Y=St(B,q6);const{skew:se}=Mg[D],te=F.subtract(new ee(V,N)).divide(new ee(L.scaleX,L.scaleY))[D],ne=L[se],R=Y[se],$=Math.tan(Bt(R)),Q=D==="y"?L._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:L._getTransformedDimensions({scaleX:1,scaleY:1}).y,pe=2*te*H/Math.max(Q,1)+$,O=Fr(Math.atan(pe));L.set(se,O);const q=ne!==L[se];if(q&&D==="y"){const{skewX:fe,scaleX:me}=L,_e=L._getTransformedDimensions({skewY:ne}),re=L._getTransformedDimensions(),xe=fe!==0?_e.x/re.x:1;xe!==1&&L.set(Is,xe*me)}return q}(n,A,new ee(E,M))))(e,I(I({},t),{},{[u]:_,skewingSide:w}),s,r)}const K6=(n,e,t,s)=>KC("x",n,e,t,s),Q6=(n,e,t,s)=>KC("y",n,e,t,s);function Ph(n,e){return n[e.canvas.altActionKey]}const md=(n,e,t)=>{const s=Ph(n,t);return e.x===0?s?Uo:vn:e.y===0?s?zo:Is:""},yo=(n,e,t)=>Ph(n,t)?X6(0,e,t):Kl(n,e,t),h2=(n,e,t,s)=>Ph(n,e.target)?Q6(n,e,t,s):G6(n,e,t,s),f2=(n,e,t,s)=>Ph(n,e.target)?K6(n,e,t,s):Y6(n,e,t,s),QC=()=>({ml:new An({x:-.5,y:0,cursorStyleHandler:yo,actionHandler:h2,getActionName:md}),mr:new An({x:.5,y:0,cursorStyleHandler:yo,actionHandler:h2,getActionName:md}),mb:new An({x:0,y:.5,cursorStyleHandler:yo,actionHandler:f2,getActionName:md}),mt:new An({x:0,y:-.5,cursorStyleHandler:yo,actionHandler:f2,getActionName:md}),tl:new An({x:-.5,y:-.5,cursorStyleHandler:Kl,actionHandler:fd}),tr:new An({x:.5,y:-.5,cursorStyleHandler:Kl,actionHandler:fd}),bl:new An({x:-.5,y:.5,cursorStyleHandler:Kl,actionHandler:fd}),br:new An({x:.5,y:.5,cursorStyleHandler:Kl,actionHandler:fd}),mtr:new An({x:0,y:-.5,actionHandler:H6,cursorStyleHandler:I6,offsetY:-40,withConnection:!0,actionName:B0})}),Z6=()=>({mr:new An({x:.5,y:0,actionHandler:d2,cursorStyleHandler:yo,actionName:_c}),ml:new An({x:-.5,y:0,actionHandler:d2,cursorStyleHandler:yo,actionName:_c})}),J6=()=>I(I({},QC()),Z6());class Tc extends _r{static getDefaults(){return I(I({},super.getDefaults()),Tc.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Tc.ownDefaults),this.setOptions(e)}static createControls(){return{controls:QC()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,s=t.target,r=t.action;if(this===s&&r&&r.startsWith(Nh))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const s=Object.entries(this.oCoords);for(let r=s.length-1;r>=0;r--){const[a,l]=s[r],u=this.controls[a];if(u.shouldActivate(a,this,e,t?l.touchCorner:l.corner))return this.__corner=a,{key:a,control:u,coord:this.oCoords[a]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),s=Uc(t.x,t.y),r=Vo({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),a=xs(s,r),l=xs(e,a),u=xs(l,[1/e[0],0,0,1/e[3],0,0]),h=this.group?fh(this.calcTransformMatrix()):void 0;h&&(h.scaleX=Math.abs(h.scaleX),h.scaleY=Math.abs(h.scaleY));const f=this._calculateCurrentDimensions(h),g={};return this.forEachControl((x,v)=>{const b=x.positionHandler(f,u,this,x);g[v]=Object.assign(b,this._calcCornerCoords(x,b))}),g}_calcCornerCoords(e,t){const s=this.getTotalAngle();return{corner:e.calcCornerCoords(s,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(s,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),s=this._calculateCurrentDimensions(),r=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/r[0],1/r[3]),e.rotate(Bt(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-s.x/2,-s.y/2,s.x,s.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=I({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},s);e.save(),e.strokeStyle=r.borderColor,this._setLineDash(e,r.borderDashArray),this.strokeBorders(e,t),r.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:s,hasControls:r}=this,a=I({hasBorders:s,hasControls:r},t),l=this.getViewportTransform(),u=a.hasBorders,h=a.hasControls,f=xs(l,this.calcTransformMatrix()),g=fh(f);e.save(),e.translate(g.translateX,g.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(g.angle-=180),e.rotate(Bt(this.group?g.angle:this.angle)),u&&this.drawBorders(e,g,t),h&&this.drawControls(e,t),e.restore()}drawBorders(e,t,s){let r;if(s&&s.forActiveSelection||this.group){const a=I0(this.width,this.height,Dh(t)),l=this.isStrokeAccountedForInDimensions()?F0:(this.strokeUniform?new ee().scalarAdd(this.canvas?this.canvas.getZoom():1):new ee(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);r=a.add(l).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else r=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,r,s)}drawControlsConnectingLines(e,t){let s=!1;e.beginPath(),this.forEachControl((r,a)=>{r.withConnection&&r.getVisibility(this,a)&&(s=!0,e.moveTo(r.x*t.x,r.y*t.y),e.lineTo(r.x*t.x+r.offsetX,r.y*t.y+r.offsetY))}),s&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const s=this.getCanvasRetinaScaling(),{cornerStrokeColor:r,cornerDashArray:a,cornerColor:l}=this,u=I({cornerStrokeColor:r,cornerDashArray:a,cornerColor:l},t);e.setTransform(s,0,0,s,0,0),e.strokeStyle=e.fillStyle=u.cornerColor,this.transparentCorners||(e.strokeStyle=u.cornerStrokeColor),this._setLineDash(e,u.cornerDashArray),this.forEachControl((h,f)=>{if(h.getVisibility(this,f)){const g=this.oCoords[f];h.render(e,g.x,g.y,u,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[s,r]=t;return this.setControlVisible(s,r)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const s=this.canvas.viewportTransform;t.save(),t.transform(s[0],s[1],s[2],s[3],s[4],s[5]),this.transform(t);const r=this.width+4,a=this.height+4;return t.clearRect(-r/2,-a/2,r,a),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function ZC(n,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(s=>{s!=="constructor"&&Object.defineProperty(n.prototype,s,Object.getOwnPropertyDescriptor(t.prototype,s)||Object.create(null))})}),n}z(Tc,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class js extends Tc{}ZC(js,[UC]),Ae.setClass(js),Ae.setClass(js,"object");const eL=(n,e,t,s)=>{const r=2*(s=Math.round(s))+1,{data:a}=n.getImageData(e-s,t-s,r,r);for(let l=3;l<a.length;l+=4)if(a[l]>0)return!1;return!0};class JC{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new ee(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new ee(1/this.options.scaleX,1/this.options.scaleY):new ee(1,1)}createSideVector(e,t){const s=Tp(e,t);return this.options.strokeUniform?s.multiply(this.scale):s}projectOrthogonally(e,t,s){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,s)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new ee(e);return t.y+=t.x*Math.tan(Bt(this.options.skewY)),t.x+=t.y*Math.tan(Bt(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const tL=new ee;class jo extends JC{static getOrthogonalRotationFactor(e,t){const s=t?kp(e,t):S6(e);return Math.abs(s)<Fc?-1:1}constructor(e,t,s,r){super(r),z(this,"AB",void 0),z(this,"AC",void 0),z(this,"alpha",void 0),z(this,"bisector",void 0),this.A=new ee(e),this.B=new ee(t),this.C=new ee(s),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=kp(this.AB,this.AC),this.bisector=$0(GC(this.AB.eq(tL)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const r=this.createSideVector(e,t),a=YC(r),l=jo.getOrthogonalRotationFactor(a,this.bisector);return this.scaleUnitVector(a,s*l)}projectBevel(){const e=[];return(this.alpha%ch==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),s=1/Math.sin(t/2),r=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*s),a=this.options.strokeUniform?Ep(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return Ep(r)/this.strokeProjectionMagnitude<=a&&e.push(this.applySkew(this.A.add(r))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const s=[],r=new ee(jo.getOrthogonalRotationFactor(this.bisector),jo.getOrthogonalRotationFactor(new ee(this.bisector.y,this.bisector.x)));return[new ee(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(r),new ee(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(r)].forEach(a=>{l2(a,e,t)&&s.push(this.A.add(a))}),s}projectRoundWithSkew(e,t){const s=[],{skewX:r,skewY:a,scaleX:l,scaleY:u,strokeUniform:h}=this.options,f=new ee(Math.tan(Bt(r)),Math.tan(Bt(a))),g=this.strokeProjectionMagnitude,x=h?g/u/Math.sqrt(1/u**2+1/l**2*f.y**2):g/Math.sqrt(1+f.y**2),v=new ee(Math.sqrt(Math.max(g**2-x**2,0)),x),b=h?g/Math.sqrt(1+f.x**2*(1/u)**2/(1/l+1/l*f.x*f.y)**2):g/Math.sqrt(1+f.x**2/(1+f.x*f.y)**2),w=new ee(b,Math.sqrt(Math.max(g**2-b**2,0)));return[w,w.scalarMultiply(-1),v,v.scalarMultiply(-1)].map(_=>this.applySkew(h?_.multiply(this.strokeUniformScalar):_)).forEach(_=>{l2(_,e,t)&&s.push(this.applySkew(this.A).add(_))}),s}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%ch==0,s=this.applySkew(this.A),r=e[t?0:2].subtract(s),a=e[t?1:0].subtract(s),l=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),u=hc(r,l)>0,h=u?r:a,f=u?a:r;return this.isSkewed()?e.push(...this.projectRoundWithSkew(h,f)):e.push(...this.projectRoundNoSkew(h,f)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class m2 extends JC{constructor(e,t,s){super(s),this.A=new ee(e),this.T=new ee(t)}calcOrthogonalProjection(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const r=this.createSideVector(e,t);return this.scaleUnitVector(YC(r),s)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new ee(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new jo(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new ee(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),s=this.scaleUnitVector($0(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),r=this.A.add(s);e.push(r.add(t),r.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const sL=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const s=[];if(n.length===0)return s;const r=n.reduce((a,l)=>(a[a.length-1].eq(l)||a.push(new ee(l)),a),[new ee(n[0])]);if(r.length===1)t=!0;else if(!t){const a=r[0],l=((u,h)=>{for(let f=u.length-1;f>=0;f--)if(h(u[f],f,u))return f;return-1})(r,u=>!u.eq(a));r.splice(l+1)}return r.forEach((a,l,u)=>{let h,f;l===0?(f=u[1],h=t?a:u[u.length-1]):l===u.length-1?(h=u[l-1],f=t?a:u[0]):(h=u[l-1],f=u[l+1]),t&&u.length===1?s.push(...new m2(a,a,e).project()):!t||l!==0&&l!==u.length-1?s.push(...new jo(a,h,f,e).project()):s.push(...new m2(a,l===0?f:h,e).project())}),s},q0=n=>{const e={};return Object.keys(n).forEach(t=>{e[t]={},Object.keys(n[t]).forEach(s=>{e[t][s]=I({},n[t][s])})}),e},nL=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let Gl;const W0=n=>{if(Gl||Gl||(Gl="Intl"in kh()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),Gl){const e=Gl.segment(n);return Array.from(e).map(t=>{let{segment:s}=t;return s})}return rL(n)},rL=n=>{const e=[];for(let t,s=0;s<n.length;s++)(t=iL(n,s))!==!1&&e.push(t);return e},iL=(n,e)=>{const t=n.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return n.charAt(e);if(55296<=t&&t<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";const r=n.charCodeAt(e+1);if(56320>r||r>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const s=n.charCodeAt(e-1);if(55296>s||s>56319)throw"Low surrogate without preceding high surrogate";return!1},X0=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==e.fill||n.stroke!==e.stroke||n.strokeWidth!==e.strokeWidth||n.fontSize!==e.fontSize||n.fontFamily!==e.fontFamily||n.fontWeight!==e.fontWeight||n.fontStyle!==e.fontStyle||n.textDecorationThickness!==e.textDecorationThickness||n.textBackgroundColor!==e.textBackgroundColor||n.deltaY!==e.deltaY||t&&(n.overline!==e.overline||n.underline!==e.underline||n.linethrough!==e.linethrough)},aL=(n,e)=>{const t=e.split(`
`),s=[];let r=-1,a={};n=q0(n);for(let l=0;l<t.length;l++){const u=W0(t[l]);if(n[l])for(let h=0;h<u.length;h++){r++;const f=n[l][h];f&&Object.keys(f).length>0&&(X0(a,f,!0)?s.push({start:r,end:r+1,style:f}):s[s.length-1].end++),a=f||{}}else r+=u.length,a={}}return s},oL=(n,e)=>{if(!Array.isArray(n))return q0(n);const t=e.split(L0),s={};let r=-1,a=0;for(let l=0;l<t.length;l++){const u=W0(t[l]);for(let h=0;h<u.length;h++)r++,n[a]&&n[a].start<=r&&r<n[a].end&&(s[l]=s[l]||{},s[l][h]=I({},n[a].style),r===n[a].end-1&&a++)}return s},Ai=["display","transform",Kt,"fill-opacity","fill-rule","opacity",Vs,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function g2(n,e){const t=n.nodeName,s=n.getAttribute("class"),r=n.getAttribute("id"),a="(?![a-zA-Z\\-]+)";let l;if(l=new RegExp("^"+t,"i"),e=e.replace(l,""),r&&e.length&&(l=new RegExp("#"+r+a,"i"),e=e.replace(l,"")),s&&e.length){const u=s.split(" ");for(let h=u.length;h--;)l=new RegExp("\\."+u[h]+a,"i"),e=e.replace(l,"")}return e.length===0}function lL(n,e){let t=!0;const s=g2(n,e.pop());return s&&e.length&&(t=function(r,a){let l,u=!0;for(;r.parentElement&&r.parentElement.nodeType===1&&a.length;)u&&(l=a.pop()),u=g2(r=r.parentElement,l);return a.length===0}(n,e)),s&&t&&e.length===0}const cL=n=>{var e;return(e=w6[n])!==null&&e!==void 0?e:n},uL=new RegExp("(".concat(Rn,")"),"gi"),dL=n=>n.replace(uL," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var p2,x2,v2,y2,b2,w2,_2;const Es="(".concat(Rn,")"),hL=String.raw(p2||(p2=tr(["(skewX)(",")"],["(skewX)\\(","\\)"])),Es),fL=String.raw(x2||(x2=tr(["(skewY)(",")"],["(skewY)\\(","\\)"])),Es),mL=String.raw(v2||(v2=tr(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Es,Es,Es),gL=String.raw(y2||(y2=tr(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Es,Es),pL=String.raw(b2||(b2=tr(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Es,Es),xL=String.raw(w2||(w2=tr(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Es,Es,Es,Es,Es,Es),K0="(?:".concat(xL,"|").concat(pL,"|").concat(mL,"|").concat(gL,"|").concat(hL,"|").concat(fL,")"),vL="(?:".concat(K0,"*)"),yL=String.raw(_2||(_2=tr(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),vL),bL=new RegExp(yL),wL=new RegExp(K0),_L=new RegExp(K0,"g");function Ap(n){const e=[];if(!(n=dL(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!bL.test(n))return[...As];for(const t of n.matchAll(_L)){const s=wL.exec(t[0]);if(!s)continue;let r=As;const a=s.filter(w=>!!w),[,l,...u]=a,[h,f,g,x,v,b]=u.map(w=>parseFloat(w));switch(l){case"translate":r=Uc(h,f);break;case B0:r=Vo({angle:h},{x:f,y:g});break;case Nh:r=z0(h,f);break;case Uo:r=kC(h);break;case zo:r=AC(h);break;case"matrix":r=[h,f,g,x,v,b]}e.push(r)}return U0(e)}function SL(n,e,t,s){const r=Array.isArray(e);let a,l=e;if(n!==Kt&&n!==Vs||e!==zs){if(n==="strokeUniform")return e==="non-scaling-stroke";if(n==="strokeDashArray")l=e===zs?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")l=t&&t.transformMatrix?xs(t.transformMatrix,Ap(e)):Ap(e);else if(n==="visible")l=e!==zs&&e!=="hidden",t&&t.visible===!1&&(l=!1);else if(n==="opacity")l=parseFloat(e),t&&t.opacity!==void 0&&(l*=t.opacity);else if(n==="textAnchor")l=e==="start"?lt:e==="end"?Lt:Xe;else if(n==="charSpacing"||n===fa)a=Co(e,s)/s*1e3;else if(n==="paintFirst"){const u=e.indexOf(Kt),h=e.indexOf(Vs);l=Kt,(u>-1&&h>-1&&h<u||u===-1&&h>-1)&&(l=Vs)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return e;if(n==="imageSmoothing")return e==="optimizeQuality";a=r?e.map(Co):Co(e,s)}}else l="";return!r&&isNaN(a)?l:a}function CL(n,e){const t=n.match(b6);if(!t)return;const s=t[1],r=t[3],a=t[4],l=t[5],u=t[6];s&&(e.fontStyle=s),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),a&&(e.fontSize=Co(a)),u&&(e.fontFamily=u),l&&(e.lineHeight=l==="normal"?1:l)}function jL(n,e){n.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[s,r]=t.split(":");e[s.trim().toLowerCase()]=r.trim()})}function TL(n){const e={},t=n.getAttribute("style");return t&&(typeof t=="string"?jL(t,e):function(s,r){Object.entries(s).forEach(a=>{let[l,u]=a;u!==void 0&&(r[l.toLowerCase()]=u)})}(t,e)),e}const EL={stroke:"strokeOpacity",fill:"fillOpacity"};function zr(n,e,t){if(!n)return{};let s,r={},a=P0;n.parentNode&&o2.test(n.parentNode.nodeName)&&(r=zr(n.parentElement,e,t),r.fontSize&&(s=a=Co(r.fontSize)));const l=I(I(I({},e.reduce((f,g)=>{const x=n.getAttribute(g);return x&&(f[g]=x),f},{})),function(f){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x={};for(const v in g)lL(f,v.split(" "))&&(x=I(I({},x),g[v]));return x}(n,t)),TL(n));l[Dg]&&n.setAttribute(Dg,l[Dg]),l[Ng]&&(s=Co(l[Ng],a),l[Ng]="".concat(s));const u={};for(const f in l){const g=cL(f),x=SL(g,l[f],r,s);u[g]=x}u&&u.font&&CL(u.font,u);const h=I(I({},r),u);return o2.test(n.nodeName)?h:function(f){const g=js.getDefaults();return Object.entries(EL).forEach(x=>{let[v,b]=x;if(f[b]===void 0||f[v]==="")return;if(f[v]===void 0){if(!g[v])return;f[v]=g[v]}if(f[v].indexOf("url(")===0)return;const w=new dt(f[v]);f[v]=w.setAlpha(yt(w.getAlpha()*f[b],2)).toRgba()}),f}(h)}const kL=["left","top","width","height","visible"],ej=["rx","ry"];class qn extends js{static getDefaults(){return I(I({},super.getDefaults()),qn.ownDefaults)}constructor(e){super(),Object.assign(this,qn.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:s}=this,r=-t/2,a=-s/2,l=this.rx?Math.min(this.rx,t/2):0,u=this.ry?Math.min(this.ry,s/2):0,h=l!==0||u!==0;e.beginPath(),e.moveTo(r+l,a),e.lineTo(r+t-l,a),h&&e.bezierCurveTo(r+t-hi*l,a,r+t,a+hi*u,r+t,a+u),e.lineTo(r+t,a+s-u),h&&e.bezierCurveTo(r+t,a+s-hi*u,r+t-hi*l,a+s,r+t-l,a+s),e.lineTo(r+l,a+s),h&&e.bezierCurveTo(r+hi*l,a+s,r,a+s-hi*u,r,a+s-u),e.lineTo(r,a+u),h&&e.bezierCurveTo(r,a+hi*u,r+hi*l,a,r+l,a),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...ej,...e])}_toSVG(){const{width:e,height:t,rx:s,ry:r}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(s,'" ry="').concat(r,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,s){const r=zr(e,this.ATTRIBUTE_NAMES,s),{left:a=0,top:l=0,width:u=0,height:h=0,visible:f=!0}=r,g=St(r,kL);return new this(I(I(I({},t),g),{},{left:a,top:l,width:u,height:h,visible:!!(f&&u&&h)}))}}z(qn,"type","Rect"),z(qn,"cacheProperties",[...Ur,...ej]),z(qn,"ownDefaults",{rx:0,ry:0}),z(qn,"ATTRIBUTE_NAMES",[...Ai,"x","y","rx","ry","width","height"]),Ae.setClass(qn),Ae.setSVGClass(qn);const Tr="initialization",xh="added",Q0="removed",vh="imperative",tj=(n,e)=>{const{strokeUniform:t,strokeWidth:s,width:r,height:a,group:l}=e,u=l&&l!==n?Mh(l.calcTransformMatrix(),n.calcTransformMatrix()):null,h=u?e.getRelativeCenterPoint().transform(u):e.getRelativeCenterPoint(),f=!e.isStrokeAccountedForInDimensions(),g=t&&f?f6(new ee(s,s),void 0,n.calcTransformMatrix()):F0,x=!t&&f?s:0,v=I0(r+x,a+x,U0([u,e.calcOwnMatrix()],!0)).add(g).scalarDivide(2);return[h.subtract(v),h.add(v)]};class Lh{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:s,strategy:r}=e;return t===Tr||t===vh||!!s&&r!==s}shouldLayoutClipPath(e){let{type:t,target:{clipPath:s}}=e;return t!==Tr&&s&&!s.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:s,target:r}=t;if(s===vh&&t.overrides)return t.overrides;if(e.length===0)return;const{left:a,top:l,width:u,height:h}=Ar(e.map(x=>tj(r,x)).reduce((x,v)=>x.concat(v),[])),f=new ee(u,h),g=new ee(a,l).add(f.scalarDivide(2));if(s===Tr){const x=this.getInitialSize(t,{size:f,center:g});return{center:g,relativeCorrection:new ee(0,0),size:x}}return{center:g.transform(r.calcOwnMatrix()),size:f}}}z(Lh,"type","strategy");class Np extends Lh{shouldPerformLayout(e){return!0}}z(Np,"type","fit-content"),Ae.setClass(Np);const AL=["strategy"],NL=["target","strategy","bubbles","prevStrategy"],sj="layoutManager";class Ec{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Np;z(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=I(I({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const s=this.getLayoutResult(t);s&&this.commitLayout(t,s),this.onAfterLayout(t,s),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:s}=t;return[dh,yC,_c,bC,Ah,wC,uh,JP,e6].map(r=>e.on(r,a=>this.performLayout(r===dh?{type:"object_modified",trigger:r,e:a,target:s}:{type:"object_modifying",trigger:r,e:a,target:s})))}subscribe(e,t){this.unsubscribe(e,t);const s=this.attachHandlers(e,t);this._subscriptions.set(e,s)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(s=>s()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:s}=e,{canvas:r}=t;if(s===Tr||s===xh?this.subscribeTargets(e):s===Q0&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),r&&r.fire("object:layout:before",{target:t,context:e}),s===vh&&e.deep){const a=St(e,AL);t.forEachObject(l=>l.layoutManager&&l.layoutManager.performLayout(I(I({},a),{},{bubbles:!1,target:l})))}}getLayoutResult(e){const{target:t,strategy:s,type:r}=e,a=s.calcLayoutResult(e,t.getObjects());if(!a)return;const l=r===Tr?new ee:t.getRelativeCenterPoint(),{center:u,correction:h=new ee,relativeCorrection:f=new ee}=a,g=l.subtract(u).add(h).transform(r===Tr?As:Mn(t.calcOwnMatrix()),!0).add(f);return{result:a,prevCenter:l,nextCenter:u,offset:g}}commitLayout(e,t){const{target:s}=e,{result:{size:r},nextCenter:a}=t;var l,u;s.set({width:r.x,height:r.y}),this.layoutObjects(e,t),e.type===Tr?s.set({left:(l=e.x)!==null&&l!==void 0?l:a.x+r.x*$t(s.originX),top:(u=e.y)!==null&&u!==void 0?u:a.y+r.y*$t(s.originY)}):(s.setPositionByOrigin(a,Xe,Xe),s.setCoords(),s.set("dirty",!0))}layoutObjects(e,t){const{target:s}=e;s.forEachObject(r=>{r.group===s&&this.layoutObject(e,t,r)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,s.clipPath)}layoutObject(e,t,s){let{offset:r}=t;s.set({left:s.left+r.x,top:s.top+r.y})}onAfterLayout(e,t){const{target:s,strategy:r,bubbles:a,prevStrategy:l}=e,u=St(e,NL),{canvas:h}=s;s.fire("layout:after",{context:e,result:t}),h&&h.fire("object:layout:after",{context:e,result:t,target:s});const f=s.parent;a&&f!=null&&f.layoutManager&&((u.path||(u.path=[])).push(s),f.layoutManager.performLayout(I(I({},u),{},{target:f}))),s.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(s=>s())),e.clear()}toObject(){return{type:sj,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}Ae.setClass(Ec,sj);const DL=["type","objects","layoutManager"];class OL extends Ec{performLayout(){}}class da extends _C(js){static getDefaults(){return I(I({},super.getDefaults()),da.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),z(this,"_activeObjects",[]),z(this,"__objectSelectionTracker",void 0),z(this,"__objectSelectionDisposer",void 0),Object.assign(this,da.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var s;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(r=>{this.enterGroup(r,!1)}),this.layoutManager=(s=t.layoutManager)!==null&&s!==void 0?s:new Ec,this.layoutManager.performLayout({type:Tr,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(_i("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(_i("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,s,r)=>this.canEnterGroup(t)&&r.indexOf(t)===s)}add(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const r=this._filterObjectsBeforeEnteringGroup(t),a=super.add(...r);return this._onAfterObjectsChange(xh,r),a}insertAt(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];const a=this._filterObjectsBeforeEnteringGroup(s),l=super.insertAt(e,...a);return this._onAfterObjectsChange(xh,a),l}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(Q0,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const s=this[e];return super._set(e,t),e==="canvas"&&s!==t&&(this._objects||[]).forEach(r=>{r._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:s}=t;const r=this._activeObjects;if(e)r.push(s),this._set("dirty",!0);else if(r.length>0){const a=r.indexOf(s);a>-1&&(r.splice(a,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&mh(e,xs(Mn(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const s=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();s&&(s===e||e.isDescendantOf(s))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(mh(e,xs(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const s=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;s>-1&&this._activeObjects.splice(s,1)}shouldCache(){const e=js.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,s){this._renderBackground(e);for(let a=0;a<this._objects.length;a++){var r;const l=this._objects[a];(r=this.canvas)!==null&&r!==void 0&&r.preserveObjectStacking&&l.group!==this?(e.save(),e.transform(...Mn(this.calcTransformMatrix())),l.render(e),e.restore()):l.group===this&&l.render(e)}this._drawClipPath(e,this.clipPath,s)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(I({target:this,type:vh},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const s=this.includeDefaultValues;return this._objects.filter(function(r){return!r.excludeFromExport}).map(function(r){const a=r.includeDefaultValues;r.includeDefaultValues=s;const l=r[e||"toObject"](t);return r.includeDefaultValues=a,l})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return I(I(I({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=qn.prototype._toSVG.call(this),s=t.indexOf("COMMON_PARTS");t[s]='for="group" ';const r=t.join("");return e?e(r):r}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],s=this._createSVGBgRect(e);s&&t.push("		",s);for(let r=0;r<this._objects.length;r++)t.push("		",this._objects[r].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],s=this._createSVGBgRect(e);s&&t.push("	",s);for(let r=0;r<this._objects.length;r++)t.push("	",this._objects[r].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:s,objects:r=[],layoutManager:a}=e,l=St(e,DL);return Promise.all([Sc(r,t),Oh(l,t)]).then(u=>{let[h,f]=u;const g=new this(h,I(I(I({},l),f),{},{layoutManager:new OL}));if(a){const x=Ae.getClass(a.type),v=Ae.getClass(a.strategy);g.layoutManager=new x(new v)}else g.layoutManager=new Ec;return g.layoutManager.subscribeTargets({type:Tr,target:g,targets:g.getObjects()}),g.setCoords(),g})}}z(da,"type","Group"),z(da,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),Ae.setClass(da);const ML=(n,e)=>Math.min(e.width/n.width,e.height/n.height),RL=(n,e)=>Math.max(e.width/n.width,e.height/n.height),Dp="\\s*,?\\s*",Yl="".concat(Dp,"(").concat(Rn,")"),PL="".concat(Yl).concat(Yl).concat(Yl).concat(Dp,"([01])").concat(Dp,"([01])").concat(Yl).concat(Yl),LL={m:"l",M:"L"},BL=(n,e,t,s,r,a,l,u,h,f,g)=>{const x=Pr(n),v=Lr(n),b=Pr(e),w=Lr(e),_=t*r*b-s*a*w+l,T=s*r*b+t*a*w+u;return["C",f+h*(-t*r*v-s*a*x),g+h*(-s*r*v+t*a*x),_+h*(t*r*w+s*a*b),T+h*(s*r*w-t*a*b),_,T]},S2=(n,e,t,s)=>{const r=Math.atan2(e,n),a=Math.atan2(s,t);return a>=r?a-r:2*Math.PI-(r-a)};function C2(n,e,t,s,r,a,l,u){let h;if(st.cachesBoundsOfCurve&&(h=[...arguments].join(),cc.boundsOfCurveCache[h]))return cc.boundsOfCurveCache[h];const f=Math.sqrt,g=Math.abs,x=[],v=[[0,0],[0,0]];let b=6*n-12*t+6*r,w=-3*n+9*t-9*r+3*l,_=3*t-3*n;for(let M=0;M<2;++M){if(M>0&&(b=6*e-12*s+6*a,w=-3*e+9*s-9*a+3*u,_=3*s-3*e),g(w)<1e-12){if(g(b)<1e-12)continue;const V=-_/b;0<V&&V<1&&x.push(V);continue}const D=b*b-4*_*w;if(D<0)continue;const B=f(D),F=(-b+B)/(2*w);0<F&&F<1&&x.push(F);const L=(-b-B)/(2*w);0<L&&L<1&&x.push(L)}let T=x.length;const S=T,A=nj(n,e,t,s,r,a,l,u);for(;T--;){const{x:M,y:D}=A(x[T]);v[0][T]=M,v[1][T]=D}v[0][S]=n,v[1][S]=e,v[0][S+1]=l,v[1][S+1]=u;const E=[new ee(Math.min(...v[0]),Math.min(...v[1])),new ee(Math.max(...v[0]),Math.max(...v[1]))];return st.cachesBoundsOfCurve&&(cc.boundsOfCurveCache[h]=E),E}const FL=(n,e,t)=>{let[s,r,a,l,u,h,f,g]=t;const x=((v,b,w,_,T,S,A)=>{if(w===0||_===0)return[];let E=0,M=0,D=0;const B=Math.PI,F=A*R0,L=Lr(F),V=Pr(F),N=.5*(-V*v-L*b),H=.5*(-V*b+L*v),Y=w**2,se=_**2,te=H**2,ne=N**2,R=Y*se-Y*te-se*ne;let $=Math.abs(w),Q=Math.abs(_);if(R<0){const oe=Math.sqrt(1-R/(Y*se));$*=oe,Q*=oe}else D=(T===S?-1:1)*Math.sqrt(R/(Y*te+se*ne));const pe=D*$*H/Q,O=-D*Q*N/$,q=V*pe-L*O+.5*v,fe=L*pe+V*O+.5*b;let me=S2(1,0,(N-pe)/$,(H-O)/Q),_e=S2((N-pe)/$,(H-O)/Q,(-N-pe)/$,(-H-O)/Q);S===0&&_e>0?_e-=2*B:S===1&&_e<0&&(_e+=2*B);const re=Math.ceil(Math.abs(_e/B*2)),xe=[],de=_e/re,je=8/3*Math.sin(de/4)*Math.sin(de/4)/Math.sin(de/2);let Oe=me+de;for(let oe=0;oe<re;oe++)xe[oe]=BL(me,Oe,V,L,$,Q,q,fe,je,E,M),E=xe[oe][5],M=xe[oe][6],me=Oe,Oe+=de;return xe})(f-n,g-e,r,a,u,h,l);for(let v=0,b=x.length;v<b;v++)x[v][1]+=n,x[v][2]+=e,x[v][3]+=n,x[v][4]+=e,x[v][5]+=n,x[v][6]+=e;return x},UL=n=>{let e=0,t=0,s=0,r=0;const a=[];let l,u=0,h=0;for(const f of n){const g=[...f];let x;switch(g[0]){case"l":g[1]+=e,g[2]+=t;case"L":e=g[1],t=g[2],x=["L",e,t];break;case"h":g[1]+=e;case"H":e=g[1],x=["L",e,t];break;case"v":g[1]+=t;case"V":t=g[1],x=["L",e,t];break;case"m":g[1]+=e,g[2]+=t;case"M":e=g[1],t=g[2],s=g[1],r=g[2],x=["M",e,t];break;case"c":g[1]+=e,g[2]+=t,g[3]+=e,g[4]+=t,g[5]+=e,g[6]+=t;case"C":u=g[3],h=g[4],e=g[5],t=g[6],x=["C",g[1],g[2],u,h,e,t];break;case"s":g[1]+=e,g[2]+=t,g[3]+=e,g[4]+=t;case"S":l==="C"?(u=2*e-u,h=2*t-h):(u=e,h=t),e=g[3],t=g[4],x=["C",u,h,g[1],g[2],e,t],u=x[3],h=x[4];break;case"q":g[1]+=e,g[2]+=t,g[3]+=e,g[4]+=t;case"Q":u=g[1],h=g[2],e=g[3],t=g[4],x=["Q",u,h,e,t];break;case"t":g[1]+=e,g[2]+=t;case"T":l==="Q"?(u=2*e-u,h=2*t-h):(u=e,h=t),e=g[1],t=g[2],x=["Q",u,h,e,t];break;case"a":g[6]+=e,g[7]+=t;case"A":FL(e,t,g).forEach(v=>a.push(v)),e=g[6],t=g[7];break;case"z":case"Z":e=s,t=r,x=["Z"]}x?(a.push(x),l=x[0]):l=""}return a},yh=(n,e,t,s)=>Math.sqrt((t-n)**2+(s-e)**2),nj=(n,e,t,s,r,a,l,u)=>h=>{const f=h**3,g=(b=>3*b**2*(1-b))(h),x=(b=>3*b*(1-b)**2)(h),v=(b=>(1-b)**3)(h);return new ee(l*f+r*g+t*x+n*v,u*f+a*g+s*x+e*v)},rj=n=>n**2,ij=n=>2*n*(1-n),aj=n=>(1-n)**2,zL=(n,e,t,s,r,a,l,u)=>h=>{const f=rj(h),g=ij(h),x=aj(h),v=3*(x*(t-n)+g*(r-t)+f*(l-r)),b=3*(x*(s-e)+g*(a-s)+f*(u-a));return Math.atan2(b,v)},VL=(n,e,t,s,r,a)=>l=>{const u=rj(l),h=ij(l),f=aj(l);return new ee(r*u+t*h+n*f,a*u+s*h+e*f)},IL=(n,e,t,s,r,a)=>l=>{const u=1-l,h=2*(u*(t-n)+l*(r-t)),f=2*(u*(s-e)+l*(a-s));return Math.atan2(f,h)},j2=(n,e,t)=>{let s=new ee(e,t),r=0;for(let a=1;a<=100;a+=1){const l=n(a/100);r+=yh(s.x,s.y,l.x,l.y),s=l}return r},HL=(n,e)=>{let t,s=0,r=0,a={x:n.x,y:n.y},l=I({},a),u=.01,h=0;const f=n.iterator,g=n.angleFinder;for(;r<e&&u>1e-4;)l=f(s),h=s,t=yh(a.x,a.y,l.x,l.y),t+r>e?(s-=u,u/=2):(a=l,s+=u,r+=t);return I(I({},l),{},{angle:g(h)})},oj=n=>{let e,t,s=0,r=0,a=0,l=0,u=0;const h=[];for(const f of n){const g={x:r,y:a,command:f[0],length:0};switch(f[0]){case"M":t=g,t.x=l=r=f[1],t.y=u=a=f[2];break;case"L":t=g,t.length=yh(r,a,f[1],f[2]),r=f[1],a=f[2];break;case"C":e=nj(r,a,f[1],f[2],f[3],f[4],f[5],f[6]),t=g,t.iterator=e,t.angleFinder=zL(r,a,f[1],f[2],f[3],f[4],f[5],f[6]),t.length=j2(e,r,a),r=f[5],a=f[6];break;case"Q":e=VL(r,a,f[1],f[2],f[3],f[4]),t=g,t.iterator=e,t.angleFinder=IL(r,a,f[1],f[2],f[3],f[4]),t.length=j2(e,r,a),r=f[3],a=f[4];break;case"Z":t=g,t.destX=l,t.destY=u,t.length=yh(r,a,l,u),r=l,a=u}s+=t.length,h.push(t)}return h.push({length:s,x:r,y:a}),h},$L=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oj(n),s=0;for(;e-t[s].length>0&&s<t.length-2;)e-=t[s].length,s++;const r=t[s],a=e/r.length,l=n[s];switch(r.command){case"M":return{x:r.x,y:r.y,angle:0};case"Z":return I(I({},new ee(r.x,r.y).lerp(new ee(r.destX,r.destY),a)),{},{angle:Math.atan2(r.destY-r.y,r.destX-r.x)});case"L":return I(I({},new ee(r.x,r.y).lerp(new ee(l[1],l[2]),a)),{},{angle:Math.atan2(l[2]-r.y,l[1]-r.x)});case"C":case"Q":return HL(r,e)}},GL=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),T2=new RegExp(PL,"g"),YL=new RegExp(Rn,"gi"),qL={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},WL=n=>{var e;const t=[],s=(e=n.match(GL))!==null&&e!==void 0?e:[];for(const r of s){const a=r[0];if(a==="z"||a==="Z"){t.push([a]);continue}const l=qL[a.toLowerCase()];let u=[];if(a==="a"||a==="A"){T2.lastIndex=0;for(let h=null;h=T2.exec(r);)u.push(...h.slice(1))}else u=r.match(YL)||[];for(let h=0;h<u.length;h+=l){const f=new Array(l),g=LL[a];f[0]=h>0&&g?g:a;for(let x=0;x<l;x++)f[x+1]=parseFloat(u[h+x]);t.push(f)}}return t},XL=(n,e)=>n.map(t=>t.map((s,r)=>r===0||e===void 0?s:yt(s,e)).join(" ")).join(" ");function Op(n,e){const t=n.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(s=>{let[r,a]=s;return t.setProperty(r,a)}))}class KL extends MC{constructor(e){let{allowTouchScrolling:t=!1,containerClass:s=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),z(this,"upper",void 0),z(this,"container",void 0);const{el:r}=this.lower,a=this.createUpperCanvas();this.upper={el:a,ctx:a.getContext("2d")},this.applyCanvasStyle(r,{allowTouchScrolling:t}),this.applyCanvasStyle(a,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const l=this.createContainerElement();l.classList.add(s),r.parentNode&&r.parentNode.replaceChild(l,r),l.append(r,a),this.container=l}createUpperCanvas(){const{el:e}=this.lower,t=Br();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Fo().createElement("div");return e.setAttribute("data-fabric","wrapper"),Op(e,{position:"relative"}),Q1(e),e}applyCanvasStyle(e,t){const{styles:s,allowTouchScrolling:r}=t;Op(e,I(I({},s),{},{"touch-action":r?"manipulation":zs})),Q1(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:s,ctx:r}=this.upper;OC(s,r,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),Cp(this.upper.el,e),Cp(this.container,e)}cleanupDOM(e){const t=this.container,{el:s}=this.lower,{el:r}=this.upper;super.cleanupDOM(e),t.removeChild(r),t.removeChild(s),t.parentNode&&t.parentNode.replaceChild(s,t)}dispose(){super.dispose(),er().dispose(this.upper.el),delete this.upper,delete this.container}}class Bh extends zc{constructor(){super(...arguments),z(this,"targets",[]),z(this,"_hoveredTargets",[]),z(this,"_objectsToRender",void 0),z(this,"_currentTransform",null),z(this,"_groupSelector",null),z(this,"contextTopDirty",!1)}static getDefaults(){return I(I({},super.getDefaults()),Bh.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new KL(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),s=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=s,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,s){const r=this.targetFindTolerance,a=this.pixelFindContext;this.clearContext(a),a.save(),a.translate(-t+r,-s+r),a.transform(...this.viewportTransform);const l=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(a),e.selectionBackgroundColor=l,a.restore();const u=Math.round(r*this.getRetinaScaling());return eL(a,u,u,u)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(s=>!!s&&e[s]===!0):e[t])}_shouldClearSelection(e,t){const s=this.getActiveObjects(),r=this._activeObject;return!!(!t||t&&r&&s.length>1&&s.indexOf(t)===-1&&r!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&r&&r!==t)}_shouldCenterTransform(e,t,s){if(!e)return;let r;return t===Nh||t===Is||t===vn||t===_c?r=this.centeredScaling||e.centeredScaling:t===B0&&(r=this.centeredRotation||e.centeredRotation),r?!s:s}_getOriginFromCorner(e,t){const s={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?s.x=Lt:["mr","tr","br"].includes(t)&&(s.x=lt),["tl","mt","tr"].includes(t)?s.y=Sp:["bl","mb","br"].includes(t)&&(s.y=Us)),s}_setupCurrentTransform(e,t,s){var r;const a=t.group?So(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:l="",control:u}=t.getActiveControl()||{},h=s&&u?(r=u.getActionHandler(e,t,u))===null||r===void 0?void 0:r.bind(u):p6,f=((b,w,_,T)=>{if(!w||!b)return"drag";const S=T.controls[w];return S.getActionName(_,S,T)})(s,l,e,t),g=e[this.centeredKey],x=this._shouldCenterTransform(t,f,g)?{x:Xe,y:Xe}:this._getOriginFromCorner(t,l),v={target:t,action:f,actionHandler:h,actionPerformed:!1,corner:l,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:a.x-t.left,offsetY:a.y-t.top,originX:x.x,originY:x.y,ex:a.x,ey:a.y,lastX:a.x,lastY:a.y,theta:Bt(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:g,original:I(I({},RC(t)),{},{originX:x.x,originY:x.y})};this._currentTransform=v,this.fire("before:transform",{e,transform:v})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:s,deltaX:r,deltaY:a}=this._groupSelector,l=new ee(t,s).transform(this.viewportTransform),u=new ee(t+r,s+a).transform(this.viewportTransform),h=this.selectionLineWidth/2;let f=Math.min(l.x,u.x),g=Math.min(l.y,u.y),x=Math.max(l.x,u.x),v=Math.max(l.y,u.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(f,g,x-f,v-g)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,f+=h,g+=h,x-=h,v-=h,js.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(f,g,x-f,v-g))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),s=this._activeObject,r=this.getActiveObjects();if(this.targets=[],s&&r.length>=1){if(s.findControl(t,jp(e))||r.length>1&&this.searchPossibleTargets([s],t))return s;if(s===this.searchPossibleTargets([s],t)){if(this.preserveObjectStacking){const a=this.targets;this.targets=[];const l=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&l&&l!==s?(this.targets=a,s):l}return s}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let s=e.getCoords();const r=this.getZoom(),a=e.padding/r;if(a){const[l,u,h,f]=s,g=Math.atan2(u.y-l.y,u.x-l.x),x=Pr(g)*a,v=Lr(g)*a,b=x+v,w=x-v;s=[new ee(l.x-w,l.y-b),new ee(u.x+b,u.y-w),new ee(h.x+w,h.y+b),new ee(f.x-b,f.y+w)]}return Tt.isPointInPolygon(t,s)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,So(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let s=e.length;for(;s--;){const r=e[s];if(this._checkTarget(r,t)){if(Yd(r)&&r.subTargetCheck){const a=this._searchPossibleTargets(r._objects,t);a&&this.targets.push(a)}return r}}}searchPossibleTargets(e,t){const s=this._searchPossibleTargets(e,t);if(s&&Yd(s)&&s.interactive&&this.targets[0]){const r=this.targets;for(let a=r.length-1;a>0;a--){const l=r[a];if(!Yd(l)||!l.interactive)return l}return r[0]}return s}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const s=this.upperCanvasEl,r=s.getBoundingClientRect();let a=c6(e),l=r.width||0,u=r.height||0;l&&u||(Us in r&&Sp in r&&(u=Math.abs(r.top-r.bottom)),Lt in r&&lt in r&&(l=Math.abs(r.right-r.left))),this.calcOffset(),a.x=a.x-this._offset.left,a.y=a.y-this._offset.top,t||(a=So(a,void 0,this.viewportTransform));const h=this.getRetinaScaling();h!==1&&(a.x/=h,a.y/=h);const f=l===0||u===0?new ee(1,1):new ee(s.width/l,s.height/u);return a.multiply(f)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Br(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return ea(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let s=!1,r=!1;const a=this.getActiveObjects(),l=[],u=[];e.forEach(h=>{a.includes(h)||(s=!0,h.fire("deselected",{e:t,target:h}),u.push(h))}),a.forEach(h=>{e.includes(h)||(s=!0,h.fire("selected",{e:t,target:h}),l.push(h))}),e.length>0&&a.length>0?(r=!0,s&&this.fire("selection:updated",{e:t,selected:l,deselected:u})):a.length>0?(r=!0,this.fire("selection:created",{e:t,selected:l})):e.length>0&&(r=!0,this.fire("selection:cleared",{e:t,deselected:u})),r&&(this._objectsToRender=void 0)}setActiveObject(e,t){const s=this.getActiveObjects(),r=this._setActiveObject(e,t);return this._fireSelectionEvents(s,t),r}_setActiveObject(e,t){const s=this._activeObject;return s!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,ea(e)&&s!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const s=this._activeObject;return!!s&&!s.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===s&&this.endCurrentTransform(e),ea(s)&&s===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),s=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[s]});const r=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),r}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,s=t.target,r={e,target:s,transform:t,action:t.action};s._scaling&&(s._scaling=!1),s.setCoords(),t.actionPerformed&&(this.fire("object:modified",r),s.fire(dh,r))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;ea(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,s){const r=this._realizeGroupTransformOnObject(e),a=super._toObject(e,t,s);return e.set(r),a}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&ea(t)&&this._activeObject===t){const s=Io(e,["angle","flipX","flipY",lt,Is,vn,Uo,zo,Us]);return d6(e,t.calcOwnMatrix()),s}return{}}_setSVGObject(e,t,s){const r=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,s),t.set(r)}}z(Bh,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class QL{constructor(e){z(this,"targets",[]),z(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:r}=e.getActiveObject()||{};r&&r.focus()},s=e.upperCanvasEl;s.addEventListener("click",t),this.__disposer=()=>s.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),fo(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const ZL=["target","oldTarget","fireCanvas","e"],Js={passive:!1},uo=(n,e)=>{const t=n.getViewportPoint(e),s=n.getScenePoint(e);return{viewportPoint:t,scenePoint:s,pointer:t,absolutePointer:s}},fi=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];return n.addEventListener(...t)},mn=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];return n.removeEventListener(...t)},JL={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class Mp extends Bh{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),z(this,"_isClick",void 0),z(this,"textEditingManager",new QL(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(fi,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const s=this.upperCanvasEl,r=this._getEventPrefix();e(DC(s),"resize",this._onResize),e(s,r+"down",this._onMouseDown),e(s,"".concat(r,"move"),this._onMouseMove,Js),e(s,"".concat(r,"out"),this._onMouseOut),e(s,"".concat(r,"enter"),this._onMouseEnter),e(s,"wheel",this._onMouseWheel),e(s,"contextmenu",this._onContextMenu),e(s,"click",this._onClick),e(s,"dblclick",this._onClick),e(s,"dragstart",this._onDragStart),e(s,"dragend",this._onDragEnd),e(s,"dragover",this._onDragOver),e(s,"dragenter",this._onDragEnter),e(s,"dragleave",this._onDragLeave),e(s,"drop",this._onDrop),this.enablePointerEvents||e(s,"touchstart",this._onTouchStart,Js)}removeListeners(){this.addOrRemove(mn,"remove");const e=this._getEventPrefix(),t=On(this.upperCanvasEl);mn(t,"".concat(e,"up"),this._onMouseUp),mn(t,"touchend",this._onTouchEnd,Js),mn(t,"".concat(e,"move"),this._onMouseMove,Js),mn(t,"touchmove",this._onMouseMove,Js),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,s=I({e},uo(this,e));this.fire("mouse:out",I(I({},s),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",I({},s)),this._hoveredTargets.forEach(r=>{this.fire("mouse:out",I(I({},s),{},{target:r})),r&&r.fire("mouseout",I({},s))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",I({e},uo(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const s={e,target:t};return this.fire("dragstart",s),t.fire("dragstart",s),void fi(this.upperCanvasEl,"drag",this._onDragProgress)}Z1(e)}_renderDragEffects(e,t,s){let r=!1;const a=this._dropTarget;a&&a!==t&&a!==s&&(a.clearContextTop(),r=!0),t?.clearContextTop(),s!==t&&s?.clearContextTop();const l=this.contextTop;l.save(),l.transform(...this.viewportTransform),t&&(l.save(),t.transform(l),t.renderDragSourceEffect(e),l.restore(),r=!0),s&&(l.save(),s.transform(l),s.renderDropTargetEffect(e),l.restore(),r=!0),l.restore(),r&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==zs,s=t?this._activeObject:void 0,r={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:s};mn(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",r),this._dragSource&&this._dragSource.fire("dragend",r),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:s,targets:r}=this.findDragTargets(e),a=this._dragSource,l={e,target:s,subTargets:r,dragSource:a,canDrop:!1,dropTarget:void 0};let u;this.fire(t,l),this._fireEnterLeaveEvents(s,l),s&&(s.canDrop(e)&&(u=s),s.fire(t,l));for(let h=0;h<r.length;h++){const f=r[h];f.canDrop(e)&&(u=f),f.fire(t,l)}this._renderDragEffects(e,a,u),this._dropTarget=u}_onDragEnter(e){const{target:t,targets:s}=this.findDragTargets(e),r={e,target:t,subTargets:s,dragSource:this._dragSource};this.fire("dragenter",r),this._fireEnterLeaveEvents(t,r)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:s}=this.findDragTargets(e),r=this._basicEventHandler("drop:before",I({e,target:t,subTargets:s,dragSource:this._dragSource},uo(this,e)));r.didDrop=!1,r.dropTarget=void 0,this._basicEventHandler("drop",r),this.fire("drop:after",r)}_onContextMenu(e){const t=this.findTarget(e),s=this.targets||[],r=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:s});return this.stopContextMenu&&Z1(e),this._basicEventHandler("contextmenu",r),!1}_onClick(e){const t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),t==2&&e.type==="dblclick"&&this._handleEvent(e,"dblclick"),t==3&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const s=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||s&&this._target===s)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const r=this.upperCanvasEl,a=this._getEventPrefix(),l=On(r);fi(l,"touchend",this._onTouchEnd,Js),t&&fi(l,"touchmove",this._onMouseMove,Js),mn(r,"".concat(a,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,s=this._getEventPrefix();mn(t,"".concat(s,"move"),this._onMouseMove,Js);const r=On(t);fi(r,"".concat(s,"up"),this._onMouseUp),fi(r,"".concat(s,"move"),this._onMouseMove,Js)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),s=On(this.upperCanvasEl);mn(s,"touchend",this._onTouchEnd,Js),mn(s,"touchmove",this._onMouseMove,Js),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{fi(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,s=this._getEventPrefix();if(this._isMainEvent(e)){const r=On(this.upperCanvasEl);mn(r,"".concat(s,"up"),this._onMouseUp),mn(r,"".concat(s,"move"),this._onMouseMove,Js),fi(t,"".concat(s,"move"),this._onMouseMove,Js)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const s=this._currentTransform,r=this._isClick,a=this._target,{button:l}=e;if(l)return(this.fireMiddleClick&&l===1||this.fireRightClick&&l===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let u,h,f=!1;if(s&&(this._finalizeCurrentTransform(e),f=s.actionPerformed),!r){const g=a===this._activeObject;this.handleSelection(e),f||(f=this._shouldRender(a)||!g&&a===this._activeObject)}if(a){const g=a.findControl(this.getViewportPoint(e),jp(e)),{key:x,control:v}=g||{};if(h=x,a.selectable&&a!==this._activeObject&&a.activeOn==="up")this.setActiveObject(a,e),f=!0;else if(v){const b=v.getMouseUpHandler(e,a,v);b&&(u=this.getScenePoint(e),b.call(v,e,s,u.x,u.y))}a.isMoving=!1}if(s&&(s.target!==a||s.corner!==h)){const g=s.target&&s.target.controls[s.corner],x=g&&g.getMouseUpHandler(e,s.target,g);u=u||this.getScenePoint(e),x&&x.call(g,e,s,u.x,u.y)}this._setCursorFromEvent(e,a),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,a&&(a.__corner=void 0),f?this.requestRenderAll():r||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:s,subTargets:r=[]}=t;this.fire(e,t),s&&s.fire(e,t);for(let a=0;a<r.length;a++)r[a]!==s&&r[a].fire(e,t);return t}_handleEvent(e,t,s){const r=this._target,a=this.targets||[],l=I(I(I({e,target:r,subTargets:a},uo(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),t==="down:before"||t==="down"?s:{});this.fire("mouse:".concat(t),l),r&&r.fire("mouse".concat(t),l);for(let u=0;u<a.length;u++)a[u]!==r&&a[u].fire("mouse".concat(t),l)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target,s=!!t&&t===this._activeObject;const{button:r}=e;if(r)return(this.fireMiddleClick&&r===1||this.fireRightClick&&r===2)&&this._handleEvent(e,"down",{alreadySelected:s}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let a=this._shouldRender(t),l=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,l=!0,a=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const u=this.getScenePoint(e);this._groupSelector={x:u.x,y:u.y,deltaY:0,deltaX:0}}if(s=!!t&&t===this._activeObject,t){t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const u=t.findControl(this.getViewportPoint(e),jp(e));if(t===this._activeObject&&(u||!l)){this._setupCurrentTransform(e,t,s);const h=u?u.control:void 0,f=this.getScenePoint(e),g=h&&h.getMouseDownHandler(e,t,h);g&&g.call(h,e,this._currentTransform,f.x,f.y)}}a&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:s}),a&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=So(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const s=this.getScenePoint(e);t.deltaX=s.x-t.x,t.deltaY=s.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const s=this.findTarget(e);this._setCursorFromEvent(e,s),this._fireOverOutEvents(e,s)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const s=this._hoveredTarget,r=this._hoveredTargets,a=this.targets,l=Math.max(r.length,a.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:s,fireCanvas:!0});for(let u=0;u<l;u++)this.fireSyntheticInOutEvents("mouse",{e,target:a[u],oldTarget:r[u]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const s=this._draggedoverTarget,r=this._hoveredTargets,a=this.targets,l=Math.max(r.length,a.length);this.fireSyntheticInOutEvents("drag",I(I({},t),{},{target:e,oldTarget:s,fireCanvas:!0}));for(let u=0;u<l;u++)this.fireSyntheticInOutEvents("drag",I(I({},t),{},{target:a[u],oldTarget:r[u]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:s,oldTarget:r,fireCanvas:a,e:l}=t,u=St(t,ZL);const{targetIn:h,targetOut:f,canvasIn:g,canvasOut:x}=JL[e],v=r!==s;if(r&&v){const b=I(I({},u),{},{e:l,target:r,nextTarget:s},uo(this,l));a&&this.fire(x,b),r.fire(f,b)}if(s&&v){const b=I(I({},u),{},{e:l,target:s,previousTarget:r},uo(this,l));a&&this.fire(g,b),s.fire(h,b)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),s=this._currentTransform,r=s.target,a=r.group?So(t,void 0,r.group.calcTransformMatrix()):t;s.shiftKey=e.shiftKey,s.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,s,a),s.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,s){const{action:r,actionHandler:a,target:l}=t,u=!!a&&a(e,t,s.x,s.y);u&&l.setCoords(),r==="drag"&&u&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||u}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let s=t.hoverCursor||this.hoverCursor;const r=ea(this._activeObject)?this._activeObject:null,a=(!r||t.group!==r)&&t.findControl(this.getViewportPoint(e));if(a){const l=a.control;this.setCursor(l.cursorStyleHandler(e,l,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(l=>{s=l.hoverCursor||s}),this.setCursor(s)}handleMultiSelection(e,t){const s=this._activeObject,r=ea(s);if(s&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(s!==t||r)&&(r||!t.isDescendantOf(s)&&!s.isDescendantOf(t))&&!t.onSelect({e})&&!s.getActiveControl()){if(r){const a=s.getObjects();if(t===s){const l=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(a,l)||this.searchPossibleTargets(this._objects,l))||!t.selectable)return!1}t.group===s?(s.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],s.size()===1&&this._setActiveObject(s.item(0),e)):(s.multiSelectAdd(t),this._hoveredTarget=s,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(a,e)}else{s.isEditing&&s.exitEditing();const a=new(Ae.getClass("ActiveSelection"))([],{canvas:this});a.multiSelectAdd(s,t),this._hoveredTarget=a,this._setActiveObject(a,e),this._fireSelectionEvents([s],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:s,deltaX:r,deltaY:a}=this._groupSelector,l=new ee(t,s),u=l.add(new ee(r,a)),h=l.min(u),f=l.max(u).subtract(h),g=this.collectObjects({left:h.x,top:h.y,width:f.x,height:f.y},{includeIntersecting:!this.selectionFullyContained}),x=l.eq(u)?g[0]?[g[0]]:[]:g.length>1?g.filter(v=>!v.onSelect({e})).reverse():g;if(x.length===1)this.setActiveObject(x[0],e);else if(x.length>1){const v=Ae.getClass("ActiveSelection");this.setActiveObject(new v(x,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const lj={x1:0,y1:0,x2:0,y2:0},e8=I(I({},lj),{},{r1:0,r2:0}),bo=(n,e)=>isNaN(n)&&typeof e=="number"?e:n,t8=/^(\d+\.\d+)%|(\d+)%$/;function cj(n){return n&&t8.test(n)}function uj(n,e){const t=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(cj(n)?100:1):NaN;return Ao(0,bo(t,e),1)}const s8=/\s*;\s*/,n8=/\s*:\s*/;function r8(n,e){let t,s;const r=n.getAttribute("style");if(r){const l=r.split(s8);l[l.length-1]===""&&l.pop();for(let u=l.length;u--;){const[h,f]=l[u].split(n8).map(g=>g.trim());h==="stop-color"?t=f:h==="stop-opacity"&&(s=f)}}const a=new dt(t||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:uj(n.getAttribute("offset"),0),color:a.toRgb(),opacity:bo(parseFloat(s||n.getAttribute("stop-opacity")||""),1)*a.getAlpha()*e}}function i8(n,e){const t=[],s=n.getElementsByTagName("stop"),r=uj(e,1);for(let a=s.length;a--;)t.push(r8(s[a],r));return t}function dj(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function hj(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Tn(n,e){return n.getAttribute(e)}function a8(n,e){return function(t,s){let r,{width:a,height:l,gradientUnits:u}=s;return Object.keys(t).reduce((h,f)=>{const g=t[f];return g==="Infinity"?r=1:g==="-Infinity"?r=0:(r=typeof g=="string"?parseFloat(g):g,typeof g=="string"&&cj(g)&&(r*=.01,u==="pixels"&&(f!=="x1"&&f!=="x2"&&f!=="r2"||(r*=a),f!=="y1"&&f!=="y2"||(r*=l)))),h[f]=r,h},{})}(dj(n)==="linear"?function(t){return{x1:Tn(t,"x1")||0,y1:Tn(t,"y1")||0,x2:Tn(t,"x2")||"100%",y2:Tn(t,"y2")||0}}(n):function(t){return{x1:Tn(t,"fx")||Tn(t,"cx")||"50%",y1:Tn(t,"fy")||Tn(t,"cy")||"50%",r1:0,x2:Tn(t,"cx")||"50%",y2:Tn(t,"cy")||"50%",r2:Tn(t,"r")||"50%"}}(n),I(I({},e),{},{gradientUnits:hj(n)}))}class gd{constructor(e){const{type:t="linear",gradientUnits:s="pixels",coords:r={},colorStops:a=[],offsetX:l=0,offsetY:u=0,gradientTransform:h,id:f}=e||{};Object.assign(this,{type:t,gradientUnits:s,coords:I(I({},t==="radial"?e8:lj),r),colorStops:a,offsetX:l,offsetY:u,gradientTransform:h,id:f?"".concat(f,"_").concat(Si()):Si()})}addColorStop(e){for(const t in e){const s=new dt(e[t]);this.colorStops.push({offset:parseFloat(t),color:s.toRgb(),opacity:s.getAlpha()})}return this}toObject(e){return I(I({},Io(this,e)),{},{type:this.type,coords:I({},this.coords),colorStops:this.colorStops.map(t=>I({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[],r=this.gradientTransform?this.gradientTransform.concat():As.concat(),a=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",l=this.colorStops.map(x=>I({},x)).sort((x,v)=>x.offset-v.offset);let u=-this.offsetX,h=-this.offsetY;var f;a==="objectBoundingBox"?(u/=e.width,h/=e.height):(u+=e.width/2,h+=e.height/2),(f=e)&&typeof f._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(u-=e.pathOffset.x,h-=e.pathOffset.y),r[4]-=u,r[5]-=h;const g=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(a,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(Cc(r),'"'),""].join(" ");if(this.type==="linear"){const{x1:x,y1:v,x2:b,y2:w}=this.coords;s.push("<linearGradient ",g,' x1="',x,'" y1="',v,'" x2="',b,'" y2="',w,`">
`)}else if(this.type==="radial"){const{x1:x,y1:v,x2:b,y2:w,r1:_,r2:T}=this.coords,S=_>T;s.push("<radialGradient ",g,' cx="',S?x:b,'" cy="',S?v:w,'" r="',S?_:T,'" fx="',S?b:x,'" fy="',S?w:v,`">
`),S&&(l.reverse(),l.forEach(E=>{E.offset=1-E.offset}));const A=Math.min(_,T);if(A>0){const E=A/Math.max(_,T);l.forEach(M=>{M.offset+=E*(1-M.offset)})}}return l.forEach(x=>{let{color:v,offset:b,opacity:w}=x;s.push("<stop ",'offset="',100*b+"%",'" style="stop-color:',v,w!==void 0?";stop-opacity: "+w:";",`"/>
`)}),s.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),s.join("")}toLive(e){const{x1:t,y1:s,x2:r,y2:a,r1:l,r2:u}=this.coords,h=this.type==="linear"?e.createLinearGradient(t,s,r,a):e.createRadialGradient(t,s,l,r,a,u);return this.colorStops.forEach(f=>{let{color:g,opacity:x,offset:v}=f;h.addColorStop(v,x!==void 0?new dt(g).setAlpha(x).toRgba():g)}),h}static async fromObject(e){const{colorStops:t,gradientTransform:s}=e;return new this(I(I({},e),{},{colorStops:t?t.map(r=>I({},r)):void 0,gradientTransform:s?[...s]:void 0}))}static fromElement(e,t,s){const r=hj(e),a=t._findCenterFromElement();return new this(I({id:e.getAttribute("id")||void 0,type:dj(e),coords:a8(e,{width:s.viewBoxWidth||s.width,height:s.viewBoxHeight||s.height}),colorStops:i8(e,s.opacity),gradientUnits:r,gradientTransform:Ap(e.getAttribute("gradientTransform")||"")},r==="pixels"?{offsetX:t.width/2-a.x,offsetY:t.height/2-a.y}:{offsetX:0,offsetY:0}))}}z(gd,"type","Gradient"),Ae.setClass(gd,"gradient"),Ae.setClass(gd,"linear"),Ae.setClass(gd,"radial");const o8=["type","source","patternTransform"];class Rg{get type(){return"pattern"}set type(e){_i("warn","Setting type has no effect",e)}constructor(e){z(this,"repeat","repeat"),z(this,"offsetX",0),z(this,"offsetY",0),z(this,"crossOrigin",""),this.id=Si(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:s}=this;return I(I({},Io(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:s,offsetX:yt(this.offsetX,st.NUM_FRACTION_DIGITS),offsetY:yt(this.offsetY,st.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:s}=e;const{source:r,repeat:a,id:l}=this,u=bo(this.offsetX/t,0),h=bo(this.offsetY/s,0),f=a==="repeat-y"||a==="no-repeat"?1+Math.abs(u||0):bo(r.width/t,0),g=a==="repeat-x"||a==="no-repeat"?1+Math.abs(h||0):bo(r.height/s,0);return['<pattern id="SVGID_'.concat(l,'" x="').concat(u,'" y="').concat(h,'" width="').concat(f,'" height="').concat(g,'">'),'<image x="0" y="0" width="'.concat(r.width,'" height="').concat(r.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:s,source:r,patternTransform:a}=e,l=St(e,o8);const u=await Wd(r,I(I({},t),{},{crossOrigin:l.crossOrigin}));return new this(I(I({},l),{},{patternTransform:a&&a.slice(0),source:u}))}}z(Rg,"type","Pattern"),Ae.setClass(Rg),Ae.setClass(Rg,"pattern");const l8=["path","left","top"],c8=["d"];class ta extends js{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:s,left:r,top:a}=t,l=St(t,l8);super(),Object.assign(this,ta.ownDefaults),this.setOptions(l),this._setPath(e||[],!0),typeof r=="number"&&this.set(lt,r),typeof a=="number"&&this.set(Us,a)}_setPath(e,t){this.path=UL(Array.isArray(e)?e:WL(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new ee(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,s=-this.pathOffset.y;e.beginPath();for(const r of this.path)switch(r[0]){case"L":e.lineTo(r[1]+t,r[2]+s);break;case"M":e.moveTo(r[1]+t,r[2]+s);break;case"C":e.bezierCurveTo(r[1]+t,r[2]+s,r[3]+t,r[4]+s,r[5]+t,r[6]+s);break;case"Q":e.quadraticCurveTo(r[1]+t,r[2]+s,r[3]+t,r[4]+s);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I(I({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=XL(this.path,st.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=st.NUM_FRACTION_DIGITS;return" translate(".concat(yt(-this.pathOffset.x,e),", ").concat(yt(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:s,pathOffset:r}=this._calcDimensions();this.set({width:t,height:s,pathOffset:r}),e&&this.setPositionByOrigin(r,Xe,Xe)}_calcBoundsFromPath(){const e=[];let t=0,s=0,r=0,a=0;for(const l of this.path)switch(l[0]){case"L":r=l[1],a=l[2],e.push({x:t,y:s},{x:r,y:a});break;case"M":r=l[1],a=l[2],t=r,s=a;break;case"C":e.push(...C2(r,a,l[1],l[2],l[3],l[4],l[5],l[6])),r=l[5],a=l[6];break;case"Q":e.push(...C2(r,a,l[1],l[2],l[1],l[2],l[3],l[4])),r=l[3],a=l[4];break;case"Z":r=t,a=s}return Ar(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return I(I({},e),{},{pathOffset:new ee(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,s){const r=zr(e,this.ATTRIBUTE_NAMES,s),{d:a}=r;return new this(a,I(I(I({},St(r,c8)),t),{},{left:void 0,top:void 0}))}}z(ta,"type","Path"),z(ta,"cacheProperties",[...Ur,"path","fillRule"]),z(ta,"ATTRIBUTE_NAMES",[...Ai,"d"]),Ae.setClass(ta),Ae.setSVGClass(ta);const u8=["left","top","radius"],fj=["radius","startAngle","endAngle","counterClockwise"];class Cr extends js{static getDefaults(){return I(I({},super.getDefaults()),Cr.ownDefaults)}constructor(e){super(),Object.assign(this,Cr.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Bt(this.startAngle),Bt(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(Is)}getRadiusY(){return this.get("radius")*this.get(vn)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...fj,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,s=Bt(this.startAngle),r=Bt(this.endAngle),a=Pr(s)*t,l=Lr(s)*t,u=Pr(r)*t,h=Lr(r)*t,f=e>180?1:0,g=this.counterClockwise?0:1;return['<path d="M '.concat(a," ").concat(l," A ").concat(t," ").concat(t," 0 ").concat(f," ").concat(g," ").concat(u," ").concat(h,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,s){const r=zr(e,this.ATTRIBUTE_NAMES,s),{left:a=0,top:l=0,radius:u=0}=r;return new this(I(I({},St(r,u8)),{},{radius:u,left:a-u,top:l-u}))}static fromObject(e){return super._fromObject(e)}}z(Cr,"type","Circle"),z(Cr,"cacheProperties",[...Ur,...fj]),z(Cr,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),z(Cr,"ATTRIBUTE_NAMES",["cx","cy","r",...Ai]),Ae.setClass(Cr),Ae.setSVGClass(Cr);const d8=["x1","y1","x2","y2"],h8=["x1","y1","x2","y2"],Rp=["x1","x2","y1","y2"];class sa extends js{constructor(){let[e,t,s,r]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,sa.ownDefaults),this.setOptions(a),this.x1=e,this.x2=s,this.y1=t,this.y2=r,this._setWidthHeight();const{left:l,top:u}=a;typeof l=="number"&&this.set(lt,l),typeof u=="number"&&this.set(Us,u)}_setWidthHeight(){const{x1:e,y1:t,x2:s,y2:r}=this;this.width=Math.abs(s-e),this.height=Math.abs(r-t);const{left:a,top:l,width:u,height:h}=Ar([{x:e,y:t},{x:s,y:r}]),f=new ee(a+u/2,l+h/2);this.setPositionByOrigin(f,Xe,Xe)}_set(e,t){return super._set(e,t),Rp.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const s=e.strokeStyle;var r;pn(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(r=this.stroke)!==null&&r!==void 0?r:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=s}_findCenterFromElement(){return new ee((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I(I({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:s,y2:r,width:a,height:l}=this,u=e<=t?-1:1,h=s<=r?-1:1;return{x1:u*a/2,x2:u*-a/2,y1:h*l/2,y2:h*-l/2}}_toSVG(){const{x1:e,x2:t,y1:s,y2:r}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(s,'" x2="').concat(t,'" y2="').concat(r,`" />
`)]}static async fromElement(e,t,s){const r=zr(e,this.ATTRIBUTE_NAMES,s),{x1:a=0,y1:l=0,x2:u=0,y2:h=0}=r;return new this([a,l,u,h],St(r,d8))}static fromObject(e){let{x1:t,y1:s,x2:r,y2:a}=e,l=St(e,h8);return this._fromObject(I(I({},l),{},{points:[t,s,r,a]}),{extraParam:"points"})}}z(sa,"type","Line"),z(sa,"cacheProperties",[...Ur,...Rp]),z(sa,"ATTRIBUTE_NAMES",Ai.concat(Rp)),Ae.setClass(sa),Ae.setSVGClass(sa);class aa extends js{static getDefaults(){return I(I({},super.getDefaults()),aa.ownDefaults)}constructor(e){super(),Object.assign(this,aa.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,s=this.height/2;e.beginPath(),e.moveTo(-t,s),e.lineTo(0,-s),e.lineTo(t,s),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}z(aa,"type","Triangle"),z(aa,"ownDefaults",{width:100,height:100}),Ae.setClass(aa),Ae.setSVGClass(aa);const mj=["rx","ry"];class jr extends js{static getDefaults(){return I(I({},super.getDefaults()),jr.ownDefaults)}constructor(e){super(),Object.assign(this,jr.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(Is)}getRy(){return this.get("ry")*this.get(vn)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...mj,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,ch,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,s){const r=zr(e,this.ATTRIBUTE_NAMES,s);return r.left=(r.left||0)-r.rx,r.top=(r.top||0)-r.ry,new this(r)}}function f8(n){if(!n)return[];const e=n.replace(/,/g," ").trim().split(/\s+/),t=[];for(let s=0;s<e.length;s+=2)t.push({x:parseFloat(e[s]),y:parseFloat(e[s+1])});return t}z(jr,"type","Ellipse"),z(jr,"cacheProperties",[...Ur,...mj]),z(jr,"ownDefaults",{rx:0,ry:0}),z(jr,"ATTRIBUTE_NAMES",[...Ai,"cx","cy","rx","ry"]),Ae.setClass(jr),Ae.setSVGClass(jr);const m8=["left","top"],gj={exactBoundingBox:!1};class Dn extends js{static getDefaults(){return I(I({},super.getDefaults()),Dn.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),z(this,"strokeDiff",void 0),Object.assign(this,Dn.ownDefaults),this.setOptions(t),this.points=e;const{left:s,top:r}=t;this.initialized=!0,this.setBoundingBox(!0),typeof s=="number"&&this.set(lt,s),typeof r=="number"&&this.set(Us,r)}isOpen(){return!0}_projectStrokeOnPoints(e){return sL(this.points,e,this.isOpen())}_calcDimensions(e){e=I({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(f=>f.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new ee,strokeOffset:new ee,strokeDiff:new ee};const s=Ar(t),r=Dh(I(I({},e),{},{scaleX:1,scaleY:1})),a=Ar(this.points.map(f=>Bs(f,r,!0))),l=new ee(this.scaleX,this.scaleY);let u=s.left+s.width/2,h=s.top+s.height/2;return this.exactBoundingBox&&(u-=h*Math.tan(Bt(this.skewX)),h-=u*Math.tan(Bt(this.skewY))),I(I({},s),{},{pathOffset:new ee(u,h),strokeOffset:new ee(a.left,a.top).subtract(new ee(s.left,s.top)).multiply(l),strokeDiff:new ee(s.width,s.height).subtract(new ee(a.width,a.height)).multiply(l)})}_findCenterFromElement(){const e=Ar(this.points);return new ee(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:s,width:r,height:a,pathOffset:l,strokeOffset:u,strokeDiff:h}=this._calcDimensions();this.set({width:r,height:a,pathOffset:l,strokeOffset:u,strokeDiff:h}),e&&this.setPositionByOrigin(new ee(t+r/2,s+a/2),Xe,Xe)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new ee(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let l;if(Object.keys(e).some(u=>this.strokeUniform||this.constructor.layoutProperties.includes(u))){var t,s;const{width:u,height:h}=this._calcDimensions(e);l=new ee((t=e.width)!==null&&t!==void 0?t:u,(s=e.height)!==null&&s!==void 0?s:h)}else{var r,a;l=new ee((r=e.width)!==null&&r!==void 0?r:this.width,(a=e.height)!==null&&a!==void 0?a:this.height)}return l.multiply(new ee(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const s=this.initialized&&this[e]!==t,r=super._set(e,t);return this.exactBoundingBox&&s&&((e===Is||e===vn)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),r}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I(I({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:s,y:r}=t;return{x:s,y:r}})})}_toSVG(){const e=[],t=this.pathOffset.x,s=this.pathOffset.y,r=st.NUM_FRACTION_DIGITS;for(let a=0,l=this.points.length;a<l;a++)e.push(yt(this.points[a].x-t,r),",",yt(this.points[a].y-s,r)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,s=this.pathOffset.x,r=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-s,this.points[0].y-r);for(let a=0;a<t;a++){const l=this.points[a];e.lineTo(l.x-s,l.y-r)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,s){return new this(f8(e.getAttribute("points")),I(I({},St(zr(e,this.ATTRIBUTE_NAMES,s),m8)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}z(Dn,"ownDefaults",gj),z(Dn,"type","Polyline"),z(Dn,"layoutProperties",[Uo,zo,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),z(Dn,"cacheProperties",[...Ur,"points"]),z(Dn,"ATTRIBUTE_NAMES",[...Ai]),Ae.setClass(Dn),Ae.setSVGClass(Dn);class pd extends Dn{isOpen(){return!1}}z(pd,"ownDefaults",gj),z(pd,"type","Polygon"),Ae.setClass(pd),Ae.setSVGClass(pd);class pj extends js{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const s in t)for(const r in t[s])for(const a in t[s][r])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const s=t===void 0?this.styles:{0:this.styles[t]};for(const r in s)for(const a in s[r])if(s[r][a][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let s,r,a=0,l=!0,u=0;for(const h in t){s=0;for(const f in t[h]){const g=t[h][f]||{};a++,g[e]!==void 0?(r?g[e]!==r&&(l=!1):r=g[e],g[e]===this[e]&&delete g[e]):l=!1,Object.keys(g).length!==0?s++:delete t[h][f]}s===0&&delete t[h]}for(let h=0;h<this._textLines.length;h++)u+=this._textLines[h].length;l&&a===u&&(this[e]=r,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let s,r,a;for(r in t){for(a in s=t[r],s)delete s[a][e],Object.keys(s[a]).length===0&&delete s[a];Object.keys(s).length===0&&delete t[r]}}_extendStyles(e,t){const{lineIndex:s,charIndex:r}=this.get2DCursorLocation(e);this._getLineStyle(s)||this._setLineStyle(s);const a=V0(I(I({},this._getStyleDeclaration(s,r)),t),l=>l!==void 0);this._setStyleDeclaration(s,r,a)}getSelectionStyles(e,t,s){const r=[];for(let a=e;a<(t||e);a++)r.push(this.getStyleAtPosition(a,s));return r}getStyleAtPosition(e,t){const{lineIndex:s,charIndex:r}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(s,r):this._getStyleDeclaration(s,r)}setSelectionStyles(e,t,s){for(let r=t;r<(s||t);r++)this._extendStyles(r,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var s;const r=this.styles&&this.styles[e];return r&&(s=r[t])!==null&&s!==void 0?s:{}}getCompleteStyleDeclaration(e,t){return I(I({},Io(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,s){this.styles[e][t]=s}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}z(pj,"_styleProperties",v6);const g8=/  +/g,p8=/"/g;function Pg(n,e,t,s,r){return"		".concat(function(a,l){let{left:u,top:h,width:f,height:g}=l,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:st.NUM_FRACTION_DIGITS;const v=jc(Kt,a,!1),[b,w,_,T]=[u,h,f,g].map(S=>yt(S,x));return"<rect ".concat(v,' x="').concat(b,'" y="').concat(w,'" width="').concat(_,'" height="').concat(T,'"></rect>')}(n,{left:e,top:t,width:s,height:r}),`
`)}const x8=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Lg;class Ss extends pj{static getDefaults(){return I(I({},super.getDefaults()),Ss.ownDefaults)}constructor(e,t){super(),z(this,"__charBounds",[]),Object.assign(this,Ss.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=oj(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Wn)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,s,r,a,l,u;for(let h=0,f=this._textLines.length;h<f;h++)if((this.textAlign===Wn||h!==f-1&&!this.isEndOfWrapping(h))&&(r=0,a=this._textLines[h],t=this.getLineWidth(h),t<this.width&&(u=this.textLines[h].match(this._reSpacesAndTabs)))){s=u.length,e=(this.width-t)/s;for(let g=0;g<=a.length;g++)l=this.__charBounds[h][g],this._reSpaceAndTab.test(a[g])?(l.width+=e,l.kernedWidth+=e,l.left+=r,r+=e):l.left+=r}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const s=t?this._unwrappedTextLines:this._textLines;let r;for(r=0;r<s.length;r++){if(e<=s[r].length)return{lineIndex:r,charIndex:e};e-=s[r].length+this.missingNewlineOffset(r,t)}return{lineIndex:r-1,charIndex:s[r-1].length<e?s[r-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Vs?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,s){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Xe:e.textBaseline="middle";break;case"ascender":e.textBaseline=Us;break;case"descender":e.textBaseline=Sp}e.font=this._getFontDeclaration(t,s)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,s=this._textLines.length;t<s;t++){const r=this.getLineWidth(t);r>e&&(e=r)}return e}_renderTextLine(e,t,s,r,a,l){this._renderChars(e,t,s,r,a,l)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,s=this._getLeftOffset();let r=this._getTopOffset();for(let a=0,l=this._textLines.length;a<l;a++){const u=this.getHeightOfLine(a);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",a)){r+=u;continue}const h=this._textLines[a].length,f=this._getLineLeftOffset(a);let g,x,v=0,b=0,w=this.getValueOfPropertyAt(a,0,"textBackgroundColor");for(let _=0;_<h;_++){const T=this.__charBounds[a][_];x=this.getValueOfPropertyAt(a,_,"textBackgroundColor"),this.path?(e.save(),e.translate(T.renderLeft,T.renderTop),e.rotate(T.angle),e.fillStyle=x,x&&e.fillRect(-T.width/2,-u/this.lineHeight*(1-this._fontSizeFraction),T.width,u/this.lineHeight),e.restore()):x!==w?(g=s+f+b,this.direction==="rtl"&&(g=this.width-g-v),e.fillStyle=w,w&&e.fillRect(g,r,v,u/this.lineHeight),b=T.left,v=T.width,w=x):v+=T.kernedWidth}x&&!this.path&&(g=s+f+b,this.direction==="rtl"&&(g=this.width-g-v),e.fillStyle=x,e.fillRect(g,r,v,u/this.lineHeight)),r+=u}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,s,r){const a=cc.getFontCache(t),l=this._getFontDeclaration(t),u=s+e,h=s&&l===this._getFontDeclaration(r),f=t.fontSize/this.CACHE_FONT_SIZE;let g,x,v,b;if(s&&a[s]!==void 0&&(v=a[s]),a[e]!==void 0&&(b=g=a[e]),h&&a[u]!==void 0&&(x=a[u],b=x-v),g===void 0||v===void 0||x===void 0){const w=function(){return Lg||(Lg=yn({width:0,height:0}).getContext("2d")),Lg}();this._setTextStyles(w,t,!0),g===void 0&&(b=g=w.measureText(e).width,a[e]=g),v===void 0&&h&&s&&(v=w.measureText(s).width,a[s]=v),h&&x===void 0&&(x=w.measureText(u).width,a[u]=x,b=x-v)}return{width:g*f,kernedWidth:b*f}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,s,r=0;const a=this.pathSide===Lt,l=this.path,u=this._textLines[e],h=u.length,f=new Array(h);this.__charBounds[e]=f;for(let g=0;g<h;g++){const x=u[g];s=this._getGraphemeBox(x,e,g,t),f[g]=s,r+=s.kernedWidth,t=x}if(f[h]={left:s?s.left+s.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},l&&l.segmentsInfo){let g=0;const x=l.segmentsInfo[l.segmentsInfo.length-1].length;switch(this.textAlign){case lt:g=a?x-r:0;break;case Xe:g=(x-r)/2;break;case Lt:g=a?0:x-r}g+=this.pathStartOffset*(a?-1:1);for(let v=a?h-1:0;a?v>=0:v<h;a?v--:v++)s=f[v],g>x?g%=x:g<0&&(g+=x),this._setGraphemeOnPath(g,s),g+=s.kernedWidth}return{width:r,numOfSpaces:0}}_setGraphemeOnPath(e,t){const s=e+t.kernedWidth/2,r=this.path,a=$L(r.path,s,r.segmentsInfo);t.renderLeft=a.x-r.pathOffset.x,t.renderTop=a.y-r.pathOffset.y,t.angle=a.angle+(this.pathSide===Lt?Math.PI:0)}_getGraphemeBox(e,t,s,r,a){const l=this.getCompleteStyleDeclaration(t,s),u=r?this.getCompleteStyleDeclaration(t,s-1):{},h=this._measureChar(e,l,r,u);let f,g=h.kernedWidth,x=h.width;this.charSpacing!==0&&(f=this._getWidthOfCharSpacing(),x+=f,g+=f);const v={width:x,left:0,height:l.fontSize,kernedWidth:g,deltaY:l.deltaY};if(s>0&&!a){const b=this.__charBounds[t][s-1];v.left=b.left+b.width+h.kernedWidth-h.width}return v}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let s=1,r=this._textLines[e].length;s<r;s++)t=Math.max(this.getHeightOfChar(e,s),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let s=0,r=this._textLines.length;s<r;s++)e=this.getHeightOfLine(s),t+=s===r-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let s=0;const r=this._getLeftOffset(),a=this._getTopOffset();for(let l=0,u=this._textLines.length;l<u;l++){const h=this.getHeightOfLine(l),f=h/this.lineHeight,g=this._getLineLeftOffset(l);this._renderTextLine(t,e,this._textLines[l],r+g,a+s+f,l),s+=h}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(Kt))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,s,r,a,l){const u=this.getHeightOfLine(l),h=this.textAlign.includes(Wn),f=this.path,g=!h&&this.charSpacing===0&&this.isEmptyStyles(l)&&!f,x=this.direction==="ltr",v=this.direction==="ltr"?1:-1,b=t.direction;let w,_,T,S,A,E="",M=0;if(t.save(),b!==this.direction&&(t.canvas.setAttribute("dir",x?"ltr":"rtl"),t.direction=x?"ltr":"rtl",t.textAlign=x?lt:Lt),a-=u*this._fontSizeFraction/this.lineHeight,g)return this._renderChar(e,t,l,0,s.join(""),r,a),void t.restore();for(let D=0,B=s.length-1;D<=B;D++)S=D===B||this.charSpacing||f,E+=s[D],T=this.__charBounds[l][D],M===0?(r+=v*(T.kernedWidth-T.width),M+=T.width):M+=T.kernedWidth,h&&!S&&this._reSpaceAndTab.test(s[D])&&(S=!0),S||(w=w||this.getCompleteStyleDeclaration(l,D),_=this.getCompleteStyleDeclaration(l,D+1),S=X0(w,_,!1)),S&&(f?(t.save(),t.translate(T.renderLeft,T.renderTop),t.rotate(T.angle),this._renderChar(e,t,l,D,E,-M/2,0),t.restore()):(A=r,this._renderChar(e,t,l,D,E,A,a)),E="",w=_,r+=v*M,M=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,s=this.height+this.strokeWidth,r=yn({width:t,height:s}),a=r.getContext("2d");return r.width=t,r.height=s,a.beginPath(),a.moveTo(0,0),a.lineTo(t,0),a.lineTo(t,s),a.lineTo(0,s),a.closePath(),a.translate(t/2,s/2),a.fillStyle=e.toLive(a),this._applyPatternGradientTransform(a,e),a.fill(),a.createPattern(r,"no-repeat")}handleFiller(e,t,s){let r,a;return pn(s)?s.gradientUnits==="percentage"||s.gradientTransform||s.patternTransform?(r=-this.width/2,a=-this.height/2,e.translate(r,a),e[t]=this._applyPatternGradientTransformText(s),{offsetX:r,offsetY:a}):(e[t]=s.toLive(e),this._applyPatternGradientTransform(e,s)):(e[t]=s,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:s,strokeWidth:r}=t;return e.lineWidth=r,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",s)}_setFillStyles(e,t){let{fill:s}=t;return this.handleFiller(e,"fillStyle",s)}_renderChar(e,t,s,r,a,l,u){const h=this._getStyleDeclaration(s,r),f=this.getCompleteStyleDeclaration(s,r),g=e==="fillText"&&f.fill,x=e==="strokeText"&&f.stroke&&f.strokeWidth;if(x||g){if(t.save(),t.font=this._getFontDeclaration(f),h.textBackgroundColor&&this._removeShadow(t),h.deltaY&&(u+=h.deltaY),g){const v=this._setFillStyles(t,f);t.fillText(a,l-v.offsetX,u-v.offsetY)}if(x){const v=this._setStrokeStyles(t,f);t.strokeText(a,l-v.offsetX,u-v.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,s){const r=this.get2DCursorLocation(e,!0),a=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"fontSize"),l=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"deltaY"),u={fontSize:a*s.size,deltaY:l+a*s.baseline};this.setSelectionStyles(u,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),s=this.width-t,r=this.textAlign,a=this.direction,l=this.isEndOfWrapping(e);let u=0;return r===Wn||r===dc&&!l||r===uc&&!l||r===ph&&!l?0:(r===Xe&&(u=s/2),r===Lt&&(u=s),r===dc&&(u=s/2),r===uc&&(u=s),a==="rtl"&&(r===Lt||r===Wn||r===uc?u=0:r===lt||r===ph?u=-s:r!==Xe&&r!==dc||(u=-s/2)),u)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,s){var r;return(r=this._getStyleDeclaration(e,t)[s])!==null&&r!==void 0?r:this[s]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let s=this._getTopOffset();const r=this._getLeftOffset(),a=this.path,l=this._getWidthOfCharSpacing(),u=t==="linethrough"?.5:t==="overline"?1:0,h=this.offsets[t];for(let f=0,g=this._textLines.length;f<g;f++){const x=this.getHeightOfLine(f);if(!this[t]&&!this.styleHas(t,f)){s+=x;continue}const v=this._textLines[f],b=x/this.lineHeight,w=this._getLineLeftOffset(f);let _=0,T=0,S=this.getValueOfPropertyAt(f,0,t),A=this.getValueOfPropertyAt(f,0,Kt),E=this.getValueOfPropertyAt(f,0,fa),M=S,D=A,B=E;const F=s+b*(1-this._fontSizeFraction);let L=this.getHeightOfChar(f,0),V=this.getValueOfPropertyAt(f,0,"deltaY");for(let Y=0,se=v.length;Y<se;Y++){const te=this.__charBounds[f][Y];M=this.getValueOfPropertyAt(f,Y,t),D=this.getValueOfPropertyAt(f,Y,Kt),B=this.getValueOfPropertyAt(f,Y,fa);const ne=this.getHeightOfChar(f,Y),R=this.getValueOfPropertyAt(f,Y,"deltaY");if(a&&M&&D){const $=this.fontSize*B/1e3;e.save(),e.fillStyle=A,e.translate(te.renderLeft,te.renderTop),e.rotate(te.angle),e.fillRect(-te.kernedWidth/2,h*ne+R-u*$,te.kernedWidth,$),e.restore()}else if((M!==S||D!==A||ne!==L||B!==E||R!==V)&&T>0){const $=this.fontSize*E/1e3;let Q=r+w+_;this.direction==="rtl"&&(Q=this.width-Q-T),S&&A&&E&&(e.fillStyle=A,e.fillRect(Q,F+h*L+V-u*$,T,$)),_=te.left,T=te.width,S=M,E=B,A=D,L=ne,V=R}else T+=te.kernedWidth}let N=r+w+_;this.direction==="rtl"&&(N=this.width-N-T),e.fillStyle=D;const H=this.fontSize*B/1e3;M&&D&&B&&e.fillRect(N,F+h*L+V-u*H,T-l,H),s+=x}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:s=this.fontWeight,fontSize:r=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const l=e.includes("'")||e.includes('"')||e.includes(",")||Ss.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,s,"".concat(a?this.CACHE_FONT_SIZE:r,"px"),l].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return W0(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),s=new Array(t.length),r=[`
`];let a=[];for(let l=0;l<t.length;l++)s[l]=this.graphemeSplit(t[l]),a=a.concat(s[l],r);return a.pop(),{_unwrappedLines:s,lines:t,graphemeText:a,graphemeLines:s}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I(I({},super.toObject([...HC,...e])),{},{styles:aL(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:s}=this.constructor;super.set(e,t);let r=!1,a=!1;if(typeof e=="object")for(const l in e)l==="path"&&this.setPathInfo(),r=r||s.includes(l),a=a||l==="path";else r=s.includes(e),a=e==="path";return a&&this.setPathInfo(),r&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,s){const r=zr(e,Ss.ATTRIBUTE_NAMES,s),a=I(I({},t),r),{textAnchor:l=lt,textDecoration:u="",dx:h=0,dy:f=0,top:g=0,left:x=0,fontSize:v=P0,strokeWidth:b=1}=a,w=St(a,x8),_=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),I({left:x+h,top:g+f,underline:u.includes("underline"),overline:u.includes("overline"),linethrough:u.includes("line-through"),strokeWidth:0,fontSize:v},w)),T=_.getScaledHeight()/_.height,S=((_.height+_.strokeWidth)*_.lineHeight-_.height)*T,A=_.getScaledHeight()+S;let E=0;return l===Xe&&(E=_.getScaledWidth()/2),l===Lt&&(E=_.getScaledWidth()),_.set({left:_.left-E,top:_.top-(A-_.fontSize*(.07+_._fontSizeFraction))/_.lineHeight,strokeWidth:b}),_}static fromObject(e){return this._fromObject(I(I({},e),{},{styles:oL(e.styles||{},e.text)}),{extraParam:"text"})}}z(Ss,"textLayoutProperties",IC),z(Ss,"cacheProperties",[...Ur,...HC]),z(Ss,"ownDefaults",y6),z(Ss,"type","Text"),z(Ss,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),z(Ss,"ATTRIBUTE_NAMES",Ai.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),ZC(Ss,[class extends UC{_toSVG(){const n=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(n){const e=this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0}),t=this.path;return t?e+t._createBaseSVGMarkup(t._toSVG(),{reviver:n,withShadow:!0,additionalTransform:Cc(this.calcOwnMatrix())}):e}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:e,textSpans:t}=n;const s=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(p8,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",s?'text-decoration="'.concat(s,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(n,e){const t=[],s=[];let r,a=n;this.backgroundColor&&s.push(...Pg(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let l=0,u=this._textLines.length;l<u;l++)r=this._getLineLeftOffset(l),this.direction==="rtl"&&(r+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",l))&&this._setSVGTextLineBg(s,l,e+r,a),this._setSVGTextLineText(t,l,e+r,a),a+=this.getHeightOfLine(l);return{textSpans:t,textBgRects:s}}_createTextCharSpan(n,e,t,s,r){const a=st.NUM_FRACTION_DIGITS,l=this.getSvgSpanStyles(e,n!==n.trim()||!!n.match(g8)),u=l?'style="'.concat(l,'"'):"",h=e.deltaY,f=h?' dy="'.concat(yt(h,a),'" '):"",{angle:g,renderLeft:x,renderTop:v,width:b}=r;let w="";if(x!==void 0){const _=b/2;g&&(w=' rotate="'.concat(yt(Fr(g),a),'"'));const T=Vo({angle:Fr(g)});T[4]=x,T[5]=v;const S=new ee(-_,0).transform(T);t=S.x,s=S.y}return'<tspan x="'.concat(yt(t,a),'" y="').concat(yt(s,a),'" ').concat(f).concat(w).concat(u,">").concat(nL(n),"</tspan>")}_setSVGTextLineText(n,e,t,s){const r=this.getHeightOfLine(e),a=this.textAlign.includes(Wn),l=this._textLines[e];let u,h,f,g,x,v="",b=0;s+=r*(1-this._fontSizeFraction)/this.lineHeight;for(let w=0,_=l.length-1;w<=_;w++)x=w===_||this.charSpacing||this.path,v+=l[w],f=this.__charBounds[e][w],b===0?(t+=f.kernedWidth-f.width,b+=f.width):b+=f.kernedWidth,a&&!x&&this._reSpaceAndTab.test(l[w])&&(x=!0),x||(u=u||this.getCompleteStyleDeclaration(e,w),h=this.getCompleteStyleDeclaration(e,w+1),x=X0(u,h,!0)),x&&(g=this._getStyleDeclaration(e,w),n.push(this._createTextCharSpan(v,g,t,s,f)),v="",u=h,this.direction==="rtl"?t-=b:t+=b,b=0)}_setSVGTextLineBg(n,e,t,s){const r=this._textLines[e],a=this.getHeightOfLine(e)/this.lineHeight;let l,u=0,h=0,f=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let g=0;g<r.length;g++){const{left:x,width:v,kernedWidth:b}=this.__charBounds[e][g];l=this.getValueOfPropertyAt(e,g,"textBackgroundColor"),l!==f?(f&&n.push(...Pg(f,t+h,s,u,a)),h=x,u=v,f=l):u+=b}l&&n.push(...Pg(f,t+h,s,u,a))}_getSVGLineTopOffset(n){let e,t=0;for(e=0;e<n;e++)t+=this.getHeightOfLine(e);const s=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*s/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," text-decoration-thickness: ").concat(yt(this.textDecorationThickness*this.getObjectScaling().y/10,st.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(n,e){const{fontFamily:t,strokeWidth:s,stroke:r,fill:a,fontSize:l,fontStyle:u,fontWeight:h,deltaY:f,textDecorationThickness:g,linethrough:x,overline:v,underline:b}=n,w=this.getSvgTextDecoration({underline:b??this.underline,overline:v??this.overline,linethrough:x??this.linethrough}),_=g||this.textDecorationThickness;return[r?jc(Vs,r):"",s?"stroke-width: ".concat(s,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",l?"font-size: ".concat(l,"px; "):"",u?"font-style: ".concat(u,"; "):"",h?"font-weight: ".concat(h,"; "):"",w?"text-decoration: ".concat(w,"; text-decoration-thickness: ").concat(yt(_*this.getObjectScaling().y/10,st.NUM_FRACTION_DIGITS),"%; "):"",a?jc(Kt,a):"",f?"baseline-shift: ".concat(-f,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(e=>n[e.replace("-","")]).join(" ")}}]),Ae.setClass(Ss),Ae.setSVGClass(Ss);class v8{constructor(e){z(this,"target",void 0),z(this,"__mouseDownInPlace",!1),z(this,"__dragStartFired",!1),z(this,"__isDraggingOver",!1),z(this,"__dragStartSelection",void 0),z(this,"__dragImageDisposer",void 0),z(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(s=>s()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,s=t.getSelectionStartFromPointer(e);return t.isEditing&&s>=t.selectionStart&&s<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var s;let{selectionStart:r,selectionEnd:a}=t;const l=this.target,u=l.canvas,h=new ee(l.flipX?-1:1,l.flipY?-1:1),f=l._getCursorBoundaries(r),g=new ee(f.left+f.leftOffset,f.top+f.topOffset).multiply(h).transform(l.calcTransformMatrix()),x=u.getScenePoint(e).subtract(g),v=l.getCanvasRetinaScaling(),b=l.getBoundingRect(),w=g.subtract(new ee(b.left,b.top)),_=u.viewportTransform,T=w.add(x).transform(_,!0),S=l.backgroundColor,A=q0(l.styles);l.backgroundColor="";const E={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};l.setSelectionStyles(E,0,r),l.setSelectionStyles(E,a,l.text.length),l.dirty=!0;const M=l.toCanvasElement({enableRetinaScaling:u.enableRetinaScaling,viewportTransform:!0});l.backgroundColor=S,l.styles=A,l.dirty=!0,Op(M,{position:"fixed",left:"".concat(-M.width,"px"),border:zs,width:"".concat(M.width/v,"px"),height:"".concat(M.height/v,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{M.remove()},On(e.target||this.target.hiddenTextarea).body.appendChild(M),(s=e.dataTransfer)===null||s===void 0||s.setDragImage(M,T.x,T.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,s=this.isActive();if(s&&e.dataTransfer){const r=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},a=t._text.slice(r.selectionStart,r.selectionEnd).join(""),l=I({text:t.text,value:a},r);e.dataTransfer.setData("text/plain",a),e.dataTransfer.setData("application/fabric",JSON.stringify({value:a,styles:t.getSelectionStyles(r.selectionStart,r.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,l)}return t.abortCursorAnimation(),s}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),s=this.__dragStartSelection;return t<s.selectionStart||t>s.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const s=this.targetCanDrop(t);!this.__isDraggingOver&&s&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,s=this.targetCanDrop(t);!this.__isDraggingOver&&s?this.__isDraggingOver=!0:this.__isDraggingOver&&!s&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:s}=e,r=s.defaultPrevented;this.__isDraggingOver=!1,s.preventDefault();let a=(t=s.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(a&&!r){const l=this.target,u=l.canvas;let h=l.getSelectionStartFromPointer(s);const{styles:f}=s.dataTransfer.types.includes("application/fabric")?JSON.parse(s.dataTransfer.getData("application/fabric")):{},g=a[Math.max(0,a.length-1)],x=0;if(this.__dragStartSelection){const v=this.__dragStartSelection.selectionStart,b=this.__dragStartSelection.selectionEnd;h>v&&h<=b?h=v:h>b&&(h-=b-v),l.removeChars(v,b),delete this.__dragStartSelection}l._reNewline.test(g)&&(l._reNewline.test(l._text[h])||h===l._text.length)&&(a=a.trimEnd()),e.didDrop=!0,e.dropTarget=l,l.insertChars(a,f,h),u.setActiveObject(l),l.enterEditing(s),l.selectionStart=Math.min(h+x,l._text.length),l.selectionEnd=Math.min(l.selectionStart+a.length,l._text.length),l.hiddenTextarea.value=l.text,l._updateTextarea(),l.hiddenTextarea.focus(),l.fire(uh,{index:h+x,action:"drop"}),u.fire("text:changed",{target:l}),u.contextTopDirty=!0,u.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var s;const r=this.target,a=this.target.canvas,{selectionStart:l,selectionEnd:u}=this.__dragStartSelection,h=((s=t.dataTransfer)===null||s===void 0?void 0:s.dropEffect)||zs;h===zs?(r.selectionStart=l,r.selectionEnd=u,r._updateTextarea(),r.hiddenTextarea.focus()):(r.clearContextTop(),h==="move"&&(r.removeChars(l,u),r.selectionStart=r.selectionEnd=l,r.hiddenTextarea&&(r.hiddenTextarea.value=r.text),r._updateTextarea(),r.fire(uh,{index:l,action:"dragend"}),a.fire("text:changed",{target:r}),a.requestRenderAll()),r.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const E2=/[ \n\.,;!\?\-]/;class y8 extends Ss{constructor(){super(...arguments),z(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:s,delay:r,onComplete:a}=e;return qC({startValue:this._currentCursorOpacity,endValue:t,duration:s,delay:r,onComplete:a,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:l=>{this._currentCursorOpacity=l,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,s=e-1;if(this._reSpace.test(this._text[s]))for(;this._reSpace.test(this._text[s]);)t++,s--;for(;/\S/.test(this._text[s])&&s>-1;)t++,s--;return e-t}findWordBoundaryRight(e){let t=0,s=e;if(this._reSpace.test(this._text[s]))for(;this._reSpace.test(this._text[s]);)t++,s++;for(;/\S/.test(this._text[s])&&s<this._text.length;)t++,s++;return e+t}findLineBoundaryLeft(e){let t=0,s=e-1;for(;!/\n/.test(this._text[s])&&s>-1;)t++,s--;return e-t}findLineBoundaryRight(e){let t=0,s=e;for(;!/\n/.test(this._text[s])&&s<this._text.length;)t++,s++;return e+t}searchWordBoundary(e,t){const s=this._text;let r=e>0&&this._reSpace.test(s[e])&&(t===-1||!L0.test(s[e-1]))?e-1:e,a=s[r];for(;r>0&&r<s.length&&!E2.test(a);)r+=t,a=s[r];return t===-1&&E2.test(a)&&r++,r}selectWord(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const s=this.searchWordBoundary(e,-1),r=Math.max(s,this.searchWordBoundary(e,1));this.selectionStart=s,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const s=this.findLineBoundaryLeft(e),r=this.findLineBoundaryRight(e);this.selectionStart=s,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;On(t).activeElement!==t&&t.focus();const s=this.getSelectionStartFromPointer(e),r=this.selectionStart,a=this.selectionEnd;(s===this.__selectionStartOnMouseDown&&r!==a||r!==s&&a!==s)&&(s>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=s):(this.selectionStart=s,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===r&&this.selectionEnd===a||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,s){const r=s.slice(0,e),a=this.graphemeSplit(r).length;if(e===t)return{selectionStart:a,selectionEnd:a};const l=s.slice(e,t);return{selectionStart:a,selectionEnd:a+this.graphemeSplit(l).length}}fromGraphemeToStringSelection(e,t,s){const r=s.slice(0,e).join("").length;return e===t?{selectionStart:r,selectionEnd:r}:{selectionStart:r,selectionEnd:r+s.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),s=this.get2DCursorLocation(e),r=s.lineIndex,a=s.charIndex,l=this.getValueOfPropertyAt(r,a,"fontSize")*this.lineHeight,u=t.leftOffset,h=this.getCanvasRetinaScaling(),f=this.canvas.upperCanvasEl,g=f.width/h,x=f.height/h,v=g-l,b=x-l,w=new ee(t.left+u,t.top+t.topOffset+l).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new ee(f.clientWidth/g,f.clientHeight/x));return w.x<0&&(w.x=0),w.x>v&&(w.x=v),w.y<0&&(w.y=0),w.y>b&&(w.y=b),w.x+=this.canvas._offset.left,w.y+=this.canvas._offset.top,{left:"".concat(w.x,"px"),top:"".concat(w.y,"px"),fontSize:"".concat(l,"px"),charHeight:l}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(dh),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:s,charIndex:r}=this.get2DCursorLocation(e,!0),{lineIndex:a,charIndex:l}=this.get2DCursorLocation(t,!0);if(s!==a){if(this.styles[s])for(let u=r;u<this._unwrappedTextLines[s].length;u++)delete this.styles[s][u];if(this.styles[a])for(let u=l;u<this._unwrappedTextLines[a].length;u++){const h=this.styles[a][u];h&&(this.styles[s]||(this.styles[s]={}),this.styles[s][r+u-l]=h)}for(let u=s+1;u<=a;u++)delete this.styles[u];this.shiftLineStyles(a,s-a)}else if(this.styles[s]){const u=this.styles[s],h=l-r;for(let f=r;f<l;f++)delete u[f];for(const f in this.styles[s]){const g=parseInt(f,10);g>=l&&(u[g-h]=u[f],delete u[f])}}}shiftLineStyles(e,t){const s=Object.assign({},this.styles);for(const r in this.styles){const a=parseInt(r,10);a>e&&(this.styles[a+t]=s[a],s[a-t]||delete this.styles[a])}}insertNewlineStyleObject(e,t,s,r){const a={},l=this._unwrappedTextLines[e].length,u=l===t;let h=!1;s||(s=1),this.shiftLineStyles(e,s);const f=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const x in this.styles[e]){const v=parseInt(x,10);v>=t&&(h=!0,a[v-t]=this.styles[e][x],u&&t===0||delete this.styles[e][x])}let g=!1;for(h&&!u&&(this.styles[e+s]=a,g=!0),(g||l>t)&&s--;s>0;)r&&r[s-1]?this.styles[e+s]={0:I({},r[s-1])}:f?this.styles[e+s]={0:I({},f)}:delete this.styles[e+s],s--;this._forceClearCache=!0}insertCharStyleObject(e,t,s,r){this.styles||(this.styles={});const a=this.styles[e],l=a?I({},a):{};s||(s=1);for(const h in l){const f=parseInt(h,10);f>=t&&(a[f+s]=l[f],l[f-s]||delete a[f])}if(this._forceClearCache=!0,r){for(;s--;)Object.keys(r[s]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+s]=I({},r[s]));return}if(!a)return;const u=a[t?t-1:1];for(;u&&s--;)this.styles[e][t+s]=I({},u)}insertNewStyleBlock(e,t,s){const r=this.get2DCursorLocation(t,!0),a=[0];let l,u=0;for(let h=0;h<e.length;h++)e[h]===`
`?(u++,a[u]=0):a[u]++;for(a[0]>0&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,a[0],s),s=s&&s.slice(a[0]+1)),u&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+a[0],u),l=1;l<u;l++)a[l]>0?this.insertCharStyleObject(r.lineIndex+l,0,a[l],s):s&&this.styles[r.lineIndex+l]&&s[0]&&(this.styles[r.lineIndex+l][0]=s[0]),s=s&&s.slice(a[l]+1);a[l]>0&&this.insertCharStyleObject(r.lineIndex+l,0,a[l],s)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:s;r>s&&this.removeStyleFromTo(s,r);const a=this.graphemeSplit(e);this.insertNewStyleBlock(a,s,t),this._text=[...this._text.slice(0,s),...a,...this._text.slice(r)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,s){s<=e?(t===e?this._selectionDirection=lt:this._selectionDirection===Lt&&(this._selectionDirection=lt,this.selectionEnd=e),this.selectionStart=s):s>e&&s<t?this._selectionDirection===Lt?this.selectionEnd=s:this.selectionStart=s:(t===e?this._selectionDirection=Lt:this._selectionDirection===lt&&(this._selectionDirection=Lt,this.selectionStart=t),this.selectionEnd=s)}}class b8 extends y8{initHiddenTextarea(){const e=this.canvas&&On(this.canvas.getElement())||Fo(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(l=>{let[u,h]=l;return t.setAttribute(u,h)});const{top:s,left:r,fontSize:a}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(s,"; left: ").concat(r,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(a,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(l=>{let[u,h]=l;return t.addEventListener(u,this[h].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste,{value:s,selectionStart:r,selectionEnd:a}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const l=()=>{this.updateFromTextArea(),this.fire(uh),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void l();const u=this._splitTextIntoLines(s).graphemeText,h=this._text.length,f=u.length,g=this.selectionStart,x=this.selectionEnd,v=g!==x;let b,w,_,T,S=f-h;const A=this.fromStringToGraphemeSelection(r,a,s),E=g>A.selectionStart;v?(w=this._text.slice(g,x),S+=x-g):f<h&&(w=E?this._text.slice(x+S,x):this._text.slice(g,g-S));const M=u.slice(A.selectionEnd-S,A.selectionEnd);if(w&&w.length&&(M.length&&(b=this.getSelectionStyles(g,g+1,!1),b=M.map(()=>b[0])),v?(_=g,T=x):E?(_=x-w.length,T=x):(_=x,T=x+w.length),this.removeStyleFromTo(_,T)),M.length){const{copyPasteData:D}=er();t&&M.join("")===D.copiedText&&!st.disableStyleCopyPaste&&(b=D.copiedTextStyle),this.insertNewStyleBlock(M,g,b)}l()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:s,selectionEnd:r}=t;this.compositionStart=s,this.compositionEnd=r,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=er();e.copiedText=this.getSelectedText(),st.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let s,r=this._getLineLeftOffset(e);return t>0&&(s=this.__charBounds[e][t-1],r+=s.left+s.width),r}getDownCursorOffset(e,t){const s=this._getSelectionForOffset(e,t),r=this.get2DCursorLocation(s),a=r.lineIndex;if(a===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-s;const l=r.charIndex,u=this._getWidthBeforeCursor(a,l),h=this._getIndexOnLine(a+1,u);return this._textLines[a].slice(l).length+h+1+this.missingNewlineOffset(a)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const s=this._getSelectionForOffset(e,t),r=this.get2DCursorLocation(s),a=r.lineIndex;if(a===0||e.metaKey||e.keyCode===33)return-s;const l=r.charIndex,u=this._getWidthBeforeCursor(a,l),h=this._getIndexOnLine(a-1,u),f=this._textLines[a].slice(0,l),g=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+h-f.length+(1-g)}_getIndexOnLine(e,t){const s=this._textLines[e];let r,a,l=this._getLineLeftOffset(e),u=0;for(let h=0,f=s.length;h<f;h++)if(r=this.__charBounds[e][h].width,l+=r,l>t){a=!0;const g=l-r,x=l,v=Math.abs(g-t);u=Math.abs(x-t)<v?h:h-1;break}return a||(u=s.length-1),u}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const s=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===Lt);if(t.shiftKey?this.moveCursorWithShift(s):this.moveCursorWithoutShift(s),s!==0){const r=this.text.length;this.selectionStart=Ao(0,this.selectionStart,r),this.selectionEnd=Ao(0,this.selectionEnd,r),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===lt?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,s){let r;if(e.altKey)r=this["findWordBoundary".concat(s)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=s==="Left"?-1:1,!0;r=this["findLineBoundary".concat(s)](this[t])}return r!==void 0&&this[t]!==r&&(this[t]=r,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=lt,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Lt&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=lt,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const s="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[s](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===lt&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Lt,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Lt,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const k2=n=>!!n.button;class w8 extends b8{constructor(){super(...arguments),z(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new v8(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:s}=e;this.canvas&&this.editable&&!k2(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),s&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=s||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:s}=e;const r=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const a=this.canvas._activeObject;if(a&&a!==this)return}!this.editable||this.group&&!this.group.interactive||s&&s.actionPerformed||k2(t)||r||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),s=this.selectionStart,r=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(s,r,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(Mn(this.calcTransformMatrix())).add(new ee(-this._getLeftOffset(),-this._getTopOffset()));let s=0,r=0,a=0;for(let f=0;f<this._textLines.length&&s<=t.y;f++)s+=this.getHeightOfLine(f),a=f,f>0&&(r+=this._textLines[f-1].length+this.missingNewlineOffset(f-1));let l=Math.abs(this._getLineLeftOffset(a));const u=this._textLines[a].length,h=this.__charBounds[a];for(let f=0;f<u;f++){const g=l+h[f].kernedWidth;if(t.x<=g){Math.abs(t.x-g)<=Math.abs(t.x-l)&&r++;break}l=g,r++}return Math.min(this.flipX?u-r:r,this._text.length)}}const xd="moveCursorUp",vd="moveCursorDown",yd="moveCursorLeft",bd="moveCursorRight",wd="exitEditing",A2=(n,e)=>{const t=e.getRetinaScaling();n.setTransform(t,0,0,t,0,0);const s=e.viewportTransform;n.transform(s[0],s[1],s[2],s[3],s[4],s[5])},_8=I({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:wd,27:wd,33:xd,34:vd,35:bd,36:yd,37:yd,38:xd,39:bd,40:vd},keysMapRtl:{9:wd,27:wd,33:xd,34:vd,35:yd,36:bd,37:bd,38:xd,39:yd,40:vd},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Er extends w8{static getDefaults(){return I(I({},super.getDefaults()),Er.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,I(I({},Er.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof Mp&&this.canvas.textEditingManager.remove(this),t instanceof Mp&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,s=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,s)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,s)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const s=super.toCanvasElement(e);return this.isEditing=t,s}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries(),s=this.findAncestorsWithClipPath(),r=s.length>0;let a,l=e;if(r){a=yn(e.canvas),l=a.getContext("2d"),A2(l,this.canvas);const u=this.calcTransformMatrix();l.transform(u[0],u[1],u[2],u[3],u[4],u[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(l,t):this.renderCursor(l,t),r)for(const u of s){const h=u.clipPath,f=yn(e.canvas),g=f.getContext("2d");if(A2(g,this.canvas),!h.absolutePositioned){const x=u.calcTransformMatrix();g.transform(x[0],x[1],x[2],x[3],x[4],x[5])}h.transform(g),h.drawObject(g,!0,{}),this.drawClipPathOnCache(l,h,f)}r&&(e.setTransform(1,0,0,1,0,0),e.drawImage(a,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const s=this._getLeftOffset(),r=this._getTopOffset(),a=this._getCursorBoundariesOffsets(e,t);return{left:s,top:r,leftOffset:a.left,topOffset:a.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,s=0;const{charIndex:r,lineIndex:a}=this.get2DCursorLocation(e);for(let f=0;f<a;f++)t+=this.getHeightOfLine(f);const l=this._getLineLeftOffset(a),u=this.__charBounds[a][r];u&&(s=u.left),this.charSpacing!==0&&r===this._textLines[a].length&&(s-=this._getWidthOfCharSpacing());const h={top:t,left:l+(s>0?s:0)};return this.direction==="rtl"&&(this.textAlign===Lt||this.textAlign===Wn||this.textAlign===uc?h.left*=-1:this.textAlign===lt||this.textAlign===ph?h.left=l-(s>0?s:0):this.textAlign!==Xe&&this.textAlign!==dc||(h.left=l-(s>0?s:0))),h}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const s=this.get2DCursorLocation(e),r=s.lineIndex,a=s.charIndex>0?s.charIndex-1:0,l=this.getValueOfPropertyAt(r,a,"fontSize"),u=this.getObjectScaling().x*this.canvas.getZoom(),h=this.cursorWidth/u,f=this.getValueOfPropertyAt(r,a,"deltaY"),g=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-l*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(r,a,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-h/2,top:g+t.top+f,width:h,height:l}}_renderCursor(e,t,s){const{color:r,opacity:a,left:l,top:u,width:h,height:f}=this.getCursorRenderingData(s,t);e.fillStyle=r,e.globalAlpha=a,e.fillRect(l,u,h,f)}renderSelection(e,t){const s={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,s,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,s){const r=t.selectionStart,a=t.selectionEnd,l=this.textAlign.includes(Wn),u=this.get2DCursorLocation(r),h=this.get2DCursorLocation(a),f=u.lineIndex,g=h.lineIndex,x=u.charIndex<0?0:u.charIndex,v=h.charIndex<0?0:h.charIndex;for(let b=f;b<=g;b++){const w=this._getLineLeftOffset(b)||0;let _=this.getHeightOfLine(b),T=0,S=0,A=0;if(b===f&&(S=this.__charBounds[f][x].left),b>=f&&b<g)A=l&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===g)if(v===0)A=this.__charBounds[g][v].left;else{const F=this._getWidthOfCharSpacing();A=this.__charBounds[g][v-1].left+this.__charBounds[g][v-1].width-F}T=_,(this.lineHeight<1||b===g&&this.lineHeight>1)&&(_/=this.lineHeight);let E=s.left+w+S,M=_,D=0;const B=A-S;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",M=1,D=_):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Lt||this.textAlign===Wn||this.textAlign===uc?E=this.width-E-B:this.textAlign===lt||this.textAlign===ph?E=s.left+w-A:this.textAlign!==Xe&&this.textAlign!==dc||(E=s.left+w-A)),e.fillRect(E,s.top+s.topOffset+D,B,M),s.topOffset+=T}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,Kt)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}z(Er,"ownDefaults",_8),z(Er,"type","IText"),Ae.setClass(Er),Ae.setClass(Er,"i-text");class oa extends Er{static getDefaults(){return I(I({},super.getDefaults()),oa.ownDefaults)}constructor(e,t){super(e,I(I({},oa.ownDefaults),t))}static createControls(){return{controls:J6()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Wn)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,s=0,r=0;const a={};for(let l=0;l<e.graphemeLines.length;l++)e.graphemeText[r]===`
`&&l>0?(s=0,r++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[r])&&l>0&&(s++,r++),a[l]={line:t,offset:s},r+=e.graphemeLines[l].length,s+=e.graphemeLines[l].length;return a}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const s=this._styleMap[t];s&&(t=s.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,s=0,r=e+1,a=!1;const l=this._styleMap[e],u=this._styleMap[e+1];l&&(e=l.line,s=l.offset),u&&(r=u.line,a=r===e,t=u.offset);const h=e===void 0?this.styles:{line:this.styles[e]};for(const f in h)for(const g in h[f]){const x=parseInt(g,10);if(x>=s&&(!a||x<t))for(const v in h[f][g])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const s=this._styleMap[e];if(!s)return{};e=s.line,t=s.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,s){const r=this._styleMap[e];super._setStyleDeclaration(r.line,r.offset+t,s)}_deleteStyleDeclaration(e,t){const s=this._styleMap[e];super._deleteStyleDeclaration(s.line,s.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const s=this.getGraphemeDataForRender(e),r=[];for(let a=0;a<s.wordsData.length;a++)r.push(...this._wrapLine(a,t,s));return this.isWrapping=!1,r}getGraphemeDataForRender(e){const t=this.splitByGrapheme,s=t?"":" ";let r=0;return{wordsData:e.map((a,l)=>{let u=0;const h=t?this.graphemeSplit(a):this.wordSplit(a);return h.length===0?[{word:[],width:0}]:h.map(f=>{const g=t?[f]:this.graphemeSplit(f),x=this._measureWord(g,l,u);return r=Math.max(x,r),u+=g.length+s.length,{word:g,width:x}})}),largestWordWidth:r}}_measureWord(e,t){let s,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=0;for(let l=0,u=e.length;l<u;l++)a+=this._getGraphemeBox(e[l],t,l+r,s,!0).kernedWidth,s=e[l];return a}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,s){let{largestWordWidth:r,wordsData:a}=s,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const u=this._getWidthOfCharSpacing(),h=this.splitByGrapheme,f=[],g=h?"":" ";let x=0,v=[],b=0,w=0,_=!0;t-=l;const T=Math.max(t,r,this.dynamicMinWidth),S=a[e];let A;for(b=0,A=0;A<S.length;A++){const{word:E,width:M}=S[A];b+=E.length,x+=w+M-u,x>T&&!_?(f.push(v),v=[],x=M,_=!0):x+=u,_||h||v.push(g),v=v.concat(E),w=h?0:this._measureWord([g],e,b),b++,_=!1}return A&&f.push(v),r+l>this.dynamicMinWidth&&(this.dynamicMinWidth=r-u+l),f}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),s=this._wrapText(t.lines,this.width),r=new Array(s.length);for(let a=0;a<s.length;a++)r[a]=s[a].join("");return t.lines=r,t.graphemeLines=s,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const s=parseInt(t,10);if(this._textLines[s]){const r=this._styleMap[t].line;e.set("".concat(r),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}z(oa,"type","Textbox"),z(oa,"textLayoutProperties",[...Er.textLayoutProperties,"width"]),z(oa,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),Ae.setClass(oa);class N2 extends Lh{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:s}=e,{clipPath:r,group:a}=s;if(!r||!this.shouldPerformLayout(e))return;const{width:l,height:u}=Ar(tj(s,r)),h=new ee(l,u);if(r.absolutePositioned)return{center:So(r.getRelativeCenterPoint(),void 0,a?a.calcTransformMatrix():void 0),size:h};{const f=r.getRelativeCenterPoint().transform(s.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:g=new ee,correction:x=new ee}=this.calcBoundingBox(t,e)||{};return{center:g.add(f),correction:x.subtract(f),size:h}}return{center:s.getRelativeCenterPoint().add(f),size:h}}}}z(N2,"type","clip-path"),Ae.setClass(N2);class D2 extends Lh{getInitialSize(e,t){let{target:s}=e,{size:r}=t;return new ee(s.width||r.x,s.height||r.y)}}z(D2,"type","fixed"),Ae.setClass(D2);class S8 extends Ec{subscribeTargets(e){const t=e.target;e.targets.reduce((s,r)=>(r.parent&&s.add(r.parent),s),new Set).forEach(s=>{s.layoutManager.subscribeTargets({target:s,targets:[t]})})}unsubscribeTargets(e){const t=e.target,s=t.getObjects();e.targets.reduce((r,a)=>(a.parent&&r.add(a.parent),r),new Set).forEach(r=>{!s.some(a=>a.parent===r)&&r.layoutManager.unsubscribeTargets({target:r,targets:[t]})})}}class la extends da{static getDefaults(){return I(I({},super.getDefaults()),la.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,la.ownDefaults),this.setOptions(t);const{left:s,top:r,layoutManager:a}=t;this.groupInit(e,{left:s,top:r,layoutManager:a??new S8})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(r=>{const a=this._objects.findIndex(u=>u.isInFrontOf(r)),l=a===-1?this.size():a;this.insertAt(l,r)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(_i("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const s=new Set;t.forEach(r=>{const{parent:a}=r;a&&s.add(a)}),e===Q0?s.forEach(r=>{r._onAfterObjectsChange(xh,t)}):s.forEach(r=>{r._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,s){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const r=I(I({hasControls:!1},s),{},{forActiveSelection:!0});for(let a=0;a<this._objects.length;a++)this._objects[a]._renderControls(e,r);super._renderControls(e,t),e.restore()}}z(la,"type","ActiveSelection"),z(la,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),Ae.setClass(la),Ae.setClass(la,"activeSelection");class C8{constructor(){z(this,"resources",{})}applyFilters(e,t,s,r,a){const l=a.getContext("2d");if(!l)return;l.drawImage(t,0,0,s,r);const u={sourceWidth:s,sourceHeight:r,imageData:l.getImageData(0,0,s,r),originalEl:t,originalImageData:l.getImageData(0,0,s,r),canvasEl:a,ctx:l,filterBackend:this};e.forEach(f=>{f.applyTo(u)});const{imageData:h}=u;return h.width===s&&h.height===r||(a.width=h.width,a.height=h.height),l.putImageData(h,0,0),u}}class xj{constructor(){let{tileSize:e=st.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};z(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),z(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const s=yn({width:e,height:t}),r=s.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});r&&(r.clearColor(0,0,0,0),this.canvas=s,this.gl=r)}applyFilters(e,t,s,r,a,l){const u=this.gl,h=a.getContext("2d");if(!u||!h)return;let f;l&&(f=this.getCachedTexture(l,t));const g={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:s,sourceHeight:r,destinationWidth:s,destinationHeight:r,context:u,sourceTexture:this.createTexture(u,s,r,f?void 0:t),targetTexture:this.createTexture(u,s,r),originalTexture:f||this.createTexture(u,s,r,f?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:a},x=u.createFramebuffer();return u.bindFramebuffer(u.FRAMEBUFFER,x),e.forEach(v=>{v&&v.applyTo(g)}),function(v){const b=v.targetCanvas,w=b.width,_=b.height,T=v.destinationWidth,S=v.destinationHeight;w===T&&_===S||(b.width=T,b.height=S)}(g),this.copyGLTo2D(u,g),u.bindTexture(u.TEXTURE_2D,null),u.deleteTexture(g.sourceTexture),u.deleteTexture(g.targetTexture),u.deleteFramebuffer(x),h.setTransform(1,0,0,1,0,0),g}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,s,r,a){const{NEAREST:l,TEXTURE_2D:u,RGBA:h,UNSIGNED_BYTE:f,CLAMP_TO_EDGE:g,TEXTURE_MAG_FILTER:x,TEXTURE_MIN_FILTER:v,TEXTURE_WRAP_S:b,TEXTURE_WRAP_T:w}=e,_=e.createTexture();return e.bindTexture(u,_),e.texParameteri(u,x,a||l),e.texParameteri(u,v,a||l),e.texParameteri(u,b,g),e.texParameteri(u,w,g),r?e.texImage2D(u,0,h,h,f,r):e.texImage2D(u,0,h,t,s,0,h,f,null),_}getCachedTexture(e,t,s){const{textureCache:r}=this;if(r[e])return r[e];{const a=this.createTexture(this.gl,t.width,t.height,t,s);return a&&(r[e]=a),a}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const s=e.canvas,r=t.targetCanvas,a=r.getContext("2d");if(!a)return;a.translate(0,r.height),a.scale(1,-1);const l=s.height-r.height;a.drawImage(s,0,l,r.width,r.height,0,0,r.width,r.height)}copyGLTo2DPutImageData(e,t){const s=t.targetCanvas.getContext("2d"),r=t.destinationWidth,a=t.destinationHeight,l=r*a*4;if(!s)return;const u=new Uint8Array(this.imageBuffer,0,l),h=new Uint8ClampedArray(this.imageBuffer,0,l);e.readPixels(0,0,r,a,e.RGBA,e.UNSIGNED_BYTE,u);const f=new ImageData(h,r,a);s.putImageData(f,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const s=e.getExtension("WEBGL_debug_renderer_info");if(s){const r=e.getParameter(s.UNMASKED_RENDERER_WEBGL),a=e.getParameter(s.UNMASKED_VENDOR_WEBGL);r&&(t.renderer=r.toLowerCase()),a&&(t.vendor=a.toLowerCase())}return this.gpuInfo=t,t}}let Bg;function j8(){const{WebGLProbe:n}=er();return n.queryWebGL(Br()),st.enableGLFiltering&&n.isSupported(st.textureSize)?new xj({tileSize:st.textureSize}):new C8}function Fg(){return!Bg&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Bg=j8()),Bg}const T8=["filters","resizeFilter","src","crossOrigin","type"],vj=["cropX","cropY"];class os extends js{static getDefaults(){return I(I({},super.getDefaults()),os.ownDefaults)}constructor(e,t){super(),z(this,"_lastScaleX",1),z(this,"_lastScaleY",1),z(this,"_filterScalingX",1),z(this,"_filterScalingY",1),this.filters=[],Object.assign(this,os.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(Si()),this.setElement(typeof e=="string"?(this.canvas&&On(this.canvas.getElement())||Fo()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(s),(t=e.classList)===null||t===void 0||t.add(os.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Fg(!1);t instanceof xj&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&er().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,s=this.height/2;e.beginPath(),e.moveTo(-t,-s),e.lineTo(t,-s),e.lineTo(t,s),e.lineTo(-t,s),e.lineTo(-t,-s),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(s=>{s&&t.push(s.toObject())}),I(I({},super.toObject([...vj,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,s=-this.width/2,r=-this.height/2;let a=[],l=[],u="",h="";if(!t)return[];if(this.hasCrop()){const f=Si();a.push('<clipPath id="imageCrop_'+f+`">
`,'	<rect x="'+s+'" y="'+r+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),u=' clip-path="url(#imageCrop_'+f+')" '}if(this.imageSmoothing||(h=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(s-this.cropX,'" y="').concat(r-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(h).concat(u,`></image>
`)),this.stroke||this.strokeDashArray){const f=this.fill;this.fill=null,l=['	<rect x="'.concat(s,'" y="').concat(r,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=f}return a=this.paintFirst!==Kt?a.concat(l,e):a.concat(e,l),a}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Wd(e,{crossOrigin:t,signal:s}).then(r=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(r)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,s=this.getTotalObjectScaling(),r=s.x,a=s.y,l=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||r>t&&a>t)return this._element=l,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,void(this._lastScaleY=a);const u=yn(l),{width:h,height:f}=l;this._element=u,this._lastScaleX=e.scaleX=r,this._lastScaleY=e.scaleY=a,Fg().applyFilters([e],l,h,f,this._element),this._filterScalingX=u.width/this._originalElement.width,this._filterScalingY=u.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(a=>a&&!a.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,s=t.naturalWidth||t.width,r=t.naturalHeight||t.height;if(this._element===this._originalElement){const a=yn({width:s,height:r});this._element=a,this._filteredEl=a}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,s,r),this._lastScaleX=1,this._lastScaleY=1);Fg().applyFilters(e,this._originalElement,s,r,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const s=this._filterScalingX,r=this._filterScalingY,a=this.width,l=this.height,u=Math.max(this.cropX,0),h=Math.max(this.cropY,0),f=t.naturalWidth||t.width,g=t.naturalHeight||t.height,x=u*s,v=h*r,b=Math.min(a*s,f-x),w=Math.min(l*r,g-v),_=-a/2,T=-l/2,S=Math.min(a,f/s-u),A=Math.min(l,g/r-h);t&&e.drawImage(t,x,v,b,w,_,T,S,A)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s=this.getOriginalSize();this.width=e||s.width,this.height=t||s.height}parsePreserveAspectRatioAttribute(){const e=x6(this.preserveAspectRatio||""),t=this.width,s=this.height,r={width:t,height:s};let a,l=this._element.width,u=this._element.height,h=1,f=1,g=0,x=0,v=0,b=0;return!e||e.alignX===zs&&e.alignY===zs?(h=t/l,f=s/u):(e.meetOrSlice==="meet"&&(h=f=ML(this._element,r),a=(t-l*h)/2,e.alignX==="Min"&&(g=-a),e.alignX==="Max"&&(g=a),a=(s-u*f)/2,e.alignY==="Min"&&(x=-a),e.alignY==="Max"&&(x=a)),e.meetOrSlice==="slice"&&(h=f=RL(this._element,r),a=l-t/h,e.alignX==="Mid"&&(v=a/2),e.alignX==="Max"&&(v=a),a=u-s/f,e.alignY==="Mid"&&(b=a/2),e.alignY==="Max"&&(b=a),l=t/h,u=s/f)),{width:l,height:u,scaleX:h,scaleY:f,offsetLeft:g,offsetTop:x,cropX:v,cropY:b}}static fromObject(e,t){let{filters:s,resizeFilter:r,src:a,crossOrigin:l,type:u}=e,h=St(e,T8);return Promise.all([Wd(a,I(I({},t),{},{crossOrigin:l})),s&&Sc(s,t),r&&Sc([r],t),Oh(h,t)]).then(f=>{let[g,x=[],[v]=[],b={}]=f;return new this(g,I(I({},h),{},{src:a,filters:x,resizeFilter:v},b))})}static fromURL(e){let{crossOrigin:t=null,signal:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return Wd(e,{crossOrigin:t,signal:s}).then(a=>new this(a,r))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;const r=zr(e,this.ATTRIBUTE_NAMES,s);return this.fromURL(r["xlink:href"]||r.href,t,r).catch(a=>(_i("log","Unable to parse Image",a),null))}}z(os,"type","Image"),z(os,"cacheProperties",[...Ur,...vj]),z(os,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),z(os,"CSS_CANVAS","canvas-img"),z(os,"ATTRIBUTE_NAMES",[...Ai,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),Ae.setClass(os),Ae.setSVGClass(os);Rh(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Fh=n=>n.webgl!==void 0,Z0="precision highp float",E8=`
    `.concat(Z0,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),k8=["type"],A8=["type"],N8=new RegExp(Z0,"g");class Qt{get type(){return this.constructor.type}constructor(){let e=St(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},k8);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return E8}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:r="highp"}}=er();r!=="highp"&&(t=t.replace(N8,Z0.replace("highp",r)));const a=e.createShader(e.VERTEX_SHADER),l=e.createShader(e.FRAGMENT_SHADER),u=e.createProgram();if(!a||!l||!u)throw new Kn("Vertex, fragment shader or program creation error");if(e.shaderSource(a,s),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new Kn("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(a)));if(e.shaderSource(l,t),e.compileShader(l),!e.getShaderParameter(l,e.COMPILE_STATUS))throw new Kn("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(l)));if(e.attachShader(u,a),e.attachShader(u,l),e.linkProgram(u),!e.getProgramParameter(u,e.LINK_STATUS))throw new Kn('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(u)));const h=this.getUniformLocations(e,u)||{};return h.uStepW=e.getUniformLocation(u,"uStepW"),h.uStepH=e.getUniformLocation(u,"uStepH"),{program:u,attributeLocations:this.getAttributeLocations(e,u),uniformLocations:h}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const s=this.constructor.uniformLocations,r={};for(let a=0;a<s.length;a++)r[s[a]]=e.getUniformLocation(t,s[a]);return r}sendAttributeData(e,t,s){const r=t.aPosition,a=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const s=e.destinationWidth,r=e.destinationHeight;e.sourceWidth===s&&e.sourceHeight===r||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,s,r)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){Fh(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,s=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(s.program),this.sendAttributeData(t,s.attributeLocations,e.aPosition),t.uniform1f(s.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(s.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,s.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,s){e.activeTexture(s),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:s}=e,r=yn({width:t,height:s});e.helpLayer=r}}toObject(){const e=Object.keys(this.constructor.defaults||{});return I({type:this.type},e.reduce((t,s)=>(t[s]=this[s],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(St(e,A8))}}z(Qt,"type","BaseFilter"),z(Qt,"uniformLocations",[]);const D8={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class _d extends Qt{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(D8[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const s=new dt(this.color).getSource(),r=this.alpha,a=s[0]*r,l=s[1]*r,u=s[2]*r,h=1-r;for(let f=0;f<t.length;f+=4){const g=t[f],x=t[f+1],v=t[f+2];let b,w,_;switch(this.mode){case"multiply":b=g*a/255,w=x*l/255,_=v*u/255;break;case"screen":b=255-(255-g)*(255-a)/255,w=255-(255-x)*(255-l)/255,_=255-(255-v)*(255-u)/255;break;case"add":b=g+a,w=x+l,_=v+u;break;case"difference":b=Math.abs(g-a),w=Math.abs(x-l),_=Math.abs(v-u);break;case"subtract":b=g-a,w=x-l,_=v-u;break;case"darken":b=Math.min(g,a),w=Math.min(x,l),_=Math.min(v,u);break;case"lighten":b=Math.max(g,a),w=Math.max(x,l),_=Math.max(v,u);break;case"overlay":b=a<128?2*g*a/255:255-2*(255-g)*(255-a)/255,w=l<128?2*x*l/255:255-2*(255-x)*(255-l)/255,_=u<128?2*v*u/255:255-2*(255-v)*(255-u)/255;break;case"exclusion":b=a+g-2*a*g/255,w=l+x-2*l*x/255,_=u+v-2*u*v/255;break;case"tint":b=a+g*h,w=l+x*h,_=u+v*h}t[f]=b,t[f+1]=w,t[f+2]=_}}sendUniformData(e,t){const s=new dt(this.color).getSource();s[0]=this.alpha*s[0]/255,s[1]=this.alpha*s[1]/255,s[2]=this.alpha*s[2]/255,s[3]=this.alpha,e.uniform4fv(t.uColor,s)}}z(_d,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),z(_d,"type","BlendColor"),z(_d,"uniformLocations",["uColor"]),Ae.setClass(_d);const O8={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},M8=["type","image"];class Sd extends Qt{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return O8[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,s=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,s,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:s}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/s,1]}applyTo2d(e){let{imageData:{data:t,width:s,height:r},filterBackend:{resources:a}}=e;const l=this.image;a.blendImage||(a.blendImage=Br());const u=a.blendImage,h=u.getContext("2d");u.width!==s||u.height!==r?(u.width=s,u.height=r):h.clearRect(0,0,s,r),h.setTransform(l.scaleX,0,0,l.scaleY,l.left,l.top),h.drawImage(l.getElement(),0,0,s,r);const f=h.getImageData(0,0,s,r).data;for(let g=0;g<t.length;g+=4){const x=t[g],v=t[g+1],b=t[g+2],w=t[g+3],_=f[g],T=f[g+1],S=f[g+2],A=f[g+3];switch(this.mode){case"multiply":t[g]=x*_/255,t[g+1]=v*T/255,t[g+2]=b*S/255,t[g+3]=w*A/255;break;case"mask":t[g+3]=A}}}sendUniformData(e,t){const s=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,s)}toObject(){return I(I({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:s,image:r}=e,a=St(e,M8);return os.fromObject(r,t).then(l=>new this(I(I({},a),{},{image:l})))}}z(Sd,"type","BlendImage"),z(Sd,"defaults",{mode:"multiply",alpha:1}),z(Sd,"uniformLocations",["uTransformMatrix","uImage"]),Ae.setClass(Sd);class Cd extends Qt{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(e){Fh(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){let{imageData:{data:t,width:s,height:r}}=e;this.aspectRatio=s/r,this.horizontal=!0;let a=this.getBlurValue()*s;const l=new Uint8ClampedArray(t),u=15,h=4*s;for(let f=0;f<t.length;f+=4){let g=0,x=0,v=0,b=0,w=0;const _=f-f%h,T=_+h;for(let S=-14;S<u;S++){const A=S/u,E=4*Math.floor(a*A),M=1-Math.abs(A);let D=f+E;D<_?D=_:D>T&&(D=T);const B=t[D+3]*M;g+=t[D]*B,x+=t[D+1]*B,v+=t[D+2]*B,b+=B,w+=M}l[f]=g/b,l[f+1]=x/b,l[f+2]=v/b,l[f+3]=b/w}this.horizontal=!1,a=this.getBlurValue()*r;for(let f=0;f<l.length;f+=4){let g=0,x=0,v=0,b=0,w=0;const _=f%h,T=l.length-h+_;for(let S=-14;S<u;S++){const A=S/u,E=Math.floor(a*A)*h,M=1-Math.abs(A);let D=f+E;D<_?D=_:D>T&&(D=T);const B=l[D+3]*M;g+=l[D]*B,x+=l[D+1]*B,v+=l[D+2]*B,b+=B,w+=M}t[f]=g/b,t[f+1]=x/b,t[f+2]=v/b,t[f+3]=b/w}}sendUniformData(e,t){const s=this.chooseRightDelta();e.uniform2fv(t.uDelta,s)}isNeutralState(){return this.blur===0}getBlurValue(){let e=1;const{horizontal:t,aspectRatio:s}=this;return t?s>1&&(e=1/s):s<1&&(e=s),e*this.blur*.12}chooseRightDelta(){const e=this.getBlurValue();return this.horizontal?[e,0]:[0,e]}}z(Cd,"type","Blur"),z(Cd,"defaults",{blur:0}),z(Cd,"uniformLocations",["uDelta"]),Ae.setClass(Cd);class jd extends Qt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=Math.round(255*this.brightness);for(let r=0;r<t.length;r+=4)t[r]+=s,t[r+1]+=s,t[r+2]+=s}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}z(jd,"type","Brightness"),z(jd,"defaults",{brightness:0}),z(jd,"uniformLocations",["uBrightness"]),Ae.setClass(jd);const yj={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class wo extends Qt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,s=this.matrix,r=this.colorsOnly;for(let a=0;a<t.length;a+=4){const l=t[a],u=t[a+1],h=t[a+2];if(t[a]=l*s[0]+u*s[1]+h*s[2]+255*s[4],t[a+1]=l*s[5]+u*s[6]+h*s[7]+255*s[9],t[a+2]=l*s[10]+u*s[11]+h*s[12]+255*s[14],!r){const f=t[a+3];t[a]+=f*s[3],t[a+1]+=f*s[8],t[a+2]+=f*s[13],t[a+3]=l*s[15]+u*s[16]+h*s[17]+f*s[18]+255*s[19]}}}sendUniformData(e,t){const s=this.matrix,r=[s[0],s[1],s[2],s[3],s[5],s[6],s[7],s[8],s[10],s[11],s[12],s[13],s[15],s[16],s[17],s[18]],a=[s[4],s[9],s[14],s[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,r),e.uniform4fv(t.uConstants,a)}toObject(){return I(I({},super.toObject()),{},{matrix:[...this.matrix]})}}function xa(n,e){var t;const s=(z(t=class extends wo{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),z(t,"defaults",{colorsOnly:!1,matrix:e}),t);return Ae.setClass(s,n),s}z(wo,"type","ColorMatrix"),z(wo,"defaults",yj),z(wo,"uniformLocations",["uColorMatrix","uConstants"]),Ae.setClass(wo);xa("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);xa("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);xa("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);xa("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);xa("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);xa("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);xa("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class O2 extends Qt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){Fh(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(s=>Ae.getClass(s.type).fromObject(s,t))).then(s=>new this({subFilters:s}))}}z(O2,"type","Composed"),Ae.setClass(O2);class Td extends Qt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const s=Math.floor(255*this.contrast),r=259*(s+255)/(255*(259-s));for(let a=0;a<t.length;a+=4)t[a]=r*(t[a]-128)+128,t[a+1]=r*(t[a+1]-128)+128,t[a+2]=r*(t[a+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}z(Td,"type","Contrast"),z(Td,"defaults",{contrast:0}),z(Td,"uniformLocations",["uContrast"]),Ae.setClass(Td);const R8={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Ed extends Qt{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return R8[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,s=t.data,r=this.matrix,a=Math.round(Math.sqrt(r.length)),l=Math.floor(a/2),u=t.width,h=t.height,f=e.ctx.createImageData(u,h),g=f.data,x=this.opaque?1:0;let v,b,w,_,T,S,A,E,M,D,B,F,L;for(B=0;B<h;B++)for(D=0;D<u;D++){for(T=4*(B*u+D),v=0,b=0,w=0,_=0,L=0;L<a;L++)for(F=0;F<a;F++)A=B+L-l,S=D+F-l,A<0||A>=h||S<0||S>=u||(E=4*(A*u+S),M=r[L*a+F],v+=s[E]*M,b+=s[E+1]*M,w+=s[E+2]*M,x||(_+=s[E+3]*M));g[T]=v,g[T+1]=b,g[T+2]=w,g[T+3]=x?s[T+3]:_}e.imageData=f}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return I(I({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}z(Ed,"type","Convolute"),z(Ed,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),z(Ed,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),Ae.setClass(Ed);const bj="Gamma";class kd extends Qt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const s=this.gamma,r=1/s[0],a=1/s[1],l=1/s[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const u=this.rgbValues;for(let h=0;h<256;h++)u.r[h]=255*Math.pow(h/255,r),u.g[h]=255*Math.pow(h/255,a),u.b[h]=255*Math.pow(h/255,l);for(let h=0;h<t.length;h+=4)t[h]=u.r[t[h]],t[h+1]=u.g[t[h+1]],t[h+2]=u.b[t[h+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:bj,gamma:this.gamma.concat()}}}z(kd,"type",bj),z(kd,"defaults",{gamma:[1,1,1]}),z(kd,"uniformLocations",["uGamma"]),Ae.setClass(kd);const P8={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Ad extends Qt{applyTo2d(e){let{imageData:{data:t}}=e;for(let s,r=0;r<t.length;r+=4){const a=t[r],l=t[r+1],u=t[r+2];switch(this.mode){case"average":s=(a+l+u)/3;break;case"lightness":s=(Math.min(a,l,u)+Math.max(a,l,u))/2;break;case"luminosity":s=.21*a+.72*l+.07*u}t[r+2]=t[r+1]=t[r]=s}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return P8[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}z(Ad,"type","Grayscale"),z(Ad,"defaults",{mode:"average"}),z(Ad,"uniformLocations",["uMode"]),Ae.setClass(Ad);const L8=I(I({},yj),{},{rotation:0});class Ug extends wo{calculateMatrix(){const e=this.rotation*Math.PI,t=Pr(e),s=Lr(e),r=1/3,a=Math.sqrt(r)*s,l=1-t;this.matrix=[t+l/3,r*l-a,r*l+a,0,0,r*l+a,t+r*l,r*l-a,0,0,r*l-a,r*l+a,t+r*l,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}z(Ug,"type","HueRotation"),z(Ug,"defaults",L8),Ae.setClass(Ug);class Nd extends Qt{applyTo2d(e){let{imageData:{data:t}}=e;for(let s=0;s<t.length;s+=4)t[s]=255-t[s],t[s+1]=255-t[s+1],t[s+2]=255-t[s+2],this.alpha&&(t[s+3]=255-t[s+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}z(Nd,"type","Invert"),z(Nd,"defaults",{alpha:!1,invert:!0}),z(Nd,"uniformLocations",["uInvert","uAlpha"]),Ae.setClass(Nd);class Dd extends Qt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=this.noise;for(let r=0;r<t.length;r+=4){const a=(.5-Math.random())*s;t[r]+=a,t[r+1]+=a,t[r+2]+=a}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}z(Dd,"type","Noise"),z(Dd,"defaults",{noise:0}),z(Dd,"uniformLocations",["uNoise","uSeed"]),Ae.setClass(Dd);class Od extends Qt{applyTo2d(e){let{imageData:{data:t,width:s,height:r}}=e;for(let a=0;a<r;a+=this.blocksize)for(let l=0;l<s;l+=this.blocksize){const u=4*a*s+4*l,h=t[u],f=t[u+1],g=t[u+2],x=t[u+3];for(let v=a;v<Math.min(a+this.blocksize,r);v++)for(let b=l;b<Math.min(l+this.blocksize,s);b++){const w=4*v*s+4*b;t[w]=h,t[w+1]=f,t[w+2]=g,t[w+3]=x}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}z(Od,"type","Pixelate"),z(Od,"defaults",{blocksize:4}),z(Od,"uniformLocations",["uBlocksize"]),Ae.setClass(Od);class Md extends Qt{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=255*this.distance,r=new dt(this.color).getSource(),a=[r[0]-s,r[1]-s,r[2]-s],l=[r[0]+s,r[1]+s,r[2]+s];for(let u=0;u<t.length;u+=4){const h=t[u],f=t[u+1],g=t[u+2];h>a[0]&&f>a[1]&&g>a[2]&&h<l[0]&&f<l[1]&&g<l[2]&&(t[u+3]=0)}}sendUniformData(e,t){const s=new dt(this.color).getSource(),r=this.distance,a=[0+s[0]/255-r,0+s[1]/255-r,0+s[2]/255-r,1],l=[s[0]/255+r,s[1]/255+r,s[2]/255+r,1];e.uniform4fv(t.uLow,a),e.uniform4fv(t.uHigh,l)}}z(Md,"type","RemoveColor"),z(Md,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),z(Md,"uniformLocations",["uLow","uHigh"]),Ae.setClass(Md);class Rd extends Qt{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,s=this.getFilterWindow(),r=new Array(s);for(let a=1;a<=s;a++)r[a-1]=e(a*t);return r}generateShader(e){const t=new Array(e);for(let s=1;s<=e;s++)t[s-1]="".concat(s,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((s,r)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(s,") * uTaps[").concat(r,"] + texture2D(uTexture, vTexCoord - ").concat(s,") * uTaps[").concat(r,`];
              sum += 2.0 * uTaps[`).concat(r,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){Fh(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const s=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(s)/s}}applyTo2d(e){const t=e.imageData,s=this.scaleX,r=this.scaleY;this.rcpScaleX=1/s,this.rcpScaleY=1/r;const a=t.width,l=t.height,u=Math.round(a*s),h=Math.round(l*r);let f;f=this.resizeType==="sliceHack"?this.sliceByTwo(e,a,l,u,h):this.resizeType==="hermite"?this.hermiteFastResize(e,a,l,u,h):this.resizeType==="bilinear"?this.bilinearFiltering(e,a,l,u,h):this.resizeType==="lanczos"?this.lanczosResize(e,a,l,u,h):new ImageData(u,h),e.imageData=f}sliceByTwo(e,t,s,r,a){const l=e.imageData,u=.5;let h=!1,f=!1,g=t*u,x=s*u;const v=e.filterBackend.resources;let b=0,w=0;const _=t;let T=0;v.sliceByTwo||(v.sliceByTwo=Br());const S=v.sliceByTwo;(S.width<1.5*t||S.height<s)&&(S.width=1.5*t,S.height=s);const A=S.getContext("2d");for(A.clearRect(0,0,1.5*t,s),A.putImageData(l,0,0),r=Math.floor(r),a=Math.floor(a);!h||!f;)t=g,s=x,r<Math.floor(g*u)?g=Math.floor(g*u):(g=r,h=!0),a<Math.floor(x*u)?x=Math.floor(x*u):(x=a,f=!0),A.drawImage(S,b,w,t,s,_,T,g,x),b=_,w=T,T+=x;return A.getImageData(b,w,r,a)}lanczosResize(e,t,s,r,a){const l=e.imageData.data,u=e.ctx.createImageData(r,a),h=u.data,f=this.lanczosCreate(this.lanczosLobes),g=this.rcpScaleX,x=this.rcpScaleY,v=2/this.rcpScaleX,b=2/this.rcpScaleY,w=Math.ceil(g*this.lanczosLobes/2),_=Math.ceil(x*this.lanczosLobes/2),T={},S={x:0,y:0},A={x:0,y:0};return function E(M){let D,B,F,L,V,N,H,Y,se,te,ne;for(S.x=(M+.5)*g,A.x=Math.floor(S.x),D=0;D<a;D++){for(S.y=(D+.5)*x,A.y=Math.floor(S.y),V=0,N=0,H=0,Y=0,se=0,B=A.x-w;B<=A.x+w;B++)if(!(B<0||B>=t)){te=Math.floor(1e3*Math.abs(B-S.x)),T[te]||(T[te]={});for(let R=A.y-_;R<=A.y+_;R++)R<0||R>=s||(ne=Math.floor(1e3*Math.abs(R-S.y)),T[te][ne]||(T[te][ne]=f(Math.sqrt(Math.pow(te*v,2)+Math.pow(ne*b,2))/1e3)),F=T[te][ne],F>0&&(L=4*(R*t+B),V+=F,N+=F*l[L],H+=F*l[L+1],Y+=F*l[L+2],se+=F*l[L+3]))}L=4*(D*r+M),h[L]=N/V,h[L+1]=H/V,h[L+2]=Y/V,h[L+3]=se/V}return++M<r?E(M):u}(0)}bilinearFiltering(e,t,s,r,a){let l,u,h,f,g,x,v,b,w,_,T,S,A,E=0;const M=this.rcpScaleX,D=this.rcpScaleY,B=4*(t-1),F=e.imageData.data,L=e.ctx.createImageData(r,a),V=L.data;for(v=0;v<a;v++)for(b=0;b<r;b++)for(g=Math.floor(M*b),x=Math.floor(D*v),w=M*b-g,_=D*v-x,A=4*(x*t+g),T=0;T<4;T++)l=F[A+T],u=F[A+4+T],h=F[A+B+T],f=F[A+B+4+T],S=l*(1-w)*(1-_)+u*w*(1-_)+h*_*(1-w)+f*w*_,V[E++]=S;return L}hermiteFastResize(e,t,s,r,a){const l=this.rcpScaleX,u=this.rcpScaleY,h=Math.ceil(l/2),f=Math.ceil(u/2),g=e.imageData.data,x=e.ctx.createImageData(r,a),v=x.data;for(let b=0;b<a;b++)for(let w=0;w<r;w++){const _=4*(w+b*r);let T=0,S=0,A=0,E=0,M=0,D=0,B=0;const F=(b+.5)*u;for(let L=Math.floor(b*u);L<(b+1)*u;L++){const V=Math.abs(F-(L+.5))/f,N=(w+.5)*l,H=V*V;for(let Y=Math.floor(w*l);Y<(w+1)*l;Y++){let se=Math.abs(N-(Y+.5))/h;const te=Math.sqrt(H+se*se);te>1&&te<-1||(T=2*te*te*te-3*te*te+1,T>0&&(se=4*(Y+L*t),B+=T*g[se+3],A+=T,g[se+3]<255&&(T=T*g[se+3]/250),E+=T*g[se],M+=T*g[se+1],D+=T*g[se+2],S+=T))}}v[_]=E/S,v[_+1]=M/S,v[_+2]=D/S,v[_+3]=B/A}return x}}z(Rd,"type","Resize"),z(Rd,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),z(Rd,"uniformLocations",["uDelta","uTaps"]),Ae.setClass(Rd);class Pd extends Qt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=-this.saturation;for(let r=0;r<t.length;r+=4){const a=t[r],l=t[r+1],u=t[r+2],h=Math.max(a,l,u);t[r]+=h!==a?(h-a)*s:0,t[r+1]+=h!==l?(h-l)*s:0,t[r+2]+=h!==u?(h-u)*s:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}z(Pd,"type","Saturation"),z(Pd,"defaults",{saturation:0}),z(Pd,"uniformLocations",["uSaturation"]),Ae.setClass(Pd);class Ld extends Qt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=-this.vibrance;for(let r=0;r<t.length;r+=4){const a=t[r],l=t[r+1],u=t[r+2],h=Math.max(a,l,u),f=(a+l+u)/3,g=2*Math.abs(h-f)/255*s;t[r]+=h!==a?(h-a)*g:0,t[r+1]+=h!==l?(h-l)*g:0,t[r+2]+=h!==u?(h-u)*g:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}z(Ld,"type","Vibrance"),z(Ld,"defaults",{vibrance:0}),z(Ld,"uniformLocations",["uVibrance"]),Ae.setClass(Ld);const B8=()=>{console.log("=== CakeCustomization Component Initialized ===");const n=Ci(),{session:e,userRole:t}=Ti(),s=j.useRef(null),r=j.useRef(null),a=j.useRef(null),[l,u]=j.useState(!0),[h,f]=j.useState([]),[g,x]=j.useState([]),[v,b]=j.useState([]),[w,_]=j.useState("select"),[T,S]=j.useState("#FF0000"),[A,E]=j.useState(""),[M,D]=j.useState(24),[B,F]=j.useState("Arial"),[L,V]=j.useState(!1),[N,H]=j.useState(null),[Y,se]=j.useState(0),[te,ne]=j.useState("cake base"),[R,$]=j.useState(!1),[Q,pe]=j.useState(1),[O,q]=j.useState(""),[fe,me]=j.useState(""),[_e,re]=j.useState("Pickup"),[xe,de]=j.useState(""),[je,Oe]=j.useState(1),[oe,Ce]=j.useState(!1),[Te,we]=j.useState(!1),[Ve,Ee]=j.useState(null);console.log("Initial state:",{loading:l,canvasReady:L,selectedColor:T}),j.useEffect(()=>{if(!e||!e.user){console.log("User not authenticated, waiting 5 seconds to check again...");const X=setTimeout(()=>{!e||!e.user?(console.log("User still not authenticated after 5 seconds, redirecting to login"),ke.error("Please log in to access the cake customization tool"),n("/login")):console.log("User authenticated after 5 seconds:",e.user)},5e3);return()=>clearTimeout(X)}else console.log("User authenticated:",e.user)},[e,n]),j.useEffect(()=>{console.log("=== CanvasReady state changed ==="),console.log("New canvasReady value:",L)},[L]);const Ge=X=>{if(!X)return console.log("getPublicImageUrl: No path provided"),null;if(X.startsWith("http"))return console.log("getPublicImageUrl: Path is already a URL:",X),X;console.log("getPublicImageUrl: Processing path:",X);try{const ge="asset";console.log(`getPublicImageUrl: Using bucket "${ge}"`);let $e=X;X.includes("/")||console.log(`getPublicImageUrl: Path doesn't include folder, using filename: ${X}`);const{data:Ne,error:Re}=ve.storage.from(ge).getPublicUrl($e);return Re?(console.log(`getPublicImageUrl: Error with bucket "${ge}":`,Re),null):Ne&&Ne.publicUrl?(console.log(`getPublicImageUrl: Success with bucket "${ge}":`,Ne.publicUrl),Ne.publicUrl):(console.error(`getPublicImageUrl: No public URL generated for bucket "${ge}"`),null)}catch(ge){return console.error("getPublicImageUrl: Unexpected error:",ge),null}},Se=X=>new Promise((ge,$e)=>{const Ne=new Image;Ne.crossOrigin="anonymous",Ne.onload=()=>{const Re=document.createElement("canvas"),Be=Re.getContext("2d");Re.width=Ne.width,Re.height=Ne.height,Be.drawImage(Ne,0,0),ge(Re.toDataURL())},Ne.onerror=()=>{const Re=new Image;Re.onload=()=>{const Be=document.createElement("canvas"),Fe=Be.getContext("2d");Be.width=Re.width,Be.height=Re.height,Fe.drawImage(Re,0,0),ge(Be.toDataURL())},Re.onerror=$e,Re.src=X},Ne.src=X}),it=async X=>{if(!X)return!1;try{return(await fetch(X,{method:"HEAD"})).ok}catch(ge){return console.log("testImageUrl: Error testing URL:",X,ge),!1}},Gt=async()=>{try{console.log("=== TESTING STORAGE BUCKET STRUCTURE ===");const X="asset",{data:ge,error:$e}=await ve.storage.from(X).list("",{limit:100});if($e){console.error("Error listing bucket contents:",$e);return}console.log("Bucket contents:",ge);const Ne=["cake base","icing","topping"];for(const Re of Ne)try{const{data:Be,error:Fe}=await ve.storage.from(X).list(Re,{limit:100});Fe?console.log(`Error listing folder "${Re}":`,Fe):console.log(`Folder "${Re}" contents:`,Be)}catch(Be){console.log(`Exception listing folder "${Re}":`,Be)}}catch(X){console.error("Error testing storage bucket:",X)}},Zt=()=>{const X=a.current;if(!X){console.log("Color wheel canvas not ready");return}const ge=X.getContext("2d");if(!ge){console.log("Color wheel context not ready");return}const $e=X.width/2,Ne=X.height/2,Re=Math.min($e,Ne)-10;ge.clearRect(0,0,X.width,X.height);const Be=ge.createImageData(X.width,X.height),Fe=Be.data;for(let nt=0;nt<X.height;nt++)for(let Ct=0;Ct<X.width;Ct++){const Le=Ct-$e,ht=nt-Ne,Ds=Math.sqrt(Le*Le+ht*ht),Ir=Math.atan2(ht,Le);if(Ds<=Re){const ls=(Ir*180/Math.PI+360)%360,Hr=Math.min(Ds/Re*100,100),wn=50,Gs=(Qe,us,vs)=>{us/=100,vs/=100;const Ot=(1-Math.abs(2*vs-1))*us,Ft=Ot*(1-Math.abs(Qe/60%2-1)),Vn=vs-Ot/2;let ds=0,Ut=0,zt=0;return 0<=Qe&&Qe<60?(ds=Ot,Ut=Ft,zt=0):60<=Qe&&Qe<120?(ds=Ft,Ut=Ot,zt=0):120<=Qe&&Qe<180?(ds=0,Ut=Ot,zt=Ft):180<=Qe&&Qe<240?(ds=0,Ut=Ft,zt=Ot):240<=Qe&&Qe<300?(ds=Ft,Ut=0,zt=Ot):300<=Qe&&Qe<360&&(ds=Ot,Ut=0,zt=Ft),[Math.round((ds+Vn)*255),Math.round((Ut+Vn)*255),Math.round((zt+Vn)*255)]},[cs,zn,kt]=Gs(ls,Hr,wn),_n=(nt*X.width+Ct)*4;Fe[_n]=cs,Fe[_n+1]=zn,Fe[_n+2]=kt,Fe[_n+3]=255}}ge.putImageData(Be,0,0),ge.beginPath(),ge.arc($e,Ne,20,0,2*Math.PI),ge.fillStyle=T,ge.fill(),ge.strokeStyle="#333",ge.lineWidth=2,ge.stroke(),console.log("Color wheel drawn successfully")},Jt=X=>{console.log("=== Get Color From Wheel called ==="),console.log("Event:",X);const ge=a.current;if(console.log("Color wheel canvas:",ge),!ge){console.log("Color wheel canvas not available");return}const $e=ge.getBoundingClientRect(),Ne=X.clientX-$e.left,Re=X.clientY-$e.top,Be=ge.width/2,Fe=ge.height/2;console.log("Click coordinates:",{x:Ne,y:Re,centerX:Be,centerY:Fe});const nt=Ne-Be,Ct=Re-Fe,Le=Math.sqrt(nt*nt+Ct*Ct),ht=Math.min(Be,Fe)-10;if(console.log("Distance calculation:",{deltaX:nt,deltaY:Ct,distance:Le,radius:ht}),Le<=ht){const Ir=(Math.atan2(Ct,nt)*180/Math.PI+360)%360,ls=Math.min(Le/ht*100,100),Hr=50,wn=(Qe,us,vs)=>{us/=100,vs/=100;const Ot=(1-Math.abs(2*vs-1))*us,Ft=Ot*(1-Math.abs(Qe/60%2-1)),Vn=vs-Ot/2;let ds=0,Ut=0,zt=0;return 0<=Qe&&Qe<60?(ds=Ot,Ut=Ft,zt=0):60<=Qe&&Qe<120?(ds=Ft,Ut=Ot,zt=0):120<=Qe&&Qe<180?(ds=0,Ut=Ot,zt=Ft):180<=Qe&&Qe<240?(ds=0,Ut=Ft,zt=Ot):240<=Qe&&Qe<300?(ds=Ft,Ut=0,zt=Ot):300<=Qe&&Qe<360&&(ds=Ot,Ut=0,zt=Ft),[Math.round((ds+Vn)*255),Math.round((Ut+Vn)*255),Math.round((zt+Vn)*255)]},Gs=(Qe,us,vs)=>"#"+[Qe,us,vs].map(Ot=>{const Ft=Ot.toString(16);return Ft.length===1?"0"+Ft:Ft}).join(""),[cs,zn,kt]=wn(Ir,ls,Hr),_n=Gs(cs,zn,kt);if(console.log("Calculated color:",_n),S(_n),console.log("Checking canvas readiness for color change"),console.log("canvasReady:",L),console.log("canvas.current:",r.current),console.log("getActiveObject method:",r.current?.getActiveObject),L&&r.current&&r.current.getActiveObject){console.log("Canvas is ready, getting active object");const Qe=r.current.getActiveObject();console.log("Active object for color change:",Qe),Qe?(console.log("Setting fill color on active object"),Qe.set("fill",_n),r.current.renderAll(),console.log("Color changed successfully"),N&&N===Qe&&se(us=>us+1)):console.log("No active object for color change")}else console.log("Canvas not ready for color change")}else console.log("Click outside color wheel radius")},bn=X=>{console.log("=== Mouse Down on Color Wheel ==="),a.current&&(document.addEventListener("mousemove",Hs),document.addEventListener("mouseup",$s),Jt(X))},Hs=X=>{console.log("=== Mouse Move on Color Wheel ===");const ge={clientX:X.clientX,clientY:X.clientY};Jt(ge)},$s=()=>{console.log("=== Mouse Up on Color Wheel ==="),document.removeEventListener("mousemove",Hs),document.removeEventListener("mouseup",$s)};j.useEffect(()=>{console.log("=== Fetch Images useEffect triggered ==="),(async()=>{try{console.log("Setting loading to true"),u(!0);const{data:ge,error:$e}=await ve.from("ASSET").select("*");if($e){console.error("Error fetching assets:",$e),ke.error("Failed to load assets");return}console.log("=== ASSET DATA DEBUG ==="),console.log("Raw asset data:",ge),console.log("Asset count:",ge?.length||0),ge&&ge.length>0&&(console.log("Sample asset:",ge[0]),console.log("Asset structure:",Object.keys(ge[0]))),await Gt();const Ne=ge.filter(Le=>Le.type==="cake base"),Re=ge.filter(Le=>Le.type==="icing"),Be=ge.filter(Le=>Le.type==="topping");console.log("Filtered cake bases:",Ne),console.log("Filtered icing assets:",Re),console.log("Filtered topping assets:",Be);const Fe=Ne.map(Le=>{const ht=Ge(Le.src);return console.log(`Processing cake base ${Le.src}:`,{asset:Le,publicUrl:ht}),{cake_id:Le.asset_id,name:Le.src.replace(".png","").replace(/_/g," ").replace(/\b\w/g,Ds=>Ds.toUpperCase()),publicUrl:ht,admin_id:Le.admin_id}}),nt=Re.map(Le=>{const ht=Ge(Le.src);return console.log(`Processing icing ${Le.src}:`,{asset:Le,publicUrl:ht}),{id:Le.asset_id,name:Le.src.replace(".png","").replace(/_/g," ").replace(/\b\w/g,Ds=>Ds.toUpperCase()),image_path:Le.src,category:Le.type,admin_id:Le.admin_id}}),Ct=Be.map(Le=>{const ht=Ge(Le.src);return console.log(`Processing topping ${Le.src}:`,{asset:Le,publicUrl:ht}),{id:Le.asset_id,name:Le.src.replace(".png","").replace(/_/g," ").replace(/\b\w/g,Ds=>Ds.toUpperCase()),src:Le.src,category:Le.type,admin_id:Le.admin_id}});if(console.log("=== PROCESSED DATA DEBUG ==="),console.log("Final cake images:",Fe),console.log("Final icing assets:",nt),console.log("Final topping assets:",Ct),Fe.length>0){console.log("Testing first cake image URL...");const Le=Fe[0].publicUrl;if(console.log("First cake URL:",Le),Le){const ht=await it(Le);console.log("First cake URL accessible:",ht)}}if(nt.length>0){console.log("Testing first icing URL...");const Le=Ge(nt[0].image_path);if(console.log("First icing URL:",Le),Le){const ht=await it(Le);console.log("First icing URL accessible:",ht)}}Fe.length===0&&console.warn("No cake bases found in ASSET table"),nt.length===0&&console.warn("No icing assets found in ASSET table"),Ct.length===0&&console.warn("No topping assets found in ASSET table"),f(Fe),x(nt),b(Ct)}catch(ge){console.error("Error fetching images:",ge),ke.error("Failed to load images")}finally{console.log("Setting loading to false"),u(!1)}})()},[]),j.useEffect(()=>{if(console.log("=== Canvas Initialization useEffect triggered ==="),console.log("Loading state:",l),console.log("Canvas ref:",s.current),!l&&s.current&&!r.current){console.log("Loading is false, initializing canvas..."),console.log("Canvas ref element:",s.current);try{const X=s.current.parentElement,ge=X.getBoundingClientRect();console.log("=== Canvas Sizing Debug ==="),console.log("Container element:",X),console.log("Container rect:",ge),console.log("Container width:",ge.width),console.log("Container height:",ge.height);const $e=ge.width,Ne=ge.height;console.log("Calculated maxWidth:",$e),console.log("Calculated maxHeight:",Ne),console.log("Canvas element before creation:",s.current),r.current=new Mp(s.current,{width:$e,height:Ne,backgroundColor:"#f8f9fa"}),console.log("Canvas created successfully:",r.current),console.log("Canvas dimensions after creation:",{width:r.current.width,height:r.current.height}),console.log("Container computed styles:",{width:window.getComputedStyle(X).width,height:window.getComputedStyle(X).height,maxWidth:window.getComputedStyle(X).maxWidth,maxHeight:window.getComputedStyle(X).maxHeight,overflow:window.getComputedStyle(X).overflow}),console.log("Canvas element computed styles:",{width:window.getComputedStyle(s.current).width,height:window.getComputedStyle(s.current).height,maxWidth:window.getComputedStyle(s.current).maxWidth,maxHeight:window.getComputedStyle(s.current).maxHeight}),r.current.on("selection:created",Me),r.current.on("selection:cleared",ye),r.current.on("object:modified",ce),r.current.on("object:moving",ce),r.current.on("object:scaling",ce),r.current.on("object:rotating",ce),console.log("Event listeners added"),console.log("Setting canvasReady to true"),setTimeout(()=>{console.log("Delayed canvas ready set to true"),V(!0)},100)}catch(X){console.error("Error creating Canvas:",X)}}else console.log("Loading is still true, canvas ref not ready, or canvas already exists")},[l]);const ie=()=>{if(console.log("=== Canvas Resize Debug ==="),console.log("Canvas current:",r.current),console.log("Canvas ref:",s.current),r.current&&s.current){const ge=s.current.parentElement.getBoundingClientRect();console.log("Resize - Container rect:",ge),console.log("Resize - Container width:",ge.width),console.log("Resize - Container height:",ge.height);const $e=ge.width,Ne=ge.height;console.log("Resize - Calculated maxWidth:",$e),console.log("Resize - Calculated maxHeight:",Ne),console.log("Resize - Current canvas dimensions:",{width:r.current.width,height:r.current.height}),r.current.setDimensions({width:$e,height:Ne}),r.current.renderAll(),console.log("Resize - New canvas dimensions:",{width:r.current.width,height:r.current.height})}else console.log("Resize - Canvas not ready for resize")};j.useEffect(()=>{if(L&&r.current)return window.addEventListener("resize",ie),()=>{window.removeEventListener("resize",ie)}},[L]),j.useEffect(()=>()=>{console.log("Canvas cleanup - disposing canvas"),r.current&&(r.current.dispose(),r.current=null),console.log("Setting canvasReady to false"),V(!1)},[]),j.useEffect(()=>{console.log("=== Color Wheel useEffect triggered ==="),console.log("Selected color:",T),console.log("Color wheel ref:",a.current),a.current?(console.log("Drawing color wheel..."),Zt()):console.log("Color wheel ref not ready")},[T,Y]),j.useEffect(()=>{console.log("=== Color Wheel Mount useEffect triggered ===");const X=setTimeout(()=>{console.log("Attempting to draw color wheel on mount"),console.log("Color wheel ref on mount:",a.current),a.current?(console.log("Drawing color wheel on mount..."),Zt()):console.log("Color wheel ref not ready on mount")},100);return()=>{console.log("Clearing color wheel mount timer"),clearTimeout(X)}},[]);const Me=()=>{if(console.log("=== Handle Selection called ==="),console.log("Canvas ready:",L),console.log("Canvas current:",r.current),!r.current){console.log("Canvas not available in handleSelection");return}const X=r.current.getActiveObject();console.log("Active object:",X),X&&(console.log("Active object type:",X.type),H(X),se(ge=>ge+1),X.type==="text"?(console.log("Setting text properties from active object"),E(X.text),D(X.fontSize),F(X.fontFamily),S(X.fill)):S(X.fill||"#FF0000"))},ye=()=>{console.log("=== Handle Deselection called ==="),console.log("Resetting text properties"),E(""),D(24),F("Arial"),S("#FF0000"),H(null),se(0)},ce=()=>{console.log("=== Handle Object Modified called ==="),se(X=>X+1)},le=X=>{if(console.log("=== Add Cake Base called ==="),console.log("Cake:",X),console.log("Canvas ready:",L),console.log("Canvas current:",r.current),!L||!r.current){console.log("Canvas not ready for addCakeBase"),ke.error("Canvas not ready");return}console.log("Creating image for cake base"),(async()=>{try{const $e=new Image;$e.crossOrigin="anonymous",await new Promise((Re,Be)=>{$e.onload=Re,$e.onerror=Be,$e.src=X.publicUrl}),console.log("Image loaded successfully with CORS, creating FabricImage");const Ne=new os($e);Ne.scaleToWidth(300),Ne.set({left:250,top:200,name:"cake-base"}),console.log("Adding fabric image to canvas"),r.current.add(Ne),r.current.setActiveObject(Ne),r.current.renderAll(),console.log("Cake base added successfully")}catch{console.log("CORS failed, trying data URL conversion...");try{const Ne=await Se(X.publicUrl),Re=new Image;Re.onload=()=>{console.log("Image loaded successfully via data URL, creating FabricImage");const Be=new os(Re);Be.scaleToWidth(300),Be.set({left:250,top:200,name:"cake-base"}),console.log("Adding fabric image to canvas"),r.current.add(Be),r.current.setActiveObject(Be),r.current.renderAll(),console.log("Cake base added successfully")},Re.src=Ne}catch(Ne){console.error("Both CORS and data URL conversion failed:",Ne),ke.error("Failed to load cake image")}}})(),console.log("Image src set to:",X.publicUrl)},ot=X=>{if(!L||!r.current){ke.error("Canvas not ready");return}const ge=Ge(X.image_path);console.log("Adding decoration:",{decoration:X,imageUrl:ge}),(async()=>{try{const Ne=new Image;Ne.crossOrigin="anonymous",await new Promise((Be,Fe)=>{Ne.onload=Be,Ne.onerror=Fe,Ne.src=ge});const Re=new os(Ne);Re.scaleToWidth(80),Re.set({left:300,top:250,name:"decoration"}),r.current.add(Re),r.current.setActiveObject(Re),r.current.renderAll()}catch{console.log("CORS failed for decoration, trying data URL conversion...");try{const Re=await Se(ge),Be=new Image;Be.onload=()=>{const Fe=new os(Be);Fe.scaleToWidth(80),Fe.set({left:300,top:250,name:"decoration"}),r.current.add(Fe),r.current.setActiveObject(Fe),r.current.renderAll()},Be.src=Re}catch(Re){console.error("Both CORS and data URL conversion failed for decoration:",Re),ke.error("Failed to load decoration image")}}})()},Un=X=>{if(!L||!r.current){ke.error("Canvas not ready");return}const ge=Ge(X.src);console.log("Adding topping:",{topping:X,imageUrl:ge}),(async()=>{try{const Ne=new Image;Ne.crossOrigin="anonymous",await new Promise((Be,Fe)=>{Ne.onload=Be,Ne.onerror=Fe,Ne.src=ge});const Re=new os(Ne);Re.scaleToWidth(60),Re.set({left:320,top:270,name:"topping"}),r.current.add(Re),r.current.setActiveObject(Re),r.current.renderAll()}catch{console.log("CORS failed for topping, trying data URL conversion...");try{const Re=await Se(ge),Be=new Image;Be.onload=()=>{const Fe=new os(Be);Fe.scaleToWidth(60),Fe.set({left:320,top:270,name:"topping"}),r.current.add(Fe),r.current.setActiveObject(Fe),r.current.renderAll()},Be.src=Re}catch(Re){console.error("Both CORS and data URL conversion failed for topping:",Re),ke.error("Failed to load topping image")}}})()},va=()=>{if(!A.trim()){ke.error("Please enter some text");return}if(!L||!r.current){ke.error("Canvas not ready");return}const X=new Ss(A,{left:350,top:100,fontSize:M,fontFamily:B,fill:T,name:"text"});r.current.add(X),r.current.setActiveObject(X),r.current.renderAll(),E("")},sn=X=>{if(console.log("=== Change Size called ==="),console.log("Scale:",X),console.log("Canvas ready:",L),console.log("Canvas current:",r.current),console.log("Canvas getActiveObject method:",r.current?.getActiveObject),!L){console.log("Canvas not ready - canvasReady is false"),ke.error("Canvas not ready");return}if(!r.current){console.log("Canvas not ready - canvas.current is null"),ke.error("Canvas not ready");return}if(typeof r.current.getActiveObject!="function"){console.log("Canvas not ready - getActiveObject is not a function"),console.log("getActiveObject type:",typeof r.current.getActiveObject),ke.error("Canvas not ready");return}console.log("Getting active object");const ge=r.current.getActiveObject();console.log("Active object:",ge),ge?(console.log("Scaling active object by:",X),ge.scale(X),r.current.renderAll(),se($e=>$e+1),console.log("Size changed successfully")):(console.log("No active object found"),ke.error("Please select an object first"))},ya=()=>{if(!L||!r.current||!r.current.getActiveObject){ke.error("Canvas not ready");return}const X=r.current.getActiveObject();X?(r.current.remove(X),r.current.renderAll()):ke.error("Please select an object first")},sr=()=>{if(!L||!r.current){ke.error("Canvas not ready");return}r.current.clear(),r.current.backgroundColor="#f8f9fa",r.current.renderAll(),ke.success("Canvas cleared")},Ni=()=>{if(!L||!r.current||!r.current.getActiveObject){ke.error("Canvas not ready");return}const X=r.current.getActiveObject();X?(r.current.bringToFront(X),r.current.renderAll(),se(ge=>ge+1)):ke.error("Please select an object first")},Vr=()=>{if(!L||!r.current||!r.current.getActiveObject){ke.error("Canvas not ready");return}const X=r.current.getActiveObject();X?(r.current.sendToBack(X),r.current.renderAll(),se(ge=>ge+1)):ke.error("Please select an object first")},Vc=()=>{if(!L||!r.current||!r.current.getActiveObject){ke.error("Canvas not ready");return}const X=r.current.getActiveObject();X?(r.current.bringForward(X),r.current.renderAll(),se(ge=>ge+1)):ke.error("Please select an object first")},Go=()=>{if(!L||!r.current||!r.current.getActiveObject){ke.error("Canvas not ready");return}const X=r.current.getActiveObject();X?(r.current.sendBackwards(X),r.current.renderAll(),se(ge=>ge+1)):ke.error("Please select an object first")},Ic=async()=>{if(!L||!r.current){ke.error("Canvas not ready");return}try{ke.loading("Preparing your custom cake design...");const X=r.current.toDataURL({format:"png",quality:1}),$e=await(await fetch(X)).blob();Ee({dataURL:X,blob:$e,filename:`custom_cake_${Date.now()}.png`});const Ne=new Date;Ne.setDate(Ne.getDate()+1),q(Ne.toISOString().split("T")[0]),me("14:00"),Oe(1),pe(1),ke.dismiss(),$(!0)}catch(X){console.error("Error preparing design:",X),ke.error("Failed to prepare design")}},Di=()=>{$(!1),q(""),me(""),re("Pickup"),de(""),Oe(1),pe(1),Ce(!1),we(!1),Ee(null)},Oi=()=>{Q<3&&pe(Q+1)},Uh=()=>{Q>1&&pe(Q-1)},Hc=async()=>{if(!Te){if(!Ve||!O||!fe||_e==="Delivery"&&!xe){ke.error("Please fill in all required fields");return}we(!0);try{console.log("Starting custom cake order placement...");const{data:X,error:ge}=await ve.from("CUSTOMER").select("cus_id").eq("auth_user_id",e.user.id).single();if(ge||!X){console.error("Error fetching customer ID:",ge),ke.error("Customer information not found. Please try again.");return}const $e=X.cus_id,{data:Ne,error:Re}=await ve.storage.from("cust.cakes").upload(Ve.filename,Ve.blob,{contentType:"image/png",upsert:!1});if(Re){console.error("Upload error:",Re),ke.error("Failed to save design to storage");return}console.log("Image uploaded successfully:",Ne);const{data:Be}=await ve.from("CUSTOM-CAKE").select("cc_id").order("cc_id",{ascending:!1}).limit(1),Fe=Be&&Be.length>0?Be[0].cc_id+1:6001,nt=new Date(`${O}T${fe}`),Ct={order_date:new Date().toISOString().split("T")[0],delivery_method:_e,order_schedule:nt.toISOString(),delivery_address:_e==="Delivery"?xe:null,cus_id:$e,order_status:"Pending"};console.log("Attempting to create order with data:",Ct);const{data:Le,error:ht}=await ve.from("ORDER").insert([Ct]).select().single();if(ht){console.error("Error creating order:",ht),console.error("Order error details:",{message:ht.message,details:ht.details,hint:ht.hint,code:ht.code}),ke.error(`Failed to create order: ${ht.message}`);return}console.log("Order created successfully:",Le),console.log("Order ID from database:",Le.order_id);const Ds={cc_id:Fe,cc_img:Ve.filename,order_id:Le.order_id,cus_id:$e,auth_user_id:e.user.id};console.log("Attempting to create custom cake record with data:",Ds);const{data:Ir,error:ls}=await ve.from("CUSTOM-CAKE").insert(Ds);if(ls){console.error("Database insert error:",ls),console.error("Custom cake error details:",{message:ls.message,details:ls.details,hint:ls.hint,code:ls.code}),ke.error(`Failed to save cake design to database: ${ls.message}`);return}console.log("Custom cake record created:",Ir);const Gs={payment_method:"Cash",amount_paid:5e3*je,payment_date:new Date().toISOString().split("T")[0],payment_status:"Unpaid",receipt:null,order_id:Le.order_id};console.log("Attempting to create payment record with data:",Gs);const{error:cs}=await ve.from("PAYMENT").insert([Gs]);if(cs){console.error("Error creating payment:",cs),console.error("Payment error details:",{message:cs.message,details:cs.details,hint:cs.hint,code:cs.code}),ke.error(`Failed to create payment record: ${cs.message}`);return}console.log("Payment record created successfully"),ke.success("Custom cake order placed successfully!",{duration:4e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}),pe(3)}catch(X){console.error("Error placing order:",X),ke.error("Failed to place order. Please try again.",{duration:4e3,position:"top-center"})}finally{we(!1)}}};return console.log("=== Render called ==="),console.log("Current state:",{loading:l,canvasReady:L,selectedColor:T,cakeImages:h.length,session:!!e}),!e||!e.user||l?(console.log("Showing loading spinner - session:",!!e,"loading:",l),d.jsx(Bo,{message:e?"Loading cake designer...":"Checking authentication, please wait..."})):d.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[d.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-2 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Cake Designer"}),d.jsx("div",{className:"h-4 w-px bg-gray-300"}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("button",{onClick:()=>_("select"),className:`p-2 rounded hover:bg-gray-100 transition-colors ${w==="select"?"bg-blue-100 text-blue-600":"text-gray-600"}`,title:"Select Tool (V)",children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.122 2.122"})})}),d.jsx("button",{onClick:()=>_("text"),className:`p-2 rounded hover:bg-gray-100 transition-colors ${w==="text"?"bg-blue-100 text-blue-600":"text-gray-600"}`,title:"Text Tool (T)",children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})})})]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("button",{onClick:()=>sn(.8),className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Decrease Size",children:d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12H3"})})}),d.jsx("button",{onClick:()=>sn(1.2),className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Increase Size",children:d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),d.jsx("div",{className:"h-4 w-px bg-gray-300"}),d.jsx("button",{onClick:Ni,className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Bring to Front",children:d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})})}),d.jsx("button",{onClick:Vr,className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Send to Back",children:d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8V20m0 0l-4-4m4 4l4-4M7 4v12m0 0l-4-4m4 4l4-4"})})}),d.jsx("button",{onClick:Vc,className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Bring Forward",children:d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11l5-5m0 0l5 5m-5-5v12"})})}),d.jsx("button",{onClick:Go,className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Send Backward",children:d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 13l-5 5m0 0l-5-5m5 5V6"})})}),d.jsx("div",{className:"h-4 w-px bg-gray-300"}),d.jsx("button",{onClick:ya,className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete Selected",children:d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),d.jsx("button",{onClick:sr,className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Clear Canvas",children:d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),d.jsx("button",{onClick:Ic,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",title:"Save Design",children:"Save"})]})]}),d.jsxs("div",{className:"flex-1 flex min-h-0 overflow-hidden",children:[d.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col overflow-hidden",children:[w==="text"&&d.jsxs("div",{className:"p-4 border-b border-gray-200",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Text"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("input",{type:"text",value:A,onChange:X=>E(X.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter text..."}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Size"}),d.jsx("input",{type:"range",min:"12",max:"72",value:M,onChange:X=>D(parseInt(X.target.value)),className:"w-full"}),d.jsxs("span",{className:"text-xs text-gray-500",children:[M,"px"]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Font"}),d.jsxs("select",{value:B,onChange:X=>F(X.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",children:[d.jsx("option",{value:"Arial",children:"Arial"}),d.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),d.jsx("option",{value:"Courier New",children:"Courier New"}),d.jsx("option",{value:"Georgia",children:"Georgia"}),d.jsx("option",{value:"Verdana",children:"Verdana"})]})]}),d.jsx("button",{onClick:va,className:"w-full px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Add Text"})]})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0",children:[d.jsxs("div",{className:"flex space-x-1 p-4 pb-2 bg-gray-50 border-b border-gray-200",children:[d.jsx("button",{onClick:()=>ne("cake base"),className:`flex-1 py-2 px-3 text-xs font-medium rounded-md transition-colors ${te==="cake base"?"bg-white text-gray-900 shadow-sm border border-gray-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Cake Bases"}),d.jsx("button",{onClick:()=>ne("icing"),className:`flex-1 py-2 px-3 text-xs font-medium rounded-md transition-colors ${te==="icing"?"bg-white text-gray-900 shadow-sm border border-gray-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Icing"}),d.jsx("button",{onClick:()=>ne("topping"),className:`flex-1 py-2 px-3 text-xs font-medium rounded-md transition-colors ${te==="topping"?"bg-white text-gray-900 shadow-sm border border-gray-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Toppings"})]}),d.jsxs("div",{className:"p-4",children:[te==="cake base"&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Cake Bases"}),h.length>0?d.jsx("div",{className:"space-y-2",children:h.map(X=>d.jsxs("div",{className:"group cursor-pointer",children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:X.publicUrl,alt:X.name,className:"w-full object-contain rounded border border-gray-200 group-hover:border-blue-300 transition-colors",style:{height:"auto",maxHeight:"80px"},onError:ge=>{ge.target.src="/saved-cake.png"}}),d.jsx("button",{onClick:()=>le(X),className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-colors duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100",children:d.jsx("span",{className:"text-white text-xs font-medium",children:"Add"})})]}),d.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:X.name})]},X.cake_id))}):d.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No cake bases found"})]}),te==="icing"&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Icing & Decorations"}),g.length>0?d.jsx("div",{className:"space-y-2",children:g.map(X=>d.jsxs("div",{className:"group cursor-pointer",children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:Ge(X.image_path),alt:X.name,className:"w-full object-contain rounded border border-gray-200 group-hover:border-blue-300 transition-colors",style:{height:"auto",maxHeight:"80px"},onError:ge=>{console.error("Decoration image failed to load in UI:",X.image_path),ge.target.src="/saved-cake.png"}}),d.jsx("button",{onClick:()=>ot(X),className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-colors duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100",children:d.jsx("span",{className:"text-white text-xs font-medium",children:"Add"})})]}),d.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:X.name})]},X.id))}):d.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No icing decorations found"})]}),te==="topping"&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Toppings"}),v.length>0?d.jsx("div",{className:"space-y-2",children:v.map(X=>d.jsxs("div",{className:"group cursor-pointer",children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:Ge(X.src),alt:X.name,className:"w-full object-contain rounded border border-gray-200 group-hover:border-blue-300 transition-colors",style:{height:"auto",maxHeight:"80px"},onError:ge=>{console.error("Topping image failed to load in UI:",X.src),ge.target.src="/saved-cake.png"}}),d.jsx("button",{onClick:()=>Un(X),className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-colors duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100",children:d.jsx("span",{className:"text-white text-xs font-medium",children:"Add"})})]}),d.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:X.name})]},X.id))}):d.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No toppings found"})]})]})]})]}),d.jsx("div",{className:"flex-1 bg-gray-100 flex items-center justify-center p-4 min-h-0 overflow-hidden",children:d.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden w-full h-full min-w-[800px] min-h-[600px]",children:d.jsx("canvas",{ref:s,className:"w-full h-full"})})}),d.jsxs("div",{className:"w-64 bg-white border-l border-gray-200 p-4",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Properties"}),N?d.jsxs("div",{className:"space-y-4",children:[N.type==="text"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Color"}),d.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[d.jsx("canvas",{ref:a,width:"120",height:"120",className:"border border-gray-300 rounded cursor-pointer",onMouseDown:bn,title:"Click and drag to select color"}),d.jsx("div",{className:"flex items-center space-x-2",children:d.jsx("span",{className:"text-sm text-gray-600 font-mono",children:T})})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Type"}),d.jsx("div",{className:"text-sm font-medium text-gray-900 capitalize",children:N.type})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Layer Order"}),d.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[r.current.getObjects().indexOf(N)+1," of ",r.current.getObjects().length]}),d.jsxs("div",{className:"flex gap-1 mt-2",children:[d.jsx("button",{onClick:Go,className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",title:"Send Backward",children:"↓"}),d.jsx("button",{onClick:Vc,className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",title:"Bring Forward",children:"↑"}),d.jsx("button",{onClick:Vr,className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",title:"Send to Back",children:"⬇"}),d.jsx("button",{onClick:Ni,className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",title:"Bring to Front",children:"⬆"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Position"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.jsx("input",{type:"number",value:Math.round(N.left||0),onChange:X=>{N.set("left",parseFloat(X.target.value)),r.current.renderAll(),se(ge=>ge+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),d.jsx("input",{type:"number",value:Math.round(N.top||0),onChange:X=>{N.set("top",parseFloat(X.target.value)),r.current.renderAll(),se(ge=>ge+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Size"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.jsx("input",{type:"number",value:Math.round(N.width*(N.scaleX||1)),onChange:X=>{const $e=parseFloat(X.target.value)/N.width;N.set("scaleX",$e),r.current.renderAll(),se(Ne=>Ne+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),d.jsx("input",{type:"number",value:Math.round(N.height*(N.scaleY||1)),onChange:X=>{const $e=parseFloat(X.target.value)/N.height;N.set("scaleY",$e),r.current.renderAll(),se(Ne=>Ne+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Rotation"}),d.jsx("input",{type:"number",value:Math.round(N.angle||0),onChange:X=>{N.set("angle",parseFloat(X.target.value)),r.current.renderAll(),se(ge=>ge+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Opacity"}),d.jsx("input",{type:"range",min:"0",max:"100",value:Math.round((N.opacity||1)*100),onChange:X=>{N.set("opacity",parseFloat(X.target.value)/100),r.current.renderAll(),se(ge=>ge+1)},className:"w-full"}),d.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round((N.opacity||1)*100),"%"]})]}),N.type==="text"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Text"}),d.jsx("input",{type:"text",value:N.text||"",onChange:X=>{N.set("text",X.target.value),r.current.renderAll(),se(ge=>ge+1)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]},Y):d.jsx("div",{className:"text-sm text-gray-500 text-center py-8",children:"Select an object to view its properties"})]})]}),R&&Ve&&d.jsx("div",{className:"fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[d.jsx("h2",{className:"text-2xl font-bold text-[#381914]",children:"Complete Your Custom Cake Order"}),d.jsx("button",{onClick:Di,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold cursor-pointer",children:"×"})]}),d.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:d.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[d.jsxs("div",{className:`flex items-center ${Q>=1?"text-[#AF524D]":"text-gray-400"}`,children:[d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${Q>=1?"bg-[#AF524D] text-white":"bg-gray-200 text-gray-500"}`,children:"1"}),d.jsx("span",{className:"ml-2 text-sm font-medium",children:"Order Details"})]}),d.jsx("div",{className:`w-8 h-1 ${Q>=2?"bg-[#AF524D]":"bg-gray-200"}`}),d.jsxs("div",{className:`flex items-center ${Q>=2?"text-[#AF524D]":"text-gray-400"}`,children:[d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${Q>=2?"bg-[#AF524D] text-white":"bg-gray-200 text-gray-500"}`,children:"2"}),d.jsx("span",{className:"ml-2 text-sm font-medium",children:"Review"})]}),d.jsx("div",{className:`w-8 h-1 ${Q>=3?"bg-[#AF524D]":"bg-gray-200"}`}),d.jsxs("div",{className:`flex items-center ${Q>=3?"text-[#AF524D]":"text-gray-400"}`,children:[d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${Q>=3?"bg-[#AF524D] text-white":"bg-gray-200 text-gray-500"}`,children:"3"}),d.jsx("span",{className:"ml-2 text-sm font-medium",children:"Success"})]})]})}),d.jsxs("div",{className:"p-6",children:[d.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("img",{src:Ve.dataURL,alt:"Custom Cake Design",className:"w-16 h-16 object-contain rounded-lg"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-[#381914]",children:"Custom Cake Design"}),d.jsx("p",{className:"text-sm text-gray-600",children:"₱5,000 (base price)"})]})]})}),Q===1&&d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Quantity *"}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{type:"button",onClick:()=>Oe(Math.max(1,je-1)),className:"w-10 h-10 rounded-full border-2 border-[#AF524D] text-[#AF524D] hover:bg-[#AF524D] hover:text-white transition-colors flex items-center justify-center font-bold text-lg",children:"-"}),d.jsx("span",{className:"w-16 text-center font-semibold text-[#381914] text-lg",children:je}),d.jsx("button",{type:"button",onClick:()=>Oe(je+1),className:"w-10 h-10 rounded-full border-2 border-[#AF524D] text-[#AF524D] hover:bg-[#AF524D] hover:text-white transition-colors flex items-center justify-center font-bold text-lg",children:"+"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Pickup/Delivery Date *"}),d.jsx("div",{className:"relative",children:d.jsxs("div",{className:"flex items-center gap-3 p-3 border-2 border-[#AF524D] rounded-lg bg-white",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("svg",{className:"w-6 h-6 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),d.jsx("div",{className:"flex-1",children:d.jsx("input",{type:"date",value:O,onChange:X=>q(X.target.value),min:new Date().toISOString().split("T")[0],className:"w-full bg-transparent border-none outline-none text-[#381914] font-medium cursor-pointer",required:!0})})]})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Pickup/Delivery Time *"}),d.jsx("div",{className:"relative",children:d.jsxs("div",{className:"flex items-center gap-3 p-3 border-2 border-[#AF524D] rounded-lg bg-white",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("svg",{className:"w-6 h-6 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),d.jsx("div",{className:"flex-1",children:d.jsx("input",{type:"time",value:fe,onChange:X=>me(X.target.value),className:"w-full bg-transparent border-none outline-none text-[#381914] font-medium cursor-pointer",required:!0})})]})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Order Type"}),d.jsxs("div",{className:"relative",children:[d.jsxs("div",{className:"flex items-center gap-3 p-3 border-2 border-[#AF524D] rounded-lg bg-white cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>Ce(!oe),children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("svg",{className:"w-6 h-6 text-[#AF524D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),d.jsx("div",{className:"flex-1",children:d.jsx("span",{className:"text-[#381914] font-medium",children:_e})}),d.jsx("div",{className:"flex-shrink-0",children:d.jsx("svg",{className:`w-5 h-5 text-[#AF524D] transition-transform ${oe?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),oe&&d.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border-2 border-[#AF524D] rounded-lg shadow-lg z-10",children:[d.jsx("div",{className:"p-3 hover:bg-[#AF524D] hover:text-white cursor-pointer transition-colors border-b border-gray-100",onClick:()=>{re("Pickup"),Ce(!1)},children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),d.jsx("span",{className:"font-medium",children:"Pickup"})]})}),d.jsx("div",{className:"p-3 hover:bg-[#AF524D] hover:text-white cursor-pointer transition-colors",onClick:()=>{re("Delivery"),Ce(!1)},children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),d.jsx("span",{className:"font-medium",children:"Delivery"})]})})]})]})]}),_e==="Delivery"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-[#381914] mb-2",children:"Delivery Address"}),d.jsx("textarea",{value:xe,onChange:X=>de(X.target.value),placeholder:"Enter your complete delivery address...",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent resize-none"})]}),d.jsxs("div",{className:"flex gap-4 justify-end",children:[d.jsx("button",{onClick:Di,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-full hover:bg-gray-400 transition-colors",children:"Cancel"}),d.jsx("button",{onClick:Oi,disabled:!O||!fe||_e==="Delivery"&&!xe,className:`px-6 py-2 rounded-full transition-colors ${!O||!fe||_e==="Delivery"&&!xe?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-[#AF524D] text-white hover:bg-[#8B3D3A]"}`,children:"Next"})]})]}),Q===2&&d.jsxs("div",{className:"space-y-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-[#381914] mb-4",children:"Review Your Order"}),d.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[d.jsx("h4",{className:"font-semibold text-[#381914] mb-4",children:"Order Summary"}),d.jsxs("div",{className:"space-y-3 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Cake:"}),d.jsx("span",{children:"Custom Cake Design"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Quantity:"}),d.jsx("span",{children:je})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Price per cake:"}),d.jsx("span",{children:"₱5,000"})]}),d.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-2",children:[d.jsx("span",{className:"font-semibold",children:"Total Price:"}),d.jsxs("span",{className:"font-semibold",children:["₱",5e3*je]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Date:"}),d.jsx("span",{children:O?new Date(O).toLocaleDateString():"Not selected"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Time:"}),d.jsx("span",{children:fe?new Date(`2000-01-01T${fe}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"Not selected"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Type:"}),d.jsx("span",{children:_e})]}),_e==="Delivery"&&xe&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Address:"}),d.jsx("span",{className:"text-right max-w-xs truncate",children:xe})]})]})]}),d.jsxs("div",{className:"flex gap-4 justify-between items-center pt-4 border-t border-gray-200",children:[d.jsx("button",{onClick:Uh,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-full hover:bg-gray-400 transition-colors",children:"Back"}),d.jsx("button",{onClick:Hc,disabled:Te,className:`px-6 py-2 rounded-full transition-colors ${Te?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-[#AF524D] text-white hover:bg-[#8B3D3A]"}`,children:Te?"Placing Order...":"Place Order"})]})]}),Q===3&&d.jsxs("div",{className:"space-y-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-[#381914] mb-4",children:"Order Successfully Placed!"}),d.jsxs("div",{className:"p-6 bg-green-50 border border-green-200 rounded-lg text-center",children:[d.jsx("div",{className:"flex items-center justify-center gap-3 mb-4",children:d.jsx("svg",{className:"w-12 h-12 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),d.jsx("h4",{className:"font-semibold text-green-800 text-xl mb-2",children:"Thank you for your order!"}),d.jsx("p",{className:"text-green-700 text-sm mb-4",children:"Your custom cake order has been successfully placed."})]}),d.jsx("div",{className:"flex gap-4 justify-center",children:d.jsx("button",{onClick:Di,className:"px-6 py-2 bg-[#AF524D] text-white rounded-full hover:bg-[#8B3D3A] transition-colors",children:"Done"})})]})]})]})})]})},M2=()=>{const[n,e]=j.useState([]),[t,s]=j.useState([]),[r,a]=j.useState(null),[l,u]=j.useState({id:null,field:null}),[h,f]=j.useState({}),[g,x]=j.useState(""),[v,b]=j.useState(""),[w,_]=j.useState(""),[T,S]=j.useState([]),[A,E]=j.useState(""),[M,D]=j.useState(!1);j.useEffect(()=>{(async()=>{const{data:se,error:te}=await ve.from("INVENTORY").select(`
          inven_id,
          stock_quantity,
          last_updated,
          ingred_id,
          INGREDIENT (
            ingred_name,
            unit
          )
        `);if(te)console.error(te);else{const ne=se.map(R=>({inven_id:R.inven_id,quantity:R.stock_quantity,updated:R.last_updated,name:R.INGREDIENT?.ingred_name,unit:R.INGREDIENT?.unit,ingred_id:R.ingred_id}));e(ne)}})()},[]),j.useEffect(()=>{(async()=>{const{data:se,error:te}=await ve.from("INGREDIENT").select("ingred_id, ingred_name, unit").order("ingred_name");te?console.error("Error fetching ingredients:",te):(S(se||[]),console.log("Available ingredients:",se))})()},[]);const B=()=>{const Y=`new-${Date.now()}`;s([...t,{inven_id:Y,quantity:"0",updated:new Date().toISOString().split("T")[0],name:"Item Name",ingred_id:null,isNew:!0}])},F=async()=>{if(!r)return;if(r.toString().startsWith("new-"))s(t.filter(se=>se.inven_id!==r));else try{const{data:se,error:te}=await ve.from("INVENTORY").select("ingred_id").eq("inven_id",r).single();if(te){console.error("Error fetching inventory record:",te),be.error(`Failed to fetch inventory record: ${te.message}`,{duration:4e3,position:"top-center"});return}const ne=se.ingred_id,{error:R}=await ve.from("INVENTORY").delete().eq("inven_id",r);if(R){console.error("Delete inventory error:",R),be.error(`Failed to delete inventory item: ${R.message}`,{duration:4e3,position:"top-center"});return}const{data:$,error:Q}=await ve.from("INVENTORY").select("inven_id").eq("ingred_id",ne);if(Q)console.error("Error checking other inventory records:",Q);else if(!$||$.length===0){console.log(`Deleting ingredient with ID ${ne} as it's no longer used`);const{error:pe}=await ve.from("INGREDIENT").delete().eq("ingred_id",ne);pe?console.error("Delete ingredient error:",pe):console.log(`Successfully deleted ingredient with ID ${ne}`)}else console.log(`Ingredient with ID ${ne} is still used in other inventory records, keeping it`);e(n.filter(pe=>pe.inven_id!==r))}catch(se){console.error("Error in delete operation:",se)}a(null)},L=async()=>{if(M)return;D(!0),console.log("=== SAVE CHANGES START ==="),console.log("New rows to save:",t),console.log("Edited rows to save:",h),console.log("Available ingredients:",T);for(const te of t){if(console.log("Processing new row:",te),!te.name||!te.quantity){console.warn("Skipping incomplete new row:",te);continue}try{console.log(`Looking for ingredient: "${te.name.trim()}"`);const{data:ne,error:R}=await ve.from("INGREDIENT").select("ingred_id, unit").ilike("ingred_name",te.name.trim());if(R){console.error("Ingredient fetch error (insert):",R);continue}console.log("Found ingredients:",ne);let $,Q=te.unit||"pcs";if(!ne||ne.length===0){console.log(`Creating new ingredient: "${te.name.trim()}" with unit: "${Q}"`);const{data:O,error:q}=await ve.from("INGREDIENT").insert([{ingred_name:te.name.trim(),unit:Q}]).select("ingred_id").single();if(q){console.error("Error creating ingredient:",q);continue}$=O.ingred_id,console.log(`Created new ingredient with ID ${$} for "${te.name}"`)}else{$=ne[0].ingred_id;const O=ne[0].unit;if(Q!==O){console.log(`Updating unit for ingredient "${te.name}" from "${O}" to "${Q}"`);const{error:q}=await ve.from("INGREDIENT").update({unit:Q}).eq("ingred_id",$);q&&console.error("Error updating ingredient unit:",q)}console.log(`Found existing ingredient ID ${$} for "${te.name}"`)}const{error:pe}=await ve.from("INVENTORY").insert([{stock_quantity:parseFloat(te.quantity),last_updated:new Date().toISOString().split("T")[0],ingred_id:$}]);pe?(console.error("Insert error:",pe),be.error(`Failed to save inventory item "${te.name}": ${pe.message}`,{duration:4e3,position:"top-center"})):console.log(`Successfully inserted new row for "${te.name}"`)}catch(ne){console.error("Error processing new row:",ne)}}for(const[te,ne]of Object.entries(h)){console.log(`Processing edited row ${te}:`,ne),console.log("Values object keys:",Object.keys(ne)),console.log("Values object:",ne);const R=n.find(q=>q.inven_id===parseInt(te));if(!R){console.warn(`Original row not found for ID ${te}`);continue}const $={name:ne.name||R.name,quantity:ne.quantity!==void 0?ne.quantity:R.quantity,unit:ne.unit||R.unit||"pcs"};console.log(`Merged data for row ${te}:`,$);const{quantity:Q,name:pe,unit:O}=$;if(!pe||Q===void 0){console.warn("Skipping incomplete edited row:",{id:te,mergedData:$});continue}try{console.log(`Looking for ingredient: "${pe.trim()}"`);const{data:q,error:fe}=await ve.from("INGREDIENT").select("ingred_id, unit").ilike("ingred_name",pe.trim());if(fe){console.error("Ingredient fetch error (update):",fe);continue}console.log("Found ingredients:",q);let me,_e=O||"pcs";if(!q||q.length===0){console.log(`Creating new ingredient: "${pe.trim()}" with unit: "${_e}"`);const{data:xe,error:de}=await ve.from("INGREDIENT").insert([{ingred_name:pe.trim(),unit:_e}]).select("ingred_id").single();if(de){console.error("Error creating ingredient:",de);continue}me=xe.ingred_id,console.log(`Created new ingredient with ID ${me} for "${pe}"`)}else{me=q[0].ingred_id;const xe=q[0].unit;if(_e!==xe){console.log(`Updating unit for ingredient "${pe}" from "${xe}" to "${_e}"`);const{error:de}=await ve.from("INGREDIENT").update({unit:_e}).eq("ingred_id",me);de&&console.error("Error updating ingredient unit:",de)}console.log(`Found existing ingredient ID ${me} for "${pe}"`)}const{error:re}=await ve.from("INVENTORY").update({stock_quantity:parseFloat(Q),last_updated:new Date().toISOString().split("T")[0],ingred_id:me}).eq("inven_id",te);re?(console.error(`Update error for inven_id ${te}:`,re),be.error(`Failed to update inventory item: ${re.message}`,{duration:4e3,position:"top-center"})):console.log(`Successfully updated row with inven_id ${te}`)}catch(q){console.error("Error processing updated row:",q)}}f({}),s([]),u({id:null,field:null}),a(null),console.log("Refreshing inventory...");const{data:Y,error:se}=await ve.from("INVENTORY").select(`
        inven_id,
        stock_quantity,
        last_updated,
        ingred_id,
        INGREDIENT (
          ingred_name,
          unit
        )
      `);if(se)console.error("Refresh fetch error:",se);else if(Y){const te=Y.map(ne=>({inven_id:ne.inven_id,quantity:ne.stock_quantity,updated:ne.last_updated,name:ne.INGREDIENT?.ingred_name,unit:ne.INGREDIENT?.unit,ingred_id:ne.ingred_id}));console.log("Inventory refreshed:",te),e(te)}console.log("=== SAVE CHANGES END ==="),be.success("Inventory saved successfully!",{duration:3e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}),D(!1)},V=Y=>{a(se=>se===Y?null:Y)},N=(Y,se,te)=>{Y.toString().startsWith("new-")?s(ne=>ne.map(R=>R.inven_id===Y?{...R,[se]:te}:R)):f(ne=>({...ne,[Y]:{...ne[Y],[se]:te}}))},H=[...t,...n].filter(Y=>(Y.name||"").toLowerCase().includes(A.toLowerCase()));return d.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 w-full border-2 border-[#AF524D] min-h-[80vh] max-h-[80vh] flex flex-col",children:[d.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center mb-8",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"Inventory Management"}),d.jsx("p",{className:"text-gray-600",children:"Manage your bakery ingredients and stock levels"})]}),d.jsx("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:d.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[d.jsx("input",{type:"text",placeholder:"Search by ingredient name...",value:A,onChange:Y=>E(Y.target.value),className:"w-full sm:w-80 border-2 border-gray-200 rounded-xl px-5 py-3 pl-12 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base"}),d.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})})]}),d.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50 rounded-xl border border-gray-200",children:d.jsx("div",{className:"overflow-auto h-full max-h-[45vh] pb-4",children:d.jsxs("table",{className:"w-full border-collapse table-fixed",children:[d.jsx("thead",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white sticky top-0 z-20",children:d.jsxs("tr",{children:[d.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/4",children:"Item Name"}),d.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/4",children:"Quantity"}),d.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/4",children:"Unit"}),d.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/4",children:"Last Updated"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200",children:H.map(Y=>{const se=r===Y.inven_id,te=h[Y.inven_id]||{},ne=l.id===Y.inven_id&&l.field==="name";return d.jsxs("tr",{className:`transition-all duration-200 cursor-pointer ${se?"bg-blue-50 border-l-4 border-l-blue-500 shadow-md":"hover:bg-gray-100 border-l-4 border-l-transparent"}`,onClick:()=>V(Y.inven_id),children:[d.jsx("td",{className:"py-6 px-6 align-top",children:d.jsx("div",{className:"space-y-2",children:ne?d.jsx("input",{type:"text",className:"border-2 border-gray-200 rounded-lg px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D]",value:g,onChange:R=>x(R.target.value),onBlur:()=>{N(Y.inven_id,"name",g),u({id:null,field:null})},autoFocus:!0}):d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h4",{className:"font-semibold text-gray-900 text-base",children:te.name??Y.name}),d.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:R=>{R.stopPropagation(),u({id:Y.inven_id,field:"name"}),x(te.name??Y.name)},children:"Edit"})]})})}),d.jsx("td",{className:"py-6 px-6 align-top",children:d.jsx("div",{className:"space-y-2",children:l.id===Y.inven_id&&l.field==="quantity"?d.jsx("input",{type:"number",className:"border-2 border-gray-200 rounded-lg px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D]",value:v,onChange:R=>b(R.target.value),onBlur:()=>{N(Y.inven_id,"quantity",v),u({id:null,field:null})},autoFocus:!0}):d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-lg font-semibold text-gray-900",children:te.quantity??Y.quantity}),d.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:R=>{R.stopPropagation(),u({id:Y.inven_id,field:"quantity"}),b(te.quantity??Y.quantity)},children:"Edit"})]})})}),d.jsx("td",{className:"py-6 px-6 align-top",children:d.jsx("div",{className:"space-y-2",children:l.id===Y.inven_id&&l.field==="unit"?d.jsx("input",{type:"text",className:"border-2 border-gray-200 rounded-lg px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D]",value:w,onChange:R=>_(R.target.value),onBlur:()=>{N(Y.inven_id,"unit",w),u({id:null,field:null})},autoFocus:!0}):d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800",children:te.unit??Y.unit??"pcs"}),d.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:R=>{R.stopPropagation(),u({id:Y.inven_id,field:"unit"}),_(te.unit??Y.unit??"pcs")},children:"Edit"})]})})}),d.jsx("td",{className:"py-6 px-6 align-top",children:d.jsx("div",{className:"space-y-2",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-sm text-gray-600",children:new Date(Y.updated).toLocaleDateString()}),d.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})]})})})]},Y.inven_id)})})]})})}),d.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-between gap-4",children:[d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{className:"bg-[#AF524D] hover:bg-[#8B3A3A] text-white px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:B,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Item"]})}),d.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${r?"bg-red-600 hover:bg-red-700 text-white hover:shadow-xl transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:F,disabled:!r,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Item"]})})]}),d.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${M?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white hover:shadow-xl transform hover:-translate-y-0.5"}`,onClick:L,disabled:M,children:d.jsx("div",{className:"flex items-center gap-2",children:M?d.jsxs(d.Fragment,{children:[d.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving Changes..."]}):d.jsxs(d.Fragment,{children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save All Changes"]})})})]})]})},F8=n=>n?n.startsWith("http://")||n.startsWith("https://")?n:ve.storage.from("cake").getPublicUrl(n).data.publicUrl:null,U8=()=>{const[n,e]=j.useState([]),[t,s]=j.useState([]),[r,a]=j.useState(null),[l,u]=j.useState({id:null,field:null}),[h,f]=j.useState({}),[g,x]=j.useState(""),[v,b]=j.useState(""),[w,_]=j.useState(""),[T,S]=j.useState(""),[A,E]=j.useState(null),[M,D]=j.useState(""),[B,F]=j.useState(!1),[L,V]=j.useState(null),[N,H]=j.useState(""),[Y,se]=j.useState(!1),[te,ne]=j.useState(""),[R,$]=j.useState("");j.useEffect(()=>{(async()=>{const{data:Ce,error:Te}=await ve.from("CAKE").select("*").order("name");Te?console.error("Error fetching cakes:",Te):(console.log("Fetched cakes from database:",Ce),e(Ce||[]))})()},[]);const Q=oe=>{a(Ce=>Ce===oe?null:oe)},pe=()=>{const oe=`new-${Date.now()}`;s([...t,{id:oe,name:"New Cake",theme:"Theme",description:"Description",tier:1,price:0,cake_img:"",isNew:!0}])},O=async()=>{if(!r)return;if(r.toString().startsWith("new-"))console.log("🗑️ Deleting new cake from local state:",r),s(t.filter(Ce=>Ce.id!==r)),a(null),be.success("Cake deleted successfully");else try{console.log("🗑️ Deleting existing cake from database:",r);const Ce=n.find(we=>we.cake_id===r),{error:Te}=await ve.from("CAKE").delete().eq("cake_id",r);if(Te){console.error("❌ Database deletion error:",Te),be.error(`Failed to delete cake: ${Te.message}`);return}if(console.log("✅ Cake deleted from database successfully"),Ce?.cake_img)try{console.log("🗑️ Attempting to delete cake image from storage:",Ce.cake_img);let we=Ce.cake_img;if(Ce.cake_img.includes("/storage/v1/object/public/cake/"))we=Ce.cake_img.split("/storage/v1/object/public/cake/")[1],console.log("📁 Extracted file path from URL:",we);else if(Ce.cake_img.startsWith("http")){const Ve=Ce.cake_img.split("/cake/");Ve.length>1&&(we=Ve[1],console.log("📁 Extracted file path from alternative URL:",we))}if(we&&we!==Ce.cake_img){console.log("🗑️ Deleting cake image from storage bucket:",we);const{error:Ve}=await ve.storage.from("cake").remove([we]);Ve?console.warn("⚠️ Storage deletion warning:",Ve):console.log("✅ Cake image deleted from storage successfully")}else console.log("⚠️ Could not extract valid file path for storage deletion")}catch(we){console.warn("⚠️ Storage deletion error:",we)}e(n.filter(we=>we.cake_id!==r)),a(null),be.success("Cake deleted successfully")}catch(Ce){console.error("❌ Unexpected error during deletion:",Ce),be.error("Failed to delete cake")}},q=(oe,Ce,Te)=>{console.log(`handleFieldChange called: id=${oe}, field=${Ce}, value=${Te}`);let we=Te;Ce==="tier"?we=parseInt(Te)||1:Ce==="price"&&(we=parseFloat(Te)||0),oe&&oe.toString().startsWith("new-")?s(Ee=>Ee.map(Ge=>Ge.id===oe?{...Ge,[Ce]:we}:Ge)):f(Ee=>{const Ge={...Ee,[oe]:{...Ee[oe],[Ce]:we}};return console.log(`Updated editedValues for ID ${oe}:`,Ge[oe]),Ge})},fe=(oe,Ce)=>{V(oe),H(Ce),F(!0)},me=()=>{L&&(q(L,"description",N),F(!1),V(null),H(""))},_e=()=>{F(!1),V(null),H("")},re=async(oe,Ce)=>{const Te=oe.target.files[0];if(Te)try{E(Ce);const Ve=[...n,...t].find(Zt=>Zt.cake_id===Ce||Zt.id===Ce)?.name||"cake",Ee=Te.name.split(".").pop(),Se=`${Ve.replace(/[^a-zA-Z0-9]/g,"_").toLowerCase()}_${Date.now()}.${Ee}`,{error:it}=await ve.storage.from("cake").upload(Se,Te);if(it){console.error("Error uploading image:",it),E(null);return}const{data:{publicUrl:Gt}}=ve.storage.from("cake").getPublicUrl(Se);q(Ce,"cake_img",Gt),E(null),console.log("Image uploaded successfully:",Gt),console.log("Stored URL in database:",Gt),be.success("Image uploaded successfully!",{duration:2e3,position:"top-center"})}catch(we){console.error("Error in image upload:",we),E(null),be.error("Failed to upload image. Please try again.",{duration:4e3,position:"top-center"})}},xe=async()=>{if(Y)return;se(!0),console.log("=== SAVE CAKES CHANGES START ==="),console.log("New rows to save:",t),console.log("Edited rows to save:",h);for(const Te of t){if(console.log("Processing new cake:",Te),!Te.name){console.warn("Skipping incomplete new cake:",Te);continue}try{const{error:we}=await ve.from("CAKE").insert([{name:Te.name,theme:Te.theme,description:Te.description,tier:parseInt(Te.tier)||1,price:parseFloat(Te.price)||0,cake_img:Te.cake_img||""}]);we?(console.error("Insert error:",we),be.error(`Failed to save cake "${Te.name}": ${we.message}`,{duration:4e3,position:"top-center"})):console.log(`Successfully inserted new cake: "${Te.name}"`)}catch(we){console.error("Error processing new cake:",we)}}console.log("All editedValues before processing:",h);for(const[Te,we]of Object.entries(h)){if(console.log(`Processing edited cake ${Te}:`,we),!Te||Te==="undefined"){console.warn("Skipping row with invalid ID:",Te);continue}const Ve=n.find(Ee=>Ee.cake_id===parseInt(Te)||Ee.cake_id===Te);console.log(`Original row for ID ${Te}:`,Ve);try{const Ee={name:we.name!==void 0?we.name:Ve?.name,theme:we.theme!==void 0?we.theme:Ve?.theme,description:we.description!==void 0?we.description:Ve?.description,tier:we.tier!==void 0?parseInt(we.tier)||1:Ve?.tier,price:we.price!==void 0?parseFloat(we.price)||0:Ve?.price,cake_img:we.cake_img!==void 0?we.cake_img:Ve?.cake_img||""};console.log(`Update data for cake ID ${Te}:`,Ee);const{error:Ge}=await ve.from("CAKE").update(Ee).eq("cake_id",Te);Ge?(console.error(`Update error for cake ID ${Te}:`,Ge),be.error(`Failed to update cake: ${Ge.message}`,{duration:4e3,position:"top-center"})):console.log(`Successfully updated cake with ID ${Te}`)}catch(Ee){console.error("Error processing updated cake:",Ee)}}f({}),s([]),u({id:null,field:null}),a(null),console.log("Refreshing cakes...");const{data:oe,error:Ce}=await ve.from("CAKE").select("*").order("name");Ce?console.error("Refresh fetch error:",Ce):oe&&(console.log("Cakes refreshed:",oe),e(oe)),console.log("=== SAVE CAKES CHANGES END ==="),be.success("Cakes saved successfully!",{duration:3e3,position:"top-center",style:{background:"#10B981",color:"#fff",borderRadius:"8px",padding:"12px 16px"}}),se(!1)},de=[...t,...n].filter(oe=>{const Ce=oe.name||"",Te=oe.theme||"",we=oe.tier||1,Ve=Ce.toLowerCase().includes(M.toLowerCase()),Ee=te===""||Te.toLowerCase().includes(te.toLowerCase()),Ge=R===""||we.toString()===R;return Ve&&Ee&&Ge}),je=[...new Set([...n,...t].map(oe=>oe.theme).filter(Boolean))],Oe=[...new Set([...n,...t].map(oe=>oe.tier).filter(Boolean))].sort((oe,Ce)=>oe-Ce);return d.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 w-full border-2 border-[#AF524D] min-h-[80vh] max-h-[80vh] flex flex-col",children:[d.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center mb-8",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"Cakes Management"}),d.jsx("p",{className:"text-gray-600",children:"Manage your cake catalog and designs"})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:[d.jsxs("div",{className:"relative",children:[d.jsxs("select",{value:te,onChange:oe=>ne(oe.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-3 pl-10 pr-8 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base appearance-none bg-white",children:[d.jsx("option",{value:"",children:"All Themes"}),je.map(oe=>d.jsx("option",{value:oe,children:oe},oe))]}),d.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),d.jsx("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d.jsxs("div",{className:"relative",children:[d.jsxs("select",{value:R,onChange:oe=>$(oe.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-3 pl-10 pr-8 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base appearance-none bg-white",children:[d.jsx("option",{value:"",children:"All Tiers"}),Oe.map(oe=>d.jsxs("option",{value:oe,children:[oe," Tier",oe>1?"s":""]},oe))]}),d.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),d.jsx("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"text",placeholder:"Search by cake name...",value:M,onChange:oe=>D(oe.target.value),className:"border-2 border-gray-200 rounded-xl px-5 py-3 pl-12 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base"}),d.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})]}),d.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50 rounded-xl border border-gray-200",children:d.jsx("div",{className:"overflow-auto h-full max-h-[45vh] pb-4",children:d.jsxs("table",{className:"w-full border-collapse table-fixed",children:[d.jsx("thead",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white sticky top-0 z-20",children:d.jsxs("tr",{children:[d.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Cake Name"}),d.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Theme"}),d.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Description"}),d.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Tiers"}),d.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Price"}),d.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Cake Image"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200",children:de.map(oe=>{const Ce=oe.cake_id||oe.id,Te=r===Ce,we=h[Ce]||{},Ve=l.id===Ce&&l.field==="name";return d.jsxs("tr",{className:`transition-all duration-200 cursor-pointer ${Te?"bg-blue-50 border-l-4 border-l-blue-500 shadow-md":"hover:bg-gray-100 border-l-4 border-l-transparent"}`,onClick:()=>Q(Ce),children:[d.jsx("td",{className:"py-2 px-4",children:d.jsx("div",{className:"flex items-center gap-2",children:Ve?d.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-40",value:g,onChange:Ee=>x(Ee.target.value),onBlur:()=>{q(Ce,"name",g),u({id:null,field:null})},autoFocus:!0}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex-grow truncate",children:we.name??oe.name}),d.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:Ee=>{Ee.stopPropagation(),u({id:Ce,field:"name"}),x(we.name??oe.name)},children:d.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),d.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-name-${Ce}`)})]})})}),d.jsx("td",{className:"py-2 px-4",children:d.jsx("div",{className:"flex items-center gap-2",children:l.id===Ce&&l.field==="theme"?d.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-20",value:v,onChange:Ee=>b(Ee.target.value),onBlur:()=>{q(Ce,"theme",v),u({id:null,field:null})},autoFocus:!0}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex-grow truncate",children:we.theme??oe.theme}),d.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:Ee=>{Ee.stopPropagation(),u({id:Ce,field:"theme"}),b(we.theme??oe.theme)},children:d.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),d.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-theme-${Ce}`)})]})})}),d.jsx("td",{className:"py-2 px-4",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"flex-grow truncate",children:we.description??oe.description}),d.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:Ee=>{Ee.stopPropagation(),fe(Ce,we.description??oe.description)},children:d.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),d.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-description-${Ce}`)})]})}),d.jsx("td",{className:"py-2 px-4",children:d.jsx("div",{className:"flex items-center gap-2",children:l.id===Ce&&l.field==="tier"?d.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-16",value:T,onChange:Ee=>S(Ee.target.value),onBlur:()=>{q(Ce,"tier",parseInt(T)||1),u({id:null,field:null})},autoFocus:!0}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"truncate",children:we.tier??oe.tier}),d.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:Ee=>{Ee.stopPropagation(),u({id:Ce,field:"tier"}),S(we.tier??oe.tier)},children:d.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),d.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-tier-${Ce}`)})]})})}),d.jsx("td",{className:"py-2 px-4",children:d.jsx("div",{className:"flex items-center gap-2",children:l.id===Ce&&l.field==="price"?d.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-16",value:w,onChange:Ee=>_(Ee.target.value),onBlur:()=>{q(Ce,"price",parseFloat(w)||0),u({id:null,field:null})},autoFocus:!0}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"truncate",children:["₱",we.price??oe.price]}),d.jsx("span",{className:"cursor-pointer hover:text-blue-700 flex-shrink-0",onClick:Ee=>{Ee.stopPropagation(),u({id:Ce,field:"price"}),_(we.price??oe.price)},children:d.jsxs("svg",{width:"3vw",height:"3vh",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M11.375 11.375H9.75C8.88805 11.375 8.0614 11.7174 7.4519 12.3269C6.84241 12.9364 6.5 13.763 6.5 14.625V29.25C6.5 30.112 6.84241 30.9386 7.4519 31.5481C8.0614 32.1576 8.88805 32.5 9.75 32.5H24.375C25.237 32.5 26.0636 32.1576 26.6731 31.5481C27.2826 30.9386 27.625 30.112 27.625 29.25V27.625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),d.jsx("path",{d:"M26 8.12517L30.875 13.0002M33.1256 10.7008C33.7656 10.0608 34.1252 9.19277 34.1252 8.28767C34.1252 7.38258 33.7656 6.51455 33.1256 5.87455C32.4856 5.23455 31.6176 4.875 30.7125 4.875C29.8074 4.875 28.9394 5.23455 28.2994 5.87455L14.625 19.5002V24.3752H19.5L33.1256 10.7008Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},`edit-price-${Ce}`)})]})})}),d.jsx("td",{className:"py-2 px-4",children:d.jsx("div",{className:"relative",children:A===Ce?d.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded border-2 border-dashed border-gray-300 flex items-center justify-center",children:d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#AF524D]"}),d.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Uploading..."})]})}):we.cake_img||oe.cake_img?d.jsxs("div",{className:"relative w-16 h-16 rounded overflow-hidden border border-gray-300 group",children:[d.jsx("img",{src:F8(we.cake_img||oe.cake_img),alt:"Cake",className:"w-full h-full object-cover",onError:Ee=>{Ee.target.style.display="none",Ee.target.nextSibling.style.display="flex"}}),d.jsx("div",{className:"absolute inset-0 bg-gray-200 flex items-center justify-center hidden",children:d.jsx("span",{className:"text-xs text-gray-500",children:"No Image"})}),d.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 flex items-center justify-center",children:d.jsxs("label",{className:"cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[d.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),d.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Ee=>re(Ee,Ce),onClick:Ee=>Ee.stopPropagation()})]})})]}):d.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded border-2 border-dashed border-gray-300 flex items-center justify-center hover:border-[#AF524D] transition-colors duration-200",children:d.jsxs("label",{className:"cursor-pointer flex flex-col items-center",children:[d.jsx("svg",{className:"w-6 h-6 text-gray-400 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),d.jsx("span",{className:"text-xs text-gray-500",children:"Upload"}),d.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Ee=>re(Ee,Ce),onClick:Ee=>Ee.stopPropagation()})]})})})})]},Ce)})})]})})}),d.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-between gap-4",children:[d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{className:"bg-[#AF524D] hover:bg-[#8B3A3A] text-white px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:pe,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Cake"]})}),d.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${r?"bg-red-600 hover:bg-red-700 text-white hover:shadow-xl transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:O,disabled:!r,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Cake"]})})]}),d.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${Y?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white hover:shadow-xl transform hover:-translate-y-0.5"}`,onClick:xe,disabled:Y,children:d.jsx("div",{className:"flex items-center gap-2",children:Y?d.jsxs(d.Fragment,{children:[d.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving Changes..."]}):d.jsxs(d.Fragment,{children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save All Changes"]})})})]}),B&&d.jsx("div",{className:"fixed inset-0 bg-gray/50 backdrop-blur-sm flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-w-md border-4 border-[#AF524D] shadow-2xl",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4 text-[#381914]",children:"Edit Description"}),d.jsx("textarea",{value:N,onChange:oe=>H(oe.target.value),className:"w-full h-32 p-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-transparent",placeholder:"Enter cake description...",autoFocus:!0}),d.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[d.jsx("button",{onClick:_e,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",children:"Cancel"}),d.jsx("button",{onClick:me,className:"px-4 py-2 bg-[#AF524D] text-white rounded-lg hover:bg-[#8B3D3A] transition-colors cursor-pointer",children:"Save"})]})]})})]})},ql=n=>n?n.startsWith("http://")||n.startsWith("https://")?n:ve.storage.from("cake").getPublicUrl(n).data.publicUrl:null,z8=()=>{const[n,e]=j.useState([]),[t,s]=j.useState([]),[r,a]=j.useState(null),[l,u]=j.useState({id:null,field:null}),[h,f]=j.useState({}),[g,x]=j.useState(""),[v,b]=j.useState(""),[w,_]=j.useState(""),[T,S]=j.useState(""),[A,E]=j.useState(""),[M,D]=j.useState(""),[B,F]=j.useState(""),[L,V]=j.useState(""),[N,H]=j.useState(""),[Y,se]=j.useState([]),[te,ne]=j.useState([]),[R,$]=j.useState(""),[Q,pe]=j.useState(!1),[O,q]=j.useState(!1),[fe,me]=j.useState(null),[_e,re]=j.useState(!1),[xe,de]=j.useState(null),[je,Oe]=j.useState(!1),[oe,Ce]=j.useState(null),[Te,we]=j.useState(null),[Ve,Ee]=j.useState(!1);j.useEffect(()=>{(async()=>{const{data:Me,error:ye}=await ve.from("ORDER").select(`
          order_id,
          order_date,
          delivery_method,
          order_schedule,
          delivery_address,
          order_status,
          cus_id,
          CUSTOMER (
            cus_id,
            cus_fname,
            cus_lname,
            cus_celno,
            email
          ),
          PAYMENT (
            payment_id,
            payment_method,
            amount_paid,
            payment_date,
            payment_status,
            receipt
          ),
          "CAKE-ORDERS" (
            co_id,
            quantity,
            cake_id,
            CAKE (
              cake_id,
              name,
              cake_img,
              price,
              theme,
              tier,
              description
            )
          )
        `);if(console.log("Query result:",{data:Me,error:ye}),Me&&Me.length>0&&(console.log("Raw database response - first order:",Me[0]),console.log("Customer data from first order:",Me[0].customer),console.log("Cake orders from first order:",Me[0]["CAKE-ORDERS"]),console.log("Testing different customer relationship names:"),console.log("data[0].CUSTOMER:",Me[0].CUSTOMER),console.log("data[0].customer:",Me[0].customer),console.log("data[0].Customer:",Me[0].Customer),console.log("data[0].customers:",Me[0].customers)),ye)console.error("Database error:",ye);else{const ce=Me.flatMap(le=>!le["CAKE-ORDERS"]||le["CAKE-ORDERS"].length===0?[{order_id:le.order_id,co_id:null,customer_id:le.cus_id,customer:le.CUSTOMER?`${le.CUSTOMER.cus_fname} ${le.CUSTOMER.cus_lname}`:"Unknown Customer",customer_email:le.CUSTOMER?.email||"N/A",customer_phone:le.CUSTOMER?.cus_celno||"N/A",cake:"No Cake Assigned",cake_img:null,cake_img_url:null,cake_price:0,cake_theme:"N/A",cake_tier:"N/A",cake_description:"N/A",scheduled_date:le.order_schedule,order_type:le.delivery_method,delivery_address:le.delivery_address||"N/A",cake_id:null,quantity:0,amount_paid:le.PAYMENT?.[0]?.amount_paid||0,payment_date:le.PAYMENT?.[0]?.payment_date,payment_status:le.PAYMENT?.[0]?.payment_status||"Pending",payment_method:le.PAYMENT?.[0]?.payment_method||"Cash",receipt_path:le.PAYMENT?.[0]?.receipt,order_status:le.order_status,order_date:le.order_date}]:le["CAKE-ORDERS"].map(ot=>({order_id:le.order_id,co_id:ot.co_id,customer_id:le.cus_id,customer:le.CUSTOMER?`${le.CUSTOMER.cus_fname} ${le.CUSTOMER.cus_lname}`:"Unknown Customer",customer_email:le.CUSTOMER?.email||"N/A",customer_phone:le.CUSTOMER?.cus_celno||"N/A",cake:ot.CAKE?.name||"Unknown Cake",cake_img:ot.CAKE?.cake_img,cake_img_url:ql(ot.CAKE?.cake_img),cake_price:ot.CAKE?.price||0,cake_theme:ot.CAKE?.theme||"N/A",cake_tier:ot.CAKE?.tier||"N/A",cake_description:ot.CAKE?.description||"N/A",scheduled_date:le.order_schedule,order_type:le.delivery_method,delivery_address:le.delivery_address||"N/A",cake_id:ot.cake_id,quantity:ot.quantity||0,amount_paid:le.PAYMENT?.[0]?.amount_paid||0,payment_date:le.PAYMENT?.[0]?.payment_date,payment_status:le.PAYMENT?.[0]?.payment_status||"Pending",payment_method:le.PAYMENT?.[0]?.payment_method||"Cash",receipt_path:le.PAYMENT?.[0]?.receipt,order_status:le.order_status,order_date:le.order_date})));ce.length>0&&console.log("Customer info from first row:",{customer:ce[0].customer,customer_id:ce[0].customer_id,customer_email:ce[0].customer_email,customer_phone:ce[0].customer_phone}),e(ce)}})()},[]),j.useEffect(()=>{(async()=>{const{data:Me,error:ye}=await ve.from("CAKE").select("cake_id, name, cake_img, price, theme, tier, description").order("name");ye?console.error("Error fetching cakes:",ye):(se(Me||[]),console.log("Available cakes:",Me))})()},[]),j.useEffect(()=>{(async()=>{const{data:Me,error:ye}=await ve.from("CUSTOMER").select("cus_id, cus_fname, cus_lname, email, cus_celno").order("cus_fname");ye?console.error("Error fetching customers:",ye):(ne(Me||[]),console.log("Available customers:",Me))})()},[]);const Ge=()=>{const ie=`new-${Date.now()}`;s([...t,{order_id:ie,co_id:ie,customer_id:null,customer:"Select Customer",customer_email:"",customer_phone:"",cake:"Select Cake",cake_img:null,cake_img_url:null,cake_price:0,cake_theme:"",cake_tier:"",cake_description:"",scheduled_date:new Date().toISOString().split("T")[0],order_type:"pickup",delivery_address:"Delivery Address",cake_id:null,quantity:1,amount_paid:0,payment_date:new Date().toISOString().split("T")[0],payment_status:"Pending",payment_method:"Cash",receipt_path:null,order_status:"Pending",order_date:new Date().toISOString().split("T")[0],isNew:!0}])},Se=async()=>{if(!r)return;if(r.toString().startsWith("new-"))console.log("🗑️ Deleting new order from local state:",r),s(t.filter(Me=>Me.order_id!==r)),a(null),be.success("Order deleted successfully");else try{console.log("🗑️ Deleting existing order from database:",r);const Me=n.find(ce=>ce.order_id===r),{error:ye}=await ve.from("CAKE-ORDERS").delete().eq("order_id",r);if(ye){console.error("❌ Database deletion error:",ye),be.error(`Failed to delete order: ${ye.message}`);return}if(console.log("✅ Order deleted from database successfully"),Me?.receipt_path)try{console.log("🗑️ Attempting to delete receipt from storage:",Me.receipt_path);let ce=Me.receipt_path;if(Me.receipt_path.includes("/storage/v1/object/public/receipts/"))ce=Me.receipt_path.split("/storage/v1/object/public/receipts/")[1],console.log("📁 Extracted file path from URL:",ce);else if(Me.receipt_path.startsWith("http")){const le=Me.receipt_path.split("/receipts/");le.length>1&&(ce=le[1],console.log("📁 Extracted file path from alternative URL:",ce))}if(ce&&ce!==Me.receipt_path){console.log("🗑️ Deleting receipt from storage bucket:",ce);const{error:le}=await ve.storage.from("receipts").remove([ce]);le?console.warn("⚠️ Storage deletion warning:",le):console.log("✅ Receipt deleted from storage successfully")}else console.log("⚠️ Could not extract valid file path for storage deletion")}catch(ce){console.warn("⚠️ Storage deletion error:",ce)}e(n.filter(ce=>ce.order_id!==r)),a(null),be.success("Order deleted successfully")}catch(Me){console.error("❌ Unexpected error during deletion:",Me),be.error("Failed to delete order")}},it=async()=>{pe(!0);try{for(const ye of t){const ce=Y.find(sn=>sn.name===ye.cake),le=ce?ce.cake_id:null,ot=te.find(sn=>`${sn.cus_fname} ${sn.cus_lname}`===ye.customer),Un=ot?ot.cus_id:null,{error:va}=await ve.from("CAKE-ORDERS").insert({customer_id:Un,cake_id:le,scheduled_date:ye.scheduled_date,order_type:ye.order_type,delivery_address:ye.delivery_address,amount_paid:parseFloat(ye.amount_paid)||0,payment_date:ye.payment_date,payment_status:ye.payment_status,payment_method:ye.payment_method,receipt_path:ye.receipt_path});if(va){console.error("Error inserting new order:",va),be.error("Failed to save new order"),pe(!1);return}}for(const[ye,ce]of Object.entries(h)){if(ye.toString().startsWith("new-"))continue;const le={};if(ce.scheduled_date!==void 0&&(le.scheduled_date=ce.scheduled_date),ce.order_type!==void 0&&(le.order_type=ce.order_type),ce.delivery_address!==void 0&&(le.delivery_address=ce.delivery_address),ce.amount_paid!==void 0&&(le.amount_paid=parseFloat(ce.amount_paid)||0),ce.payment_date!==void 0&&(le.payment_date=ce.payment_date),ce.payment_status!==void 0&&(le.payment_status=ce.payment_status),ce.payment_method!==void 0&&(le.payment_method=ce.payment_method),ce.receipt_path!==void 0&&(le.receipt_path=ce.receipt_path),ce.cake!==void 0){const ot=Y.find(Un=>Un.name===ce.cake);le.cake_id=ot?ot.cake_id:null}if(ce.customer!==void 0){const ot=te.find(Un=>`${Un.cus_fname} ${Un.cus_lname}`===ce.customer);le.customer_id=ot?ot.cus_id:null}if(Object.keys(le).length>0){const{error:ot}=await ve.from("CAKE-ORDERS").update(le).eq("order_id",ye);if(ot){console.error("Error updating order:",ot),be.error("Failed to update order"),pe(!1);return}}}const{data:ie,error:Me}=await ve.from("ORDER").select(`
          order_id,
          order_date,
          delivery_method,
          order_schedule,
          delivery_address,
          order_status,
          cus_id,
          CUSTOMER (
            cus_id,
            cus_fname,
            cus_lname,
            cus_celno,
            email
          ),
          PAYMENT (
            payment_id,
            payment_method,
            amount_paid,
            payment_date,
            payment_status,
            receipt
          ),
          "CAKE-ORDERS" (
            co_id,
            quantity,
            cake_id,
            CAKE (
              cake_id,
              name,
              cake_img,
              price,
              theme,
              tier,
              description
            )
          )
        `);if(Me)console.error("Error refreshing data:",Me);else{const ye=ie.flatMap(ce=>!ce["CAKE-ORDERS"]||ce["CAKE-ORDERS"].length===0?[{order_id:ce.order_id,co_id:null,customer_id:ce.cus_id,customer:ce.CUSTOMER?`${ce.CUSTOMER.cus_fname} ${ce.CUSTOMER.cus_lname}`:"Unknown Customer",customer_email:ce.CUSTOMER?.email||"N/A",customer_phone:ce.CUSTOMER?.cus_celno||"N/A",cake:"No Cake Assigned",cake_img:null,cake_img_url:null,cake_price:0,cake_theme:"N/A",cake_tier:"N/A",cake_description:"N/A",scheduled_date:ce.order_schedule,order_type:ce.delivery_method,delivery_address:ce.delivery_address||"N/A",cake_id:null,quantity:0,amount_paid:ce.PAYMENT?.[0]?.amount_paid||0,payment_date:ce.PAYMENT?.[0]?.payment_date,payment_status:ce.PAYMENT?.[0]?.payment_status||"Pending",payment_method:ce.PAYMENT?.[0]?.payment_method||"Cash",receipt_path:ce.PAYMENT?.[0]?.receipt,order_status:ce.order_status,order_date:ce.order_date}]:ce.CAKE-ORDERS.map(le=>({order_id:ce.order_id,co_id:le.co_id,customer_id:ce.cus_id,customer:ce.CUSTOMER?`${ce.CUSTOMER.cus_fname} ${ce.CUSTOMER.cus_lname}`:"Unknown Customer",customer_email:ce.CUSTOMER?.email||"N/A",customer_phone:ce.CUSTOMER?.cus_celno||"N/A",cake:le.CAKE?.name||"Unknown Cake",cake_img:le.CAKE?.cake_img,cake_img_url:ql(le.CAKE?.cake_img),cake_price:le.CAKE?.price||0,cake_theme:le.CAKE?.theme||"N/A",cake_tier:le.CAKE?.tier||"N/A",cake_description:le.CAKE?.description||"N/A",scheduled_date:ce.order_schedule,order_type:ce.delivery_method,delivery_address:ce.delivery_address||"N/A",cake_id:le.cake_id,quantity:le.quantity||0,amount_paid:ce.PAYMENT?.[0]?.amount_paid||0,payment_date:ce.PAYMENT?.[0]?.payment_date,payment_status:ce.PAYMENT?.[0]?.payment_status||"Pending",payment_method:ce.PAYMENT?.[0]?.payment_method||"Cash",receipt_path:ce.PAYMENT?.[0]?.receipt,order_status:ce.order_status,order_date:ce.order_date})));e(ye)}s([]),f({}),a(null),be.success("Changes saved successfully")}catch(ie){console.error("Error saving changes:",ie),be.error("Failed to save changes")}finally{pe(!1)}},Gt=ie=>{a(ie)},Zt=(ie,Me,ye)=>{if(f(ce=>({...ce,[ie]:{...ce[ie],[Me]:ye}})),Me==="cake"){const ce=Y.find(le=>le.name===ye);ce&&f(le=>({...le,[ie]:{...le[ie],cake_img_url:ql(ce.cake_img),cake_price:ce.price,cake_theme:ce.theme,cake_tier:ce.tier,cake_description:ce.description}}))}},Jt=ie=>{fe&&(Zt(fe,"cake",ie.name),f(Me=>({...Me,[fe]:{...Me[fe],cake_img_url:ql(ie.cake_img),cake_price:ie.price,cake_theme:ie.theme,cake_tier:ie.tier,cake_description:ie.description}}))),q(!1),me(null)},bn=ie=>{if(xe){const Me=`${ie.cus_fname} ${ie.cus_lname}`;Zt(xe,"customer",Me),f(ye=>({...ye,[xe]:{...ye[xe],customer_email:ie.email,customer_phone:ie.cus_celno}}))}re(!1),de(null)},Hs=async()=>{if(!(!Te||!oe)){Ee(!0);try{const ie=Te.name.split(".").pop(),Me=`receipt_${oe}_${Date.now()}.${ie}`,{error:ye}=await ve.storage.from("receipts").upload(Me,Te);if(ye)throw ye;const{data:{publicUrl:ce}}=ve.storage.from("receipts").getPublicUrl(Me),{error:le}=await ve.from("CAKE-ORDERS").update({receipt_path:ce}).eq("order_id",oe);if(le)throw le;e(n.map(ot=>ot.order_id===oe?{...ot,receipt_path:ce}:ot)),be.success("Receipt uploaded successfully"),Oe(!1),Ce(null),we(null)}catch(ie){console.error("Error uploading receipt:",ie),be.error("Failed to upload receipt")}finally{Ee(!1)}}},$s=[...t,...n].filter(ie=>{const Me=ie.customer||"",ye=ie.cake||"",ce=ie.cake_theme||"",le=ie.cake_tier||"";return Me.toLowerCase().includes(R.toLowerCase())||ye.toLowerCase().includes(R.toLowerCase())||ce.toLowerCase().includes(R.toLowerCase())||le.toLowerCase().includes(R.toLowerCase())});return d.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 w-full border-2 border-[#AF524D] min-h-[80vh] max-h-[80vh] flex flex-col",children:[d.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center mb-8",children:[d.jsx("div",{className:"flex-1",children:d.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"Cake Orders Management"})}),d.jsx("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:d.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[d.jsx("input",{type:"text",placeholder:"Search by customer, cake, theme, or tier...",value:R,onChange:ie=>$(ie.target.value),className:"w-full sm:w-80 border-2 border-gray-200 rounded-xl px-5 py-3 pl-12 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base"}),d.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})})]}),d.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50 rounded-xl border border-gray-200",children:d.jsx("div",{className:"overflow-auto h-full max-h-[45vh] pb-4",children:d.jsxs("table",{className:"w-full border-collapse table-fixed",children:[d.jsx("thead",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white sticky top-0 z-20",children:d.jsxs("tr",{children:[d.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Customer Details"}),d.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Cake Information"}),d.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Order Details"}),d.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Schedule & Delivery"}),d.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Payment Details"}),d.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/6",children:"Receipt"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200",children:$s.map(ie=>{const Me=r===ie.order_id,ye=h[ie.order_id]||{},ce=l.id===ie.order_id&&l.field==="scheduled_date";return l.id===ie.order_id&&l.field,l.id===ie.order_id&&l.field,l.id===ie.order_id&&l.field,l.id===ie.order_id&&l.field,l.id===ie.order_id&&l.field,l.id===ie.order_id&&l.field,d.jsxs("tr",{className:`transition-all duration-200 cursor-pointer ${Me?"bg-blue-50 border-l-4 border-l-blue-500 shadow-md":"hover:bg-gray-100 border-l-4 border-l-transparent"}`,onClick:()=>Gt(ie.order_id),children:[d.jsx("td",{className:"py-6 px-6 align-top",children:d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h4",{className:"font-semibold text-gray-900 text-base",children:ye.customer??ie.customer}),d.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium px-3 py-1 rounded-lg hover:bg-blue-50 transition-colors",onClick:le=>{le.stopPropagation(),de(ie.order_id),re(!0)},children:"Edit"})]}),d.jsxs("div",{className:"space-y-2 text-sm",children:[d.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),ye.customer_email??ie.customer_email]}),d.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),ye.customer_phone??ie.customer_phone]})]})]})}),d.jsx("td",{className:"py-6 px-6 align-top",children:d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"w-16 h-16 flex-shrink-0",children:[ye.cake_img_url||ie.cake_img_url?d.jsx("img",{src:ye.cake_img_url||ie.cake_img_url,alt:ye.cake||ie.cake||"Cake",className:"w-full h-full object-cover rounded-lg border-2 border-gray-200 shadow-sm",onError:le=>{le.target.style.display="none",le.target.nextSibling.style.display="flex"}}):null,(!(ye.cake_img_url||ie.cake_img_url)||(ye.cake_img_url||ie.cake_img_url)==="")&&d.jsx("div",{className:"w-full h-full bg-gray-200 rounded-lg border-2 border-gray-300 flex items-center justify-center text-gray-500 text-xs font-medium",children:"No Image"})]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-semibold text-gray-900 text-base truncate",children:ye.cake??ie.cake}),d.jsxs("p",{className:"text-lg font-bold text-[#AF524D]",children:["₱",(ye.cake_price??ie.cake_price).toLocaleString()]}),d.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:ye.cake_description??ie.cake_description})]})]}),d.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium px-3 py-1 rounded-lg hover:bg-blue-50 transition-colors",onClick:le=>{le.stopPropagation(),me(ie.order_id),q(!0)},children:"Change Cake"})]})}),d.jsx("td",{className:"py-6 px-6 align-top",children:d.jsxs("div",{className:"space-y-2 text-sm",children:[d.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9zm9-3h-2v3H8V6h8z"})}),d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Quantity:"})]}),d.jsx("p",{className:"text-base font-medium text-gray-900",children:ye.quantity??ie.quantity}),d.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l3-7m3 7V4M12 10V2m0 14a2 2 0 100-4 2 2 0 000 4zm-8-6a3 3 0 11-6 0 3 3 0 016 0z"})}),d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Theme:"})]}),d.jsx("p",{className:"text-base font-medium text-gray-900",children:ye.cake_theme??ie.cake_theme}),d.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H7a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2"})}),d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tier:"})]}),d.jsx("p",{className:"text-base font-medium text-gray-900",children:ye.cake_tier??ie.cake_tier}),d.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Order Status:"})]}),d.jsx("p",{className:"text-base font-medium text-gray-900",children:ye.order_status??ie.order_status})]})}),d.jsx("td",{className:"py-6 px-6 align-top",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Scheduled Date:"})]}),ce?d.jsx("input",{type:"date",className:"border-2 border-gray-200 rounded-lg px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D]",value:w,onChange:le=>_(le.target.value),onBlur:()=>{Zt(ie.order_id,"scheduled_date",w),u({id:null,field:null})},autoFocus:!0}):d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:"text-base font-medium text-gray-900",children:ye.scheduled_date?new Date(ye.scheduled_date).toLocaleDateString():new Date(ie.scheduled_date).toLocaleDateString()}),d.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:le=>{le.stopPropagation(),u({id:ie.order_id,field:"scheduled_date"}),_(ye.scheduled_date??ie.scheduled_date)},children:"Edit"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Order Type:"})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${(ye.order_type??ie.order_type)==="Pickup"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:ye.order_type??ie.order_type}),d.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:le=>{le.stopPropagation(),u({id:ie.order_id,field:"order_type"}),S(ye.order_type??ie.order_type)},children:"Edit"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Delivery Address:"})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:"text-sm text-gray-600 max-w-32 truncate",children:ye.delivery_address??ie.delivery_address}),d.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:le=>{le.stopPropagation(),u({id:ie.order_id,field:"delivery_address"}),E(ye.delivery_address??ie.delivery_address)},children:"Edit"})]})]})]})}),d.jsx("td",{className:"py-6 px-6 align-top",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Amount:"})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("p",{className:"text-xl font-bold text-[#AF524D]",children:["₱",(ye.amount_paid??ie.amount_paid).toLocaleString()]}),d.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:le=>{le.stopPropagation(),u({id:ie.order_id,field:"amount_paid"}),D(ye.amount_paid??ie.amount_paid)},children:"Edit"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m2 0h1m-1 0h1m1 0h1m-1 0h1m1 0h1m-1 0h1m1 0h1M7 15h1m2 0h1m-1 0h1m1 0h1m-1 0h1m1 0h1m-1 0h1m1 0h1"})}),d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Payment Method:"})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm font-medium",children:ye.payment_method??ie.payment_method}),d.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:le=>{le.stopPropagation(),u({id:ie.order_id,field:"payment_method"}),F(ye.payment_method??ie.payment_method)},children:"Edit"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Payment Status:"})]}),d.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${(ye.payment_status??ie.payment_status)==="Paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:ye.payment_status??ie.payment_status})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Payment Date:"})]}),d.jsx("p",{className:"text-sm text-gray-600",children:ye.payment_date?new Date(ye.payment_date).toLocaleDateString():ie.payment_date?new Date(ie.payment_date).toLocaleDateString():"Not specified"})]})]})}),d.jsx("td",{className:"py-6 px-6 align-top",children:d.jsxs("div",{className:"space-y-3",children:[d.jsx("div",{className:"text-center",children:ye.receipt_path??ie.receipt_path?d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:d.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),d.jsx("span",{className:"text-sm font-medium text-green-700",children:"Receipt Uploaded"})]}):d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:d.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),d.jsx("span",{className:"text-sm font-medium text-gray-500",children:"No Receipt"})]})}),d.jsx("button",{className:"w-full text-blue-600 hover:text-blue-800 text-sm font-medium px-4 py-2 rounded-lg hover:bg-blue-50 transition-colors border border-blue-200",onClick:le=>{le.stopPropagation(),Ce(ie.order_id),Oe(!0)},children:ye.receipt_path??ie.receipt_path?"Change Receipt":"Upload Receipt"})]})})]},ie.order_id)})})]})})}),d.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-between gap-4",children:[d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{className:"bg-[#AF524D] hover:bg-[#8B3A3A] text-white px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:Ge,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Order"]})}),d.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${r?"bg-red-600 hover:bg-red-700 text-white hover:shadow-xl transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:Se,disabled:!r,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Order"]})})]}),d.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${Q?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white hover:shadow-xl transform hover:-translate-y-0.5"}`,onClick:it,disabled:Q,children:d.jsx("div",{className:"flex items-center gap-2",children:Q?d.jsxs(d.Fragment,{children:[d.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving Changes..."]}):d.jsxs(d.Fragment,{children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save All Changes"]})})})]}),O&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl p-8 w-full max-w-6xl max-h-[90vh] overflow-y-auto border-2 border-[#AF524D] shadow-2xl",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold text-[#381914]",children:"Select a Cake"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Choose from available cakes in the catalog"})]}),d.jsx("button",{onClick:()=>{q(!1),me(null)},className:"text-gray-500 hover:text-gray-700 text-3xl font-bold cursor-pointer hover:bg-gray-100 rounded-full w-10 h-10 flex items-center justify-center transition-colors",children:"×"})]}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:Y.map(ie=>d.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-4 cursor-pointer hover:border-[#AF524D] hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1",onClick:()=>Jt(ie),children:[d.jsxs("div",{className:"aspect-square mb-4",children:[ie.cake_img?d.jsx("img",{src:ql(ie.cake_img),alt:ie.name,className:"w-full h-full object-cover rounded-lg border-2 border-gray-200",onError:Me=>{Me.target.style.display="none",Me.target.nextSibling.style.display="flex"}}):null,(!ie.cake_img||ie.cake_img==="")&&d.jsx("div",{className:"w-full h-full bg-gray-200 rounded-lg border-2 border-gray-300 flex items-center justify-center text-gray-500 text-sm font-medium",children:"No Image"})]}),d.jsx("h4",{className:"font-semibold text-gray-800 text-center text-sm mb-2 truncate",children:ie.name}),d.jsxs("div",{className:"space-y-1 text-center",children:[d.jsxs("p",{className:"text-lg font-bold text-[#AF524D]",children:["₱",ie.price?.toLocaleString()||"0"]}),d.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-600",children:[d.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:ie.theme}),d.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full",children:[ie.tier," Tier"]})]}),d.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:ie.description})]})]},ie.cake_id))}),d.jsx("div",{className:"mt-8 flex justify-end",children:d.jsx("button",{onClick:()=>{q(!1),me(null)},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-xl hover:bg-gray-400 transition-colors font-medium",children:"Cancel Selection"})})]})}),_e&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl p-8 w-full max-w-3xl max-h-[90vh] overflow-y-auto border-2 border-[#AF524D] shadow-2xl",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold text-[#381914]",children:"Select a Customer"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Choose from registered customers"})]}),d.jsx("button",{onClick:()=>{re(!1),de(null)},className:"text-gray-500 hover:text-gray-700 text-3xl font-bold cursor-pointer hover:bg-gray-100 rounded-full w-10 h-10 flex items-center justify-center transition-colors",children:"×"})]}),d.jsx("div",{className:"space-y-4",children:te.map(ie=>d.jsx("div",{className:"border-2 border-gray-200 rounded-xl p-6 cursor-pointer hover:border-[#AF524D] hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1",onClick:()=>bn(ie),children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("h4",{className:"font-semibold text-gray-800 text-lg mb-2",children:[ie.cus_fname," ",ie.cus_lname]}),d.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),ie.email]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),ie.cus_celno]})]})]}),d.jsx("div",{className:"text-blue-600",children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},ie.cus_id))}),d.jsx("div",{className:"mt-8 flex justify-end",children:d.jsx("button",{onClick:()=>{re(!1),de(null)},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-xl hover:bg-gray-400 transition-colors font-medium",children:"Cancel Selection"})})]})}),je&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl p-8 w-full max-w-md border-2 border-[#AF524D] shadow-2xl",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold text-[#381914]",children:"Upload Receipt"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Upload payment receipt for this order"})]}),d.jsx("button",{onClick:()=>{Oe(!1),Ce(null),we(null)},className:"text-gray-500 hover:text-gray-700 text-3xl font-bold cursor-pointer hover:bg-gray-100 rounded-full w-10 h-10 flex items-center justify-center transition-colors",children:"×"})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Select Receipt File"}),d.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-[#AF524D] transition-colors",children:[d.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:ie=>we(ie.target.files[0]),className:"w-full opacity-0 absolute inset-0 cursor-pointer"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:d.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),d.jsxs("div",{className:"text-sm text-gray-600",children:[d.jsx("span",{className:"font-medium text-[#AF524D]",children:"Click to upload"})," or drag and drop"]}),d.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, PDF up to 10MB"})]})]}),Te&&d.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:d.jsxs("p",{className:"text-sm text-green-800 font-medium",children:["Selected: ",Te.name]})})]}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx("button",{onClick:()=>{Oe(!1),Ce(null),we(null)},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-xl hover:bg-gray-400 transition-colors font-medium",children:"Cancel"}),d.jsx("button",{onClick:Hs,disabled:!Te||Ve,className:`px-6 py-3 rounded-xl font-medium transition-all duration-200 ${!Te||Ve?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}`,children:Ve?d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):"Upload Receipt"})]})]})]})})]})},Ql=n=>({"cake base":"cake base",icing:"icing",topping:"topping"})[n]||"misc",zg=(n,e=null)=>{if(console.log("🔗 getPublicImageUrl called with path:",n,"and type:",e),!n)return console.log("❌ No path provided, returning null"),null;if(n.startsWith("http://")||n.startsWith("https://"))return console.log("✅ Path is already a full URL:",n),n;let t=n;if(!n.includes("/")&&e){const r=Ql(e);r!=="misc"&&(t=`${r}/${n}`,console.log("📁 Added folder to path:",t))}const s=ve.storage.from("asset").getPublicUrl(t).data.publicUrl;return console.log("🔄 Generated public URL:",s),s},V8=()=>{const{session:n}=Ti(),[e,t]=j.useState([]),[s,r]=j.useState([]),[a,l]=j.useState(null),[u,h]=j.useState({id:null,field:null}),[f,g]=j.useState({}),[x,v]=j.useState(""),[b,w]=j.useState(""),[_,T]=j.useState(""),[S,A]=j.useState(""),[E,M]=j.useState(!1),[D,B]=j.useState(!1),[F,L]=j.useState(null),[V,N]=j.useState(null),[H,Y]=j.useState(!1),[se,te]=j.useState(null),ne=["cake base","icing","topping"];j.useEffect(()=>{(async()=>{if(!n?.user?.id)return;const{data:xe,error:de}=await ve.from("ADMIN").select("admin_id").eq("admin_uid",n.user.id).single();de?console.error("❌ Error fetching admin ID:",de):(console.log("✅ Current admin ID:",xe.admin_id),te(xe.admin_id))})()},[n]),j.useEffect(()=>{(async()=>{console.log("🔍 Fetching assets from database...");const{data:xe,error:de}=await ve.from("ASSET").select("*").order("asset_id");if(de)console.error("❌ Database error:",de),be.error("Failed to fetch assets");else{console.log("✅ Raw data from database:",xe);const je=xe.map(Oe=>{const oe=zg(Oe.src,Oe.type);return console.log(`🖼️ Asset ${Oe.asset_id}:`,{originalSrc:Oe.src,publicUrl:oe,type:Oe.type}),{asset_id:Oe.asset_id,src:Oe.src,src_url:oe,type:Oe.type,admin_id:Oe.admin_id}});console.log("📋 Mapped rows:",je),t(je)}})()},[]),j.useEffect(()=>()=>{me()},[s,e]);const R=()=>{const re=`new-${Date.now()}`;r([...s,{asset_id:re,src:"",src_url:null,type:"cake base",admin_id:se,isNew:!0}])},$=async()=>{if(!a)return;if(a.toString().startsWith("new-"))console.log("🗑️ Deleting new asset from local state:",a),r(s.filter(xe=>xe.asset_id!==a)),l(null),be.success("Asset deleted successfully");else try{console.log("🗑️ Deleting existing asset from database:",a);const xe=e.find(je=>je.asset_id===a),{error:de}=await ve.from("ASSET").delete().eq("asset_id",a);if(de){console.error("❌ Database deletion error:",de),be.error(`Failed to delete asset: ${de.message}`);return}if(console.log("✅ Asset deleted from database successfully"),xe?.src)try{console.log("🗑️ Attempting to delete file from storage:",xe.src);let je=xe.src;if(xe.src.includes("/storage/v1/object/public/asset/"))je=xe.src.split("/storage/v1/object/public/asset/")[1],console.log("📁 Extracted file path from URL:",je);else if(xe.src.startsWith("http")){const Oe=xe.src.split("/asset/");Oe.length>1&&(je=Oe[1],console.log("📁 Extracted file path from alternative URL:",je))}if(je&&je!==xe.src){console.log("🗑️ Deleting file from storage bucket:",je);const{error:Oe}=await ve.storage.from("asset").remove([je]);Oe?console.warn("⚠️ Storage deletion warning:",Oe):console.log("✅ File deleted from storage successfully")}else console.log("⚠️ Could not extract valid file path for storage deletion")}catch(je){console.warn("⚠️ Storage deletion error:",je)}t(e.filter(je=>je.asset_id!==a)),l(null),be.success("Asset deleted successfully")}catch(xe){console.error("❌ Unexpected error during deletion:",xe),be.error("Failed to delete asset")}},Q=async()=>{M(!0);try{console.log("💾 Starting save process..."),console.log("⬆️ Uploading local files to storage...");for(const de of s)if(de.localFile){console.log(`📤 Uploading file for asset ${de.asset_id}...`);const je=f[de.asset_id]||{},Oe=je.type||de.type;console.log(`📂 Asset type: ${Oe} (edited: ${!!je.type})`);const oe=Ql(Oe);console.log(`📁 Using folder: ${oe}`);const Ce=de.localFile.name.split(".").pop(),Te=`asset_${Date.now()}_${Math.random().toString(36).substr(2,9)}.${Ce}`,we=`${oe}/${Te}`;console.log(`📄 Full file path: ${we}`);const{data:Ve,error:Ee}=await ve.storage.from("asset").upload(we,de.localFile);if(Ee){console.error("Error uploading file:",Ee),be.error(`Failed to upload file: ${Ee.message}`),M(!1);return}const{data:{publicUrl:Ge}}=ve.storage.from("asset").getPublicUrl(we);de.src_url&&de.src_url.startsWith("blob:")&&URL.revokeObjectURL(de.src_url),de.src=Ge,de.src_url=Ge,de.type=Oe,delete de.localFile,console.log(`✅ File uploaded successfully: ${Ge}`)}for(const de of e)if(de.localFile){console.log(`📤 Uploading file for existing asset ${de.asset_id}...`);const je=f[de.asset_id]||{},Oe=je.type||de.type;console.log(`📂 Asset type: ${Oe} (edited: ${!!je.type})`);const oe=Ql(Oe);console.log(`📁 Using folder: ${oe}`);const Ce=de.localFile.name.split(".").pop(),Te=`asset_${Date.now()}_${Math.random().toString(36).substr(2,9)}.${Ce}`,we=`${oe}/${Te}`;console.log(`📄 Full file path: ${we}`);const{data:Ve,error:Ee}=await ve.storage.from("asset").upload(we,de.localFile);if(Ee){console.error("Error uploading file:",Ee),be.error(`Failed to upload file: ${Ee.message}`),M(!1);return}const{data:{publicUrl:Ge}}=ve.storage.from("asset").getPublicUrl(we);de.src_url&&de.src_url.startsWith("blob:")&&URL.revokeObjectURL(de.src_url),de.src=Ge,de.src_url=Ge,de.type=Oe,delete de.localFile,console.log(`✅ File uploaded successfully: ${Ge}`)}console.log("💾 Saving new assets to database...");for(const de of s){const{error:je}=await ve.from("ASSET").insert({src:de.src,type:de.type,admin_id:de.admin_id});if(je){console.error("Error inserting new asset:",je),be.error("Failed to save new asset"),M(!1);return}}console.log("🔄 Updating existing assets...");for(const[de,je]of Object.entries(f)){if(de.toString().startsWith("new-"))continue;const Oe={};let oe=!1,Ce=null,Te=null;if(je.type!==void 0){const we=e.find(Ve=>Ve.asset_id===parseInt(de));if(we&&we.src){const Ve=we.type,Ee=je.type;if(Ve!==Ee){console.log(`📁 Type changed from "${Ve}" to "${Ee}" - moving file...`);let Ge=we.src;Ge.includes("/storage/v1/object/public/asset/")?Ge=Ge.split("/storage/v1/object/public/asset/")[1]:Ge.includes("/asset/")&&(Ge=Ge.split("/asset/")[1]);const Se=Ge.split("/").pop();Te=`${Ql(Ee)}/${Se}`,Ce=Ge,oe=!0,console.log(`📂 Moving file from: ${Ce} to: ${Te}`)}}}if(je.src!==void 0&&(Oe.src=je.src),je.type!==void 0&&(Oe.type=je.type),oe&&Ce&&Te)try{const{data:we,error:Ve}=await ve.storage.from("asset").copy(Ce,Te);if(Ve){console.error("❌ Error copying file:",Ve),be.error("Failed to move file to new folder"),M(!1);return}console.log("✅ File copied successfully"),Oe.src=Te;const{error:Ee}=await ve.storage.from("asset").remove([Ce]);Ee?console.error("❌ Error deleting old file:",Ee):console.log("✅ Old file deleted successfully")}catch(we){console.error("❌ Error during file move operation:",we),be.error("Failed to move file to new folder"),M(!1);return}if(Object.keys(Oe).length>0){const{error:we}=await ve.from("ASSET").update(Oe).eq("asset_id",de);if(we){console.error("Error updating asset:",we),be.error("Failed to update asset"),M(!1);return}}}console.log("🔄 Refreshing data...");const{data:re,error:xe}=await ve.from("ASSET").select("*").order("asset_id");if(xe)console.error("Error refreshing data:",xe);else{const de=re.map(je=>({asset_id:je.asset_id,src:je.src,src_url:zg(je.src,je.type),type:je.type,admin_id:je.admin_id}));t(de)}r([]),g({}),l(null),be.success("Changes saved successfully")}catch(re){console.error("Error saving changes:",re),be.error("Failed to save changes")}finally{M(!1)}},pe=re=>{l(re)},O=(re,xe,de)=>{g(je=>({...je,[re]:{...je[re],[xe]:de}}))},q=async()=>{if(!(!V||!F)){Y(!0);try{console.log("🚀 Starting local file processing..."),console.log("📁 Upload file:",V),console.log("🎯 Selected asset ID:",F);const re=URL.createObjectURL(V);console.log("🖼️ Created local preview URL:",re),F.toString().startsWith("new-")?(console.log("📝 This is a new asset, storing file locally..."),r(s.map(de=>de.asset_id===F?{...de,src:V.name,src_url:re,localFile:V}:de))):(console.log("📝 This is an existing asset, storing file locally..."),t(e.map(de=>de.asset_id===F?{...de,src:V.name,src_url:re,localFile:V}:de))),be.success('File selected successfully! Click "Save All Changes" to upload to storage.'),fe()}catch(re){console.error("❌ Error processing file:",re);const xe=re.message||"Unknown error occurred";be.error(`Failed to process file: ${xe}`)}finally{Y(!1)}}},fe=()=>{B(!1),L(null),N(null),Y(!1);const re=document.getElementById("asset-upload-input");re&&(re.value="")},me=()=>{s.forEach(re=>{re.src_url&&re.src_url.startsWith("blob:")&&URL.revokeObjectURL(re.src_url)}),e.forEach(re=>{re.src_url&&re.src_url.startsWith("blob:")&&URL.revokeObjectURL(re.src_url)})},_e=[...s,...e].filter(re=>{const xe=re.src||"",de=re.type||"",je=xe.toLowerCase().includes(_.toLowerCase())||de.toLowerCase().includes(_.toLowerCase()),Oe=S===""||de.toLowerCase().includes(S.toLowerCase());return je&&Oe});return d.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 w-full border-2 border-[#AF524D] min-h-[80vh] max-h-[80vh] flex flex-col",children:[d.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center mb-8",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h1",{className:"text-4xl font-bold text-[#381914] mb-2",children:"Assets Management"}),d.jsx("p",{className:"text-gray-600",children:"Manage your custom cake assets and decorations"})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:[d.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[d.jsx("input",{type:"text",placeholder:"Search by source or type...",value:_,onChange:re=>T(re.target.value),className:"w-full sm:w-80 border-2 border-gray-200 rounded-xl px-5 py-3 pl-12 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base"}),d.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),d.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[d.jsxs("select",{value:S,onChange:re=>A(re.target.value),className:"w-full sm:w-48 border-2 border-gray-200 rounded-xl px-4 py-3 pr-10 focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D] transition-all duration-200 text-base appearance-none bg-white",children:[d.jsx("option",{value:"",children:"All Types"}),ne.map(re=>d.jsx("option",{value:re,children:re.charAt(0).toUpperCase()+re.slice(1).replace("_"," ")},re))]}),d.jsx("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})]}),d.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50 rounded-xl border border-gray-200",children:d.jsx("div",{className:"overflow-auto h-full max-h-[45vh] pb-4",children:d.jsxs("table",{className:"w-full border-collapse table-fixed",children:[d.jsx("thead",{className:"bg-gradient-to-r from-[#AF524D] to-[#8B3A3A] text-white sticky top-0 z-20",children:d.jsxs("tr",{children:[d.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/3",children:"Preview"}),d.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/3",children:"Source"}),d.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold uppercase tracking-wide w-1/3",children:"Type"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200",children:_e.map(re=>{const xe=a===re.asset_id,de=f[re.asset_id]||{},je=u.id===re.asset_id&&u.field==="src",Oe=u.id===re.asset_id&&u.field==="type";return d.jsxs("tr",{className:`transition-all duration-200 cursor-pointer ${xe?"bg-blue-50 border-l-4 border-l-blue-500 shadow-md":"hover:bg-gray-100 border-l-4 border-l-transparent"}`,onClick:()=>pe(re.asset_id),children:[d.jsx("td",{className:"py-6 px-6 align-top",children:d.jsxs("div",{className:"relative w-20 h-20 rounded overflow-hidden border border-gray-300 group",children:[d.jsx("img",{src:de.src_url||re.src_url||zg(de.src||re.src,de.type||re.type),alt:"Asset preview",className:"w-full h-full object-cover",onError:oe=>{oe.target.style.display="none",oe.target.nextSibling.style.display="flex"}}),d.jsx("div",{className:"absolute inset-0 bg-gray-200 flex items-center justify-center hidden",children:d.jsx("span",{className:"text-xs text-gray-500",children:"No Image"})}),(re.localFile||de.src_url&&de.src_url.startsWith("blob:"))&&d.jsx("div",{className:"absolute top-1 right-1 bg-blue-500 text-white text-xs px-1 py-0.5 rounded",children:"Local"}),d.jsx("div",{className:"absolute bottom-1 left-1 bg-gray-800 text-white text-xs px-1 py-0.5 rounded opacity-75",children:Ql(de.type||re.type)})]})}),d.jsx("td",{className:"py-6 px-6 align-top",children:d.jsxs("div",{className:"space-y-2",children:[je?d.jsx("input",{type:"text",className:"border-2 border-gray-200 rounded-lg px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D]",value:x,onChange:oe=>v(oe.target.value),onBlur:()=>{O(re.asset_id,"src",x),h({id:null,field:null})},autoFocus:!0}):d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:"text-sm text-gray-600 max-w-48 truncate",children:(de.src??re.src)||"No source"}),d.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:oe=>{oe.stopPropagation(),h({id:re.asset_id,field:"src"}),v(de.src??re.src)},children:"Edit"})]}),d.jsx("button",{className:"w-full text-blue-600 hover:text-blue-800 text-sm font-medium px-3 py-2 rounded-lg hover:bg-blue-50 transition-colors border border-blue-200",onClick:oe=>{oe.stopPropagation(),L(re.asset_id),B(!0)},children:"Upload File"})]})}),d.jsx("td",{className:"py-6 px-6 align-top",children:d.jsx("div",{className:"space-y-2",children:Oe?d.jsx("select",{className:"border-2 border-gray-200 rounded-lg px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-[#AF524D] focus:border-[#AF524D]",value:b,onChange:oe=>w(oe.target.value),onBlur:()=>{O(re.asset_id,"type",b),h({id:null,field:null})},autoFocus:!0,children:ne.map(oe=>d.jsx("option",{value:oe,children:oe.charAt(0).toUpperCase()+oe.slice(1).replace("_"," ")},oe))}):d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${(de.type??re.type)==="cake base"?"bg-amber-100 text-amber-800":(de.type??re.type)==="icing"?"bg-pink-100 text-pink-800":(de.type??re.type)==="topping"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:(de.type??re.type)?.charAt(0).toUpperCase()+(de.type??re.type)?.slice(1).replace("_"," ")||"Unknown"}),d.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",onClick:oe=>{oe.stopPropagation(),h({id:re.asset_id,field:"type"}),w(de.type??re.type)},children:"Edit"})]})})})]},re.asset_id)})})]})})}),d.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-between gap-4",children:[d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{className:"bg-[#AF524D] hover:bg-[#8B3A3A] text-white px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:R,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Asset"]})}),d.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${a?"bg-red-600 hover:bg-red-700 text-white hover:shadow-xl transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:$,disabled:!a,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Asset"]})})]}),d.jsx("button",{className:`px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg ${E?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white hover:shadow-xl transform hover:-translate-y-0.5"}`,onClick:Q,disabled:E,children:d.jsx("div",{className:"flex items-center gap-2",children:E?d.jsxs(d.Fragment,{children:[d.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving Changes..."]}):d.jsxs(d.Fragment,{children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save All Changes"]})})})]}),D&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl p-8 w-full max-w-md border-2 border-[#AF524D] shadow-2xl",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold text-[#381914]",children:"Upload Asset"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Upload a new asset file"})]}),d.jsx("button",{onClick:fe,className:"text-gray-500 hover:text-gray-700 text-3xl font-bold cursor-pointer hover:bg-gray-100 rounded-full w-10 h-10 flex items-center justify-center transition-colors",children:"×"})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Select Asset File"}),d.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-[#AF524D] transition-colors relative cursor-pointer",onClick:()=>{const re=document.getElementById("asset-upload-input");re&&re.click()},children:[d.jsx("input",{type:"file",id:"asset-upload-input",accept:"image/*,.svg,.png,.jpg,.jpeg,.gif",onChange:re=>{const xe=re.target.files[0];N(xe)},className:"hidden"}),d.jsxs("div",{className:"space-y-2 pointer-events-none",children:[d.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:d.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),d.jsxs("div",{className:"text-sm text-gray-600",children:[d.jsx("span",{className:"font-medium text-[#AF524D]",children:"Click to upload"})," or drag and drop"]}),d.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, SVG, GIF up to 10MB"})]})]}),V&&d.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:d.jsxs("p",{className:"text-sm text-green-800 font-medium",children:["Selected: ",V.name]})})]}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx("button",{onClick:fe,className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-xl hover:bg-gray-400 transition-colors font-medium",children:"Cancel"}),d.jsx("button",{onClick:q,disabled:!V||H,className:`px-6 py-3 rounded-xl font-medium transition-all duration-200 ${!V||H?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}`,children:H?d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):"Upload Asset"})]})]})]},F)})]})},Vg=({children:n,allowedRoles:e})=>{const{session:t,userRole:s,loading:r}=j.useContext(Xp);return r?d.jsx(Bo,{message:"Checking authentication..."}):!t||!t.user?d.jsx(qb,{to:"/login"}):e.includes(s)?n:d.jsx(qb,{to:"/"})},I8=()=>{const n=tn(),e=n.pathname.split("/"),t=e.indexOf("adminpage"),s=t!==-1&&e[t+1]?e[t+1]:"inventory";return console.log("🔍 AdminSidebar Debug:",{fullPath:n.pathname,pathSegments:e,adminIndex:t,currentPath:s,decodedPath:decodeURIComponent(s)}),d.jsx("aside",{className:"w-52 bg-white border-4 border-[#AF524D] py-4 px-2 rounded-2xl max-h-fit",children:d.jsx("ul",{className:"space-y-2",children:[{name:"Inventory",path:"inventory"},{name:"Cake Orders",path:"cake orders"},{name:"Cakes",path:"cakes"},{name:"Custom Cake Assets",path:"custom cake assets"}].map((r,a)=>{const l=decodeURIComponent(s),u=l===r.path;return console.log(`🔍 Checking ${r.name}:`,{optPath:r.path,currentPath:s,decodedCurrentPath:l,isActive:u}),d.jsx(Xt,{to:`/adminpage/${r.path}`,className:`block text-sm px-3 py-2 rounded border transition-all duration-200 ${u?"bg-[#AF524D] text-white border-[#AF524D] shadow-md transform scale-105":"text-gray-700 hover:bg-[#DFBFA6] border-gray-300 hover:border-[#AF524D] hover:text-[#AF524D]"}`,children:r.name},a)})})})},H8=()=>d.jsxs("section",{className:"flex flex-col md:flex-row gap-4 p-4 bg-[#F8E6B4] min-h-screen",children:[d.jsx(I8,{}),d.jsx("div",{className:"flex-1",children:d.jsx(Nk,{})})]}),$8=()=>{const[n,e]=j.useState(null),[t,s]=j.useState(!0),{session:r,signOut:a}=Ti(),l=Ci();j.useEffect(()=>{(async()=>{if(!r?.user?.id)return;const{data:f,error:g}=await ve.from("ADMIN").select("*").eq("admin_uid",r.user.id).single();g?(console.error("Admin not found:",g.message),e(null)):e(f),s(!1)})()},[r]);const u=async()=>{try{await a(),l("/login"),setTimeout(()=>window.scrollTo(0,0),100)}catch(h){console.error("Error signing out:",h)}};return t?d.jsx(Bo,{message:"Loading profile..."}):n?d.jsx("section",{className:"bg-gradient-to-t from-[#424220] to-[#F8E6B4] min-h-screen flex flex-col items-center justify-center py-20 px-10",children:d.jsxs("div",{className:"bg-[linear-gradient(to_bottom,_white_0%,_#DFDAC7_51%,_#A8A599_100%)] w-full p-10 rounded-2xl shadow-2xl max-w-xl",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h1",{className:"text-3xl font-bold text-black",children:"Admin Profile"}),d.jsx("button",{onClick:u,className:"bg-red-500 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded cursor-pointer",children:"Sign Out"})]}),d.jsx("p",{className:"text-lg text-gray-500",children:"View your admin account information"}),d.jsx("hr",{className:"my-6 border-gray-400"}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-gray-500 font-semibold mb-2",children:"Username"}),d.jsx("p",{className:"text-black text-lg",children:n.username})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-gray-500 font-semibold mb-2",children:"Email"}),d.jsx("p",{className:"text-black text-lg",children:n.admin_email})]})]})}):d.jsx("p",{className:"text-center text-red-500 text-lg",children:"No admin data found."})},G8=()=>{const{pathname:n}=tn();j.useEffect(()=>{const e=()=>{window.scrollTo?window.scrollTo(0,0):window.scroll?window.scroll(0,0):document.documentElement.scrollTop!==void 0?document.documentElement.scrollTop=0:document.body.scrollTop!==void 0&&(document.body.scrollTop=0)};e();const t=setTimeout(e,100);return()=>clearTimeout(t)},[n])};function Y8(){const n=tn();return d.jsx(o3,{mode:"wait",children:d.jsxs(Ok,{location:n,children:[d.jsx(rs,{path:"/signup",element:d.jsx(ws,{children:d.jsx(GM,{})})}),d.jsx(rs,{path:"/login",element:d.jsx(ws,{children:d.jsx(KM,{})})}),d.jsx(rs,{path:"/reset-password",element:d.jsx(ws,{children:d.jsx(QM,{})})}),d.jsx(rs,{path:"/",element:d.jsx(ws,{children:d.jsx(XM,{})})}),d.jsx(rs,{path:"/aboutus",element:d.jsx(ws,{children:d.jsx(ZM,{})})}),d.jsx(rs,{path:"/contactus",element:d.jsx(ws,{children:d.jsx(hR,{})})}),d.jsx(rs,{path:"/cakecatalog",element:d.jsx(ws,{children:d.jsx(qP,{})})}),d.jsx(rs,{path:"/cart",element:d.jsx(ws,{children:d.jsx(WP,{})})}),d.jsx(rs,{path:"/cakecustomization",element:d.jsx(ws,{children:d.jsx(B8,{})})}),d.jsx(rs,{path:"/profile",element:d.jsx(Vg,{allowedRoles:["customer"],children:d.jsx(ws,{children:d.jsx(GP,{})})})}),d.jsxs(rs,{path:"/adminpage",element:d.jsx(Vg,{allowedRoles:["admin"],children:d.jsx(H8,{})}),children:[d.jsx(rs,{index:!0,element:d.jsx(ws,{children:d.jsx(M2,{})})}),d.jsx(rs,{path:"inventory",element:d.jsx(ws,{children:d.jsx(M2,{})})}),d.jsx(rs,{path:"cakes",element:d.jsx(ws,{children:d.jsx(U8,{})})}),d.jsx(rs,{path:"cake orders",element:d.jsx(ws,{children:d.jsx(z8,{})})}),d.jsx(rs,{path:"custom cake assets",element:d.jsx(ws,{children:d.jsx(V8,{})})})]}),d.jsx(rs,{path:"/admin/profile",element:d.jsx(Vg,{allowedRoles:["admin"],children:d.jsx(ws,{children:d.jsx($8,{})})})})]},n.pathname)})}function q8(){return G8(),d.jsxs(d.Fragment,{children:[d.jsx(aD,{position:"top-center",reverseOrder:!1}),d.jsx(HM,{}),d.jsx(Y8,{}),d.jsx(fR,{}),d.jsx($M,{})]})}FE.createRoot(document.getElementById("root")).render(d.jsx(pN,{children:d.jsx(sA,{children:d.jsx(q8,{})})}));
